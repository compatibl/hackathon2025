/**
 * Copyright (C) 2003-present CompatibL. All rights reserved.
 * This file contains valuable trade secrets and may be copied, stored, used,
 * or distributed only in compliance with the terms of a written commercial
 * license from CompatibL and with the inclusion of this copyright notice.
 */
import{l as le}from"./controls-B-lqj8_S.js";/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.50.0(c321d0fbecb50ab8a5365fa1965476b0ae63fc87)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var ge=Object.defineProperty,fe=Object.getOwnPropertyDescriptor,me=Object.getOwnPropertyNames,he=Object.prototype.hasOwnProperty,pe=(t,r,i,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let e of me(r))!he.call(t,e)&&e!==i&&ge(t,e,{get:()=>r[e],enumerable:!(n=fe(r,e))||n.enumerable});return t},ve=(t,r,i)=>(pe(t,r,"default"),i),c={};ve(c,le);var be=2*60*1e3,Bt=class{constructor(t){this._defaults=t,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30*1e3),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){this._worker&&Date.now()-this._lastUsedTime>be&&this._stopWorker()}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=c.editor.createWebWorker({moduleId:"vs/language/html/htmlWorker",createData:{languageSettings:this._defaults.options,languageId:this._defaults.languageId},label:this._defaults.languageId}),this._client=this._worker.getProxy()),this._client}getLanguageServiceWorker(...t){let r;return this._getClient().then(i=>{r=i}).then(i=>{if(this._worker)return this._worker.withSyncedResources(t)}).then(i=>r)}},G;(function(t){function r(i){return typeof i=="string"}t.is=r})(G||(G={}));var j;(function(t){function r(i){return typeof i=="string"}t.is=r})(j||(j={}));var J;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function r(i){return typeof i=="number"&&t.MIN_VALUE<=i&&i<=t.MAX_VALUE}t.is=r})(J||(J={}));var L;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function r(i){return typeof i=="number"&&t.MIN_VALUE<=i&&i<=t.MAX_VALUE}t.is=r})(L||(L={}));var k;(function(t){function r(n,e){return n===Number.MAX_VALUE&&(n=L.MAX_VALUE),e===Number.MAX_VALUE&&(e=L.MAX_VALUE),{line:n,character:e}}t.create=r;function i(n){let e=n;return a.objectLiteral(e)&&a.uinteger(e.line)&&a.uinteger(e.character)}t.is=i})(k||(k={}));var m;(function(t){function r(n,e,o,s){if(a.uinteger(n)&&a.uinteger(e)&&a.uinteger(o)&&a.uinteger(s))return{start:k.create(n,e),end:k.create(o,s)};if(k.is(n)&&k.is(e))return{start:n,end:e};throw new Error(`Range#create called with invalid arguments[${n}, ${e}, ${o}, ${s}]`)}t.create=r;function i(n){let e=n;return a.objectLiteral(e)&&k.is(e.start)&&k.is(e.end)}t.is=i})(m||(m={}));var T;(function(t){function r(n,e){return{uri:n,range:e}}t.create=r;function i(n){let e=n;return a.objectLiteral(e)&&m.is(e.range)&&(a.string(e.uri)||a.undefined(e.uri))}t.is=i})(T||(T={}));var Y;(function(t){function r(n,e,o,s){return{targetUri:n,targetRange:e,targetSelectionRange:o,originSelectionRange:s}}t.create=r;function i(n){let e=n;return a.objectLiteral(e)&&m.is(e.targetRange)&&a.string(e.targetUri)&&m.is(e.targetSelectionRange)&&(m.is(e.originSelectionRange)||a.undefined(e.originSelectionRange))}t.is=i})(Y||(Y={}));var N;(function(t){function r(n,e,o,s){return{red:n,green:e,blue:o,alpha:s}}t.create=r;function i(n){const e=n;return a.objectLiteral(e)&&a.numberRange(e.red,0,1)&&a.numberRange(e.green,0,1)&&a.numberRange(e.blue,0,1)&&a.numberRange(e.alpha,0,1)}t.is=i})(N||(N={}));var Z;(function(t){function r(n,e){return{range:n,color:e}}t.create=r;function i(n){const e=n;return a.objectLiteral(e)&&m.is(e.range)&&N.is(e.color)}t.is=i})(Z||(Z={}));var tt;(function(t){function r(n,e,o){return{label:n,textEdit:e,additionalTextEdits:o}}t.create=r;function i(n){const e=n;return a.objectLiteral(e)&&a.string(e.label)&&(a.undefined(e.textEdit)||I.is(e))&&(a.undefined(e.additionalTextEdits)||a.typedArray(e.additionalTextEdits,I.is))}t.is=i})(tt||(tt={}));var S;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(S||(S={}));var et;(function(t){function r(n,e,o,s,u,g){const d={startLine:n,endLine:e};return a.defined(o)&&(d.startCharacter=o),a.defined(s)&&(d.endCharacter=s),a.defined(u)&&(d.kind=u),a.defined(g)&&(d.collapsedText=g),d}t.create=r;function i(n){const e=n;return a.objectLiteral(e)&&a.uinteger(e.startLine)&&a.uinteger(e.startLine)&&(a.undefined(e.startCharacter)||a.uinteger(e.startCharacter))&&(a.undefined(e.endCharacter)||a.uinteger(e.endCharacter))&&(a.undefined(e.kind)||a.string(e.kind))}t.is=i})(et||(et={}));var U;(function(t){function r(n,e){return{location:n,message:e}}t.create=r;function i(n){let e=n;return a.defined(e)&&T.is(e.location)&&a.string(e.message)}t.is=i})(U||(U={}));var y;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(y||(y={}));var nt;(function(t){t.Unnecessary=1,t.Deprecated=2})(nt||(nt={}));var rt;(function(t){function r(i){const n=i;return a.objectLiteral(n)&&a.string(n.href)}t.is=r})(rt||(rt={}));var M;(function(t){function r(n,e,o,s,u,g){let d={range:n,message:e};return a.defined(o)&&(d.severity=o),a.defined(s)&&(d.code=s),a.defined(u)&&(d.source=u),a.defined(g)&&(d.relatedInformation=g),d}t.create=r;function i(n){var e;let o=n;return a.defined(o)&&m.is(o.range)&&a.string(o.message)&&(a.number(o.severity)||a.undefined(o.severity))&&(a.integer(o.code)||a.string(o.code)||a.undefined(o.code))&&(a.undefined(o.codeDescription)||a.string((e=o.codeDescription)===null||e===void 0?void 0:e.href))&&(a.string(o.source)||a.undefined(o.source))&&(a.undefined(o.relatedInformation)||a.typedArray(o.relatedInformation,U.is))}t.is=i})(M||(M={}));var x;(function(t){function r(n,e,...o){let s={title:n,command:e};return a.defined(o)&&o.length>0&&(s.arguments=o),s}t.create=r;function i(n){let e=n;return a.defined(e)&&a.string(e.title)&&a.string(e.command)}t.is=i})(x||(x={}));var I;(function(t){function r(o,s){return{range:o,newText:s}}t.replace=r;function i(o,s){return{range:{start:o,end:o},newText:s}}t.insert=i;function n(o){return{range:o,newText:""}}t.del=n;function e(o){const s=o;return a.objectLiteral(s)&&a.string(s.newText)&&m.is(s.range)}t.is=e})(I||(I={}));var V;(function(t){function r(n,e,o){const s={label:n};return e!==void 0&&(s.needsConfirmation=e),o!==void 0&&(s.description=o),s}t.create=r;function i(n){const e=n;return a.objectLiteral(e)&&a.string(e.label)&&(a.boolean(e.needsConfirmation)||e.needsConfirmation===void 0)&&(a.string(e.description)||e.description===void 0)}t.is=i})(V||(V={}));var E;(function(t){function r(i){const n=i;return a.string(n)}t.is=r})(E||(E={}));var it;(function(t){function r(o,s,u){return{range:o,newText:s,annotationId:u}}t.replace=r;function i(o,s,u){return{range:{start:o,end:o},newText:s,annotationId:u}}t.insert=i;function n(o,s){return{range:o,newText:"",annotationId:s}}t.del=n;function e(o){const s=o;return I.is(s)&&(V.is(s.annotationId)||E.is(s.annotationId))}t.is=e})(it||(it={}));var O;(function(t){function r(n,e){return{textDocument:n,edits:e}}t.create=r;function i(n){let e=n;return a.defined(e)&&z.is(e.textDocument)&&Array.isArray(e.edits)}t.is=i})(O||(O={}));var W;(function(t){function r(n,e,o){let s={kind:"create",uri:n};return e!==void 0&&(e.overwrite!==void 0||e.ignoreIfExists!==void 0)&&(s.options=e),o!==void 0&&(s.annotationId=o),s}t.create=r;function i(n){let e=n;return e&&e.kind==="create"&&a.string(e.uri)&&(e.options===void 0||(e.options.overwrite===void 0||a.boolean(e.options.overwrite))&&(e.options.ignoreIfExists===void 0||a.boolean(e.options.ignoreIfExists)))&&(e.annotationId===void 0||E.is(e.annotationId))}t.is=i})(W||(W={}));var H;(function(t){function r(n,e,o,s){let u={kind:"rename",oldUri:n,newUri:e};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(u.options=o),s!==void 0&&(u.annotationId=s),u}t.create=r;function i(n){let e=n;return e&&e.kind==="rename"&&a.string(e.oldUri)&&a.string(e.newUri)&&(e.options===void 0||(e.options.overwrite===void 0||a.boolean(e.options.overwrite))&&(e.options.ignoreIfExists===void 0||a.boolean(e.options.ignoreIfExists)))&&(e.annotationId===void 0||E.is(e.annotationId))}t.is=i})(H||(H={}));var K;(function(t){function r(n,e,o){let s={kind:"delete",uri:n};return e!==void 0&&(e.recursive!==void 0||e.ignoreIfNotExists!==void 0)&&(s.options=e),o!==void 0&&(s.annotationId=o),s}t.create=r;function i(n){let e=n;return e&&e.kind==="delete"&&a.string(e.uri)&&(e.options===void 0||(e.options.recursive===void 0||a.boolean(e.options.recursive))&&(e.options.ignoreIfNotExists===void 0||a.boolean(e.options.ignoreIfNotExists)))&&(e.annotationId===void 0||E.is(e.annotationId))}t.is=i})(K||(K={}));var X;(function(t){function r(i){let n=i;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(e=>a.string(e.kind)?W.is(e)||H.is(e)||K.is(e):O.is(e)))}t.is=r})(X||(X={}));var ot;(function(t){function r(n){return{uri:n}}t.create=r;function i(n){let e=n;return a.defined(e)&&a.string(e.uri)}t.is=i})(ot||(ot={}));var at;(function(t){function r(n,e){return{uri:n,version:e}}t.create=r;function i(n){let e=n;return a.defined(e)&&a.string(e.uri)&&a.integer(e.version)}t.is=i})(at||(at={}));var z;(function(t){function r(n,e){return{uri:n,version:e}}t.create=r;function i(n){let e=n;return a.defined(e)&&a.string(e.uri)&&(e.version===null||a.integer(e.version))}t.is=i})(z||(z={}));var st;(function(t){function r(n,e,o,s){return{uri:n,languageId:e,version:o,text:s}}t.create=r;function i(n){let e=n;return a.defined(e)&&a.string(e.uri)&&a.string(e.languageId)&&a.integer(e.version)&&a.string(e.text)}t.is=i})(st||(st={}));var $;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function r(i){const n=i;return n===t.PlainText||n===t.Markdown}t.is=r})($||($={}));var C;(function(t){function r(i){const n=i;return a.objectLiteral(i)&&$.is(n.kind)&&a.string(n.value)}t.is=r})(C||(C={}));var h;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(h||(h={}));var B;(function(t){t.PlainText=1,t.Snippet=2})(B||(B={}));var ut;(function(t){t.Deprecated=1})(ut||(ut={}));var ct;(function(t){function r(n,e,o){return{newText:n,insert:e,replace:o}}t.create=r;function i(n){const e=n;return e&&a.string(e.newText)&&m.is(e.insert)&&m.is(e.replace)}t.is=i})(ct||(ct={}));var dt;(function(t){t.asIs=1,t.adjustIndentation=2})(dt||(dt={}));var lt;(function(t){function r(i){const n=i;return n&&(a.string(n.detail)||n.detail===void 0)&&(a.string(n.description)||n.description===void 0)}t.is=r})(lt||(lt={}));var gt;(function(t){function r(i){return{label:i}}t.create=r})(gt||(gt={}));var ft;(function(t){function r(i,n){return{items:i||[],isIncomplete:!!n}}t.create=r})(ft||(ft={}));var P;(function(t){function r(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=r;function i(n){const e=n;return a.string(e)||a.objectLiteral(e)&&a.string(e.language)&&a.string(e.value)}t.is=i})(P||(P={}));var mt;(function(t){function r(i){let n=i;return!!n&&a.objectLiteral(n)&&(C.is(n.contents)||P.is(n.contents)||a.typedArray(n.contents,P.is))&&(i.range===void 0||m.is(i.range))}t.is=r})(mt||(mt={}));var ht;(function(t){function r(i,n){return n?{label:i,documentation:n}:{label:i}}t.create=r})(ht||(ht={}));var pt;(function(t){function r(i,n,...e){let o={label:i};return a.defined(n)&&(o.documentation=n),a.defined(e)?o.parameters=e:o.parameters=[],o}t.create=r})(pt||(pt={}));var A;(function(t){t.Text=1,t.Read=2,t.Write=3})(A||(A={}));var vt;(function(t){function r(i,n){let e={range:i};return a.number(n)&&(e.kind=n),e}t.create=r})(vt||(vt={}));var p;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(p||(p={}));var bt;(function(t){t.Deprecated=1})(bt||(bt={}));var _t;(function(t){function r(i,n,e,o,s){let u={name:i,kind:n,location:{uri:o,range:e}};return s&&(u.containerName=s),u}t.create=r})(_t||(_t={}));var kt;(function(t){function r(i,n,e,o){return o!==void 0?{name:i,kind:n,location:{uri:e,range:o}}:{name:i,kind:n,location:{uri:e}}}t.create=r})(kt||(kt={}));var wt;(function(t){function r(n,e,o,s,u,g){let d={name:n,detail:e,kind:o,range:s,selectionRange:u};return g!==void 0&&(d.children=g),d}t.create=r;function i(n){let e=n;return e&&a.string(e.name)&&a.number(e.kind)&&m.is(e.range)&&m.is(e.selectionRange)&&(e.detail===void 0||a.string(e.detail))&&(e.deprecated===void 0||a.boolean(e.deprecated))&&(e.children===void 0||Array.isArray(e.children))&&(e.tags===void 0||Array.isArray(e.tags))}t.is=i})(wt||(wt={}));var yt;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(yt||(yt={}));var D;(function(t){t.Invoked=1,t.Automatic=2})(D||(D={}));var xt;(function(t){function r(n,e,o){let s={diagnostics:n};return e!=null&&(s.only=e),o!=null&&(s.triggerKind=o),s}t.create=r;function i(n){let e=n;return a.defined(e)&&a.typedArray(e.diagnostics,M.is)&&(e.only===void 0||a.typedArray(e.only,a.string))&&(e.triggerKind===void 0||e.triggerKind===D.Invoked||e.triggerKind===D.Automatic)}t.is=i})(xt||(xt={}));var It;(function(t){function r(n,e,o){let s={title:n},u=!0;return typeof e=="string"?(u=!1,s.kind=e):x.is(e)?s.command=e:s.edit=e,u&&o!==void 0&&(s.kind=o),s}t.create=r;function i(n){let e=n;return e&&a.string(e.title)&&(e.diagnostics===void 0||a.typedArray(e.diagnostics,M.is))&&(e.kind===void 0||a.string(e.kind))&&(e.edit!==void 0||e.command!==void 0)&&(e.command===void 0||x.is(e.command))&&(e.isPreferred===void 0||a.boolean(e.isPreferred))&&(e.edit===void 0||X.is(e.edit))}t.is=i})(It||(It={}));var Et;(function(t){function r(n,e){let o={range:n};return a.defined(e)&&(o.data=e),o}t.create=r;function i(n){let e=n;return a.defined(e)&&m.is(e.range)&&(a.undefined(e.command)||x.is(e.command))}t.is=i})(Et||(Et={}));var St;(function(t){function r(n,e){return{tabSize:n,insertSpaces:e}}t.create=r;function i(n){let e=n;return a.defined(e)&&a.uinteger(e.tabSize)&&a.boolean(e.insertSpaces)}t.is=i})(St||(St={}));var At;(function(t){function r(n,e,o){return{range:n,target:e,data:o}}t.create=r;function i(n){let e=n;return a.defined(e)&&m.is(e.range)&&(a.undefined(e.target)||a.string(e.target))}t.is=i})(At||(At={}));var Ct;(function(t){function r(n,e){return{range:n,parent:e}}t.create=r;function i(n){let e=n;return a.objectLiteral(e)&&m.is(e.range)&&(e.parent===void 0||t.is(e.parent))}t.is=i})(Ct||(Ct={}));var Rt;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(Rt||(Rt={}));var Lt;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Lt||(Lt={}));var Tt;(function(t){function r(i){const n=i;return a.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}t.is=r})(Tt||(Tt={}));var Mt;(function(t){function r(n,e){return{range:n,text:e}}t.create=r;function i(n){const e=n;return e!=null&&m.is(e.range)&&a.string(e.text)}t.is=i})(Mt||(Mt={}));var Pt;(function(t){function r(n,e,o){return{range:n,variableName:e,caseSensitiveLookup:o}}t.create=r;function i(n){const e=n;return e!=null&&m.is(e.range)&&a.boolean(e.caseSensitiveLookup)&&(a.string(e.variableName)||e.variableName===void 0)}t.is=i})(Pt||(Pt={}));var Dt;(function(t){function r(n,e){return{range:n,expression:e}}t.create=r;function i(n){const e=n;return e!=null&&m.is(e.range)&&(a.string(e.expression)||e.expression===void 0)}t.is=i})(Dt||(Dt={}));var Ft;(function(t){function r(n,e){return{frameId:n,stoppedLocation:e}}t.create=r;function i(n){const e=n;return a.defined(e)&&m.is(n.stoppedLocation)}t.is=i})(Ft||(Ft={}));var q;(function(t){t.Type=1,t.Parameter=2;function r(i){return i===1||i===2}t.is=r})(q||(q={}));var Q;(function(t){function r(n){return{value:n}}t.create=r;function i(n){const e=n;return a.objectLiteral(e)&&(e.tooltip===void 0||a.string(e.tooltip)||C.is(e.tooltip))&&(e.location===void 0||T.is(e.location))&&(e.command===void 0||x.is(e.command))}t.is=i})(Q||(Q={}));var jt;(function(t){function r(n,e,o){const s={position:n,label:e};return o!==void 0&&(s.kind=o),s}t.create=r;function i(n){const e=n;return a.objectLiteral(e)&&k.is(e.position)&&(a.string(e.label)||a.typedArray(e.label,Q.is))&&(e.kind===void 0||q.is(e.kind))&&e.textEdits===void 0||a.typedArray(e.textEdits,I.is)&&(e.tooltip===void 0||a.string(e.tooltip)||C.is(e.tooltip))&&(e.paddingLeft===void 0||a.boolean(e.paddingLeft))&&(e.paddingRight===void 0||a.boolean(e.paddingRight))}t.is=i})(jt||(jt={}));var Nt;(function(t){function r(i){return{kind:"snippet",value:i}}t.createSnippet=r})(Nt||(Nt={}));var Ut;(function(t){function r(i,n,e,o){return{insertText:i,filterText:n,range:e,command:o}}t.create=r})(Ut||(Ut={}));var Vt;(function(t){function r(i){return{items:i}}t.create=r})(Vt||(Vt={}));var Ot;(function(t){t.Invoked=0,t.Automatic=1})(Ot||(Ot={}));var Wt;(function(t){function r(i,n){return{range:i,text:n}}t.create=r})(Wt||(Wt={}));var Ht;(function(t){function r(i,n){return{triggerKind:i,selectedCompletionInfo:n}}t.create=r})(Ht||(Ht={}));var Kt;(function(t){function r(i){const n=i;return a.objectLiteral(n)&&j.is(n.uri)&&a.string(n.name)}t.is=r})(Kt||(Kt={}));var Xt;(function(t){function r(o,s,u,g){return new _e(o,s,u,g)}t.create=r;function i(o){let s=o;return!!(a.defined(s)&&a.string(s.uri)&&(a.undefined(s.languageId)||a.string(s.languageId))&&a.uinteger(s.lineCount)&&a.func(s.getText)&&a.func(s.positionAt)&&a.func(s.offsetAt))}t.is=i;function n(o,s){let u=o.getText(),g=e(s,(f,b)=>{let _=f.range.start.line-b.range.start.line;return _===0?f.range.start.character-b.range.start.character:_}),d=u.length;for(let f=g.length-1;f>=0;f--){let b=g[f],_=o.offsetAt(b.range.start),l=o.offsetAt(b.range.end);if(l<=d)u=u.substring(0,_)+b.newText+u.substring(l,u.length);else throw new Error("Overlapping edit");d=_}return u}t.applyEdits=n;function e(o,s){if(o.length<=1)return o;const u=o.length/2|0,g=o.slice(0,u),d=o.slice(u);e(g,s),e(d,s);let f=0,b=0,_=0;for(;f<g.length&&b<d.length;)s(g[f],d[b])<=0?o[_++]=g[f++]:o[_++]=d[b++];for(;f<g.length;)o[_++]=g[f++];for(;b<d.length;)o[_++]=d[b++];return o}})(Xt||(Xt={}));var _e=class{constructor(t,r,i,n){this._uri=t,this._languageId=r,this._version=i,this._content=n,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let r=this.offsetAt(t.start),i=this.offsetAt(t.end);return this._content.substring(r,i)}return this._content}update(t,r){this._content=t.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let t=[],r=this._content,i=!0;for(let n=0;n<r.length;n++){i&&(t.push(n),i=!1);let e=r.charAt(n);i=e==="\r"||e===`
`,e==="\r"&&n+1<r.length&&r.charAt(n+1)===`
`&&n++}i&&r.length>0&&t.push(r.length),this._lineOffsets=t}return this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let r=this.getLineOffsets(),i=0,n=r.length;if(n===0)return k.create(0,t);for(;i<n;){let o=Math.floor((i+n)/2);r[o]>t?n=o:i=o+1}let e=i-1;return k.create(e,t-r[e])}offsetAt(t){let r=this.getLineOffsets();if(t.line>=r.length)return this._content.length;if(t.line<0)return 0;let i=r[t.line],n=t.line+1<r.length?r[t.line+1]:this._content.length;return Math.max(Math.min(i+t.character,n),i)}get lineCount(){return this.getLineOffsets().length}},a;(function(t){const r=Object.prototype.toString;function i(l){return typeof l<"u"}t.defined=i;function n(l){return typeof l>"u"}t.undefined=n;function e(l){return l===!0||l===!1}t.boolean=e;function o(l){return r.call(l)==="[object String]"}t.string=o;function s(l){return r.call(l)==="[object Number]"}t.number=s;function u(l,F,de){return r.call(l)==="[object Number]"&&F<=l&&l<=de}t.numberRange=u;function g(l){return r.call(l)==="[object Number]"&&-2147483648<=l&&l<=2147483647}t.integer=g;function d(l){return r.call(l)==="[object Number]"&&0<=l&&l<=2147483647}t.uinteger=d;function f(l){return r.call(l)==="[object Function]"}t.func=f;function b(l){return l!==null&&typeof l=="object"}t.objectLiteral=b;function _(l,F){return Array.isArray(l)&&l.every(F)}t.typedArray=_})(a||(a={}));var Pe=class{constructor(t,r,i){this._languageId=t,this._worker=r,this._disposables=[],this._listener=Object.create(null);const n=o=>{let s=o.getLanguageId();if(s!==this._languageId)return;let u;this._listener[o.uri.toString()]=o.onDidChangeContent(()=>{window.clearTimeout(u),u=window.setTimeout(()=>this._doValidate(o.uri,s),500)}),this._doValidate(o.uri,s)},e=o=>{c.editor.setModelMarkers(o,this._languageId,[]);let s=o.uri.toString(),u=this._listener[s];u&&(u.dispose(),delete this._listener[s])};this._disposables.push(c.editor.onDidCreateModel(n)),this._disposables.push(c.editor.onWillDisposeModel(e)),this._disposables.push(c.editor.onDidChangeModelLanguage(o=>{e(o.model),n(o.model)})),this._disposables.push(i(o=>{c.editor.getModels().forEach(s=>{s.getLanguageId()===this._languageId&&(e(s),n(s))})})),this._disposables.push({dispose:()=>{c.editor.getModels().forEach(e);for(let o in this._listener)this._listener[o].dispose()}}),c.editor.getModels().forEach(n)}dispose(){this._disposables.forEach(t=>t&&t.dispose()),this._disposables.length=0}_doValidate(t,r){this._worker(t).then(i=>i.doValidation(t.toString())).then(i=>{const n=i.map(o=>we(t,o));let e=c.editor.getModel(t);e&&e.getLanguageId()===r&&c.editor.setModelMarkers(e,r,n)}).then(void 0,i=>{console.error(i)})}};function ke(t){switch(t){case y.Error:return c.MarkerSeverity.Error;case y.Warning:return c.MarkerSeverity.Warning;case y.Information:return c.MarkerSeverity.Info;case y.Hint:return c.MarkerSeverity.Hint;default:return c.MarkerSeverity.Info}}function we(t,r){let i=typeof r.code=="number"?String(r.code):r.code;return{severity:ke(r.severity),startLineNumber:r.range.start.line+1,startColumn:r.range.start.character+1,endLineNumber:r.range.end.line+1,endColumn:r.range.end.character+1,message:r.message,code:i,source:r.source}}var ye=class{constructor(t,r){this._worker=t,this._triggerCharacters=r}get triggerCharacters(){return this._triggerCharacters}provideCompletionItems(t,r,i,n){const e=t.uri;return this._worker(e).then(o=>o.doComplete(e.toString(),w(r))).then(o=>{if(!o)return;const s=t.getWordUntilPosition(r),u=new c.Range(r.lineNumber,s.startColumn,r.lineNumber,s.endColumn),g=o.items.map(d=>{const f={label:d.label,insertText:d.insertText||d.label,sortText:d.sortText,filterText:d.filterText,documentation:d.documentation,detail:d.detail,command:Ee(d.command),range:u,kind:Ie(d.kind)};return d.textEdit&&(xe(d.textEdit)?f.range={insert:v(d.textEdit.insert),replace:v(d.textEdit.replace)}:f.range=v(d.textEdit.range),f.insertText=d.textEdit.newText),d.additionalTextEdits&&(f.additionalTextEdits=d.additionalTextEdits.map(R)),d.insertTextFormat===B.Snippet&&(f.insertTextRules=c.languages.CompletionItemInsertTextRule.InsertAsSnippet),f});return{isIncomplete:o.isIncomplete,suggestions:g}})}};function w(t){if(t)return{character:t.column-1,line:t.lineNumber-1}}function qt(t){if(t)return{start:{line:t.startLineNumber-1,character:t.startColumn-1},end:{line:t.endLineNumber-1,character:t.endColumn-1}}}function v(t){if(t)return new c.Range(t.start.line+1,t.start.character+1,t.end.line+1,t.end.character+1)}function xe(t){return typeof t.insert<"u"&&typeof t.replace<"u"}function Ie(t){const r=c.languages.CompletionItemKind;switch(t){case h.Text:return r.Text;case h.Method:return r.Method;case h.Function:return r.Function;case h.Constructor:return r.Constructor;case h.Field:return r.Field;case h.Variable:return r.Variable;case h.Class:return r.Class;case h.Interface:return r.Interface;case h.Module:return r.Module;case h.Property:return r.Property;case h.Unit:return r.Unit;case h.Value:return r.Value;case h.Enum:return r.Enum;case h.Keyword:return r.Keyword;case h.Snippet:return r.Snippet;case h.Color:return r.Color;case h.File:return r.File;case h.Reference:return r.Reference}return r.Property}function R(t){if(t)return{range:v(t.range),text:t.newText}}function Ee(t){return t&&t.command==="editor.action.triggerSuggest"?{id:t.command,title:t.title,arguments:t.arguments}:void 0}var Qt=class{constructor(t){this._worker=t}provideHover(t,r,i){let n=t.uri;return this._worker(n).then(e=>e.doHover(n.toString(),w(r))).then(e=>{if(e)return{range:v(e.range),contents:Ae(e.contents)}})}};function Se(t){return t&&typeof t=="object"&&typeof t.kind=="string"}function zt(t){return typeof t=="string"?{value:t}:Se(t)?t.kind==="plaintext"?{value:t.value.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}:{value:t.value}:{value:"```"+t.language+`
`+t.value+"\n```\n"}}function Ae(t){if(t)return Array.isArray(t)?t.map(zt):[zt(t)]}var Gt=class{constructor(t){this._worker=t}provideDocumentHighlights(t,r,i){const n=t.uri;return this._worker(n).then(e=>e.findDocumentHighlights(n.toString(),w(r))).then(e=>{if(e)return e.map(o=>({range:v(o.range),kind:Ce(o.kind)}))})}};function Ce(t){switch(t){case A.Read:return c.languages.DocumentHighlightKind.Read;case A.Write:return c.languages.DocumentHighlightKind.Write;case A.Text:return c.languages.DocumentHighlightKind.Text}return c.languages.DocumentHighlightKind.Text}var De=class{constructor(t){this._worker=t}provideDefinition(t,r,i){const n=t.uri;return this._worker(n).then(e=>e.findDefinition(n.toString(),w(r))).then(e=>{if(e)return[Jt(e)]})}};function Jt(t){return{uri:c.Uri.parse(t.uri),range:v(t.range)}}var Fe=class{constructor(t){this._worker=t}provideReferences(t,r,i,n){const e=t.uri;return this._worker(e).then(o=>o.findReferences(e.toString(),w(r))).then(o=>{if(o)return o.map(Jt)})}},Yt=class{constructor(t){this._worker=t}provideRenameEdits(t,r,i,n){const e=t.uri;return this._worker(e).then(o=>o.doRename(e.toString(),w(r),i)).then(o=>Re(o))}};function Re(t){if(!t||!t.changes)return;let r=[];for(let i in t.changes){const n=c.Uri.parse(i);for(let e of t.changes[i])r.push({resource:n,versionId:void 0,textEdit:{range:v(e.range),text:e.newText}})}return{edits:r}}var Zt=class{constructor(t){this._worker=t}provideDocumentSymbols(t,r){const i=t.uri;return this._worker(i).then(n=>n.findDocumentSymbols(i.toString())).then(n=>{if(n)return n.map(e=>Le(e)?te(e):{name:e.name,detail:"",containerName:e.containerName,kind:ee(e.kind),range:v(e.location.range),selectionRange:v(e.location.range),tags:[]})})}};function Le(t){return"children"in t}function te(t){return{name:t.name,detail:t.detail??"",kind:ee(t.kind),range:v(t.range),selectionRange:v(t.selectionRange),tags:t.tags??[],children:(t.children??[]).map(r=>te(r))}}function ee(t){let r=c.languages.SymbolKind;switch(t){case p.File:return r.File;case p.Module:return r.Module;case p.Namespace:return r.Namespace;case p.Package:return r.Package;case p.Class:return r.Class;case p.Method:return r.Method;case p.Property:return r.Property;case p.Field:return r.Field;case p.Constructor:return r.Constructor;case p.Enum:return r.Enum;case p.Interface:return r.Interface;case p.Function:return r.Function;case p.Variable:return r.Variable;case p.Constant:return r.Constant;case p.String:return r.String;case p.Number:return r.Number;case p.Boolean:return r.Boolean;case p.Array:return r.Array}return r.Function}var ne=class{constructor(t){this._worker=t}provideLinks(t,r){const i=t.uri;return this._worker(i).then(n=>n.findDocumentLinks(i.toString())).then(n=>{if(n)return{links:n.map(e=>({range:v(e.range),url:e.target}))}})}},re=class{constructor(t){this._worker=t}provideDocumentFormattingEdits(t,r,i){const n=t.uri;return this._worker(n).then(e=>e.format(n.toString(),null,oe(r)).then(o=>{if(!(!o||o.length===0))return o.map(R)}))}},ie=class{constructor(t){this._worker=t,this.canFormatMultipleRanges=!1}provideDocumentRangeFormattingEdits(t,r,i,n){const e=t.uri;return this._worker(e).then(o=>o.format(e.toString(),qt(r),oe(i)).then(s=>{if(!(!s||s.length===0))return s.map(R)}))}};function oe(t){return{tabSize:t.tabSize,insertSpaces:t.insertSpaces}}var je=class{constructor(t){this._worker=t}provideDocumentColors(t,r){const i=t.uri;return this._worker(i).then(n=>n.findDocumentColors(i.toString())).then(n=>{if(n)return n.map(e=>({color:e.color,range:v(e.range)}))})}provideColorPresentations(t,r,i){const n=t.uri;return this._worker(n).then(e=>e.getColorPresentations(n.toString(),r.color,qt(r.range))).then(e=>{if(e)return e.map(o=>{let s={label:o.label};return o.textEdit&&(s.textEdit=R(o.textEdit)),o.additionalTextEdits&&(s.additionalTextEdits=o.additionalTextEdits.map(R)),s})})}},ae=class{constructor(t){this._worker=t}provideFoldingRanges(t,r,i){const n=t.uri;return this._worker(n).then(e=>e.getFoldingRanges(n.toString(),r)).then(e=>{if(e)return e.map(o=>{const s={start:o.startLine+1,end:o.endLine+1};return typeof o.kind<"u"&&(s.kind=Te(o.kind)),s})})}};function Te(t){switch(t){case S.Comment:return c.languages.FoldingRangeKind.Comment;case S.Imports:return c.languages.FoldingRangeKind.Imports;case S.Region:return c.languages.FoldingRangeKind.Region}}var se=class{constructor(t){this._worker=t}provideSelectionRanges(t,r,i){const n=t.uri;return this._worker(n).then(e=>e.getSelectionRanges(n.toString(),r.map(w))).then(e=>{if(e)return e.map(o=>{const s=[];for(;o;)s.push({range:v(o.range)}),o=o.parent;return s})})}},ue=class extends ye{constructor(t){super(t,[".",":","<",'"',"=","/"])}};function Ne(t){const r=new Bt(t),i=(...e)=>r.getLanguageServiceWorker(...e);let n=t.languageId;c.languages.registerCompletionItemProvider(n,new ue(i)),c.languages.registerHoverProvider(n,new Qt(i)),c.languages.registerDocumentHighlightProvider(n,new Gt(i)),c.languages.registerLinkProvider(n,new ne(i)),c.languages.registerFoldingRangeProvider(n,new ae(i)),c.languages.registerDocumentSymbolProvider(n,new Zt(i)),c.languages.registerSelectionRangeProvider(n,new se(i)),c.languages.registerRenameProvider(n,new Yt(i)),n==="html"&&(c.languages.registerDocumentFormattingEditProvider(n,new re(i)),c.languages.registerDocumentRangeFormattingEditProvider(n,new ie(i)))}function Ue(t){const r=[],i=[],n=new Bt(t);r.push(n);const e=(...s)=>n.getLanguageServiceWorker(...s);function o(){const{languageId:s,modeConfiguration:u}=t;ce(i),u.completionItems&&i.push(c.languages.registerCompletionItemProvider(s,new ue(e))),u.hovers&&i.push(c.languages.registerHoverProvider(s,new Qt(e))),u.documentHighlights&&i.push(c.languages.registerDocumentHighlightProvider(s,new Gt(e))),u.links&&i.push(c.languages.registerLinkProvider(s,new ne(e))),u.documentSymbols&&i.push(c.languages.registerDocumentSymbolProvider(s,new Zt(e))),u.rename&&i.push(c.languages.registerRenameProvider(s,new Yt(e))),u.foldingRanges&&i.push(c.languages.registerFoldingRangeProvider(s,new ae(e))),u.selectionRanges&&i.push(c.languages.registerSelectionRangeProvider(s,new se(e))),u.documentFormattingEdits&&i.push(c.languages.registerDocumentFormattingEditProvider(s,new re(e))),u.documentRangeFormattingEdits&&i.push(c.languages.registerDocumentRangeFormattingEditProvider(s,new ie(e)))}return o(),r.push($t(i)),$t(r)}function $t(t){return{dispose:()=>ce(t)}}function ce(t){for(;t.length;)t.pop().dispose()}export{ye as CompletionAdapter,De as DefinitionAdapter,Pe as DiagnosticsAdapter,je as DocumentColorAdapter,re as DocumentFormattingEditProvider,Gt as DocumentHighlightAdapter,ne as DocumentLinkAdapter,ie as DocumentRangeFormattingEditProvider,Zt as DocumentSymbolAdapter,ae as FoldingRangeAdapter,Qt as HoverAdapter,Fe as ReferenceAdapter,Yt as RenameAdapter,se as SelectionRangeAdapter,Bt as WorkerManager,w as fromPosition,qt as fromRange,Ue as setupMode,Ne as setupMode1,v as toRange,R as toTextEdit};
