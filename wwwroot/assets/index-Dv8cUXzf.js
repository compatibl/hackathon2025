/**
 * Copyright (C) 2003-present CompatibL. All rights reserved.
 * This file contains valuable trade secrets and may be copied, stored, used,
 * or distributed only in compliance with the terms of a written commercial
 * license from CompatibL and with the inclusion of this copyright notice.
 */
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/controls-B-lqj8_S.js","assets/react-BmNO_Eks.js","assets/monaco-C3uQlWyP.js","assets/monaco-Qi0rki7L.css","assets/plotly-D8m7buRl.js"])))=>i.map(i=>d[i]);
var ea=Object.defineProperty;var ta=(K,J,ne)=>J in K?ea(K,J,{enumerable:!0,configurable:!0,writable:!0,value:ne}):K[J]=ne;var Xn=(K,J,ne)=>ta(K,typeof J!="symbol"?J+"":J,ne);import{g as global,j as jsxRuntimeExports,u as useResizeObserver,P as Page,_ as __webpack_exports__GlobalWorkerOptions,a as __webpack_exports__version,i as invariant$1,M as Markdown,k as k_t}from"./controls-B-lqj8_S.js";import{r as reactExports,b as reactDomExports,g as getDefaultExportFromCjs,c as commonjsGlobal,d as generatePath,W as Wt,u as useLocation,e as useNavigate,O as Outlet,C as C$1,a as getAugmentedNamespace,s as schedulerExports,R as ReactDOM,f as useParams,N as Navigate,h as useSearchParams,i as createBrowserRouter,j as RouterProvider}from"./react-BmNO_Eks.js";import{p as process$1,B as Buffer,_ as __vitePreload,m as monaco,P as Position$1}from"./monaco-C3uQlWyP.js";import{d as dayjs,_ as _c,a as __$1,A as AA,P as Pp,W as W5,M as M_,O as OF,w as wk,r as rl,b as Pk,c as Mp,e as dF,f as cx,g as PF,h as cF,m as mf,v as vD,X as X_,p as pF,i as vF,j as WB,z as zB,k as Ml,l as gf$1,n as mB,t as tD,o as hk,R as Rp,q as j_,s as rA,H as Ho,u as wF,x as vk,y as fk,C as CF,B as dk,Z as Zj,D as MF,E as nB,F as rB,G as oB,I as oa,L as LF$2,J as jk,K as PA,N as xF,Q as EA,S as bF,T as SF,U as HF,V as Lj,Y as Ij,$ as $F,a0 as uT,a1 as aF,a2 as iF,a3 as oF,a4 as gF,a5 as BD,a6 as gT$1,a7 as uF,a8 as nA,a9 as RF,aa as Dk,ab as hF,ac as PB,ad as yF,ae as tF,af as nF,ag as DA,ah as TA,ai as kA,aj as Tk,ak as lF,al as RA,am as BB$1,an as AB,ao as LA,ap as EF,aq as fB,ar as vB,as as R_,at as Ac,au as gD,av as K_,aw as bA,ax as mF,ay as GB,az as UB,aA as VA,aB as _A,aC as Ak,aD as rk,aE as sF,aF as HD,aG as MA,aH as Nk,aI as cT,aJ as mT,aK as ik,aL as zT,aM as Lk,aN as Ik,aO as pB,aP as hB,aQ as CB$1,aR as bB,aS as yB,aT as xB,aU as wB,aV as SB,aW as CT,aX as EB$1,aY as RD,aZ as Ek,a_ as IA,a$ as HB,b0 as JT$1,b1 as YT,b2 as GT,b3 as BA$1,b4 as QT,b5 as Fk,b6 as eF,b7 as JA,b8 as QA,b9 as YA,ba as XA,bb as UA,bc as GA,bd as qA,be as WD,bf as RT,bg as HA,bh as jT,bi as wA,bj as VT,bk as q_,bl as Vk,bm as PropTypes,bn as IF,bo as Ck,bp as zA,bq as WA,br as ZA,bs as rF,bt as AT,bu as NF}from"./uikit-tlhC0Ki8.js";import{X as XLSX,x as xlsx_minExports,r as requireSafeBuffer$1,a as requireStreamBrowserify,b as requireInherits_browser,c as require$$0$1,d as requireString_decoder,e as requireEvents,f as requireUtil$1,g as requireBrowser$b}from"./xlsx-DOYlvnI2.js";import{P as Plotly}from"./plotly-D8m7buRl.js";(function(){const J=document.createElement("link").relList;if(J&&J.supports&&J.supports("modulepreload"))return;for(const ce of document.querySelectorAll('link[rel="modulepreload"]'))oe(ce);new MutationObserver(ce=>{for(const ue of ce)if(ue.type==="childList")for(const Ae of ue.addedNodes)Ae.tagName==="LINK"&&Ae.rel==="modulepreload"&&oe(Ae)}).observe(document,{childList:!0,subtree:!0});function ne(ce){const ue={};return ce.integrity&&(ue.integrity=ce.integrity),ce.referrerPolicy&&(ue.referrerPolicy=ce.referrerPolicy),ce.crossOrigin==="use-credentials"?ue.credentials="include":ce.crossOrigin==="anonymous"?ue.credentials="omit":ue.credentials="same-origin",ue}function oe(ce){if(ce.ep)return;ce.ep=!0;const ue=ne(ce);fetch(ce.href,ue)}})();const isString$4=K=>typeof K=="string",defer=()=>{let K,J;const ne=new Promise((oe,ce)=>{K=oe,J=ce});return ne.resolve=K,ne.reject=J,ne},makeString=K=>K==null?"":""+K,copy$1=(K,J,ne)=>{K.forEach(oe=>{J[oe]&&(ne[oe]=J[oe])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=K=>K&&K.indexOf("###")>-1?K.replace(lastOfPathSeparatorRegExp,"."):K,canNotTraverseDeeper=K=>!K||isString$4(K),getLastOfPath=(K,J,ne)=>{const oe=isString$4(J)?J.split("."):J;let ce=0;for(;ce<oe.length-1;){if(canNotTraverseDeeper(K))return{};const ue=cleanKey(oe[ce]);!K[ue]&&ne&&(K[ue]=new ne),Object.prototype.hasOwnProperty.call(K,ue)?K=K[ue]:K={},++ce}return canNotTraverseDeeper(K)?{}:{obj:K,k:cleanKey(oe[ce])}},setPath=(K,J,ne)=>{const{obj:oe,k:ce}=getLastOfPath(K,J,Object);if(oe!==void 0||J.length===1){oe[ce]=ne;return}let ue=J[J.length-1],Ae=J.slice(0,J.length-1),pe=getLastOfPath(K,Ae,Object);for(;pe.obj===void 0&&Ae.length;)ue=`${Ae[Ae.length-1]}.${ue}`,Ae=Ae.slice(0,Ae.length-1),pe=getLastOfPath(K,Ae,Object),pe&&pe.obj&&typeof pe.obj[`${pe.k}.${ue}`]<"u"&&(pe.obj=void 0);pe.obj[`${pe.k}.${ue}`]=ne},pushPath=(K,J,ne,oe)=>{const{obj:ce,k:ue}=getLastOfPath(K,J,Object);ce[ue]=ce[ue]||[],ce[ue].push(ne)},getPath=(K,J)=>{const{obj:ne,k:oe}=getLastOfPath(K,J);if(ne)return ne[oe]},getPathWithDefaults=(K,J,ne)=>{const oe=getPath(K,ne);return oe!==void 0?oe:getPath(J,ne)},deepExtend=(K,J,ne)=>{for(const oe in J)oe!=="__proto__"&&oe!=="constructor"&&(oe in K?isString$4(K[oe])||K[oe]instanceof String||isString$4(J[oe])||J[oe]instanceof String?ne&&(K[oe]=J[oe]):deepExtend(K[oe],J[oe],ne):K[oe]=J[oe]);return K},regexEscape=K=>K.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape$2=K=>isString$4(K)?K.replace(/[&<>"'\/]/g,J=>_entityMap[J]):K;class RegExpCache{constructor(J){this.capacity=J,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(J){const ne=this.regExpMap.get(J);if(ne!==void 0)return ne;const oe=new RegExp(J);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(J,oe),this.regExpQueue.push(J),oe}}const chars$4=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(K,J,ne)=>{J=J||"",ne=ne||"";const oe=chars$4.filter(Ae=>J.indexOf(Ae)<0&&ne.indexOf(Ae)<0);if(oe.length===0)return!0;const ce=looksLikeObjectPathRegExpCache.getRegExp(`(${oe.map(Ae=>Ae==="?"?"\\?":Ae).join("|")})`);let ue=!ce.test(K);if(!ue){const Ae=K.indexOf(ne);Ae>0&&!ce.test(K.substring(0,Ae))&&(ue=!0)}return ue},deepFind=function(K,J){let ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!K)return;if(K[J])return K[J];const oe=J.split(ne);let ce=K;for(let ue=0;ue<oe.length;){if(!ce||typeof ce!="object")return;let Ae,pe="";for(let xe=ue;xe<oe.length;++xe)if(xe!==ue&&(pe+=ne),pe+=oe[xe],Ae=ce[pe],Ae!==void 0){if(["string","number","boolean"].indexOf(typeof Ae)>-1&&xe<oe.length-1)continue;ue+=xe-ue+1;break}ce=Ae}return ce},getCleanedCode=K=>K&&K.replace("_","-"),consoleLogger={type:"logger",log(K){this.output("log",K)},warn(K){this.output("warn",K)},error(K){this.output("error",K)},output(K,J){console&&console[K]&&console[K].apply(console,J)}};let Logger$1=class ki{constructor(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(J,ne)}init(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=ne.prefix||"i18next:",this.logger=J||consoleLogger,this.options=ne,this.debug=ne.debug}log(){for(var J=arguments.length,ne=new Array(J),oe=0;oe<J;oe++)ne[oe]=arguments[oe];return this.forward(ne,"log","",!0)}warn(){for(var J=arguments.length,ne=new Array(J),oe=0;oe<J;oe++)ne[oe]=arguments[oe];return this.forward(ne,"warn","",!0)}error(){for(var J=arguments.length,ne=new Array(J),oe=0;oe<J;oe++)ne[oe]=arguments[oe];return this.forward(ne,"error","")}deprecate(){for(var J=arguments.length,ne=new Array(J),oe=0;oe<J;oe++)ne[oe]=arguments[oe];return this.forward(ne,"warn","WARNING DEPRECATED: ",!0)}forward(J,ne,oe,ce){return ce&&!this.debug?null:(isString$4(J[0])&&(J[0]=`${oe}${this.prefix} ${J[0]}`),this.logger[ne](J))}create(J){return new ki(this.logger,{prefix:`${this.prefix}:${J}:`,...this.options})}clone(J){return J=J||this.options,J.prefix=J.prefix||this.prefix,new ki(this.logger,J)}};var baseLogger=new Logger$1;class EventEmitter{constructor(){this.observers={}}on(J,ne){return J.split(" ").forEach(oe=>{this.observers[oe]||(this.observers[oe]=new Map);const ce=this.observers[oe].get(ne)||0;this.observers[oe].set(ne,ce+1)}),this}off(J,ne){if(this.observers[J]){if(!ne){delete this.observers[J];return}this.observers[J].delete(ne)}}emit(J){for(var ne=arguments.length,oe=new Array(ne>1?ne-1:0),ce=1;ce<ne;ce++)oe[ce-1]=arguments[ce];this.observers[J]&&Array.from(this.observers[J].entries()).forEach(Ae=>{let[pe,xe]=Ae;for(let me=0;me<xe;me++)pe(...oe)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(Ae=>{let[pe,xe]=Ae;for(let me=0;me<xe;me++)pe.apply(pe,[J,...oe])})}}class ResourceStore extends EventEmitter{constructor(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=J||{},this.options=ne,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(J){this.options.ns.indexOf(J)<0&&this.options.ns.push(J)}removeNamespaces(J){const ne=this.options.ns.indexOf(J);ne>-1&&this.options.ns.splice(ne,1)}getResource(J,ne,oe){let ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const ue=ce.keySeparator!==void 0?ce.keySeparator:this.options.keySeparator,Ae=ce.ignoreJSONStructure!==void 0?ce.ignoreJSONStructure:this.options.ignoreJSONStructure;let pe;J.indexOf(".")>-1?pe=J.split("."):(pe=[J,ne],oe&&(Array.isArray(oe)?pe.push(...oe):isString$4(oe)&&ue?pe.push(...oe.split(ue)):pe.push(oe)));const xe=getPath(this.data,pe);return!xe&&!ne&&!oe&&J.indexOf(".")>-1&&(J=pe[0],ne=pe[1],oe=pe.slice(2).join(".")),xe||!Ae||!isString$4(oe)?xe:deepFind(this.data&&this.data[J]&&this.data[J][ne],oe,ue)}addResource(J,ne,oe,ce){let ue=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const Ae=ue.keySeparator!==void 0?ue.keySeparator:this.options.keySeparator;let pe=[J,ne];oe&&(pe=pe.concat(Ae?oe.split(Ae):oe)),J.indexOf(".")>-1&&(pe=J.split("."),ce=ne,ne=pe[1]),this.addNamespaces(ne),setPath(this.data,pe,ce),ue.silent||this.emit("added",J,ne,oe,ce)}addResources(J,ne,oe){let ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const ue in oe)(isString$4(oe[ue])||Array.isArray(oe[ue]))&&this.addResource(J,ne,ue,oe[ue],{silent:!0});ce.silent||this.emit("added",J,ne,oe)}addResourceBundle(J,ne,oe,ce,ue){let Ae=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},pe=[J,ne];J.indexOf(".")>-1&&(pe=J.split("."),ce=oe,oe=ne,ne=pe[1]),this.addNamespaces(ne);let xe=getPath(this.data,pe)||{};Ae.skipCopy||(oe=JSON.parse(JSON.stringify(oe))),ce?deepExtend(xe,oe,ue):xe={...xe,...oe},setPath(this.data,pe,xe),Ae.silent||this.emit("added",J,ne,oe)}removeResourceBundle(J,ne){this.hasResourceBundle(J,ne)&&delete this.data[J][ne],this.removeNamespaces(ne),this.emit("removed",J,ne)}hasResourceBundle(J,ne){return this.getResource(J,ne)!==void 0}getResourceBundle(J,ne){return ne||(ne=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(J,ne)}:this.getResource(J,ne)}getDataByLanguage(J){return this.data[J]}hasLanguageSomeTranslations(J){const ne=this.getDataByLanguage(J);return!!(ne&&Object.keys(ne)||[]).find(ce=>ne[ce]&&Object.keys(ne[ce]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(K){this.processors[K.name]=K},handle(K,J,ne,oe,ce){return K.forEach(ue=>{this.processors[ue]&&(J=this.processors[ue].process(J,ne,oe,ce))}),J}};const checkedLoadedFor={};class Translator extends EventEmitter{constructor(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),copy$1(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],J,this),this.options=ne,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(J){J&&(this.language=J)}exists(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(J==null)return!1;const oe=this.resolve(J,ne);return oe&&oe.res!==void 0}extractFromKey(J,ne){let oe=ne.nsSeparator!==void 0?ne.nsSeparator:this.options.nsSeparator;oe===void 0&&(oe=":");const ce=ne.keySeparator!==void 0?ne.keySeparator:this.options.keySeparator;let ue=ne.ns||this.options.defaultNS||[];const Ae=oe&&J.indexOf(oe)>-1,pe=!this.options.userDefinedKeySeparator&&!ne.keySeparator&&!this.options.userDefinedNsSeparator&&!ne.nsSeparator&&!looksLikeObjectPath(J,oe,ce);if(Ae&&!pe){const xe=J.match(this.interpolator.nestingRegexp);if(xe&&xe.length>0)return{key:J,namespaces:ue};const me=J.split(oe);(oe!==ce||oe===ce&&this.options.ns.indexOf(me[0])>-1)&&(ue=me.shift()),J=me.join(ce)}return isString$4(ue)&&(ue=[ue]),{key:J,namespaces:ue}}translate(J,ne,oe){if(typeof ne!="object"&&this.options.overloadTranslationOptionHandler&&(ne=this.options.overloadTranslationOptionHandler(arguments)),typeof ne=="object"&&(ne={...ne}),ne||(ne={}),J==null)return"";Array.isArray(J)||(J=[String(J)]);const ce=ne.returnDetails!==void 0?ne.returnDetails:this.options.returnDetails,ue=ne.keySeparator!==void 0?ne.keySeparator:this.options.keySeparator,{key:Ae,namespaces:pe}=this.extractFromKey(J[J.length-1],ne),xe=pe[pe.length-1],me=ne.lng||this.language,ge=ne.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(me&&me.toLowerCase()==="cimode"){if(ge){const ze=ne.nsSeparator||this.options.nsSeparator;return ce?{res:`${xe}${ze}${Ae}`,usedKey:Ae,exactUsedKey:Ae,usedLng:me,usedNS:xe,usedParams:this.getUsedParamsDetails(ne)}:`${xe}${ze}${Ae}`}return ce?{res:Ae,usedKey:Ae,exactUsedKey:Ae,usedLng:me,usedNS:xe,usedParams:this.getUsedParamsDetails(ne)}:Ae}const ye=this.resolve(J,ne);let Se=ye&&ye.res;const Te=ye&&ye.usedKey||Ae,Ne=ye&&ye.exactUsedKey||Ae,$e=Object.prototype.toString.apply(Se),ke=["[object Number]","[object Function]","[object RegExp]"],je=ne.joinArrays!==void 0?ne.joinArrays:this.options.joinArrays,Ke=!this.i18nFormat||this.i18nFormat.handleAsObject,Ye=!isString$4(Se)&&typeof Se!="boolean"&&typeof Se!="number";if(Ke&&Se&&Ye&&ke.indexOf($e)<0&&!(isString$4(je)&&Array.isArray(Se))){if(!ne.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const ze=this.options.returnedObjectHandler?this.options.returnedObjectHandler(Te,Se,{...ne,ns:pe}):`key '${Ae} (${this.language})' returned an object instead of string.`;return ce?(ye.res=ze,ye.usedParams=this.getUsedParamsDetails(ne),ye):ze}if(ue){const ze=Array.isArray(Se),Xe=ze?[]:{},Je=ze?Ne:Te;for(const rt in Se)if(Object.prototype.hasOwnProperty.call(Se,rt)){const Ze=`${Je}${ue}${rt}`;Xe[rt]=this.translate(Ze,{...ne,joinArrays:!1,ns:pe}),Xe[rt]===Ze&&(Xe[rt]=Se[rt])}Se=Xe}}else if(Ke&&isString$4(je)&&Array.isArray(Se))Se=Se.join(je),Se&&(Se=this.extendTranslation(Se,J,ne,oe));else{let ze=!1,Xe=!1;const Je=ne.count!==void 0&&!isString$4(ne.count),rt=Translator.hasDefaultValue(ne),Ze=Je?this.pluralResolver.getSuffix(me,ne.count,ne):"",et=ne.ordinal&&Je?this.pluralResolver.getSuffix(me,ne.count,{ordinal:!1}):"",nt=Je&&!ne.ordinal&&ne.count===0&&this.pluralResolver.shouldUseIntlApi(),Ge=nt&&ne[`defaultValue${this.options.pluralSeparator}zero`]||ne[`defaultValue${Ze}`]||ne[`defaultValue${et}`]||ne.defaultValue;!this.isValidLookup(Se)&&rt&&(ze=!0,Se=Ge),this.isValidLookup(Se)||(Xe=!0,Se=Ae);const Be=(ne.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Xe?void 0:Se,Re=rt&&Ge!==Se&&this.options.updateMissing;if(Xe||ze||Re){if(this.logger.log(Re?"updateKey":"missingKey",me,xe,Ae,Re?Ge:Se),ue){const We=this.resolve(Ae,{...ne,keySeparator:!1});We&&We.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Ie=[];const Fe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,ne.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Fe&&Fe[0])for(let We=0;We<Fe.length;We++)Ie.push(Fe[We]);else this.options.saveMissingTo==="all"?Ie=this.languageUtils.toResolveHierarchy(ne.lng||this.language):Ie.push(ne.lng||this.language);const qe=(We,Ue,_e)=>{const Qe=rt&&_e!==Se?_e:Be;this.options.missingKeyHandler?this.options.missingKeyHandler(We,xe,Ue,Qe,Re,ne):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(We,xe,Ue,Qe,Re,ne),this.emit("missingKey",We,xe,Ue,Se)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Je?Ie.forEach(We=>{const Ue=this.pluralResolver.getSuffixes(We,ne);nt&&ne[`defaultValue${this.options.pluralSeparator}zero`]&&Ue.indexOf(`${this.options.pluralSeparator}zero`)<0&&Ue.push(`${this.options.pluralSeparator}zero`),Ue.forEach(_e=>{qe([We],Ae+_e,ne[`defaultValue${_e}`]||Ge)})}):qe(Ie,Ae,Ge))}Se=this.extendTranslation(Se,J,ne,ye,oe),Xe&&Se===Ae&&this.options.appendNamespaceToMissingKey&&(Se=`${xe}:${Ae}`),(Xe||ze)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?Se=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${xe}:${Ae}`:Ae,ze?Se:void 0):Se=this.options.parseMissingKeyHandler(Se))}return ce?(ye.res=Se,ye.usedParams=this.getUsedParamsDetails(ne),ye):Se}extendTranslation(J,ne,oe,ce,ue){var Ae=this;if(this.i18nFormat&&this.i18nFormat.parse)J=this.i18nFormat.parse(J,{...this.options.interpolation.defaultVariables,...oe},oe.lng||this.language||ce.usedLng,ce.usedNS,ce.usedKey,{resolved:ce});else if(!oe.skipInterpolation){oe.interpolation&&this.interpolator.init({...oe,interpolation:{...this.options.interpolation,...oe.interpolation}});const me=isString$4(J)&&(oe&&oe.interpolation&&oe.interpolation.skipOnVariables!==void 0?oe.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let ge;if(me){const Se=J.match(this.interpolator.nestingRegexp);ge=Se&&Se.length}let ye=oe.replace&&!isString$4(oe.replace)?oe.replace:oe;if(this.options.interpolation.defaultVariables&&(ye={...this.options.interpolation.defaultVariables,...ye}),J=this.interpolator.interpolate(J,ye,oe.lng||this.language||ce.usedLng,oe),me){const Se=J.match(this.interpolator.nestingRegexp),Te=Se&&Se.length;ge<Te&&(oe.nest=!1)}!oe.lng&&this.options.compatibilityAPI!=="v1"&&ce&&ce.res&&(oe.lng=this.language||ce.usedLng),oe.nest!==!1&&(J=this.interpolator.nest(J,function(){for(var Se=arguments.length,Te=new Array(Se),Ne=0;Ne<Se;Ne++)Te[Ne]=arguments[Ne];return ue&&ue[0]===Te[0]&&!oe.context?(Ae.logger.warn(`It seems you are nesting recursively key: ${Te[0]} in key: ${ne[0]}`),null):Ae.translate(...Te,ne)},oe)),oe.interpolation&&this.interpolator.reset()}const pe=oe.postProcess||this.options.postProcess,xe=isString$4(pe)?[pe]:pe;return J!=null&&xe&&xe.length&&oe.applyPostProcessor!==!1&&(J=postProcessor.handle(xe,J,ne,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...ce,usedParams:this.getUsedParamsDetails(oe)},...oe}:oe,this)),J}resolve(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe,ce,ue,Ae,pe;return isString$4(J)&&(J=[J]),J.forEach(xe=>{if(this.isValidLookup(oe))return;const me=this.extractFromKey(xe,ne),ge=me.key;ce=ge;let ye=me.namespaces;this.options.fallbackNS&&(ye=ye.concat(this.options.fallbackNS));const Se=ne.count!==void 0&&!isString$4(ne.count),Te=Se&&!ne.ordinal&&ne.count===0&&this.pluralResolver.shouldUseIntlApi(),Ne=ne.context!==void 0&&(isString$4(ne.context)||typeof ne.context=="number")&&ne.context!=="",$e=ne.lngs?ne.lngs:this.languageUtils.toResolveHierarchy(ne.lng||this.language,ne.fallbackLng);ye.forEach(ke=>{this.isValidLookup(oe)||(pe=ke,!checkedLoadedFor[`${$e[0]}-${ke}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(pe)&&(checkedLoadedFor[`${$e[0]}-${ke}`]=!0,this.logger.warn(`key "${ce}" for languages "${$e.join(", ")}" won't get resolved as namespace "${pe}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),$e.forEach(je=>{if(this.isValidLookup(oe))return;Ae=je;const Ke=[ge];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(Ke,ge,je,ke,ne);else{let ze;Se&&(ze=this.pluralResolver.getSuffix(je,ne.count,ne));const Xe=`${this.options.pluralSeparator}zero`,Je=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(Se&&(Ke.push(ge+ze),ne.ordinal&&ze.indexOf(Je)===0&&Ke.push(ge+ze.replace(Je,this.options.pluralSeparator)),Te&&Ke.push(ge+Xe)),Ne){const rt=`${ge}${this.options.contextSeparator}${ne.context}`;Ke.push(rt),Se&&(Ke.push(rt+ze),ne.ordinal&&ze.indexOf(Je)===0&&Ke.push(rt+ze.replace(Je,this.options.pluralSeparator)),Te&&Ke.push(rt+Xe))}}let Ye;for(;Ye=Ke.pop();)this.isValidLookup(oe)||(ue=Ye,oe=this.getResource(je,ke,Ye,ne))}))})}),{res:oe,usedKey:ce,exactUsedKey:ue,usedLng:Ae,usedNS:pe}}isValidLookup(J){return J!==void 0&&!(!this.options.returnNull&&J===null)&&!(!this.options.returnEmptyString&&J==="")}getResource(J,ne,oe){let ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(J,ne,oe,ce):this.resourceStore.getResource(J,ne,oe,ce)}getUsedParamsDetails(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const ne=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],oe=J.replace&&!isString$4(J.replace);let ce=oe?J.replace:J;if(oe&&typeof J.count<"u"&&(ce.count=J.count),this.options.interpolation.defaultVariables&&(ce={...this.options.interpolation.defaultVariables,...ce}),!oe){ce={...ce};for(const ue of ne)delete ce[ue]}return ce}static hasDefaultValue(J){const ne="defaultValue";for(const oe in J)if(Object.prototype.hasOwnProperty.call(J,oe)&&ne===oe.substring(0,ne.length)&&J[oe]!==void 0)return!0;return!1}}const capitalize$1=K=>K.charAt(0).toUpperCase()+K.slice(1);class LanguageUtil{constructor(J){this.options=J,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(J){if(J=getCleanedCode(J),!J||J.indexOf("-")<0)return null;const ne=J.split("-");return ne.length===2||(ne.pop(),ne[ne.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(ne.join("-"))}getLanguagePartFromCode(J){if(J=getCleanedCode(J),!J||J.indexOf("-")<0)return J;const ne=J.split("-");return this.formatLanguageCode(ne[0])}formatLanguageCode(J){if(isString$4(J)&&J.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let ce=Intl.getCanonicalLocales(J)[0];if(ce&&this.options.lowerCaseLng&&(ce=ce.toLowerCase()),ce)return ce}catch{}const ne=["hans","hant","latn","cyrl","cans","mong","arab"];let oe=J.split("-");return this.options.lowerCaseLng?oe=oe.map(ce=>ce.toLowerCase()):oe.length===2?(oe[0]=oe[0].toLowerCase(),oe[1]=oe[1].toUpperCase(),ne.indexOf(oe[1].toLowerCase())>-1&&(oe[1]=capitalize$1(oe[1].toLowerCase()))):oe.length===3&&(oe[0]=oe[0].toLowerCase(),oe[1].length===2&&(oe[1]=oe[1].toUpperCase()),oe[0]!=="sgn"&&oe[2].length===2&&(oe[2]=oe[2].toUpperCase()),ne.indexOf(oe[1].toLowerCase())>-1&&(oe[1]=capitalize$1(oe[1].toLowerCase())),ne.indexOf(oe[2].toLowerCase())>-1&&(oe[2]=capitalize$1(oe[2].toLowerCase()))),oe.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?J.toLowerCase():J}isSupportedCode(J){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(J=this.getLanguagePartFromCode(J)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(J)>-1}getBestMatchFromCodes(J){if(!J)return null;let ne;return J.forEach(oe=>{if(ne)return;const ce=this.formatLanguageCode(oe);(!this.options.supportedLngs||this.isSupportedCode(ce))&&(ne=ce)}),!ne&&this.options.supportedLngs&&J.forEach(oe=>{if(ne)return;const ce=this.getLanguagePartFromCode(oe);if(this.isSupportedCode(ce))return ne=ce;ne=this.options.supportedLngs.find(ue=>{if(ue===ce)return ue;if(!(ue.indexOf("-")<0&&ce.indexOf("-")<0)&&(ue.indexOf("-")>0&&ce.indexOf("-")<0&&ue.substring(0,ue.indexOf("-"))===ce||ue.indexOf(ce)===0&&ce.length>1))return ue})}),ne||(ne=this.getFallbackCodes(this.options.fallbackLng)[0]),ne}getFallbackCodes(J,ne){if(!J)return[];if(typeof J=="function"&&(J=J(ne)),isString$4(J)&&(J=[J]),Array.isArray(J))return J;if(!ne)return J.default||[];let oe=J[ne];return oe||(oe=J[this.getScriptPartFromCode(ne)]),oe||(oe=J[this.formatLanguageCode(ne)]),oe||(oe=J[this.getLanguagePartFromCode(ne)]),oe||(oe=J.default),oe||[]}toResolveHierarchy(J,ne){const oe=this.getFallbackCodes(ne||this.options.fallbackLng||[],J),ce=[],ue=Ae=>{Ae&&(this.isSupportedCode(Ae)?ce.push(Ae):this.logger.warn(`rejecting language code not found in supportedLngs: ${Ae}`))};return isString$4(J)&&(J.indexOf("-")>-1||J.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&ue(this.formatLanguageCode(J)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&ue(this.getScriptPartFromCode(J)),this.options.load!=="currentOnly"&&ue(this.getLanguagePartFromCode(J))):isString$4(J)&&ue(this.formatLanguageCode(J)),oe.forEach(Ae=>{ce.indexOf(Ae)<0&&ue(this.formatLanguageCode(Ae))}),ce}}let sets$1=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:K=>+(K>1),2:K=>+(K!=1),3:K=>0,4:K=>K%10==1&&K%100!=11?0:K%10>=2&&K%10<=4&&(K%100<10||K%100>=20)?1:2,5:K=>K==0?0:K==1?1:K==2?2:K%100>=3&&K%100<=10?3:K%100>=11?4:5,6:K=>K==1?0:K>=2&&K<=4?1:2,7:K=>K==1?0:K%10>=2&&K%10<=4&&(K%100<10||K%100>=20)?1:2,8:K=>K==1?0:K==2?1:K!=8&&K!=11?2:3,9:K=>+(K>=2),10:K=>K==1?0:K==2?1:K<7?2:K<11?3:4,11:K=>K==1||K==11?0:K==2||K==12?1:K>2&&K<20?2:3,12:K=>+(K%10!=1||K%100==11),13:K=>+(K!==0),14:K=>K==1?0:K==2?1:K==3?2:3,15:K=>K%10==1&&K%100!=11?0:K%10>=2&&(K%100<10||K%100>=20)?1:2,16:K=>K%10==1&&K%100!=11?0:K!==0?1:2,17:K=>K==1||K%10==1&&K%100!=11?0:1,18:K=>K==0?0:K==1?1:2,19:K=>K==1?0:K==0||K%100>1&&K%100<11?1:K%100>10&&K%100<20?2:3,20:K=>K==1?0:K==0||K%100>0&&K%100<20?1:2,21:K=>K%100==1?1:K%100==2?2:K%100==3||K%100==4?3:0,22:K=>K==1?0:K==2?1:(K<0||K>10)&&K%10==0?2:3};const nonIntlVersions=["v1","v2","v3"],intlVersions=["v4"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},createRules=()=>{const K={};return sets$1.forEach(J=>{J.lngs.forEach(ne=>{K[ne]={numbers:J.nr,plurals:_rulesPluralsTypes[J.fc]}})}),K};class PluralResolver{constructor(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=J,this.options=ne,this.logger=baseLogger.create("pluralResolver"),(!this.options.compatibilityJSON||intlVersions.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules(),this.pluralRulesCache={}}addRule(J,ne){this.rules[J]=ne}clearCache(){this.pluralRulesCache={}}getRule(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const oe=getCleanedCode(J==="dev"?"en":J),ce=ne.ordinal?"ordinal":"cardinal",ue=JSON.stringify({cleanedCode:oe,type:ce});if(ue in this.pluralRulesCache)return this.pluralRulesCache[ue];const Ae=new Intl.PluralRules(oe,{type:ce});return this.pluralRulesCache[ue]=Ae,Ae}catch{return}return this.rules[J]||this.rules[this.languageUtils.getLanguagePartFromCode(J)]}needsPlural(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const oe=this.getRule(J,ne);return this.shouldUseIntlApi()?oe&&oe.resolvedOptions().pluralCategories.length>1:oe&&oe.numbers.length>1}getPluralFormsOfKey(J,ne){let oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(J,oe).map(ce=>`${ne}${ce}`)}getSuffixes(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const oe=this.getRule(J,ne);return oe?this.shouldUseIntlApi()?oe.resolvedOptions().pluralCategories.sort((ce,ue)=>suffixesOrder[ce]-suffixesOrder[ue]).map(ce=>`${this.options.prepend}${ne.ordinal?`ordinal${this.options.prepend}`:""}${ce}`):oe.numbers.map(ce=>this.getSuffix(J,ce,ne)):[]}getSuffix(J,ne){let oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const ce=this.getRule(J,oe);return ce?this.shouldUseIntlApi()?`${this.options.prepend}${oe.ordinal?`ordinal${this.options.prepend}`:""}${ce.select(ne)}`:this.getSuffixRetroCompatible(ce,ne):(this.logger.warn(`no plural rule found for: ${J}`),"")}getSuffixRetroCompatible(J,ne){const oe=J.noAbs?J.plurals(ne):J.plurals(Math.abs(ne));let ce=J.numbers[oe];this.options.simplifyPluralSuffix&&J.numbers.length===2&&J.numbers[0]===1&&(ce===2?ce="plural":ce===1&&(ce=""));const ue=()=>this.options.prepend&&ce.toString()?this.options.prepend+ce.toString():ce.toString();return this.options.compatibilityJSON==="v1"?ce===1?"":typeof ce=="number"?`_plural_${ce.toString()}`:ue():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&J.numbers.length===2&&J.numbers[0]===1?ue():this.options.prepend&&oe.toString()?this.options.prepend+oe.toString():oe.toString()}shouldUseIntlApi(){return!nonIntlVersions.includes(this.options.compatibilityJSON)}}const deepFindWithDefaults=function(K,J,ne){let oe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",ce=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,ue=getPathWithDefaults(K,J,ne);return!ue&&ce&&isString$4(ne)&&(ue=deepFind(K,ne,oe),ue===void 0&&(ue=deepFind(J,ne,oe))),ue},regexSafe=K=>K.replace(/\$/g,"$$$$");class Interpolator{constructor(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=J,this.format=J.interpolation&&J.interpolation.format||(ne=>ne),this.init(J)}init(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};J.interpolation||(J.interpolation={escapeValue:!0});const{escape:ne,escapeValue:oe,useRawValueToEscape:ce,prefix:ue,prefixEscaped:Ae,suffix:pe,suffixEscaped:xe,formatSeparator:me,unescapeSuffix:ge,unescapePrefix:ye,nestingPrefix:Se,nestingPrefixEscaped:Te,nestingSuffix:Ne,nestingSuffixEscaped:$e,nestingOptionsSeparator:ke,maxReplaces:je,alwaysFormat:Ke}=J.interpolation;this.escape=ne!==void 0?ne:escape$2,this.escapeValue=oe!==void 0?oe:!0,this.useRawValueToEscape=ce!==void 0?ce:!1,this.prefix=ue?regexEscape(ue):Ae||"{{",this.suffix=pe?regexEscape(pe):xe||"}}",this.formatSeparator=me||",",this.unescapePrefix=ge?"":ye||"-",this.unescapeSuffix=this.unescapePrefix?"":ge||"",this.nestingPrefix=Se?regexEscape(Se):Te||regexEscape("$t("),this.nestingSuffix=Ne?regexEscape(Ne):$e||regexEscape(")"),this.nestingOptionsSeparator=ke||",",this.maxReplaces=je||1e3,this.alwaysFormat=Ke!==void 0?Ke:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const J=(ne,oe)=>ne&&ne.source===oe?(ne.lastIndex=0,ne):new RegExp(oe,"g");this.regexp=J(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=J(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=J(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(J,ne,oe,ce){let ue,Ae,pe;const xe=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},me=Te=>{if(Te.indexOf(this.formatSeparator)<0){const je=deepFindWithDefaults(ne,xe,Te,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(je,void 0,oe,{...ce,...ne,interpolationkey:Te}):je}const Ne=Te.split(this.formatSeparator),$e=Ne.shift().trim(),ke=Ne.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(ne,xe,$e,this.options.keySeparator,this.options.ignoreJSONStructure),ke,oe,{...ce,...ne,interpolationkey:$e})};this.resetRegExp();const ge=ce&&ce.missingInterpolationHandler||this.options.missingInterpolationHandler,ye=ce&&ce.interpolation&&ce.interpolation.skipOnVariables!==void 0?ce.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:Te=>regexSafe(Te)},{regex:this.regexp,safeValue:Te=>this.escapeValue?regexSafe(this.escape(Te)):regexSafe(Te)}].forEach(Te=>{for(pe=0;ue=Te.regex.exec(J);){const Ne=ue[1].trim();if(Ae=me(Ne),Ae===void 0)if(typeof ge=="function"){const ke=ge(J,ue,ce);Ae=isString$4(ke)?ke:""}else if(ce&&Object.prototype.hasOwnProperty.call(ce,Ne))Ae="";else if(ye){Ae=ue[0];continue}else this.logger.warn(`missed to pass in variable ${Ne} for interpolating ${J}`),Ae="";else!isString$4(Ae)&&!this.useRawValueToEscape&&(Ae=makeString(Ae));const $e=Te.safeValue(Ae);if(J=J.replace(ue[0],$e),ye?(Te.regex.lastIndex+=Ae.length,Te.regex.lastIndex-=ue[0].length):Te.regex.lastIndex=0,pe++,pe>=this.maxReplaces)break}}),J}nest(J,ne){let oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ce,ue,Ae;const pe=(xe,me)=>{const ge=this.nestingOptionsSeparator;if(xe.indexOf(ge)<0)return xe;const ye=xe.split(new RegExp(`${ge}[ ]*{`));let Se=`{${ye[1]}`;xe=ye[0],Se=this.interpolate(Se,Ae);const Te=Se.match(/'/g),Ne=Se.match(/"/g);(Te&&Te.length%2===0&&!Ne||Ne.length%2!==0)&&(Se=Se.replace(/'/g,'"'));try{Ae=JSON.parse(Se),me&&(Ae={...me,...Ae})}catch($e){return this.logger.warn(`failed parsing options string in nesting for key ${xe}`,$e),`${xe}${ge}${Se}`}return Ae.defaultValue&&Ae.defaultValue.indexOf(this.prefix)>-1&&delete Ae.defaultValue,xe};for(;ce=this.nestingRegexp.exec(J);){let xe=[];Ae={...oe},Ae=Ae.replace&&!isString$4(Ae.replace)?Ae.replace:Ae,Ae.applyPostProcessor=!1,delete Ae.defaultValue;let me=!1;if(ce[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(ce[1])){const ge=ce[1].split(this.formatSeparator).map(ye=>ye.trim());ce[1]=ge.shift(),xe=ge,me=!0}if(ue=ne(pe.call(this,ce[1].trim(),Ae),Ae),ue&&ce[0]===J&&!isString$4(ue))return ue;isString$4(ue)||(ue=makeString(ue)),ue||(this.logger.warn(`missed to resolve ${ce[1]} for nesting ${J}`),ue=""),me&&(ue=xe.reduce((ge,ye)=>this.format(ge,ye,oe.lng,{...oe,interpolationkey:ce[1].trim()}),ue.trim())),J=J.replace(ce[0],ue),this.regexp.lastIndex=0}return J}}const parseFormatStr=K=>{let J=K.toLowerCase().trim();const ne={};if(K.indexOf("(")>-1){const oe=K.split("(");J=oe[0].toLowerCase().trim();const ce=oe[1].substring(0,oe[1].length-1);J==="currency"&&ce.indexOf(":")<0?ne.currency||(ne.currency=ce.trim()):J==="relativetime"&&ce.indexOf(":")<0?ne.range||(ne.range=ce.trim()):ce.split(";").forEach(Ae=>{if(Ae){const[pe,...xe]=Ae.split(":"),me=xe.join(":").trim().replace(/^'+|'+$/g,""),ge=pe.trim();ne[ge]||(ne[ge]=me),me==="false"&&(ne[ge]=!1),me==="true"&&(ne[ge]=!0),isNaN(me)||(ne[ge]=parseInt(me,10))}})}return{formatName:J,formatOptions:ne}},createCachedFormatter=K=>{const J={};return(ne,oe,ce)=>{let ue=ce;ce&&ce.interpolationkey&&ce.formatParams&&ce.formatParams[ce.interpolationkey]&&ce[ce.interpolationkey]&&(ue={...ue,[ce.interpolationkey]:void 0});const Ae=oe+JSON.stringify(ue);let pe=J[Ae];return pe||(pe=K(getCleanedCode(oe),ce),J[Ae]=pe),pe(ne)}};class Formatter{constructor(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=J,this.formats={number:createCachedFormatter((ne,oe)=>ce=>new Intl.NumberFormat(ne,{...oe}).format(ce)),currency:createCachedFormatter((ne,oe)=>ce=>new Intl.NumberFormat(ne,{...oe,style:"currency"}).format(ce)),datetime:createCachedFormatter((ne,oe)=>ce=>new Intl.DateTimeFormat(ne,{...oe}).format(ce)),relativetime:createCachedFormatter((ne,oe)=>ce=>new Intl.RelativeTimeFormat(ne,{...oe}).format(ce,oe.range||"day")),list:createCachedFormatter((ne,oe)=>ce=>new Intl.ListFormat(ne,{...oe}).format(ce))},this.init(J)}init(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=ne.interpolation.formatSeparator||","}add(J,ne){this.formats[J.toLowerCase().trim()]=ne}addCached(J,ne){this.formats[J.toLowerCase().trim()]=createCachedFormatter(ne)}format(J,ne,oe){let ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const ue=ne.split(this.formatSeparator);if(ue.length>1&&ue[0].indexOf("(")>1&&ue[0].indexOf(")")<0&&ue.find(pe=>pe.indexOf(")")>-1)){const pe=ue.findIndex(xe=>xe.indexOf(")")>-1);ue[0]=[ue[0],...ue.splice(1,pe)].join(this.formatSeparator)}return ue.reduce((pe,xe)=>{const{formatName:me,formatOptions:ge}=parseFormatStr(xe);if(this.formats[me]){let ye=pe;try{const Se=ce&&ce.formatParams&&ce.formatParams[ce.interpolationkey]||{},Te=Se.locale||Se.lng||ce.locale||ce.lng||oe;ye=this.formats[me](pe,Te,{...ge,...ce,...Se})}catch(Se){this.logger.warn(Se)}return ye}else this.logger.warn(`there was no format function for ${me}`);return pe},J)}}const removePending=(K,J)=>{K.pending[J]!==void 0&&(delete K.pending[J],K.pendingCount--)};class Connector extends EventEmitter{constructor(J,ne,oe){let ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=J,this.store=ne,this.services=oe,this.languageUtils=oe.languageUtils,this.options=ce,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=ce.maxParallelReads||10,this.readingCalls=0,this.maxRetries=ce.maxRetries>=0?ce.maxRetries:5,this.retryTimeout=ce.retryTimeout>=1?ce.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(oe,ce.backend,ce)}queueLoad(J,ne,oe,ce){const ue={},Ae={},pe={},xe={};return J.forEach(me=>{let ge=!0;ne.forEach(ye=>{const Se=`${me}|${ye}`;!oe.reload&&this.store.hasResourceBundle(me,ye)?this.state[Se]=2:this.state[Se]<0||(this.state[Se]===1?Ae[Se]===void 0&&(Ae[Se]=!0):(this.state[Se]=1,ge=!1,Ae[Se]===void 0&&(Ae[Se]=!0),ue[Se]===void 0&&(ue[Se]=!0),xe[ye]===void 0&&(xe[ye]=!0)))}),ge||(pe[me]=!0)}),(Object.keys(ue).length||Object.keys(Ae).length)&&this.queue.push({pending:Ae,pendingCount:Object.keys(Ae).length,loaded:{},errors:[],callback:ce}),{toLoad:Object.keys(ue),pending:Object.keys(Ae),toLoadLanguages:Object.keys(pe),toLoadNamespaces:Object.keys(xe)}}loaded(J,ne,oe){const ce=J.split("|"),ue=ce[0],Ae=ce[1];ne&&this.emit("failedLoading",ue,Ae,ne),!ne&&oe&&this.store.addResourceBundle(ue,Ae,oe,void 0,void 0,{skipCopy:!0}),this.state[J]=ne?-1:2,ne&&oe&&(this.state[J]=0);const pe={};this.queue.forEach(xe=>{pushPath(xe.loaded,[ue],Ae),removePending(xe,J),ne&&xe.errors.push(ne),xe.pendingCount===0&&!xe.done&&(Object.keys(xe.loaded).forEach(me=>{pe[me]||(pe[me]={});const ge=xe.loaded[me];ge.length&&ge.forEach(ye=>{pe[me][ye]===void 0&&(pe[me][ye]=!0)})}),xe.done=!0,xe.errors.length?xe.callback(xe.errors):xe.callback())}),this.emit("loaded",pe),this.queue=this.queue.filter(xe=>!xe.done)}read(J,ne,oe){let ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,ue=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,Ae=arguments.length>5?arguments[5]:void 0;if(!J.length)return Ae(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:J,ns:ne,fcName:oe,tried:ce,wait:ue,callback:Ae});return}this.readingCalls++;const pe=(me,ge)=>{if(this.readingCalls--,this.waitingReads.length>0){const ye=this.waitingReads.shift();this.read(ye.lng,ye.ns,ye.fcName,ye.tried,ye.wait,ye.callback)}if(me&&ge&&ce<this.maxRetries){setTimeout(()=>{this.read.call(this,J,ne,oe,ce+1,ue*2,Ae)},ue);return}Ae(me,ge)},xe=this.backend[oe].bind(this.backend);if(xe.length===2){try{const me=xe(J,ne);me&&typeof me.then=="function"?me.then(ge=>pe(null,ge)).catch(pe):pe(null,me)}catch(me){pe(me)}return}return xe(J,ne,pe)}prepareLoading(J,ne){let oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ce=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),ce&&ce();isString$4(J)&&(J=this.languageUtils.toResolveHierarchy(J)),isString$4(ne)&&(ne=[ne]);const ue=this.queueLoad(J,ne,oe,ce);if(!ue.toLoad.length)return ue.pending.length||ce(),null;ue.toLoad.forEach(Ae=>{this.loadOne(Ae)})}load(J,ne,oe){this.prepareLoading(J,ne,{},oe)}reload(J,ne,oe){this.prepareLoading(J,ne,{reload:!0},oe)}loadOne(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const oe=J.split("|"),ce=oe[0],ue=oe[1];this.read(ce,ue,"read",void 0,void 0,(Ae,pe)=>{Ae&&this.logger.warn(`${ne}loading namespace ${ue} for language ${ce} failed`,Ae),!Ae&&pe&&this.logger.log(`${ne}loaded namespace ${ue} for language ${ce}`,pe),this.loaded(J,Ae,pe)})}saveMissing(J,ne,oe,ce,ue){let Ae=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},pe=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(ne)){this.logger.warn(`did not save key "${oe}" as the namespace "${ne}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(oe==null||oe==="")){if(this.backend&&this.backend.create){const xe={...Ae,isUpdate:ue},me=this.backend.create.bind(this.backend);if(me.length<6)try{let ge;me.length===5?ge=me(J,ne,oe,ce,xe):ge=me(J,ne,oe,ce),ge&&typeof ge.then=="function"?ge.then(ye=>pe(null,ye)).catch(pe):pe(null,ge)}catch(ge){pe(ge)}else me(J,ne,oe,ce,pe,xe)}!J||!J[0]||this.store.addResource(J[0],ne,oe,ce)}}}const get$3=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:K=>{let J={};if(typeof K[1]=="object"&&(J=K[1]),isString$4(K[1])&&(J.defaultValue=K[1]),isString$4(K[2])&&(J.tDescription=K[2]),typeof K[2]=="object"||typeof K[3]=="object"){const ne=K[3]||K[2];Object.keys(ne).forEach(oe=>{J[oe]=ne[oe]})}return J},interpolation:{escapeValue:!0,format:K=>K,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),transformOptions=K=>(isString$4(K.ns)&&(K.ns=[K.ns]),isString$4(K.fallbackLng)&&(K.fallbackLng=[K.fallbackLng]),isString$4(K.fallbackNS)&&(K.fallbackNS=[K.fallbackNS]),K.supportedLngs&&K.supportedLngs.indexOf("cimode")<0&&(K.supportedLngs=K.supportedLngs.concat(["cimode"])),K),noop$6=()=>{},bindMemberFunctions=K=>{Object.getOwnPropertyNames(Object.getPrototypeOf(K)).forEach(ne=>{typeof K[ne]=="function"&&(K[ne]=K[ne].bind(K))})};class I18n extends EventEmitter{constructor(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(J),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),ne&&!this.isInitialized&&!J.isClone){if(!this.options.initImmediate)return this.init(J,ne),this;setTimeout(()=>{this.init(J,ne)},0)}}init(){var J=this;let ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof ne=="function"&&(oe=ne,ne={}),!ne.defaultNS&&ne.defaultNS!==!1&&ne.ns&&(isString$4(ne.ns)?ne.defaultNS=ne.ns:ne.ns.indexOf("translation")<0&&(ne.defaultNS=ne.ns[0]));const ce=get$3();this.options={...ce,...this.options,...transformOptions(ne)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...ce.interpolation,...this.options.interpolation}),ne.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=ne.keySeparator),ne.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=ne.nsSeparator);const ue=ge=>ge?typeof ge=="function"?new ge:ge:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(ue(this.modules.logger),this.options):baseLogger.init(null,this.options);let ge;this.modules.formatter?ge=this.modules.formatter:typeof Intl<"u"&&(ge=Formatter);const ye=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const Se=this.services;Se.logger=baseLogger,Se.resourceStore=this.store,Se.languageUtils=ye,Se.pluralResolver=new PluralResolver(ye,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),ge&&(!this.options.interpolation.format||this.options.interpolation.format===ce.interpolation.format)&&(Se.formatter=ue(ge),Se.formatter.init(Se,this.options),this.options.interpolation.format=Se.formatter.format.bind(Se.formatter)),Se.interpolator=new Interpolator(this.options),Se.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},Se.backendConnector=new Connector(ue(this.modules.backend),Se.resourceStore,Se,this.options),Se.backendConnector.on("*",function(Te){for(var Ne=arguments.length,$e=new Array(Ne>1?Ne-1:0),ke=1;ke<Ne;ke++)$e[ke-1]=arguments[ke];J.emit(Te,...$e)}),this.modules.languageDetector&&(Se.languageDetector=ue(this.modules.languageDetector),Se.languageDetector.init&&Se.languageDetector.init(Se,this.options.detection,this.options)),this.modules.i18nFormat&&(Se.i18nFormat=ue(this.modules.i18nFormat),Se.i18nFormat.init&&Se.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(Te){for(var Ne=arguments.length,$e=new Array(Ne>1?Ne-1:0),ke=1;ke<Ne;ke++)$e[ke-1]=arguments[ke];J.emit(Te,...$e)}),this.modules.external.forEach(Te=>{Te.init&&Te.init(this)})}if(this.format=this.options.interpolation.format,oe||(oe=noop$6),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const ge=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);ge.length>0&&ge[0]!=="dev"&&(this.options.lng=ge[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(ge=>{this[ge]=function(){return J.store[ge](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(ge=>{this[ge]=function(){return J.store[ge](...arguments),J}});const xe=defer(),me=()=>{const ge=(ye,Se)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),xe.resolve(Se),oe(ye,Se)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return ge(null,this.t.bind(this));this.changeLanguage(this.options.lng,ge)};return this.options.resources||!this.options.initImmediate?me():setTimeout(me,0),xe}loadResources(J){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop$6;const ce=isString$4(J)?J:this.language;if(typeof J=="function"&&(oe=J),!this.options.resources||this.options.partialBundledLanguages){if(ce&&ce.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return oe();const ue=[],Ae=pe=>{if(!pe||pe==="cimode")return;this.services.languageUtils.toResolveHierarchy(pe).forEach(me=>{me!=="cimode"&&ue.indexOf(me)<0&&ue.push(me)})};ce?Ae(ce):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(xe=>Ae(xe)),this.options.preload&&this.options.preload.forEach(pe=>Ae(pe)),this.services.backendConnector.load(ue,this.options.ns,pe=>{!pe&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),oe(pe)})}else oe(null)}reloadResources(J,ne,oe){const ce=defer();return typeof J=="function"&&(oe=J,J=void 0),typeof ne=="function"&&(oe=ne,ne=void 0),J||(J=this.languages),ne||(ne=this.options.ns),oe||(oe=noop$6),this.services.backendConnector.reload(J,ne,ue=>{ce.resolve(),oe(ue)}),ce}use(J){if(!J)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!J.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return J.type==="backend"&&(this.modules.backend=J),(J.type==="logger"||J.log&&J.warn&&J.error)&&(this.modules.logger=J),J.type==="languageDetector"&&(this.modules.languageDetector=J),J.type==="i18nFormat"&&(this.modules.i18nFormat=J),J.type==="postProcessor"&&postProcessor.addPostProcessor(J),J.type==="formatter"&&(this.modules.formatter=J),J.type==="3rdParty"&&this.modules.external.push(J),this}setResolvedLanguage(J){if(!(!J||!this.languages)&&!(["cimode","dev"].indexOf(J)>-1))for(let ne=0;ne<this.languages.length;ne++){const oe=this.languages[ne];if(!(["cimode","dev"].indexOf(oe)>-1)&&this.store.hasLanguageSomeTranslations(oe)){this.resolvedLanguage=oe;break}}}changeLanguage(J,ne){var oe=this;this.isLanguageChangingTo=J;const ce=defer();this.emit("languageChanging",J);const ue=xe=>{this.language=xe,this.languages=this.services.languageUtils.toResolveHierarchy(xe),this.resolvedLanguage=void 0,this.setResolvedLanguage(xe)},Ae=(xe,me)=>{me?(ue(me),this.translator.changeLanguage(me),this.isLanguageChangingTo=void 0,this.emit("languageChanged",me),this.logger.log("languageChanged",me)):this.isLanguageChangingTo=void 0,ce.resolve(function(){return oe.t(...arguments)}),ne&&ne(xe,function(){return oe.t(...arguments)})},pe=xe=>{!J&&!xe&&this.services.languageDetector&&(xe=[]);const me=isString$4(xe)?xe:this.services.languageUtils.getBestMatchFromCodes(xe);me&&(this.language||ue(me),this.translator.language||this.translator.changeLanguage(me),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(me)),this.loadResources(me,ge=>{Ae(ge,me)})};return!J&&this.services.languageDetector&&!this.services.languageDetector.async?pe(this.services.languageDetector.detect()):!J&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(pe):this.services.languageDetector.detect(pe):pe(J),ce}getFixedT(J,ne,oe){var ce=this;const ue=function(Ae,pe){let xe;if(typeof pe!="object"){for(var me=arguments.length,ge=new Array(me>2?me-2:0),ye=2;ye<me;ye++)ge[ye-2]=arguments[ye];xe=ce.options.overloadTranslationOptionHandler([Ae,pe].concat(ge))}else xe={...pe};xe.lng=xe.lng||ue.lng,xe.lngs=xe.lngs||ue.lngs,xe.ns=xe.ns||ue.ns,xe.keyPrefix!==""&&(xe.keyPrefix=xe.keyPrefix||oe||ue.keyPrefix);const Se=ce.options.keySeparator||".";let Te;return xe.keyPrefix&&Array.isArray(Ae)?Te=Ae.map(Ne=>`${xe.keyPrefix}${Se}${Ne}`):Te=xe.keyPrefix?`${xe.keyPrefix}${Se}${Ae}`:Ae,ce.t(Te,xe)};return isString$4(J)?ue.lng=J:ue.lngs=J,ue.ns=ne,ue.keyPrefix=oe,ue}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(J){this.options.defaultNS=J}hasLoadedNamespace(J){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const oe=ne.lng||this.resolvedLanguage||this.languages[0],ce=this.options?this.options.fallbackLng:!1,ue=this.languages[this.languages.length-1];if(oe.toLowerCase()==="cimode")return!0;const Ae=(pe,xe)=>{const me=this.services.backendConnector.state[`${pe}|${xe}`];return me===-1||me===0||me===2};if(ne.precheck){const pe=ne.precheck(this,Ae);if(pe!==void 0)return pe}return!!(this.hasResourceBundle(oe,J)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||Ae(oe,J)&&(!ce||Ae(ue,J)))}loadNamespaces(J,ne){const oe=defer();return this.options.ns?(isString$4(J)&&(J=[J]),J.forEach(ce=>{this.options.ns.indexOf(ce)<0&&this.options.ns.push(ce)}),this.loadResources(ce=>{oe.resolve(),ne&&ne(ce)}),oe):(ne&&ne(),Promise.resolve())}loadLanguages(J,ne){const oe=defer();isString$4(J)&&(J=[J]);const ce=this.options.preload||[],ue=J.filter(Ae=>ce.indexOf(Ae)<0&&this.services.languageUtils.isSupportedCode(Ae));return ue.length?(this.options.preload=ce.concat(ue),this.loadResources(Ae=>{oe.resolve(),ne&&ne(Ae)}),oe):(ne&&ne(),Promise.resolve())}dir(J){if(J||(J=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!J)return"rtl";const ne=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],oe=this.services&&this.services.languageUtils||new LanguageUtil(get$3());return ne.indexOf(oe.getLanguagePartFromCode(J))>-1||J.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne=arguments.length>1?arguments[1]:void 0;return new I18n(J,ne)}cloneInstance(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop$6;const oe=J.forkResourceStore;oe&&delete J.forkResourceStore;const ce={...this.options,...J,isClone:!0},ue=new I18n(ce);return(J.debug!==void 0||J.prefix!==void 0)&&(ue.logger=ue.logger.clone(J)),["store","services","language"].forEach(pe=>{ue[pe]=this[pe]}),ue.services={...this.services},ue.services.utils={hasLoadedNamespace:ue.hasLoadedNamespace.bind(ue)},oe&&(ue.store=new ResourceStore(this.store.data,ce),ue.services.resourceStore=ue.store),ue.translator=new Translator(ue.services,ce),ue.translator.on("*",function(pe){for(var xe=arguments.length,me=new Array(xe>1?xe-1:0),ge=1;ge<xe;ge++)me[ge-1]=arguments[ge];ue.emit(pe,...me)}),ue.init(ce,ne),ue.translator.options=ce,ue.translator.backendConnector.services.utils={hasLoadedNamespace:ue.hasLoadedNamespace.bind(ue)},ue}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;const t$5=instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;function _extends(){return _extends=Object.assign?Object.assign.bind():function(K){for(var J=1;J<arguments.length;J++){var ne=arguments[J];for(var oe in ne)({}).hasOwnProperty.call(ne,oe)&&(K[oe]=ne[oe])}return K},_extends.apply(null,arguments)}function warn$2(){if(console&&console.warn){for(var K=arguments.length,J=new Array(K),ne=0;ne<K;ne++)J[ne]=arguments[ne];typeof J[0]=="string"&&(J[0]=`react-i18next:: ${J[0]}`),console.warn(...J)}}const alreadyWarned={};function warnOnce(){for(var K=arguments.length,J=new Array(K),ne=0;ne<K;ne++)J[ne]=arguments[ne];typeof J[0]=="string"&&alreadyWarned[J[0]]||(typeof J[0]=="string"&&(alreadyWarned[J[0]]=new Date),warn$2(...J))}const loadedClb=(K,J)=>()=>{if(K.isInitialized)J();else{const ne=()=>{setTimeout(()=>{K.off("initialized",ne)},0),J()};K.on("initialized",ne)}};function loadNamespaces(K,J,ne){K.loadNamespaces(J,loadedClb(K,ne))}function loadLanguages(K,J,ne,oe){typeof ne=="string"&&(ne=[ne]),ne.forEach(ce=>{K.options.ns.indexOf(ce)<0&&K.options.ns.push(ce)}),K.loadLanguages(J,loadedClb(K,oe))}function oldI18nextHasLoadedNamespace(K,J){let ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const oe=J.languages[0],ce=J.options?J.options.fallbackLng:!1,ue=J.languages[J.languages.length-1];if(oe.toLowerCase()==="cimode")return!0;const Ae=(pe,xe)=>{const me=J.services.backendConnector.state[`${pe}|${xe}`];return me===-1||me===2};return ne.bindI18n&&ne.bindI18n.indexOf("languageChanging")>-1&&J.services.backendConnector.backend&&J.isLanguageChangingTo&&!Ae(J.isLanguageChangingTo,K)?!1:!!(J.hasResourceBundle(oe,K)||!J.services.backendConnector.backend||J.options.resources&&!J.options.partialBundledLanguages||Ae(oe,K)&&(!ce||Ae(ue,K)))}function hasLoadedNamespace(K,J){let ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!J.languages||!J.languages.length?(warnOnce("i18n.languages were undefined or empty",J.languages),!0):J.options.ignoreJSONStructure!==void 0?J.hasLoadedNamespace(K,{lng:ne.lng,precheck:(ce,ue)=>{if(ne.bindI18n&&ne.bindI18n.indexOf("languageChanging")>-1&&ce.services.backendConnector.backend&&ce.isLanguageChangingTo&&!ue(ce.isLanguageChangingTo,K))return!1}}):oldI18nextHasLoadedNamespace(K,J,ne)}function getDisplayName(K){return K.displayName||K.name||(typeof K=="string"&&K.length>0?K:"Unknown")}const matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=K=>htmlEntities[K],unescape$1=K=>K.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:unescape$1};function setDefaults(){let K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};defaultOptions={...defaultOptions,...K}}function getDefaults(){return defaultOptions}let i18nInstance;function setI18n(K){i18nInstance=K}function getI18n(){return i18nInstance}const initReactI18next={type:"3rdParty",init(K){setDefaults(K.options.react),setI18n(K)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(J){J.forEach(ne=>{this.usedNamespaces[ne]||(this.usedNamespaces[ne]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious$1=(K,J)=>{const ne=reactExports.useRef();return reactExports.useEffect(()=>{ne.current=K},[K,J]),ne.current};function useTranslation(K){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:ne}=J,{i18n:oe,defaultNS:ce}=reactExports.useContext(I18nContext)||{},ue=ne||oe||getI18n();if(ue&&!ue.reportNamespaces&&(ue.reportNamespaces=new ReportNamespaces),!ue){warnOnce("You will need to pass in an i18next instance by using initReactI18next");const Ye=(Xe,Je)=>typeof Je=="string"?Je:Je&&typeof Je=="object"&&typeof Je.defaultValue=="string"?Je.defaultValue:Array.isArray(Xe)?Xe[Xe.length-1]:Xe,ze=[Ye,{},!1];return ze.t=Ye,ze.i18n={},ze.ready=!1,ze}ue.options.react&&ue.options.react.wait!==void 0&&warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const Ae={...getDefaults(),...ue.options.react,...J},{useSuspense:pe,keyPrefix:xe}=Ae;let me=K||ce||ue.options&&ue.options.defaultNS;me=typeof me=="string"?[me]:me||["translation"],ue.reportNamespaces.addUsedNamespaces&&ue.reportNamespaces.addUsedNamespaces(me);const ge=(ue.isInitialized||ue.initializedStoreOnce)&&me.every(Ye=>hasLoadedNamespace(Ye,ue,Ae));function ye(){return ue.getFixedT(J.lng||null,Ae.nsMode==="fallback"?me:me[0],xe)}const[Se,Te]=reactExports.useState(ye);let Ne=me.join();J.lng&&(Ne=`${J.lng}${Ne}`);const $e=usePrevious$1(Ne),ke=reactExports.useRef(!0);reactExports.useEffect(()=>{const{bindI18n:Ye,bindI18nStore:ze}=Ae;ke.current=!0,!ge&&!pe&&(J.lng?loadLanguages(ue,J.lng,me,()=>{ke.current&&Te(ye)}):loadNamespaces(ue,me,()=>{ke.current&&Te(ye)})),ge&&$e&&$e!==Ne&&ke.current&&Te(ye);function Xe(){ke.current&&Te(ye)}return Ye&&ue&&ue.on(Ye,Xe),ze&&ue&&ue.store.on(ze,Xe),()=>{ke.current=!1,Ye&&ue&&Ye.split(" ").forEach(Je=>ue.off(Je,Xe)),ze&&ue&&ze.split(" ").forEach(Je=>ue.store.off(Je,Xe))}},[ue,Ne]);const je=reactExports.useRef(!0);reactExports.useEffect(()=>{ke.current&&!je.current&&Te(ye),je.current=!1},[ue,xe]);const Ke=[Se,ue,ge];if(Ke.t=Se,Ke.i18n=ue,Ke.ready=ge,ge||!ge&&!pe)return Ke;throw new Promise(Ye=>{J.lng?loadLanguages(ue,J.lng,me,()=>Ye()):loadNamespaces(ue,me,()=>Ye())})}function withTranslation(K){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(oe){function ce(Ae){let{forwardedRef:pe,...xe}=Ae;const[me,ge,ye]=useTranslation(K,{...xe,keyPrefix:J.keyPrefix}),Se={...xe,t:me,i18n:ge,tReady:ye};return J.withRef&&pe?Se.ref=pe:!J.withRef&&pe&&(Se.forwardedRef=pe),reactExports.createElement(oe,Se)}ce.displayName=`withI18nextTranslation(${getDisplayName(oe)})`,ce.WrappedComponent=oe;const ue=(Ae,pe)=>reactExports.createElement(ce,Object.assign({},Ae,{forwardedRef:pe}));return J.withRef?reactExports.forwardRef(ue):ce}}function Translation(K){const{ns:J,children:ne,...oe}=K,[ce,ue,Ae]=useTranslation(J,oe);return ne(ce,{i18n:ue,lng:ue.language},Ae)}const header$7={input:{placeholder:"Find Screen (Ctrl+F)"},tabgroups:{opened:"Opened",tables:"Tables",types:"Types",filters:"Filters",clear:"Clear",filter:"Filter by Type"},userInfo:{theme:{label:"Theme"},language:{label:"Language"},role:"Role",accessLevel:"Access level",build:"Build",versions:"Versions",fullScreenMode:"Full screen mode",secrets:{title:"My Keys",name:"Name",value:"Value",encrypted:"Encrypted",addKey:"ADD KEY",deletingKey:"Deleting Key",deleteModalContent:"You are about to delete {{keyName}} key. This action cannot be undone.",point1:"Your encrypted keys are stored in the browser only",point2:"The server does not cache or store them",point3:"The keys are always encrypted in transit and at rest",point4:"You can delete the keys any time",point5:"They will be deleted automatically after {{expire}} days"}},theme:{dark:"Dark",light:"Light"},environmentModal:{environment:"Environment"},addEnvironmentModal:{addTitle:"Add"},cancelButton:{tooltip:"Cancel running jobs"},downloadLogs:"Download logs",sendFeedback:"Send feedback",logsFileName:"Logs",record:"Record"},shared$2={copy:"Copy",copied:"Copied",close:"Close",yes:"Yes",no:"No",open:"Open",pleaseReloadPage:"Please Reload the Page",somethingWentWrong:"Something went wrong",notSupported:"Not supported",success:"Success",reloadPage:"Reload page",noRecordsAreSelected:"No records are selected",refresh:"Refresh",filterInputPlaceholder:"Filter here"},serverUnavailablePage$2={title:"Cannot Connect To The Server",subtitle:"Check your internet connectivity and server status",loaderTitle:"Trying To Reconnect"},grid$3={sorting:{asc:"Sort Asc",desc:"Sort Desc",none:"No Sort"},useSearch:"Use the search bar to open a new screen",pressControlF:"Press Ctrl + F to start typing",pleaseContantTheAdministrator:"No data found. Please contact the administrator.",overview:"Overview",columnFilter:{filterPlaceholder:"Start typing to search"},tabs:{main:"Main",closeTab:"Close tab",closeOtherTabs:"Close other tabs",closeAllTabs:"Close all tabs"},recordNavigationModal:{title:"{{handlerName}} result",content:"'{{handlerName}}' has been completed",forRecordKey:" for '{{recordKey}}'",viewResults:". View results?"},pagination:{firstPage:"First page",nextPage:"Next page",previousPage:"Previous page",jumpToPage:"Jump to page",go:"GO"},errorHandler:"Error during task run",successHandler:"Successfully executed task",settings:"Grid settings",cellHeight:"Max cell height",rowBorder:"Row Border"},editor$4={modalHeader:"Select the key",entityModalHeader:"Create Entity",entityExists:"Entity exists",duplicateEntity:"Record with key undefined already exists. Do you want to replace it?",createEntity:"Create new empty record",copyEntity:"Create copy from existing record",openJSONEditor:"JSON Editor",entitySavedSuccessfully:"Entity saved successfully",readonlyHint:"This field cannot be edited",tabs:{data:"Data",newEntity:"New entity",copyEntity:"Copy entity",history:"History",selectType:"Select Type",dag:"Directed Acyclic Graph"},breadcrumbs:{closeAll:"Close all crumbs",moveUp:"Move up",moveDown:"Move down"},listToolbar:{add:"Add array element",remove:"Remove array element",grid:"Grid view",list:"List view",insertRow:"Insert row",moveRowDown:"Move row down",moveRowUp:"Move row up",addValue:"Add value",addVector:"Add vector",insertValue:"Insert value",insertVector:"Insert vector"},modals:{genericTypeEmpty:"Type doesn't have any information"},validation:{containErrors:"Some fields contain errors"},addDagNode:"Add node",edit:"Edit"},gridToolbar$2={layout:"Layout",content:"Content",query:"Query",data:"Data",entity:"Entity",excel:"Excel",history:"Show history",refresh:"Refresh",addNewEntity:"Add new entity",copyEntity:"Copy entity",deleteSelectedEntity:"Delete selected entity",deleteSelectedEntities:"Delete {{numberOfItems}}selected entities",selectAllRecords:"Select all records",deselectAllRecords:"Deselect all records",savePermanentlyEntity:"Save permanently entity",savePermanentlyEntities:"Save permanently {{numberOfItems}}selected entities",chatAbout:"Chat about",export:"Export",json:"JSON",csv:"CSV",openExcelAddIn:"Export to Excel",openCSV:"Open CSV",restoreDefaultLayout:"Restore default layout",completed:"completed",failed:"failed",stopAll:"Stop All",commonTasks:"Common Tasks",recordTasks:"Record Tasks",settings:"Settings"},editorToolbar$2={json:"Open JSON editor",refresh:"Refresh"},typeToolbar$3={openLogs:" Open notifications",emptyRunHanlers:"No items available",handlerExecutedSuccessfuly:"Completed"},buttons$3={agree:"Agree",cancel:"Cancel",apply:"Apply",save:"Save",connect:"Connect",add:"Add",delete:"Delete",execute:"Execute",ok:"Ok",run:"Run",yes:"Yes",no:"No",send:"Send",proceed:"Proceed",saveAndNext:"Save & Next",saveAndClose:"Save & Close",close:"Close",back:"Back",discard:"Discard"},logs$2={filterByStatus:"Filter by status",search:"Search",handlers:"Tasks",completedHandler:"The task '{{handlerName}}' completed successfully.",failedHandler:"Failed task",notifications:"Notifications",sec:"sec",eraseLogs:"Erase logs",title:"Notifications",errors:"Errors",error:"Error",type:"Type",key:"Key",handler:"Task",taskId:"Task ID",all:"All"},unsavedChangeModal$2={title:"Unsaved Changes",content:"There are unsaved changes. Save now or Cancel to keep editing."},unsavedChangeInfoModal$2={title:"Unsaved Changes Detected",content:"Please save your changes before running the task."},sendFeedbackModal$2={feedback:"Send feedback",warningMessage:"Your message will be sent anonymously. If you'd like us to reply you, please indicate your email address in the mail body.",to:"To",purpose:"Purpose",textareaPlaceholder:"Please describe what you were doing when the error occurred.",subject:"Subject",attachLogs:"Attach Logs"},logsFilter$2={all:"All",debug:"Debug",info:"Info",warning:"Warning",error:"Error",critical:"Critical",submitted:"Submitted",running:"Running",completed:"Completed",failed:"Failed",cancelled:"Cancelled",clear:"Reset filters"},validationMessage$3={invalidEmail:"Please enter a valid email address",fieldRequired:"Field is required",intValue:"Value should be integer",boolValue:"Value should be boolean",dateValue:"Value should be YYYY-MM-DD format",timeValue:"Value should be HH:mm:ss format",dateTimeValue:"Value should be YYYY-MM-DD HH:mm:ss format",emptyTagsArray:"Please specify at least one recipient"},noData$5={inTheReport:"No Data in the Report",refresh:"Refresh",contactAdministrator:"Something went wrong, please reload the page and contact administrator",loading:"Loading",loadingWithDots:"Loading...",details:"Open new screen or try to refresh",noData:"No Data",emptyViewer:"The Viewer is empty",pageNotExist:"Page doesn't exist",returnToPrevPage:"Return to continue using app",return:"Return"},auth$2={login:{actions:{login:"Log In"},username:{placeholder:"Username"},password:{placeholder:"Password"},error:"The username or password is incorrect",divider:"Or continue with",dev:"Dev Login",adLogin:"AD Login: ID-"},logOut:"Log out",error:"Something went wrong, please contact the administrator",backToLogin:"Back to login"},chat$2={newChat:"New Chat",pleaseStartNewChat:"Please start new chat to continue ...",sendMessage:"Send a message ...",cancelRequest:"Processing ... Press Cancel to stop.",loading:"Processing ...",startNewChat:"start new chat",askSomething:"Ask something to start",emptyHistoryTooltip:"No available chats for this topic",historyTooltip:"Chat history",deleteSelectedChats:"delete selected",selectAll:"select all",types:{private:"private chat",internal:"internal chat",encrypted:"encrypted chat"},prompt:"Current Profile",newTypes:{internalAndProfile:"new chat & Profile",private:"new private chat",internal:"new chat",encrypted:"new encrypted chat"},newTooltipTypes:{internalAndProfile:"Start a new chat session & Profile",private:"Start a new private encrypted chat session",internal:"Start a new chat session"},disclaimer:{title:"Disclaimer",paragraph:"By using this software, you consent to the following:",list:["This demo may have trained AI against datasets that may not be complete","Any results obtained from this demonstration need to be carefully considered as feedback from the AI model","Any results may not be used as source data for any other purpose, without independent verification","The results obtained should not be used to automate any business process without a review by the subject matter expert","The results herein shall be deemed confidential and proprietary."]},contentHandlersModal:{title:"Please select the content"}},maximizeButton$2={fullScreen:"Full screen mode",exitFullScreen:"Exit full screen mode",defaultView:"Default view",editorFullScreen:"Expand record view",gridFullScreen:"Expand grid view"},layoutDirectionButton$2={view:"View",verticalLayout:"Split vertically",horizontalLayout:"Split horizontally",horizontalSplit:"Horizontal split",verticalSplit:"Vertical split",gridOnly:"Grid only",dataOnly:"Data only"},recordNavigation$2={record:"Record",prevRecord:"Previous record",moveToTheNext:"Move to the next record",nextRecord:"Next record",moveToThePrev:"Move to the previous record",editRecord:"Edit record",editRecordDescription:"Open JSON editor"},confirmationModal$2={deleteRecords:{addCurrentRecord:"Do you want to add current record to the selection and delete {{numberOfItems}} records?",addTitle:"Do you want to delete current record",title:"Deleting Entities",confirmationTextOneEntity:`This action cannot be undone.
 Are you sure you want to delete selected entity?`,confirmationTexts:`This action cannot be undone.
 Are you sure you want to delete {{numberOfItems}} selected entities?`},executingHandlers:{addCurrentRecord:"Do you want to add current record to the selection and execute {{numberOfItems}} records?",addTitle:"Do you want to execute current record",title:"Confirmation",confirmationTexts:"This will run the task for {{numberOfItems}} records"},restoreLayout:{title:"Restore Default Layout",description:"Restore layout  to the basic view",confirmationText:"All settings that were not saved manually will be discarded. Continue?"},variantSelect:{title:"Variant"},withDependencies:"Save With Dependencies",export:{title:"Confirm",exportEntity_zero:"You are about to export all entities. Continue?",exportEntity_one:"You are about to export {{count}} selected entity. Continue?",exportEntity_other:"You are about to export {{count}} selected entities. Continue?"},savePermanently:{title:"Confirm",exportEntity_zero:"You are about to save all entities. Continue?",exportEntity_one:"You are about to save {{count}} selected entity. Continue?",exportEntity_other:"You are about to save {{count}} selected entities. Continue?"}},viewers$2={pdf:{placeholder:"Enter to search",search:"Search",previousPage:"Previous page",nextPage:"Next page",previousMatch:"Previous match",nextMatch:"Next match"}},queryBuilder$3={customIndex:"Custom",title:"Query",introduction:"Please Select an Index to Display Data",label:"Index",resetAll:"Reset all",apply:"Apply",select:"Select"},toast$3={completed:"completed",failed:"failed",warnings:"warnings",completedUpperCase:"Completed",failedUpperCase:"Failed"},reloadApplicationModal$2={title:"Reload required",content:"Application has been refreshed. Press OK to reload."},userGuideModal$2={title:"User Guide",doNotShowAgain:"Do not show again"},checkboxLabex$2={label:"Enable all"},uploadZoneErrorModal$2={title:"Uploading files error",message:"There were errors processing your file:"},selectedRowsCounter$2={all:"All",selectedRows:"Selected rows: {{selectedRowsCount}}"},versionWarning$2={minor:"Minor version is not match some features might not work. Current - {{currentVersion}} Last - {{lastVersion}}",majorTitle:"Version is not match. App is cannot work",majorSubtitle:"Current - {{currentVersion}}, last - {{lastVersion}}. Please update the app "},newEntity$2={add:"Add new entity",create:"Create new record",clearAllFields:"Clear all fields",success:"Record created successfully",error:"Error occurred",copy:"Copy entity",openNewTable:"Open a new table after the close"},en$1={header:header$7,shared:shared$2,serverUnavailablePage:serverUnavailablePage$2,grid:grid$3,editor:editor$4,gridToolbar:gridToolbar$2,editorToolbar:editorToolbar$2,typeToolbar:typeToolbar$3,buttons:buttons$3,logs:logs$2,unsavedChangeModal:unsavedChangeModal$2,unsavedChangeInfoModal:unsavedChangeInfoModal$2,sendFeedbackModal:sendFeedbackModal$2,logsFilter:logsFilter$2,validationMessage:validationMessage$3,noData:noData$5,auth:auth$2,chat:chat$2,maximizeButton:maximizeButton$2,layoutDirectionButton:layoutDirectionButton$2,recordNavigation:recordNavigation$2,confirmationModal:confirmationModal$2,viewers:viewers$2,queryBuilder:queryBuilder$3,toast:toast$3,reloadApplicationModal:reloadApplicationModal$2,userGuideModal:userGuideModal$2,checkboxLabex:checkboxLabex$2,uploadZoneErrorModal:uploadZoneErrorModal$2,selectedRowsCounter:selectedRowsCounter$2,versionWarning:versionWarning$2,newEntity:newEntity$2},header$6={input:{placeholder:"Find Screen (Ctrl+F)"},tabgroups:{opened:"Opened",tables:"Tables",types:"Types",filters:"Filters",clear:"Clear",filter:"Filter by Type"},userInfo:{theme:{label:"Theme"},language:{label:"Language"},role:"Role",accessLevel:"Access level",build:"Build",versions:"Versions",fullScreenMode:"Full screen mode",secrets:{title:"My Keys",name:"Name",value:"Value",encrypted:"Encrypted",addKey:"ADD KEY",deletingKey:"Deleting Key",deleteModalContent:"You are about to delete {{keyName}} key. This action cannot be undone.",point1:"Your encrypted keys are stored in the browser only",point2:"The server does not cache or store them",point3:"The keys are always encrypted in transit and at rest",point4:"You can delete the keys any time",point5:"They will be deleted automatically after {{expire}} days"}},theme:{dark:"Dark",light:"Light"},environmentModal:{environment:"Environment"},addEnvironmentModal:{addTitle:"Add"},cancelButton:{tooltip:"Cancel running jobs"},downloadLogs:"Download logs",sendFeedback:"Send feedback",logsFileName:"Logs",record:"Record"},shared$1={copy:"Copy",copied:"Copied",close:"Close",yes:"Yes",no:"No",open:"Open",pleaseReloadPage:"Please Reload the Page",somethingWentWrong:"Something went wrong",notSupported:"Not supported",success:"Success",reloadPage:"Reload page",noRecordsAreSelected:"No records are selected",refresh:"Refresh",filterInputPlaceholder:"Filter here"},serverUnavailablePage$1={title:"Cannot Connect To The Server",subtitle:"Check your internet connectivity and server status",loaderTitle:"Trying To Reconnect"},grid$2={sorting:{asc:"Sort Asc",desc:"Sort Desc",none:"No Sort"},useSearch:"Use the search bar to open a new screen",pressControlF:"Press Ctrl + F to start typing",pleaseContantTheAdministrator:"No data found. Please contact the administrator.",overview:"Overview",columnFilter:{filterPlaceholder:"Start typing to search"},tabs:{main:"Main",closeTab:"Close tab",closeOtherTabs:"Close other tabs",closeAllTabs:"Close all tabs"},recordNavigationModal:{title:"{{handlerName}} result",content:"'{{handlerName}}' has been completed",forRecordKey:" for '{{recordKey}}'",viewResults:". View results?"},pagination:{firstPage:"First page",nextPage:"Next page",previousPage:"Previous page",jumpToPage:"Jump to page",go:"GO"},errorHandler:"Error during task run",successHandler:"Successfully executed task",settings:"Grid settings",cellHeight:"Max cell height",rowBorder:"Row Border"},editor$3={modalHeader:"Select the key",entityModalHeader:"Create Entity",entityExists:"Entity exists",duplicateEntity:"Record with key undefined already exists. Do you want to replace it?",createEntity:"Create new empty record",copyEntity:"Create copy from existing record",openJSONEditor:"JSON Editor",entitySavedSuccessfully:"Entity saved successfully",readonlyHint:"This field cannot be edited",tabs:{data:"Data",newEntity:"New entity",copyEntity:"Copy entity",history:"History",selectType:"Select Type",dag:"Directed Acyclic Graph"},breadcrumbs:{closeAll:"Close all crumbs",moveUp:"Move up",moveDown:"Move down"},listToolbar:{add:"Add array element",remove:"Remove array element",grid:"Grid view",list:"List view",insertRow:"Insert row",moveRowDown:"Move row down",moveRowUp:"Move row up",addValue:"Add value",addVector:"Add vector",insertValue:"Insert value",insertVector:"Insert vector"},modals:{genericTypeEmpty:"Type doesn't have any information"},validation:{containErrors:"Some fields contain errors"},addDagNode:"Add node",edit:"Edit"},gridToolbar$1={layout:"Layout",content:"Content",query:"Query",data:"Data",entity:"Entity",excel:"Excel",history:"Show history",refresh:"Refresh",addNewEntity:"Add new entity",copyEntity:"Copy entity",deleteSelectedEntity:"Delete selected entity",deleteSelectedEntities:"Delete {{numberOfItems}}selected entities",selectAllRecords:"Select all records",deselectAllRecords:"Deselect all records",savePermanentlyEntity:"Save permanently entity",savePermanentlyEntities:"Save permanently {{numberOfItems}}selected entities",chatAbout:"Chat about",export:"Export",json:"JSON",openExcelAddIn:"Export to Excel",openCSV:"Open CSV",restoreDefaultLayout:"Restore default layout",completed:"completed",failed:"failed",stopAll:"Stop All",commonTasks:"Common Tasks",recordTasks:"Record Tasks",settings:"Settings"},editorToolbar$1={json:"Open JSON editor",refresh:"Refresh"},typeToolbar$2={openLogs:" Open notifications",emptyRunHanlers:"No items available",handlerExecutedSuccessfuly:"Completed"},buttons$2={agree:"Agree",cancel:"Cancel",apply:"Apply",save:"Save",connect:"Connect",add:"Add",delete:"Delete",execute:"Execute",ok:"Ok",run:"Run",yes:"Yes",no:"No",send:"Send",proceed:"Proceed",saveAndNext:"Save & Next",saveAndClose:"Save & Close",close:"Close",back:"Back",discard:"Discard"},logs$1={filterByStatus:"Filter by status",search:"Search",handlers:"Tasks",completedHandler:"The task '{{handlerName}}' completed successfully.",failedHandler:"Failed task",notifications:"Notifications",sec:"sec",eraseLogs:"Erase logs",title:"Notifications",errors:"Errors",error:"Error",type:"Type",key:"Key",handler:"Task",taskId:"Task ID",all:"All"},unsavedChangeModal$1={title:"Unsaved Changes",content:"There are unsaved changes. Save now or Cancel to keep editing."},unsavedChangeInfoModal$1={title:"Unsaved Changes Detected",content:"Please save your changes before running the task."},sendFeedbackModal$1={feedback:"Send feedback",warningMessage:"Your message will be sent anonymously. If you'd like us to reply you, please indicate your email address in the mail body.",to:"To",purpose:"Purpose",textareaPlaceholder:"Please describe what you were doing when the error occurred.",subject:"Subject",attachLogs:"Attach Logs"},logsFilter$1={all:"All",debug:"Debug",info:"Info",warning:"Warning",error:"Error",critical:"Critical",submitted:"Submitted",running:"Running",completed:"Completed",failed:"Failed",cancelled:"Cancelled",clear:"Reset filters"},validationMessage$2={invalidEmail:"Please enter a valid email address",fieldRequired:"Field is required",intValue:"Value should be integer",boolValue:"Value should be boolean",dateValue:"Value should be YYYY-MM-DD format",timeValue:"Value should be HH:mm:ss format",dateTimeValue:"Value should be YYYY-MM-DD HH:mm:ss format",emptyTagsArray:"Please specify at least one recipient"},noData$4={inTheReport:"No Data in the Report",refresh:"Refresh",contactAdministrator:"Something went wrong, please reload the page and contact administrator",loading:"Loading",loadingWithDots:"Loading...",details:"Open new screen or try to refresh",noData:"No Data",emptyViewer:"The Viewer is empty",pageNotExist:"Page doesn't exist",returnToPrevPage:"Return to continue using app",return:"Return"},auth$1={login:{actions:{login:"Log In"},username:{placeholder:"Username"},password:{placeholder:"Password"},error:"The username or password is incorrect",divider:"Or continue with",dev:"Dev Login",adLogin:"AD Login: ID-"},logOut:"Log out",error:"Something went wrong, please contact the administrator",backToLogin:"Back to login"},chat$1={newChat:"New Chat",pleaseStartNewChat:"Please start new chat to continue ...",sendMessage:"Send a message ...",cancelRequest:"Processing ... Press Cancel to stop.",loading:"Processing ...",startNewChat:"start new chat",askSomething:"Ask something to start",emptyHistoryTooltip:"No available chats for this topic",historyTooltip:"Chat history",deleteSelectedChats:"delete selected",selectAll:"select all",types:{private:"private chat",internal:"internal chat",encrypted:"encrypted chat"},prompt:"Current Profile",newTypes:{internalAndProfile:"new chat & Profile",private:"new private chat",internal:"new chat",encrypted:"new encrypted chat"},newTooltipTypes:{internalAndProfile:"Start a new chat session & Profile",private:"Start a new private encrypted chat session",internal:"Start a new chat session"},disclaimer:{title:"Disclaimer",paragraph:"By using this software, you consent to the following:",list:["This demo may have trained AI against datasets that may not be complete","Any results obtained from this demonstration need to be carefully considered as feedback from the AI model","Any results may not be used as source data for any other purpose, without independent verification","The results obtained should not be used to automate any business process without a review by the subject matter expert","The results herein shall be deemed confidential and proprietary."]},contentHandlersModal:{title:"Please select the content"}},maximizeButton$1={fullScreen:"Full screen mode",exitFullScreen:"Exit full screen mode",defaultView:"Default view",editorFullScreen:"Expand record view",gridFullScreen:"Expand grid view"},layoutDirectionButton$1={view:"View",verticalLayout:"Split vertically",horizontalLayout:"Split horizontally",horizontalSplit:"Horizontal split",verticalSplit:"Vertical split",gridOnly:"Grid only",dataOnly:"Data only"},recordNavigation$1={record:"Record",prevRecord:"Previous record",moveToTheNext:"Move to the next record",nextRecord:"Next record",moveToThePrev:"Move to the previous record",editRecord:"Edit record",editRecordDescription:"Open JSON editor"},confirmationModal$1={deleteRecords:{addCurrentRecord:"Do you want to add current record to the selection and delete {{numberOfItems}} records?",addTitle:"Do you want to delete current record",title:"Deleting Entities",confirmationTextOneEntity:`This action cannot be undone.
 Are you sure you want to delete selected entity?`,confirmationTexts:`This action cannot be undone.
 Are you sure you want to delete {{numberOfItems}} selected entities?`},executingHandlers:{addCurrentRecord:"Do you want to add current record to the selection and execute {{numberOfItems}} records?",addTitle:"Do you want to execute current record",title:"Confirmation",confirmationTexts:"This will run the task for {{numberOfItems}} records"},restoreLayout:{title:"Restore Default Layout",description:"Restore layout  to the basic view",confirmationText:"All settings that were not saved manually will be discarded. Continue?"},variantSelect:{title:"Variant"},withDependencies:"Save With Dependencies",export:{title:"Confirm",exportEntity_zero:"You are about to export all entities. Continue?",exportEntity_one:"You are about to export {{count}} selected entity. Continue?",exportEntity_other:"You are about to export {{count}} selected entities. Continue?"},savePermanently:{title:"Confirm",exportEntity_zero:"You are about to save all entities. Continue?",exportEntity_one:"You are about to save {{count}} selected entity. Continue?",exportEntity_other:"You are about to save {{count}} selected entities. Continue?"}},viewers$1={pdf:{placeholder:"Enter to search",search:"Search",previousPage:"Previous page",nextPage:"Next page",previousMatch:"Previous match",nextMatch:"Next match"}},queryBuilder$2={customIndex:"Custom",title:"Query",introduction:"Please Select an Index to Display Data",label:"Index",resetAll:"Reset all",apply:"Apply",select:"Select"},toast$2={completed:"completed",failed:"failed",warnings:"warnings",completedUpperCase:"Completed",failedUpperCase:"Failed"},reloadApplicationModal$1={title:"Reload required",content:"Application has been refreshed. Press OK to reload."},userGuideModal$1={title:"User Guide",doNotShowAgain:"Do not show again"},checkboxLabex$1={label:"Enable all"},uploadZoneErrorModal$1={title:"Uploading files error",message:"There were errors processing your file:"},selectedRowsCounter$1={all:"All",selectedRows:"Selected rows: {{selectedRowsCount}}"},versionWarning$1={minor:"Minor version is not match some features might not work. Current - {{currentVersion}} Last - {{lastVersion}}",majorTitle:"Version is not match. App is cannot work",majorSubtitle:"Current - {{currentVersion}}, last - {{lastVersion}}. Please update the app "},newEntity$1={add:"Add new entity",create:"Create new record",clearAllFields:"Clear all fields",success:"Record created successfully",error:"Error occurred",copy:"Copy entity",openNewTable:"Open a new table after the close"},enGB={header:header$6,shared:shared$1,serverUnavailablePage:serverUnavailablePage$1,grid:grid$2,editor:editor$3,gridToolbar:gridToolbar$1,editorToolbar:editorToolbar$1,typeToolbar:typeToolbar$2,buttons:buttons$2,logs:logs$1,unsavedChangeModal:unsavedChangeModal$1,unsavedChangeInfoModal:unsavedChangeInfoModal$1,sendFeedbackModal:sendFeedbackModal$1,logsFilter:logsFilter$1,validationMessage:validationMessage$2,noData:noData$4,auth:auth$1,chat:chat$1,maximizeButton:maximizeButton$1,layoutDirectionButton:layoutDirectionButton$1,recordNavigation:recordNavigation$1,confirmationModal:confirmationModal$1,viewers:viewers$1,queryBuilder:queryBuilder$2,toast:toast$2,reloadApplicationModal:reloadApplicationModal$1,userGuideModal:userGuideModal$1,checkboxLabex:checkboxLabex$1,uploadZoneErrorModal:uploadZoneErrorModal$1,selectedRowsCounter:selectedRowsCounter$1,versionWarning:versionWarning$1,newEntity:newEntity$1},header$5={input:{placeholder:"Find Screen (Ctrl+F)"},tabgroups:{opened:"Opened",tables:"Tables",types:"Types",filters:"Filters",clear:"Clear",filter:"Filter by Type"},userInfo:{theme:{label:"Theme"},language:{label:"Language"},role:"Role",accessLevel:"Access level",build:"Build",versions:"Versions",fullScreenMode:"Full screen mode",secrets:{title:"My Keys",name:"Name",value:"Value",encrypted:"Encrypted",addKey:"ADD KEY",deletingKey:"Deleting Key",deleteModalContent:"You are about to delete {{keyName}} key. This action cannot be undone.",point1:"Your encrypted keys are stored in the browser only",point2:"The server does not cache or store them",point3:"The keys are always encrypted in transit and at rest",point4:"You can delete the keys any time",point5:"They will be deleted automatically after {{expire}} days"}},theme:{dark:"Dark",light:"Light"},environmentModal:{environment:"Environment"},addEnvironmentModal:{addTitle:"Add"},cancelButton:{tooltip:"Cancel running jobs"},downloadLogs:"Download logs",sendFeedback:"Send feedback",logsFileName:"Logs",record:"Record"},shared={copy:"Copy",copied:"Copied",close:"Close",yes:"Yes",no:"No",open:"Open",pleaseReloadPage:"Please Reload the Page",somethingWentWrong:"Something went wrong",notSupported:"Not supported",success:"Success",reloadPage:"Reload page",noRecordsAreSelected:"No records are selected",refresh:"Refresh",filterInputPlaceholder:"Filter here"},serverUnavailablePage={title:"Cannot Connect To The Server",subtitle:"Check your internet connectivity and server status",loaderTitle:"Trying To Reconnect"},grid$1={sorting:{asc:"Sort Asc",desc:"Sort Desc",none:"No Sort"},useSearch:"Use the search bar to open a new screen",pressControlF:"Press Ctrl + F to start typing",pleaseContantTheAdministrator:"No data found. Please contact the administrator.",overview:"Overview",columnFilter:{filterPlaceholder:"Start typing to search"},tabs:{main:"Main",closeTab:"Close tab",closeOtherTabs:"Close other tabs",closeAllTabs:"Close all tabs"},recordNavigationModal:{title:"{{handlerName}} result",content:"'{{handlerName}}' has been completed",forRecordKey:" for '{{recordKey}}'",viewResults:". View results?"},pagination:{firstPage:"First page",nextPage:"Next page",previousPage:"Previous page",jumpToPage:"Jump to page",go:"GO"},errorHandler:"Error during task run",successHandler:"Successfully executed task",settings:"Grid settings",cellHeight:"Max cell height",rowBorder:"Row Border"},editor$2={modalHeader:"Select the key",entityModalHeader:"Create Entity",entityExists:"Entity exists",duplicateEntity:"Record with key undefined already exists. Do you want to replace it?",createEntity:"Create new empty record",copyEntity:"Create copy from existing record",openJSONEditor:"JSON Editor",entitySavedSuccessfully:"Entity saved successfully",readonlyHint:"This field cannot be edited",tabs:{data:"Data",newEntity:"New entity",copyEntity:"Copy entity",history:"History",selectType:"Select Type",dag:"Directed Acyclic Graph"},breadcrumbs:{closeAll:"Close all crumbs",moveUp:"Move up",moveDown:"Move down"},listToolbar:{add:"Add array element",remove:"Remove array element",grid:"Grid view",list:"List view",insertRow:"Insert row",moveRowDown:"Move row down",moveRowUp:"Move row up",addValue:"Add value",addVector:"Add vector",insertValue:"Insert value",insertVector:"Insert vector"},modals:{genericTypeEmpty:"Type doesn't have any information"},validation:{containErrors:"Some fields contain errors"},addDagNode:"Add node",edit:"Edit"},gridToolbar={layout:"Layout",content:"Content",query:"Query",data:"Data",entity:"Entity",excel:"Excel",history:"Show history",refresh:"Refresh",addNewEntity:"Add new entity",copyEntity:"Copy entity",deleteSelectedEntity:"Delete selected entity",deleteSelectedEntities:"Delete {{numberOfItems}}selected entities",selectAllRecords:"Select all records",deselectAllRecords:"Deselect all records",savePermanentlyEntity:"Save permanently entity",savePermanentlyEntities:"Save permanently {{numberOfItems}}selected entities",chatAbout:"Chat about",export:"Export",json:"JSON",openExcelAddIn:"Export to Excel",openCSV:"Open CSV",restoreDefaultLayout:"Restore default layout",completed:"completed",failed:"failed",stopAll:"Stop All",commonTasks:"Common Tasks",recordTasks:"Record Tasks",settings:"Settings"},editorToolbar={json:"Open JSON editor",refresh:"Refresh"},typeToolbar$1={openLogs:" Open notifications",emptyRunHanlers:"No items available",handlerExecutedSuccessfuly:"Completed"},buttons$1={agree:"Agree",cancel:"Cancel",apply:"Apply",save:"Save",connect:"Connect",add:"Add",delete:"Delete",execute:"Execute",ok:"Ok",run:"Run",yes:"Yes",no:"No",send:"Send",proceed:"Proceed",saveAndNext:"Save & Next",saveAndClose:"Save & Close",close:"Close",back:"Back",discard:"Discard"},logs={filterByStatus:"Filter by status",search:"Search",handlers:"Tasks",completedHandler:"The task '{{handlerName}}' completed successfully.",failedHandler:"Failed task",notifications:"Notifications",sec:"sec",eraseLogs:"Erase logs",title:"Notifications",errors:"Errors",error:"Error",type:"Type",key:"Key",handler:"Task",taskId:"Task ID",all:"All"},unsavedChangeModal={title:"Unsaved Changes",content:"There are unsaved changes. Save now or Cancel to keep editing."},unsavedChangeInfoModal={title:"Unsaved Changes Detected",content:"Please save your changes before running the task."},sendFeedbackModal={feedback:"Send feedback",warningMessage:"Your message will be sent anonymously. If you'd like us to reply you, please indicate your email address in the mail body.",to:"To",purpose:"Purpose",textareaPlaceholder:"Please describe what you were doing when the error occurred.",subject:"Subject",attachLogs:"Attach Logs"},logsFilter={all:"All",debug:"Debug",info:"Info",warning:"Warning",error:"Error",critical:"Critical",submitted:"Submitted",running:"Running",completed:"Completed",failed:"Failed",cancelled:"Cancelled",clear:"Reset filters"},validationMessage$1={invalidEmail:"Please enter a valid email address",fieldRequired:"Field is required",intValue:"Value should be integer",boolValue:"Value should be boolean",dateValue:"Value should be YYYY-MM-DD format",timeValue:"Value should be HH:mm:ss format",dateTimeValue:"Value should be YYYY-MM-DD HH:mm:ss format",emptyTagsArray:"Please specify at least one recipient"},noData$3={inTheReport:"No Data in the Report",refresh:"Refresh",contactAdministrator:"Something went wrong, please reload the page and contact administrator",loading:"Loading",loadingWithDots:"Loading...",details:"Open new screen or try to refresh",noData:"No Data",emptyViewer:"The Viewer is empty",pageNotExist:"Page doesn't exist",returnToPrevPage:"Return to continue using app",return:"Return"},auth={login:{actions:{login:"Log In"},username:{placeholder:"Username"},password:{placeholder:"Password"},error:"The username or password is incorrect",divider:"Or continue with",dev:"Dev Login",adLogin:"AD Login: ID-"},logOut:"Log out",error:"Something went wrong, please contact the administrator",backToLogin:"Back to login"},chat={newChat:"New Chat",pleaseStartNewChat:"Please start new chat to continue ...",sendMessage:"Send a message ...",cancelRequest:"Processing ... Press Cancel to stop.",loading:"Processing ...",startNewChat:"start new chat",askSomething:"Ask something to start",emptyHistoryTooltip:"No available chats for this topic",historyTooltip:"Chat history",deleteSelectedChats:"delete selected",selectAll:"select all",types:{private:"private chat",internal:"internal chat",encrypted:"encrypted chat"},prompt:"Current Profile",newTypes:{internalAndProfile:"new chat & Profile",private:"new private chat",internal:"new chat",encrypted:"new encrypted chat"},newTooltipTypes:{internalAndProfile:"Start a new chat session & Profile",private:"Start a new private encrypted chat session",internal:"Start a new chat session"},disclaimer:{title:"Disclaimer",paragraph:"By using this software, you consent to the following:",list:["This demo may have trained AI against datasets that may not be complete","Any results obtained from this demonstration need to be carefully considered as feedback from the AI model","Any results may not be used as source data for any other purpose, without independent verification","The results obtained should not be used to automate any business process without a review by the subject matter expert","The results herein shall be deemed confidential and proprietary."]},contentHandlersModal:{title:"Please select the content"}},maximizeButton={fullScreen:"Full screen mode",exitFullScreen:"Exit full screen mode",defaultView:"Default view",editorFullScreen:"Expand record view",gridFullScreen:"Expand grid view"},layoutDirectionButton={view:"View",verticalLayout:"Split vertically",horizontalLayout:"Split horizontally",horizontalSplit:"Horizontal split",verticalSplit:"Vertical split",gridOnly:"Grid only",dataOnly:"Data only"},recordNavigation={record:"Record",prevRecord:"Previous record",moveToTheNext:"Move to the next record",nextRecord:"Next record",moveToThePrev:"Move to the previous record",editRecord:"Edit record",editRecordDescription:"Open JSON editor"},confirmationModal={deleteRecords:{addCurrentRecord:"Do you want to add current record to the selection and delete {{numberOfItems}} records?",addTitle:"Do you want to delete current record",title:"Deleting Entities",confirmationTextOneEntity:`This action cannot be undone.
 Are you sure you want to delete selected entity?`,confirmationTexts:`This action cannot be undone.
 Are you sure you want to delete {{numberOfItems}} selected entities?`},executingHandlers:{addCurrentRecord:"Do you want to add current record to the selection and execute {{numberOfItems}} records?",addTitle:"Do you want to execute current record",title:"Confirmation",confirmationTexts:"This will run the task for {{numberOfItems}} records"},restoreLayout:{title:"Restore Default Layout",description:"Restore layout  to the basic view",confirmationText:"All settings that were not saved manually will be discarded. Continue?"},variantSelect:{title:"Variant"},withDependencies:"Save With Dependencies",export:{title:"Confirm",exportEntity_zero:"You are about to export all entities. Continue?",exportEntity_one:"You are about to export {{count}} selected entity. Continue?",exportEntity_other:"You are about to export {{count}} selected entities. Continue?"},savePermanently:{title:"Confirm",exportEntity_zero:"You are about to save all entities. Continue?",exportEntity_one:"You are about to save {{count}} selected entity. Continue?",exportEntity_other:"You are about to save {{count}} selected entities. Continue?"}},viewers={pdf:{placeholder:"Enter to search",search:"Search",previousPage:"Previous page",nextPage:"Next page",previousMatch:"Previous match",nextMatch:"Next match"}},queryBuilder$1={customIndex:"Custom",title:"Query",introduction:"Please Select an Index to Display Data",label:"Index",resetAll:"Reset all",apply:"Apply",select:"Select"},toast$1={completed:"completed",failed:"failed",warnings:"warnings",completedUpperCase:"Completed",failedUpperCase:"Failed"},reloadApplicationModal={title:"Reload required",content:"Application has been refreshed. Press OK to reload."},userGuideModal={title:"User Guide",doNotShowAgain:"Do not show again"},checkboxLabex={label:"Enable all"},uploadZoneErrorModal={title:"Uploading files error",message:"There were errors processing your file:"},selectedRowsCounter={all:"All",selectedRows:"Selected rows: {{selectedRowsCount}}"},versionWarning={minor:"Minor version is not match some features might not work. Current - {{currentVersion}} Last - {{lastVersion}}",majorTitle:"Version is not match. App is cannot work",majorSubtitle:"Current - {{currentVersion}}, last - {{lastVersion}}. Please update the app "},newEntity={add:"Add new entity",create:"Create new record",clearAllFields:"Clear all fields",success:"Record created successfully",error:"Error occurred",copy:"Copy entity",openNewTable:"Open a new table after the close"},enUS={header:header$5,shared,serverUnavailablePage,grid:grid$1,editor:editor$2,gridToolbar,editorToolbar,typeToolbar:typeToolbar$1,buttons:buttons$1,logs,unsavedChangeModal,unsavedChangeInfoModal,sendFeedbackModal,logsFilter,validationMessage:validationMessage$1,noData:noData$3,auth,chat,maximizeButton,layoutDirectionButton,recordNavigation,confirmationModal,viewers,queryBuilder:queryBuilder$1,toast:toast$1,reloadApplicationModal,userGuideModal,checkboxLabex,uploadZoneErrorModal,selectedRowsCounter,versionWarning,newEntity};instance.use(initReactI18next).init({resources:{en:{translation:en$1},enGB:{translation:enGB},enUS:{translation:enUS}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});var createRoot,m$5=reactDomExports;createRoot=m$5.createRoot,m$5.hydrateRoot;var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$3=reactExports;function h$6(K,J){return K===J&&(K!==0||1/K===1/J)||K!==K&&J!==J}var k$5=typeof Object.is=="function"?Object.is:h$6,l$4=e$3.useState,m$4=e$3.useEffect,n$4=e$3.useLayoutEffect,p$5=e$3.useDebugValue;function q$5(K,J){var ne=J(),oe=l$4({inst:{value:ne,getSnapshot:J}}),ce=oe[0].inst,ue=oe[1];return n$4(function(){ce.value=ne,ce.getSnapshot=J,r$4(ce)&&ue({inst:ce})},[K,ne,J]),m$4(function(){return r$4(ce)&&ue({inst:ce}),K(function(){r$4(ce)&&ue({inst:ce})})},[K]),p$5(ne),ne}function r$4(K){var J=K.getSnapshot;K=K.value;try{var ne=J();return!k$5(K,ne)}catch{return!0}}function t$4(K,J){return J()}var u$5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$4:q$5;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$3.useSyncExternalStore!==void 0?e$3.useSyncExternalStore:u$5;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports,withSelector={exports:{}},withSelector_production_min={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$5=reactExports,n$3=shimExports;function p$4(K,J){return K===J&&(K!==0||1/K===1/J)||K!==K&&J!==J}var q$4=typeof Object.is=="function"?Object.is:p$4,r$3=n$3.useSyncExternalStore,t$3=h$5.useRef,u$4=h$5.useEffect,v$5=h$5.useMemo,w$2=h$5.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(K,J,ne,oe,ce){var ue=t$3(null);if(ue.current===null){var Ae={hasValue:!1,value:null};ue.current=Ae}else Ae=ue.current;ue=v$5(function(){function xe(Te){if(!me){if(me=!0,ge=Te,Te=oe(Te),ce!==void 0&&Ae.hasValue){var Ne=Ae.value;if(ce(Ne,Te))return ye=Ne}return ye=Te}if(Ne=ye,q$4(ge,Te))return Ne;var $e=oe(Te);return ce!==void 0&&ce(Ne,$e)?Ne:(ge=Te,ye=$e)}var me=!1,ge,ye,Se=ne===void 0?null:ne;return[function(){return xe(J())},Se===null?void 0:function(){return xe(Se())}]},[J,ne,oe,ce]);var pe=r$3(K,ue[0],ue[1]);return u$4(function(){Ae.hasValue=!0,Ae.value=pe},[pe]),w$2(pe),pe};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports);function defaultNoopBatch(K){K()}let batch=defaultNoopBatch;const setBatch=K=>batch=K,getBatch=()=>batch,ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis<"u"?globalThis:{};function getContext(){var K;if(!reactExports.createContext)return{};const J=(K=gT[ContextKey])!=null?K:gT[ContextKey]=new Map;let ne=J.get(reactExports.createContext);return ne||(ne=reactExports.createContext(null),J.set(reactExports.createContext,ne)),ne}const ReactReduxContext=getContext();function createReduxContextHook(K=ReactReduxContext){return function(){return reactExports.useContext(K)}}const useReduxContext=createReduxContextHook(),notInitialized=()=>{throw new Error("uSES not initialized!")};let useSyncExternalStoreWithSelector$1=notInitialized;const initializeUseSelector=K=>{useSyncExternalStoreWithSelector$1=K},refEquality=(K,J)=>K===J;function createSelectorHook(K=ReactReduxContext){const J=K===ReactReduxContext?useReduxContext:createReduxContextHook(K);return function(oe,ce={}){const{equalityFn:ue=refEquality,stabilityCheck:Ae=void 0,noopCheck:pe=void 0}=typeof ce=="function"?{equalityFn:ce}:ce,{store:xe,subscription:me,getServerState:ge,stabilityCheck:ye,noopCheck:Se}=J();reactExports.useRef(!0);const Te=reactExports.useCallback({[oe.name]($e){return oe($e)}}[oe.name],[oe,ye,Ae]),Ne=useSyncExternalStoreWithSelector$1(me.addNestedSub,xe.getState,ge||xe.getState,Te,ue);return reactExports.useDebugValue(Ne),Ne}}const useSelector$1=createSelectorHook();function _objectWithoutPropertiesLoose$2(K,J){if(K==null)return{};var ne={};for(var oe in K)if({}.hasOwnProperty.call(K,oe)){if(J.indexOf(oe)!==-1)continue;ne[oe]=K[oe]}return ne}var reactIs$2={exports:{}},reactIs_production_min$1={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$3=typeof Symbol=="function"&&Symbol.for,c$2=b$3?Symbol.for("react.element"):60103,d$3=b$3?Symbol.for("react.portal"):60106,e$2=b$3?Symbol.for("react.fragment"):60107,f$6=b$3?Symbol.for("react.strict_mode"):60108,g$3=b$3?Symbol.for("react.profiler"):60114,h$4=b$3?Symbol.for("react.provider"):60109,k$4=b$3?Symbol.for("react.context"):60110,l$3=b$3?Symbol.for("react.async_mode"):60111,m$3=b$3?Symbol.for("react.concurrent_mode"):60111,n$2=b$3?Symbol.for("react.forward_ref"):60112,p$3=b$3?Symbol.for("react.suspense"):60113,q$3=b$3?Symbol.for("react.suspense_list"):60120,r$2=b$3?Symbol.for("react.memo"):60115,t$2=b$3?Symbol.for("react.lazy"):60116,v$4=b$3?Symbol.for("react.block"):60121,w$1=b$3?Symbol.for("react.fundamental"):60117,x$1=b$3?Symbol.for("react.responder"):60118,y$2=b$3?Symbol.for("react.scope"):60119;function z$3(K){if(typeof K=="object"&&K!==null){var J=K.$$typeof;switch(J){case c$2:switch(K=K.type,K){case l$3:case m$3:case e$2:case g$3:case f$6:case p$3:return K;default:switch(K=K&&K.$$typeof,K){case k$4:case n$2:case t$2:case r$2:case h$4:return K;default:return J}}case d$3:return J}}}function A$4(K){return z$3(K)===m$3}reactIs_production_min$1.AsyncMode=l$3;reactIs_production_min$1.ConcurrentMode=m$3;reactIs_production_min$1.ContextConsumer=k$4;reactIs_production_min$1.ContextProvider=h$4;reactIs_production_min$1.Element=c$2;reactIs_production_min$1.ForwardRef=n$2;reactIs_production_min$1.Fragment=e$2;reactIs_production_min$1.Lazy=t$2;reactIs_production_min$1.Memo=r$2;reactIs_production_min$1.Portal=d$3;reactIs_production_min$1.Profiler=g$3;reactIs_production_min$1.StrictMode=f$6;reactIs_production_min$1.Suspense=p$3;reactIs_production_min$1.isAsyncMode=function(K){return A$4(K)||z$3(K)===l$3};reactIs_production_min$1.isConcurrentMode=A$4;reactIs_production_min$1.isContextConsumer=function(K){return z$3(K)===k$4};reactIs_production_min$1.isContextProvider=function(K){return z$3(K)===h$4};reactIs_production_min$1.isElement=function(K){return typeof K=="object"&&K!==null&&K.$$typeof===c$2};reactIs_production_min$1.isForwardRef=function(K){return z$3(K)===n$2};reactIs_production_min$1.isFragment=function(K){return z$3(K)===e$2};reactIs_production_min$1.isLazy=function(K){return z$3(K)===t$2};reactIs_production_min$1.isMemo=function(K){return z$3(K)===r$2};reactIs_production_min$1.isPortal=function(K){return z$3(K)===d$3};reactIs_production_min$1.isProfiler=function(K){return z$3(K)===g$3};reactIs_production_min$1.isStrictMode=function(K){return z$3(K)===f$6};reactIs_production_min$1.isSuspense=function(K){return z$3(K)===p$3};reactIs_production_min$1.isValidElementType=function(K){return typeof K=="string"||typeof K=="function"||K===e$2||K===m$3||K===g$3||K===f$6||K===p$3||K===q$3||typeof K=="object"&&K!==null&&(K.$$typeof===t$2||K.$$typeof===r$2||K.$$typeof===h$4||K.$$typeof===k$4||K.$$typeof===n$2||K.$$typeof===w$1||K.$$typeof===x$1||K.$$typeof===y$2||K.$$typeof===v$4)};reactIs_production_min$1.typeOf=z$3;reactIs$2.exports=reactIs_production_min$1;var reactIsExports$1=reactIs$2.exports,reactIs$1=reactIsExports$1,REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs$1.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs$1.Memo]=MEMO_STATICS;function getStatics(K){return reactIs$1.isMemo(K)?MEMO_STATICS:TYPE_STATICS[K.$$typeof]||REACT_STATICS}var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf$1=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(K,J,ne){if(typeof J!="string"){if(objectPrototype){var oe=getPrototypeOf$1(J);oe&&oe!==objectPrototype&&hoistNonReactStatics(K,oe,ne)}var ce=getOwnPropertyNames(J);getOwnPropertySymbols&&(ce=ce.concat(getOwnPropertySymbols(J)));for(var ue=getStatics(K),Ae=getStatics(J),pe=0;pe<ce.length;++pe){var xe=ce[pe];if(!KNOWN_STATICS[xe]&&!(ne&&ne[xe])&&!(Ae&&Ae[xe])&&!(ue&&ue[xe])){var me=getOwnPropertyDescriptor(J,xe);try{defineProperty(K,xe,me)}catch{}}}}return K}var hoistNonReactStatics_cjs=hoistNonReactStatics;const hoistStatics=getDefaultExportFromCjs(hoistNonReactStatics_cjs);var reactIs={exports:{}},reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$2=Symbol.for("react.element"),c$1=Symbol.for("react.portal"),d$2=Symbol.for("react.fragment"),e$1=Symbol.for("react.strict_mode"),f$5=Symbol.for("react.profiler"),g$2=Symbol.for("react.provider"),h$3=Symbol.for("react.context"),k$3=Symbol.for("react.server_context"),l$2=Symbol.for("react.forward_ref"),m$2=Symbol.for("react.suspense"),n$1=Symbol.for("react.suspense_list"),p$2=Symbol.for("react.memo"),q$2=Symbol.for("react.lazy"),t$1=Symbol.for("react.offscreen"),u$3;u$3=Symbol.for("react.module.reference");function v$3(K){if(typeof K=="object"&&K!==null){var J=K.$$typeof;switch(J){case b$2:switch(K=K.type,K){case d$2:case f$5:case e$1:case m$2:case n$1:return K;default:switch(K=K&&K.$$typeof,K){case k$3:case h$3:case l$2:case q$2:case p$2:case g$2:return K;default:return J}}case c$1:return J}}}reactIs_production_min.ContextConsumer=h$3;reactIs_production_min.ContextProvider=g$2;reactIs_production_min.Element=b$2;reactIs_production_min.ForwardRef=l$2;reactIs_production_min.Fragment=d$2;reactIs_production_min.Lazy=q$2;reactIs_production_min.Memo=p$2;reactIs_production_min.Portal=c$1;reactIs_production_min.Profiler=f$5;reactIs_production_min.StrictMode=e$1;reactIs_production_min.Suspense=m$2;reactIs_production_min.SuspenseList=n$1;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(K){return v$3(K)===h$3};reactIs_production_min.isContextProvider=function(K){return v$3(K)===g$2};reactIs_production_min.isElement=function(K){return typeof K=="object"&&K!==null&&K.$$typeof===b$2};reactIs_production_min.isForwardRef=function(K){return v$3(K)===l$2};reactIs_production_min.isFragment=function(K){return v$3(K)===d$2};reactIs_production_min.isLazy=function(K){return v$3(K)===q$2};reactIs_production_min.isMemo=function(K){return v$3(K)===p$2};reactIs_production_min.isPortal=function(K){return v$3(K)===c$1};reactIs_production_min.isProfiler=function(K){return v$3(K)===f$5};reactIs_production_min.isStrictMode=function(K){return v$3(K)===e$1};reactIs_production_min.isSuspense=function(K){return v$3(K)===m$2};reactIs_production_min.isSuspenseList=function(K){return v$3(K)===n$1};reactIs_production_min.isValidElementType=function(K){return typeof K=="string"||typeof K=="function"||K===d$2||K===f$5||K===e$1||K===m$2||K===n$1||K===t$1||typeof K=="object"&&K!==null&&(K.$$typeof===q$2||K.$$typeof===p$2||K.$$typeof===g$2||K.$$typeof===h$3||K.$$typeof===l$2||K.$$typeof===u$3||K.getModuleId!==void 0)};reactIs_production_min.typeOf=v$3;reactIs.exports=reactIs_production_min;var reactIsExports=reactIs.exports;const _excluded$2=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function pureFinalPropsSelectorFactory(K,J,ne,oe,{areStatesEqual:ce,areOwnPropsEqual:ue,areStatePropsEqual:Ae}){let pe=!1,xe,me,ge,ye,Se;function Te(Ke,Ye){return xe=Ke,me=Ye,ge=K(xe,me),ye=J(oe,me),Se=ne(ge,ye,me),pe=!0,Se}function Ne(){return ge=K(xe,me),J.dependsOnOwnProps&&(ye=J(oe,me)),Se=ne(ge,ye,me),Se}function $e(){return K.dependsOnOwnProps&&(ge=K(xe,me)),J.dependsOnOwnProps&&(ye=J(oe,me)),Se=ne(ge,ye,me),Se}function ke(){const Ke=K(xe,me),Ye=!Ae(Ke,ge);return ge=Ke,Ye&&(Se=ne(ge,ye,me)),Se}function je(Ke,Ye){const ze=!ue(Ye,me),Xe=!ce(Ke,xe,Ye,me);return xe=Ke,me=Ye,ze&&Xe?Ne():ze?$e():Xe?ke():Se}return function(Ye,ze){return pe?je(Ye,ze):Te(Ye,ze)}}function finalPropsSelectorFactory(K,J){let{initMapStateToProps:ne,initMapDispatchToProps:oe,initMergeProps:ce}=J,ue=_objectWithoutPropertiesLoose$2(J,_excluded$2);const Ae=ne(K,ue),pe=oe(K,ue),xe=ce(K,ue);return pureFinalPropsSelectorFactory(Ae,pe,xe,K,ue)}function bindActionCreators$1(K,J){const ne={};for(const oe in K){const ce=K[oe];typeof ce=="function"&&(ne[oe]=(...ue)=>J(ce(...ue)))}return ne}function wrapMapToPropsConstant(K){return function(ne){const oe=K(ne);function ce(){return oe}return ce.dependsOnOwnProps=!1,ce}}function getDependsOnOwnProps(K){return K.dependsOnOwnProps?!!K.dependsOnOwnProps:K.length!==1}function wrapMapToPropsFunc(K,J){return function(oe,{displayName:ce}){const ue=function(pe,xe){return ue.dependsOnOwnProps?ue.mapToProps(pe,xe):ue.mapToProps(pe,void 0)};return ue.dependsOnOwnProps=!0,ue.mapToProps=function(pe,xe){ue.mapToProps=K,ue.dependsOnOwnProps=getDependsOnOwnProps(K);let me=ue(pe,xe);return typeof me=="function"&&(ue.mapToProps=me,ue.dependsOnOwnProps=getDependsOnOwnProps(me),me=ue(pe,xe)),me},ue}}function createInvalidArgFactory(K,J){return(ne,oe)=>{throw new Error(`Invalid value of type ${typeof K} for ${J} argument when connecting component ${oe.wrappedComponentName}.`)}}function mapDispatchToPropsFactory(K){return K&&typeof K=="object"?wrapMapToPropsConstant(J=>bindActionCreators$1(K,J)):K?typeof K=="function"?wrapMapToPropsFunc(K):createInvalidArgFactory(K,"mapDispatchToProps"):wrapMapToPropsConstant(J=>({dispatch:J}))}function mapStateToPropsFactory(K){return K?typeof K=="function"?wrapMapToPropsFunc(K):createInvalidArgFactory(K,"mapStateToProps"):wrapMapToPropsConstant(()=>({}))}function defaultMergeProps(K,J,ne){return _extends({},ne,K,J)}function wrapMergePropsFunc(K){return function(ne,{displayName:oe,areMergedPropsEqual:ce}){let ue=!1,Ae;return function(xe,me,ge){const ye=K(xe,me,ge);return ue?ce(ye,Ae)||(Ae=ye):(ue=!0,Ae=ye),Ae}}}function mergePropsFactory(K){return K?typeof K=="function"?wrapMergePropsFunc(K):createInvalidArgFactory(K,"mergeProps"):()=>defaultMergeProps}function createListenerCollection(){const K=getBatch();let J=null,ne=null;return{clear(){J=null,ne=null},notify(){K(()=>{let oe=J;for(;oe;)oe.callback(),oe=oe.next})},get(){let oe=[],ce=J;for(;ce;)oe.push(ce),ce=ce.next;return oe},subscribe(oe){let ce=!0,ue=ne={callback:oe,next:null,prev:ne};return ue.prev?ue.prev.next=ue:J=ue,function(){!ce||J===null||(ce=!1,ue.next?ue.next.prev=ue.prev:ne=ue.prev,ue.prev?ue.prev.next=ue.next:J=ue.next)}}}}const nullListeners={notify(){},get:()=>[]};function createSubscription(K,J){let ne,oe=nullListeners,ce=0,ue=!1;function Ae($e){ge();const ke=oe.subscribe($e);let je=!1;return()=>{je||(je=!0,ke(),ye())}}function pe(){oe.notify()}function xe(){Ne.onStateChange&&Ne.onStateChange()}function me(){return ue}function ge(){ce++,ne||(ne=J?J.addNestedSub(xe):K.subscribe(xe),oe=createListenerCollection())}function ye(){ce--,ne&&ce===0&&(ne(),ne=void 0,oe.clear(),oe=nullListeners)}function Se(){ue||(ue=!0,ge())}function Te(){ue&&(ue=!1,ye())}const Ne={addNestedSub:Ae,notifyNestedSubs:pe,handleChangeWrapper:xe,isSubscribed:me,trySubscribe:Se,tryUnsubscribe:Te,getListeners:()=>oe};return Ne}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",useIsomorphicLayoutEffect$4=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function is(K,J){return K===J?K!==0||J!==0||1/K===1/J:K!==K&&J!==J}function shallowEqual(K,J){if(is(K,J))return!0;if(typeof K!="object"||K===null||typeof J!="object"||J===null)return!1;const ne=Object.keys(K),oe=Object.keys(J);if(ne.length!==oe.length)return!1;for(let ce=0;ce<ne.length;ce++)if(!Object.prototype.hasOwnProperty.call(J,ne[ce])||!is(K[ne[ce]],J[ne[ce]]))return!1;return!0}const _excluded$1=["reactReduxForwardedRef"];let useSyncExternalStore=notInitialized;const initializeConnect=K=>{useSyncExternalStore=K},NO_SUBSCRIPTION_ARRAY=[null,null];function useIsomorphicLayoutEffectWithArgs(K,J,ne){useIsomorphicLayoutEffect$4(()=>K(...J),ne)}function captureWrapperProps(K,J,ne,oe,ce,ue){K.current=oe,ne.current=!1,ce.current&&(ce.current=null,ue())}function subscribeUpdates(K,J,ne,oe,ce,ue,Ae,pe,xe,me,ge){if(!K)return()=>{};let ye=!1,Se=null;const Te=()=>{if(ye||!pe.current)return;const $e=J.getState();let ke,je;try{ke=oe($e,ce.current)}catch(Ke){je=Ke,Se=Ke}je||(Se=null),ke===ue.current?Ae.current||me():(ue.current=ke,xe.current=ke,Ae.current=!0,ge())};return ne.onStateChange=Te,ne.trySubscribe(),Te(),()=>{if(ye=!0,ne.tryUnsubscribe(),ne.onStateChange=null,Se)throw Se}}function strictEqual(K,J){return K===J}function connect(K,J,ne,{pure:oe,areStatesEqual:ce=strictEqual,areOwnPropsEqual:ue=shallowEqual,areStatePropsEqual:Ae=shallowEqual,areMergedPropsEqual:pe=shallowEqual,forwardRef:xe=!1,context:me=ReactReduxContext}={}){const ge=me,ye=mapStateToPropsFactory(K),Se=mapDispatchToPropsFactory(J),Te=mergePropsFactory(ne),Ne=!!K;return ke=>{const je=ke.displayName||ke.name||"Component",Ke=`Connect(${je})`,Ye={shouldHandleStateChanges:Ne,displayName:Ke,wrappedComponentName:je,WrappedComponent:ke,initMapStateToProps:ye,initMapDispatchToProps:Se,initMergeProps:Te,areStatesEqual:ce,areStatePropsEqual:Ae,areOwnPropsEqual:ue,areMergedPropsEqual:pe};function ze(rt){const[Ze,et,nt]=reactExports.useMemo(()=>{const{reactReduxForwardedRef:pt}=rt,mt=_objectWithoutPropertiesLoose$2(rt,_excluded$1);return[rt.context,pt,mt]},[rt]),Ge=reactExports.useMemo(()=>Ze&&Ze.Consumer&&reactIsExports.isContextConsumer(reactExports.createElement(Ze.Consumer,null))?Ze:ge,[Ze,ge]),ve=reactExports.useContext(Ge),Be=!!rt.store&&!!rt.store.getState&&!!rt.store.dispatch,Re=!!ve&&!!ve.store,Ie=Be?rt.store:ve.store,Fe=Re?ve.getServerState:Ie.getState,qe=reactExports.useMemo(()=>finalPropsSelectorFactory(Ie.dispatch,Ye),[Ie]),[We,Ue]=reactExports.useMemo(()=>{if(!Ne)return NO_SUBSCRIPTION_ARRAY;const pt=createSubscription(Ie,Be?void 0:ve.subscription),mt=pt.notifyNestedSubs.bind(pt);return[pt,mt]},[Ie,Be,ve]),_e=reactExports.useMemo(()=>Be?ve:_extends({},ve,{subscription:We}),[Be,ve,We]),Qe=reactExports.useRef(),tt=reactExports.useRef(nt),it=reactExports.useRef(),at=reactExports.useRef(!1);reactExports.useRef(!1);const ot=reactExports.useRef(!1),lt=reactExports.useRef();useIsomorphicLayoutEffect$4(()=>(ot.current=!0,()=>{ot.current=!1}),[]);const st=reactExports.useMemo(()=>()=>it.current&&nt===tt.current?it.current:qe(Ie.getState(),nt),[Ie,nt]),ut=reactExports.useMemo(()=>mt=>We?subscribeUpdates(Ne,Ie,We,qe,tt,Qe,at,ot,it,Ue,mt):()=>{},[We]);useIsomorphicLayoutEffectWithArgs(captureWrapperProps,[tt,Qe,at,nt,it,Ue]);let ft;try{ft=useSyncExternalStore(ut,st,Fe?()=>qe(Fe(),nt):st)}catch(pt){throw lt.current&&(pt.message+=`
The error may be correlated with this previous error:
${lt.current.stack}

`),pt}useIsomorphicLayoutEffect$4(()=>{lt.current=void 0,it.current=void 0,Qe.current=ft});const dt=reactExports.useMemo(()=>reactExports.createElement(ke,_extends({},ft,{ref:et})),[et,ke,ft]);return reactExports.useMemo(()=>Ne?reactExports.createElement(Ge.Provider,{value:_e},dt):dt,[Ge,dt,_e])}const Je=reactExports.memo(ze);if(Je.WrappedComponent=ke,Je.displayName=ze.displayName=Ke,xe){const Ze=reactExports.forwardRef(function(nt,Ge){return reactExports.createElement(Je,_extends({},nt,{reactReduxForwardedRef:Ge}))});return Ze.displayName=Ke,Ze.WrappedComponent=ke,hoistStatics(Ze,ke)}return hoistStatics(Je,ke)}}function Provider$2({store:K,context:J,children:ne,serverState:oe,stabilityCheck:ce="once",noopCheck:ue="once"}){const Ae=reactExports.useMemo(()=>{const me=createSubscription(K);return{store:K,subscription:me,getServerState:oe?()=>oe:void 0,stabilityCheck:ce,noopCheck:ue}},[K,oe,ce,ue]),pe=reactExports.useMemo(()=>K.getState(),[K]);useIsomorphicLayoutEffect$4(()=>{const{subscription:me}=Ae;return me.onStateChange=me.notifyNestedSubs,me.trySubscribe(),pe!==K.getState()&&me.notifyNestedSubs(),()=>{me.tryUnsubscribe(),me.onStateChange=void 0}},[Ae,pe]);const xe=J||ReactReduxContext;return reactExports.createElement(xe.Provider,{value:Ae},ne)}function createStoreHook(K=ReactReduxContext){const J=K===ReactReduxContext?useReduxContext:createReduxContextHook(K);return function(){const{store:oe}=J();return oe}}const useStore$1=createStoreHook();function createDispatchHook(K=ReactReduxContext){const J=K===ReactReduxContext?useStore$1:createStoreHook(K);return function(){return J().dispatch}}const useDispatch$1=createDispatchHook();initializeUseSelector(withSelectorExports.useSyncExternalStoreWithSelector);initializeConnect(shimExports.useSyncExternalStore);setBatch(reactDomExports.unstable_batchedUpdates);function n(K){for(var J=arguments.length,ne=Array(J>1?J-1:0),oe=1;oe<J;oe++)ne[oe-1]=arguments[oe];throw Error("[Immer] minified error nr: "+K+(ne.length?" "+ne.map(function(ce){return"'"+ce+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r$1(K){return!!K&&!!K[Q$1]}function t(K){var J;return!!K&&(function(ne){if(!ne||typeof ne!="object")return!1;var oe=Object.getPrototypeOf(ne);if(oe===null)return!0;var ce=Object.hasOwnProperty.call(oe,"constructor")&&oe.constructor;return ce===Object||typeof ce=="function"&&Function.toString.call(ce)===Z$3}(K)||Array.isArray(K)||!!K[L$3]||!!(!((J=K.constructor)===null||J===void 0)&&J[L$3])||s$1(K)||v$2(K))}function i$5(K,J,ne){ne===void 0&&(ne=!1),o(K)===0?(ne?Object.keys:nn)(K).forEach(function(oe){ne&&typeof oe=="symbol"||J(oe,K[oe],K)}):K.forEach(function(oe,ce){return J(ce,oe,K)})}function o(K){var J=K[Q$1];return J?J.i>3?J.i-4:J.i:Array.isArray(K)?1:s$1(K)?2:v$2(K)?3:0}function u$2(K,J){return o(K)===2?K.has(J):Object.prototype.hasOwnProperty.call(K,J)}function a$1(K,J){return o(K)===2?K.get(J):K[J]}function f$4(K,J,ne){var oe=o(K);oe===2?K.set(J,ne):oe===3?K.add(ne):K[J]=ne}function c(K,J){return K===J?K!==0||1/K==1/J:K!=K&&J!=J}function s$1(K){return X$1&&K instanceof Map}function v$2(K){return q$1&&K instanceof Set}function p$1(K){return K.o||K.t}function l$1(K){if(Array.isArray(K))return Array.prototype.slice.call(K);var J=rn(K);delete J[Q$1];for(var ne=nn(J),oe=0;oe<ne.length;oe++){var ce=ne[oe],ue=J[ce];ue.writable===!1&&(ue.writable=!0,ue.configurable=!0),(ue.get||ue.set)&&(J[ce]={configurable:!0,writable:!0,enumerable:ue.enumerable,value:K[ce]})}return Object.create(Object.getPrototypeOf(K),J)}function d$1(K,J){return J===void 0&&(J=!1),y$1(K)||r$1(K)||!t(K)||(o(K)>1&&(K.set=K.add=K.clear=K.delete=h$2),Object.freeze(K),J&&i$5(K,function(ne,oe){return d$1(oe,!0)},!0)),K}function h$2(){n(2)}function y$1(K){return K==null||typeof K!="object"||Object.isFrozen(K)}function b$1(K){var J=tn[K];return J||n(18,K),J}function m$1(K,J){tn[K]||(tn[K]=J)}function _$2(){return U$1}function j(K,J){J&&(b$1("Patches"),K.u=[],K.s=[],K.v=J)}function g$1(K){O$1(K),K.p.forEach(S$2),K.p=null}function O$1(K){K===U$1&&(U$1=K.l)}function w(K){return U$1={p:[],l:U$1,h:K,m:!0,_:0}}function S$2(K){var J=K[Q$1];J.i===0||J.i===1?J.j():J.g=!0}function P$1(K,J){J._=J.p.length;var ne=J.p[0],oe=K!==void 0&&K!==ne;return J.h.O||b$1("ES5").S(J,K,oe),oe?(ne[Q$1].P&&(g$1(J),n(4)),t(K)&&(K=M$2(J,K),J.l||x(J,K)),J.u&&b$1("Patches").M(ne[Q$1].t,K,J.u,J.s)):K=M$2(J,ne,[]),g$1(J),J.u&&J.v(J.u,J.s),K!==H$d?K:void 0}function M$2(K,J,ne){if(y$1(J))return J;var oe=J[Q$1];if(!oe)return i$5(J,function(pe,xe){return A$3(K,oe,J,pe,xe,ne)},!0),J;if(oe.A!==K)return J;if(!oe.P)return x(K,oe.t,!0),oe.t;if(!oe.I){oe.I=!0,oe.A._--;var ce=oe.i===4||oe.i===5?oe.o=l$1(oe.k):oe.o,ue=ce,Ae=!1;oe.i===3&&(ue=new Set(ce),ce.clear(),Ae=!0),i$5(ue,function(pe,xe){return A$3(K,oe,ce,pe,xe,ne,Ae)}),x(K,ce,!1),ne&&K.u&&b$1("Patches").N(oe,ne,K.u,K.s)}return oe.o}function A$3(K,J,ne,oe,ce,ue,Ae){if(r$1(ce)){var pe=M$2(K,ce,ue&&J&&J.i!==3&&!u$2(J.R,oe)?ue.concat(oe):void 0);if(f$4(ne,oe,pe),!r$1(pe))return;K.m=!1}else Ae&&ne.add(ce);if(t(ce)&&!y$1(ce)){if(!K.h.D&&K._<1)return;M$2(K,ce),J&&J.A.l||x(K,ce)}}function x(K,J,ne){ne===void 0&&(ne=!1),!K.l&&K.h.D&&K.m&&d$1(J,ne)}function z$2(K,J){var ne=K[Q$1];return(ne?p$1(ne):K)[J]}function I$2(K,J){if(J in K)for(var ne=Object.getPrototypeOf(K);ne;){var oe=Object.getOwnPropertyDescriptor(ne,J);if(oe)return oe;ne=Object.getPrototypeOf(ne)}}function k$2(K){K.P||(K.P=!0,K.l&&k$2(K.l))}function E$2(K){K.o||(K.o=l$1(K.t))}function N$1(K,J,ne){var oe=s$1(J)?b$1("MapSet").F(J,ne):v$2(J)?b$1("MapSet").T(J,ne):K.O?function(ce,ue){var Ae=Array.isArray(ce),pe={i:Ae?1:0,A:ue?ue.A:_$2(),P:!1,I:!1,R:{},l:ue,t:ce,k:null,o:null,j:null,C:!1},xe=pe,me=en;Ae&&(xe=[pe],me=on);var ge=Proxy.revocable(xe,me),ye=ge.revoke,Se=ge.proxy;return pe.k=Se,pe.j=ye,Se}(J,ne):b$1("ES5").J(J,ne);return(ne?ne.A:_$2()).p.push(oe),oe}function R$1(K){return r$1(K)||n(22,K),function J(ne){if(!t(ne))return ne;var oe,ce=ne[Q$1],ue=o(ne);if(ce){if(!ce.P&&(ce.i<4||!b$1("ES5").K(ce)))return ce.t;ce.I=!0,oe=D$3(ne,ue),ce.I=!1}else oe=D$3(ne,ue);return i$5(oe,function(Ae,pe){ce&&a$1(ce.t,Ae)===pe||f$4(oe,Ae,J(pe))}),ue===3?new Set(oe):oe}(K)}function D$3(K,J){switch(J){case 2:return new Map(K);case 3:return Array.from(K)}return l$1(K)}function F$2(){function K(ue,Ae){var pe=ce[ue];return pe?pe.enumerable=Ae:ce[ue]=pe={configurable:!0,enumerable:Ae,get:function(){var xe=this[Q$1];return en.get(xe,ue)},set:function(xe){var me=this[Q$1];en.set(me,ue,xe)}},pe}function J(ue){for(var Ae=ue.length-1;Ae>=0;Ae--){var pe=ue[Ae][Q$1];if(!pe.P)switch(pe.i){case 5:oe(pe)&&k$2(pe);break;case 4:ne(pe)&&k$2(pe)}}}function ne(ue){for(var Ae=ue.t,pe=ue.k,xe=nn(pe),me=xe.length-1;me>=0;me--){var ge=xe[me];if(ge!==Q$1){var ye=Ae[ge];if(ye===void 0&&!u$2(Ae,ge))return!0;var Se=pe[ge],Te=Se&&Se[Q$1];if(Te?Te.t!==ye:!c(Se,ye))return!0}}var Ne=!!Ae[Q$1];return xe.length!==nn(Ae).length+(Ne?0:1)}function oe(ue){var Ae=ue.k;if(Ae.length!==ue.t.length)return!0;var pe=Object.getOwnPropertyDescriptor(Ae,Ae.length-1);if(pe&&!pe.get)return!0;for(var xe=0;xe<Ae.length;xe++)if(!Ae.hasOwnProperty(xe))return!0;return!1}var ce={};m$1("ES5",{J:function(ue,Ae){var pe=Array.isArray(ue),xe=function(ge,ye){if(ge){for(var Se=Array(ye.length),Te=0;Te<ye.length;Te++)Object.defineProperty(Se,""+Te,K(Te,!0));return Se}var Ne=rn(ye);delete Ne[Q$1];for(var $e=nn(Ne),ke=0;ke<$e.length;ke++){var je=$e[ke];Ne[je]=K(je,ge||!!Ne[je].enumerable)}return Object.create(Object.getPrototypeOf(ye),Ne)}(pe,ue),me={i:pe?5:4,A:Ae?Ae.A:_$2(),P:!1,I:!1,R:{},l:Ae,t:ue,k:xe,o:null,g:!1,C:!1};return Object.defineProperty(xe,Q$1,{value:me,writable:!0}),xe},S:function(ue,Ae,pe){pe?r$1(Ae)&&Ae[Q$1].A===ue&&J(ue.p):(ue.u&&function xe(me){if(me&&typeof me=="object"){var ge=me[Q$1];if(ge){var ye=ge.t,Se=ge.k,Te=ge.R,Ne=ge.i;if(Ne===4)i$5(Se,function(Ye){Ye!==Q$1&&(ye[Ye]!==void 0||u$2(ye,Ye)?Te[Ye]||xe(Se[Ye]):(Te[Ye]=!0,k$2(ge)))}),i$5(ye,function(Ye){Se[Ye]!==void 0||u$2(Se,Ye)||(Te[Ye]=!1,k$2(ge))});else if(Ne===5){if(oe(ge)&&(k$2(ge),Te.length=!0),Se.length<ye.length)for(var $e=Se.length;$e<ye.length;$e++)Te[$e]=!1;else for(var ke=ye.length;ke<Se.length;ke++)Te[ke]=!0;for(var je=Math.min(Se.length,ye.length),Ke=0;Ke<je;Ke++)Se.hasOwnProperty(Ke)||(Te[Ke]=!0),Te[Ke]===void 0&&xe(Se[Ke])}}}}(ue.p[0]),J(ue.p))},K:function(ue){return ue.i===4?ne(ue):oe(ue)}})}var G,U$1,W=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",X$1=typeof Map<"u",q$1=typeof Set<"u",B$1=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H$d=W?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L$3=W?Symbol.for("immer-draftable"):"__$immer_draftable",Q$1=W?Symbol.for("immer-state"):"__$immer_state",Z$3=""+Object.prototype.constructor,nn=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(K){return Object.getOwnPropertyNames(K).concat(Object.getOwnPropertySymbols(K))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(K){var J={};return nn(K).forEach(function(ne){J[ne]=Object.getOwnPropertyDescriptor(K,ne)}),J},tn={},en={get:function(K,J){if(J===Q$1)return K;var ne=p$1(K);if(!u$2(ne,J))return function(ce,ue,Ae){var pe,xe=I$2(ue,Ae);return xe?"value"in xe?xe.value:(pe=xe.get)===null||pe===void 0?void 0:pe.call(ce.k):void 0}(K,ne,J);var oe=ne[J];return K.I||!t(oe)?oe:oe===z$2(K.t,J)?(E$2(K),K.o[J]=N$1(K.A.h,oe,K)):oe},has:function(K,J){return J in p$1(K)},ownKeys:function(K){return Reflect.ownKeys(p$1(K))},set:function(K,J,ne){var oe=I$2(p$1(K),J);if(oe!=null&&oe.set)return oe.set.call(K.k,ne),!0;if(!K.P){var ce=z$2(p$1(K),J),ue=ce==null?void 0:ce[Q$1];if(ue&&ue.t===ne)return K.o[J]=ne,K.R[J]=!1,!0;if(c(ne,ce)&&(ne!==void 0||u$2(K.t,J)))return!0;E$2(K),k$2(K)}return K.o[J]===ne&&(ne!==void 0||J in K.o)||Number.isNaN(ne)&&Number.isNaN(K.o[J])||(K.o[J]=ne,K.R[J]=!0),!0},deleteProperty:function(K,J){return z$2(K.t,J)!==void 0||J in K.t?(K.R[J]=!1,E$2(K),k$2(K)):delete K.R[J],K.o&&delete K.o[J],!0},getOwnPropertyDescriptor:function(K,J){var ne=p$1(K),oe=Reflect.getOwnPropertyDescriptor(ne,J);return oe&&{writable:!0,configurable:K.i!==1||J!=="length",enumerable:oe.enumerable,value:ne[J]}},defineProperty:function(){n(11)},getPrototypeOf:function(K){return Object.getPrototypeOf(K.t)},setPrototypeOf:function(){n(12)}},on={};i$5(en,function(K,J){on[K]=function(){return arguments[0]=arguments[0][0],J.apply(this,arguments)}}),on.deleteProperty=function(K,J){return on.set.call(this,K,J,void 0)},on.set=function(K,J,ne){return en.set.call(this,K[0],J,ne,K[0])};var un=function(){function K(ne){var oe=this;this.O=B$1,this.D=!0,this.produce=function(ce,ue,Ae){if(typeof ce=="function"&&typeof ue!="function"){var pe=ue;ue=ce;var xe=oe;return function($e){var ke=this;$e===void 0&&($e=pe);for(var je=arguments.length,Ke=Array(je>1?je-1:0),Ye=1;Ye<je;Ye++)Ke[Ye-1]=arguments[Ye];return xe.produce($e,function(ze){var Xe;return(Xe=ue).call.apply(Xe,[ke,ze].concat(Ke))})}}var me;if(typeof ue!="function"&&n(6),Ae!==void 0&&typeof Ae!="function"&&n(7),t(ce)){var ge=w(oe),ye=N$1(oe,ce,void 0),Se=!0;try{me=ue(ye),Se=!1}finally{Se?g$1(ge):O$1(ge)}return typeof Promise<"u"&&me instanceof Promise?me.then(function($e){return j(ge,Ae),P$1($e,ge)},function($e){throw g$1(ge),$e}):(j(ge,Ae),P$1(me,ge))}if(!ce||typeof ce!="object"){if((me=ue(ce))===void 0&&(me=ce),me===H$d&&(me=void 0),oe.D&&d$1(me,!0),Ae){var Te=[],Ne=[];b$1("Patches").M(ce,me,Te,Ne),Ae(Te,Ne)}return me}n(21,ce)},this.produceWithPatches=function(ce,ue){if(typeof ce=="function")return function(me){for(var ge=arguments.length,ye=Array(ge>1?ge-1:0),Se=1;Se<ge;Se++)ye[Se-1]=arguments[Se];return oe.produceWithPatches(me,function(Te){return ce.apply(void 0,[Te].concat(ye))})};var Ae,pe,xe=oe.produce(ce,ue,function(me,ge){Ae=me,pe=ge});return typeof Promise<"u"&&xe instanceof Promise?xe.then(function(me){return[me,Ae,pe]}):[xe,Ae,pe]},typeof(ne==null?void 0:ne.useProxies)=="boolean"&&this.setUseProxies(ne.useProxies),typeof(ne==null?void 0:ne.autoFreeze)=="boolean"&&this.setAutoFreeze(ne.autoFreeze)}var J=K.prototype;return J.createDraft=function(ne){t(ne)||n(8),r$1(ne)&&(ne=R$1(ne));var oe=w(this),ce=N$1(this,ne,void 0);return ce[Q$1].C=!0,O$1(oe),ce},J.finishDraft=function(ne,oe){var ce=ne&&ne[Q$1],ue=ce.A;return j(ue,oe),P$1(void 0,ue)},J.setAutoFreeze=function(ne){this.D=ne},J.setUseProxies=function(ne){ne&&!B$1&&n(20),this.O=ne},J.applyPatches=function(ne,oe){var ce;for(ce=oe.length-1;ce>=0;ce--){var ue=oe[ce];if(ue.path.length===0&&ue.op==="replace"){ne=ue.value;break}}ce>-1&&(oe=oe.slice(ce+1));var Ae=b$1("Patches").$;return r$1(ne)?Ae(ne,oe):this.produce(ne,function(pe){return Ae(pe,oe)})},K}(),an=new un,fn=an.produce;an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseProxies.bind(an);an.applyPatches.bind(an);an.createDraft.bind(an);an.finishDraft.bind(an);function _typeof$4(K){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},_typeof$4(K)}function toPrimitive(K,J){if(_typeof$4(K)!="object"||!K)return K;var ne=K[Symbol.toPrimitive];if(ne!==void 0){var oe=ne.call(K,J||"default");if(_typeof$4(oe)!="object")return oe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(J==="string"?String:Number)(K)}function toPropertyKey(K){var J=toPrimitive(K,"string");return _typeof$4(J)=="symbol"?J:J+""}function _defineProperty$5(K,J,ne){return(J=toPropertyKey(J))in K?Object.defineProperty(K,J,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[J]=ne,K}function ownKeys$4(K,J){var ne=Object.keys(K);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(K);J&&(oe=oe.filter(function(ce){return Object.getOwnPropertyDescriptor(K,ce).enumerable})),ne.push.apply(ne,oe)}return ne}function _objectSpread2$2(K){for(var J=1;J<arguments.length;J++){var ne=arguments[J]!=null?arguments[J]:{};J%2?ownKeys$4(Object(ne),!0).forEach(function(oe){_defineProperty$5(K,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ne)):ownKeys$4(Object(ne)).forEach(function(oe){Object.defineProperty(K,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return K}function formatProdErrorMessage(K){return"Minified Redux error #"+K+"; visit https://redux.js.org/Errors?code="+K+" for the full message or use the non-minified dev environment for full errors. "}var $$observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject$2(K){if(typeof K!="object"||K===null)return!1;for(var J=K;Object.getPrototypeOf(J)!==null;)J=Object.getPrototypeOf(J);return Object.getPrototypeOf(K)===J}function createStore$2(K,J,ne){var oe;if(typeof J=="function"&&typeof ne=="function"||typeof ne=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage(0));if(typeof J=="function"&&typeof ne>"u"&&(ne=J,J=void 0),typeof ne<"u"){if(typeof ne!="function")throw new Error(formatProdErrorMessage(1));return ne(createStore$2)(K,J)}if(typeof K!="function")throw new Error(formatProdErrorMessage(2));var ce=K,ue=J,Ae=[],pe=Ae,xe=!1;function me(){pe===Ae&&(pe=Ae.slice())}function ge(){if(xe)throw new Error(formatProdErrorMessage(3));return ue}function ye($e){if(typeof $e!="function")throw new Error(formatProdErrorMessage(4));if(xe)throw new Error(formatProdErrorMessage(5));var ke=!0;return me(),pe.push($e),function(){if(ke){if(xe)throw new Error(formatProdErrorMessage(6));ke=!1,me();var Ke=pe.indexOf($e);pe.splice(Ke,1),Ae=null}}}function Se($e){if(!isPlainObject$2($e))throw new Error(formatProdErrorMessage(7));if(typeof $e.type>"u")throw new Error(formatProdErrorMessage(8));if(xe)throw new Error(formatProdErrorMessage(9));try{xe=!0,ue=ce(ue,$e)}finally{xe=!1}for(var ke=Ae=pe,je=0;je<ke.length;je++){var Ke=ke[je];Ke()}return $e}function Te($e){if(typeof $e!="function")throw new Error(formatProdErrorMessage(10));ce=$e,Se({type:ActionTypes.REPLACE})}function Ne(){var $e,ke=ye;return $e={subscribe:function(Ke){if(typeof Ke!="object"||Ke===null)throw new Error(formatProdErrorMessage(11));function Ye(){Ke.next&&Ke.next(ge())}Ye();var ze=ke(Ye);return{unsubscribe:ze}}},$e[$$observable]=function(){return this},$e}return Se({type:ActionTypes.INIT}),oe={dispatch:Se,subscribe:ye,getState:ge,replaceReducer:Te},oe[$$observable]=Ne,oe}function assertReducerShape(K){Object.keys(K).forEach(function(J){var ne=K[J],oe=ne(void 0,{type:ActionTypes.INIT});if(typeof oe>"u")throw new Error(formatProdErrorMessage(12));if(typeof ne(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage(13))})}function combineReducers(K){for(var J=Object.keys(K),ne={},oe=0;oe<J.length;oe++){var ce=J[oe];typeof K[ce]=="function"&&(ne[ce]=K[ce])}var ue=Object.keys(ne),Ae;try{assertReducerShape(ne)}catch(pe){Ae=pe}return function(xe,me){if(xe===void 0&&(xe={}),Ae)throw Ae;for(var ge=!1,ye={},Se=0;Se<ue.length;Se++){var Te=ue[Se],Ne=ne[Te],$e=xe[Te],ke=Ne($e,me);if(typeof ke>"u")throw me&&me.type,new Error(formatProdErrorMessage(14));ye[Te]=ke,ge=ge||ke!==$e}return ge=ge||ue.length!==Object.keys(xe).length,ge?ye:xe}}function bindActionCreator(K,J){return function(){return J(K.apply(this,arguments))}}function bindActionCreators(K,J){if(typeof K=="function")return bindActionCreator(K,J);if(typeof K!="object"||K===null)throw new Error(formatProdErrorMessage(16));var ne={};for(var oe in K){var ce=K[oe];typeof ce=="function"&&(ne[oe]=bindActionCreator(ce,J))}return ne}function compose$2(){for(var K=arguments.length,J=new Array(K),ne=0;ne<K;ne++)J[ne]=arguments[ne];return J.length===0?function(oe){return oe}:J.length===1?J[0]:J.reduce(function(oe,ce){return function(){return oe(ce.apply(void 0,arguments))}})}function applyMiddleware(){for(var K=arguments.length,J=new Array(K),ne=0;ne<K;ne++)J[ne]=arguments[ne];return function(oe){return function(){var ce=oe.apply(void 0,arguments),ue=function(){throw new Error(formatProdErrorMessage(15))},Ae={getState:ce.getState,dispatch:function(){return ue.apply(void 0,arguments)}},pe=J.map(function(xe){return xe(Ae)});return ue=compose$2.apply(void 0,pe)(ce.dispatch),_objectSpread2$2(_objectSpread2$2({},ce),{},{dispatch:ue})}}}var NOT_FOUND="NOT_FOUND";function createSingletonCache(K){var J;return{get:function(oe){return J&&K(J.key,oe)?J.value:NOT_FOUND},put:function(oe,ce){J={key:oe,value:ce}},getEntries:function(){return J?[J]:[]},clear:function(){J=void 0}}}function createLruCache(K,J){var ne=[];function oe(pe){var xe=ne.findIndex(function(ge){return J(pe,ge.key)});if(xe>-1){var me=ne[xe];return xe>0&&(ne.splice(xe,1),ne.unshift(me)),me.value}return NOT_FOUND}function ce(pe,xe){oe(pe)===NOT_FOUND&&(ne.unshift({key:pe,value:xe}),ne.length>K&&ne.pop())}function ue(){return ne}function Ae(){ne=[]}return{get:oe,put:ce,getEntries:ue,clear:Ae}}var defaultEqualityCheck=function(J,ne){return J===ne};function createCacheKeyComparator(K){return function(ne,oe){if(ne===null||oe===null||ne.length!==oe.length)return!1;for(var ce=ne.length,ue=0;ue<ce;ue++)if(!K(ne[ue],oe[ue]))return!1;return!0}}function defaultMemoize(K,J){var ne=typeof J=="object"?J:{equalityCheck:J},oe=ne.equalityCheck,ce=oe===void 0?defaultEqualityCheck:oe,ue=ne.maxSize,Ae=ue===void 0?1:ue,pe=ne.resultEqualityCheck,xe=createCacheKeyComparator(ce),me=Ae===1?createSingletonCache(xe):createLruCache(Ae,xe);function ge(){var ye=me.get(arguments);if(ye===NOT_FOUND){if(ye=K.apply(null,arguments),pe){var Se=me.getEntries(),Te=Se.find(function(Ne){return pe(Ne.value,ye)});Te&&(ye=Te.value)}me.put(arguments,ye)}return ye}return ge.clearCache=function(){return me.clear()},ge}function getDependencies(K){var J=Array.isArray(K[0])?K[0]:K;if(!J.every(function(oe){return typeof oe=="function"})){var ne=J.map(function(oe){return typeof oe=="function"?"function "+(oe.name||"unnamed")+"()":typeof oe}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+ne+"]")}return J}function createSelectorCreator(K){for(var J=arguments.length,ne=new Array(J>1?J-1:0),oe=1;oe<J;oe++)ne[oe-1]=arguments[oe];var ce=function(){for(var Ae=arguments.length,pe=new Array(Ae),xe=0;xe<Ae;xe++)pe[xe]=arguments[xe];var me=0,ge,ye={memoizeOptions:void 0},Se=pe.pop();if(typeof Se=="object"&&(ye=Se,Se=pe.pop()),typeof Se!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof Se+"]");var Te=ye,Ne=Te.memoizeOptions,$e=Ne===void 0?ne:Ne,ke=Array.isArray($e)?$e:[$e],je=getDependencies(pe),Ke=K.apply(void 0,[function(){return me++,Se.apply(null,arguments)}].concat(ke)),Ye=K(function(){for(var Xe=[],Je=je.length,rt=0;rt<Je;rt++)Xe.push(je[rt].apply(null,arguments));return ge=Ke.apply(null,Xe),ge});return Object.assign(Ye,{resultFunc:Se,memoizedResultFunc:Ke,dependencies:je,lastResult:function(){return ge},recomputations:function(){return me},resetRecomputations:function(){return me=0}}),Ye};return ce}var createSelector=createSelectorCreator(defaultMemoize);function createThunkMiddleware(K){var J=function(oe){var ce=oe.dispatch,ue=oe.getState;return function(Ae){return function(pe){return typeof pe=="function"?pe(ce,ue,K):Ae(pe)}}};return J}var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware;var __extends$e=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Class extends value "+String(ne)+" is not a constructor or null");K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),__generator$3=function(K,J){var ne={label:0,sent:function(){if(ue[0]&1)throw ue[1];return ue[1]},trys:[],ops:[]},oe,ce,ue,Ae;return Ae={next:pe(0),throw:pe(1),return:pe(2)},typeof Symbol=="function"&&(Ae[Symbol.iterator]=function(){return this}),Ae;function pe(me){return function(ge){return xe([me,ge])}}function xe(me){if(oe)throw new TypeError("Generator is already executing.");for(;ne;)try{if(oe=1,ce&&(ue=me[0]&2?ce.return:me[0]?ce.throw||((ue=ce.return)&&ue.call(ce),0):ce.next)&&!(ue=ue.call(ce,me[1])).done)return ue;switch(ce=0,ue&&(me=[me[0]&2,ue.value]),me[0]){case 0:case 1:ue=me;break;case 4:return ne.label++,{value:me[1],done:!1};case 5:ne.label++,ce=me[1],me=[0];continue;case 7:me=ne.ops.pop(),ne.trys.pop();continue;default:if(ue=ne.trys,!(ue=ue.length>0&&ue[ue.length-1])&&(me[0]===6||me[0]===2)){ne=0;continue}if(me[0]===3&&(!ue||me[1]>ue[0]&&me[1]<ue[3])){ne.label=me[1];break}if(me[0]===6&&ne.label<ue[1]){ne.label=ue[1],ue=me;break}if(ue&&ne.label<ue[2]){ne.label=ue[2],ne.ops.push(me);break}ue[2]&&ne.ops.pop(),ne.trys.pop();continue}me=J.call(K,ne)}catch(ge){me=[6,ge],ce=0}finally{oe=ue=0}if(me[0]&5)throw me[1];return{value:me[0]?me[1]:void 0,done:!0}}},__spreadArray$3=function(K,J){for(var ne=0,oe=J.length,ce=K.length;ne<oe;ne++,ce++)K[ce]=J[ne];return K},__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=function(K,J,ne){return J in K?__defProp(K,J,{enumerable:!0,configurable:!0,writable:!0,value:ne}):K[J]=ne},__spreadValues=function(K,J){for(var ne in J||(J={}))__hasOwnProp.call(J,ne)&&__defNormalProp(K,ne,J[ne]);if(__getOwnPropSymbols)for(var oe=0,ce=__getOwnPropSymbols(J);oe<ce.length;oe++){var ne=ce[oe];__propIsEnum.call(J,ne)&&__defNormalProp(K,ne,J[ne])}return K},__spreadProps=function(K,J){return __defProps(K,__getOwnPropDescs(J))},__async=function(K,J,ne){return new Promise(function(oe,ce){var ue=function(xe){try{pe(ne.next(xe))}catch(me){ce(me)}},Ae=function(xe){try{pe(ne.throw(xe))}catch(me){ce(me)}},pe=function(xe){return xe.done?oe(xe.value):Promise.resolve(xe.value).then(ue,Ae)};pe((ne=ne.apply(K,J)).next())})},composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose$2:compose$2.apply(null,arguments)};function isPlainObject$1(K){if(typeof K!="object"||K===null)return!1;var J=Object.getPrototypeOf(K);if(J===null)return!0;for(var ne=J;Object.getPrototypeOf(ne)!==null;)ne=Object.getPrototypeOf(ne);return J===ne}var MiddlewareArray=function(K){__extends$e(J,K);function J(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne[oe]=arguments[oe];var ce=K.apply(this,ne)||this;return Object.setPrototypeOf(ce,J.prototype),ce}return Object.defineProperty(J,Symbol.species,{get:function(){return J},enumerable:!1,configurable:!0}),J.prototype.concat=function(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne[oe]=arguments[oe];return K.prototype.concat.apply(this,ne)},J.prototype.prepend=function(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne[oe]=arguments[oe];return ne.length===1&&Array.isArray(ne[0])?new(J.bind.apply(J,__spreadArray$3([void 0],ne[0].concat(this)))):new(J.bind.apply(J,__spreadArray$3([void 0],ne.concat(this))))},J}(Array),EnhancerArray=function(K){__extends$e(J,K);function J(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne[oe]=arguments[oe];var ce=K.apply(this,ne)||this;return Object.setPrototypeOf(ce,J.prototype),ce}return Object.defineProperty(J,Symbol.species,{get:function(){return J},enumerable:!1,configurable:!0}),J.prototype.concat=function(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne[oe]=arguments[oe];return K.prototype.concat.apply(this,ne)},J.prototype.prepend=function(){for(var ne=[],oe=0;oe<arguments.length;oe++)ne[oe]=arguments[oe];return ne.length===1&&Array.isArray(ne[0])?new(J.bind.apply(J,__spreadArray$3([void 0],ne[0].concat(this)))):new(J.bind.apply(J,__spreadArray$3([void 0],ne.concat(this))))},J}(Array);function freezeDraftable(K){return t(K)?fn(K,function(){}):K}function isPlain(K){var J=typeof K;return K==null||J==="string"||J==="boolean"||J==="number"||Array.isArray(K)||isPlainObject$1(K)}function isBoolean$1(K){return typeof K=="boolean"}function curryGetDefaultMiddleware(){return function(J){return getDefaultMiddleware(J)}}function getDefaultMiddleware(K){K===void 0&&(K={});var J=K.thunk,ne=J===void 0?!0:J;K.immutableCheck,K.serializableCheck;var oe=new MiddlewareArray;return ne&&(isBoolean$1(ne)?oe.push(thunk):oe.push(thunk.withExtraArgument(ne.extraArgument))),oe}var IS_PRODUCTION=!0;function configureStore(K){var J=curryGetDefaultMiddleware(),ne=K||{},oe=ne.reducer,ce=oe===void 0?void 0:oe,ue=ne.middleware,Ae=ue===void 0?J():ue,pe=ne.devTools,xe=pe===void 0?!0:pe,me=ne.preloadedState,ge=me===void 0?void 0:me,ye=ne.enhancers,Se=ye===void 0?void 0:ye,Te;if(typeof ce=="function")Te=ce;else if(isPlainObject$1(ce))Te=combineReducers(ce);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var Ne=Ae;typeof Ne=="function"&&(Ne=Ne(J));var $e=applyMiddleware.apply(void 0,Ne),ke=compose$2;xe&&(ke=composeWithDevTools(__spreadValues({trace:!IS_PRODUCTION},typeof xe=="object"&&xe)));var je=new EnhancerArray($e),Ke=je;Array.isArray(Se)?Ke=__spreadArray$3([$e],Se):typeof Se=="function"&&(Ke=Se(je));var Ye=ke.apply(void 0,Ke);return createStore$2(Te,ge,Ye)}function createAction(K,J){function ne(){for(var oe=[],ce=0;ce<arguments.length;ce++)oe[ce]=arguments[ce];if(J){var ue=J.apply(void 0,oe);if(!ue)throw new Error("prepareAction did not return an object");return __spreadValues(__spreadValues({type:K,payload:ue.payload},"meta"in ue&&{meta:ue.meta}),"error"in ue&&{error:ue.error})}return{type:K,payload:oe[0]}}return ne.toString=function(){return""+K},ne.type=K,ne.match=function(oe){return oe.type===K},ne}function isAction(K){return isPlainObject$1(K)&&"type"in K}function executeReducerBuilderCallback(K){var J={},ne=[],oe,ce={addCase:function(ue,Ae){var pe=typeof ue=="string"?ue:ue.type;if(pe in J)throw new Error("addCase cannot be called with two reducers for the same action type");return J[pe]=Ae,ce},addMatcher:function(ue,Ae){return ne.push({matcher:ue,reducer:Ae}),ce},addDefaultCase:function(ue){return oe=ue,ce}};return K(ce),[J,ne,oe]}function isStateFunction(K){return typeof K=="function"}function createReducer(K,J,ne,oe){ne===void 0&&(ne=[]);var ce=typeof J=="function"?executeReducerBuilderCallback(J):[J,ne,oe],ue=ce[0],Ae=ce[1],pe=ce[2],xe;if(isStateFunction(K))xe=function(){return freezeDraftable(K())};else{var me=freezeDraftable(K);xe=function(){return me}}function ge(ye,Se){ye===void 0&&(ye=xe());var Te=__spreadArray$3([ue[Se.type]],Ae.filter(function(Ne){var $e=Ne.matcher;return $e(Se)}).map(function(Ne){var $e=Ne.reducer;return $e}));return Te.filter(function(Ne){return!!Ne}).length===0&&(Te=[pe]),Te.reduce(function(Ne,$e){if($e)if(r$1(Ne)){var ke=Ne,je=$e(ke,Se);return je===void 0?Ne:je}else{if(t(Ne))return fn(Ne,function(Ke){return $e(Ke,Se)});var je=$e(Ne,Se);if(je===void 0){if(Ne===null)return Ne;throw Error("A case reducer on a non-draftable value must not return undefined")}return je}return Ne},ye)}return ge.getInitialState=xe,ge}function getType2(K,J){return K+"/"+J}function createSlice(K){var J=K.name;if(!J)throw new Error("`name` is a required option for createSlice");typeof process$1<"u";var ne=typeof K.initialState=="function"?K.initialState:freezeDraftable(K.initialState),oe=K.reducers||{},ce=Object.keys(oe),ue={},Ae={},pe={};ce.forEach(function(ge){var ye=oe[ge],Se=getType2(J,ge),Te,Ne;"reducer"in ye?(Te=ye.reducer,Ne=ye.prepare):Te=ye,ue[ge]=Te,Ae[Se]=Te,pe[ge]=Ne?createAction(Se,Ne):createAction(Se)});function xe(){var ge=typeof K.extraReducers=="function"?executeReducerBuilderCallback(K.extraReducers):[K.extraReducers],ye=ge[0],Se=ye===void 0?{}:ye,Te=ge[1],Ne=Te===void 0?[]:Te,$e=ge[2],ke=$e===void 0?void 0:$e,je=__spreadValues(__spreadValues({},Se),Ae);return createReducer(ne,function(Ke){for(var Ye in je)Ke.addCase(Ye,je[Ye]);for(var ze=0,Xe=Ne;ze<Xe.length;ze++){var Je=Xe[ze];Ke.addMatcher(Je.matcher,Je.reducer)}ke&&Ke.addDefaultCase(ke)})}var me;return{name:J,reducer:function(ge,ye){return me||(me=xe()),me(ge,ye)},actions:pe,caseReducers:ue,getInitialState:function(){return me||(me=xe()),me.getInitialState()}}}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=function(K){K===void 0&&(K=21);for(var J="",ne=K;ne--;)J+=urlAlphabet[Math.random()*64|0];return J},commonProperties=["name","message","stack","code"],RejectWithValue=function(){function K(J,ne){this.payload=J,this.meta=ne}return K}(),FulfillWithMeta=function(){function K(J,ne){this.payload=J,this.meta=ne}return K}(),miniSerializeError=function(K){if(typeof K=="object"&&K!==null){for(var J={},ne=0,oe=commonProperties;ne<oe.length;ne++){var ce=oe[ne];typeof K[ce]=="string"&&(J[ce]=K[ce])}return J}return{message:String(K)}},createAsyncThunk=function(){function K(J,ne,oe){var ce=createAction(J+"/fulfilled",function(me,ge,ye,Se){return{payload:me,meta:__spreadProps(__spreadValues({},Se||{}),{arg:ye,requestId:ge,requestStatus:"fulfilled"})}}),ue=createAction(J+"/pending",function(me,ge,ye){return{payload:void 0,meta:__spreadProps(__spreadValues({},ye||{}),{arg:ge,requestId:me,requestStatus:"pending"})}}),Ae=createAction(J+"/rejected",function(me,ge,ye,Se,Te){return{payload:Se,error:(oe&&oe.serializeError||miniSerializeError)(me||"Rejected"),meta:__spreadProps(__spreadValues({},Te||{}),{arg:ye,requestId:ge,rejectedWithValue:!!Se,requestStatus:"rejected",aborted:(me==null?void 0:me.name)==="AbortError",condition:(me==null?void 0:me.name)==="ConditionError"})}}),pe=typeof AbortController<"u"?AbortController:function(){function me(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return me.prototype.abort=function(){},me}();function xe(me){return function(ge,ye,Se){var Te=oe!=null&&oe.idGenerator?oe.idGenerator(me):nanoid(),Ne=new pe,$e;function ke(Ke){$e=Ke,Ne.abort()}var je=function(){return __async(this,null,function(){var Ke,Ye,ze,Xe,Je,rt,Ze;return __generator$3(this,function(et){switch(et.label){case 0:return et.trys.push([0,4,,5]),Xe=(Ke=oe==null?void 0:oe.condition)==null?void 0:Ke.call(oe,me,{getState:ye,extra:Se}),isThenable$1(Xe)?[4,Xe]:[3,2];case 1:Xe=et.sent(),et.label=2;case 2:if(Xe===!1||Ne.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return Je=new Promise(function(nt,Ge){return Ne.signal.addEventListener("abort",function(){return Ge({name:"AbortError",message:$e||"Aborted"})})}),ge(ue(Te,me,(Ye=oe==null?void 0:oe.getPendingMeta)==null?void 0:Ye.call(oe,{requestId:Te,arg:me},{getState:ye,extra:Se}))),[4,Promise.race([Je,Promise.resolve(ne(me,{dispatch:ge,getState:ye,extra:Se,requestId:Te,signal:Ne.signal,abort:ke,rejectWithValue:function(nt,Ge){return new RejectWithValue(nt,Ge)},fulfillWithValue:function(nt,Ge){return new FulfillWithMeta(nt,Ge)}})).then(function(nt){if(nt instanceof RejectWithValue)throw nt;return nt instanceof FulfillWithMeta?ce(nt.payload,Te,me,nt.meta):ce(nt,Te,me)})])];case 3:return ze=et.sent(),[3,5];case 4:return rt=et.sent(),ze=rt instanceof RejectWithValue?Ae(null,Te,me,rt.payload,rt.meta):Ae(rt,Te,me),[3,5];case 5:return Ze=oe&&!oe.dispatchConditionRejection&&Ae.match(ze)&&ze.meta.condition,Ze||ge(ze),[2,ze]}})})}();return Object.assign(je,{abort:ke,requestId:Te,arg:me,unwrap:function(){return je.then(unwrapResult)}})}}return Object.assign(xe,{pending:ue,rejected:Ae,fulfilled:ce,typePrefix:J})}return K.withTypes=function(){return K},K}();function unwrapResult(K){if(K.meta&&K.meta.rejectedWithValue)throw K.payload;if(K.error)throw K.error;return K.payload}function isThenable$1(K){return K!==null&&typeof K=="object"&&typeof K.then=="function"}var hasMatchFunction=function(K){return K&&typeof K.match=="function"},matches=function(K,J){return hasMatchFunction(K)?K.match(J):K(J)};function isAnyOf(){for(var K=[],J=0;J<arguments.length;J++)K[J]=arguments[J];return function(ne){return K.some(function(oe){return matches(oe,ne)})}}var assertFunction=function(K,J){if(typeof K!="function")throw new TypeError(J+" is not a function")},noop$5=function(){},catchRejection=function(K,J){return J===void 0&&(J=noop$5),K.catch(J),K},addAbortSignalListener=function(K,J){return K.addEventListener("abort",J,{once:!0}),function(){return K.removeEventListener("abort",J)}},abortControllerWithReason=function(K,J){var ne=K.signal;ne.aborted||("reason"in ne||Object.defineProperty(ne,"reason",{enumerable:!0,value:J,configurable:!0,writable:!0}),K.abort(J))},task="task",listener="listener",completed="completed",cancelled="cancelled",taskCancelled="task-"+cancelled,taskCompleted="task-"+completed,listenerCancelled=listener+"-"+cancelled,listenerCompleted=listener+"-"+completed,TaskAbortError=function(){function K(J){this.code=J,this.name="TaskAbortError",this.message=task+" "+cancelled+" (reason: "+J+")"}return K}(),validateActive=function(K){if(K.aborted)throw new TaskAbortError(K.reason)};function raceWithSignal(K,J){var ne=noop$5;return new Promise(function(oe,ce){var ue=function(){return ce(new TaskAbortError(K.reason))};if(K.aborted){ue();return}ne=addAbortSignalListener(K,ue),J.finally(function(){return ne()}).then(oe,ce)}).finally(function(){ne=noop$5})}var runTask=function(K,J){return __async(void 0,null,function(){var ne,oe;return __generator$3(this,function(ce){switch(ce.label){case 0:return ce.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return ce.sent(),[4,K()];case 2:return ne=ce.sent(),[2,{status:"ok",value:ne}];case 3:return oe=ce.sent(),[2,{status:oe instanceof TaskAbortError?"cancelled":"rejected",error:oe}];case 4:return J==null||J(),[7];case 5:return[2]}})})},createPause=function(K){return function(J){return catchRejection(raceWithSignal(K,J).then(function(ne){return validateActive(K),ne}))}},createDelay=function(K){var J=createPause(K);return function(ne){return J(new Promise(function(oe){return setTimeout(oe,ne)}))}},assign$1=Object.assign,INTERNAL_NIL_TOKEN={},alm="listenerMiddleware",createFork=function(K){var J=function(ne){return addAbortSignalListener(K,function(){return abortControllerWithReason(ne,K.reason)})};return function(ne){assertFunction(ne,"taskExecutor");var oe=new AbortController;J(oe);var ce=runTask(function(){return __async(void 0,null,function(){var ue;return __generator$3(this,function(Ae){switch(Ae.label){case 0:return validateActive(K),validateActive(oe.signal),[4,ne({pause:createPause(oe.signal),delay:createDelay(oe.signal),signal:oe.signal})];case 1:return ue=Ae.sent(),validateActive(oe.signal),[2,ue]}})})},function(){return abortControllerWithReason(oe,taskCompleted)});return{result:createPause(K)(ce),cancel:function(){abortControllerWithReason(oe,taskCancelled)}}}},createTakePattern=function(K,J){var ne=function(oe,ce){return __async(void 0,null,function(){var ue,Ae,pe,xe;return __generator$3(this,function(me){switch(me.label){case 0:validateActive(J),ue=function(){},Ae=new Promise(function(ge,ye){var Se=K({predicate:oe,effect:function(Te,Ne){Ne.unsubscribe(),ge([Te,Ne.getState(),Ne.getOriginalState()])}});ue=function(){Se(),ye()}}),pe=[Ae],ce!=null&&pe.push(new Promise(function(ge){return setTimeout(ge,ce,null)})),me.label=1;case 1:return me.trys.push([1,,3,4]),[4,raceWithSignal(J,Promise.race(pe))];case 2:return xe=me.sent(),validateActive(J),[2,xe];case 3:return ue(),[7];case 4:return[2]}})})};return function(oe,ce){return catchRejection(ne(oe,ce))}},getListenerEntryPropsFrom=function(K){var J=K.type,ne=K.actionCreator,oe=K.matcher,ce=K.predicate,ue=K.effect;if(J)ce=createAction(J).match;else if(ne)J=ne.type,ce=ne.match;else if(oe)ce=oe;else if(!ce)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return assertFunction(ue,"options.listener"),{predicate:ce,type:J,effect:ue}},createListenerEntry=function(K){var J=getListenerEntryPropsFrom(K),ne=J.type,oe=J.predicate,ce=J.effect,ue=nanoid(),Ae={id:ue,effect:ce,type:ne,predicate:oe,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return Ae},cancelActiveListeners=function(K){K.pending.forEach(function(J){abortControllerWithReason(J,listenerCancelled)})},createClearListenerMiddleware=function(K){return function(){K.forEach(cancelActiveListeners),K.clear()}},safelyNotifyError=function(K,J,ne){try{K(J,ne)}catch(oe){setTimeout(function(){throw oe},0)}},addListener=createAction(alm+"/add"),clearAllListeners=createAction(alm+"/removeAll"),removeListener=createAction(alm+"/remove"),defaultErrorHandler=function(){for(var K=[],J=0;J<arguments.length;J++)K[J]=arguments[J];console.error.apply(console,__spreadArray$3([alm+"/error"],K))};function createListenerMiddleware(K){var J=this;K===void 0&&(K={});var ne=new Map,oe=K.extra,ce=K.onError,ue=ce===void 0?defaultErrorHandler:ce;assertFunction(ue,"onError");var Ae=function(Te){return Te.unsubscribe=function(){return ne.delete(Te.id)},ne.set(Te.id,Te),function(Ne){Te.unsubscribe(),Ne!=null&&Ne.cancelActive&&cancelActiveListeners(Te)}},pe=function(Te){for(var Ne=0,$e=Array.from(ne.values());Ne<$e.length;Ne++){var ke=$e[Ne];if(Te(ke))return ke}},xe=function(Te){var Ne=pe(function($e){return $e.effect===Te.effect});return Ne||(Ne=createListenerEntry(Te)),Ae(Ne)},me=function(Te){var Ne=getListenerEntryPropsFrom(Te),$e=Ne.type,ke=Ne.effect,je=Ne.predicate,Ke=pe(function(Ye){var ze=typeof $e=="string"?Ye.type===$e:Ye.predicate===je;return ze&&Ye.effect===ke});return Ke&&(Ke.unsubscribe(),Te.cancelActive&&cancelActiveListeners(Ke)),!!Ke},ge=function(Te,Ne,$e,ke){return __async(J,null,function(){var je,Ke,Ye;return __generator$3(this,function(ze){switch(ze.label){case 0:je=new AbortController,Ke=createTakePattern(xe,je.signal),ze.label=1;case 1:return ze.trys.push([1,3,4,5]),Te.pending.add(je),[4,Promise.resolve(Te.effect(Ne,assign$1({},$e,{getOriginalState:ke,condition:function(Xe,Je){return Ke(Xe,Je).then(Boolean)},take:Ke,delay:createDelay(je.signal),pause:createPause(je.signal),extra:oe,signal:je.signal,fork:createFork(je.signal),unsubscribe:Te.unsubscribe,subscribe:function(){ne.set(Te.id,Te)},cancelActiveListeners:function(){Te.pending.forEach(function(Xe,Je,rt){Xe!==je&&(abortControllerWithReason(Xe,listenerCancelled),rt.delete(Xe))})}})))];case 2:return ze.sent(),[3,5];case 3:return Ye=ze.sent(),Ye instanceof TaskAbortError||safelyNotifyError(ue,Ye,{raisedBy:"effect"}),[3,5];case 4:return abortControllerWithReason(je,listenerCompleted),Te.pending.delete(je),[7];case 5:return[2]}})})},ye=createClearListenerMiddleware(ne),Se=function(Te){return function(Ne){return function($e){if(!isAction($e))return Ne($e);if(addListener.match($e))return xe($e.payload);if(clearAllListeners.match($e)){ye();return}if(removeListener.match($e))return me($e.payload);var ke=Te.getState(),je=function(){if(ke===INTERNAL_NIL_TOKEN)throw new Error(alm+": getOriginalState can only be called synchronously");return ke},Ke;try{if(Ke=Ne($e),ne.size>0)for(var Ye=Te.getState(),ze=Array.from(ne.values()),Xe=0,Je=ze;Xe<Je.length;Xe++){var rt=Je[Xe],Ze=!1;try{Ze=rt.predicate($e,Ye,ke)}catch(et){Ze=!1,safelyNotifyError(ue,et,{raisedBy:"predicate"})}Ze&&ge(rt,$e,Te,je)}}finally{ke=INTERNAL_NIL_TOKEN}return Ke}}};return{middleware:Se,startListening:xe,stopListening:me,clearListeners:ye}}var promise;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);F$2();var isNumeric$1=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,bignumberError="[BigNumber Error] ",tooManyDigits=bignumberError+"Number primitive has more than 15 significant digits: ",BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER$2=9007199254740991,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX=1e9;function clone(K){var J,ne,oe,ce=Ke.prototype={constructor:Ke,toString:null,valueOf:null},ue=new Ke(1),Ae=20,pe=4,xe=-7,me=21,ge=-1e7,ye=1e7,Se=!1,Te=1,Ne=0,$e={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},ke="0123456789abcdefghijklmnopqrstuvwxyz",je=!0;function Ke(Ze,et){var nt,Ge,ve,Be,Re,Ie,Fe,qe,We=this;if(!(We instanceof Ke))return new Ke(Ze,et);if(et==null){if(Ze&&Ze._isBigNumber===!0){We.s=Ze.s,!Ze.c||Ze.e>ye?We.c=We.e=null:Ze.e<ge?We.c=[We.e=0]:(We.e=Ze.e,We.c=Ze.c.slice());return}if((Ie=typeof Ze=="number")&&Ze*0==0){if(We.s=1/Ze<0?(Ze=-Ze,-1):1,Ze===~~Ze){for(Be=0,Re=Ze;Re>=10;Re/=10,Be++);Be>ye?We.c=We.e=null:(We.e=Be,We.c=[Ze]);return}qe=String(Ze)}else{if(!isNumeric$1.test(qe=String(Ze)))return oe(We,qe,Ie);We.s=qe.charCodeAt(0)==45?(qe=qe.slice(1),-1):1}(Be=qe.indexOf("."))>-1&&(qe=qe.replace(".","")),(Re=qe.search(/e/i))>0?(Be<0&&(Be=Re),Be+=+qe.slice(Re+1),qe=qe.substring(0,Re)):Be<0&&(Be=qe.length)}else{if(intCheck(et,2,ke.length,"Base"),et==10&&je)return We=new Ke(Ze),Je(We,Ae+We.e+1,pe);if(qe=String(Ze),Ie=typeof Ze=="number"){if(Ze*0!=0)return oe(We,qe,Ie,et);if(We.s=1/Ze<0?(qe=qe.slice(1),-1):1,Ke.DEBUG&&qe.replace(/^0\.0*|\./,"").length>15)throw Error(tooManyDigits+Ze)}else We.s=qe.charCodeAt(0)===45?(qe=qe.slice(1),-1):1;for(nt=ke.slice(0,et),Be=Re=0,Fe=qe.length;Re<Fe;Re++)if(nt.indexOf(Ge=qe.charAt(Re))<0){if(Ge=="."){if(Re>Be){Be=Fe;continue}}else if(!ve&&(qe==qe.toUpperCase()&&(qe=qe.toLowerCase())||qe==qe.toLowerCase()&&(qe=qe.toUpperCase()))){ve=!0,Re=-1,Be=0;continue}return oe(We,String(Ze),Ie,et)}Ie=!1,qe=ne(qe,et,10,We.s),(Be=qe.indexOf("."))>-1?qe=qe.replace(".",""):Be=qe.length}for(Re=0;qe.charCodeAt(Re)===48;Re++);for(Fe=qe.length;qe.charCodeAt(--Fe)===48;);if(qe=qe.slice(Re,++Fe)){if(Fe-=Re,Ie&&Ke.DEBUG&&Fe>15&&(Ze>MAX_SAFE_INTEGER$2||Ze!==mathfloor(Ze)))throw Error(tooManyDigits+We.s*Ze);if((Be=Be-Re-1)>ye)We.c=We.e=null;else if(Be<ge)We.c=[We.e=0];else{if(We.e=Be,We.c=[],Re=(Be+1)%LOG_BASE,Be<0&&(Re+=LOG_BASE),Re<Fe){for(Re&&We.c.push(+qe.slice(0,Re)),Fe-=LOG_BASE;Re<Fe;)We.c.push(+qe.slice(Re,Re+=LOG_BASE));Re=LOG_BASE-(qe=qe.slice(Re)).length}else Re-=Fe;for(;Re--;qe+="0");We.c.push(+qe)}}else We.c=[We.e=0]}Ke.clone=clone,Ke.ROUND_UP=0,Ke.ROUND_DOWN=1,Ke.ROUND_CEIL=2,Ke.ROUND_FLOOR=3,Ke.ROUND_HALF_UP=4,Ke.ROUND_HALF_DOWN=5,Ke.ROUND_HALF_EVEN=6,Ke.ROUND_HALF_CEIL=7,Ke.ROUND_HALF_FLOOR=8,Ke.EUCLID=9,Ke.config=Ke.set=function(Ze){var et,nt;if(Ze!=null)if(typeof Ze=="object"){if(Ze.hasOwnProperty(et="DECIMAL_PLACES")&&(nt=Ze[et],intCheck(nt,0,MAX,et),Ae=nt),Ze.hasOwnProperty(et="ROUNDING_MODE")&&(nt=Ze[et],intCheck(nt,0,8,et),pe=nt),Ze.hasOwnProperty(et="EXPONENTIAL_AT")&&(nt=Ze[et],nt&&nt.pop?(intCheck(nt[0],-MAX,0,et),intCheck(nt[1],0,MAX,et),xe=nt[0],me=nt[1]):(intCheck(nt,-MAX,MAX,et),xe=-(me=nt<0?-nt:nt))),Ze.hasOwnProperty(et="RANGE"))if(nt=Ze[et],nt&&nt.pop)intCheck(nt[0],-MAX,-1,et),intCheck(nt[1],1,MAX,et),ge=nt[0],ye=nt[1];else if(intCheck(nt,-MAX,MAX,et),nt)ge=-(ye=nt<0?-nt:nt);else throw Error(bignumberError+et+" cannot be zero: "+nt);if(Ze.hasOwnProperty(et="CRYPTO"))if(nt=Ze[et],nt===!!nt)if(nt)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Se=nt;else throw Se=!nt,Error(bignumberError+"crypto unavailable");else Se=nt;else throw Error(bignumberError+et+" not true or false: "+nt);if(Ze.hasOwnProperty(et="MODULO_MODE")&&(nt=Ze[et],intCheck(nt,0,9,et),Te=nt),Ze.hasOwnProperty(et="POW_PRECISION")&&(nt=Ze[et],intCheck(nt,0,MAX,et),Ne=nt),Ze.hasOwnProperty(et="FORMAT"))if(nt=Ze[et],typeof nt=="object")$e=nt;else throw Error(bignumberError+et+" not an object: "+nt);if(Ze.hasOwnProperty(et="ALPHABET"))if(nt=Ze[et],typeof nt=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(nt))je=nt.slice(0,10)=="0123456789",ke=nt;else throw Error(bignumberError+et+" invalid: "+nt)}else throw Error(bignumberError+"Object expected: "+Ze);return{DECIMAL_PLACES:Ae,ROUNDING_MODE:pe,EXPONENTIAL_AT:[xe,me],RANGE:[ge,ye],CRYPTO:Se,MODULO_MODE:Te,POW_PRECISION:Ne,FORMAT:$e,ALPHABET:ke}},Ke.isBigNumber=function(Ze){if(!Ze||Ze._isBigNumber!==!0)return!1;if(!Ke.DEBUG)return!0;var et,nt,Ge=Ze.c,ve=Ze.e,Be=Ze.s;e:if({}.toString.call(Ge)=="[object Array]"){if((Be===1||Be===-1)&&ve>=-MAX&&ve<=MAX&&ve===mathfloor(ve)){if(Ge[0]===0){if(ve===0&&Ge.length===1)return!0;break e}if(et=(ve+1)%LOG_BASE,et<1&&(et+=LOG_BASE),String(Ge[0]).length==et){for(et=0;et<Ge.length;et++)if(nt=Ge[et],nt<0||nt>=BASE||nt!==mathfloor(nt))break e;if(nt!==0)return!0}}}else if(Ge===null&&ve===null&&(Be===null||Be===1||Be===-1))return!0;throw Error(bignumberError+"Invalid BigNumber: "+Ze)},Ke.maximum=Ke.max=function(){return ze(arguments,-1)},Ke.minimum=Ke.min=function(){return ze(arguments,1)},Ke.random=function(){var Ze=9007199254740992,et=Math.random()*Ze&2097151?function(){return mathfloor(Math.random()*Ze)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(nt){var Ge,ve,Be,Re,Ie,Fe=0,qe=[],We=new Ke(ue);if(nt==null?nt=Ae:intCheck(nt,0,MAX),Re=mathceil(nt/LOG_BASE),Se)if(crypto.getRandomValues){for(Ge=crypto.getRandomValues(new Uint32Array(Re*=2));Fe<Re;)Ie=Ge[Fe]*131072+(Ge[Fe+1]>>>11),Ie>=9e15?(ve=crypto.getRandomValues(new Uint32Array(2)),Ge[Fe]=ve[0],Ge[Fe+1]=ve[1]):(qe.push(Ie%1e14),Fe+=2);Fe=Re/2}else if(crypto.randomBytes){for(Ge=crypto.randomBytes(Re*=7);Fe<Re;)Ie=(Ge[Fe]&31)*281474976710656+Ge[Fe+1]*1099511627776+Ge[Fe+2]*4294967296+Ge[Fe+3]*16777216+(Ge[Fe+4]<<16)+(Ge[Fe+5]<<8)+Ge[Fe+6],Ie>=9e15?crypto.randomBytes(7).copy(Ge,Fe):(qe.push(Ie%1e14),Fe+=7);Fe=Re/7}else throw Se=!1,Error(bignumberError+"crypto unavailable");if(!Se)for(;Fe<Re;)Ie=et(),Ie<9e15&&(qe[Fe++]=Ie%1e14);for(Re=qe[--Fe],nt%=LOG_BASE,Re&&nt&&(Ie=POWS_TEN[LOG_BASE-nt],qe[Fe]=mathfloor(Re/Ie)*Ie);qe[Fe]===0;qe.pop(),Fe--);if(Fe<0)qe=[Be=0];else{for(Be=-1;qe[0]===0;qe.splice(0,1),Be-=LOG_BASE);for(Fe=1,Ie=qe[0];Ie>=10;Ie/=10,Fe++);Fe<LOG_BASE&&(Be-=LOG_BASE-Fe)}return We.e=Be,We.c=qe,We}}(),Ke.sum=function(){for(var Ze=1,et=arguments,nt=new Ke(et[0]);Ze<et.length;)nt=nt.plus(et[Ze++]);return nt},ne=function(){var Ze="0123456789";function et(nt,Ge,ve,Be){for(var Re,Ie=[0],Fe,qe=0,We=nt.length;qe<We;){for(Fe=Ie.length;Fe--;Ie[Fe]*=Ge);for(Ie[0]+=Be.indexOf(nt.charAt(qe++)),Re=0;Re<Ie.length;Re++)Ie[Re]>ve-1&&(Ie[Re+1]==null&&(Ie[Re+1]=0),Ie[Re+1]+=Ie[Re]/ve|0,Ie[Re]%=ve)}return Ie.reverse()}return function(nt,Ge,ve,Be,Re){var Ie,Fe,qe,We,Ue,_e,Qe,tt,it=nt.indexOf("."),at=Ae,ot=pe;for(it>=0&&(We=Ne,Ne=0,nt=nt.replace(".",""),tt=new Ke(Ge),_e=tt.pow(nt.length-it),Ne=We,tt.c=et(toFixedPoint(coeffToString(_e.c),_e.e,"0"),10,ve,Ze),tt.e=tt.c.length),Qe=et(nt,Ge,ve,Re?(Ie=ke,Ze):(Ie=Ze,ke)),qe=We=Qe.length;Qe[--We]==0;Qe.pop());if(!Qe[0])return Ie.charAt(0);if(it<0?--qe:(_e.c=Qe,_e.e=qe,_e.s=Be,_e=J(_e,tt,at,ot,ve),Qe=_e.c,Ue=_e.r,qe=_e.e),Fe=qe+at+1,it=Qe[Fe],We=ve/2,Ue=Ue||Fe<0||Qe[Fe+1]!=null,Ue=ot<4?(it!=null||Ue)&&(ot==0||ot==(_e.s<0?3:2)):it>We||it==We&&(ot==4||Ue||ot==6&&Qe[Fe-1]&1||ot==(_e.s<0?8:7)),Fe<1||!Qe[0])nt=Ue?toFixedPoint(Ie.charAt(1),-at,Ie.charAt(0)):Ie.charAt(0);else{if(Qe.length=Fe,Ue)for(--ve;++Qe[--Fe]>ve;)Qe[Fe]=0,Fe||(++qe,Qe=[1].concat(Qe));for(We=Qe.length;!Qe[--We];);for(it=0,nt="";it<=We;nt+=Ie.charAt(Qe[it++]));nt=toFixedPoint(nt,qe,Ie.charAt(0))}return nt}}(),J=function(){function Ze(Ge,ve,Be){var Re,Ie,Fe,qe,We=0,Ue=Ge.length,_e=ve%SQRT_BASE,Qe=ve/SQRT_BASE|0;for(Ge=Ge.slice();Ue--;)Fe=Ge[Ue]%SQRT_BASE,qe=Ge[Ue]/SQRT_BASE|0,Re=Qe*Fe+qe*_e,Ie=_e*Fe+Re%SQRT_BASE*SQRT_BASE+We,We=(Ie/Be|0)+(Re/SQRT_BASE|0)+Qe*qe,Ge[Ue]=Ie%Be;return We&&(Ge=[We].concat(Ge)),Ge}function et(Ge,ve,Be,Re){var Ie,Fe;if(Be!=Re)Fe=Be>Re?1:-1;else for(Ie=Fe=0;Ie<Be;Ie++)if(Ge[Ie]!=ve[Ie]){Fe=Ge[Ie]>ve[Ie]?1:-1;break}return Fe}function nt(Ge,ve,Be,Re){for(var Ie=0;Be--;)Ge[Be]-=Ie,Ie=Ge[Be]<ve[Be]?1:0,Ge[Be]=Ie*Re+Ge[Be]-ve[Be];for(;!Ge[0]&&Ge.length>1;Ge.splice(0,1));}return function(Ge,ve,Be,Re,Ie){var Fe,qe,We,Ue,_e,Qe,tt,it,at,ot,lt,st,ut,ft,dt,Bt,pt,mt=Ge.s==ve.s?1:-1,bt=Ge.c,xt=ve.c;if(!bt||!bt[0]||!xt||!xt[0])return new Ke(!Ge.s||!ve.s||(bt?xt&&bt[0]==xt[0]:!xt)?NaN:bt&&bt[0]==0||!xt?mt*0:mt/0);for(it=new Ke(mt),at=it.c=[],qe=Ge.e-ve.e,mt=Be+qe+1,Ie||(Ie=BASE,qe=bitFloor(Ge.e/LOG_BASE)-bitFloor(ve.e/LOG_BASE),mt=mt/LOG_BASE|0),We=0;xt[We]==(bt[We]||0);We++);if(xt[We]>(bt[We]||0)&&qe--,mt<0)at.push(1),Ue=!0;else{for(ft=bt.length,Bt=xt.length,We=0,mt+=2,_e=mathfloor(Ie/(xt[0]+1)),_e>1&&(xt=Ze(xt,_e,Ie),bt=Ze(bt,_e,Ie),Bt=xt.length,ft=bt.length),ut=Bt,ot=bt.slice(0,Bt),lt=ot.length;lt<Bt;ot[lt++]=0);pt=xt.slice(),pt=[0].concat(pt),dt=xt[0],xt[1]>=Ie/2&&dt++;do{if(_e=0,Fe=et(xt,ot,Bt,lt),Fe<0){if(st=ot[0],Bt!=lt&&(st=st*Ie+(ot[1]||0)),_e=mathfloor(st/dt),_e>1)for(_e>=Ie&&(_e=Ie-1),Qe=Ze(xt,_e,Ie),tt=Qe.length,lt=ot.length;et(Qe,ot,tt,lt)==1;)_e--,nt(Qe,Bt<tt?pt:xt,tt,Ie),tt=Qe.length,Fe=1;else _e==0&&(Fe=_e=1),Qe=xt.slice(),tt=Qe.length;if(tt<lt&&(Qe=[0].concat(Qe)),nt(ot,Qe,lt,Ie),lt=ot.length,Fe==-1)for(;et(xt,ot,Bt,lt)<1;)_e++,nt(ot,Bt<lt?pt:xt,lt,Ie),lt=ot.length}else Fe===0&&(_e++,ot=[0]);at[We++]=_e,ot[0]?ot[lt++]=bt[ut]||0:(ot=[bt[ut]],lt=1)}while((ut++<ft||ot[0]!=null)&&mt--);Ue=ot[0]!=null,at[0]||at.splice(0,1)}if(Ie==BASE){for(We=1,mt=at[0];mt>=10;mt/=10,We++);Je(it,Be+(it.e=We+qe*LOG_BASE-1)+1,Re,Ue)}else it.e=qe,it.r=+Ue;return it}}();function Ye(Ze,et,nt,Ge){var ve,Be,Re,Ie,Fe;if(nt==null?nt=pe:intCheck(nt,0,8),!Ze.c)return Ze.toString();if(ve=Ze.c[0],Re=Ze.e,et==null)Fe=coeffToString(Ze.c),Fe=Ge==1||Ge==2&&(Re<=xe||Re>=me)?toExponential(Fe,Re):toFixedPoint(Fe,Re,"0");else if(Ze=Je(new Ke(Ze),et,nt),Be=Ze.e,Fe=coeffToString(Ze.c),Ie=Fe.length,Ge==1||Ge==2&&(et<=Be||Be<=xe)){for(;Ie<et;Fe+="0",Ie++);Fe=toExponential(Fe,Be)}else if(et-=Re,Fe=toFixedPoint(Fe,Be,"0"),Be+1>Ie){if(--et>0)for(Fe+=".";et--;Fe+="0");}else if(et+=Be-Ie,et>0)for(Be+1==Ie&&(Fe+=".");et--;Fe+="0");return Ze.s<0&&ve?"-"+Fe:Fe}function ze(Ze,et){for(var nt,Ge,ve=1,Be=new Ke(Ze[0]);ve<Ze.length;ve++)Ge=new Ke(Ze[ve]),(!Ge.s||(nt=compare$1(Be,Ge))===et||nt===0&&Be.s===et)&&(Be=Ge);return Be}function Xe(Ze,et,nt){for(var Ge=1,ve=et.length;!et[--ve];et.pop());for(ve=et[0];ve>=10;ve/=10,Ge++);return(nt=Ge+nt*LOG_BASE-1)>ye?Ze.c=Ze.e=null:nt<ge?Ze.c=[Ze.e=0]:(Ze.e=nt,Ze.c=et),Ze}oe=function(){var Ze=/^(-?)0([xbo])(?=\w[\w.]*$)/i,et=/^([^.]+)\.$/,nt=/^\.([^.]+)$/,Ge=/^-?(Infinity|NaN)$/,ve=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Be,Re,Ie,Fe){var qe,We=Ie?Re:Re.replace(ve,"");if(Ge.test(We))Be.s=isNaN(We)?null:We<0?-1:1;else{if(!Ie&&(We=We.replace(Ze,function(Ue,_e,Qe){return qe=(Qe=Qe.toLowerCase())=="x"?16:Qe=="b"?2:8,!Fe||Fe==qe?_e:Ue}),Fe&&(qe=Fe,We=We.replace(et,"$1").replace(nt,"0.$1")),Re!=We))return new Ke(We,qe);if(Ke.DEBUG)throw Error(bignumberError+"Not a"+(Fe?" base "+Fe:"")+" number: "+Re);Be.s=null}Be.c=Be.e=null}}();function Je(Ze,et,nt,Ge){var ve,Be,Re,Ie,Fe,qe,We,Ue=Ze.c,_e=POWS_TEN;if(Ue){e:{for(ve=1,Ie=Ue[0];Ie>=10;Ie/=10,ve++);if(Be=et-ve,Be<0)Be+=LOG_BASE,Re=et,Fe=Ue[qe=0],We=mathfloor(Fe/_e[ve-Re-1]%10);else if(qe=mathceil((Be+1)/LOG_BASE),qe>=Ue.length)if(Ge){for(;Ue.length<=qe;Ue.push(0));Fe=We=0,ve=1,Be%=LOG_BASE,Re=Be-LOG_BASE+1}else break e;else{for(Fe=Ie=Ue[qe],ve=1;Ie>=10;Ie/=10,ve++);Be%=LOG_BASE,Re=Be-LOG_BASE+ve,We=Re<0?0:mathfloor(Fe/_e[ve-Re-1]%10)}if(Ge=Ge||et<0||Ue[qe+1]!=null||(Re<0?Fe:Fe%_e[ve-Re-1]),Ge=nt<4?(We||Ge)&&(nt==0||nt==(Ze.s<0?3:2)):We>5||We==5&&(nt==4||Ge||nt==6&&(Be>0?Re>0?Fe/_e[ve-Re]:0:Ue[qe-1])%10&1||nt==(Ze.s<0?8:7)),et<1||!Ue[0])return Ue.length=0,Ge?(et-=Ze.e+1,Ue[0]=_e[(LOG_BASE-et%LOG_BASE)%LOG_BASE],Ze.e=-et||0):Ue[0]=Ze.e=0,Ze;if(Be==0?(Ue.length=qe,Ie=1,qe--):(Ue.length=qe+1,Ie=_e[LOG_BASE-Be],Ue[qe]=Re>0?mathfloor(Fe/_e[ve-Re]%_e[Re])*Ie:0),Ge)for(;;)if(qe==0){for(Be=1,Re=Ue[0];Re>=10;Re/=10,Be++);for(Re=Ue[0]+=Ie,Ie=1;Re>=10;Re/=10,Ie++);Be!=Ie&&(Ze.e++,Ue[0]==BASE&&(Ue[0]=1));break}else{if(Ue[qe]+=Ie,Ue[qe]!=BASE)break;Ue[qe--]=0,Ie=1}for(Be=Ue.length;Ue[--Be]===0;Ue.pop());}Ze.e>ye?Ze.c=Ze.e=null:Ze.e<ge&&(Ze.c=[Ze.e=0])}return Ze}function rt(Ze){var et,nt=Ze.e;return nt===null?Ze.toString():(et=coeffToString(Ze.c),et=nt<=xe||nt>=me?toExponential(et,nt):toFixedPoint(et,nt,"0"),Ze.s<0?"-"+et:et)}return ce.absoluteValue=ce.abs=function(){var Ze=new Ke(this);return Ze.s<0&&(Ze.s=1),Ze},ce.comparedTo=function(Ze,et){return compare$1(this,new Ke(Ze,et))},ce.decimalPlaces=ce.dp=function(Ze,et){var nt,Ge,ve,Be=this;if(Ze!=null)return intCheck(Ze,0,MAX),et==null?et=pe:intCheck(et,0,8),Je(new Ke(Be),Ze+Be.e+1,et);if(!(nt=Be.c))return null;if(Ge=((ve=nt.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE,ve=nt[ve])for(;ve%10==0;ve/=10,Ge--);return Ge<0&&(Ge=0),Ge},ce.dividedBy=ce.div=function(Ze,et){return J(this,new Ke(Ze,et),Ae,pe)},ce.dividedToIntegerBy=ce.idiv=function(Ze,et){return J(this,new Ke(Ze,et),0,1)},ce.exponentiatedBy=ce.pow=function(Ze,et){var nt,Ge,ve,Be,Re,Ie,Fe,qe,We,Ue=this;if(Ze=new Ke(Ze),Ze.c&&!Ze.isInteger())throw Error(bignumberError+"Exponent not an integer: "+rt(Ze));if(et!=null&&(et=new Ke(et)),Ie=Ze.e>14,!Ue.c||!Ue.c[0]||Ue.c[0]==1&&!Ue.e&&Ue.c.length==1||!Ze.c||!Ze.c[0])return We=new Ke(Math.pow(+rt(Ue),Ie?Ze.s*(2-isOdd(Ze)):+rt(Ze))),et?We.mod(et):We;if(Fe=Ze.s<0,et){if(et.c?!et.c[0]:!et.s)return new Ke(NaN);Ge=!Fe&&Ue.isInteger()&&et.isInteger(),Ge&&(Ue=Ue.mod(et))}else{if(Ze.e>9&&(Ue.e>0||Ue.e<-1||(Ue.e==0?Ue.c[0]>1||Ie&&Ue.c[1]>=24e7:Ue.c[0]<8e13||Ie&&Ue.c[0]<=9999975e7)))return Be=Ue.s<0&&isOdd(Ze)?-0:0,Ue.e>-1&&(Be=1/Be),new Ke(Fe?1/Be:Be);Ne&&(Be=mathceil(Ne/LOG_BASE+2))}for(Ie?(nt=new Ke(.5),Fe&&(Ze.s=1),qe=isOdd(Ze)):(ve=Math.abs(+rt(Ze)),qe=ve%2),We=new Ke(ue);;){if(qe){if(We=We.times(Ue),!We.c)break;Be?We.c.length>Be&&(We.c.length=Be):Ge&&(We=We.mod(et))}if(ve){if(ve=mathfloor(ve/2),ve===0)break;qe=ve%2}else if(Ze=Ze.times(nt),Je(Ze,Ze.e+1,1),Ze.e>14)qe=isOdd(Ze);else{if(ve=+rt(Ze),ve===0)break;qe=ve%2}Ue=Ue.times(Ue),Be?Ue.c&&Ue.c.length>Be&&(Ue.c.length=Be):Ge&&(Ue=Ue.mod(et))}return Ge?We:(Fe&&(We=ue.div(We)),et?We.mod(et):Be?Je(We,Ne,pe,Re):We)},ce.integerValue=function(Ze){var et=new Ke(this);return Ze==null?Ze=pe:intCheck(Ze,0,8),Je(et,et.e+1,Ze)},ce.isEqualTo=ce.eq=function(Ze,et){return compare$1(this,new Ke(Ze,et))===0},ce.isFinite=function(){return!!this.c},ce.isGreaterThan=ce.gt=function(Ze,et){return compare$1(this,new Ke(Ze,et))>0},ce.isGreaterThanOrEqualTo=ce.gte=function(Ze,et){return(et=compare$1(this,new Ke(Ze,et)))===1||et===0},ce.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2},ce.isLessThan=ce.lt=function(Ze,et){return compare$1(this,new Ke(Ze,et))<0},ce.isLessThanOrEqualTo=ce.lte=function(Ze,et){return(et=compare$1(this,new Ke(Ze,et)))===-1||et===0},ce.isNaN=function(){return!this.s},ce.isNegative=function(){return this.s<0},ce.isPositive=function(){return this.s>0},ce.isZero=function(){return!!this.c&&this.c[0]==0},ce.minus=function(Ze,et){var nt,Ge,ve,Be,Re=this,Ie=Re.s;if(Ze=new Ke(Ze,et),et=Ze.s,!Ie||!et)return new Ke(NaN);if(Ie!=et)return Ze.s=-et,Re.plus(Ze);var Fe=Re.e/LOG_BASE,qe=Ze.e/LOG_BASE,We=Re.c,Ue=Ze.c;if(!Fe||!qe){if(!We||!Ue)return We?(Ze.s=-et,Ze):new Ke(Ue?Re:NaN);if(!We[0]||!Ue[0])return Ue[0]?(Ze.s=-et,Ze):new Ke(We[0]?Re:pe==3?-0:0)}if(Fe=bitFloor(Fe),qe=bitFloor(qe),We=We.slice(),Ie=Fe-qe){for((Be=Ie<0)?(Ie=-Ie,ve=We):(qe=Fe,ve=Ue),ve.reverse(),et=Ie;et--;ve.push(0));ve.reverse()}else for(Ge=(Be=(Ie=We.length)<(et=Ue.length))?Ie:et,Ie=et=0;et<Ge;et++)if(We[et]!=Ue[et]){Be=We[et]<Ue[et];break}if(Be&&(ve=We,We=Ue,Ue=ve,Ze.s=-Ze.s),et=(Ge=Ue.length)-(nt=We.length),et>0)for(;et--;We[nt++]=0);for(et=BASE-1;Ge>Ie;){if(We[--Ge]<Ue[Ge]){for(nt=Ge;nt&&!We[--nt];We[nt]=et);--We[nt],We[Ge]+=BASE}We[Ge]-=Ue[Ge]}for(;We[0]==0;We.splice(0,1),--qe);return We[0]?Xe(Ze,We,qe):(Ze.s=pe==3?-1:1,Ze.c=[Ze.e=0],Ze)},ce.modulo=ce.mod=function(Ze,et){var nt,Ge,ve=this;return Ze=new Ke(Ze,et),!ve.c||!Ze.s||Ze.c&&!Ze.c[0]?new Ke(NaN):!Ze.c||ve.c&&!ve.c[0]?new Ke(ve):(Te==9?(Ge=Ze.s,Ze.s=1,nt=J(ve,Ze,0,3),Ze.s=Ge,nt.s*=Ge):nt=J(ve,Ze,0,Te),Ze=ve.minus(nt.times(Ze)),!Ze.c[0]&&Te==1&&(Ze.s=ve.s),Ze)},ce.multipliedBy=ce.times=function(Ze,et){var nt,Ge,ve,Be,Re,Ie,Fe,qe,We,Ue,_e,Qe,tt,it,at,ot=this,lt=ot.c,st=(Ze=new Ke(Ze,et)).c;if(!lt||!st||!lt[0]||!st[0])return!ot.s||!Ze.s||lt&&!lt[0]&&!st||st&&!st[0]&&!lt?Ze.c=Ze.e=Ze.s=null:(Ze.s*=ot.s,!lt||!st?Ze.c=Ze.e=null:(Ze.c=[0],Ze.e=0)),Ze;for(Ge=bitFloor(ot.e/LOG_BASE)+bitFloor(Ze.e/LOG_BASE),Ze.s*=ot.s,Fe=lt.length,Ue=st.length,Fe<Ue&&(tt=lt,lt=st,st=tt,ve=Fe,Fe=Ue,Ue=ve),ve=Fe+Ue,tt=[];ve--;tt.push(0));for(it=BASE,at=SQRT_BASE,ve=Ue;--ve>=0;){for(nt=0,_e=st[ve]%at,Qe=st[ve]/at|0,Re=Fe,Be=ve+Re;Be>ve;)qe=lt[--Re]%at,We=lt[Re]/at|0,Ie=Qe*qe+We*_e,qe=_e*qe+Ie%at*at+tt[Be]+nt,nt=(qe/it|0)+(Ie/at|0)+Qe*We,tt[Be--]=qe%it;tt[Be]=nt}return nt?++Ge:tt.splice(0,1),Xe(Ze,tt,Ge)},ce.negated=function(){var Ze=new Ke(this);return Ze.s=-Ze.s||null,Ze},ce.plus=function(Ze,et){var nt,Ge=this,ve=Ge.s;if(Ze=new Ke(Ze,et),et=Ze.s,!ve||!et)return new Ke(NaN);if(ve!=et)return Ze.s=-et,Ge.minus(Ze);var Be=Ge.e/LOG_BASE,Re=Ze.e/LOG_BASE,Ie=Ge.c,Fe=Ze.c;if(!Be||!Re){if(!Ie||!Fe)return new Ke(ve/0);if(!Ie[0]||!Fe[0])return Fe[0]?Ze:new Ke(Ie[0]?Ge:ve*0)}if(Be=bitFloor(Be),Re=bitFloor(Re),Ie=Ie.slice(),ve=Be-Re){for(ve>0?(Re=Be,nt=Fe):(ve=-ve,nt=Ie),nt.reverse();ve--;nt.push(0));nt.reverse()}for(ve=Ie.length,et=Fe.length,ve-et<0&&(nt=Fe,Fe=Ie,Ie=nt,et=ve),ve=0;et;)ve=(Ie[--et]=Ie[et]+Fe[et]+ve)/BASE|0,Ie[et]=BASE===Ie[et]?0:Ie[et]%BASE;return ve&&(Ie=[ve].concat(Ie),++Re),Xe(Ze,Ie,Re)},ce.precision=ce.sd=function(Ze,et){var nt,Ge,ve,Be=this;if(Ze!=null&&Ze!==!!Ze)return intCheck(Ze,1,MAX),et==null?et=pe:intCheck(et,0,8),Je(new Ke(Be),Ze,et);if(!(nt=Be.c))return null;if(ve=nt.length-1,Ge=ve*LOG_BASE+1,ve=nt[ve]){for(;ve%10==0;ve/=10,Ge--);for(ve=nt[0];ve>=10;ve/=10,Ge++);}return Ze&&Be.e+1>Ge&&(Ge=Be.e+1),Ge},ce.shiftedBy=function(Ze){return intCheck(Ze,-MAX_SAFE_INTEGER$2,MAX_SAFE_INTEGER$2),this.times("1e"+Ze)},ce.squareRoot=ce.sqrt=function(){var Ze,et,nt,Ge,ve,Be=this,Re=Be.c,Ie=Be.s,Fe=Be.e,qe=Ae+4,We=new Ke("0.5");if(Ie!==1||!Re||!Re[0])return new Ke(!Ie||Ie<0&&(!Re||Re[0])?NaN:Re?Be:1/0);if(Ie=Math.sqrt(+rt(Be)),Ie==0||Ie==1/0?(et=coeffToString(Re),(et.length+Fe)%2==0&&(et+="0"),Ie=Math.sqrt(+et),Fe=bitFloor((Fe+1)/2)-(Fe<0||Fe%2),Ie==1/0?et="5e"+Fe:(et=Ie.toExponential(),et=et.slice(0,et.indexOf("e")+1)+Fe),nt=new Ke(et)):nt=new Ke(Ie+""),nt.c[0]){for(Fe=nt.e,Ie=Fe+qe,Ie<3&&(Ie=0);;)if(ve=nt,nt=We.times(ve.plus(J(Be,ve,qe,1))),coeffToString(ve.c).slice(0,Ie)===(et=coeffToString(nt.c)).slice(0,Ie))if(nt.e<Fe&&--Ie,et=et.slice(Ie-3,Ie+1),et=="9999"||!Ge&&et=="4999"){if(!Ge&&(Je(ve,ve.e+Ae+2,0),ve.times(ve).eq(Be))){nt=ve;break}qe+=4,Ie+=4,Ge=1}else{(!+et||!+et.slice(1)&&et.charAt(0)=="5")&&(Je(nt,nt.e+Ae+2,1),Ze=!nt.times(nt).eq(Be));break}}return Je(nt,nt.e+Ae+1,pe,Ze)},ce.toExponential=function(Ze,et){return Ze!=null&&(intCheck(Ze,0,MAX),Ze++),Ye(this,Ze,et,1)},ce.toFixed=function(Ze,et){return Ze!=null&&(intCheck(Ze,0,MAX),Ze=Ze+this.e+1),Ye(this,Ze,et)},ce.toFormat=function(Ze,et,nt){var Ge,ve=this;if(nt==null)Ze!=null&&et&&typeof et=="object"?(nt=et,et=null):Ze&&typeof Ze=="object"?(nt=Ze,Ze=et=null):nt=$e;else if(typeof nt!="object")throw Error(bignumberError+"Argument not an object: "+nt);if(Ge=ve.toFixed(Ze,et),ve.c){var Be,Re=Ge.split("."),Ie=+nt.groupSize,Fe=+nt.secondaryGroupSize,qe=nt.groupSeparator||"",We=Re[0],Ue=Re[1],_e=ve.s<0,Qe=_e?We.slice(1):We,tt=Qe.length;if(Fe&&(Be=Ie,Ie=Fe,Fe=Be,tt-=Be),Ie>0&&tt>0){for(Be=tt%Ie||Ie,We=Qe.substr(0,Be);Be<tt;Be+=Ie)We+=qe+Qe.substr(Be,Ie);Fe>0&&(We+=qe+Qe.slice(Be)),_e&&(We="-"+We)}Ge=Ue?We+(nt.decimalSeparator||"")+((Fe=+nt.fractionGroupSize)?Ue.replace(new RegExp("\\d{"+Fe+"}\\B","g"),"$&"+(nt.fractionGroupSeparator||"")):Ue):We}return(nt.prefix||"")+Ge+(nt.suffix||"")},ce.toFraction=function(Ze){var et,nt,Ge,ve,Be,Re,Ie,Fe,qe,We,Ue,_e,Qe=this,tt=Qe.c;if(Ze!=null&&(Ie=new Ke(Ze),!Ie.isInteger()&&(Ie.c||Ie.s!==1)||Ie.lt(ue)))throw Error(bignumberError+"Argument "+(Ie.isInteger()?"out of range: ":"not an integer: ")+rt(Ie));if(!tt)return new Ke(Qe);for(et=new Ke(ue),qe=nt=new Ke(ue),Ge=Fe=new Ke(ue),_e=coeffToString(tt),Be=et.e=_e.length-Qe.e-1,et.c[0]=POWS_TEN[(Re=Be%LOG_BASE)<0?LOG_BASE+Re:Re],Ze=!Ze||Ie.comparedTo(et)>0?Be>0?et:qe:Ie,Re=ye,ye=1/0,Ie=new Ke(_e),Fe.c[0]=0;We=J(Ie,et,0,1),ve=nt.plus(We.times(Ge)),ve.comparedTo(Ze)!=1;)nt=Ge,Ge=ve,qe=Fe.plus(We.times(ve=qe)),Fe=ve,et=Ie.minus(We.times(ve=et)),Ie=ve;return ve=J(Ze.minus(nt),Ge,0,1),Fe=Fe.plus(ve.times(qe)),nt=nt.plus(ve.times(Ge)),Fe.s=qe.s=Qe.s,Be=Be*2,Ue=J(qe,Ge,Be,pe).minus(Qe).abs().comparedTo(J(Fe,nt,Be,pe).minus(Qe).abs())<1?[qe,Ge]:[Fe,nt],ye=Re,Ue},ce.toNumber=function(){return+rt(this)},ce.toPrecision=function(Ze,et){return Ze!=null&&intCheck(Ze,1,MAX),Ye(this,Ze,et,2)},ce.toString=function(Ze){var et,nt=this,Ge=nt.s,ve=nt.e;return ve===null?Ge?(et="Infinity",Ge<0&&(et="-"+et)):et="NaN":(Ze==null?et=ve<=xe||ve>=me?toExponential(coeffToString(nt.c),ve):toFixedPoint(coeffToString(nt.c),ve,"0"):Ze===10&&je?(nt=Je(new Ke(nt),Ae+ve+1,pe),et=toFixedPoint(coeffToString(nt.c),nt.e,"0")):(intCheck(Ze,2,ke.length,"Base"),et=ne(toFixedPoint(coeffToString(nt.c),ve,"0"),10,Ze,Ge,!0)),Ge<0&&nt.c[0]&&(et="-"+et)),et},ce.valueOf=ce.toJSON=function(){return rt(this)},ce._isBigNumber=!0,ce[Symbol.toStringTag]="BigNumber",ce[Symbol.for("nodejs.util.inspect.custom")]=ce.valueOf,K!=null&&Ke.set(K),Ke}function bitFloor(K){var J=K|0;return K>0||K===J?J:J-1}function coeffToString(K){for(var J,ne,oe=1,ce=K.length,ue=K[0]+"";oe<ce;){for(J=K[oe++]+"",ne=LOG_BASE-J.length;ne--;J="0"+J);ue+=J}for(ce=ue.length;ue.charCodeAt(--ce)===48;);return ue.slice(0,ce+1||1)}function compare$1(K,J){var ne,oe,ce=K.c,ue=J.c,Ae=K.s,pe=J.s,xe=K.e,me=J.e;if(!Ae||!pe)return null;if(ne=ce&&!ce[0],oe=ue&&!ue[0],ne||oe)return ne?oe?0:-pe:Ae;if(Ae!=pe)return Ae;if(ne=Ae<0,oe=xe==me,!ce||!ue)return oe?0:!ce^ne?1:-1;if(!oe)return xe>me^ne?1:-1;for(pe=(xe=ce.length)<(me=ue.length)?xe:me,Ae=0;Ae<pe;Ae++)if(ce[Ae]!=ue[Ae])return ce[Ae]>ue[Ae]^ne?1:-1;return xe==me?0:xe>me^ne?1:-1}function intCheck(K,J,ne,oe){if(K<J||K>ne||K!==mathfloor(K))throw Error(bignumberError+(oe||"Argument")+(typeof K=="number"?K<J||K>ne?" out of range: ":" not an integer: ":" not a primitive number: ")+String(K))}function isOdd(K){var J=K.c.length-1;return bitFloor(K.e/LOG_BASE)==J&&K.c[J]%2!=0}function toExponential(K,J){return(K.length>1?K.charAt(0)+"."+K.slice(1):K)+(J<0?"e":"e+")+J}function toFixedPoint(K,J,ne){var oe,ce;if(J<0){for(ce=ne+".";++J;ce+=ne);K=ce+K}else if(oe=K.length,++J>oe){for(ce=ne,J-=oe;--J;ce+=ne);K+=ce}else J<oe&&(K=K.slice(0,J)+"."+K.slice(J));return K}var BigNumber=clone();const initialState$8={headerData:{language:"eng"}},HeaderDataSlice=createSlice({name:"headerData",initialState:initialState$8,reducers:{setLanguage(K,J){K.headerData.language=J.payload}}}),HeaderDataSliceReducer=HeaderDataSlice.reducer,{setLanguage}=HeaderDataSlice.actions;var LoadingStatusesEnum=(K=>(K.INITIAL="INITIAL",K.LOADING="LOADING",K.SUCCESS="SUCCESS",K.ERROR="ERROR",K))(LoadingStatusesEnum||{}),QueryOperatorEnum=(K=>(K.Not="Not",K.And="And",K.Or="Or",K.Nor="Nor",K.Equal="Equal",K.NotEqual="NotEqual",K.Less="Less",K.LessOrEqual="LessOrEqual",K.More="More",K.MoreOrEqual="MoreOrEqual",K.In="In",K.NotIn="NotIn",K.Contains="Contains",K.Size="Size",K.All="All",K.Exists="Exists",K.EndsWith="EndsWith",K.StartsWith="StartsWith",K))(QueryOperatorEnum||{}),RunHandlerStatusCodeEnum=(K=>(K.Empty="Empty",K.Submitted="Submitted",K.Running="Running",K.Paused="Paused",K.Completed="Completed",K.Failed="Failed",K.Cancelled="Cancelled",K))(RunHandlerStatusCodeEnum||{});const handleMouseDown=(K,J)=>{K.stopPropagation();const ne=new CustomEvent("closesearchmenu");document.dispatchEvent(ne);const oe=J[K.button];return oe&&oe()},searchByName=(K,J)=>K.toLowerCase().search(J.trimStart().toLowerCase())!==-1,resizePlotly=()=>{window.Plotly&&Array.from(document.querySelectorAll(".plotly-graph-div")).map(K=>K.getAttribute("id")).filter(K=>!!K).forEach(K=>{var J;return(J=window.Plotly)==null?void 0:J.Plots.resize(K)})},getSortTypeByValueType=K=>{switch(K){case"Long":case"Bool":return"basic";case"Int":case"Double":return(J,ne,oe)=>{const ce=J.values[oe],ue=ne.values[oe];return isNaN$1(ce)&&isNaN$1(ue)?0:isNaN$1(ce)?1:isNaN$1(ue)||ce<ue?-1:ce>ue?1:0};case"Time":return(J,ne,oe)=>{const ce=J.values[oe],ue=ne.values[oe];if(!isString$2(ce)&&!isString$2(ue))return 0;if(!isString$2(ce))return 1;if(!isString$2(ue))return-1;const Ae=DateFormatUtility.create(ce,DateFormatEnum.TIME_MS),pe=DateFormatUtility.create(ue,DateFormatEnum.TIME_MS);return Ae.sort(pe)};default:return"alphanumeric"}},getViewersTabs=K=>K.map(({Name:J})=>({id:J,key:J,label:J,isClosable:!1})),toString$2=K=>{if(isNullable(K))return"";if(BigNumber.isBigNumber(K))return K.toString();if(isObject$9(K))return JSON.stringify(K);switch(typeof K){case"bigint":case"number":case"boolean":case"symbol":return K.toString();case"string":return K;default:return""}},isViewOfType=K=>isObject$9(K)&&"_t"in K,getViewerTypeHelper=K=>{if(!isNullable(K)&&isViewOfType(K.ViewOf)){const{_t:J}=K.ViewOf;return J}},isLoading=K=>K.some(J=>J===LoadingStatusesEnum.INITIAL||J===LoadingStatusesEnum.LOADING),isError=K=>K.some(J=>J===LoadingStatusesEnum.ERROR);var isNil=K=>K==null,isFunction$6=K=>typeof K=="function",isNaNNumber=K=>typeof K=="number"&&isNaN(K),isFiniteNumber=K=>typeof K=="number"&&isFinite(K);const multiplyByPowerOfTen=(K,J)=>{if(!isFiniteNumber(K))return NaN;const ne=""+K,oe=ne.indexOf("e");return oe===-1?+(ne+"e"+J):+(ne.slice(0,oe)+"e"+(+ne.slice(oe+1)+J))},log10=K=>Math.round(Math.log(K)*Math.LOG10E),toObject=(K,J)=>{const ne={};for(let oe=0;oe<K.length;++oe)if(oe in K){const[ce,ue]=J(K[oe],oe);ne[ce]=ue}return ne},escapeRegexString=K=>K.replace(/[.*+?^${}()|[\]\\]/g,J=>`\\${J}`),memoize=K=>{const J={};return function(...ne){const oe=ne.length>1?ne.join("-(:-:)-"):ne[0];if(oe in J)return J[oe];const ce=K.apply(this,ne);return J[oe]=ce,ce}},powerOf10LookupObject=(()=>{const K={};let J="",ne;for(;ne!==1/0;)ne=+("1"+J),K[ne]=!0,J+="0";for(J="",ne=void 0;ne!==0;)ne=+("0."+J+"1"),K[ne]=!0,J+="0";return K})(),isPowerOfTen=K=>!!powerOf10LookupObject[K],toBase=(K,J,ne)=>{if(!isFiniteNumber(K)||J===ne.base)return K;if(!(J in ne.scale))return NaN;const oe=ne.scale[J]||1;return isPowerOfTen(oe)?multiplyByPowerOfTen(K,log10(oe)):K*oe},convertUnit=(K,J,ne,oe)=>{if(!isFiniteNumber(K)||J===ne)return K;const ce=toBase(K,J,oe),ue=Object.assign(Object.assign({},oe.scale),{[oe.base]:1});if(isNaN(ce)||!(J in ue)||!(ne in ue))return NaN;const Ae=oe.scale[ne]||1;return isPowerOfTen(Ae)?multiplyByPowerOfTen(ce,-log10(Ae)):ce/Ae},toBest=(K,J,ne,oe)=>{const ce=Object.assign({exclude:[],cutOffNumber:1},oe);let ue=null;const Ae=ne.scale;return Object.keys(Ae).sort((pe,xe)=>Ae[pe]-Ae[xe]).forEach(pe=>{if(!(ce.exclude.indexOf(pe)===-1))return;const me=convertUnit(K,J,pe,ne),ge=Math.abs(me);(!ue||ge>=ce.cutOffNumber&&ge<Math.abs(ue[0]))&&(ue=[me,pe])}),ue||[K,J]},unitScale=K=>({toBase:(J,ne)=>toBase(J,ne,K),convert:(J,ne,oe)=>convertUnit(J,ne,oe,K),toBest:(J,ne,oe)=>toBest(J,ne,K,oe),scaleDefinition:K}),stringRepeat=(K,J)=>{if(J<1)return"";let ne="",oe=K;for(;J>1;)J&1&&(ne+=oe),J>>>=1,oe+=oe;return ne+oe},baseCreateUnitScaleFromLocaleAbbreviations=K=>{if(!K)return unitScale({base:"",scale:{}});const J=K.split("|"),ne={"":1};return J.forEach((oe,ce)=>{oe&&(ne[oe]=+(1+stringRepeat("0",ce)))}),unitScale({base:"",scale:ne})},createUnitScaleFromLocaleAbbreviations=memoize(baseCreateUnitScaleFromLocaleAbbreviations),replaceNumeralSystemWithLatinNumbers=(K,J)=>{if(!J||J.length!==10)return K;const ne=K.length,oe=toObject(J,(ue,Ae)=>[ue.replace(/\u200e/g,""),""+Ae]);let ce="";for(let ue=0;ue<ne;ue++){const Ae=K[ue];ce+=oe[Ae]||Ae}return ce},getScalingFactorFromAbbreviations=(K,J)=>{var ne;const oe=createUnitScaleFromLocaleAbbreviations((ne=J.locale)===null||ne===void 0?void 0:ne.abbreviations),ce=Object.keys(oe.scaleDefinition.scale).sort((Ae,pe)=>pe.length-Ae.length);let ue=1;for(const Ae of ce){const pe=escapeRegexString(Ae),xe=new RegExp(`[^a-zA-Z](${pe})|(${pe.replace(/\u200e/g,"")})(?:\\)(?:\\))?)?$`);if(K.match(xe)){ue=oe.toBase(ue,Ae);break}}return ue},formattedStringToNumber=(K,J)=>{var ne;const oe=J.locale,ce=K;let ue;const Ae=replaceNumeralSystemWithLatinNumbers(K,(ne=J.locale)===null||ne===void 0?void 0:ne.numeralSystem);if(J.zeroFormat&&Ae===J.zeroFormat)ue=0;else if(J.nullFormat&&Ae===J.nullFormat||!Ae.replace(/[^0-9]+/g,"").length)ue=null;else{const pe=oe.delimiters.decimal,xe=pe==="."?Ae:Ae.replace(/\./g,"").replace(pe,"."),me=getScalingFactorFromAbbreviations(ce,J),ge=(xe.split("-").length+Math.min(xe.split("(").length-1,xe.split(")").length-1))%2?1:-1,ye=xe.replace(/[^0-9.]+/g,"");ue=ge*multiplyByPowerOfTen(+ye,log10(me))}return ue},locale={code:"en",delimiters:{thousands:",",decimal:"."},abbreviations:"|||K|||M|||B|||T",ordinal:K=>{const J=K%10;return Math.floor(K%100/10)===1?"th":J===1?"st":J===2?"nd":J===3?"rd":"th"}};function merge$3(...K){const J={},ne=K.length;for(let oe=0;oe<ne;oe++)for(const ce in K[oe])J[ce]=K[oe][ce];return J}var isObject$a=K=>typeof K=="object"&&K!==null,isString$3=K=>typeof K=="string";const truncateNumber=K=>K<0?Math.ceil(K):Math.floor(K),getPatternParts=K=>{let J=!1,ne="";const oe=[];for(let ce=0;ce<K.length;ce++){const ue=K.charAt(ce);ue==="'"&&!J?(J=!0,ne=""):ue==="'"&&J&&K.charAt(ce-1)!=="\\"?(J=!1,oe.push({escaped:!0,value:ne})):J?ne+=ue:oe.length&&!oe[oe.length-1].escaped?oe[oe.length-1].value+=ue:oe.push({escaped:!1,value:ue})}return oe},patternIncludes=(K,J)=>patternRemoveEscapedText(K).indexOf(J)!==-1,patternReplace=(K,J,ne)=>getPatternParts(K).map(oe=>oe.escaped?`'${oe.value}'`:oe.value.replace(J,ce=>ne)).join(""),patternRemoveEscapedText=K=>getPatternParts(K).filter(J=>!J.escaped).map(J=>J.value).join(""),patternStripAndNormalizeEscapedText=K=>getPatternParts(K).map(J=>J.escaped?J.value.replace(/\\'/g,"'"):J.value).join(""),stringIncludes=(K,J)=>K.indexOf(J)!==-1,signRule=K=>{const J=patternRemoveEscapedText(K),ne=stringIncludes(J,"(")&&stringIncludes(J,")"),oe=!ne&&stringIncludes(J,"+");let ce=K;return ce=patternReplace(ce,"(","'nps'"),ce=patternReplace(ce,")","'npe'"),ce=patternReplace(ce,/(-|\+)/,"'s'"),[ce,{negativeParentheses:ne,forceSign:oe}]},abbreviationRule=K=>{let J=null,ne=!1;if(patternIncludes(K,"a")){ne=!0;const ue=patternRemoveEscapedText(K).match(/a(k|m|b|t)?/);J=ue?ue[1]:null}let oe=K;return oe=patternReplace(oe,/a(k|m|b|t)?/,"'a'"),[oe,{compact:ne,compactUnit:J,compactAuto:ne&&!J}]},splitStringInTwoParts=(K,J)=>{if(!K)return["",""];const ne=K.indexOf(J);return ne===-1?[K,""]:[K.slice(0,ne),K.slice(ne+1)]},countChars=(K,J)=>K?K.split("").filter(ne=>ne===J).length:0,decimalPlacesRule=K=>{const J=patternRemoveEscapedText(K),ne=splitStringInTwoParts(J,".")[1];let oe=0,ce=0;if(ne){const ue=ne.trim();if(stringIncludes(ue,"[")){const Ae=ue.replace("]",""),pe=splitStringInTwoParts(Ae,"[");oe=countChars(pe[0],"0"),ce=oe+countChars(pe[1],"0")}else if(stringIncludes(ue,"#"))oe=countChars(ue.split("#")[0],"0"),ce=ue.length;else if(stringIncludes(ue,"X"))oe=countChars(ue.split("X")[0],"0"),ce=500;else{const Ae=countChars(ue.split(" ")[0],"0");oe=Ae,ce=Ae}}return{minimumFractionDigits:oe,maximumFractionDigits:ce}},optionalDecimalPlacesRule=K=>{let J=!1,ne=K;return patternIncludes(K,"[.]")&&(J=!0,ne=patternReplace(ne,"[.]",".")),[ne,{optionalFractionDigits:J}]},numberPositionRule=K=>patternReplace(K,/((((0|#)+,)?(0|#)+(\.([0#X]|\[0+\])+)?){1})/,"'n'"),minimumIntegerDigitsRule=K=>{const ne=patternRemoveEscapedText(K).split(".")[0].split(",")[0];return/#/g.test(ne)?0:(ne.match(/0/g)||[]).length},addSignPositionIfItDoesNotExists=K=>stringIncludes(K,"'s'")||stringIncludes(K,"'nps'")?K:K.replace("'n'",J=>"'s''n'"),baseParsePattern=K=>{const J=isString$3(K)&&K||"0,0.##########",[ne,oe]=signRule(J),[ce,ue]=abbreviationRule(ne),[Ae,pe]=optionalDecimalPlacesRule(ce),xe=Ae,me=patternRemoveEscapedText(xe),ge=decimalPlacesRule(xe),ye=minimumIntegerDigitsRule(xe),Se=me.indexOf(",")>-1,Te=numberPositionRule(xe),$e=addSignPositionIfItDoesNotExists(Te);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},oe),ue),pe),ge),{grouping:Se,minimumIntegerDigits:ye,patternMask:$e})},parsePattern=memoize(baseParsePattern),removeSignIfExists=K=>K[0]==="-"?K.slice(1):K,rescaleRoundedValue=(K,J,ne,oe)=>{const{compact:ce,compactAuto:ue}=ne,{abbreviations:Ae}=oe.locale;if(!ce||!ue)return[K,J];const pe=createUnitScaleFromLocaleAbbreviations(Ae),[xe,me]=pe.toBest(K,J||"");return[xe,me]},resolveForcedAbbreviationUnit=(K,J,ne)=>{const ce={k:3,m:6,b:9,t:12}[K],ue=(J==null?void 0:J.split("|"))||[];let Ae=null;for(let pe=0;pe<ue.length;pe++)if(ue[ce-pe]){Ae=ce-pe;break}return Ae===null?[ne,null]:[multiplyByPowerOfTen(ne,-Ae),ue[Ae]]},scaleValueWithAbbreviation=(K,J,ne)=>{const{compact:oe,compactUnit:ce}=J,{abbreviations:ue}=ne.locale;if(!oe)return[K,null];if(ce)return resolveForcedAbbreviationUnit(ce,ue,K);const Ae=createUnitScaleFromLocaleAbbreviations(ue),[pe,xe]=Ae.toBest(K,"");return[pe,xe||null]},roundNumber=(K,J,ne)=>{const oe=J||0,ce=ne||Math.round,ue=multiplyByPowerOfTen(K,oe),Ae=ce(ue);return multiplyByPowerOfTen(Ae,-oe)},formatPositiveExponentResult=K=>{const[J,ne]=splitStringInTwoParts(K,"e"),oe=+ne;if(oe<0)return K;const[ce,ue]=splitStringInTwoParts(J,"."),Ae=oe-ue.length;return`${ce}${ue}${stringRepeat("0",Ae)}`},formatNegativeExponentResult=(K,J,ne)=>{const oe=Math.abs(J),[ce,ue]=splitStringInTwoParts(ne,".");let pe=ce[0]==="-"?ce.slice(1):ce,xe=ue;for(let me=0;me<oe;me+=1){const ge=pe[0]||"";pe=pe.slice(0,pe.length-1),xe=(ge||"0")+xe}return`${K<0?"-":""}${pe||0}.${xe}`},numberToNonExponentialString=K=>{const J=(K||0).toString();if(!(J.indexOf("e")>=0))return J;const[oe,ce]=splitStringInTwoParts(J,"e"),ue=+ce;return ue>=0?formatPositiveExponentResult(J):formatNegativeExponentResult(K,ue,oe)},addTrailingZerosInFractionalPart=(K,J)=>{const[ne,oe]=splitStringInTwoParts(K,".");return`${ne}.${oe+stringRepeat("0",J-oe.length)}`},numberToFixed=(K,J,ne,oe)=>{const ce=numberToNonExponentialString(K),ue=J-(oe||0),Ae=splitStringInTwoParts(ce,".")[1],pe=Ae?Math.min(Math.max(Ae.length,ue),J):ue,xe=roundNumber(K,pe,ne);let me=numberToNonExponentialString(xe);return ue&&(me=addTrailingZerosInFractionalPart(me,ue)),me},roundValueAndAddTrailingZeros=(K,J,ne)=>{const{rounding:oe}=ne,{minimumFractionDigits:ce,maximumFractionDigits:ue}=J,Ae=oe||Math.round;if(ce>0||ue>0){const xe=ue-ce;return numberToFixed(K,ue,Ae,xe)}else return numberToFixed(K,0,Ae)},replaceDigitsWithNumeralSystem=(K,J)=>{if(!J||J.length!==10)return K;const ne=K.length;let oe="";for(let ce=0;ce<ne;ce++){const ue=K[ce];oe+=J[ue]||ue}return oe},addOrRemoveLeadingZerosToValue=(K,J)=>{const{minimumIntegerDigits:ne}=J;return ne===0&&+K<1&&+K>-1?"":K.length>=ne?K:`${stringRepeat("0",ne-K.length)}${K}`},addSignInfoToFullFormattedNumber=(K,J,ne,oe)=>{const{negativeParentheses:ce,forceSign:ue}=oe;let Ae=K;return ce&&J?Ae=Ae.replace(/'(nps|npe)'/g,pe=>pe==="'nps'"?"(":")"):ue?Ae=Ae.replace("'s'",J?"-":ne?"":"+"):J&&(Ae=Ae.replace("'s'","-")),Ae},splitNumberIntegerAndDecimalParts=(K,J)=>{const{optionalFractionDigits:ne}=J,[oe,ce]=splitStringInTwoParts(K,".");return ne&&Number(ce)===0?[oe,""]:[oe,ce]},addThousandsSeparatorToValueIntegerPart=(K,J,ne)=>{const{delimiters:oe,digitGroupingStyle:ce}=ne.locale,{grouping:ue}=J;if(!ue||!oe.thousands)return K;const Ae=K,pe=oe.thousands,me=[...ce!=null&&ce.length?ce:[3]];let ge="",ye=1;for(let Se=Ae.length-1;Se>=0;Se--)ye===me[0]&&Se!==0?(ge=pe+Ae[Se]+ge,me.length>1&&me.shift(),ye=1):(ge=Ae[Se]+ge,ye+=1);return ge},applyAbbreviationLocalizedUnitToPatternMask=(K,J,ne)=>ne?J?K.replace("'a'",oe=>`'${J.replace(/'/g,ce=>"\\'")}'`):K.match(/'n'\s*'a'/)?K.replace(/\s*'a'/,""):K.replace(/'a'\s*/,""):K,scaleAndRoundValue=(K,J,ne)=>{if(!J.compact)return[roundValueAndAddTrailingZeros(K,J,ne),null];const[oe,ce]=scaleValueWithAbbreviation(K,J,ne),ue=+roundValueAndAddTrailingZeros(oe,J,ne),[Ae,pe]=rescaleRoundedValue(+ue,ce,J,ne);return[roundValueAndAddTrailingZeros(Ae,J,ne),pe]},numberToFormattedNumber=(K,J,ne)=>{var oe;const ce=parsePattern(J),ue=isFiniteNumber(K)?K:0,[Ae,pe]=scaleAndRoundValue(ue,ce,ne);if(Ae==="NaN")return"";const xe=ne.signedZero?K<0:+Ae<0,me=ne.signedZero?K===0:+Ae==0,ge=removeSignIfExists(Ae),[ye,Se]=splitNumberIntegerAndDecimalParts(ge,ce),Te=addOrRemoveLeadingZerosToValue(ye,ce),Ne=addThousandsSeparatorToValueIntegerPart(Te,ce,ne),$e=ne.locale.numeralSystem,ke=replaceDigitsWithNumeralSystem(Ne,$e),je=replaceDigitsWithNumeralSystem(Se,$e),Ke=ke+(je?(((oe=ne.locale.delimiters)===null||oe===void 0?void 0:oe.decimal)||".")+je:""),ze=applyAbbreviationLocalizedUnitToPatternMask(ce.patternMask,pe,ce.compact).replace("'n'",Ze=>`'${Ke.replace(/'/g,"\\'")}'`),Je=addSignInfoToFullFormattedNumber(ze,xe,me,ce).replace(/'(nps|npe|s|a|n)'/g,"");return patternStripAndNormalizeEscapedText(Je)},bpsFormatter={name:"bps",regexps:{format:/BPS/,unformat:/BPS/},format:(K,J,ne)=>{const oe=multiplyByPowerOfTen(K,4),ce=patternReplace(J,/BPS/,"'BPS'");return numberToFormattedNumber(oe,ce,ne).replace("BPS","BPS")},unformat:(K,J)=>{const ne=formattedStringToNumber(K.replace(/\s?BPS/,""),J);return isFiniteNumber(ne)?multiplyByPowerOfTen(ne,-4):ne}},timeFormatter={name:"time",regexps:{format:/([0-9]{1,2}:[0-9]{2}) *$/,unformat:/([0-9]{1,2}:[0-9]{2}) *$/},format:K=>{const J=Math.abs(K),ne=K<0?"-":"",oe=truncateNumber(J/3600),ce=truncateNumber((J-oe*3600)/60),ue=truncateNumber(J-oe*3600-ce*60);return`${ne}${oe}:${(ce<10?"0":"")+ce}:${(ue<10?"0":"")+ue}`},unformat:K=>{const J=/^ *-/.test(K),oe=K.replace(/^ *-/,"").split(":").reverse();let ce=0;return ce+=+oe[0],ce+=+oe[1]*60,ce+=(+oe[2]||0)*3600,J&&ce!==0?-ce:ce}},decimalSuffixes=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],binarySuffixes=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],allSuffixes=decimalSuffixes.concat(binarySuffixes.slice(1)),unformatRegex=`(${allSuffixes.join("|").replace(/B/g,"B(?!PS)")})`,bytesDecimalScale=unitScale({base:"B",scale:toObject(decimalSuffixes,(K,J)=>[K,Math.pow(1e3,J)])}),bytesBinaryScale=unitScale({base:"B",scale:toObject(binarySuffixes,(K,J)=>[K,Math.pow(1024,J)])}),bytesFormatter={name:"bytes",regexps:{format:/([0\s]b[bd])|(b[bd][0\s])/,unformat:(K,J)=>J.type==="bytes"?new RegExp(unformatRegex).test(K):!1},format:(K,J,ne)=>{const oe=patternIncludes(J,"bb")?bytesBinaryScale:bytesDecimalScale,[ce,ue]=oe.toBest(K,"B"),Ae=patternReplace(J,/b[bd]/,"'bytes'");return numberToFormattedNumber(ce,Ae,ne).replace("bytes",ue||"")},unformat:(K,J)=>{var ne;const oe=formattedStringToNumber(K.replace(new RegExp(unformatRegex),""),J),ce=((ne=K.match(unformatRegex))===null||ne===void 0?void 0:ne[0])||"",ue=bytesBinaryScale.scaleDefinition.scale[ce]?bytesBinaryScale:bytesDecimalScale;return oe&&ue.toBase(oe,ce)}},ordinalFormatter={name:"ordinal",regexps:{format:/o/},format:(K,J,ne)=>{var oe,ce;const ue=((ce=(oe=ne.locale).ordinal)===null||ce===void 0?void 0:ce.call(oe,K))||"",Ae=patternReplace(J,/o/,"'ord'");return numberToFormattedNumber(K,Ae,ne).replace("ord",xe=>ue)}},currencySymbolsMap={EUR:"",USD:"$",XCD:"EC$",AUD:"A$",INR:"",BRL:"R$",CAD:"CA$",XAF:"FCFA",CNY:"CN",NZD:"NZ$",XPF:"CFPF",GBP:"",HKD:"HK$",ILS:"",JPY:"",KRW:"",XOF:"CFA",MXN:"MX$",TWD:"NT$",VND:""},currencyFormatter={name:"currency",regexps:{format:/(\$)/},format:(K,J,ne)=>{var oe;const ce=(oe=ne.currency)===null||oe===void 0?void 0:oe.toUpperCase(),ue=currencySymbolsMap[ce]||ce||"",Ae=patternReplace(J,/\$/,"'currency'");return numberToFormattedNumber(K,Ae,ne).replace("currency",xe=>ue)}},percentageFormatter={name:"percentage",regexps:{format:/%!?/,unformat:/%/},format:(K,J,ne)=>{const oe=patternIncludes(J,"%!"),ce=ne.scalePercentage&&!oe?multiplyByPowerOfTen(K,2):K,ue=patternReplace(J,/%!?/,"'%'");return numberToFormattedNumber(ce,ue,ne).replace("%","%")},unformat:(K,J)=>{const ne=formattedStringToNumber(K.replace(/\s?%/,""),J);return ne&&J.scalePercentage?multiplyByPowerOfTen(ne,-2):ne}},exponentialFormatter={name:"exponential",regexps:{format:/[eE][+-][0-9]+/,unformat:/[eE][+-][0-9]+/},format:(K,J,ne)=>{const oe=typeof K=="number"&&!isNaNNumber(K)?K.toExponential():"0e+0",ce=splitStringInTwoParts(oe,"e"),ue=patternReplace(J,/e[+|-]{1}0/i,"");return numberToFormattedNumber(+ce[0],ue,ne)+"e"+ce[1]},unformat:(K,J)=>{var ne;const oe=formattedStringToNumber(K.replace(/e[+-]{1}[0-9]{1,3}/i,""),J),ce=+(((ne=K.match(/e([+-]{1}[0-9]{1,3})/i))===null||ne===void 0?void 0:ne[1])||"0");return isFiniteNumber(oe)?multiplyByPowerOfTen(oe,ce):oe}},BUILT_IN_FORMATTERS=[percentageFormatter,currencyFormatter,ordinalFormatter,timeFormatter,bytesFormatter,exponentialFormatter,bpsFormatter],roundHalfAwayFromZero=K=>K>=0?Math.round(K):K%.5===0?Math.floor(K):Math.round(K),areDelimitersValid=K=>!!(K!=null&&K.decimal)&&isString$3(K==null?void 0:K.thousands)&&K.decimal!==K.thousands,resolveOptionsLocale=K=>{const J=locale;return isObject$a(K)?merge$3(K,{delimiters:areDelimitersValid(K.delimiters)?K.delimiters:J.delimiters,abbreviations:K.abbreviations||J.abbreviations,ordinal:K.ordinal||J.ordinal}):J},resolveRoundingOption=K=>{switch(K){case"ceil":return Math.ceil;case"floor":return Math.floor;case"truncate":return truncateNumber;case"half-up":return Math.round;case"half-away-from-zero":return roundHalfAwayFromZero;default:return isFunction$6(K)?K:roundHalfAwayFromZero}},resolveOptionsFormatters=K=>K?isFunction$6(K)?K(BUILT_IN_FORMATTERS):[...K,...BUILT_IN_FORMATTERS]:BUILT_IN_FORMATTERS,resolveFormatOptions=K=>{var J,ne,oe;const ce=K||{},ue=resolveRoundingOption(ce.rounding),Ae=resolveOptionsLocale(ce.locale),pe=resolveOptionsFormatters(ce.formatters);return{defaultPattern:ce.defaultPattern||"0,0.##########",nullFormat:ce.nullFormat||"",nanFormat:ce.nanFormat,zeroFormat:ce.zeroFormat,locale:Ae,rounding:ue,type:ce.type,scalePercentage:(J=ce.scalePercentage)!==null&&J!==void 0?J:!0,trim:(ne=ce.trim)!==null&&ne!==void 0?ne:!0,formatters:pe,currency:ce.currency,signedZero:!!ce.signedZero,nonBreakingSpace:(oe=ce.nonBreakingSpace)!==null&&oe!==void 0?oe:!1}},getFormatFunctionIfMatch=(K,J)=>{const ne=patternRemoveEscapedText(K);for(const oe of J.formatters){const ce=oe.regexps.format;if(!ce)continue;if(isFunction$6(ce)?ce(K,J):!!ne.match(ce))return oe.format}},format$2=(K,J,ne)=>{var oe;try{const ce=isString$3(K)?parseFloat(K):K,ue=resolveFormatOptions(ne),Ae=J||ue.defaultPattern;let pe;if(ce===1/0||ce===-1/0)pe=ce>0?"":"-";else{if(isNaNNumber(ce))return isString$3(ue.nanFormat)?ue.nanFormat:isString$3(ue.nullFormat)?ue.nullFormat:"";if(isNil(ce))pe=isString$3(ue.nullFormat)?ue.nullFormat:"";else if(ce===0&&isString$3(ue.zeroFormat))pe=ue.zeroFormat;else{const xe=ce||0;pe=(getFormatFunctionIfMatch(Ae,ue)||numberToFormattedNumber)(xe,Ae,ue)}}return pe=isString$3(pe)?pe:"",pe=ue.nonBreakingSpace?pe.replace(/ /g,xe=>""):pe,pe=ue.trim?pe.trim():pe,pe}catch{return((oe=ne)===null||oe===void 0?void 0:oe._errorFormat)||""}};function format$1(K,J,ne){const oe=isString$3(J)?J:null,ce=isObject$a(J)?J:isObject$a(ne)?ne:{};return format$2(K,oe,ce)}const createFormatFunction=K=>{const J=merge$3(K,{locale:isFunction$6(K.locale)?K.locale():K.locale});return(ne,oe,ce)=>{const ue=isString$3(oe)?oe:null,Ae=isObject$a(oe)?oe:isObject$a(ce)?ce:{};return format$2(ne,ue,merge$3(J,Ae))}};format$1.withOptions=createFormatFunction;var IntFormatting=(K=>(K.INT="Int",K.NUMBER="Number",K))(IntFormatting||{}),ValueTypesEnum$1=(K=>(K.Data="Data",K.Bool="Bool",K.Double="Double",K.Long="Long",K.Int="Int",K.String="String",K.Date="Date",K.Time="Time",K.DateTime="DateTime",K.Key="Key",K.TimeElement="TimeElement",K.DateTimeElement="DateTimeElement",K.Binary="Binary",K.Variant="Variant",K.Dict="Dict",K.Type="type",K))(ValueTypesEnum$1||{});const simpleValueTypes$1=["String","Bool","Int","Double","Long","Date","Time","DateTime","TimeElement","DateTimeElement","type"];var FormatTypesUnum=(K=>(K.NUMBER_AMOUNT="NumberAmount",K.NUMBER_BASIS_POINT="NumberBp",K.NUMBER_PERCENT="NumberPercent",K))(FormatTypesUnum||{});const isDefined$1=K=>K!=null,isNullable=K=>K==null,isNaN$1=K=>isNullable(K)||Number.isNaN(K),isArray$6=K=>Array.isArray(K),isObject$9=K=>typeof K=="object"&&!isArray$6(K)&&K!==null,isEmpty$2=K=>isObject$9(K)&&Object.keys(K).length===0,isEmptyString=K=>typeof K=="string"&&K.length===0,isNumber$2=K=>isDefined$1(K)&&typeof K=="number",isString$2=K=>isDefined$1(K)&&typeof K=="string",isBool=K=>typeof K=="boolean",isSimpleViewType=K=>!isArray$6(K)&&(typeof K!="object"||BigNumber.isBigNumber(K)||isNullable(K)),isSimpleValueType$1=K=>isDefined$1(K)?simpleValueTypes$1.some(J=>J===K):!1,isArrayViewOfType=K=>typeof K=="object"&&isArray$6(K)&&K.length>0,isInt=K=>isNumber$2(K)&&Number.isInteger(K),isStringBool=K=>String(K)==="true"||String(K)==="false",isArrayOfStrings=K=>isArray$6(K)&&K.length>0&&K.every(isString$2),isArrayOfObjects=K=>isArray$6(K)&&K.length>0&&K.every(isObject$9),isNumericString=K=>!Number.isNaN(parseFloat(K)),isStringifiedTimeStamp=K=>isString$2(K)&&/^\d{4}-\d{2}-\d{2}-\d{2}-\d{2}-\d{2}-\d{3}-7[a-f0-9]+$/.test(K),numberTypesArr=["Int","Double","Long"],isLessThanAbsoluteValue=(K,J)=>BigNumber.isBigNumber(K)?K.abs().isLessThan(J):Math.abs(K)<J,isCloseToZero=K=>isLessThanAbsoluteValue(K,1e-10),isSmallNumber=K=>isLessThanAbsoluteValue(K,1),isExponentialNumber=K=>{const J=K.toPrecision();return/[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)/g.test(J)},formatDoubleDecimal=(K,J,ne,oe)=>{if(ne.toString().includes("e"))return`.${K}`;if(oe===FormatTypesUnum.NUMBER_PERCENT||oe===FormatTypesUnum.NUMBER_BASIS_POINT)return".00";const ce=oe==null?void 0:oe.match(/:(,?)(\.\d+)?f/);if(ce){const[,,ue]=ce,Ae=ue?parseInt(ue.slice(1),10):0;return Ae>0?`.${"0".repeat(Ae)}`:""}return`.${J}`},generateFormatPattern=(K,J,ne,oe)=>{const ce=!isCloseToZero(K)&&isExponentialNumber(K)?"e+0":"",ue=isSmallNumber(K)?"####":"##";let Ae="00";oe&&oe>100?Ae="00":oe&&oe>1&&oe<=100?Ae="0000":oe&&oe>0&&oe<=1&&(Ae="000000");const pe=`0,0${ne==="Double"?formatDoubleDecimal(ue,Ae,K,J):`.${ue}`}${ce}`,xe=`0${ne==="Double"?formatDoubleDecimal(ue,Ae,K,J):`.${ue}`}${ce}`;if(ne===IntFormatting.INT&&J!==IntFormatting.NUMBER)return xe;switch(J){case FormatTypesUnum.NUMBER_AMOUNT:return`$${pe}`;case FormatTypesUnum.NUMBER_BASIS_POINT:return`${pe}bp`;case FormatTypesUnum.NUMBER_PERCENT:return`${pe}%`;default:return pe}},formatNumberValue=(K,J,ne,oe)=>{if(!isDefined$1(K)||isEmptyString(K))return"";let ce=BigNumber.isBigNumber(K)?K:+K;return J===FormatTypesUnum.NUMBER_BASIS_POINT&&typeof ce=="number"&&(ce*=1e4),format$1(typeof K=="boolean"?K.toString():ce.toString(),generateFormatPattern(ce,J,ne,oe))},isNumberType=K=>K&&numberTypesArr.includes(K),isNegativeNumber=K=>{if(BigNumber.isBigNumber(K))return new BigNumber(K).isNegative();if(!isDefined$1(K)||isBool(K)||typeof K=="object")return!1;const J=isString$2(K)?K.replaceAll(",",""):K;return isNumber$2(Number(J))&&Number(J)<0};var BooleanColumnInputValueEnum=(K=>(K.y="y",K.n="n",K))(BooleanColumnInputValueEnum||{}),KeyboardCode=(K=>(K.ArrowUp="ArrowUp",K.ArrowDown="ArrowDown",K.ArrowLeft="ArrowLeft",K.ArrowRight="ArrowRight",K.Enter="Enter",K.Escape="Escape",K.KeyA="KeyA",K.KeyC="KeyC",K.KeyF="KeyF",K.KeyS="KeyS",K.KeyX="KeyX",K.KeyV="KeyV",K.Backspace="Backspace",K.Plus="Plus",K.Minus="Minus",K.Period="Period",K.Zero="Digit0",K.One="Digit1",K.Two="Digit2",K.Three="Digit3",K.Four="Digit4",K.Five="Digit5",K.Six="Digit6",K.Seven="Digit7",K.Eight="Digit8",K.Nine="Digit9",K.Tab="Tab",K.NumpadEnter="NumpadEnter",K.NumpadMinus="NumpadMinus",K.NumpadPlus="NumpadPlus",K.NumpadPeriod="NumpadPeriod",K.NumpadZero="Numpad0",K.NumpadOne="Numpad1",K.NumpadTwo="Numpad2",K.NumpadThree="Numpad3",K.NumpadFour="Numpad4",K.NumpadFive="Numpad5",K.NumpadSix="Numpad6",K.NumpadSeven="Numpad7",K.NumpadEight="Numpad8",K.NumpadNine="Numpad9",K))(KeyboardCode||{}),ButtonCode=(K=>(K[K.MAIN=0]="MAIN",K[K.MIDDLE=1]="MIDDLE",K[K.SECONDARY=2]="SECONDARY",K[K.BROWSER_BACK=3]="BROWSER_BACK",K[K.BROWSER_FORWARD=4]="BROWSER_FORWARD",K))(ButtonCode||{});function createEventManager(){const K=new Map;return{subscribe(J,ne){var oe;return K.has(J)?(oe=K.get(J))==null||oe.add(ne):K.set(J,new Set([ne])),this},once(J,ne){const oe=ce=>{this.unsubscribe(J,oe),ne(ce)};return this.subscribe(J,oe),this},unsubscribe(J,ne){return K.has(J)&&K.get(J).delete(ne),this},emit(J,ne){var oe;return K.has(J)&&((oe=K.get(J))==null||oe.forEach(ce=>ce(ne))),this}}}const eventManager=createEventManager(),escapeStringRegexp=K=>K.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d").replace(/([^\\*])/g,"$1\\s*");class AbortedPromiseError extends Error{constructor(J="The promise has been aborted"){super(J),this.name="AbortedPromiseError"}}function isAbortedPromiseError(K){return K instanceof AbortedPromiseError}function makeCancellablePromise(K,J){return new Promise((ne,oe)=>{K.then(ce=>!J.aborted&&ne(ce)).catch(ce=>!J.aborted&&oe(ce)),J.addEventListener("abort",()=>{oe(new AbortedPromiseError(J.reason))})})}function isInteger(K){return INTEGER_REGEX.test(K)}var INTEGER_REGEX=/^-?[0-9]+$/;function isNumber$1(K){return NUMBER_REGEX.test(K)}var NUMBER_REGEX=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function isSafeNumber(K,J){var ne=parseFloat(K),oe=String(ne),ce=extractSignificantDigits(K),ue=extractSignificantDigits(oe);if(ce===ue)return!0;if((J==null?void 0:J.approx)===!0){var Ae=14;if(!isInteger(K)&&ue.length>=Ae&&ce.startsWith(ue.substring(0,Ae)))return!0}return!1}var UnsafeNumberReason=function(K){return K.underflow="underflow",K.overflow="overflow",K.truncate_integer="truncate_integer",K.truncate_float="truncate_float",K}({});function getUnsafeNumberReason(K){if(!isSafeNumber(K,{approx:!1})){if(isInteger(K))return UnsafeNumberReason.truncate_integer;var J=parseFloat(K);return isFinite(J)?J===0?UnsafeNumberReason.underflow:UnsafeNumberReason.truncate_float:UnsafeNumberReason.overflow}}function extractSignificantDigits(K){return K.replace(EXPONENTIAL_PART_REGEX,"").replace(DOT_REGEX,"").replace(TRAILING_ZEROS_REGEX,"").replace(LEADING_MINUS_AND_ZEROS_REGEX,"")}var EXPONENTIAL_PART_REGEX=/[eE][+-]?\d+$/,LEADING_MINUS_AND_ZEROS_REGEX=/^-?(0*)?/,DOT_REGEX=/\./,TRAILING_ZEROS_REGEX=/0+$/;function _typeof$3(K){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},_typeof$3(K)}function _classCallCheck(K,J){if(!(K instanceof J))throw new TypeError("Cannot call a class as a function")}function _defineProperties(K,J){for(var ne=0;ne<J.length;ne++){var oe=J[ne];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(K,_toPropertyKey(oe.key),oe)}}function _createClass(K,J,ne){return J&&_defineProperties(K.prototype,J),Object.defineProperty(K,"prototype",{writable:!1}),K}function _defineProperty$4(K,J,ne){return J=_toPropertyKey(J),J in K?Object.defineProperty(K,J,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[J]=ne,K}function _toPropertyKey(K){var J=_toPrimitive(K,"string");return _typeof$3(J)==="symbol"?J:String(J)}function _toPrimitive(K,J){if(_typeof$3(K)!=="object"||K===null)return K;var ne=K[Symbol.toPrimitive];if(ne!==void 0){var oe=ne.call(K,J||"default");if(_typeof$3(oe)!=="object")return oe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(J==="string"?String:Number)(K)}var LosslessNumber=function(){function K(J){if(_classCallCheck(this,K),_defineProperty$4(this,"isLosslessNumber",!0),!isNumber$1(J))throw new Error('Invalid number (value: "'+J+'")');this.value=J}return _createClass(K,[{key:"valueOf",value:function(){var ne=getUnsafeNumberReason(this.value);if(ne===void 0||ne===UnsafeNumberReason.truncate_float)return parseFloat(this.value);if(isInteger(this.value))return BigInt(this.value);throw new Error("Cannot safely convert to number: "+"the value '".concat(this.value,"' would ").concat(ne," and become ").concat(parseFloat(this.value)))}},{key:"toString",value:function(){return this.value}}]),K}();function isLosslessNumber(K){return K&&_typeof$3(K)==="object"&&K.isLosslessNumber===!0||!1}function parseLosslessNumber(K){return new LosslessNumber(K)}function _typeof$2(K){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},_typeof$2(K)}function revive(K,J){return reviveValue({"":K},"",K,J)}function reviveValue(K,J,ne,oe){return Array.isArray(ne)?oe.call(K,J,reviveArray(ne,oe)):ne&&_typeof$2(ne)==="object"&&!isLosslessNumber(ne)?oe.call(K,J,reviveObject(ne,oe)):oe.call(K,J,ne)}function reviveObject(K,J){return Object.keys(K).forEach(function(ne){var oe=reviveValue(K,ne,K[ne],J);oe!==void 0?K[ne]=oe:delete K[ne]}),K}function reviveArray(K,J){for(var ne=0;ne<K.length;ne++)K[ne]=reviveValue(K,ne+"",K[ne],J);return K}function _typeof$1(K){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},_typeof$1(K)}function _toConsumableArray$2(K){return _arrayWithoutHoles$2(K)||_iterableToArray$2(K)||_unsupportedIterableToArray$3(K)||_nonIterableSpread$2()}function _nonIterableSpread$2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(K,J){if(K){if(typeof K=="string")return _arrayLikeToArray$3(K,J);var ne=Object.prototype.toString.call(K).slice(8,-1);if(ne==="Object"&&K.constructor&&(ne=K.constructor.name),ne==="Map"||ne==="Set")return Array.from(K);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return _arrayLikeToArray$3(K,J)}}function _iterableToArray$2(K){if(typeof Symbol<"u"&&K[Symbol.iterator]!=null||K["@@iterator"]!=null)return Array.from(K)}function _arrayWithoutHoles$2(K){if(Array.isArray(K))return _arrayLikeToArray$3(K)}function _arrayLikeToArray$3(K,J){(J==null||J>K.length)&&(J=K.length);for(var ne=0,oe=new Array(J);ne<J;ne++)oe[ne]=K[ne];return oe}function parse$2(K,J){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:parseLosslessNumber,oe=0,ce=pe();return Ne(ce),ke(),J?revive(ce,J):ce;function ue(){if(K.charCodeAt(oe)===codeOpeningBrace){oe++,me();for(var Re={},Ie=!0;oe<K.length&&K.charCodeAt(oe)!==codeClosingBrace;){Ie?Ie=!1:(Se(),me());var Fe=oe,qe=ge();qe===void 0&&Ye(),me(),Te();var We=pe();We===void 0&&et(),Object.prototype.hasOwnProperty.call(Re,qe)&&!isDeepEqual(We,Re[qe])&&ze(qe,Fe+1),Re[qe]=We}return K.charCodeAt(oe)!==codeClosingBrace&&Xe(),oe++,Re}}function Ae(){if(K.charCodeAt(oe)===codeOpeningBracket){oe++,me();for(var Re=[],Ie=!0;oe<K.length&&K.charCodeAt(oe)!==codeClosingBracket;){Ie?Ie=!1:Se();var Fe=pe();$e(Fe),Re.push(Fe)}return K.charCodeAt(oe)!==codeClosingBracket&&Je(),oe++,Re}}function pe(){var Re,Ie,Fe,qe,We,Ue;me();var _e=(Re=(Ie=(Fe=(qe=(We=(Ue=ge())!==null&&Ue!==void 0?Ue:ye())!==null&&We!==void 0?We:ue())!==null&&qe!==void 0?qe:Ae())!==null&&Fe!==void 0?Fe:xe("true",!0))!==null&&Ie!==void 0?Ie:xe("false",!1))!==null&&Re!==void 0?Re:xe("null",null);return me(),_e}function xe(Re,Ie){if(K.slice(oe,oe+Re.length)===Re)return oe+=Re.length,Ie}function me(){for(;isWhitespace(K.charCodeAt(oe));)oe++}function ge(){if(K.charCodeAt(oe)===codeDoubleQuote){oe++;for(var Re="";oe<K.length&&K.charCodeAt(oe)!==codeDoubleQuote;){if(K.charCodeAt(oe)===codeBackslash){var Ie=K[oe+1],Fe=escapeCharacters[Ie];Fe!==void 0?(Re+=Fe,oe++):Ie==="u"?isHex$1(K.charCodeAt(oe+2))&&isHex$1(K.charCodeAt(oe+3))&&isHex$1(K.charCodeAt(oe+4))&&isHex$1(K.charCodeAt(oe+5))?(Re+=String.fromCharCode(parseInt(K.slice(oe+2,oe+6),16)),oe+=5):nt(oe):Ze(oe)}else isValidStringCharacter(K.charCodeAt(oe))?Re+=K[oe]:rt(K[oe]);oe++}return Ke(),oe++,Re}}function ye(){var Re=oe;if(K.charCodeAt(oe)===codeMinus&&(oe++,je(Re)),K.charCodeAt(oe)===codeZero)oe++;else if(isNonZeroDigit(K.charCodeAt(oe)))for(oe++;isDigit$1(K.charCodeAt(oe));)oe++;if(K.charCodeAt(oe)===codeDot)for(oe++,je(Re);isDigit$1(K.charCodeAt(oe));)oe++;if(K.charCodeAt(oe)===codeLowercaseE||K.charCodeAt(oe)===codeUppercaseE)for(oe++,(K.charCodeAt(oe)===codeMinus||K.charCodeAt(oe)===codePlus)&&oe++,je(Re);isDigit$1(K.charCodeAt(oe));)oe++;if(oe>Re)return ne(K.slice(Re,oe))}function Se(){if(K.charCodeAt(oe)!==codeComma)throw new SyntaxError("Comma ',' expected after value ".concat(Be()));oe++}function Te(){if(K.charCodeAt(oe)!==codeColon)throw new SyntaxError("Colon ':' expected after property name ".concat(Be()));oe++}function Ne(Re){if(Re===void 0)throw new SyntaxError("JSON value expected ".concat(Be()))}function $e(Re){if(Re===void 0)throw new SyntaxError("Array item expected ".concat(Be()))}function ke(){if(oe<K.length)throw new SyntaxError("Expected end of input ".concat(Be()))}function je(Re){if(!isDigit$1(K.charCodeAt(oe))){var Ie=K.slice(Re,oe);throw new SyntaxError("Invalid number '".concat(Ie,"', expecting a digit ").concat(Be()))}}function Ke(){if(K.charCodeAt(oe)!==codeDoubleQuote)throw new SyntaxError(`End of string '"' expected `.concat(Be()))}function Ye(){throw new SyntaxError("Quoted object key expected ".concat(Be()))}function ze(Re,Ie){throw new SyntaxError("Duplicate key '".concat(Re,"' encountered at position ").concat(Ie))}function Xe(){throw new SyntaxError("Quoted object key or end of object '}' expected ".concat(Be()))}function Je(){throw new SyntaxError("Array item or end of array ']' expected ".concat(Be()))}function rt(Re){throw new SyntaxError("Invalid character '".concat(Re,"' ").concat(Ge()))}function Ze(Re){var Ie=K.slice(Re,Re+2);throw new SyntaxError("Invalid escape character '".concat(Ie,"' ").concat(Ge()))}function et(){throw new SyntaxError("Object value expected after ':' ".concat(Ge()))}function nt(Re){for(var Ie=Re+2;/\w/.test(K[Ie]);)Ie++;var Fe=K.slice(Re,Ie);throw new SyntaxError("Invalid unicode character '".concat(Fe,"' ").concat(Ge()))}function Ge(){return"at position ".concat(oe)}function ve(){return oe<K.length?"but got '".concat(K[oe],"'"):"but reached end of input"}function Be(){return ve()+" "+Ge()}}function isWhitespace(K){return K===codeSpace||K===codeNewline||K===codeTab||K===codeReturn}function isHex$1(K){return K>=codeZero&&K<=codeNine||K>=codeUppercaseA&&K<=codeUppercaseF||K>=codeLowercaseA&&K<=codeLowercaseF}function isDigit$1(K){return K>=codeZero&&K<=codeNine}function isNonZeroDigit(K){return K>=codeOne&&K<=codeNine}function isValidStringCharacter(K){return K>=32&&K<=1114111}function isDeepEqual(K,J){if(K===J)return!0;if(Array.isArray(K)&&Array.isArray(J))return K.length===J.length&&K.every(function(oe,ce){return isDeepEqual(oe,J[ce])});if(isObject$8(K)&&isObject$8(J)){var ne=_toConsumableArray$2(new Set([].concat(_toConsumableArray$2(Object.keys(K)),_toConsumableArray$2(Object.keys(J)))));return ne.every(function(oe){return isDeepEqual(K[oe],J[oe])})}return!1}function isObject$8(K){return _typeof$1(K)==="object"&&K!==null}var escapeCharacters={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},codeBackslash=92,codeOpeningBrace=123,codeClosingBrace=125,codeOpeningBracket=91,codeClosingBracket=93,codeSpace=32,codeNewline=10,codeTab=9,codeReturn=13,codeDoubleQuote=34,codePlus=43,codeMinus=45,codeZero=48,codeOne=49,codeNine=57,codeComma=44,codeDot=46,codeColon=58,codeUppercaseA=65,codeLowercaseA=97,codeUppercaseE=69,codeLowercaseE=101,codeUppercaseF=70,codeLowercaseF=102;function _typeof(K){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},_typeof(K)}function stringify(K,J,ne,oe){var ce=resolveSpace(ne),ue=K;return Ae(ue,"");function Ae(ge,ye){if(Array.isArray(oe)){var Se=oe.find(function(Ne){return Ne.test(ge)});if(Se){var Te=Se.stringify(ge);if(typeof Te!="string"||!isNumber$1(Te))throw new Error("Invalid JSON number: output of a number stringifier must be a string containing a JSON number "+"(output: ".concat(Te,")"));return Te}}if(typeof ge=="boolean"||typeof ge=="number"||typeof ge=="string"||ge===null||ge instanceof Date||ge instanceof Boolean||ge instanceof Number||ge instanceof String)return JSON.stringify(ge);if(ge&&ge.isLosslessNumber||typeof ge=="bigint")return ge.toString();if(Array.isArray(ge))return pe(ge,ye);if(ge&&_typeof(ge)==="object")return xe(ge,ye)}function pe(ge,ye){if(ge.length===0)return"[]";for(var Se=ce?ye+ce:void 0,Te=ce?`[
`:"[",Ne=0;Ne<ge.length;Ne++){var $e=ge[Ne];ce&&(Te+=Se),typeof $e<"u"&&typeof $e!="function"?Te+=Ae($e,Se):Te+="null",Ne<ge.length-1&&(Te+=ce?`,
`:",")}return Te+=ce?`
`+ye+"]":"]",Te}function xe(ge,ye){if(typeof ge.toJSON=="function")return stringify(ge.toJSON(),J,ne,void 0);var Se=Array.isArray(J)?J.map(String):Object.keys(ge);if(Se.length===0)return"{}";var Te=ce?ye+ce:void 0,Ne=!0,$e=ce?`{
`:"{";return Se.forEach(function(ke){var je=ge[ke];if(me(ke,je)){Ne?Ne=!1:$e+=ce?`,
`:",";var Ke=JSON.stringify(ke);$e+=ce?Te+Ke+": ":Ke+":",$e+=Ae(je,Te)}}),$e+=ce?`
`+ye+"}":"}",$e}function me(ge,ye){return typeof ye<"u"&&typeof ye!="function"&&_typeof(ye)!=="symbol"}}function resolveSpace(K){if(typeof K=="number")return" ".repeat(K);if(typeof K=="string"&&K!=="")return K}BigNumber.config({EXPONENTIAL_AT:1e9});const parseStringNumber=K=>isSafeNumber(K)?parseFloat(K):BigNumber(K),deserialize=K=>parse$2(K,void 0,parseStringNumber),bigNumberStringifier={test:K=>BigNumber.isBigNumber(K),stringify:K=>K.valueOf()},serialize=(K,J,ne)=>stringify(K,J,ne,[bigNumberStringifier]);var SimplifiedEnum=(K=>(K.LAYOUT_ELEMENT="LayoutElement",K.LAYOUT_STACK_ELEMENT="LayoutStackElement",K.UI_TYPE_STATE="UiTypeState",K.UI_APP_STATE="UiAppState",K.TYPE_DECL_KEY="TypeDeclKey",K))(SimplifiedEnum||{}),StackEnum=(K=>(K.STACK="stack",K.ROW="row",K.COLUMN="column",K))(StackEnum||{}),DropBoxEnum=(K=>(K.GLOBAL="global",K.INNER="inner",K.TOP="top",K.SINGLE="single",K))(DropBoxEnum||{}),GridTabEnum=(K=>(K.MAIN="main",K))(GridTabEnum||{}),DefaultPanelSize=(K=>(K[K.DEFAULT=50]="DEFAULT",K[K.FULL_VIEW=100]="FULL_VIEW",K))(DefaultPanelSize||{}),LayoutDirection=(K=>(K.VERTICAL="vertical",K.HORIZONTAL="horizontal",K))(LayoutDirection||{});const GRID_TAB={main:{id:"main",key:"main",label:"grid.tabs.main",isClosable:!1,isActive:!0,isCurrentlyDragging:!1,isMainGridTab:!0}},returnDefaultConfig=(K,J=LayoutDirection.VERTICAL)=>{var ne,oe;return{type:J===LayoutDirection.VERTICAL?StackEnum.ROW:StackEnum.COLUMN,key:`${J===LayoutDirection.VERTICAL?"row":"column"}-stack-main`,id:`${J===LayoutDirection.VERTICAL?"row":"column"}-stack-main`,isMainGrid:!1,size:DefaultPanelSize.FULL_VIEW,content:[{type:StackEnum.STACK,key:`stack-${GridTabEnum.MAIN}`,id:`stack-${GridTabEnum.MAIN}`,isMainGrid:!0,size:DefaultPanelSize.DEFAULT,content:[GRID_TAB[GridTabEnum.MAIN]]},{type:StackEnum.STACK,key:`stack-${((ne=K[0])==null?void 0:ne.id)||1}`,id:`stack-${((oe=K[0])==null?void 0:oe.id)||1}`,isMainGrid:!1,size:DefaultPanelSize.DEFAULT,content:K}]}};var ToastTypeEnum=(K=>(K.SUCCESS="success",K.ERROR="error",K.INFO="info",K.WARNING="warning",K))(ToastTypeEnum||{});const addDataToClickboard=K=>{if(navigator.clipboard)return navigator.clipboard.writeText(K);const J=document.createElement("textarea");J.value=K,document.body.appendChild(J),J.focus(),J.select();try{return document.execCommand("copy"),Promise.resolve()}catch(ne){return console.error("Unable to copy to clipboard",ne),Promise.reject(ne)}finally{document.body.removeChild(J)}};let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let K=0;K<256;++K)byteToHex.push((K+256).toString(16).slice(1));function unsafeStringify(K,J=0){return(byteToHex[K[J+0]]+byteToHex[K[J+1]]+byteToHex[K[J+2]]+byteToHex[K[J+3]]+"-"+byteToHex[K[J+4]]+byteToHex[K[J+5]]+"-"+byteToHex[K[J+6]]+byteToHex[K[J+7]]+"-"+byteToHex[K[J+8]]+byteToHex[K[J+9]]+"-"+byteToHex[K[J+10]]+byteToHex[K[J+11]]+byteToHex[K[J+12]]+byteToHex[K[J+13]]+byteToHex[K[J+14]]+byteToHex[K[J+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(K,J,ne){if(native.randomUUID&&!J&&!K)return native.randomUUID();K=K||{};const oe=K.random||(K.rng||rng)();return oe[6]=oe[6]&15|64,oe[8]=oe[8]&63|128,unsafeStringify(oe)}var LogsListViewEnum=(K=>(K.LOGS="logs",K.HANDLERS="handlers",K.ERRORS="errors",K))(LogsListViewEnum||{}),LogsLevelEnum=(K=>(K.CRITICAL="Critical",K.ERROR="Error",K.WARNING="Warning",K.INFO="Info",K.DEBUG="Debug",K))(LogsLevelEnum||{});const initLogsFlatViewFilters=[LogsLevelEnum.DEBUG,LogsLevelEnum.INFO,LogsLevelEnum.WARNING,LogsLevelEnum.ERROR,LogsLevelEnum.CRITICAL],logsFlatViewFiltersList=[{id:1,title:"logsFilter.debug",value:LogsLevelEnum.DEBUG},{id:2,title:"logsFilter.info",value:LogsLevelEnum.INFO},{id:3,title:"logsFilter.warning",value:LogsLevelEnum.WARNING},{id:4,title:"logsFilter.error",value:LogsLevelEnum.ERROR},{id:5,title:"logsFilter.critical",value:LogsLevelEnum.CRITICAL}];LogsLevelEnum.DEBUG,LogsLevelEnum.WARNING,LogsLevelEnum.ERROR,LogsLevelEnum.CRITICAL;const initLogsHandlersViewFilters=[RunHandlerStatusCodeEnum.Submitted,RunHandlerStatusCodeEnum.Running,RunHandlerStatusCodeEnum.Completed,RunHandlerStatusCodeEnum.Failed],logsHandlersViewFiltersList=[{id:1,title:"logsFilter.submitted",value:RunHandlerStatusCodeEnum.Submitted},{id:2,title:"logsFilter.running",value:RunHandlerStatusCodeEnum.Running},{id:3,title:"logsFilter.completed",value:RunHandlerStatusCodeEnum.Completed},{id:4,title:"logsFilter.failed",value:RunHandlerStatusCodeEnum.Failed}];var StorageKeyEnum=(K=>(K.VERSION="version",K.FILTERS="filters",K.SORTING="sorting",K.SHOW_DISCLAIMER_ONCE="showDisclaimerOnce",K.TOAST_DATA="toastData",K.PARAMS_VIEWERS="paramsViewers",K.SESSION_ID="sessionId",K.IS_LOGS_PANEL="isLogsPanel",K.LOGS_FLAT_VIEW_FILTERS="logsFlatViewFilters",K.LOGS_HANDLERS_VIEW_FILTERS="logsHandlersViewFilters",K.LAYOUT_DIRECTION_PER_TYPE="layoutDirection",K.IS_ROW_BORDER="isRowBorder",K.SELECTED_ROW="selectedRow",K.VIEWER_ACTIVE_TAB="viewerActiveTab",K.SECRET_KEYS="secretKeys",K.PROVIDER_ID="providerID",K))(StorageKeyEnum||{}),SessionStorageKeyEnum=(K=>(K.MAIN_GRID_SCROLL="MAIN_GRID_SCROLL",K))(SessionStorageKeyEnum||{});class StorageDictionary extends Map{constructor(ne,oe){super(oe);Xn(this,"key");this.key=ne}static createByKey(ne){const oe=localStorage.getItem(ne);if(oe){const ce=JSON.parse(oe);return isObject$9(ce)?new StorageDictionary(ne,Object.entries(ce)):new StorageDictionary(ne)}return new StorageDictionary(ne)}updateOrDeleteByValue(ne,oe){return oe.length>0?this.set(ne,oe):this.delete(ne),this}save(){localStorage.setItem(this.key,this.toString())}toString(){return JSON.stringify(Object.fromEntries(this.entries()))}}const externalStorage={getVersion:()=>localStorage.getItem(StorageKeyEnum.VERSION),setVersion:K=>localStorage.setItem(StorageKeyEnum.VERSION,K),setFiltersByKey(K,J){StorageDictionary.createByKey(StorageKeyEnum.FILTERS).updateOrDeleteByValue(K,J).save()},getFiltersByKey(K){return StorageDictionary.createByKey(StorageKeyEnum.FILTERS).get(K)??[]},clearFilterByKey(K){const J=StorageDictionary.createByKey(StorageKeyEnum.FILTERS);J.delete(K),J.save()},setSortByKey:(K,J)=>{StorageDictionary.createByKey(StorageKeyEnum.SORTING).updateOrDeleteByValue(K,J).save()},getSortByKey(K){return StorageDictionary.createByKey(StorageKeyEnum.SORTING).get(K)??[]},clearSortByKey(K){const J=StorageDictionary.createByKey(StorageKeyEnum.SORTING);J.delete(K),J.save()},clear(){Object.values(StorageKeyEnum).forEach(K=>localStorage.removeItem(K))},addToast({type:K,id:J,...ne}){const oe=localStorage.getItem(StorageKeyEnum.TOAST_DATA),ce=oe?JSON.parse(oe):{},ue=K in ce?ce[K]:{},Ae={...ce,[K]:{...ue,[J]:ne}};localStorage.setItem(StorageKeyEnum.TOAST_DATA,JSON.stringify(Ae))},getToasts(){const K=localStorage.getItem(StorageKeyEnum.TOAST_DATA);return K?JSON.parse(K):{}},removeToast(K,J){const ne=localStorage.getItem(StorageKeyEnum.TOAST_DATA);if(ne){const oe=JSON.parse(ne);oe&&oe[K]&&oe[K][J]&&delete oe[K][J],localStorage.setItem(StorageKeyEnum.TOAST_DATA,JSON.stringify(oe))}},removeAllTypeToasts(K){const J=localStorage.getItem(StorageKeyEnum.TOAST_DATA);if(J){const oe={...JSON.parse(J),[K]:{}};localStorage.setItem(StorageKeyEnum.TOAST_DATA,JSON.stringify(oe))}},removeAllToasts(){localStorage.setItem(StorageKeyEnum.TOAST_DATA,"")},setParamsViewers(K,J){const ne=localStorage.getItem(StorageKeyEnum.PARAMS_VIEWERS),ce={...ne?JSON.parse(ne):{},[K]:J};localStorage.setItem(StorageKeyEnum.PARAMS_VIEWERS,JSON.stringify(ce))},getParamsViewers(){const K=localStorage.getItem(StorageKeyEnum.PARAMS_VIEWERS);return K?JSON.parse(K):{}},removeParamsViewer(K){const J=localStorage.getItem(StorageKeyEnum.PARAMS_VIEWERS),ne=J?JSON.parse(J):{};K in ne&&delete ne[K],localStorage.setItem(StorageKeyEnum.PARAMS_VIEWERS,JSON.stringify(ne))},removeAllParamsViewers(){localStorage.setItem(StorageKeyEnum.PARAMS_VIEWERS,"")},getSessionId(){return localStorage.getItem(StorageKeyEnum.SESSION_ID)},setSessionId(K){localStorage.setItem(StorageKeyEnum.SESSION_ID,K)},removeSessionId(){localStorage.removeItem(StorageKeyEnum.SESSION_ID)},setIsLogsPanel(K){localStorage.setItem(StorageKeyEnum.IS_LOGS_PANEL,JSON.stringify(K))},getIsLogsPanel(){const K=localStorage.getItem(StorageKeyEnum.IS_LOGS_PANEL);return K?JSON.parse(K):!1},setLogsFlatViewFilters(K){localStorage.setItem(StorageKeyEnum.LOGS_FLAT_VIEW_FILTERS,JSON.stringify(K))},getLogsFlatViewFilters(){const K=localStorage.getItem(StorageKeyEnum.LOGS_FLAT_VIEW_FILTERS);return K?JSON.parse(K):initLogsFlatViewFilters},setLogsHandlersViewFilters(K){localStorage.setItem(StorageKeyEnum.LOGS_HANDLERS_VIEW_FILTERS,JSON.stringify(K))},getLogsHandlersViewFilters(){const K=localStorage.getItem(StorageKeyEnum.LOGS_HANDLERS_VIEW_FILTERS);return K?JSON.parse(K):initLogsHandlersViewFilters},getLayoutDirection(K){const J=localStorage.getItem(StorageKeyEnum.LAYOUT_DIRECTION_PER_TYPE);return(J?JSON.parse(J):{})[K]},setLayoutDirectiom(K,J){const ne=localStorage.getItem(StorageKeyEnum.LAYOUT_DIRECTION_PER_TYPE),ce={...ne?JSON.parse(ne):{},[K]:J};localStorage.setItem(StorageKeyEnum.LAYOUT_DIRECTION_PER_TYPE,JSON.stringify(ce))},clearLayoutDirection(){localStorage.removeItem(StorageKeyEnum.LAYOUT_DIRECTION_PER_TYPE)},setIsRowBorder(K){localStorage.setItem(StorageKeyEnum.IS_ROW_BORDER,JSON.stringify(K))},getIsRowBorder(){const K=localStorage.getItem(StorageKeyEnum.IS_ROW_BORDER);return K?JSON.parse(K):!1},setSelectedRow(K){localStorage.setItem(StorageKeyEnum.SELECTED_ROW,K)},getSelectedRow(){return localStorage.getItem(StorageKeyEnum.SELECTED_ROW)},clearSelectedRow(){localStorage.removeItem(StorageKeyEnum.SELECTED_ROW)},setViewerActiveTab(K){localStorage.setItem(StorageKeyEnum.VIEWER_ACTIVE_TAB,K)},getViewerActiveTab(){return localStorage.getItem(StorageKeyEnum.VIEWER_ACTIVE_TAB)},clearViewerActiveTab(){localStorage.removeItem(StorageKeyEnum.VIEWER_ACTIVE_TAB)},setSecretKeys(K,J){const ne=localStorage.getItem(StorageKeyEnum.SECRET_KEYS);let oe=JSON.parse(ne);if(oe&&Array.isArray(oe))return localStorage.setItem(StorageKeyEnum.SECRET_KEYS,JSON.stringify({}));const ce=btoa(J);oe?oe[ce]=K:K.length&&(oe={[ce]:K}),localStorage.setItem(StorageKeyEnum.SECRET_KEYS,JSON.stringify(oe))},getSecretKeys(K){const J=localStorage.getItem(StorageKeyEnum.SECRET_KEYS),ne=JSON.parse(J),oe=btoa(K);return ne&&Array.isArray(ne)?[]:ne&&ne.hasOwnProperty(oe)?ne[oe]:[]},setMainGridScrollPercent(K){const ne={...JSON.parse(sessionStorage.getItem(SessionStorageKeyEnum.MAIN_GRID_SCROLL)),...K};sessionStorage.setItem(SessionStorageKeyEnum.MAIN_GRID_SCROLL,JSON.stringify(ne))},getMainGridScrollPercent(K){const J=JSON.parse(sessionStorage.getItem(SessionStorageKeyEnum.MAIN_GRID_SCROLL));return J?Number(J[K]):0},removeMainGridScrollPercent(K){const J=JSON.parse(sessionStorage.getItem(SessionStorageKeyEnum.MAIN_GRID_SCROLL));J==null||delete J[K],sessionStorage.setItem(SessionStorageKeyEnum.MAIN_GRID_SCROLL,JSON.stringify(J))},removeAllMainGridScrollPercents(){sessionStorage.removeItem(SessionStorageKeyEnum.MAIN_GRID_SCROLL)},setProviderId(K){localStorage.setItem(StorageKeyEnum.PROVIDER_ID,K)},getProviderId(){return localStorage.getItem(StorageKeyEnum.PROVIDER_ID)},removeProviderId(){localStorage.removeItem(StorageKeyEnum.PROVIDER_ID)}},showToast=K=>{const{type:J,content:ne}=K;externalStorage.addToast({...K,id:v4(),content:J===ToastTypeEnum.ERROR&&ne?getErrorMessage(ne):ne}),window.dispatchEvent(new Event("storage"))},toast={success:(K,J)=>showToast({type:ToastTypeEnum.SUCCESS,content:K,options:J}),error:(K,J)=>showToast({type:ToastTypeEnum.ERROR,content:K,options:J}),warning:(K,J)=>showToast({type:ToastTypeEnum.WARNING,content:K,options:J}),info:(K,J)=>showToast({type:ToastTypeEnum.INFO,content:K,options:J})};var ViewerTypesEnum=(K=>(K.VariantTable="VariantTable",K.BinaryContent="FileData",K.VariantMatrix="VariantMatrix",K.ViewContainer="ViewContainer",K.Script="Script",K.VariantTree="VariantTree",K.FormattedVariantTable="FormattedVariantTable",K.ViewHandlerAction="ViewHandlerAction",K.DAG="DAG",K.Dag="Dag",K.UIViewer="Control",K.HtmlView="HtmlView",K.PdfView="PdfView",K.PngView="PngView",K.CsvView="CsvView",K.EmptyView="EmptyView",K))(ViewerTypesEnum||{}),BinaryContentTypesEnum=(K=>(K.Plotly="Plotly",K.Html="Html",K.Jpg="Jpg",K.Png="Png",K.Pdf="Pdf",K.Xlsx="Xlsx",K.Csv="Csv",K))(BinaryContentTypesEnum||{});const fileToBase64$1=K=>new Promise((J,ne)=>{const oe=new FileReader;oe.readAsDataURL(K),oe.onload=()=>J(oe.result.split(",")[1]),oe.onerror=ne}),base64ToBytes=K=>{const J=window.atob(K),ne=J.length,oe=new Uint8Array(ne);for(let ce=0;ce<ne;ce++)oe[ce]=J.charCodeAt(ce);return oe},getMimeTypeFromBuffer=K=>{const J=new Uint8Array(K),ne=4;if(J.length>=ne){const oe=new Array(ne);for(let ue=0;ue<ne;ue++)oe[ue]=new Uint8Array(K)[ue].toString(16);switch(oe.join("").toUpperCase()){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":return"image/jpeg";case"504B0304":return"application/zip";case"504B34":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";default:return null}}return null};var relativeTime$1={exports:{}};(function(K,J){(function(ne,oe){K.exports=oe()})(commonjsGlobal,function(){return function(ne,oe,ce){ne=ne||{};var ue=oe.prototype,Ae={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function pe(me,ge,ye,Se){return ue.fromToBase(me,ge,ye,Se)}ce.en.relativeTime=Ae,ue.fromToBase=function(me,ge,ye,Se,Te){for(var Ne,$e,ke,je=ye.$locale().relativeTime||Ae,Ke=ne.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],Ye=Ke.length,ze=0;ze<Ye;ze+=1){var Xe=Ke[ze];Xe.d&&(Ne=Se?ce(me).diff(ye,Xe.d,!0):ye.diff(me,Xe.d,!0));var Je=(ne.rounding||Math.round)(Math.abs(Ne));if(ke=Ne>0,Je<=Xe.r||!Xe.r){Je<=1&&ze>0&&(Xe=Ke[ze-1]);var rt=je[Xe.l];Te&&(Je=Te(""+Je)),$e=typeof rt=="string"?rt.replace("%d",Je):rt(Je,ge,Xe.l,ke);break}}if(ge)return $e;var Ze=ke?je.future:je.past;return typeof Ze=="function"?Ze($e):Ze.replace("%s",$e)},ue.to=function(me,ge){return pe(me,ge,this,!0)},ue.from=function(me,ge){return pe(me,ge,this)};var xe=function(me){return me.$u?ce.utc():ce()};ue.toNow=function(me){return this.to(xe(this),me)},ue.fromNow=function(me){return this.from(xe(this),me)}}})})(relativeTime$1);var relativeTimeExports=relativeTime$1.exports;const relativeTime=getDefaultExportFromCjs(relativeTimeExports);var utc$1={exports:{}};(function(K,J){(function(ne,oe){K.exports=oe()})(commonjsGlobal,function(){var ne="minute",oe=/[+-]\d\d(?::?\d\d)?/g,ce=/([+-]|\d\d)/g;return function(ue,Ae,pe){var xe=Ae.prototype;pe.utc=function($e){var ke={date:$e,utc:!0,args:arguments};return new Ae(ke)},xe.utc=function($e){var ke=pe(this.toDate(),{locale:this.$L,utc:!0});return $e?ke.add(this.utcOffset(),ne):ke},xe.local=function(){return pe(this.toDate(),{locale:this.$L,utc:!1})};var me=xe.parse;xe.parse=function($e){$e.utc&&(this.$u=!0),this.$utils().u($e.$offset)||(this.$offset=$e.$offset),me.call(this,$e)};var ge=xe.init;xe.init=function(){if(this.$u){var $e=this.$d;this.$y=$e.getUTCFullYear(),this.$M=$e.getUTCMonth(),this.$D=$e.getUTCDate(),this.$W=$e.getUTCDay(),this.$H=$e.getUTCHours(),this.$m=$e.getUTCMinutes(),this.$s=$e.getUTCSeconds(),this.$ms=$e.getUTCMilliseconds()}else ge.call(this)};var ye=xe.utcOffset;xe.utcOffset=function($e,ke){var je=this.$utils().u;if(je($e))return this.$u?0:je(this.$offset)?ye.call(this):this.$offset;if(typeof $e=="string"&&($e=function(Xe){Xe===void 0&&(Xe="");var Je=Xe.match(oe);if(!Je)return null;var rt=(""+Je[0]).match(ce)||["-",0,0],Ze=rt[0],et=60*+rt[1]+ +rt[2];return et===0?0:Ze==="+"?et:-et}($e),$e===null))return this;var Ke=Math.abs($e)<=16?60*$e:$e,Ye=this;if(ke)return Ye.$offset=Ke,Ye.$u=$e===0,Ye;if($e!==0){var ze=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(Ye=this.local().add(Ke+ze,ne)).$offset=Ke,Ye.$x.$localOffset=ze}else Ye=this.utc();return Ye};var Se=xe.format;xe.format=function($e){var ke=$e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return Se.call(this,ke)},xe.valueOf=function(){var $e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*$e},xe.isUTC=function(){return!!this.$u},xe.toISOString=function(){return this.toDate().toISOString()},xe.toString=function(){return this.toDate().toUTCString()};var Te=xe.toDate;xe.toDate=function($e){return $e==="s"&&this.$offset?pe(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():Te.call(this)};var Ne=xe.diff;xe.diff=function($e,ke,je){if($e&&this.$u===$e.$u)return Ne.call(this,$e,ke,je);var Ke=this.local(),Ye=pe($e).local();return Ne.call(Ke,Ye,ke,je)}}})})(utc$1);var utcExports=utc$1.exports;const utc=getDefaultExportFromCjs(utcExports);dayjs.extend(relativeTime);dayjs.extend(utc);const dateTypesArr=["Date","Time","DateTime"],isDateType=K=>K?dateTypesArr.includes(K):!1;var DateFormatEnum=(K=>(K.DATE="YYYY-MM-DD",K.DATE_TIME="YYYY-MM-DD HH:mm:ss",K.TIME="HH:mm:ss",K.TIME_MS="HH:mm:ss.SSS",K.DATE_TIME_MS="YYYY-MM-DDTHH-mm-ss-SSS",K.DATE_BULLET_TIME="YYYY-MM-DD [] HH:mm:ss",K))(DateFormatEnum||{});function createDateFormatUtility(K,J){const ne=dayjs(K,J);return{format(ce){return ne.format(ce)},subtract(ce,ue){const Ae=ne.clone().subtract(ce,ue);return oe(Ae)},fromNow(ce){return ne.fromNow(ce)},add(ce,ue){const Ae=ne.clone().add(ce,ue);return oe(Ae)},diff(ce,ue,Ae){return ne.diff(ce,ue,Ae)},unix(){return ne.unix()},sort(ce){return ne.isBefore(ce.toInstance())?-1:ne.isAfter(ce.toInstance())?1:0},toDate(){return ne.toDate()},toInstance(){return ne},isValid(){return ne.isValid()},utcString:ne.utc().format()};function oe(ce){return createDateFormatUtility(ce)}}const DateFormatUtility={create:createDateFormatUtility},isAlltabsInLayout=(K,J,ne,oe)=>!ne||!oe?!1:K.length===J.length&&K.every(ce=>J.find(ue=>ue===ce.id)),getErrorMessage=K=>K instanceof Error?parseAxiosErrorMessage(K):isString$2(K)?K:"Unexpected error occurred!",parseAxiosErrorMessage=K=>{const{data:J}=K.response??{};try{if(J){const{Message:ne}=deserialize(J);return isObject$9(ne)?serialize(ne):ne}return K.message}catch{return K.message}};function bind(K,J){return function(){return K.apply(J,arguments)}}const{toString:toString$1}=Object.prototype,{getPrototypeOf}=Object,kindOf=(K=>J=>{const ne=toString$1.call(J);return K[ne]||(K[ne]=ne.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=K=>(K=K.toLowerCase(),J=>kindOf(J)===K),typeOfTest=K=>J=>typeof J===K,{isArray:isArray$5}=Array,isUndefined$1=typeOfTest("undefined");function isBuffer$3(K){return K!==null&&!isUndefined$1(K)&&K.constructor!==null&&!isUndefined$1(K.constructor)&&isFunction$5(K.constructor.isBuffer)&&K.constructor.isBuffer(K)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(K){let J;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?J=ArrayBuffer.isView(K):J=K&&K.buffer&&isArrayBuffer(K.buffer),J}const isString$1=typeOfTest("string"),isFunction$5=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$7=K=>K!==null&&typeof K=="object",isBoolean=K=>K===!0||K===!1,isPlainObject=K=>{if(kindOf(K)!=="object")return!1;const J=getPrototypeOf(K);return(J===null||J===Object.prototype||Object.getPrototypeOf(J)===null)&&!(Symbol.toStringTag in K)&&!(Symbol.iterator in K)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=K=>isObject$7(K)&&isFunction$5(K.pipe),isFormData=K=>{let J;return K&&(typeof FormData=="function"&&K instanceof FormData||isFunction$5(K.append)&&((J=kindOf(K))==="formdata"||J==="object"&&isFunction$5(K.toString)&&K.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=K=>K.trim?K.trim():K.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(K,J,{allOwnKeys:ne=!1}={}){if(K===null||typeof K>"u")return;let oe,ce;if(typeof K!="object"&&(K=[K]),isArray$5(K))for(oe=0,ce=K.length;oe<ce;oe++)J.call(null,K[oe],oe,K);else{const ue=ne?Object.getOwnPropertyNames(K):Object.keys(K),Ae=ue.length;let pe;for(oe=0;oe<Ae;oe++)pe=ue[oe],J.call(null,K[pe],pe,K)}}function findKey(K,J){J=J.toLowerCase();const ne=Object.keys(K);let oe=ne.length,ce;for(;oe-- >0;)if(ce=ne[oe],J===ce.toLowerCase())return ce;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=K=>!isUndefined$1(K)&&K!==_global;function merge$2(){const{caseless:K}=isContextDefined(this)&&this||{},J={},ne=(oe,ce)=>{const ue=K&&findKey(J,ce)||ce;isPlainObject(J[ue])&&isPlainObject(oe)?J[ue]=merge$2(J[ue],oe):isPlainObject(oe)?J[ue]=merge$2({},oe):isArray$5(oe)?J[ue]=oe.slice():J[ue]=oe};for(let oe=0,ce=arguments.length;oe<ce;oe++)arguments[oe]&&forEach$1(arguments[oe],ne);return J}const extend$1=(K,J,ne,{allOwnKeys:oe}={})=>(forEach$1(J,(ce,ue)=>{ne&&isFunction$5(ce)?K[ue]=bind(ce,ne):K[ue]=ce},{allOwnKeys:oe}),K),stripBOM=K=>(K.charCodeAt(0)===65279&&(K=K.slice(1)),K),inherits=(K,J,ne,oe)=>{K.prototype=Object.create(J.prototype,oe),K.prototype.constructor=K,Object.defineProperty(K,"super",{value:J.prototype}),ne&&Object.assign(K.prototype,ne)},toFlatObject=(K,J,ne,oe)=>{let ce,ue,Ae;const pe={};if(J=J||{},K==null)return J;do{for(ce=Object.getOwnPropertyNames(K),ue=ce.length;ue-- >0;)Ae=ce[ue],(!oe||oe(Ae,K,J))&&!pe[Ae]&&(J[Ae]=K[Ae],pe[Ae]=!0);K=ne!==!1&&getPrototypeOf(K)}while(K&&(!ne||ne(K,J))&&K!==Object.prototype);return J},endsWith=(K,J,ne)=>{K=String(K),(ne===void 0||ne>K.length)&&(ne=K.length),ne-=J.length;const oe=K.indexOf(J,ne);return oe!==-1&&oe===ne},toArray$1=K=>{if(!K)return null;if(isArray$5(K))return K;let J=K.length;if(!isNumber(J))return null;const ne=new Array(J);for(;J-- >0;)ne[J]=K[J];return ne},isTypedArray$3=(K=>J=>K&&J instanceof K)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(K,J)=>{const oe=(K&&K[Symbol.iterator]).call(K);let ce;for(;(ce=oe.next())&&!ce.done;){const ue=ce.value;J.call(K,ue[0],ue[1])}},matchAll=(K,J)=>{let ne;const oe=[];for(;(ne=K.exec(J))!==null;)oe.push(ne);return oe},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=K=>K.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(ne,oe,ce){return oe.toUpperCase()+ce}),hasOwnProperty$a=(({hasOwnProperty:K})=>(J,ne)=>K.call(J,ne))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(K,J)=>{const ne=Object.getOwnPropertyDescriptors(K),oe={};forEach$1(ne,(ce,ue)=>{let Ae;(Ae=J(ce,ue,K))!==!1&&(oe[ue]=Ae||ce)}),Object.defineProperties(K,oe)},freezeMethods=K=>{reduceDescriptors(K,(J,ne)=>{if(isFunction$5(K)&&["arguments","caller","callee"].indexOf(ne)!==-1)return!1;const oe=K[ne];if(isFunction$5(oe)){if(J.enumerable=!1,"writable"in J){J.writable=!1;return}J.set||(J.set=()=>{throw Error("Can not rewrite read-only method '"+ne+"'")})}})},toObjectSet=(K,J)=>{const ne={},oe=ce=>{ce.forEach(ue=>{ne[ue]=!0})};return isArray$5(K)?oe(K):oe(String(K).split(J)),ne},noop$4=()=>{},toFiniteNumber=(K,J)=>(K=+K,Number.isFinite(K)?K:J),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(K=16,J=ALPHABET.ALPHA_DIGIT)=>{let ne="";const{length:oe}=J;for(;K--;)ne+=J[Math.random()*oe|0];return ne};function isSpecCompliantForm(K){return!!(K&&isFunction$5(K.append)&&K[Symbol.toStringTag]==="FormData"&&K[Symbol.iterator])}const toJSONObject=K=>{const J=new Array(10),ne=(oe,ce)=>{if(isObject$7(oe)){if(J.indexOf(oe)>=0)return;if(!("toJSON"in oe)){J[ce]=oe;const ue=isArray$5(oe)?[]:{};return forEach$1(oe,(Ae,pe)=>{const xe=ne(Ae,ce+1);!isUndefined$1(xe)&&(ue[pe]=xe)}),J[ce]=void 0,ue}}return oe};return ne(K,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=K=>K&&(isObject$7(K)||isFunction$5(K))&&isFunction$5(K.then)&&isFunction$5(K.catch),utils$6={isArray:isArray$5,isArrayBuffer,isBuffer:isBuffer$3,isFormData,isArrayBufferView,isString:isString$1,isNumber,isBoolean,isObject:isObject$7,isPlainObject,isUndefined:isUndefined$1,isDate,isFile,isBlob,isRegExp:isRegExp$1,isFunction:isFunction$5,isStream,isURLSearchParams,isTypedArray:isTypedArray$3,isFileList,forEach:forEach$1,merge:merge$2,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$1,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$a,hasOwnProp:hasOwnProperty$a,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$4,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError$1(K,J,ne,oe,ce){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=K,this.name="AxiosError",J&&(this.code=J),ne&&(this.config=ne),oe&&(this.request=oe),ce&&(this.response=ce)}utils$6.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$6.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(K=>{descriptors[K]={value:K}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(K,J,ne,oe,ce,ue)=>{const Ae=Object.create(prototype$1);return utils$6.toFlatObject(K,Ae,function(xe){return xe!==Error.prototype},pe=>pe!=="isAxiosError"),AxiosError$1.call(Ae,K.message,J,ne,oe,ce),Ae.cause=K,Ae.name=K.name,ue&&Object.assign(Ae,ue),Ae};const httpAdapter=null;function isVisitable(K){return utils$6.isPlainObject(K)||utils$6.isArray(K)}function removeBrackets(K){return utils$6.endsWith(K,"[]")?K.slice(0,-2):K}function renderKey(K,J,ne){return K?K.concat(J).map(function(ce,ue){return ce=removeBrackets(ce),!ne&&ue?"["+ce+"]":ce}).join(ne?".":""):J}function isFlatArray(K){return utils$6.isArray(K)&&!K.some(isVisitable)}const predicates=utils$6.toFlatObject(utils$6,{},null,function(J){return/^is[A-Z]/.test(J)});function toFormData$1(K,J,ne){if(!utils$6.isObject(K))throw new TypeError("target must be an object");J=J||new FormData,ne=utils$6.toFlatObject(ne,{metaTokens:!0,dots:!1,indexes:!1},!1,function($e,ke){return!utils$6.isUndefined(ke[$e])});const oe=ne.metaTokens,ce=ne.visitor||ge,ue=ne.dots,Ae=ne.indexes,xe=(ne.Blob||typeof Blob<"u"&&Blob)&&utils$6.isSpecCompliantForm(J);if(!utils$6.isFunction(ce))throw new TypeError("visitor must be a function");function me(Ne){if(Ne===null)return"";if(utils$6.isDate(Ne))return Ne.toISOString();if(!xe&&utils$6.isBlob(Ne))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$6.isArrayBuffer(Ne)||utils$6.isTypedArray(Ne)?xe&&typeof Blob=="function"?new Blob([Ne]):Buffer.from(Ne):Ne}function ge(Ne,$e,ke){let je=Ne;if(Ne&&!ke&&typeof Ne=="object"){if(utils$6.endsWith($e,"{}"))$e=oe?$e:$e.slice(0,-2),Ne=JSON.stringify(Ne);else if(utils$6.isArray(Ne)&&isFlatArray(Ne)||(utils$6.isFileList(Ne)||utils$6.endsWith($e,"[]"))&&(je=utils$6.toArray(Ne)))return $e=removeBrackets($e),je.forEach(function(Ye,ze){!(utils$6.isUndefined(Ye)||Ye===null)&&J.append(Ae===!0?renderKey([$e],ze,ue):Ae===null?$e:$e+"[]",me(Ye))}),!1}return isVisitable(Ne)?!0:(J.append(renderKey(ke,$e,ue),me(Ne)),!1)}const ye=[],Se=Object.assign(predicates,{defaultVisitor:ge,convertValue:me,isVisitable});function Te(Ne,$e){if(!utils$6.isUndefined(Ne)){if(ye.indexOf(Ne)!==-1)throw Error("Circular reference detected in "+$e.join("."));ye.push(Ne),utils$6.forEach(Ne,function(je,Ke){(!(utils$6.isUndefined(je)||je===null)&&ce.call(J,je,utils$6.isString(Ke)?Ke.trim():Ke,$e,Se))===!0&&Te(je,$e?$e.concat(Ke):[Ke])}),ye.pop()}}if(!utils$6.isObject(K))throw new TypeError("data must be an object");return Te(K),J}function encode$1(K){const J={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(K).replace(/[!'()~]|%20|%00/g,function(oe){return J[oe]})}function AxiosURLSearchParams(K,J){this._pairs=[],K&&toFormData$1(K,this,J)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(J,ne){this._pairs.push([J,ne])};prototype.toString=function(J){const ne=J?function(oe){return J.call(this,oe,encode$1)}:encode$1;return this._pairs.map(function(ce){return ne(ce[0])+"="+ne(ce[1])},"").join("&")};function encode(K){return encodeURIComponent(K).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(K,J,ne){if(!J)return K;const oe=ne&&ne.encode||encode,ce=ne&&ne.serialize;let ue;if(ce?ue=ce(J,ne):ue=utils$6.isURLSearchParams(J)?J.toString():new AxiosURLSearchParams(J,ne).toString(oe),ue){const Ae=K.indexOf("#");Ae!==-1&&(K=K.slice(0,Ae)),K+=(K.indexOf("?")===-1?"?":"&")+ue}return K}class InterceptorManager{constructor(){this.handlers=[]}use(J,ne,oe){return this.handlers.push({fulfilled:J,rejected:ne,synchronous:oe?oe.synchronous:!1,runWhen:oe?oe.runWhen:null}),this.handlers.length-1}eject(J){this.handlers[J]&&(this.handlers[J]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(J){utils$6.forEach(this.handlers,function(oe){oe!==null&&J(oe)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let K;return typeof navigator<"u"&&((K=navigator.product)==="ReactNative"||K==="NativeScript"||K==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(K,J){return toFormData$1(K,new platform.classes.URLSearchParams,Object.assign({visitor:function(ne,oe,ce,ue){return platform.isNode&&utils$6.isBuffer(ne)?(this.append(oe,ne.toString("base64")),!1):ue.defaultVisitor.apply(this,arguments)}},J))}function parsePropPath(K){return utils$6.matchAll(/\w+|\[(\w*)]/g,K).map(J=>J[0]==="[]"?"":J[1]||J[0])}function arrayToObject(K){const J={},ne=Object.keys(K);let oe;const ce=ne.length;let ue;for(oe=0;oe<ce;oe++)ue=ne[oe],J[ue]=K[ue];return J}function formDataToJSON(K){function J(ne,oe,ce,ue){let Ae=ne[ue++];const pe=Number.isFinite(+Ae),xe=ue>=ne.length;return Ae=!Ae&&utils$6.isArray(ce)?ce.length:Ae,xe?(utils$6.hasOwnProp(ce,Ae)?ce[Ae]=[ce[Ae],oe]:ce[Ae]=oe,!pe):((!ce[Ae]||!utils$6.isObject(ce[Ae]))&&(ce[Ae]=[]),J(ne,oe,ce[Ae],ue)&&utils$6.isArray(ce[Ae])&&(ce[Ae]=arrayToObject(ce[Ae])),!pe)}if(utils$6.isFormData(K)&&utils$6.isFunction(K.entries)){const ne={};return utils$6.forEachEntry(K,(oe,ce)=>{J(parsePropPath(oe),ce,ne,0)}),ne}return null}function stringifySafely(K,J,ne){if(utils$6.isString(K))try{return(J||JSON.parse)(K),utils$6.trim(K)}catch(oe){if(oe.name!=="SyntaxError")throw oe}return(ne||JSON.stringify)(K)}const defaults$2={transitional:transitionalDefaults,adapter:platform.isNode?"http":"xhr",transformRequest:[function(J,ne){const oe=ne.getContentType()||"",ce=oe.indexOf("application/json")>-1,ue=utils$6.isObject(J);if(ue&&utils$6.isHTMLForm(J)&&(J=new FormData(J)),utils$6.isFormData(J))return ce&&ce?JSON.stringify(formDataToJSON(J)):J;if(utils$6.isArrayBuffer(J)||utils$6.isBuffer(J)||utils$6.isStream(J)||utils$6.isFile(J)||utils$6.isBlob(J))return J;if(utils$6.isArrayBufferView(J))return J.buffer;if(utils$6.isURLSearchParams(J))return ne.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),J.toString();let pe;if(ue){if(oe.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(J,this.formSerializer).toString();if((pe=utils$6.isFileList(J))||oe.indexOf("multipart/form-data")>-1){const xe=this.env&&this.env.FormData;return toFormData$1(pe?{"files[]":J}:J,xe&&new xe,this.formSerializer)}}return ue||ce?(ne.setContentType("application/json",!1),stringifySafely(J)):J}],transformResponse:[function(J){const ne=this.transitional||defaults$2.transitional,oe=ne&&ne.forcedJSONParsing,ce=this.responseType==="json";if(J&&utils$6.isString(J)&&(oe&&!this.responseType||ce)){const Ae=!(ne&&ne.silentJSONParsing)&&ce;try{return JSON.parse(J)}catch(pe){if(Ae)throw pe.name==="SyntaxError"?AxiosError$1.from(pe,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):pe}}return J}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(J){return J>=200&&J<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$6.forEach(["delete","get","head","post","put","patch"],K=>{defaults$2.headers[K]={}});const ignoreDuplicateOf=utils$6.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=K=>{const J={};let ne,oe,ce;return K&&K.split(`
`).forEach(function(Ae){ce=Ae.indexOf(":"),ne=Ae.substring(0,ce).trim().toLowerCase(),oe=Ae.substring(ce+1).trim(),!(!ne||J[ne]&&ignoreDuplicateOf[ne])&&(ne==="set-cookie"?J[ne]?J[ne].push(oe):J[ne]=[oe]:J[ne]=J[ne]?J[ne]+", "+oe:oe)}),J},$internals=Symbol("internals");function normalizeHeader(K){return K&&String(K).trim().toLowerCase()}function normalizeValue(K){return K===!1||K==null?K:utils$6.isArray(K)?K.map(normalizeValue):String(K)}function parseTokens(K){const J=Object.create(null),ne=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let oe;for(;oe=ne.exec(K);)J[oe[1]]=oe[2];return J}const isValidHeaderName=K=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(K.trim());function matchHeaderValue(K,J,ne,oe,ce){if(utils$6.isFunction(oe))return oe.call(this,J,ne);if(ce&&(J=ne),!!utils$6.isString(J)){if(utils$6.isString(oe))return J.indexOf(oe)!==-1;if(utils$6.isRegExp(oe))return oe.test(J)}}function formatHeader(K){return K.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(J,ne,oe)=>ne.toUpperCase()+oe)}function buildAccessors(K,J){const ne=utils$6.toCamelCase(" "+J);["get","set","has"].forEach(oe=>{Object.defineProperty(K,oe+ne,{value:function(ce,ue,Ae){return this[oe].call(this,J,ce,ue,Ae)},configurable:!0})})}let AxiosHeaders$1=class{constructor(J){J&&this.set(J)}set(J,ne,oe){const ce=this;function ue(pe,xe,me){const ge=normalizeHeader(xe);if(!ge)throw new Error("header name must be a non-empty string");const ye=utils$6.findKey(ce,ge);(!ye||ce[ye]===void 0||me===!0||me===void 0&&ce[ye]!==!1)&&(ce[ye||xe]=normalizeValue(pe))}const Ae=(pe,xe)=>utils$6.forEach(pe,(me,ge)=>ue(me,ge,xe));return utils$6.isPlainObject(J)||J instanceof this.constructor?Ae(J,ne):utils$6.isString(J)&&(J=J.trim())&&!isValidHeaderName(J)?Ae(parseHeaders(J),ne):J!=null&&ue(ne,J,oe),this}get(J,ne){if(J=normalizeHeader(J),J){const oe=utils$6.findKey(this,J);if(oe){const ce=this[oe];if(!ne)return ce;if(ne===!0)return parseTokens(ce);if(utils$6.isFunction(ne))return ne.call(this,ce,oe);if(utils$6.isRegExp(ne))return ne.exec(ce);throw new TypeError("parser must be boolean|regexp|function")}}}has(J,ne){if(J=normalizeHeader(J),J){const oe=utils$6.findKey(this,J);return!!(oe&&this[oe]!==void 0&&(!ne||matchHeaderValue(this,this[oe],oe,ne)))}return!1}delete(J,ne){const oe=this;let ce=!1;function ue(Ae){if(Ae=normalizeHeader(Ae),Ae){const pe=utils$6.findKey(oe,Ae);pe&&(!ne||matchHeaderValue(oe,oe[pe],pe,ne))&&(delete oe[pe],ce=!0)}}return utils$6.isArray(J)?J.forEach(ue):ue(J),ce}clear(J){const ne=Object.keys(this);let oe=ne.length,ce=!1;for(;oe--;){const ue=ne[oe];(!J||matchHeaderValue(this,this[ue],ue,J,!0))&&(delete this[ue],ce=!0)}return ce}normalize(J){const ne=this,oe={};return utils$6.forEach(this,(ce,ue)=>{const Ae=utils$6.findKey(oe,ue);if(Ae){ne[Ae]=normalizeValue(ce),delete ne[ue];return}const pe=J?formatHeader(ue):String(ue).trim();pe!==ue&&delete ne[ue],ne[pe]=normalizeValue(ce),oe[pe]=!0}),this}concat(...J){return this.constructor.concat(this,...J)}toJSON(J){const ne=Object.create(null);return utils$6.forEach(this,(oe,ce)=>{oe!=null&&oe!==!1&&(ne[ce]=J&&utils$6.isArray(oe)?oe.join(", "):oe)}),ne}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([J,ne])=>J+": "+ne).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(J){return J instanceof this?J:new this(J)}static concat(J,...ne){const oe=new this(J);return ne.forEach(ce=>oe.set(ce)),oe}static accessor(J){const oe=(this[$internals]=this[$internals]={accessors:{}}).accessors,ce=this.prototype;function ue(Ae){const pe=normalizeHeader(Ae);oe[pe]||(buildAccessors(ce,Ae),oe[pe]=!0)}return utils$6.isArray(J)?J.forEach(ue):ue(J),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$6.reduceDescriptors(AxiosHeaders$1.prototype,({value:K},J)=>{let ne=J[0].toUpperCase()+J.slice(1);return{get:()=>K,set(oe){this[ne]=oe}}});utils$6.freezeMethods(AxiosHeaders$1);function transformData(K,J){const ne=this||defaults$2,oe=J||ne,ce=AxiosHeaders$1.from(oe.headers);let ue=oe.data;return utils$6.forEach(K,function(pe){ue=pe.call(ne,ue,ce.normalize(),J?J.status:void 0)}),ce.normalize(),ue}function isCancel$1(K){return!!(K&&K.__CANCEL__)}function CanceledError$1(K,J,ne){AxiosError$1.call(this,K??"canceled",AxiosError$1.ERR_CANCELED,J,ne),this.name="CanceledError"}utils$6.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(K,J,ne){const oe=ne.config.validateStatus;!ne.status||!oe||oe(ne.status)?K(ne):J(new AxiosError$1("Request failed with status code "+ne.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(ne.status/100)-4],ne.config,ne.request,ne))}const cookies=platform.isStandardBrowserEnv?function(){return{write:function(ne,oe,ce,ue,Ae,pe){const xe=[];xe.push(ne+"="+encodeURIComponent(oe)),utils$6.isNumber(ce)&&xe.push("expires="+new Date(ce).toGMTString()),utils$6.isString(ue)&&xe.push("path="+ue),utils$6.isString(Ae)&&xe.push("domain="+Ae),pe===!0&&xe.push("secure"),document.cookie=xe.join("; ")},read:function(ne){const oe=document.cookie.match(new RegExp("(^|;\\s*)("+ne+")=([^;]*)"));return oe?decodeURIComponent(oe[3]):null},remove:function(ne){this.write(ne,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(K){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(K)}function combineURLs(K,J){return J?K.replace(/\/+$/,"")+"/"+J.replace(/^\/+/,""):K}function buildFullPath(K,J){return K&&!isAbsoluteURL(J)?combineURLs(K,J):J}const isURLSameOrigin=platform.isStandardBrowserEnv?function(){const J=/(msie|trident)/i.test(navigator.userAgent),ne=document.createElement("a");let oe;function ce(ue){let Ae=ue;return J&&(ne.setAttribute("href",Ae),Ae=ne.href),ne.setAttribute("href",Ae),{href:ne.href,protocol:ne.protocol?ne.protocol.replace(/:$/,""):"",host:ne.host,search:ne.search?ne.search.replace(/^\?/,""):"",hash:ne.hash?ne.hash.replace(/^#/,""):"",hostname:ne.hostname,port:ne.port,pathname:ne.pathname.charAt(0)==="/"?ne.pathname:"/"+ne.pathname}}return oe=ce(window.location.href),function(Ae){const pe=utils$6.isString(Ae)?ce(Ae):Ae;return pe.protocol===oe.protocol&&pe.host===oe.host}}():function(){return function(){return!0}}();function parseProtocol(K){const J=/^([-+\w]{1,25})(:?\/\/|:)/.exec(K);return J&&J[1]||""}function speedometer(K,J){K=K||10;const ne=new Array(K),oe=new Array(K);let ce=0,ue=0,Ae;return J=J!==void 0?J:1e3,function(xe){const me=Date.now(),ge=oe[ue];Ae||(Ae=me),ne[ce]=xe,oe[ce]=me;let ye=ue,Se=0;for(;ye!==ce;)Se+=ne[ye++],ye=ye%K;if(ce=(ce+1)%K,ce===ue&&(ue=(ue+1)%K),me-Ae<J)return;const Te=ge&&me-ge;return Te?Math.round(Se*1e3/Te):void 0}}function progressEventReducer(K,J){let ne=0;const oe=speedometer(50,250);return ce=>{const ue=ce.loaded,Ae=ce.lengthComputable?ce.total:void 0,pe=ue-ne,xe=oe(pe),me=ue<=Ae;ne=ue;const ge={loaded:ue,total:Ae,progress:Ae?ue/Ae:void 0,bytes:pe,rate:xe||void 0,estimated:xe&&Ae&&me?(Ae-ue)/xe:void 0,event:ce};ge[J?"download":"upload"]=!0,K(ge)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(K){return new Promise(function(ne,oe){let ce=K.data;const ue=AxiosHeaders$1.from(K.headers).normalize(),Ae=K.responseType;let pe;function xe(){K.cancelToken&&K.cancelToken.unsubscribe(pe),K.signal&&K.signal.removeEventListener("abort",pe)}utils$6.isFormData(ce)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv?ue.setContentType(!1):ue.setContentType("multipart/form-data;",!1));let me=new XMLHttpRequest;if(K.auth){const Te=K.auth.username||"",Ne=K.auth.password?unescape(encodeURIComponent(K.auth.password)):"";ue.set("Authorization","Basic "+btoa(Te+":"+Ne))}const ge=buildFullPath(K.baseURL,K.url);me.open(K.method.toUpperCase(),buildURL(ge,K.params,K.paramsSerializer),!0),me.timeout=K.timeout;function ye(){if(!me)return;const Te=AxiosHeaders$1.from("getAllResponseHeaders"in me&&me.getAllResponseHeaders()),$e={data:!Ae||Ae==="text"||Ae==="json"?me.responseText:me.response,status:me.status,statusText:me.statusText,headers:Te,config:K,request:me};settle(function(je){ne(je),xe()},function(je){oe(je),xe()},$e),me=null}if("onloadend"in me?me.onloadend=ye:me.onreadystatechange=function(){!me||me.readyState!==4||me.status===0&&!(me.responseURL&&me.responseURL.indexOf("file:")===0)||setTimeout(ye)},me.onabort=function(){me&&(oe(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,K,me)),me=null)},me.onerror=function(){oe(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,K,me)),me=null},me.ontimeout=function(){let Ne=K.timeout?"timeout of "+K.timeout+"ms exceeded":"timeout exceeded";const $e=K.transitional||transitionalDefaults;K.timeoutErrorMessage&&(Ne=K.timeoutErrorMessage),oe(new AxiosError$1(Ne,$e.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,K,me)),me=null},platform.isStandardBrowserEnv){const Te=(K.withCredentials||isURLSameOrigin(ge))&&K.xsrfCookieName&&cookies.read(K.xsrfCookieName);Te&&ue.set(K.xsrfHeaderName,Te)}ce===void 0&&ue.setContentType(null),"setRequestHeader"in me&&utils$6.forEach(ue.toJSON(),function(Ne,$e){me.setRequestHeader($e,Ne)}),utils$6.isUndefined(K.withCredentials)||(me.withCredentials=!!K.withCredentials),Ae&&Ae!=="json"&&(me.responseType=K.responseType),typeof K.onDownloadProgress=="function"&&me.addEventListener("progress",progressEventReducer(K.onDownloadProgress,!0)),typeof K.onUploadProgress=="function"&&me.upload&&me.upload.addEventListener("progress",progressEventReducer(K.onUploadProgress)),(K.cancelToken||K.signal)&&(pe=Te=>{me&&(oe(!Te||Te.type?new CanceledError$1(null,K,me):Te),me.abort(),me=null)},K.cancelToken&&K.cancelToken.subscribe(pe),K.signal&&(K.signal.aborted?pe():K.signal.addEventListener("abort",pe)));const Se=parseProtocol(ge);if(Se&&platform.protocols.indexOf(Se)===-1){oe(new AxiosError$1("Unsupported protocol "+Se+":",AxiosError$1.ERR_BAD_REQUEST,K));return}me.send(ce||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$6.forEach(knownAdapters,(K,J)=>{if(K){try{Object.defineProperty(K,"name",{value:J})}catch{}Object.defineProperty(K,"adapterName",{value:J})}});const adapters={getAdapter:K=>{K=utils$6.isArray(K)?K:[K];const{length:J}=K;let ne,oe;for(let ce=0;ce<J&&(ne=K[ce],!(oe=utils$6.isString(ne)?knownAdapters[ne.toLowerCase()]:ne));ce++);if(!oe)throw oe===!1?new AxiosError$1(`Adapter ${ne} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils$6.hasOwnProp(knownAdapters,ne)?`Adapter '${ne}' is not available in the build`:`Unknown adapter '${ne}'`);if(!utils$6.isFunction(oe))throw new TypeError("adapter is not a function");return oe},adapters:knownAdapters};function throwIfCancellationRequested(K){if(K.cancelToken&&K.cancelToken.throwIfRequested(),K.signal&&K.signal.aborted)throw new CanceledError$1(null,K)}function dispatchRequest(K){return throwIfCancellationRequested(K),K.headers=AxiosHeaders$1.from(K.headers),K.data=transformData.call(K,K.transformRequest),["post","put","patch"].indexOf(K.method)!==-1&&K.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(K.adapter||defaults$2.adapter)(K).then(function(oe){return throwIfCancellationRequested(K),oe.data=transformData.call(K,K.transformResponse,oe),oe.headers=AxiosHeaders$1.from(oe.headers),oe},function(oe){return isCancel$1(oe)||(throwIfCancellationRequested(K),oe&&oe.response&&(oe.response.data=transformData.call(K,K.transformResponse,oe.response),oe.response.headers=AxiosHeaders$1.from(oe.response.headers))),Promise.reject(oe)})}const headersToObject=K=>K instanceof AxiosHeaders$1?K.toJSON():K;function mergeConfig$1(K,J){J=J||{};const ne={};function oe(me,ge,ye){return utils$6.isPlainObject(me)&&utils$6.isPlainObject(ge)?utils$6.merge.call({caseless:ye},me,ge):utils$6.isPlainObject(ge)?utils$6.merge({},ge):utils$6.isArray(ge)?ge.slice():ge}function ce(me,ge,ye){if(utils$6.isUndefined(ge)){if(!utils$6.isUndefined(me))return oe(void 0,me,ye)}else return oe(me,ge,ye)}function ue(me,ge){if(!utils$6.isUndefined(ge))return oe(void 0,ge)}function Ae(me,ge){if(utils$6.isUndefined(ge)){if(!utils$6.isUndefined(me))return oe(void 0,me)}else return oe(void 0,ge)}function pe(me,ge,ye){if(ye in J)return oe(me,ge);if(ye in K)return oe(void 0,me)}const xe={url:ue,method:ue,data:ue,baseURL:Ae,transformRequest:Ae,transformResponse:Ae,paramsSerializer:Ae,timeout:Ae,timeoutMessage:Ae,withCredentials:Ae,adapter:Ae,responseType:Ae,xsrfCookieName:Ae,xsrfHeaderName:Ae,onUploadProgress:Ae,onDownloadProgress:Ae,decompress:Ae,maxContentLength:Ae,maxBodyLength:Ae,beforeRedirect:Ae,transport:Ae,httpAgent:Ae,httpsAgent:Ae,cancelToken:Ae,socketPath:Ae,responseEncoding:Ae,validateStatus:pe,headers:(me,ge)=>ce(headersToObject(me),headersToObject(ge),!0)};return utils$6.forEach(Object.keys(Object.assign({},K,J)),function(ge){const ye=xe[ge]||ce,Se=ye(K[ge],J[ge],ge);utils$6.isUndefined(Se)&&ye!==pe||(ne[ge]=Se)}),ne}const VERSION$2="1.5.0",validators$3={};["object","boolean","number","function","string","symbol"].forEach((K,J)=>{validators$3[K]=function(oe){return typeof oe===K||"a"+(J<1?"n ":" ")+K}});const deprecatedWarnings={};validators$3.transitional=function(J,ne,oe){function ce(ue,Ae){return"[Axios v"+VERSION$2+"] Transitional option '"+ue+"'"+Ae+(oe?". "+oe:"")}return(ue,Ae,pe)=>{if(J===!1)throw new AxiosError$1(ce(Ae," has been removed"+(ne?" in "+ne:"")),AxiosError$1.ERR_DEPRECATED);return ne&&!deprecatedWarnings[Ae]&&(deprecatedWarnings[Ae]=!0,console.warn(ce(Ae," has been deprecated since v"+ne+" and will be removed in the near future"))),J?J(ue,Ae,pe):!0}};function assertOptions(K,J,ne){if(typeof K!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const oe=Object.keys(K);let ce=oe.length;for(;ce-- >0;){const ue=oe[ce],Ae=J[ue];if(Ae){const pe=K[ue],xe=pe===void 0||Ae(pe,ue,K);if(xe!==!0)throw new AxiosError$1("option "+ue+" must be "+xe,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(ne!==!0)throw new AxiosError$1("Unknown option "+ue,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$3},validators$2=validator.validators;let Axios$1=class{constructor(J){this.defaults=J,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}request(J,ne){typeof J=="string"?(ne=ne||{},ne.url=J):ne=J||{},ne=mergeConfig$1(this.defaults,ne);const{transitional:oe,paramsSerializer:ce,headers:ue}=ne;oe!==void 0&&validator.assertOptions(oe,{silentJSONParsing:validators$2.transitional(validators$2.boolean),forcedJSONParsing:validators$2.transitional(validators$2.boolean),clarifyTimeoutError:validators$2.transitional(validators$2.boolean)},!1),ce!=null&&(utils$6.isFunction(ce)?ne.paramsSerializer={serialize:ce}:validator.assertOptions(ce,{encode:validators$2.function,serialize:validators$2.function},!0)),ne.method=(ne.method||this.defaults.method||"get").toLowerCase();let Ae=ue&&utils$6.merge(ue.common,ue[ne.method]);ue&&utils$6.forEach(["delete","get","head","post","put","patch","common"],Ne=>{delete ue[Ne]}),ne.headers=AxiosHeaders$1.concat(Ae,ue);const pe=[];let xe=!0;this.interceptors.request.forEach(function($e){typeof $e.runWhen=="function"&&$e.runWhen(ne)===!1||(xe=xe&&$e.synchronous,pe.unshift($e.fulfilled,$e.rejected))});const me=[];this.interceptors.response.forEach(function($e){me.push($e.fulfilled,$e.rejected)});let ge,ye=0,Se;if(!xe){const Ne=[dispatchRequest.bind(this),void 0];for(Ne.unshift.apply(Ne,pe),Ne.push.apply(Ne,me),Se=Ne.length,ge=Promise.resolve(ne);ye<Se;)ge=ge.then(Ne[ye++],Ne[ye++]);return ge}Se=pe.length;let Te=ne;for(ye=0;ye<Se;){const Ne=pe[ye++],$e=pe[ye++];try{Te=Ne(Te)}catch(ke){$e.call(this,ke);break}}try{ge=dispatchRequest.call(this,Te)}catch(Ne){return Promise.reject(Ne)}for(ye=0,Se=me.length;ye<Se;)ge=ge.then(me[ye++],me[ye++]);return ge}getUri(J){J=mergeConfig$1(this.defaults,J);const ne=buildFullPath(J.baseURL,J.url);return buildURL(ne,J.params,J.paramsSerializer)}};utils$6.forEach(["delete","get","head","options"],function(J){Axios$1.prototype[J]=function(ne,oe){return this.request(mergeConfig$1(oe||{},{method:J,url:ne,data:(oe||{}).data}))}});utils$6.forEach(["post","put","patch"],function(J){function ne(oe){return function(ue,Ae,pe){return this.request(mergeConfig$1(pe||{},{method:J,headers:oe?{"Content-Type":"multipart/form-data"}:{},url:ue,data:Ae}))}}Axios$1.prototype[J]=ne(),Axios$1.prototype[J+"Form"]=ne(!0)});let CancelToken$1=class qi{constructor(J){if(typeof J!="function")throw new TypeError("executor must be a function.");let ne;this.promise=new Promise(function(ue){ne=ue});const oe=this;this.promise.then(ce=>{if(!oe._listeners)return;let ue=oe._listeners.length;for(;ue-- >0;)oe._listeners[ue](ce);oe._listeners=null}),this.promise.then=ce=>{let ue;const Ae=new Promise(pe=>{oe.subscribe(pe),ue=pe}).then(ce);return Ae.cancel=function(){oe.unsubscribe(ue)},Ae},J(function(ue,Ae,pe){oe.reason||(oe.reason=new CanceledError$1(ue,Ae,pe),ne(oe.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(J){if(this.reason){J(this.reason);return}this._listeners?this._listeners.push(J):this._listeners=[J]}unsubscribe(J){if(!this._listeners)return;const ne=this._listeners.indexOf(J);ne!==-1&&this._listeners.splice(ne,1)}static source(){let J;return{token:new qi(function(ce){J=ce}),cancel:J}}};function spread$1(K){return function(ne){return K.apply(null,ne)}}function isAxiosError$1(K){return utils$6.isObject(K)&&K.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([K,J])=>{HttpStatusCode$1[J]=K});function createInstance(K){const J=new Axios$1(K),ne=bind(Axios$1.prototype.request,J);return utils$6.extend(ne,Axios$1.prototype,J,{allOwnKeys:!0}),utils$6.extend(ne,J,null,{allOwnKeys:!0}),ne.create=function(ce){return createInstance(mergeConfig$1(K,ce))},ne}const axios=createInstance(defaults$2);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$2;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(J){return Promise.all(J)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=K=>formDataToJSON(utils$6.isHTMLForm(K)?new FormData(K):K);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION:VERSION$1,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,__vite_import_meta_env__$1={BASE_URL:"/",CL_API_HOST:"",CL_API_PORT:"",CL_API_PROTOCOL:"",CL_API_URL:"",CL_APP_NAME:"UI React",CL_APP_TITLE:"CompatibL UI",CL_BASENAME:"/app",CL_BUILD_ENV:"C:\\CL.Build.Utilities\\bin",CL_CHAT_ABOUT_ON:"true",CL_DEFAULT_THEME:"Blue",CL_FEEDBACK_EMAIL:"andriik@compatibl.com",CL_FRONTEND_VERSION:"Default version",CL_FULL_SCREEN_HANDLERS:"true",CL_FULL_SCREEN_NAVIGATION:"true",CL_GOOGLE_TAG_MANAGER_ID:"",CL_GRID_MAX_LINES:"1",CL_HIDE_EMPTY_COLUMNS:"true",CL_REFRESH_ON_ALL_HANDLERS:"false",CL_SCHEMA_VERSION:"1.9.0",CL_SIMPLIFIED_BUILD:"true",DEV:!1,MODE:"prod",PROD:!0,SSR:!1},getEnv$1=K=>{var J;return(J=__vite_import_meta_env__$1==null?void 0:__vite_import_meta_env__$1[K])==null?void 0:J.trim()},getBoolEnv=K=>getEnv$1(K)==="true",getApiUrl=()=>{const K=getEnv$1("CL_API_URL"),J=getEnv$1("CL_API_PREFIX");if(K)return`${K}${J||""}`;const ne=getEnv$1("CL_API_PROTOCOL")||location.protocol,oe=getEnv$1("CL_API_HOST")||location.hostname,ce=getEnv$1("CL_API_PORT")||location.port;return`${ne}//${oe}${ce?`:${ce}`:""}${J||""}`},env={apiUrl:getApiUrl(),baseName:getEnv$1("CL_BASENAME"),frontendVersion:getEnv$1("CL_FRONTEND_VERSION"),feedBackEmail:getEnv$1("CL_FEEDBACK_EMAIL"),defaultTheme:getEnv$1("CL_DEFAULT_THEME"),isChatAboutOn:getBoolEnv("CL_CHAT_ABOUT_ON"),isRefreshOnHandlerSuccess:getEnv$1("CL_REFRESH_ON_ALL_HANDLERS"),gridMaxLines:getEnv$1("CL_GRID_MAX_LINES"),hideEmptyColumns:getEnv$1("CL_HIDE_EMPTY_COLUMNS"),defaultName:getEnv$1("CL_APP_NAME"),isFullScreenNavigation:getBoolEnv("CL_FULL_SCREEN_NAVIGATION"),isFullScreenHandlers:getBoolEnv("CL_FULL_SCREEN_HANDLERS"),userKeyExpire:getEnv$1("CL_USER_KEYS_EXPIRE"),schemaVersion:getEnv$1("CL_SCHEMA_VERSION"),googleTagManagerId:getEnv$1("CL_GOOGLE_TAG_MANAGER_ID"),isSimplifiedBuild:getBoolEnv("CL_SIMPLIFIED_BUILD")},selectSchemaTypes=K=>K.SchemaTypesSliceReducer,selectActiveDataset$1=K=>K.DatasetDataSliceReducer.datasetData.activeDatasetName,selectDatasetData=K=>K.DatasetDataSliceReducer.datasetData,selectStore$1=K=>K.AppStateSliceReducer,selectActiveTab=createSelector(selectStore$1,K=>K.activeTab),selectOpenedTabs=createSelector(selectStore$1,K=>K.openedTabs),selectIsReadonly=createSelector(selectStore$1,K=>K.isReadonly),selectApplicationTheme=createSelector(selectStore$1,K=>K.applicationTheme),selectActiveTabIndex=createSelector(selectStore$1,K=>K.activeTabIndex),selectFullScreenMode=createSelector(selectStore$1,K=>K.fullScreenMode),selectUserSecretIdentifiers=createSelector(selectStore$1,K=>K.userSecretIdentifiers);createSelector(selectStore$1,K=>K.authType);const selectUser=createSelector(selectStore$1,K=>K.user),selectIsLogoutLink=createSelector(selectStore$1,K=>K.isLogoutLink),selectProviders=createSelector(selectStore$1,K=>K.providers),selectIsAuthenticated=createSelector(selectStore$1,K=>K.isAuthenticated),selectStore=K=>K.SettingsDataSliceReducer,selectApplicationName=createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.ApplicationName}),selectVersions=createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.Versions}),selectEnvLabel=createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.Environment}),selectActiveEnvironment=createSelector(selectStore,K=>K.activeEnvironment),selectEnvironmentList=createSelector(selectStore,K=>K.environmentList),selectSchemaVersion=createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.SchemaVersion}),selectIsDatasetSupport=createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.DatasetSupport}),selectIsDemoMode=createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.DemoMode});createSelector(selectStore,K=>{var J;return(J=K.settings.data)==null?void 0:J.SessionId});function generateHeaders(){const K=store.getState(),{user:J}=selectStore$1(K),ne=selectActiveDataset$1(K),oe=selectActiveEnvironment(K);return{...ne&&{Dataset:ne},...oe&&{Environment:oe},...J&&{user:J.id},Locale:navigator.language,Timezone:new Date().getTimezoneOffset().toString()}}const createRefreshAndRetryQueue=()=>{let K=[];return{iterate(J){K.forEach(J)},enqueue(J){K.push(J)},clear(){K=[]}}};let navigate;const setNavigate=K=>{navigate=K},getNavigate=()=>{if(!navigate)throw new Error("Navigate function not set");return navigate},createRoute=(K,J=ne=>generatePath(K,ne))=>({path:K,build:J,go:oe=>{getNavigate()(J(oe))}}),routes={root:createRoute("/"),app:createRoute("/:environment?/:activeTab?"),login:createRoute("/login"),loginCallback:createRoute("login/callback"),forbidden:createRoute("/forbidden"),serverError:createRoute("/server-error"),serverUnavailable:createRoute("/server-unavailable"),notFound:createRoute("/404"),versionError:createRoute("/version-error")},generateTabsParams=K=>K.map(({id:J,tableKey:ne})=>ne?{TableName:ne,TypeName:J}:{TableName:J}),initialState$7={status:LoadingStatusesEnum.INITIAL,isReadonly:!1,applicationTheme:env.defaultTheme,openedTabs:[],activeTab:"",fullScreenMode:!1,user:null,authType:null,isLogoutLink:!1,providers:[],isAuthenticated:!1},updateAppState=async K=>{if(K.user)try{await storageApi.saveEntity({data:[{ApplicationTheme:K.applicationTheme,OpenedTabs:generateTabsParams(K.openedTabs),ActiveTabIndex:K.activeTabIndex,User:K.user.id,ReadOnly:K.isReadonly,FullScreenMode:K.fullScreenMode,UserSecretIdentifiers:K.userSecretIdentifiers,_t:"UiAppState"}]})}catch(J){toast.error(J)}},AppState=createSlice({name:"AppState",initialState:initialState$7,reducers:{setAppState(K,J){var Te,Ne,$e,ke,je,Ke,Ye,ze,Xe;const{OpenedTabs:ne=[],ReadOnly:oe=!1,FullScreenMode:ce=!1,UserSecretIdentifiers:ue=[],ApplicationTheme:Ae,availableTypes:pe,isBasicType:xe}=J.payload||{},me=((Te=J.payload)==null?void 0:Te.ActiveTabIndex)||0,ge=K.openedTabs.map(Je=>Je.key),ye=(ne==null?void 0:ne.filter(Je=>ge.indexOf(Je.TypeName??Je.TableName)===-1).map(({TypeName:Je,TableName:rt})=>{var nt;const Ze=Je??rt,et=((nt=pe.find(Ge=>Ge.id===rt))==null?void 0:nt.label)??"";return{id:Ze,label:et,key:Ze,tableKey:Je?rt:"",tableName:et}}))||[],Se=K.activeTab===(($e=(Ne=K.openedTabs)==null?void 0:Ne[me])==null?void 0:$e.id);if(K.openedTabs=K.openedTabs.concat(ye),K.status=LoadingStatusesEnum.SUCCESS,K.fullScreenMode=K.activeTab?ce:!1,K.isReadonly=oe,K.userSecretIdentifiers=ue,K.applicationTheme=Ae??env.defaultTheme,Se&&(K.activeTab=(je=(ke=K.openedTabs)==null?void 0:ke[me])==null?void 0:je.id,K.activeTabIndex=me),!Se){const Je=K.openedTabs.findIndex(rt=>rt.id===K.activeTab);if(Je>=0)K.activeTab=(Ye=(Ke=K.openedTabs)==null?void 0:Ke[Je])==null?void 0:Ye.id,K.activeTabIndex=Je,updateAppState(K);else{const rt=pe.findIndex(Ze=>Ze.id===K.activeTab);if(rt>=0){const Ze=pe[rt];K.activeTab=Ze.id,K.openedTabs=[...K.openedTabs,Ze],K.activeTabIndex=K.openedTabs.length-1,updateAppState(K)}else K.activeTab=(Xe=(ze=K.openedTabs)==null?void 0:ze[me])==null?void 0:Xe.id,K.activeTabIndex=me}}K.fullScreenMode&&!xe&&(K.fullScreenMode=!1)},setUser(K,J){K.user=J.payload},setTabs(K,J){const ne=J.payload;ne.length===0?K.openedTabs=initialState$7.openedTabs:K.openedTabs=ne},openTab(K,J){var Te;const{payload:ne}=J,{openedTabs:oe}=K,{id:ce,key:ue,label:Ae,tableKey:pe,tableName:xe}=ne,me={...ne,label:xe??Ae},ge=oe.length?oe.map(Ne=>Ne.key===pe||Ne.key===ue||Ne.tableKey===ue||isDefined$1(Ne.tableKey)&&Ne.tableKey===pe?{...ne,label:xe??Ae}:Ne):[me],ye=ge.findIndex(Ne=>Ne.id===ce),Se=ge.find(Ne=>Ne.id===ce);K.activeTabIndex=ye>=0?ye:0,K.activeTab=(Se==null?void 0:Se.id)??((Te=ge==null?void 0:ge[0])==null?void 0:Te.id)??"",K.openedTabs=ye>=0?ge:[...ge,me]},closeTab(K,J){K.openedTabs=K.openedTabs.filter(ne=>ne.id!==J.payload.id)},setActiveTab(K,J){K.activeTab=J.payload.id},setApplicationTheme(K,J){K.applicationTheme=J.payload},updateActiveTabIndex(K,J){K.activeTabIndex=K.openedTabs.findIndex(ne=>ne.id===J.payload.id)},saveAppState(K,J){if(K.user)try{storageApi.saveEntity({dataset:J.payload||"",data:[{ApplicationTheme:K.applicationTheme,OpenedTabs:generateTabsParams(K.openedTabs),ActiveTabIndex:K.activeTabIndex,User:K.user.id,ReadOnly:K.isReadonly,FullScreenMode:K.fullScreenMode,UserSecretIdentifiers:K.userSecretIdentifiers,_t:"UiAppState"}]})}catch(ne){toast.error(ne)}},setFullScreenMode(K,J){K.fullScreenMode=J.payload},setIsLogoutLink(K,J){K.isLogoutLink=J.payload},setProviders(K,J){K.providers=J.payload},setIsAuthenticated(K,J){K.isAuthenticated=J.payload},updateAppReadOnly(K,J){K.isReadonly=J.payload}}}),{setUser,setAppState,setTabs,setActiveTab,openTab,closeTab,saveAppState,setApplicationTheme,updateActiveTabIndex,setFullScreenMode,setIsLogoutLink,setProviders,setIsAuthenticated,updateAppReadOnly}=AppState.actions,{reducer:AppStateSliceReducer}=AppState,APP_NAME="CompatibL",initialState$6={settings:{data:{SchemaVersion:"",ApplicationName:APP_NAME,Environment:"",Versions:null,DatasetSupport:!1,DemoMode:!1,SessionId:""}},environmentList:[],activeEnvironment:""},SettingsDataSlice=createSlice({name:"settingsData",initialState:initialState$6,reducers:{setActiveEnvironment(K,J){const ne=()=>{const oe=K.environmentList,ce=oe==null?void 0:oe[0];if(J.payload){const ue=oe==null?void 0:oe.find(Ae=>Ae.Name===J.payload);if(ue)return ue.Name}return ce?ce.Name:""};K.activeEnvironment=ne()},setSettings(K,J){const{ApplicationName:ne,Versions:oe,...ce}=J.payload;let ue="";oe&&(ue=Object.keys(oe)[0].split(".")[0]+".frontend"),K.settings.data={...K.settings.data,Versions:{[ue]:env.frontendVersion,...oe},...ce,ApplicationName:isDefined$1(ne)?ne:APP_NAME}},setEnvironmentList(K,J){K.environmentList=J.payload}}}),{setSettings,setActiveEnvironment,setEnvironmentList}=SettingsDataSlice.actions,SettingsDataSliceReducer=SettingsDataSlice.reducer,createAuthService=()=>{const K=async()=>{dispatch$1(setUser(await authApi.profile()))},J=async pe=>{const xe=await settingsApi.getSettings(),me=externalStorage.getSessionId();if(me!==null&&me!==(xe==null?void 0:xe.SessionId)&&!pe)return oe();dispatch$1(setSettings(xe)),externalStorage.setSessionId(xe.SessionId);const ye=await storageApi.getEnvs();dispatch$1(setEnvironmentList(ye)),dispatch$1(setActiveEnvironment(ye==null?void 0:ye[0].Name))},ne=()=>dispatch$1(setUser(null)),oe=async()=>{let pe="";const xe=externalStorage.getProviderId(),me=await authApi.getTypes();if(!xe){ne(),externalStorage.removeSessionId(),window.location.pathname="/";return}try{const ge=await authApi.getLogoutRedirect(xe);pe=ge==null?void 0:ge.RedirectUrl}catch(ge){console.error(ge);return}finally{dispatch$1(setProviders(me))}isDefined$1(pe)&&pe.length&&(dispatch$1(setIsLogoutLink(!0)),window.location.href=pe),ne(),externalStorage.removeSessionId(),externalStorage.removeProviderId(),dispatch$1(setIsAuthenticated(!1))},ce=async()=>{try{const pe=externalStorage.getProviderId();await authApi.refreshToken(pe||""),dispatch$1(setIsAuthenticated(!0))}catch(pe){throw oe(),pe}};return{init:async()=>{const pe=externalStorage.getSessionId(),xe=await authApi.getTypes();if(dispatch$1(setProviders(xe)),!xe.length)await J(!0),await K(),dispatch$1(setIsAuthenticated(!0));else if(pe||externalStorage.getProviderId())try{await ce(),await J(),await K(),dispatch$1(setIsAuthenticated(!0))}catch{return oe()}},login:async pe=>{externalStorage.setProviderId(pe),dispatch$1(setIsAuthenticated(!0)),await J(),await K()},logout:oe,loadProfile:K,refreshToken:ce}},authService=createAuthService(),createMainAxiosInstance=()=>{const K=axios.create({baseURL:env.apiUrl,transformResponse:oe=>oe});let J=!1;const ne=createRefreshAndRetryQueue();return K.interceptors.request.use(oe=>{var xe;const ce=oe,ue=generateHeaders();Object.keys(ue).forEach(me=>{const ge=ue[me];ce.headers.set(me,ge)});const Ae=store.getState(),{providers:pe}=Ae.AppStateSliceReducer;return!((xe=ce.url)!=null&&xe.includes("/providers"))&&pe.length!==0?ce.withCredentials=!0:ce.withCredentials=!1,ce}),K.interceptors.response.use(oe=>oe.status===204?{...oe,data:{}}:(oe.config.responseType!=="arraybuffer"&&(oe.data=deserialize(oe.data)),oe)),K.interceptors.response.use(oe=>oe,async oe=>{if(axios.isAxiosError(oe)){const ce=oe.config,ue=parseAxiosErrorMessage(oe),{method:Ae,url:pe}=oe.config,{status:xe}=oe.response??{};switch(console.error(` [API] ${Ae==null?void 0:Ae.toUpperCase()} ${pe} | Error ${xe} ${ue}`),xe){case 401:{if(pe&&/\/auth\/[^/]+\/refresh$/.test(pe))throw oe;if(pe&&pe.includes("/auth/")&&pe.includes("/callback"))throw routes.login.go({}),oe;if(!J){J=!0;try{return await authService.refreshToken(),ne.iterate(({config:me,resolve:ge,reject:ye})=>{K.request(me).then(ge).catch(ye)}),ne.clear(),K(ce)}catch{ne.clear()}finally{J=!1}}return new Promise((me,ge)=>{ne.enqueue({config:ce,resolve:me,reject:ge})})}case 403:{routes.forbidden.go({});break}case 404:break;case 500:break;case void 0:{routes.serverUnavailable.go({});break}}}else console.error(` [API] | Error ${oe.message}`);return Promise.reject(oe)}),K},axiosMain=createMainAxiosInstance(),getUserKeysHeaders=K=>{const J=new AxiosHeaders;if(K){const ne=externalStorage.getSecretKeys(K);Object.values(ne).flat().forEach(oe=>{const ce=`Cl-User-Key-${oe.name.replaceAll(" ","-")}`;J.set(ce,oe.value)})}return J},handlerApi={async handlerRun(K){const{Dataset:J,userName:ne,...oe}=K;return(await axiosMain.post("/handler/run",serialize(oe),{headers:{"Content-Type":"application/json",Dataset:J,...getUserKeysHeaders(ne)}})).data},async runTasks(K){const{keys:J,args:ne,dataset:oe,type:ce,method:ue,userName:Ae}=K,pe={Type:ce,Method:ue,Keys:J,Arguments:ne};return(await axiosMain.post("/tasks/submit",serialize(pe),{headers:{"Content-Type":"application/json",dataset:oe,...getUserKeysHeaders(Ae)}})).data},async runTasksStatus({dataset:K,taskRunIds:J}){return(await axiosMain.post("/tasks/status",serialize(convertTaskStatusDtoToParams(J)),{headers:{"Content-Type":"application/json",dataset:K}})).data},async runTasksResult(K){const{dataset:J,taskRunIds:ne}=K;return(await axiosMain.post("/tasks/result",serialize(convertTaskStatusDtoToParams(ne)),{headers:{"Content-Type":"application/json",dataset:J}})).data},async runView(K){const J=convertHandlerDtoToParams(K);return(await axiosMain.get("/entity/run_view",{params:{...J,arguments:K.args?serialize(K.args):void 0}})).data.Result.ViewOf},async cancel(K){const{dataset:J,taskRunIds:ne}=K;return(await axiosMain.post("/tasks/cancel",serialize(convertTaskStatusDtoToParams(ne)),{headers:{"Content-Type":"application/json",dataset:J}})).data},async cancelAll(K){return(await axiosMain.post("/tasks/cancel_all",{},{headers:{"Content-Type":"application/json",dataset:K}})).data}},convertRootSchema=(K,J)=>{var ne;return((ne=Object.keys(K))==null?void 0:ne.find(oe=>{var ce;return((ce=oe.split("."))==null?void 0:ce.at(-1))===J}))||""},convertSchemaTypeHierarchyDtoToModel=K=>K.flat().filter((J,ne,oe)=>ne===oe.findIndex(ce=>ce.Name===J.Name&&ce.Name===J.Name)),convertSchemaTypeDtoToModel=(K,J)=>({rootType:convertRootSchema(K,J),typeList:K}),convertHandlerDtoToParams=({dataSource:K,traceId:J,args:ne,panelId:oe,...ce})=>({arguments:ne,traceid:J,data_source:K,panel_id:oe,...ce}),convertTaskStatusDtoToParams=K=>({TaskRunIds:K}),schemaApi={async getType({name:K}){const J=await axiosMain.get("/schema/type",{params:{type_name:K}});return convertSchemaTypeDtoToModel(J.data,K)},async getTypes(){return(await axiosMain.get("/schema/types")).data},async getInterfaces(){return(await axiosMain.get("/schema/interfaces")).data},async getEnums(){return(await axiosMain.get("/schema/enums")).data},async getTypeHierarchy({name:K}){const J=await axiosMain.get("/schema/type-successors",{params:{type_name:K}});return convertSchemaTypeHierarchyDtoToModel(J.data)},async getModules(){return(await axiosMain.get("/schema/modules")).data}},convertStorageSelectDtoToModel=(K,J)=>{var ne;return{data:K.Data,schema:{rootType:((ne=K.Schema)==null?void 0:ne.rootType)||convertRootSchema(K.Schema,J),typeList:K.Schema}}},storageApi={async getRecord({type:K,key:J,dataset:ne,ignoreNotFound:oe}){var pe;const ce=[{Type:K,Key:J||""}],{data:ue}=await axiosMain.post("/storage/load",ce,{params:{ignore_not_found:oe},headers:{dataset:ne}}),Ae=(pe=ue.Data)==null?void 0:pe[0];return{schema:convertSchemaTypeDtoToModel(ue.Schema,(Ae==null?void 0:Ae._t)??K),data:Ae}},async getTypeViewSettings(K){return storageApi.getRecord({type:"UiTypeState",key:`${K.module};${K.type};${K.user}`,ignoreNotFound:!0,module:"Cl.Runtime.Backend.Core"}).then(({data:J})=>J)},async getAppState(K){const J={type:"UiAppState",module:"Cl.Runtime.Backend.Core",ignoreNotFound:!0};return storageApi.getRecord({...J,key:K}).then(ne=>ne.data)},async getDatasets({type:K}){return(await axiosMain.get("/storage/datasets",{params:{type_name:K}})).data},async getEnvs(){return(await axiosMain.get("/storage/envs")).data},async select({params:K,dto:J}){const{dataset:ne,type:oe,...ce}=K,ue={Type:oe,QueryDict:{...J}},Ae=isNullable(ue)||isEmpty$2(ue)?void 0:serialize(ue),pe=await axiosMain.post("/storage/select",Ae,{headers:{"Content-Type":"application/json",dataset:ne},params:ce});return convertStorageSelectDtoToModel(pe.data,K.type)},async saveEntity({data:K,dataset:J,isInsert:ne}){const oe=ne?"insert":"save";return(await axiosMain.post(`/storage/${oe}`,serialize(K),{headers:{"Content-Type":"application/json",dataset:J}})).data},async deleteEntities({data:K,dataset:J}){return(await axiosMain.post("/storage/delete",serialize(K),{headers:{"Content-Type":"application/json",dataset:J}})).data}},convertUserDtoToModel=K=>{const J=[K.FirstName,K==null?void 0:K.LastName].filter(Boolean).join(" ");return{username:K.Username,firstName:K.FirstName,fullName:J,lastName:K.LastName||null,email:K.Email||null,roles:K.Scopes,userSecretsPublicKey:K.UserSecretsPublicKey,id:K.Id||K.Username}},authApi={async getTypes(){return(await axiosMain.get("/auth/providers")).data},async getType(K){return(await axiosMain.get(`/auth/${K}/type-info`)).data},async login(K){const J=new FormData;return J.set("username",K.username),J.set("password",K.password),(await axiosMain.post(`/auth/${K.type_id}/login`,J)).data},async refreshToken(K){return(await axiosMain.post(`/auth/${K}/refresh`)).data},async profile(){const K=await axiosMain.get("/auth/me");return convertUserDtoToModel(K.data)},async getLogoutRedirect(K){return(await axiosMain.post(`/auth/${K}/logout`)).data},async loginCallback(K,J){return(await axiosMain.get(`/auth/${J}/callback?one_time_token=${K}`)).data},async loginRedirect(K){return(await axiosMain.post(`/auth/${K}/login-redirect`)).data}},supportApi={async getHealth(){return(await axiosMain.get("/health")).data}},sseApiUrls={events:"/sse/events"},sseApi={events(){return`${env.apiUrl}${sseApiUrls.events}`}},settingsApi={async getSettings(){return(await axiosMain.get("/settings")).data}};var LanguageEnum=(K=>(K.R="R",K.Json="Json",K.Xml="Xml",K.Python="Python",K.Markdown="Markdown",K.Sql="Sql",K.Cpp="Cpp",K.C="C",K.Csharp="Csharp",K.Java="Java",K.Typescript="Typescript",K.Javascript="Javascript",K.Plaintext="Plaintext",K))(LanguageEnum||{}),HandlerRunTypeEnum=(K=>(K.UI_RECORD_UTIL="UiRecordUtil",K.UI_SUPPORT_UTIL="UiSupportUtil",K.UI_LOG_UTIL="UiLogUtil",K.DATA_SERVICE="DataService",K))(HandlerRunTypeEnum||{}),KindTypeModel=(K=>(K.ABSTRACT="Abstract",K.FINAL="Final",K.ELEMENT="Element",K.ABSTRACT_ELEMENT="AbstractElement",K))(KindTypeModel||{}),SchemaDisplayKind=(K=>(K.Basic="Basic",K.Singleton="Singleton",K.Dashboard="Dashboard",K))(SchemaDisplayKind||{}),HandlerType=(K=>(K.VIEWER="Viewer",K.JOB="Job",K.CONTENT="Content",K))(HandlerType||{}),SchemaTypeKind=(K=>(K.TABLE="Table",K))(SchemaTypeKind||{}),DictionaryDataPath=(K=>(K.Key="key",K.Value="value",K))(DictionaryDataPath||{}),AuthKindEnum=(K=>(K.None="none",K.Develop="develop",K.ActiveDirectory="active_directory",K.Oidc="oidc",K))(AuthKindEnum||{}),AuthKindNamesEnum=(K=>(K.Okta="Okta",K.Kinde="Kinde",K.AD="AD",K))(AuthKindNamesEnum||{}),AuthStrategyEnum=(K=>(K.default="default",K.redirect="redirect",K))(AuthStrategyEnum||{}),UserRole=(K=>(K.Developer="Developer",K))(UserRole||{});const correctConfigDirection=(K,J)=>{var ne;J===LayoutDirection.HORIZONTAL&&(K.type=StackEnum.COLUMN),J===LayoutDirection.VERTICAL&&(K.type=StackEnum.ROW),K.id=`${K.type}-${(ne=K.content[0])==null?void 0:ne.key.replace(/\s/g,"")}`,K.key=K.id},findParent=(K,J)=>{var ne,oe;if((ne=K.content)!=null&&ne.some(ce=>J.some(ue=>ue===ce.key)))return K;for(let ce=0;ce<((oe=K.content)==null?void 0:oe.length);ce+=1){const ue=K.content[ce],Ae=findParent(ue,J);if(Ae)return Ae}},revertTwoMoreDetailsViewers=(K,J,ne)=>{if(K&&J.content.length>2){const oe=[...J.content];oe.splice(0,1);const ce=ne===LayoutDirection.VERTICAL?StackEnum.COLUMN:StackEnum.ROW,ue={type:ce,key:`${ce}-${oe[0].id}`,id:`${ce}-${oe[0].id}`,isMainGrid:!1,size:DefaultPanelSize.DEFAULT,content:oe},Ae=revertConfigNodesOrientation(ue,ne);J.content=[K,Ae],J.type=ne===LayoutDirection.VERTICAL?StackEnum.ROW:StackEnum.COLUMN}},revertSingleNonStackViewer=(K,J,ne)=>{var oe;!K&&J.type!==StackEnum.STACK&&(J.content=J.content.map(ce=>revertConfigNodesOrientation(ce,ne)),J.id=`${J.type}-${(oe=J.content[0])==null?void 0:oe.key.replace(/\s/g,"")}`,J.key=J.id)},revertConfigNodesOrientation=(K,J)=>{const ne=structuredClone(K),oe=findParent(ne,[GridTabEnum.MAIN]);return revertTwoMoreDetailsViewers(oe,ne,J),revertSingleNonStackViewer(oe,ne,J),ne},isConfigType=K=>Object.hasOwn(K,"content"),checkForSingleContentConfig=K=>{var ne,oe,ce;return isConfigType(K)&&K.content.length===1&&isConfigType(K.content[0])&&(((ne=K.content[0])==null?void 0:ne.type)===StackEnum.STACK||((oe=K.content[0])==null?void 0:oe.type)===StackEnum.ROW||((ce=K.content[0])==null?void 0:ce.type)===StackEnum.COLUMN)},correctContent=(K,J=!1)=>{var oe,ce,ue,Ae,pe;const ne=K;if(isConfigType(ne)&&ne.content.length>1){for(let xe=0;xe<ne.content.length;xe+=1){const me=ne.content[xe],ge=isConfigType(me);me&&ge&&(me.content.length>1&&correctContent(me,J),(me.type===ne.type||me.content.length===1&&isConfigType(me.content[0])&&(((oe=me.content[0])==null?void 0:oe.type)===StackEnum.STACK||((ce=me.content[0])==null?void 0:ce.type)===StackEnum.ROW||((ue=me.content[0])==null?void 0:ue.type)===StackEnum.COLUMN))&&(ne.content.splice(xe,1,...me.content),xe-=1),me.content.length===0&&(ne.content.splice(xe,1),xe-=1),J||(me.id=`${me.type}-${(Ae=me.content[0])==null?void 0:Ae.key.replace(/\s/g,"")}`,me.key=me.id)),me&&!ge&&(me.isCurrentlyDragging=!1)}ne.id=`${ne.type}-${(pe=ne.content[0])==null?void 0:pe.key.replace(/\s/g,"")}`,ne.key=ne.id}return isConfigType(ne)&&checkForSingleContentConfig(ne)?correctContent(ne.content[0],J):ne};var EditorTabsEnum=(K=>(K.EDITOR="editor",K.EDITOR_TRANSITION="editor-transition",K.NEW_ENTITY="newEntity",K.COPY_ENTITY="copyEntity",K.HISTORY="history",K.SELECT_TYPE="selectType",K.DAG="directed-acyclic-graph",K))(EditorTabsEnum||{});const EDITOR_TABS={editor:{id:"editor",key:"editor",label:"editor.tabs.data",isClosable:!1,isActive:!1,isCurrentlyDragging:!1,isMainGridTab:!1},"editor-transition":{id:"editor-transition",key:"editor-transition",label:"",isClosable:!0,isActive:!0,isCurrentlyDragging:!1,isMainGridTab:!1},newEntity:{id:"newEntity",key:"newEntity",label:"editor.tabs.newEntity",isClosable:!1,isActive:!0,isCurrentlyDragging:!1,isMainGridTab:!1},copyEntity:{id:"copyEntity",key:"copyEntity",label:"editor.tabs.copyEntity",isClosable:!1,isActive:!0,isCurrentlyDragging:!1,isMainGridTab:!1},selectType:{id:"selectType",key:"selectType",label:"editor.tabs.selectType",isClosable:!1,isCurrentlyDragging:!1,isMainGridTab:!1},history:{id:"history",key:"history",label:"editor.tabs.history",isCurrentlyDragging:!1,isMainGridTab:!1},"directed-acyclic-graph":{id:"directed-acyclic-graph",key:"directed-acyclic-graph",label:"editor.tabs.dag",isClosable:!1,isCurrentlyDragging:!1,isMainGridTab:!1}},handleStackParsing=K=>{var oe;const J={ColsCount:1,Content:[],_t:SimplifiedEnum.LAYOUT_ELEMENT},ne={Key:"",Stack:[],_t:SimplifiedEnum.LAYOUT_STACK_ELEMENT};return K.content.forEach(ce=>{var ue;ce.isActive&&(ne.Key=ce.id),ce.id!==EditorTabsEnum.EDITOR_TRANSITION&&((ue=ne.Stack)==null||ue.push({Key:ce.id,_t:SimplifiedEnum.LAYOUT_STACK_ELEMENT}))}),ne.Key===EditorTabsEnum.EDITOR_TRANSITION&&((oe=ne.Stack)!=null&&oe.length)&&(ne.Key=ne.Stack[0].Key),J.Content.push(ne),J},getParsedConfig=(K,J=!1)=>{if(K.type===StackEnum.COLUMN){const ne=[];return K.content.forEach(oe=>{if(isConfigType(oe)&&oe.type===StackEnum.STACK){const ce=handleStackParsing(oe);ne.push(ce)}if(isConfigType(oe)&&oe.type===StackEnum.ROW){const ce={ColsCount:oe.content.length,Content:[],_t:SimplifiedEnum.LAYOUT_ELEMENT};oe.content.forEach(ue=>{const Ae=getParsedConfig(ue);if(Ae&&!Array.isArray(Ae)&&ce.Content.push(Ae),Ae&&Array.isArray(Ae)){const pe={ColsCount:1,Content:Ae,_t:SimplifiedEnum.LAYOUT_ELEMENT};ce.Content.push(pe)}}),ne.push(ce)}}),ne}if(K.type===StackEnum.ROW){const ne=[],oe={ColsCount:K.content.length,Content:[],_t:SimplifiedEnum.LAYOUT_ELEMENT};return K.content.forEach(ce=>{if(isConfigType(ce)&&ce.type===StackEnum.STACK&&oe.Content.push(handleStackParsing(ce)),isConfigType(ce)&&ce.type===StackEnum.COLUMN){const ue={ColsCount:1,Content:[],_t:SimplifiedEnum.LAYOUT_ELEMENT};ce.content.forEach(Ae=>{const pe=getParsedConfig(Ae);if(pe&&!Array.isArray(pe)&&ue.Content.push(pe),pe&&Array.isArray(pe)){const xe={ColsCount:Ae.content.length,Content:pe,_t:SimplifiedEnum.LAYOUT_ELEMENT};ue.Content.push(xe)}}),oe.Content.push(ue)}}),ne.push(oe),ne}if(K.type===StackEnum.STACK){const ne=handleStackParsing(K);return J?[ne]:ne}},getTableTabData=K=>K==null?void 0:K.map(({TableName:J,Label:ne})=>({key:J,label:ne,id:J})),getTypeTabData=(K,J)=>K==null?void 0:K.map(({TableName:ne,Label:oe,TypeName:ce})=>{var ue;return{key:ce,label:oe,id:ce,tableName:(ue=J.find(Ae=>Ae.TableName===ne))==null?void 0:ue.Label,tableKey:ne}}),filterSchemaTypes=K=>({OpenedTypes:[],Tables:getTableTabData(K.Tables)??[],Types:getTypeTabData(K.Types,K.Tables)??[],Filters:[]}),filterTypeHelper=(K,J)=>{if(!J)return K;const ne=[],oe=[],ce=J.toLowerCase(),ue=new RegExp(`(${escapeStringRegexp(J)})`,"gi");K.forEach(pe=>{const xe=pe.label.split(" ").map(me=>me.charAt(0)).join("").toLowerCase().includes(ce);pe.label.toLowerCase().includes(ce)||xe?ne.push(pe):pe.label.match(ue)&&oe.push(pe)});const Ae=pe=>pe.sort((xe,me)=>xe.label.toLowerCase().indexOf(ce)-me.label.toLowerCase().indexOf(ce)||xe.label.length-me.label.length);return[...Ae(ne),...Ae(oe)]},getNonEditorTabs=K=>K===EditorTabsEnum.NEW_ENTITY?[EDITOR_TABS[EditorTabsEnum.NEW_ENTITY]]:K===EditorTabsEnum.COPY_ENTITY?[EDITOR_TABS[EditorTabsEnum.COPY_ENTITY]]:[EDITOR_TABS[EditorTabsEnum.SELECT_TYPE]],updateCurrentLayout=(K,J,ne,oe)=>{const{state:ce}=K,{state:ue,action:Ae}=J,pe=structuredClone(ue.configBackup);correctConfigDirection(pe,ne);const xe=ce.activeEditorTab===EditorTabsEnum.EDITOR;if(!oe&&xe){const ge=revertConfigNodesOrientation(structuredClone(pe),ne);pe.content=ge.content}const me=correctContent(pe);Ae.updateConfig(xe?me:revertConfigNodesOrientation(returnDefaultConfig(getNonEditorTabs(ce.activeEditorTab),ne),ne)),Ae.saveUiTypeData({simplifiedConfig:getParsedConfig(me),handlers:ue.pinnedHandlers,MaximizedTabId:""}),Ae.updateMaximizedTabId("",!0)},initialState$5={schemaTypes:{OpenedTypes:[],Tables:[],Types:[],Filters:[]},searchTypes:void 0,status:LoadingStatusesEnum.INITIAL,isInitLoad:!1,error:""},getSchemaTypes=createAsyncThunk("getSchemaTypes",async({isInitLoad:K=!1}={},{rejectWithValue:J})=>{try{return{response:await handlerApi.handlerRun({Type:HandlerRunTypeEnum.DATA_SERVICE,Method:"Screens",Arguments:{}}),isInitLoad:K}}catch(ne){return toast.error(ne),J(getErrorMessage(ne))}}),SchemaTypesSlice=createSlice({name:"SchemaTypesSlice",initialState:initialState$5,reducers:{removeSearchTypes(K){K.searchTypes=void 0}},extraReducers:K=>K.addCase(getSchemaTypes.pending,(J,ne)=>{var oe;(oe=ne.meta.arg)!=null&&oe.isInitLoad&&(J.status=LoadingStatusesEnum.LOADING),J.error=""}).addCase(getSchemaTypes.fulfilled,(J,ne)=>{const oe=ne.payload.response[0].Result,ce=filterSchemaTypes(oe);J.schemaTypes=ce,J.searchTypes=ce,ne.payload.isInitLoad&&(J.status=LoadingStatusesEnum.SUCCESS)}).addCase(getSchemaTypes.rejected,(J,ne)=>{var oe;(oe=ne.meta.arg)!=null&&oe.isInitLoad&&(J.status=LoadingStatusesEnum.ERROR),J.error=isString$2(ne.payload)?ne.payload:""})}),SchemaTypesSliceReducer=SchemaTypesSlice.reducer,{removeSearchTypes}=SchemaTypesSlice.actions,getActiveTypeMetadata=createAsyncThunk("getActiveTypeMetadata",async({activeTab:K,basetype:J},{rejectWithValue:ne,dispatch:oe})=>{try{const ce=await schemaApi.getType({name:J});return ce.typeList[ce.rootType]}catch(ce){return toast.error(ce),oe(closeTab({id:K})),ne(getErrorMessage(ce))}}),initialState$4={tabsData:{metaData:{data:{},status:LoadingStatusesEnum.INITIAL,error:""}}},GridTabsDataSlice=createSlice({name:"tabsData",initialState:initialState$4,reducers:{updateActiveTypeMetadata(K,J){K.tabsData.metaData.data=J.payload},removeMetaData(K){K.tabsData.metaData.data={}}},extraReducers:K=>K.addCase(getActiveTypeMetadata.pending,J=>{J.tabsData.metaData.data=initialState$4.tabsData.metaData.data,J.tabsData.metaData.status=LoadingStatusesEnum.LOADING,J.tabsData.metaData.error=""}).addCase(getActiveTypeMetadata.fulfilled,(J,ne)=>{J.tabsData.metaData.data=ne.payload,J.tabsData.metaData.status=LoadingStatusesEnum.SUCCESS}).addCase(getActiveTypeMetadata.rejected,(J,ne)=>{J.tabsData.metaData.status=LoadingStatusesEnum.ERROR,J.tabsData.metaData.error=isString$2(ne.payload)?ne.payload:""})}),GridTabsDataSliceReducer=GridTabsDataSlice.reducer,{updateActiveTypeMetadata,removeMetaData}=GridTabsDataSlice.actions,initialState$3={isGridMaximized:!1,gridMaximizedId:""},GridDataSlice=createSlice({name:"gridData",initialState:initialState$3,reducers:{setIsGridMaximized(K,J){K.gridMaximizedId=J.payload.maximized&&J.payload.gridId?J.payload.gridId:"",K.isGridMaximized=J.payload.maximized}}}),GridDataSliceReducer=GridDataSlice.reducer,initialState$2={datasetData:{rowsData:[],status:LoadingStatusesEnum.INITIAL,error:""}},getDatasetData=createAsyncThunk("getDatasetData",async({type:K},{rejectWithValue:J})=>{try{return storageApi.getDatasets({type:K})}catch(ne){return toast.error(ne),J(getErrorMessage(ne))}}),selectDataset$1=createAsyncThunk("selectDataset",async K=>new Promise(J=>{setTimeout(()=>{J(K)},100)})),isExistDataset=(K,J="")=>K.length===0?!1:K.some(ne=>ne.Name===J),DatasetDataSlice=createSlice({name:"datasetData",initialState:initialState$2,reducers:{cleanDatasetData(K){K.datasetData=initialState$2.datasetData}},extraReducers:K=>{K.addCase(getDatasetData.fulfilled,(J,ne)=>{const oe=ne.payload.map(ce=>(ce.Name===null&&(ce.Name=""),ce));J.datasetData.rowsData=oe,(!J.datasetData.activeDatasetName&&isExistDataset(ne.payload)||!isExistDataset(ne.payload,J.datasetData.activeDatasetName))&&(J.datasetData.activeDatasetName=""),J.datasetData.status=LoadingStatusesEnum.SUCCESS}).addCase(selectDataset$1.fulfilled,(J,ne)=>{J.datasetData.activeDatasetName=ne.payload,J.datasetData.status=LoadingStatusesEnum.SUCCESS}).addMatcher(isAnyOf(getDatasetData.rejected,selectDataset$1.pending),J=>{J.datasetData.status=LoadingStatusesEnum.LOADING,J.datasetData.error=""}).addMatcher(isAnyOf(getDatasetData.rejected,selectDataset$1.rejected),(J,ne)=>{J.datasetData.status=LoadingStatusesEnum.ERROR,J.datasetData.error=isString$2(ne.payload)?ne.payload:""})}}),DatasetDataSliceReducer=DatasetDataSlice.reducer,SaveAppStateListener=K=>{K({matcher:isAnyOf(setTabs),effect:(J,ne)=>{ne.dispatch(saveAppState())}})},listenerMiddleware=createListenerMiddleware(),startAppListening=listenerMiddleware.startListening,listeners=[SaveAppStateListener];listeners.forEach(K=>K(startAppListening));const rootReducer=combineReducers({SchemaTypesSliceReducer,HeaderDataSliceReducer,GridTabsDataSliceReducer,GridDataSliceReducer,DatasetDataSliceReducer,AppStateSliceReducer,SettingsDataSliceReducer}),setupStore=()=>configureStore({reducer:rootReducer,middleware:K=>K({serializableCheck:{isSerializable:J=>isPlain(J)||BigNumber.isBigNumber(J)}}).prepend(listenerMiddleware.middleware)}),store=setupStore(),{dispatch:dispatch$1}=store;function r(K){var J,ne,oe="";if(typeof K=="string"||typeof K=="number")oe+=K;else if(typeof K=="object")if(Array.isArray(K))for(J=0;J<K.length;J++)K[J]&&(ne=r(K[J]))&&(oe&&(oe+=" "),oe+=ne);else for(J in K)K[J]&&(oe&&(oe+=" "),oe+=J);return oe}function clsx(){for(var K,J,ne=0,oe="";ne<arguments.length;)(K=arguments[ne++])&&(J=r(K))&&(oe&&(oe+=" "),oe+=J);return oe}const u$1=K=>typeof K=="number"&&!isNaN(K),d=K=>typeof K=="string",p=K=>typeof K=="function",m=K=>d(K)||p(K)?K:null,f$3=K=>reactExports.isValidElement(K)||d(K)||p(K)||u$1(K);function g(K,J,ne){ne===void 0&&(ne=300);const{scrollHeight:oe,style:ce}=K;requestAnimationFrame(()=>{ce.minHeight="initial",ce.height=oe+"px",ce.transition=`all ${ne}ms`,requestAnimationFrame(()=>{ce.height="0",ce.padding="0",ce.margin="0",setTimeout(J,ne)})})}function h$1(K){let{enter:J,exit:ne,appendPosition:oe=!1,collapse:ce=!0,collapseDuration:ue=300}=K;return function(Ae){let{children:pe,position:xe,preventExitTransition:me,done:ge,nodeRef:ye,isIn:Se}=Ae;const Te=oe?`${J}--${xe}`:J,Ne=oe?`${ne}--${xe}`:ne,$e=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{const ke=ye.current,je=Te.split(" "),Ke=Ye=>{Ye.target===ye.current&&(ke.dispatchEvent(new Event("d")),ke.removeEventListener("animationend",Ke),ke.removeEventListener("animationcancel",Ke),$e.current===0&&Ye.type!=="animationcancel"&&ke.classList.remove(...je))};ke.classList.add(...je),ke.addEventListener("animationend",Ke),ke.addEventListener("animationcancel",Ke)},[]),reactExports.useEffect(()=>{const ke=ye.current,je=()=>{ke.removeEventListener("animationend",je),ce?g(ke,ge,ue):ge()};Se||(me?je():($e.current=1,ke.className+=` ${Ne}`,ke.addEventListener("animationend",je)))},[Se]),Wt.createElement(Wt.Fragment,null,pe)}}function y(K,J){return K!=null?{content:K.content,containerId:K.props.containerId,id:K.props.toastId,theme:K.props.theme,type:K.props.type,data:K.props.data||{},isLoading:K.props.isLoading,icon:K.props.icon,status:J}:{}}const v$1={list:new Map,emitQueue:new Map,on(K,J){return this.list.has(K)||this.list.set(K,[]),this.list.get(K).push(J),this},off(K,J){if(J){const ne=this.list.get(K).filter(oe=>oe!==J);return this.list.set(K,ne),this}return this.list.delete(K),this},cancelEmit(K){const J=this.emitQueue.get(K);return J&&(J.forEach(clearTimeout),this.emitQueue.delete(K)),this},emit(K){this.list.has(K)&&this.list.get(K).forEach(J=>{const ne=setTimeout(()=>{J(...[].slice.call(arguments,1))},0);this.emitQueue.has(K)||this.emitQueue.set(K,[]),this.emitQueue.get(K).push(ne)})}},T$1=K=>{let{theme:J,type:ne,...oe}=K;return Wt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:J==="colored"?"currentColor":`var(--toastify-icon-color-${ne})`,...oe})},E$1={info:function(K){return Wt.createElement(T$1,{...K},Wt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(K){return Wt.createElement(T$1,{...K},Wt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(K){return Wt.createElement(T$1,{...K},Wt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(K){return Wt.createElement(T$1,{...K},Wt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Wt.createElement("div",{className:"Toastify__spinner"})}};function C(K){const[,J]=reactExports.useReducer(Te=>Te+1,0),[ne,oe]=reactExports.useState([]),ce=reactExports.useRef(null),ue=reactExports.useRef(new Map).current,Ae=Te=>ne.indexOf(Te)!==-1,pe=reactExports.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:K,containerId:null,isToastActive:Ae,getToast:Te=>ue.get(Te)}).current;function xe(Te){let{containerId:Ne}=Te;const{limit:$e}=pe.props;!$e||Ne&&pe.containerId!==Ne||(pe.count-=pe.queue.length,pe.queue=[])}function me(Te){oe(Ne=>Te==null?[]:Ne.filter($e=>$e!==Te))}function ge(){const{toastContent:Te,toastProps:Ne,staleId:$e}=pe.queue.shift();Se(Te,Ne,$e)}function ye(Te,Ne){let{delay:$e,staleId:ke,...je}=Ne;if(!f$3(Te)||function(ve){return!ce.current||pe.props.enableMultiContainer&&ve.containerId!==pe.props.containerId||ue.has(ve.toastId)&&ve.updateId==null}(je))return;const{toastId:Ke,updateId:Ye,data:ze}=je,{props:Xe}=pe,Je=()=>me(Ke),rt=Ye==null;rt&&pe.count++;const Ze={...Xe,style:Xe.toastStyle,key:pe.toastKey++,...Object.fromEntries(Object.entries(je).filter(ve=>{let[Be,Re]=ve;return Re!=null})),toastId:Ke,updateId:Ye,data:ze,closeToast:Je,isIn:!1,className:m(je.className||Xe.toastClassName),bodyClassName:m(je.bodyClassName||Xe.bodyClassName),progressClassName:m(je.progressClassName||Xe.progressClassName),autoClose:!je.isLoading&&(et=je.autoClose,nt=Xe.autoClose,et===!1||u$1(et)&&et>0?et:nt),deleteToast(){const ve=y(ue.get(Ke),"removed");ue.delete(Ke),v$1.emit(4,ve);const Be=pe.queue.length;if(pe.count=Ke==null?pe.count-pe.displayedToast:pe.count-1,pe.count<0&&(pe.count=0),Be>0){const Re=Ke==null?pe.props.limit:1;if(Be===1||Re===1)pe.displayedToast++,ge();else{const Ie=Re>Be?Be:Re;pe.displayedToast=Ie;for(let Fe=0;Fe<Ie;Fe++)ge()}}else J()}};var et,nt;Ze.iconOut=function(ve){let{theme:Be,type:Re,isLoading:Ie,icon:Fe}=ve,qe=null;const We={theme:Be,type:Re};return Fe===!1||(p(Fe)?qe=Fe(We):reactExports.isValidElement(Fe)?qe=reactExports.cloneElement(Fe,We):d(Fe)||u$1(Fe)?qe=Fe:Ie?qe=E$1.spinner():(Ue=>Ue in E$1)(Re)&&(qe=E$1[Re](We))),qe}(Ze),p(je.onOpen)&&(Ze.onOpen=je.onOpen),p(je.onClose)&&(Ze.onClose=je.onClose),Ze.closeButton=Xe.closeButton,je.closeButton===!1||f$3(je.closeButton)?Ze.closeButton=je.closeButton:je.closeButton===!0&&(Ze.closeButton=!f$3(Xe.closeButton)||Xe.closeButton);let Ge=Te;reactExports.isValidElement(Te)&&!d(Te.type)?Ge=reactExports.cloneElement(Te,{closeToast:Je,toastProps:Ze,data:ze}):p(Te)&&(Ge=Te({closeToast:Je,toastProps:Ze,data:ze})),Xe.limit&&Xe.limit>0&&pe.count>Xe.limit&&rt?pe.queue.push({toastContent:Ge,toastProps:Ze,staleId:ke}):u$1($e)?setTimeout(()=>{Se(Ge,Ze,ke)},$e):Se(Ge,Ze,ke)}function Se(Te,Ne,$e){const{toastId:ke}=Ne;$e&&ue.delete($e);const je={content:Te,props:Ne};ue.set(ke,je),oe(Ke=>[...Ke,ke].filter(Ye=>Ye!==$e)),v$1.emit(4,y(je,je.props.updateId==null?"added":"updated"))}return reactExports.useEffect(()=>(pe.containerId=K.containerId,v$1.cancelEmit(3).on(0,ye).on(1,Te=>ce.current&&me(Te)).on(5,xe).emit(2,pe),()=>{ue.clear(),v$1.emit(3,pe)}),[]),reactExports.useEffect(()=>{pe.props=K,pe.isToastActive=Ae,pe.displayedToast=ne.length}),{getToastToRender:function(Te){const Ne=new Map,$e=Array.from(ue.values());return K.newestOnTop&&$e.reverse(),$e.forEach(ke=>{const{position:je}=ke.props;Ne.has(je)||Ne.set(je,[]),Ne.get(je).push(ke)}),Array.from(Ne,ke=>Te(ke[0],ke[1]))},containerRef:ce,isToastActive:Ae}}function b(K){return K.targetTouches&&K.targetTouches.length>=1?K.targetTouches[0].clientX:K.clientX}function I$1(K){return K.targetTouches&&K.targetTouches.length>=1?K.targetTouches[0].clientY:K.clientY}function _$1(K){const[J,ne]=reactExports.useState(!1),[oe,ce]=reactExports.useState(!1),ue=reactExports.useRef(null),Ae=reactExports.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,pe=reactExports.useRef(K),{autoClose:xe,pauseOnHover:me,closeToast:ge,onClick:ye,closeOnClick:Se}=K;function Te(ze){if(K.draggable){ze.nativeEvent.type==="touchstart"&&ze.nativeEvent.preventDefault(),Ae.didMove=!1,document.addEventListener("mousemove",je),document.addEventListener("mouseup",Ke),document.addEventListener("touchmove",je),document.addEventListener("touchend",Ke);const Xe=ue.current;Ae.canCloseOnClick=!0,Ae.canDrag=!0,Ae.boundingRect=Xe.getBoundingClientRect(),Xe.style.transition="",Ae.x=b(ze.nativeEvent),Ae.y=I$1(ze.nativeEvent),K.draggableDirection==="x"?(Ae.start=Ae.x,Ae.removalDistance=Xe.offsetWidth*(K.draggablePercent/100)):(Ae.start=Ae.y,Ae.removalDistance=Xe.offsetHeight*(K.draggablePercent===80?1.5*K.draggablePercent:K.draggablePercent/100))}}function Ne(ze){if(Ae.boundingRect){const{top:Xe,bottom:Je,left:rt,right:Ze}=Ae.boundingRect;ze.nativeEvent.type!=="touchend"&&K.pauseOnHover&&Ae.x>=rt&&Ae.x<=Ze&&Ae.y>=Xe&&Ae.y<=Je?ke():$e()}}function $e(){ne(!0)}function ke(){ne(!1)}function je(ze){const Xe=ue.current;Ae.canDrag&&Xe&&(Ae.didMove=!0,J&&ke(),Ae.x=b(ze),Ae.y=I$1(ze),Ae.delta=K.draggableDirection==="x"?Ae.x-Ae.start:Ae.y-Ae.start,Ae.start!==Ae.x&&(Ae.canCloseOnClick=!1),Xe.style.transform=`translate${K.draggableDirection}(${Ae.delta}px)`,Xe.style.opacity=""+(1-Math.abs(Ae.delta/Ae.removalDistance)))}function Ke(){document.removeEventListener("mousemove",je),document.removeEventListener("mouseup",Ke),document.removeEventListener("touchmove",je),document.removeEventListener("touchend",Ke);const ze=ue.current;if(Ae.canDrag&&Ae.didMove&&ze){if(Ae.canDrag=!1,Math.abs(Ae.delta)>Ae.removalDistance)return ce(!0),void K.closeToast();ze.style.transition="transform 0.2s, opacity 0.2s",ze.style.transform=`translate${K.draggableDirection}(0)`,ze.style.opacity="1"}}reactExports.useEffect(()=>{pe.current=K}),reactExports.useEffect(()=>(ue.current&&ue.current.addEventListener("d",$e,{once:!0}),p(K.onOpen)&&K.onOpen(reactExports.isValidElement(K.children)&&K.children.props),()=>{const ze=pe.current;p(ze.onClose)&&ze.onClose(reactExports.isValidElement(ze.children)&&ze.children.props)}),[]),reactExports.useEffect(()=>(K.pauseOnFocusLoss&&(document.hasFocus()||ke(),window.addEventListener("focus",$e),window.addEventListener("blur",ke)),()=>{K.pauseOnFocusLoss&&(window.removeEventListener("focus",$e),window.removeEventListener("blur",ke))}),[K.pauseOnFocusLoss]);const Ye={onMouseDown:Te,onTouchStart:Te,onMouseUp:Ne,onTouchEnd:Ne};return xe&&me&&(Ye.onMouseEnter=ke,Ye.onMouseLeave=$e),Se&&(Ye.onClick=ze=>{ye&&ye(ze),Ae.canCloseOnClick&&ge()}),{playToast:$e,pauseToast:ke,isRunning:J,preventExitTransition:oe,toastRef:ue,eventHandlers:Ye}}function L$2(K){let{closeToast:J,theme:ne,ariaLabel:oe="close"}=K;return Wt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${ne}`,type:"button",onClick:ce=>{ce.stopPropagation(),J(ce)},"aria-label":oe},Wt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Wt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function O(K){let{delay:J,isRunning:ne,closeToast:oe,type:ce="default",hide:ue,className:Ae,style:pe,controlledProgress:xe,progress:me,rtl:ge,isIn:ye,theme:Se}=K;const Te=ue||xe&&me===0,Ne={...pe,animationDuration:`${J}ms`,animationPlayState:ne?"running":"paused",opacity:Te?0:1};xe&&(Ne.transform=`scaleX(${me})`);const $e=clsx("Toastify__progress-bar",xe?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${Se}`,`Toastify__progress-bar--${ce}`,{"Toastify__progress-bar--rtl":ge}),ke=p(Ae)?Ae({rtl:ge,type:ce,defaultClassName:$e}):clsx($e,Ae);return Wt.createElement("div",{role:"progressbar","aria-hidden":Te?"true":"false","aria-label":"notification timer",className:ke,style:Ne,[xe&&me>=1?"onTransitionEnd":"onAnimationEnd"]:xe&&me<1?null:()=>{ye&&oe()}})}const N=K=>{const{isRunning:J,preventExitTransition:ne,toastRef:oe,eventHandlers:ce}=_$1(K),{closeButton:ue,children:Ae,autoClose:pe,onClick:xe,type:me,hideProgressBar:ge,closeToast:ye,transition:Se,position:Te,className:Ne,style:$e,bodyClassName:ke,bodyStyle:je,progressClassName:Ke,progressStyle:Ye,updateId:ze,role:Xe,progress:Je,rtl:rt,toastId:Ze,deleteToast:et,isIn:nt,isLoading:Ge,iconOut:ve,closeOnClick:Be,theme:Re}=K,Ie=clsx("Toastify__toast",`Toastify__toast-theme--${Re}`,`Toastify__toast--${me}`,{"Toastify__toast--rtl":rt},{"Toastify__toast--close-on-click":Be}),Fe=p(Ne)?Ne({rtl:rt,position:Te,type:me,defaultClassName:Ie}):clsx(Ie,Ne),qe=!!Je||!pe,We={closeToast:ye,type:me,theme:Re};let Ue=null;return ue===!1||(Ue=p(ue)?ue(We):reactExports.isValidElement(ue)?reactExports.cloneElement(ue,We):L$2(We)),Wt.createElement(Se,{isIn:nt,done:et,position:Te,preventExitTransition:ne,nodeRef:oe},Wt.createElement("div",{id:Ze,onClick:xe,className:Fe,...ce,style:$e,ref:oe},Wt.createElement("div",{...nt&&{role:Xe},className:p(ke)?ke({type:me}):clsx("Toastify__toast-body",ke),style:je},ve!=null&&Wt.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!Ge})},ve),Wt.createElement("div",null,Ae)),Ue,Wt.createElement(O,{...ze&&!qe?{key:`pb-${ze}`}:{},rtl:rt,theme:Re,delay:pe,isRunning:J,isIn:nt,closeToast:ye,hide:ge,type:me,style:Ye,className:Ke,controlledProgress:qe,progress:Je||0})))},M$1=function(K,J){return J===void 0&&(J=!1),{enter:`Toastify--animate Toastify__${K}-enter`,exit:`Toastify--animate Toastify__${K}-exit`,appendPosition:J}},R=h$1(M$1("bounce",!0));h$1(M$1("slide",!0));h$1(M$1("zoom"));h$1(M$1("flip"));const k$1=reactExports.forwardRef((K,J)=>{const{getToastToRender:ne,containerRef:oe,isToastActive:ce}=C(K),{className:ue,style:Ae,rtl:pe,containerId:xe}=K;function me(ge){const ye=clsx("Toastify__toast-container",`Toastify__toast-container--${ge}`,{"Toastify__toast-container--rtl":pe});return p(ue)?ue({position:ge,rtl:pe,defaultClassName:ye}):clsx(ye,m(ue))}return reactExports.useEffect(()=>{J&&(J.current=oe.current)},[]),Wt.createElement("div",{ref:oe,className:"Toastify",id:xe},ne((ge,ye)=>{const Se=ye.length?{...Ae}:{...Ae,pointerEvents:"none"};return Wt.createElement("div",{className:me(ge),style:Se,key:`container-${ge}`},ye.map((Te,Ne)=>{let{content:$e,props:ke}=Te;return Wt.createElement(N,{...ke,isIn:ce(ke.toastId),style:{...ke.style,"--nth":Ne+1,"--len":ye.length},key:`toast-${ke.key}`},$e)}))}))});k$1.displayName="ToastContainer",k$1.defaultProps={position:"top-right",transition:R,autoClose:5e3,closeButton:L$2,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let P,B=new Map,D$2=[],A$2=1;function z$1(){return""+A$2++}function F$1(K){return K&&(d(K.toastId)||u$1(K.toastId))?K.toastId:z$1()}function H$c(K,J){return B.size>0?v$1.emit(0,K,J):D$2.push({content:K,options:J}),J.toastId}function S$1(K,J){return{...J,type:J&&J.type||K,toastId:F$1(J)}}function q(K){return(J,ne)=>H$c(J,S$1(K,ne))}function Q(K,J){return H$c(K,S$1("default",J))}Q.loading=(K,J)=>H$c(K,S$1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...J})),Q.promise=function(K,J,ne){let oe,{pending:ce,error:ue,success:Ae}=J;ce&&(oe=d(ce)?Q.loading(ce,ne):Q.loading(ce.render,{...ne,...ce}));const pe={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},xe=(ge,ye,Se)=>{if(ye==null)return void Q.dismiss(oe);const Te={type:ge,...pe,...ne,data:Se},Ne=d(ye)?{render:ye}:ye;return oe?Q.update(oe,{...Te,...Ne}):Q(Ne.render,{...Te,...Ne}),Se},me=p(K)?K():K;return me.then(ge=>xe("success",Ae,ge)).catch(ge=>xe("error",ue,ge)),me},Q.success=q("success"),Q.info=q("info"),Q.error=q("error"),Q.warning=q("warning"),Q.warn=Q.warning,Q.dark=(K,J)=>H$c(K,S$1("default",{theme:"dark",...J})),Q.dismiss=K=>{B.size>0?v$1.emit(1,K):D$2=D$2.filter(J=>K!=null&&J.options.toastId!==K)},Q.clearWaitingQueue=function(K){return K===void 0&&(K={}),v$1.emit(5,K)},Q.isActive=K=>{let J=!1;return B.forEach(ne=>{ne.isToastActive&&ne.isToastActive(K)&&(J=!0)}),J},Q.update=function(K,J){J===void 0&&(J={}),setTimeout(()=>{const ne=function(oe,ce){let{containerId:ue}=ce;const Ae=B.get(ue||P);return Ae&&Ae.getToast(oe)}(K,J);if(ne){const{props:oe,content:ce}=ne,ue={delay:100,...oe,...J,toastId:J.toastId||K,updateId:z$1()};ue.toastId!==K&&(ue.staleId=K);const Ae=ue.render||ce;delete ue.render,H$c(Ae,ue)}},0)},Q.done=K=>{Q.update(K,{progress:1})},Q.onChange=K=>(v$1.on(4,K),()=>{v$1.off(4,K)}),Q.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Q.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},v$1.on(2,K=>{P=K.containerId||K,B.set(P,K),D$2.forEach(J=>{v$1.emit(0,J.content,J.options)}),D$2=[]}).on(3,K=>{B.delete(K.containerId||K),B.size===0&&v$1.off(0).off(1).off(5)});const TOAST_WIDTH=400,UIToastContainer=({autoClose:K=5e3,limit:J=1})=>{const{t:ne}=useTranslation(),oe=useSelector$1(selectIsDemoMode),[ce,ue]=reactExports.useState();reactExports.useEffect(()=>{externalStorage.removeAllToasts()},[]),reactExports.useEffect(()=>{const Te=()=>{ue(externalStorage.getToasts())};return window.addEventListener("storage",Te),()=>{window.removeEventListener("storage",Te)}},[]),reactExports.useEffect(()=>{ce&&Object.keys(ce).forEach(Te=>{const Ne=Object.keys(ce[Te]).length;if(Ae(Te,Ne)){pe(Te,Ne);return}xe(Te)})},[ce]);const Ae=(Te,Ne)=>Te!==ToastTypeEnum.INFO&&Ne>=3,pe=(Te,Ne)=>{Object.keys(ce[Te]).forEach(ke=>{Q.isActive(ke)&&Q.dismiss(ke)});const $e=`${Ne} ${ge(Te)}`;if(Q.isActive(Te)){Q.update(Te,{render:$e});return}Q[Te]($e,{toastId:Te,onClose:()=>externalStorage.removeAllTypeToasts(Te),onClick:()=>Q.dismiss(Te)})},xe=Te=>{Q.isActive(Te)||Object.keys(ce[Te]).forEach(Ne=>{if(Q.isActive(Ne))return;const{content:$e,options:ke}=ce[Te][Ne];Q[Te](me(Te,$e),{...ke,toastId:Ne,onClose:()=>{Q.isActive(Te)||externalStorage.removeToast(Te,Ne)},onClick:()=>Q.dismiss(Ne)})})},me=(Te,Ne)=>Te===ToastTypeEnum.ERROR?oe?ne("toast.completedUpperCase"):getErrorMessage(Ne):Ne,ge=Te=>({success:ne("toast.completed"),error:ne("toast.failed"),warning:ne("toast.warnings")})[Te],ye=Te=>({success:jsxRuntimeExports.jsx(__$1,{size:"M"}),error:oe?jsxRuntimeExports.jsx(AA,{size:"M"}):jsxRuntimeExports.jsx(Pp,{size:"M"}),info:jsxRuntimeExports.jsx(W5,{size:"M"}),warning:jsxRuntimeExports.jsx(M_,{size:"M"}),default:jsxRuntimeExports.jsx(__$1,{size:"M"})})[Te],Se=({closeToast:Te})=>jsxRuntimeExports.jsx("div",{"aria-hidden":!0,className:"toast-close-icon",onClick:Te,children:jsxRuntimeExports.jsx(_c,{})});return jsxRuntimeExports.jsx(k$1,{limit:J,position:"bottom-right",autoClose:K,hideProgressBar:!0,icon:({type:Te})=>ye(Te),toastStyle:{width:TOAST_WIDTH},style:{width:TOAST_WIDTH},closeButton:Se})},SvgLogo=K=>reactExports.createElement("svg",{width:160,height:28,viewBox:"0 0 160 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",...K},reactExports.createElement("path",{d:"M34 13.4172V14.5708C34 17.1665 34 20.988 40.2171 20.988C42.075 20.988 43.9331 20.7717 45.7196 20.267V17.7433H44.9335L42.218 18.4644H41.0032C36.8584 18.4644 36.8584 18.4644 36.8584 14.4266V13.7055C36.8584 9.66781 36.8584 9.66781 41.0032 9.66781H42.218L44.8621 10.3167H45.6481V7.72102C43.8616 7.2163 42.0036 7 40.1456 7C34 7 34 10.8214 34 13.4172Z",fill:"white"}),reactExports.createElement("path",{d:"M56.0557 7H54.6642C48.366 7 48.366 11.182 48.366 13.4172V14.5708C48.366 16.806 48.366 20.988 54.6642 20.988H56.0557C62.354 20.988 62.354 16.806 62.354 14.5708V13.4172C62.354 11.182 62.354 7 56.0557 7ZM59.4245 14.2103C59.4245 18.3923 59.4245 18.3923 55.3966 18.3923C51.4419 18.3923 51.3686 18.3923 51.3686 14.2103V13.7777C51.3686 9.5957 51.3686 9.5957 55.3966 9.5957C59.3513 9.5957 59.4245 9.5957 59.4245 13.7777V14.2103Z",fill:"white"}),reactExports.createElement("path",{d:"M73.8485 17.6616C73.3418 16.0795 73.1246 15.5042 70.1564 7.37811H65.3784V20.61H68.057V9.82313H68.4914C68.781 10.686 69.2153 11.8367 72.4007 20.61H75.3688C78.6265 11.9086 78.9885 10.9018 79.2781 9.82313H79.7124V20.61H82.3908V7.37811H77.613C74.9344 14.4255 74.2829 16.1514 73.8485 17.6616Z",fill:"white"}),reactExports.createElement("path",{d:"M91.1317 7.37811H86.1712V20.61H88.8308V16.9424H91.1317C95.0146 16.9424 97.8908 16.9424 97.8908 12.1244C97.8908 7.37811 95.0146 7.37811 91.1317 7.37811ZM92.4977 14.6412H88.8308V9.75121H92.4977C95.0146 9.75121 95.0146 9.75121 95.0146 12.1963C95.0146 14.6412 95.0146 14.6412 92.4977 14.6412Z",fill:"white"}),reactExports.createElement("path",{d:"M103.554 7.44963L98.647 19.6801V20.61H101.207L102.416 17.5344H109.243L110.453 20.61H113.013V19.6801L108.106 7.37811L103.554 7.44963ZM103.27 15.3172C104.123 13.0285 104.905 10.8112 105.19 9.88143H106.612C106.897 10.8112 108.106 14.1013 108.532 15.3172H103.27Z",fill:"white"}),reactExports.createElement("path",{d:"M113.391 9.75121H118.459V20.61H121.25V9.75121H126.245V7.37811H113.391V9.75121Z",fill:"white"}),reactExports.createElement("path",{d:"M131.538 7.37811H129.269V20.61H131.538V7.37811Z",fill:"white"}),reactExports.createElement("path",{d:"M145.054 13.3468C145.718 12.8434 146.087 12.0524 146.087 11.1894C146.087 8.74444 144.685 7.52194 143.062 7.37811H138.047H135.318V20.61H143.505C144.39 20.61 147.488 19.8908 147.414 16.6548C147.414 15.2165 146.455 13.8502 145.054 13.3468ZM137.973 9.89504H142.472C143.284 9.89504 143.431 10.3265 143.431 11.1894C143.431 12.0524 143.358 12.6277 142.472 12.6277H137.973V9.89504ZM142.546 18.3088H138.047V15.0008H142.62C144.39 15.0008 144.464 15.9357 144.464 16.7267C144.39 17.6616 144.317 18.3088 142.546 18.3088Z",fill:"white"}),reactExports.createElement("path",{d:"M152.711 18.2369V7.37811H150.062V20.61H159.514V18.2369H152.711Z",fill:"white"}),reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.3248 0H19.1041C27.6529 0 27.8989 6.16219 27.9915 8.4838L28 8.6801V10.2668C28 12.2268 28 18.1068 20.6962 18.8535V17.4535C20.6962 16.7068 20.6962 15.8668 20.509 15.1201C23.5991 14.9335 23.5991 14.1868 23.5991 9.80003V9.14678C23.5991 3.8267 23.5055 3.8267 18.2612 3.8267C12.9239 3.8267 12.9239 3.92005 12.9239 9.14678V9.33341C12.9239 10.6401 13.0175 12.0401 13.1111 13.3467C13.1548 13.522 13.2192 13.6972 13.3044 13.8723C13.4008 14.0705 13.5236 14.2687 13.6726 14.4668C13.9539 14.8401 13.9539 16.8935 13.9539 18.4802C11.2382 17.9202 9.17812 15.6801 8.70967 12.9735C8.61607 12.2268 8.52248 11.3868 8.52248 10.6401V9.14678V8.6801C8.52248 6.53341 8.52248 0 17.3248 0ZM19.4775 17.4532V20.0665C19.3839 22.6799 18.5411 28 10.5816 28H8.80232C0 28 0 21.4666 0 19.3198V17.8266C0 15.7732 0 9.89308 7.3979 9.23977V10.6397C7.3979 11.3865 7.3979 12.2265 7.5851 12.9731C4.49499 13.0665 4.49499 13.8132 4.49499 18.1999V18.8532C4.49499 24.1732 4.58859 24.1732 9.83236 24.1732C15.1702 24.1732 15.2638 24.0799 15.2638 18.8532V18.6665C15.2638 18.1289 15.2638 17.3009 15.229 16.2522C15.2153 15.8445 15.1965 15.4035 15.1702 14.9332C15.1702 14.4665 14.983 13.9998 14.7017 13.6266C14.3274 13.1598 14.1402 12.5999 14.2338 12.0398V9.51975C16.7618 10.0798 18.7283 12.1331 19.1967 14.6531C19.3839 15.5865 19.4775 16.5198 19.4775 17.4532Z",fill:"#0288D1"})),SvgLogoDark=K=>reactExports.createElement("svg",{width:28,height:28,viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",...K},reactExports.createElement("g",{clipPath:"url(#clip0_5553_115136)"},reactExports.createElement("path",{d:"M14 9.5V12.0001C13.9239 12.6425 14.1035 13.289 14.5 13.8C15.1875 14.7167 15 17.3958 15 18.5C15 24.1023 14.0263 24 9.5 24C5.09442 24 3.99121 24.1023 3.99121 18.5C3.99121 13.6677 4.77197 13.0814 8.013 13.0102L8 13V9C-0.00854015 9.512 3.86812e-08 14.252 3.86812e-08 18.5039C3.86812e-08 23 0.10352 28 9.5 28C18.9277 28 19 23 19 18.5039C19 14.8672 19.007 10.8902 14 9.5Z",fill:"#0288D1"}),reactExports.createElement("path",{d:"M18.5 0C9.07227 0 9 5 9 9.49609C9 13.1328 8.993 17.1098 14 18.5V15.9999C14.0761 15.3575 13.8965 14.711 13.5 14.2C12.8125 13.2833 13 10.6042 13 9.5C13 3.89771 13.9737 4 18.5 4C22.9056 4 24.0088 3.89771 24.0088 9.5C24.0088 14.3323 23.228 14.9186 19.987 14.9898L20 15V19C28.0085 18.488 28 13.748 28 9.49609C28 5 27.8965 0 18.5 0Z",fill:"#0288D1"})),reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:"clip0_5553_115136"},reactExports.createElement("rect",{width:28,height:28,fill:"white"})))),SvgClLogo=K=>reactExports.createElement("svg",{width:160,height:28,viewBox:"0 0 160 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",...K},reactExports.createElement("path",{d:"M34 13.4172V14.5708C34 17.1665 34 20.988 40.2171 20.988C42.075 20.988 43.9331 20.7717 45.7196 20.267V17.7433H44.9335L42.218 18.4644H41.0032C36.8584 18.4644 36.8584 18.4644 36.8584 14.4266V13.7055C36.8584 9.66781 36.8584 9.66781 41.0032 9.66781H42.218L44.8621 10.3167H45.6481V7.72102C43.8616 7.2163 42.0036 7 40.1456 7C34 7 34 10.8214 34 13.4172Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M56.0557 7H54.6642C48.366 7 48.366 11.182 48.366 13.4172V14.5708C48.366 16.806 48.366 20.988 54.6642 20.988H56.0557C62.354 20.988 62.354 16.806 62.354 14.5708V13.4172C62.354 11.182 62.354 7 56.0557 7ZM59.4245 14.2103C59.4245 18.3923 59.4245 18.3923 55.3966 18.3923C51.4419 18.3923 51.3686 18.3923 51.3686 14.2103V13.7777C51.3686 9.5957 51.3686 9.5957 55.3966 9.5957C59.3513 9.5957 59.4245 9.5957 59.4245 13.7777V14.2103Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M73.8485 17.6616C73.3418 16.0795 73.1246 15.5042 70.1564 7.37811H65.3784V20.61H68.057V9.82313H68.4914C68.781 10.686 69.2153 11.8367 72.4007 20.61H75.3688C78.6265 11.9086 78.9885 10.9018 79.2781 9.82313H79.7124V20.61H82.3908V7.37811H77.613C74.9344 14.4255 74.2829 16.1514 73.8485 17.6616Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M91.1317 7.37811H86.1712V20.61H88.8308V16.9424H91.1317C95.0146 16.9424 97.8908 16.9424 97.8908 12.1244C97.8908 7.37811 95.0146 7.37811 91.1317 7.37811ZM92.4977 14.6412H88.8308V9.75121H92.4977C95.0146 9.75121 95.0146 9.75121 95.0146 12.1963C95.0146 14.6412 95.0146 14.6412 92.4977 14.6412Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M103.554 7.44963L98.647 19.6801V20.61H101.207L102.416 17.5344H109.243L110.453 20.61H113.013V19.6801L108.106 7.37811L103.554 7.44963ZM103.27 15.3172C104.123 13.0285 104.905 10.8112 105.19 9.88143H106.612C106.897 10.8112 108.106 14.1013 108.532 15.3172H103.27Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M113.391 9.75121H118.459V20.61H121.25V9.75121H126.245V7.37811H113.391V9.75121Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M131.538 7.37811H129.269V20.61H131.538V7.37811Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M145.054 13.3468C145.718 12.8434 146.087 12.0524 146.087 11.1894C146.087 8.74444 144.685 7.52194 143.062 7.37811H138.047H135.318V20.61H143.505C144.39 20.61 147.488 19.8908 147.414 16.6548C147.414 15.2165 146.455 13.8502 145.054 13.3468ZM137.973 9.89504H142.472C143.284 9.89504 143.431 10.3265 143.431 11.1894C143.431 12.0524 143.358 12.6277 142.472 12.6277H137.973V9.89504ZM142.546 18.3088H138.047V15.0008H142.62C144.39 15.0008 144.464 15.9357 144.464 16.7267C144.39 17.6616 144.317 18.3088 142.546 18.3088Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{d:"M152.711 18.2369V7.37811H150.062V20.61H159.514V18.2369H152.711Z",fill:"var(--bs-header-logo-text-color)"}),reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.3248 0H19.1041C27.6529 0 27.8989 6.16219 27.9915 8.4838L28 8.6801V10.2668C28 12.2268 28 18.1068 20.6962 18.8535V17.4535C20.6962 16.7068 20.6962 15.8668 20.509 15.1201C23.5991 14.9335 23.5991 14.1868 23.5991 9.80003V9.14678C23.5991 3.8267 23.5055 3.8267 18.2612 3.8267C12.9239 3.8267 12.9239 3.92005 12.9239 9.14678V9.33341C12.9239 10.6401 13.0175 12.0401 13.1111 13.3467C13.1548 13.522 13.2192 13.6972 13.3044 13.8723C13.4008 14.0705 13.5236 14.2687 13.6726 14.4668C13.9539 14.8401 13.9539 16.8935 13.9539 18.4802C11.2382 17.9202 9.17812 15.6801 8.70967 12.9735C8.61607 12.2268 8.52248 11.3868 8.52248 10.6401V9.14678V8.6801C8.52248 6.53341 8.52248 0 17.3248 0ZM19.4775 17.4532V20.0665C19.3839 22.6799 18.5411 28 10.5816 28H8.80232C0 28 0 21.4666 0 19.3198V17.8266C0 15.7732 0 9.89308 7.3979 9.23977V10.6397C7.3979 11.3865 7.3979 12.2265 7.5851 12.9731C4.49499 13.0665 4.49499 13.8132 4.49499 18.1999V18.8532C4.49499 24.1732 4.58859 24.1732 9.83236 24.1732C15.1702 24.1732 15.2638 24.0799 15.2638 18.8532V18.6665C15.2638 18.1289 15.2638 17.3009 15.229 16.2522C15.2153 15.8445 15.1965 15.4035 15.1702 14.9332C15.1702 14.4665 14.983 13.9998 14.7017 13.6266C14.3274 13.1598 14.1402 12.5999 14.2338 12.0398V9.51975C16.7618 10.0798 18.7283 12.1331 19.1967 14.6531C19.3839 15.5865 19.4775 16.5198 19.4775 17.4532Z",fill:"var(--bs-header-logo-color)"})),SvgLogoWhite=K=>reactExports.createElement("svg",{width:162,height:30,viewBox:"0 0 162 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",...K},reactExports.createElement("path",{d:"M35 14.4172V15.5708C35 18.1665 35 21.988 41.2171 21.988C43.075 21.988 44.9331 21.7717 46.7196 21.267V18.7433H45.9335L43.218 19.4644H42.0032C37.8584 19.4644 37.8584 19.4644 37.8584 15.4266V14.7055C37.8584 10.6678 37.8584 10.6678 42.0032 10.6678H43.218L45.8621 11.3167H46.6481V8.72102C44.8616 8.2163 43.0036 8 41.1456 8C35 8 35 11.8214 35 14.4172Z",fill:"white"}),reactExports.createElement("path",{d:"M57.0556 8H55.6642C49.366 8 49.366 12.182 49.366 14.4172V15.5708C49.366 17.806 49.366 21.988 55.6642 21.988H57.0556C63.3539 21.988 63.3539 17.806 63.3539 15.5708V14.4172C63.3539 12.182 63.3539 8 57.0556 8ZM60.4244 15.2103C60.4244 19.3923 60.4245 19.3923 56.3966 19.3923C52.4418 19.3923 52.3686 19.3923 52.3686 15.2103V14.7777C52.3686 10.5957 52.3686 10.5957 56.3966 10.5957C60.3512 10.5957 60.4244 10.5957 60.4244 14.7777V15.2103Z",fill:"white"}),reactExports.createElement("path",{d:"M74.8485 18.6616C74.3418 17.0795 74.1246 16.5042 71.1564 8.37811H66.3784V21.61H69.057V10.8231H69.4914C69.781 11.686 70.2153 12.8367 73.4007 21.61H76.3688C79.6265 12.9086 79.9885 11.9018 80.2781 10.8231H80.7124V21.61H83.3908V8.37811H78.613C75.9344 15.4255 75.2829 17.1514 74.8485 18.6616Z",fill:"white"}),reactExports.createElement("path",{d:"M92.1317 8.37811H87.1713V21.61H89.8308V17.9424H92.1317C96.0146 17.9424 98.8909 17.9424 98.8909 13.1244C98.8909 8.37811 96.0146 8.37811 92.1317 8.37811ZM93.4978 15.6412H89.8308V10.7512H93.4978C96.0146 10.7512 96.0146 10.7512 96.0146 13.1963C96.0146 15.6412 96.0146 15.6412 93.4978 15.6412Z",fill:"white"}),reactExports.createElement("path",{d:"M104.554 8.44963L99.6471 20.6801V21.61H102.207L103.416 18.5344H110.243L111.453 21.61H114.013V20.6801L109.106 8.37811L104.554 8.44963ZM104.27 16.3172C105.123 14.0285 105.905 11.8112 106.19 10.8814H107.612C107.897 11.8112 109.106 15.1013 109.532 16.3172H104.27Z",fill:"white"}),reactExports.createElement("path",{d:"M114.391 10.7512H119.459V21.61H122.25V10.7512H127.245V8.37811H114.391V10.7512Z",fill:"white"}),reactExports.createElement("path",{d:"M132.538 8.37811H130.269V21.61H132.538V8.37811Z",fill:"white"}),reactExports.createElement("path",{d:"M146.054 14.3468C146.718 13.8434 147.087 13.0524 147.087 12.1894C147.087 9.74444 145.685 8.52194 144.062 8.37811H139.047H136.318V21.61H144.505C145.39 21.61 148.488 20.8908 148.415 17.6548C148.415 16.2165 147.455 14.8502 146.054 14.3468ZM138.973 10.895H143.472C144.284 10.895 144.431 11.3265 144.431 12.1894C144.431 13.0524 144.358 13.6277 143.472 13.6277H138.973V10.895ZM143.547 19.3088H139.047V16.0008H143.62C145.39 16.0008 145.464 16.9357 145.464 17.7267C145.39 18.6616 145.317 19.3088 143.547 19.3088Z",fill:"white"}),reactExports.createElement("path",{d:"M153.711 19.2369V8.37811H151.062V21.61H160.514V19.2369H153.711Z",fill:"white"}),reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.3248 1H20.1041C28.6529 1 28.8989 7.16219 28.9915 9.4838L29 9.6801V11.2668C29 13.2268 29 19.1068 21.6962 19.8535V18.4535C21.6962 17.7068 21.6962 16.8668 21.509 16.1201C24.5991 15.9335 24.5991 15.1868 24.5991 10.8V10.1468C24.5991 4.8267 24.5055 4.8267 19.2612 4.8267C13.9239 4.8267 13.9239 4.92005 13.9239 10.1468V10.3334C13.9239 11.6401 14.0175 13.0401 14.1111 14.3467C14.1548 14.522 14.2192 14.6972 14.3044 14.8723C14.4008 15.0705 14.5236 15.2687 14.6726 15.4668C14.9539 15.8401 14.9539 17.8935 14.9539 19.4802C12.2382 18.9202 10.1781 16.6801 9.70967 13.9735C9.61607 13.2268 9.52248 12.3868 9.52248 11.6401V10.1468V9.6801C9.52248 7.53341 9.52248 1 18.3248 1ZM20.4775 18.4532V21.0665C20.3839 23.6799 19.5411 29 11.5816 29H9.80232C1 29 1 22.4666 1 20.3198V18.8266C1 16.7732 1 10.8931 8.3979 10.2398V11.6397C8.3979 12.3865 8.3979 13.2265 8.5851 13.9731C5.49499 14.0665 5.49499 14.8132 5.49499 19.1999V19.8532C5.49499 25.1732 5.58859 25.1732 10.8324 25.1732C16.1702 25.1732 16.2638 25.0799 16.2638 19.8532V19.6665C16.2638 19.1289 16.2638 18.3009 16.229 17.2522C16.2153 16.8445 16.1965 16.4035 16.1702 15.9332C16.1702 15.4665 15.983 14.9998 15.7017 14.6266C15.3274 14.1598 15.1402 13.5999 15.2338 13.0398V10.5198C17.7618 11.0798 19.7283 13.1331 20.1967 15.6531C20.3839 16.5865 20.4775 17.5198 20.4775 18.4532Z",fill:"white"})),SvgLogoBlue=K=>reactExports.createElement("svg",{width:162,height:30,viewBox:"0 0 162 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",...K},reactExports.createElement("path",{d:"M35 14.4172V15.5708C35 18.1665 35 21.988 41.2171 21.988C43.075 21.988 44.9331 21.7717 46.7196 21.267V18.7433H45.9335L43.218 19.4644H42.0032C37.8584 19.4644 37.8584 19.4644 37.8584 15.4266V14.7055C37.8584 10.6678 37.8584 10.6678 42.0032 10.6678H43.218L45.8621 11.3167H46.6481V8.72102C44.8616 8.2163 43.0036 8 41.1456 8C35 8 35 11.8214 35 14.4172Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M57.0556 8H55.6642C49.366 8 49.366 12.182 49.366 14.4172V15.5708C49.366 17.806 49.366 21.988 55.6642 21.988H57.0556C63.3539 21.988 63.3539 17.806 63.3539 15.5708V14.4172C63.3539 12.182 63.3539 8 57.0556 8ZM60.4245 15.2103C60.4245 19.3923 60.4245 19.3923 56.3966 19.3923C52.4418 19.3923 52.3686 19.3923 52.3686 15.2103V14.7777C52.3686 10.5957 52.3686 10.5957 56.3966 10.5957C60.3512 10.5957 60.4245 10.5957 60.4245 14.7777V15.2103Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M74.8485 18.6616C74.3418 17.0795 74.1246 16.5042 71.1564 8.37811H66.3784V21.61H69.057V10.8231H69.4914C69.781 11.686 70.2153 12.8367 73.4007 21.61H76.3688C79.6265 12.9086 79.9885 11.9018 80.2781 10.8231H80.7124V21.61H83.3908V8.37811H78.613C75.9344 15.4255 75.2829 17.1514 74.8485 18.6616Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M92.1317 8.37811H87.1713V21.61H89.8308V17.9424H92.1317C96.0146 17.9424 98.8909 17.9424 98.8909 13.1244C98.8909 8.37811 96.0146 8.37811 92.1317 8.37811ZM93.4978 15.6412H89.8308V10.7512H93.4978C96.0146 10.7512 96.0146 10.7512 96.0146 13.1963C96.0146 15.6412 96.0146 15.6412 93.4978 15.6412Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M104.554 8.44963L99.6471 20.6801V21.61H102.207L103.416 18.5344H110.243L111.453 21.61H114.013V20.6801L109.106 8.37811L104.554 8.44963ZM104.27 16.3172C105.123 14.0285 105.905 11.8112 106.19 10.8814H107.612C107.897 11.8112 109.106 15.1013 109.532 16.3172H104.27Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M114.391 10.7512H119.459V21.61H122.25V10.7512H127.245V8.37811H114.391V10.7512Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M132.538 8.37811H130.269V21.61H132.538V8.37811Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M146.054 14.3468C146.718 13.8434 147.087 13.0524 147.087 12.1894C147.087 9.74444 145.685 8.52194 144.062 8.37811H139.047H136.318V21.61H144.505C145.39 21.61 148.488 20.8908 148.415 17.6548C148.415 16.2165 147.455 14.8502 146.054 14.3468ZM138.973 10.895H143.472C144.284 10.895 144.431 11.3265 144.431 12.1894C144.431 13.0524 144.358 13.6277 143.472 13.6277H138.973V10.895ZM143.547 19.3088H139.047V16.0008H143.62C145.39 16.0008 145.464 16.9357 145.464 17.7267C145.39 18.6616 145.317 19.3088 143.547 19.3088Z",fill:"#466DD0"}),reactExports.createElement("path",{d:"M153.711 19.2369V8.37811H151.062V21.61H160.514V19.2369H153.711Z",fill:"#466DD0"}),reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.3248 1H20.1041C28.6529 1 28.8989 7.16219 28.9915 9.4838L29 9.6801V11.2668C29 13.2268 29 19.1068 21.6962 19.8535V18.4535C21.6962 17.7068 21.6962 16.8668 21.509 16.1201C24.5991 15.9335 24.5991 15.1868 24.5991 10.8V10.1468C24.5991 4.8267 24.5055 4.8267 19.2612 4.8267C13.9239 4.8267 13.9239 4.92005 13.9239 10.1468V10.3334C13.9239 11.6401 14.0175 13.0401 14.1111 14.3467C14.1548 14.522 14.2192 14.6972 14.3044 14.8723C14.4008 15.0705 14.5236 15.2687 14.6726 15.4668C14.9539 15.8401 14.9539 17.8935 14.9539 19.4802C12.2382 18.9202 10.1781 16.6801 9.70967 13.9735C9.61607 13.2268 9.52248 12.3868 9.52248 11.6401V10.1468V9.6801C9.52248 7.53341 9.52248 1 18.3248 1ZM20.4775 18.4532V21.0665C20.3839 23.6799 19.5411 29 11.5816 29H9.80232C1 29 1 22.4666 1 20.3198V18.8266C1 16.7732 1 10.8931 8.3979 10.2398V11.6397C8.3979 12.3865 8.3979 13.2265 8.5851 13.9731C5.49499 14.0665 5.49499 14.8132 5.49499 19.1999V19.8532C5.49499 25.1732 5.58859 25.1732 10.8324 25.1732C16.1702 25.1732 16.2638 25.0799 16.2638 19.8532V19.6665C16.2638 19.1289 16.2638 18.3009 16.229 17.2522C16.2153 16.8445 16.1965 16.4035 16.1702 15.9332C16.1702 15.4665 15.983 14.9998 15.7017 14.6266C15.3274 14.1598 15.1402 13.5999 15.2338 13.0398V10.5198C17.7618 11.0798 19.7283 13.1331 20.1967 15.6531C20.3839 16.5865 20.4775 17.5198 20.4775 18.4532Z",fill:"#466DD0"})),APP_LOGOS={ce:SvgLogo,dark:SvgLogoDark,white:SvgLogoWhite,cl:SvgClLogo,light:SvgLogoBlue},AppLayout=({children:K})=>jsxRuntimeExports.jsx("div",{className:"app-layout",children:K}),ErrorLayout=({title:K,subTitle:J,children:ne})=>{const oe=useSelector$1(selectEnvLabel);return jsxRuntimeExports.jsxs(AppLayout,{children:[jsxRuntimeExports.jsxs("div",{className:"error-layout__header",children:[jsxRuntimeExports.jsx(APP_LOGOS.white,{}),jsxRuntimeExports.jsx(OF,{label:oe})]}),jsxRuntimeExports.jsx("div",{className:"error-layout__body",children:jsxRuntimeExports.jsxs("div",{className:"error-layout__content",children:[jsxRuntimeExports.jsx(wk,{className:"error-layout__content-icon"}),jsxRuntimeExports.jsx("div",{className:"error-layout__title",children:K}),J&&jsxRuntimeExports.jsx("div",{className:"error-layout__subtitle",children:J}),ne]})})]})};let ErrorBoundary$1=class extends reactExports.Component{constructor(){super(...arguments);Xn(this,"state",{hasError:!1})}static getDerivedStateFromError(){return externalStorage.clear(),externalStorage.removeAllMainGridScrollPercents(),{hasError:!0}}componentDidCatch(ne,oe){var ue;console.error("Uncaught error:",ne,oe);const ce={Type:HandlerRunTypeEnum.UI_SUPPORT_UTIL,Method:"SaveFrontendError",Keys:[],Arguments:{Error:ne.toString()},userName:(ue=this.props.user)==null?void 0:ue.username};handlerApi.handlerRun(ce)}render(){return this.state.hasError?jsxRuntimeExports.jsx(ErrorLayout,{title:t$5("shared.pleaseReloadPage"),children:jsxRuntimeExports.jsx(rl,{iconBefore:jsxRuntimeExports.jsx(Pk,{}),onClick:()=>window.location.reload(),children:t$5("shared.reloadPage")})}):this.props.children}};const mapStateToProps=K=>({user:selectUser(K)}),ErrorBoundary$2=withTranslation()(connect(mapStateToProps)(ErrorBoundary$1)),THEME_KEYS={dark:"Dark",light:"Light"},createThemeService=()=>{const K=()=>{var Ae;const ce=THEME_KEYS[(Ae=env==null?void 0:env.defaultTheme)==null?void 0:Ae.toLowerCase()],ue=window.matchMedia("(prefers-color-scheme: dark)").matches?THEME_KEYS.dark:THEME_KEYS.light;ne(ce||ue)},J=ce=>({[THEME_KEYS.dark]:Mp,[THEME_KEYS.light]:dF})[ce]||dF,ne=ce=>{const ue=THEME_KEYS[ce==null?void 0:ce.toLowerCase()]||THEME_KEYS.light;document.documentElement.setAttribute("theme",ue),dispatch$1(setApplicationTheme(ue))};return{initTheme:K,setTheme:ne,getTheme:()=>store.getState().AppStateSliceReducer.applicationTheme,getUikitTheme:J}},themeService=createThemeService(),Logo=()=>{const K=useLocation(),J=APP_LOGOS.cl;return K.pathname.includes("login")||K.pathname.includes("server-error")||K.pathname.includes("server-unavailable")?jsxRuntimeExports.jsx(J,{}):jsxRuntimeExports.jsx(APP_LOGOS.white,{})},container$L="_container_hyxp7_1",innerContainer="_innerContainer_hyxp7_8",header$4="_header_hyxp7_12",logo$1="_logo_hyxp7_17",styles$1F={container:container$L,innerContainer,header:header$4,logo:logo$1},defaultRenderContent=()=>jsxRuntimeExports.jsx(PF,{loading:!0}),AppFallbackSkeleton=({renderContent:K=defaultRenderContent,skipContentLoading:J=!1})=>J?null:jsxRuntimeExports.jsxs("div",{className:cx(styles$1F.container,"content"),children:[jsxRuntimeExports.jsx("div",{className:styles$1F.innerContainer,children:jsxRuntimeExports.jsx("div",{className:styles$1F.header,children:jsxRuntimeExports.jsx("div",{className:styles$1F.logo,children:jsxRuntimeExports.jsx(Logo,{})})})}),K()]}),BaseLayout=()=>{const K=useSelector$1(selectApplicationTheme),J=useNavigate(),[ne,oe]=reactExports.useState(!1),[ce,ue]=reactExports.useState(!1),Ae=reactExports.useMemo(()=>themeService.getUikitTheme(K),[K]),pe=async()=>{themeService.initTheme();try{oe(!0),await authService.init()}catch{J(routes.serverError.path)}finally{oe(!1),ue(!0)}};return reactExports.useEffect(()=>{pe()},[]),reactExports.useEffect(()=>{setNavigate(J)},[J]),reactExports.useEffect(()=>{themeService.setTheme(K)},[K]),ne?jsxRuntimeExports.jsx(AppFallbackSkeleton,{skipContentLoading:!0}):ce?jsxRuntimeExports.jsxs(cF,{theme:Ae,children:[jsxRuntimeExports.jsx(UIToastContainer,{}),jsxRuntimeExports.jsx(ErrorBoundary$2,{children:jsxRuntimeExports.jsx(Outlet,{})})]}):null},overrideComponentsDictionary={[THEME_KEYS.dark]:{},[THEME_KEYS.light]:{}};var eventsource={exports:{}};/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */(function(K,J){(function(ne){var oe=ne.setTimeout,ce=ne.clearTimeout,ue=ne.XMLHttpRequest,Ae=ne.XDomainRequest,pe=ne.ActiveXObject,xe=ne.EventSource,me=ne.document,ge=ne.Promise,ye=ne.fetch,Se=ne.Response,Te=ne.TextDecoder,Ne=ne.TextEncoder,$e=ne.AbortController;if(typeof window<"u"&&typeof me<"u"&&!("readyState"in me)&&me.body==null&&(me.readyState="loading",window.addEventListener("load",function(yt){me.readyState="complete"},!1)),ue==null&&pe!=null&&(ue=function(){return new pe("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(yt){function It(){}return It.prototype=yt,new It}),Date.now||(Date.now=function(){return new Date().getTime()}),$e==null){var ke=ye;ye=function(yt,It){var ht=It.signal;return ke(yt,{headers:It.headers,credentials:It.credentials,cache:It.cache}).then(function(gt){var Pt=gt.body.getReader();return ht._reader=Pt,ht._aborted&&ht._reader.cancel(),{status:gt.status,statusText:gt.statusText,headers:gt.headers,body:{getReader:function(){return Pt}}}})},$e=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function je(){this.bitsNeeded=0,this.codePoint=0}je.prototype.decode=function(yt){function It(Rt,dr,Dt){if(Dt===1)return Rt>=128>>dr&&Rt<<dr<=2047;if(Dt===2)return Rt>=2048>>dr&&Rt<<dr<=55295||Rt>=57344>>dr&&Rt<<dr<=65535;if(Dt===3)return Rt>=65536>>dr&&Rt<<dr<=1114111;throw new Error}function ht(Rt,dr){if(Rt===6*1)return dr>>6>15?3:dr>31?2:1;if(Rt===6*2)return dr>15?3:2;if(Rt===6*3)return 3;throw new Error}for(var gt=65533,Pt="",wt=this.bitsNeeded,St=this.codePoint,Zt=0;Zt<yt.length;Zt+=1){var Ct=yt[Zt];wt!==0&&(Ct<128||Ct>191||!It(St<<6|Ct&63,wt-6,ht(wt,St)))&&(wt=0,St=gt,Pt+=String.fromCharCode(St)),wt===0?(Ct>=0&&Ct<=127?(wt=0,St=Ct):Ct>=192&&Ct<=223?(wt=6*1,St=Ct&31):Ct>=224&&Ct<=239?(wt=6*2,St=Ct&15):Ct>=240&&Ct<=247?(wt=6*3,St=Ct&7):(wt=0,St=gt),wt!==0&&!It(St,wt,ht(wt,St))&&(wt=0,St=gt)):(wt-=6,St=St<<6|Ct&63),wt===0&&(St<=65535?Pt+=String.fromCharCode(St):(Pt+=String.fromCharCode(55296+(St-65535-1>>10)),Pt+=String.fromCharCode(56320+(St-65535-1&1023))))}return this.bitsNeeded=wt,this.codePoint=St,Pt};var Ke=function(){try{return new Te().decode(new Ne().encode("test"),{stream:!0})==="test"}catch(yt){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+yt)}return!1};(Te==null||Ne==null||!Ke())&&(Te=je);var Ye=function(){};function ze(yt){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=Ye,this.onload=Ye,this.onerror=Ye,this.onreadystatechange=Ye,this._contentType="",this._xhr=yt,this._sendTimeout=0,this._abort=Ye}ze.prototype.open=function(yt,It){this._abort(!0);var ht=this,gt=this._xhr,Pt=1,wt=0;this._abort=function(Dt){ht._sendTimeout!==0&&(ce(ht._sendTimeout),ht._sendTimeout=0),(Pt===1||Pt===2||Pt===3)&&(Pt=4,gt.onload=Ye,gt.onerror=Ye,gt.onabort=Ye,gt.onprogress=Ye,gt.onreadystatechange=Ye,gt.abort(),wt!==0&&(ce(wt),wt=0),Dt||(ht.readyState=4,ht.onabort(null),ht.onreadystatechange())),Pt=0};var St=function(){if(Pt===1){var Dt=0,Tt="",or=void 0;if("contentType"in gt)Dt=200,Tt="OK",or=gt.contentType;else try{Dt=gt.status,Tt=gt.statusText,or=gt.getResponseHeader("Content-Type")}catch{Dt=0,Tt="",or=void 0}Dt!==0&&(Pt=2,ht.readyState=2,ht.status=Dt,ht.statusText=Tt,ht._contentType=or,ht.onreadystatechange())}},Zt=function(){if(St(),Pt===2||Pt===3){Pt=3;var Dt="";try{Dt=gt.responseText}catch{}ht.readyState=3,ht.responseText=Dt,ht.onprogress()}},Ct=function(Dt,Tt){if((Tt==null||Tt.preventDefault==null)&&(Tt={preventDefault:Ye}),Zt(),Pt===1||Pt===2||Pt===3){if(Pt=4,wt!==0&&(ce(wt),wt=0),ht.readyState=4,Dt==="load")ht.onload(Tt);else if(Dt==="error")ht.onerror(Tt);else if(Dt==="abort")ht.onabort(Tt);else throw new TypeError;ht.onreadystatechange()}},Rt=function(Dt){gt!=null&&(gt.readyState===4?(!("onload"in gt)||!("onerror"in gt)||!("onabort"in gt))&&Ct(gt.responseText===""?"error":"load",Dt):gt.readyState===3?"onprogress"in gt||Zt():gt.readyState===2&&St())},dr=function(){wt=oe(function(){dr()},500),gt.readyState===3&&Zt()};"onload"in gt&&(gt.onload=function(Dt){Ct("load",Dt)}),"onerror"in gt&&(gt.onerror=function(Dt){Ct("error",Dt)}),"onabort"in gt&&(gt.onabort=function(Dt){Ct("abort",Dt)}),"onprogress"in gt&&(gt.onprogress=Zt),"onreadystatechange"in gt&&(gt.onreadystatechange=function(Dt){Rt(Dt)}),("contentType"in gt||!("ontimeout"in ue.prototype))&&(It+=(It.indexOf("?")===-1?"?":"&")+"padding=true"),gt.open(yt,It,!0),"readyState"in gt&&(wt=oe(function(){dr()},0))},ze.prototype.abort=function(){this._abort(!1)},ze.prototype.getResponseHeader=function(yt){return this._contentType},ze.prototype.setRequestHeader=function(yt,It){var ht=this._xhr;"setRequestHeader"in ht&&ht.setRequestHeader(yt,It)},ze.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},ze.prototype.send=function(){if((!("ontimeout"in ue.prototype)||!("sendAsBinary"in ue.prototype)&&!("mozAnon"in ue.prototype))&&me!=null&&me.readyState!=null&&me.readyState!=="complete"){var yt=this;yt._sendTimeout=oe(function(){yt._sendTimeout=0,yt.send()},4);return}var It=this._xhr;"withCredentials"in It&&(It.withCredentials=this.withCredentials);try{It.send(void 0)}catch(ht){throw ht}};function Xe(yt){return yt.replace(/[A-Z]/g,function(It){return String.fromCharCode(It.charCodeAt(0)+32)})}function Je(yt){for(var It=Object.create(null),ht=yt.split(`\r
`),gt=0;gt<ht.length;gt+=1){var Pt=ht[gt],wt=Pt.split(": "),St=wt.shift(),Zt=wt.join(": ");It[Xe(St)]=Zt}this._map=It}Je.prototype.get=function(yt){return this._map[Xe(yt)]},ue!=null&&ue.HEADERS_RECEIVED==null&&(ue.HEADERS_RECEIVED=2);function rt(){}rt.prototype.open=function(yt,It,ht,gt,Pt,wt,St){yt.open("GET",Pt);var Zt=0;yt.onprogress=function(){var Rt=yt.responseText,dr=Rt.slice(Zt);Zt+=dr.length,ht(dr)},yt.onerror=function(Rt){Rt.preventDefault(),gt(new Error("NetworkError"))},yt.onload=function(){gt(null)},yt.onabort=function(){gt(null)},yt.onreadystatechange=function(){if(yt.readyState===ue.HEADERS_RECEIVED){var Rt=yt.status,dr=yt.statusText,Dt=yt.getResponseHeader("Content-Type"),Tt=yt.getAllResponseHeaders();It(Rt,dr,Dt,new Je(Tt))}},yt.withCredentials=wt;for(var Ct in St)Object.prototype.hasOwnProperty.call(St,Ct)&&yt.setRequestHeader(Ct,St[Ct]);return yt.send(),yt};function Ze(yt){this._headers=yt}Ze.prototype.get=function(yt){return this._headers.get(yt)};function et(){}et.prototype.open=function(yt,It,ht,gt,Pt,wt,St){var Zt=null,Ct=new $e,Rt=Ct.signal,dr=new Te;return ye(Pt,{headers:St,credentials:wt?"include":"same-origin",signal:Rt,cache:"no-store"}).then(function(Dt){return Zt=Dt.body.getReader(),It(Dt.status,Dt.statusText,Dt.headers.get("Content-Type"),new Ze(Dt.headers)),new ge(function(Tt,or){var Mt=function(){Zt.read().then(function(kt){if(kt.done)Tt(void 0);else{var ur=dr.decode(kt.value,{stream:!0});ht(ur),Mt()}}).catch(function(kt){or(kt)})};Mt()})}).catch(function(Dt){if(Dt.name!=="AbortError")return Dt}).then(function(Dt){gt(Dt)}),{abort:function(){Zt!=null&&Zt.cancel(),Ct.abort()}}};function nt(){this._listeners=Object.create(null)}function Ge(yt){oe(function(){throw yt},0)}nt.prototype.dispatchEvent=function(yt){yt.target=this;var It=this._listeners[yt.type];if(It!=null)for(var ht=It.length,gt=0;gt<ht;gt+=1){var Pt=It[gt];try{typeof Pt.handleEvent=="function"?Pt.handleEvent(yt):Pt.call(this,yt)}catch(wt){Ge(wt)}}},nt.prototype.addEventListener=function(yt,It){yt=String(yt);var ht=this._listeners,gt=ht[yt];gt==null&&(gt=[],ht[yt]=gt);for(var Pt=!1,wt=0;wt<gt.length;wt+=1)gt[wt]===It&&(Pt=!0);Pt||gt.push(It)},nt.prototype.removeEventListener=function(yt,It){yt=String(yt);var ht=this._listeners,gt=ht[yt];if(gt!=null){for(var Pt=[],wt=0;wt<gt.length;wt+=1)gt[wt]!==It&&Pt.push(gt[wt]);Pt.length===0?delete ht[yt]:ht[yt]=Pt}};function ve(yt){this.type=yt,this.target=void 0}function Be(yt,It){ve.call(this,yt),this.data=It.data,this.lastEventId=It.lastEventId}Be.prototype=Object.create(ve.prototype);function Re(yt,It){ve.call(this,yt),this.status=It.status,this.statusText=It.statusText,this.headers=It.headers}Re.prototype=Object.create(ve.prototype);function Ie(yt,It){ve.call(this,yt),this.error=It.error}Ie.prototype=Object.create(ve.prototype);var Fe=-1,qe=0,We=1,Ue=2,_e=-1,Qe=0,tt=1,it=2,at=3,ot=/^text\/event\-stream(;.*)?$/i,lt=1e3,st=18e6,ut=function(yt,It){var ht=yt==null?It:parseInt(yt,10);return ht!==ht&&(ht=It),ft(ht)},ft=function(yt){return Math.min(Math.max(yt,lt),st)},dt=function(yt,It,ht){try{typeof It=="function"&&It.call(yt,ht)}catch(gt){Ge(gt)}};function Bt(yt,It){nt.call(this),It=It||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,bt(this,yt,It)}function pt(){return ue!=null&&"withCredentials"in ue.prototype||Ae==null?new ue:new Ae}var mt=ye!=null&&Se!=null&&"body"in Se.prototype;function bt(yt,It,ht){It=String(It);var gt=!!ht.withCredentials,Pt=ht.lastEventIdQueryParameterName||"lastEventId",wt=ft(1e3),St=ut(ht.heartbeatTimeout,45e3),Zt="",Ct=wt,Rt=!1,dr=0,Dt=ht.headers||{},Tt=ht.Transport,or=mt&&Tt==null?void 0:new ze(Tt!=null?new Tt:pt()),Mt=Tt!=null&&typeof Tt!="string"?new Tt:or==null?new et:new rt,kt=void 0,ur=0,$t=Fe,jt="",nr="",Ot="",Lt="",lr=Qe,Ht=0,qt=0,tr=function(Kt,yr,zt,Jt){if($t===qe)if(Kt===200&&zt!=null&&ot.test(zt)){$t=We,Rt=Date.now(),Ct=wt,yt.readyState=We;var xr=new Re("open",{status:Kt,statusText:yr,headers:Jt});yt.dispatchEvent(xr),dt(yt,yt.onopen,xr)}else{var Xt="";Kt!==200?(yr&&(yr=yr.replace(/\s+/g," ")),Xt="EventSource's response has a status "+Kt+" "+yr+" that is not 200. Aborting the connection."):Xt="EventSource's response has a Content-Type specifying an unsupported type: "+(zt==null?"-":zt.replace(/\s+/g," "))+". Aborting the connection.",br();var xr=new Re("error",{status:Kt,statusText:yr,headers:Jt});yt.dispatchEvent(xr),dt(yt,yt.onerror,xr),console.error(Xt)}},Vt=function(Kt){if($t===We){for(var yr=-1,zt=0;zt<Kt.length;zt+=1){var Jt=Kt.charCodeAt(zt);(Jt===10||Jt===13)&&(yr=zt)}var xr=(yr!==-1?Lt:"")+Kt.slice(0,yr+1);Lt=(yr===-1?Lt:"")+Kt.slice(yr+1),Kt!==""&&(Rt=Date.now(),dr+=Kt.length);for(var Xt=0;Xt<xr.length;Xt+=1){var Jt=xr.charCodeAt(Xt);if(lr===_e&&Jt===10)lr=Qe;else if(lr===_e&&(lr=Qe),Jt===13||Jt===10){if(lr!==Qe){lr===tt&&(qt=Xt+1);var ir=xr.slice(Ht,qt-1),Mr=xr.slice(qt+(qt<Xt&&xr.charCodeAt(qt)===32?1:0),Xt);ir==="data"?(jt+=`
`,jt+=Mr):ir==="id"?nr=Mr:ir==="event"?Ot=Mr:ir==="retry"?(wt=ut(Mr,wt),Ct=wt):ir==="heartbeatTimeout"&&(St=ut(Mr,St),ur!==0&&(ce(ur),ur=oe(function(){Yt()},St)))}if(lr===Qe){if(jt!==""){Zt=nr,Ot===""&&(Ot="message");var er=new Be(Ot,{data:jt.slice(1),lastEventId:nr});if(yt.dispatchEvent(er),Ot==="open"?dt(yt,yt.onopen,er):Ot==="message"?dt(yt,yt.onmessage,er):Ot==="error"&&dt(yt,yt.onerror,er),$t===Ue)return}jt="",Ot=""}lr=Jt===13?_e:Qe}else lr===Qe&&(Ht=Xt,lr=tt),lr===tt?Jt===58&&(qt=Xt+1,lr=it):lr===it&&(lr=at)}}},Gt=function(Kt){if($t===We||$t===qe){$t=Fe,ur!==0&&(ce(ur),ur=0),ur=oe(function(){Yt()},Ct),Ct=ft(Math.min(wt*16,Ct*2)),yt.readyState=qe;var yr=new Ie("error",{error:Kt});yt.dispatchEvent(yr),dt(yt,yt.onerror,yr),Kt!=null&&console.error(Kt)}},br=function(){$t=Ue,kt!=null&&(kt.abort(),kt=void 0),ur!==0&&(ce(ur),ur=0),yt.readyState=Ue},Yt=function(){if(ur=0,$t!==Fe){if(!Rt&&kt!=null)Gt(new Error("No activity within "+St+" milliseconds. "+($t===qe?"No response received.":dr+" chars received.")+" Reconnecting.")),kt!=null&&(kt.abort(),kt=void 0);else{var Kt=Math.max((Rt||Date.now())+St-Date.now(),1);Rt=!1,ur=oe(function(){Yt()},Kt)}return}Rt=!1,dr=0,ur=oe(function(){Yt()},St),$t=qe,jt="",Ot="",nr=Zt,Lt="",Ht=0,qt=0,lr=Qe;var yr=It;if(It.slice(0,5)!=="data:"&&It.slice(0,5)!=="blob:"&&Zt!==""){var zt=It.indexOf("?");yr=zt===-1?It:It.slice(0,zt+1)+It.slice(zt+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(Mr,er){return er===Pt?"":Mr}),yr+=(It.indexOf("?")===-1?"?":"&")+Pt+"="+encodeURIComponent(Zt)}var Jt=yt.withCredentials,xr={};xr.Accept="text/event-stream";var Xt=yt.headers;if(Xt!=null)for(var ir in Xt)Object.prototype.hasOwnProperty.call(Xt,ir)&&(xr[ir]=Xt[ir]);try{kt=Mt.open(or,tr,Vt,Gt,yr,Jt,xr)}catch(Mr){throw br(),Mr}};yt.url=It,yt.readyState=qe,yt.withCredentials=gt,yt.headers=Dt,yt._close=br,Yt()}Bt.prototype=Object.create(nt.prototype),Bt.prototype.CONNECTING=qe,Bt.prototype.OPEN=We,Bt.prototype.CLOSED=Ue,Bt.prototype.close=function(){this._close()},Bt.CONNECTING=qe,Bt.OPEN=We,Bt.CLOSED=Ue,Bt.prototype.withCredentials=void 0;var xt=xe;ue!=null&&(xe==null||!("withCredentials"in xe.prototype))&&(xt=Bt),function(yt){{var It=yt(J);It!==void 0&&(K.exports=It)}}(function(yt){yt.EventSourcePolyfill=Bt,yt.NativeEventSource=xe,yt.EventSource=xt})})(typeof globalThis>"u"?typeof window<"u"?window:typeof self<"u"?self:commonjsGlobal:globalThis)})(eventsource,eventsource.exports);var eventsourceExports=eventsource.exports,SSEEventKindEnum=(K=>(K.LOG="Log",K.ERROR="Error",K.WARNING="Warning",K.TASK_STARTED="TaskStarted",K.TASK_FINISHED="TaskFinished",K))(SSEEventKindEnum||{});const SSE_CONNECTION_EVENT_TYPES=["LOG","ERROR","WARNING","TASK_STARTED","TASK_FINISHED"],SSE_EVENT_TASKS_TYPES=["TaskStarted","TaskFinished"],SSEContext=reactExports.createContext(void 0),useSSEContext=()=>{const K=reactExports.useContext(SSEContext);return K||(console.error("useSSEContext must be used within an SSEProvider"),{error:"SSEContext not found",eventsBatch:[],setEventsBatch:()=>{}})},SSEProvider=({children:K})=>{const J=reactExports.useRef([]),ne=useSelector$1(selectIsAuthenticated),oe=useSelector$1(selectProviders),[ce,ue]=reactExports.useState([]),Ae=pe=>{const xe=JSON.parse(pe.data);J.current.push(xe)};return reactExports.useEffect(()=>{const pe=setInterval(()=>{J.current.length>0&&(ue(J.current),J.current=[])},100);return()=>clearInterval(pe)},[]),reactExports.useEffect(()=>{if(!ne)return;const pe=oe.length!==0,xe=new eventsourceExports.EventSourcePolyfill(sseApi.events(),{withCredentials:pe});return SSE_CONNECTION_EVENT_TYPES.forEach(me=>{xe.addEventListener(me,Ae)}),()=>{SSE_CONNECTION_EVENT_TYPES.forEach(me=>{xe.removeEventListener(me,Ae)}),xe.close()}},[ne]),jsxRuntimeExports.jsx(SSEContext.Provider,{value:{eventsBatch:ce,setEventsBatch:ue},children:K})};function memo(K,J,ne){let oe=ne.initialDeps??[],ce;return()=>{var ue,Ae,pe,xe;let me;ne.key&&((ue=ne.debug)!=null&&ue.call(ne))&&(me=Date.now());const ge=K();if(!(ge.length!==oe.length||ge.some((Te,Ne)=>oe[Ne]!==Te)))return ce;oe=ge;let Se;if(ne.key&&((Ae=ne.debug)!=null&&Ae.call(ne))&&(Se=Date.now()),ce=J(...ge),ne.key&&((pe=ne.debug)!=null&&pe.call(ne))){const Te=Math.round((Date.now()-me)*100)/100,Ne=Math.round((Date.now()-Se)*100)/100,$e=Ne/16,ke=(je,Ke)=>{for(je=String(je);je.length<Ke;)je=" "+je;return je};console.info(`%c ${ke(Ne,5)} /${ke(Te,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*$e,120))}deg 100% 31%);`,ne==null?void 0:ne.key)}return(xe=ne==null?void 0:ne.onChange)==null||xe.call(ne,ce),ce}}function notUndefined(K,J){if(K===void 0)throw new Error("Unexpected undefined");return K}const approxEqual=(K,J)=>Math.abs(K-J)<1,debounce$1=(K,J,ne)=>{let oe;return function(...ce){K.clearTimeout(oe),oe=K.setTimeout(()=>J.apply(this,ce),ne)}},defaultKeyExtractor=K=>K,defaultRangeExtractor=K=>{const J=Math.max(K.startIndex-K.overscan,0),ne=Math.min(K.endIndex+K.overscan,K.count-1),oe=[];for(let ce=J;ce<=ne;ce++)oe.push(ce);return oe},observeElementRect=(K,J)=>{const ne=K.scrollElement;if(!ne)return;const oe=K.targetWindow;if(!oe)return;const ce=Ae=>{const{width:pe,height:xe}=Ae;J({width:Math.round(pe),height:Math.round(xe)})};if(ce(ne.getBoundingClientRect()),!oe.ResizeObserver)return()=>{};const ue=new oe.ResizeObserver(Ae=>{const pe=Ae[0];if(pe!=null&&pe.borderBoxSize){const xe=pe.borderBoxSize[0];if(xe){ce({width:xe.inlineSize,height:xe.blockSize});return}}ce(ne.getBoundingClientRect())});return ue.observe(ne,{box:"border-box"}),()=>{ue.unobserve(ne)}},addEventListenerOptions={passive:!0},supportsScrollend=typeof window>"u"?!0:"onscrollend"in window,observeElementOffset=(K,J)=>{const ne=K.scrollElement;if(!ne)return;const oe=K.targetWindow;if(!oe)return;let ce=0;const ue=supportsScrollend?()=>{}:debounce$1(oe,()=>{J(ce,!1)},K.options.isScrollingResetDelay),Ae=me=>()=>{const{horizontal:ge,isRtl:ye}=K.options;ce=ge?ne.scrollLeft*(ye&&-1||1):ne.scrollTop,ue(),J(ce,me)},pe=Ae(!0),xe=Ae(!1);return xe(),ne.addEventListener("scroll",pe,addEventListenerOptions),ne.addEventListener("scrollend",xe,addEventListenerOptions),()=>{ne.removeEventListener("scroll",pe),ne.removeEventListener("scrollend",xe)}},measureElement=(K,J,ne)=>{if(J!=null&&J.borderBoxSize){const oe=J.borderBoxSize[0];if(oe)return Math.round(oe[ne.options.horizontal?"inlineSize":"blockSize"])}return Math.round(K.getBoundingClientRect()[ne.options.horizontal?"width":"height"])},elementScroll=(K,{adjustments:J=0,behavior:ne},oe)=>{var ce,ue;const Ae=K+J;(ue=(ce=oe.scrollElement)==null?void 0:ce.scrollTo)==null||ue.call(ce,{[oe.options.horizontal?"left":"top"]:Ae,behavior:ne})};class Virtualizer{constructor(J){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let ne=null;const oe=()=>ne||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:ne=new this.targetWindow.ResizeObserver(ce=>{ce.forEach(ue=>{this._measureElement(ue.target,ue)})}));return{disconnect:()=>{var ce;(ce=oe())==null||ce.disconnect(),ne=null},observe:ce=>{var ue;return(ue=oe())==null?void 0:ue.observe(ce,{box:"border-box"})},unobserve:ce=>{var ue;return(ue=oe())==null?void 0:ue.unobserve(ce)}}})(),this.range=null,this.setOptions=ne=>{Object.entries(ne).forEach(([oe,ce])=>{typeof ce>"u"&&delete ne[oe]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:defaultKeyExtractor,rangeExtractor:defaultRangeExtractor,onChange:()=>{},measureElement,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,...ne}},this.notify=ne=>{var oe,ce;(ce=(oe=this.options).onChange)==null||ce.call(oe,this,ne)},this.maybeNotify=memo(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),ne=>{this.notify(ne)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(ne=>ne()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var ne;const oe=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==oe){if(this.cleanup(),!oe){this.maybeNotify();return}this.scrollElement=oe,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((ne=this.scrollElement)==null?void 0:ne.window)??null,this.elementsCache.forEach(ce=>{this.observer.observe(ce)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,ce=>{this.scrollRect=ce,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(ce,ue)=>{this.scrollAdjustments=0,this.scrollDirection=ue?this.getScrollOffset()<ce?"forward":"backward":null,this.scrollOffset=ce,this.isScrolling=ue,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(ne,oe)=>{const ce=new Map,ue=new Map;for(let Ae=oe-1;Ae>=0;Ae--){const pe=ne[Ae];if(ce.has(pe.lane))continue;const xe=ue.get(pe.lane);if(xe==null||pe.end>xe.end?ue.set(pe.lane,pe):pe.end<xe.end&&ce.set(pe.lane,!0),ce.size===this.options.lanes)break}return ue.size===this.options.lanes?Array.from(ue.values()).sort((Ae,pe)=>Ae.end===pe.end?Ae.index-pe.index:Ae.end-pe.end)[0]:void 0},this.getMeasurementOptions=memo(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(ne,oe,ce,ue,Ae)=>(this.pendingMeasuredCacheIndexes=[],{count:ne,paddingStart:oe,scrollMargin:ce,getItemKey:ue,enabled:Ae}),{key:!1}),this.getMeasurements=memo(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:ne,paddingStart:oe,scrollMargin:ce,getItemKey:ue,enabled:Ae},pe)=>{if(!Ae)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(ge=>{this.itemSizeCache.set(ge.key,ge.size)}));const xe=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const me=this.measurementsCache.slice(0,xe);for(let ge=xe;ge<ne;ge++){const ye=ue(ge),Se=this.options.lanes===1?me[ge-1]:this.getFurthestMeasurement(me,ge),Te=Se?Se.end+this.options.gap:oe+ce,Ne=pe.get(ye),$e=typeof Ne=="number"?Ne:this.options.estimateSize(ge),ke=Te+$e,je=Se?Se.lane:ge%this.options.lanes;me[ge]={index:ge,start:Te,size:$e,end:ke,key:ye,lane:je}}return this.measurementsCache=me,me},{key:!1,debug:()=>this.options.debug}),this.calculateRange=memo(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(ne,oe,ce)=>this.range=ne.length>0&&oe>0?calculateRange({measurements:ne,outerSize:oe,scrollOffset:ce}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=memo(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(ne,oe,ce,ue)=>oe===null?[]:ne({startIndex:oe.startIndex,endIndex:oe.endIndex,overscan:ce,count:ue}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=ne=>{const oe=this.options.indexAttribute,ce=ne.getAttribute(oe);return ce?parseInt(ce,10):(console.warn(`Missing attribute name '${oe}={index}' on measured element.`),-1)},this._measureElement=(ne,oe)=>{const ce=this.indexFromElement(ne),ue=this.measurementsCache[ce];if(!ue)return;const Ae=ue.key,pe=this.elementsCache.get(Ae);pe!==ne&&(pe&&this.observer.unobserve(pe),this.observer.observe(ne),this.elementsCache.set(Ae,ne)),ne.isConnected&&this.resizeItem(ce,this.options.measureElement(ne,oe,this))},this.resizeItem=(ne,oe)=>{const ce=this.measurementsCache[ne];if(!ce)return;const ue=this.itemSizeCache.get(ce.key)??ce.size,Ae=oe-ue;Ae!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(ce,Ae,this):ce.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=Ae,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(ce.index),this.itemSizeCache=new Map(this.itemSizeCache.set(ce.key,oe)),this.notify(!1))},this.measureElement=ne=>{if(!ne){this.elementsCache.forEach((oe,ce)=>{oe.isConnected||(this.observer.unobserve(oe),this.elementsCache.delete(ce))});return}this._measureElement(ne,void 0)},this.getVirtualItems=memo(()=>[this.getIndexes(),this.getMeasurements()],(ne,oe)=>{const ce=[];for(let ue=0,Ae=ne.length;ue<Ae;ue++){const pe=ne[ue],xe=oe[pe];ce.push(xe)}return ce},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=ne=>{const oe=this.getMeasurements();if(oe.length!==0)return notUndefined(oe[findNearestBinarySearch(0,oe.length-1,ce=>notUndefined(oe[ce]).start,ne)])},this.getOffsetForAlignment=(ne,oe)=>{const ce=this.getSize(),ue=this.getScrollOffset();oe==="auto"&&(ne<=ue?oe="start":ne>=ue+ce?oe="end":oe="start"),oe==="start"?ne=ne:oe==="end"?ne=ne-ce:oe==="center"&&(ne=ne-ce/2);const Ae=this.options.horizontal?"scrollWidth":"scrollHeight",xe=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[Ae]:this.scrollElement[Ae]:0)-ce;return Math.max(Math.min(xe,ne),0)},this.getOffsetForIndex=(ne,oe="auto")=>{ne=Math.max(0,Math.min(ne,this.options.count-1));const ce=this.measurementsCache[ne];if(!ce)return;const ue=this.getSize(),Ae=this.getScrollOffset();if(oe==="auto")if(ce.end>=Ae+ue-this.options.scrollPaddingEnd)oe="end";else if(ce.start<=Ae+this.options.scrollPaddingStart)oe="start";else return[Ae,oe];const pe=oe==="end"?ce.end+this.options.scrollPaddingEnd:ce.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(pe,oe),oe]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(ne,{align:oe="start",behavior:ce}={})=>{this.cancelScrollToIndex(),ce==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(ne,oe),{adjustments:void 0,behavior:ce})},this.scrollToIndex=(ne,{align:oe="auto",behavior:ce}={})=>{ne=Math.max(0,Math.min(ne,this.options.count-1)),this.cancelScrollToIndex(),ce==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const ue=this.getOffsetForIndex(ne,oe);if(!ue)return;const[Ae,pe]=ue;this._scrollToOffset(Ae,{adjustments:void 0,behavior:ce}),ce!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(ne))){const[me]=notUndefined(this.getOffsetForIndex(ne,pe));approxEqual(me,this.getScrollOffset())||this.scrollToIndex(ne,{align:pe,behavior:ce})}else this.scrollToIndex(ne,{align:pe,behavior:ce})}))},this.scrollBy=(ne,{behavior:oe}={})=>{this.cancelScrollToIndex(),oe==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+ne,{adjustments:void 0,behavior:oe})},this.getTotalSize=()=>{var ne;const oe=this.getMeasurements();let ce;return oe.length===0?ce=this.options.paddingStart:ce=this.options.lanes===1?((ne=oe[oe.length-1])==null?void 0:ne.end)??0:Math.max(...oe.slice(-this.options.lanes).map(ue=>ue.end)),Math.max(ce-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(ne,{adjustments:oe,behavior:ce})=>{this.options.scrollToFn(ne,{behavior:ce,adjustments:oe},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(J)}}const findNearestBinarySearch=(K,J,ne,oe)=>{for(;K<=J;){const ce=(K+J)/2|0,ue=ne(ce);if(ue<oe)K=ce+1;else if(ue>oe)J=ce-1;else return ce}return K>0?K-1:0};function calculateRange({measurements:K,outerSize:J,scrollOffset:ne}){const oe=K.length-1,ue=findNearestBinarySearch(0,oe,pe=>K[pe].start,ne);let Ae=ue;for(;Ae<oe&&K[Ae].end<ne+J;)Ae++;return{startIndex:ue,endIndex:Ae}}const useIsomorphicLayoutEffect$3=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useVirtualizerBase(K){const J=reactExports.useReducer(()=>({}),{})[1],ne={...K,onChange:(ce,ue)=>{var Ae;ue?reactDomExports.flushSync(J):J(),(Ae=K.onChange)==null||Ae.call(K,ce,ue)}},[oe]=reactExports.useState(()=>new Virtualizer(ne));return oe.setOptions(ne),reactExports.useEffect(()=>oe._didMount(),[]),useIsomorphicLayoutEffect$3(()=>oe._willUpdate()),oe}function useVirtualizer(K){return useVirtualizerBase({observeElementRect,observeElementOffset,scrollToFn:elementScroll,...K})}function useMergeRefs(K){return reactExports.useMemo(()=>K.every(J=>J==null)?null:J=>{K.forEach(ne=>{typeof ne=="function"?ne(J):ne!=null&&(ne.current=J)})},K)}const container$K="_container_1u1ol_1",hidden$2="_hidden_1u1ol_9",styles$1E={container:container$K,hidden:hidden$2},VerticalScroll=reactExports.memo(({isHidden:K,setHidden:J,totalHeight:ne,scrollOffset:oe,scrollToOffset:ce})=>{const ue=reactExports.useRef(null),{ref:Ae,height:pe=0}=useResizeObserver(),xe=useMergeRefs([Ae,ue]);reactExports.useEffect(()=>{!ue.current||ue.current.scrollTop===oe||ue.current.scrollTo({top:oe})},[oe]),reactExports.useEffect(()=>{J==null||J(ne<pe)},[ne,pe]);const me=ge=>{const ye=ge.currentTarget.scrollTop;ye!==oe&&ce(ye)};return jsxRuntimeExports.jsx("div",{ref:xe,className:cx(styles$1E.container,{[styles$1E.hidden]:K}),onScroll:me,children:jsxRuntimeExports.jsx("div",{style:{height:ne},className:styles$1E.container})})});VerticalScroll.displayName="VerticalScroll";const base64ToUint8Array=K=>{const J=atob(K),ne=J.length,oe=new Uint8Array(ne);for(let ce=0;ce<ne;ce++)oe[ce]=J.charCodeAt(ce);return oe},downloadZipFromObject=(K,J)=>{let ne=base64ToUint8Array(K);const oe=new Blob([ne],{type:"application/zip"}),ce=URL.createObjectURL(oe),ue=document.createElement("a");ue.href=ce,ue.download=J||"",document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),URL.revokeObjectURL(ce)},DownloadLogsButton=()=>{const{t:K}=useTranslation(),J=useSelector$1(selectActiveDataset$1),ne=useSelector$1(selectUser),oe=()=>{const ce={Type:HandlerRunTypeEnum.UI_SUPPORT_UTIL,Method:"DownloadLogs",Keys:[],Dataset:J,userName:ne==null?void 0:ne.username};handlerApi.handlerRun(ce).then(ue=>{ue.forEach(Ae=>{const pe=Ae.Result;pe.FileBytes&&downloadZipFromObject(pe.FileBytes,pe.Name)})}).catch(toast.error)};return jsxRuntimeExports.jsx(mf,{title:K("header.downloadLogs"),children:jsxRuntimeExports.jsx(rl,{"data-tid":"download-logs-button",type:"secondary",variant:"ghost",onClick:oe,iconBefore:jsxRuntimeExports.jsx(vD,{size:"M"})})})},dropdown$1="_dropdown_hhp0s_1",allItem="_allItem_hhp0s_5",dropdownItem$2="_dropdownItem_hhp0s_14",title$3="_title_hhp0s_22",filterIcon="_filterIcon_hhp0s_27",styles$1D={dropdown:dropdown$1,allItem,dropdownItem:dropdownItem$2,title:title$3,filterIcon},LogsFilter=({onSetActiveFilters:K,activeFilters:J,initLogsFilters:ne=[],logsFiltersListItems:oe=[]})=>{const{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(!1),pe=J.length===(ne==null?void 0:ne.length),xe=$e=>J.includes($e),me=$e=>{K($e)},ge=$e=>{const ke=J.includes($e)?J.filter(je=>je!==$e):[...J,$e];me(ke)},ye=!!J.length&&J.length!==(oe==null?void 0:oe.length),Se=()=>{me((J==null?void 0:J.length)===(oe==null?void 0:oe.length)?[]:ne)},Te=()=>jsxRuntimeExports.jsx(rl,{testid:"logs-filter-icon",variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(zB,{})}),Ne=()=>me(ne);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(X_,{open:ue,onOpenChange:Ae,className:styles$1D.dropdown,menu:{items:[{key:ce("logsFilter.all"),label:jsxRuntimeExports.jsxs("div",{"aria-hidden":!0,className:cx(styles$1D.dropdownItem,styles$1D.allItem),onClick:$e=>$e.stopPropagation(),children:[jsxRuntimeExports.jsx(pF,{intermediate:ye,value:pe,onClick:Se}),jsxRuntimeExports.jsx("span",{className:styles$1D.title,children:ce("logsFilter.all")})]})},...oe.map($e=>({key:$e.title,label:jsxRuntimeExports.jsxs("div",{"aria-hidden":!0,className:styles$1D.dropdownItem,onClick:ke=>ke.stopPropagation(),children:[jsxRuntimeExports.jsx(pF,{value:xe($e.value),onChange:()=>ge($e.value)}),jsxRuntimeExports.jsx("span",{className:styles$1D.title,children:ce($e.title)})]})}))]},children:jsxRuntimeExports.jsx("div",{"aria-hidden":!0,className:styles$1D.filterIcon,onClick:()=>Ae(!ue),children:pe?Te():jsxRuntimeExports.jsx(vF,{size:"sm",color:"info",children:Te()})})}),!pe&&jsxRuntimeExports.jsx(mf,{title:ce("logsFilter.clear"),children:jsxRuntimeExports.jsx(rl,{testid:"logs-clear-filter-icon",variant:"ghost",type:"danger",iconBefore:jsxRuntimeExports.jsx(WB,{}),onClick:Ne})})]})},container$J="_container_1559l_1",styles$1C={container:container$J},LogsActions=({onClearLogsList:K,onSetActiveFilters:J,activeFilters:ne,initLogsFilters:oe,logsFiltersListItems:ce,searchValue:ue,onChangeSearchValue:Ae,isFilter:pe=!0})=>{const{t:xe}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:styles$1C.container,children:[jsxRuntimeExports.jsx(Ml,{allowClear:!0,variant:"outlined",prefix:jsxRuntimeExports.jsx(gf$1,{}),placeholder:xe("logs.search"),className:styles$1C.searchInput,value:ue,onChange:Ae}),pe&&jsxRuntimeExports.jsx(LogsFilter,{onSetActiveFilters:J,activeFilters:ne,initLogsFilters:oe,logsFiltersListItems:ce}),!env.isSimplifiedBuild&&jsxRuntimeExports.jsx(DownloadLogsButton,{}),jsxRuntimeExports.jsx(mf,{title:xe("logs.eraseLogs"),placement:"topLeft",children:jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(mB,{}),onClick:K})})]})},getStatusIcon=K=>{switch(K){case LogsLevelEnum.WARNING:return jsxRuntimeExports.jsx(W5,{});case LogsLevelEnum.ERROR:case LogsLevelEnum.CRITICAL:return jsxRuntimeExports.jsx(wk,{});default:return""}},getLogsDateFormat=K=>`${DateFormatUtility.create(K).format(DateFormatEnum.DATE_BULLET_TIME)}`,getLogsTooltipDateFormat=K=>`${DateFormatUtility.create(K).format(DateFormatEnum.DATE)} ${DateFormatUtility.create(K).format(DateFormatEnum.TIME)}`,LogsFlatViewItem=({listItem:K})=>{const{t:J}=useTranslation(),{Level:ne,ReadableTime:oe,Message:ce,RecordTypeName:ue,HandlerName:Ae,TaskRunId:pe,RecordKey:xe}=K,me=(ye,Se)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("span",{children:[ye,": "]}),Se]}),ge=()=>{const ye=ue??xe??Ae??pe;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"logs-flat-view-item__tooltip-date",children:getLogsTooltipDateFormat(oe)}),ce,ye&&jsxRuntimeExports.jsxs("div",{className:"logs-flat-view-item__tooltip-info",children:[jsxRuntimeExports.jsx("br",{}),ue&&me(J("logs.type"),ue),xe&&me(J("logs.key"),xe),Ae&&me(J("logs.handler"),Ae),pe&&me(J("logs.taskId"),pe)]})]})};return jsxRuntimeExports.jsx(mf,{title:ge(),className:"logs-flat-view-item__tooltip",children:jsxRuntimeExports.jsxs("div",{className:cx("logs-flat-view-item",{"logs-flat-view-item__status--warning":ne===LogsLevelEnum.WARNING,"logs-flat-view-item__status--error":ne===LogsLevelEnum.ERROR||ne===LogsLevelEnum.CRITICAL}),children:[jsxRuntimeExports.jsxs("div",{className:"logs-flat-view-item__info",children:[getStatusIcon(ne),jsxRuntimeExports.jsx("div",{className:"logs-flat-view-item__message",children:ce})]}),jsxRuntimeExports.jsx("div",{className:"logs-flat-view-item__timestamp",children:getLogsDateFormat(oe)})]})})},ITEM_HEIGHT=66,LogsFlatViewList=({logsListData:K,onClearLogsList:J,filtersArr:ne,initLogsFilters:oe,onChangeFilters:ce,savedActiveFilters:ue=[],isFilter:Ae=!0})=>{const[pe,xe]=reactExports.useState([]),[me,ge]=reactExports.useState(""),[ye,Se]=reactExports.useState([]),Te=reactExports.useRef(null),Ne=useVirtualizer({count:pe.length,getScrollElement:()=>Te.current,estimateSize:()=>ITEM_HEIGHT,paddingEnd:1});reactExports.useEffect(()=>{ue.length>0&&ye.length===0&&Se(ue)},[ue]),reactExports.useEffect(()=>{const Ye=K.filter(ze=>{if(!ze)return;let Xe=ze.Message.toLowerCase().includes(me.toLowerCase());return Ae&&Xe&&(Xe=ye==null?void 0:ye.includes(ze.Level)),Xe});return xe(Ye),()=>Ne.scrollToOffset(0)},[me,ye,K]);const $e=()=>{J(),xe([])},ke=Ye=>{Se(Ye),ce==null||ce(Ye)},je=Ye=>{const ze=Ye.deltaY;Ne.scrollToOffset(Number(Ne.scrollOffset)+ze)},Ke=Ne.getTotalSize();return jsxRuntimeExports.jsxs("div",{className:"logs-flat-view",children:[jsxRuntimeExports.jsx(LogsActions,{onClearLogsList:$e,onSetActiveFilters:ke,activeFilters:ye,initLogsFilters:oe,logsFiltersListItems:ne,searchValue:me,onChangeSearchValue:ge,isFilter:Ae}),jsxRuntimeExports.jsxs("div",{className:"logs-flat-view__container",children:[jsxRuntimeExports.jsx("div",{ref:Te,className:"logs-flat-view__container-list",onWheel:je,children:jsxRuntimeExports.jsx("div",{className:"logs-flat-view__list",style:{height:Math.round(Ke)},children:Ne.getVirtualItems().map(Ye=>{const ze=pe[Ye.index];return jsxRuntimeExports.jsx("div",{className:"logs-flat-view__list-item",style:{transform:`translateY(${Ye.start}px)`},children:jsxRuntimeExports.jsx(LogsFlatViewItem,{listItem:ze},Ye.index)},Ye.key)})})}),jsxRuntimeExports.jsx(VerticalScroll,{isHidden:Ke===0,scrollOffset:Number(Ne.scrollOffset),totalHeight:Ke,scrollToOffset:Ne.scrollToOffset})]})]})},getHandlerRecordName=(K,J)=>J&&K?`${J} > ${K}`:J||K||"",LogsHandlersViewItem=reactExports.memo(({handlerData:K,recordName:J,handlerStatus:ne})=>{const{t:oe}=useTranslation(),[ce,ue]=reactExports.useState(!1),Ae=getHandlerRecordName(K[0].HandlerName,J),pe=K.length>1,xe=()=>ue(ye=>!ye),me=(ye,Se,Te,Ne)=>{const{Level:$e,HandlerName:ke,Message:je}=ye;return Te&&ne===RunHandlerStatusCodeEnum.Completed?jsxRuntimeExports.jsx("div",{className:cx({"logs-handlers-view-item__success-status":Se}),children:je||oe("logs.completedHandler",{handlerName:ke})}):$e===LogsLevelEnum.ERROR?jsxRuntimeExports.jsx("div",{className:cx({"logs-handlers-view-item__error-status":Se}),children:je||oe("logs.failedHandler")}):jsxRuntimeExports.jsx("div",{className:cx("logs-handlers-view-item__info-status",{"logs-handlers-view-item__loading-status":!ce&&!Ne}),children:je})},ge=(ye,Se)=>{const{Level:Te,ReadableTime:Ne}=ye,$e=ne===RunHandlerStatusCodeEnum.Failed&&Te!==LogsLevelEnum.INFO,ke=ne===RunHandlerStatusCodeEnum.Completed&&Se,je=!ce&&!$e&&!ke;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"logs-handlers-view-item__message",children:[$e&&jsxRuntimeExports.jsx(wk,{className:"logs-handlers-view-item__error-status"}),ke&&jsxRuntimeExports.jsx(__$1,{className:"logs-handlers-view-item__success-status"}),je&&jsxRuntimeExports.jsx(j_,{className:"logs-handlers-view-item__spinner"}),jsxRuntimeExports.jsx("div",{className:"logs-handlers-view-item__status",children:jsxRuntimeExports.jsx(mf,{title:me(ye,!1,!1,!0),children:me(ye,!0,Se)})})]}),jsxRuntimeExports.jsx("div",{className:"logs-handlers-view-item__timestamp",children:getLogsDateFormat(Ne)})]})};return jsxRuntimeExports.jsxs("div",{className:cx("logs-handlers-view-item",{"logs-handlers-view-item__expanded":ce}),children:[jsxRuntimeExports.jsxs("div",{className:"logs-handlers-view-item__header",children:[jsxRuntimeExports.jsxs("div",{className:"logs-handlers-view-item__title",children:[jsxRuntimeExports.jsx(tD,{}),Ae]}),pe&&jsxRuntimeExports.jsx(rl,{size:"sm",variant:"ghost",type:"secondary",iconBefore:ce?jsxRuntimeExports.jsx(hk,{}):jsxRuntimeExports.jsx(Rp,{}),onClick:xe})]}),ce?K.map((ye,Se)=>{const Te=Se===K.length-1;return jsxRuntimeExports.jsx("div",{className:"logs-handlers-view-item__expanded-item",children:ge(ye,Te)},ye.Timestamp)}):ge(K[K.length-1],!0)]})});LogsHandlersViewItem.displayName="LogsHandlersViewItem";const listContent="_listContent_2uvo3_1",styles$1B={listContent},LogsHandlersViewList=({handlersListData:K,onClearHandlersData:J})=>{const[ne,oe]=reactExports.useState([]),[ce,ue]=reactExports.useState(""),[Ae,pe]=reactExports.useState(externalStorage.getLogsHandlersViewFilters());reactExports.useEffect(()=>{const me=K.filter(ge=>isDefined$1(ge)&&getHandlerRecordName(ge.HandlerName,ge.RecordKey).toLowerCase().includes(ce.toLowerCase())&&Ae.includes(ge.Status));oe(me)},[ce,Ae,K]);const xe=me=>{pe(me),externalStorage.setLogsHandlersViewFilters(me)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LogsActions,{onClearLogsList:J,onSetActiveFilters:xe,activeFilters:Ae,initLogsFilters:initLogsHandlersViewFilters,logsFiltersListItems:logsHandlersViewFiltersList,searchValue:ce,onChangeSearchValue:ue}),jsxRuntimeExports.jsx("div",{className:styles$1B.listContent,children:ne.map(me=>jsxRuntimeExports.jsx(LogsHandlersViewItem,{handlerData:me.Logs,recordName:me.RecordKey,handlerStatus:me.Status},me.TaskRunId))})]})},LogsList=({activeListView:K,logsListData:J,handlersListData:ne,errorLogsListData:oe,onClearLogsData:ce,onClearErrorLogs:ue,onClearHandlersData:Ae})=>{switch(K){case LogsListViewEnum.LOGS:return jsxRuntimeExports.jsx(LogsFlatViewList,{logsListData:J,onClearLogsList:ce,filtersArr:logsFlatViewFiltersList,initLogsFilters:initLogsFlatViewFilters,onChangeFilters:externalStorage.setLogsFlatViewFilters,savedActiveFilters:externalStorage.getLogsFlatViewFilters()});case LogsListViewEnum.HANDLERS:return jsxRuntimeExports.jsx(LogsHandlersViewList,{handlersListData:ne,onClearHandlersData:Ae});case LogsListViewEnum.ERRORS:return jsxRuntimeExports.jsx(LogsFlatViewList,{isFilter:!1,logsListData:oe,onClearLogsList:ue});default:return null}},getLogsHeaderViewIcons=K=>[{id:"logsRunIcon",icon:jsxRuntimeExports.jsx(tD,{}),label:"logs.handlers",viewStatus:LogsListViewEnum.HANDLERS},{id:"logsSystemIcon",icon:jsxRuntimeExports.jsx(M_,{}),label:"logs.errors",viewStatus:LogsListViewEnum.ERRORS,disabled:K.length===0},{id:"logsBurgerLargeIcon",icon:jsxRuntimeExports.jsx(rA,{}),label:"logs.all",viewStatus:LogsListViewEnum.LOGS}],useLogsPanel=()=>{const K="isLogsPanel",[J,ne]=reactExports.useState(externalStorage.getIsLogsPanel());reactExports.useEffect(()=>(window.addEventListener(K,oe),()=>{window.removeEventListener(K,oe)}),[]);const oe=()=>{ne(externalStorage.getIsLogsPanel())};return{isOpen:J,togglePanel:ue=>{externalStorage.setIsLogsPanel(ue),window.dispatchEvent(new Event(K))}}},Logs=()=>{const{togglePanel:K}=useLogsPanel(),{eventsBatch:J,setEventsBatch:ne}=useSSEContext(),oe=useSelector$1(selectUser),[ce,ue]=reactExports.useState(LogsListViewEnum.HANDLERS),[Ae,pe]=reactExports.useState([]),[xe,me]=reactExports.useState([]),[ge,ye]=reactExports.useState([]);reactExports.useEffect(()=>()=>{externalStorage.setLogsFlatViewFilters(initLogsFlatViewFilters),externalStorage.setLogsHandlersViewFilters(initLogsHandlersViewFilters)},[]);const Se=reactExports.useMemo(()=>structuredClone(J),[J]),Te=()=>{const rt={Type:HandlerRunTypeEnum.UI_LOG_UTIL,Keys:[],userName:oe==null?void 0:oe.username};handlerApi.handlerRun({...rt,Method:"GetFlatLogs"}).then(Ze=>{if(!Ze.length)return;const et=Ze.flatMap(nt=>nt.Result).reverse();pe(et)}),handlerApi.handlerRun({...rt,Method:"GetErrorLogs"}).then(Ze=>{if(!Ze.length)return;const et=Ze.flatMap(nt=>nt.Result).reverse();me(et)}),handlerApi.handlerRun({...rt,Method:"GetLogsByTask"}).then(Ze=>{if(!Ze.length)return;const et=Ze.flatMap(nt=>nt.Result).reverse();ye(et)})};reactExports.useEffect(()=>{ne([]),Te()},[]),reactExports.useEffect(()=>{if(Se.length)return pe(rt=>[...Ne(rt,Se),...Ae]),ye(rt=>je(rt,Se)),me(rt=>[...Ke(Ne(rt,Se)),...xe]),()=>{ne([])}},[Se]);const Ne=(rt,Ze)=>{let et=[];return Ze.forEach(nt=>{const{EventKind:Ge,Timestamp:ve}=nt;Ge===SSEEventKindEnum.LOG&&!(rt!=null&&rt.find(Re=>(Re==null?void 0:Re.Timestamp)===ve))&&(et=[nt,...et])}),et},$e=(rt,Ze)=>rt.find(et=>et.Timestamp===Ze),ke=rt=>rt.map((Ze,et)=>et===rt.length-1?{...Ze,Level:LogsLevelEnum.ERROR}:Ze),je=(rt,Ze)=>{let et=rt!=null&&rt.length?[...rt]:[];return Ze.forEach(nt=>{const{Status:Ge,ReadableTime:ve="",HandlerName:Be,TaskRunId:Re,RecordTypeName:Ie,EventKind:Fe,RecordKey:qe,Message:We,Timestamp:Ue}=nt,_e=Fe===SSEEventKindEnum.LOG,Qe=Fe===SSEEventKindEnum.TASK_FINISHED;if(Re&&(_e||Qe)){const tt={ReadableTime:ve,HandlerName:Be,TaskRunId:Re,Message:We,Timestamp:Ue};if(et.find(at=>(at==null?void 0:at.TaskRunId)===Re))et.some((at,ot)=>{const{Logs:lt,TaskRunId:st}=at;if(st===Re){if($e(lt,Ue))return at;if(Qe)return et[ot]={...at,Status:Ge||RunHandlerStatusCodeEnum.Failed,Logs:ke(lt)},!0;if(_e)return et[ot]={...at,Logs:[...lt,{...tt,Level:Ge===RunHandlerStatusCodeEnum.Failed?LogsLevelEnum.ERROR:LogsLevelEnum.INFO}]},!0}});else return et=[{TaskRunId:Re,RecordTypeName:Ie,HandlerName:Be,Status:RunHandlerStatusCodeEnum.Failed,ReadableTime:ve,RecordKey:qe,Logs:[{...tt,Level:LogsLevelEnum.INFO}]},...et],!0}return!1}),et},Ke=rt=>rt.filter(Ze=>Ze.Level===LogsLevelEnum.ERROR),Ye=rt=>ue(rt),ze=()=>pe([]),Xe=()=>me([]),Je=()=>ye([]);return jsxRuntimeExports.jsxs("div",{className:"logs-panel",children:[jsxRuntimeExports.jsxs("div",{className:"logs-panel__header",children:[jsxRuntimeExports.jsx("div",{className:"logs-panel__header-title",children:t$5("logs.title")}),jsxRuntimeExports.jsx(rl,{type:"secondary",variant:"ghost",iconBefore:jsxRuntimeExports.jsx(_c,{}),onClick:()=>K(!1)})]}),jsxRuntimeExports.jsxs("div",{className:"logs-panel__content",children:[jsxRuntimeExports.jsx("div",{className:"logs-panel__tabs",children:getLogsHeaderViewIcons(xe).map(({id:rt,icon:Ze,label:et,viewStatus:nt,disabled:Ge})=>jsxRuntimeExports.jsxs("div",{"aria-hidden":"true",className:cx("logs-panel__tab",{"logs-panel__tab-active":ce===nt,"logs-panel__tab-disabled":Ge}),onClick:()=>!Ge&&Ye(nt),children:[Ze,jsxRuntimeExports.jsx("div",{children:t$5(et)})]},rt))}),jsxRuntimeExports.jsx(LogsList,{activeListView:ce,logsListData:Ae,handlersListData:ge,errorLogsListData:xe,onClearLogsData:ze,onClearErrorLogs:Xe,onClearHandlersData:Je})]})]})},getNoGridDataTitle=(K,J)=>{switch(K){case LoadingStatusesEnum.ERROR:return J;case LoadingStatusesEnum.SUCCESS:return t$5("noData.inTheReport");default:return""}},isInteractiveDashboard=K=>{var ne,oe;return!!((oe=(ne=K.Implement)==null?void 0:ne.Handlers)==null?void 0:oe.find(ce=>ce.Name==="SendPrompt"))},selectDataset=K=>K.DatasetDataSliceReducer.datasetData,selectMetaData=K=>K.GridTabsDataSliceReducer.tabsData.metaData;var GridModeEnum=(K=>(K.DEFAULT="DEFAULT",K.MAIN="MAIN",K.EDITOR="EDITOR",K.READ_ONLY="READ ONLY",K))(GridModeEnum||{}),GridColumWidth=(K=>(K[K.MIN_WIDTH=50]="MIN_WIDTH",K[K.DEFAULT_WIDTH=150]="DEFAULT_WIDTH",K[K.MAX_WIDTH=400]="MAX_WIDTH",K))(GridColumWidth||{}),BoolEnum=(K=>(K.YES="Y",K.NO="N",K))(BoolEnum||{}),ColumnNameType=(K=>(K.HANDLER_STATUS="handlerStatus",K.FILTER="filter",K))(ColumnNameType||{}),columnIdEnum=(K=>(K.filter="filter",K.handlerStatus="handlerStatus",K))(columnIdEnum||{}),CellRowsCount=(K=>(K[K.ONE=1]="ONE",K[K.FIVE=5]="FIVE",K[K.TWENTY=20]="TWENTY",K[K.HUNDRED=100]="HUNDRED",K))(CellRowsCount||{});const CELL_HEIGHT_ROWS_COUNT=[1,5,20,100],rowsCountArr=CELL_HEIGHT_ROWS_COUNT.map(K=>({label:String(K),value:String(K)})),useRequest=(K,J={})=>{const ne=reactExports.useRef(!0),[oe,ce]=reactExports.useState(LoadingStatusesEnum.INITIAL),[ue,Ae]=reactExports.useState(!1),[pe,xe]=reactExports.useState(J.initState??null),[me,ge]=reactExports.useState(null),ye=async Se=>{var Te,Ne;try{ce(LoadingStatusesEnum.LOADING),ge(null);const $e=await K(Se);return ne.current&&(Ae(!0),xe($e),ce(LoadingStatusesEnum.SUCCESS),(Te=J.onSuccess)==null||Te.call(J,$e)),$e}catch($e){throw(Ne=J.onError)==null||Ne.call(J,$e),ge($e),ce(LoadingStatusesEnum.ERROR),$e}};return reactExports.useEffect(()=>(J.autorun&&ye(J==null?void 0:J.args),()=>{ne.current=!1}),[]),{fetch:ye,isInitiated:oe===LoadingStatusesEnum.INITIAL,isLoading:oe===LoadingStatusesEnum.LOADING,status:oe,state:pe,hasInitFetch:ue,error:me,hasError:!!me}};var AppContextOpenTabParamsCase=(K=>(K.ChatAbout="ChatAbout",K))(AppContextOpenTabParamsCase||{});const useEditorRequest=()=>{const{t:K}=useTranslation(),J=useRequest(storageApi.getRecord),ne=useRequest(storageApi.saveEntity),oe=useRequest(schemaApi.getType),ce=useSelector$1(selectActiveDataset$1),ue=async({data:xe,recordType:me,isInsert:ge=!1,isToast:ye=!0})=>{try{const Se=await ne.fetch({dataset:ce,data:[{_t:me,...xe}],isInsert:ge});return ye&&toast.success(K("editor.entitySavedSuccessfully")),Se}catch(Se){throw ye&&toast.error(Se),Se}},Ae=async xe=>{try{return await oe.fetch(xe)}catch(me){throw toast.error(me),me}};return{getRecord:{...J,fetch:async xe=>{try{return await J.fetch(xe)}catch(me){throw toast.error(me),me}}},saveEntity:{...ne,fetch:ue},getSchema:{...oe,fetch:Ae}}};function createMainGridService(){const K=new Map;return{register(J){return K.set(J.name,J),this},emit(J){var ne;return K.has(J)&&((ne=K.get(J))==null||ne()),this},clear(){return K.clear(),this}}}const mainGridService=createMainGridService(),AppContextWrapper=reactExports.createContext(null),initState$1={isEditorDataChanged:!1,activeEditorTab:EditorTabsEnum.EDITOR,cacheTabData:null,showLineHider:!0,resetDndContextMethodRef:{current:null},mainGridService:{}},AppContext$1=({children:K})=>{const J=reactExports.useRef(initState$1.isEditorDataChanged),ne=reactExports.useRef(null),{saveEntity:oe}=useEditorRequest(),[ce,ue]=reactExports.useState(initState$1.activeEditorTab),[Ae,pe]=reactExports.useState(initState$1.cacheTabData),[xe,me]=reactExports.useState(""),[ge,ye]=reactExports.useState(""),Se=reactExports.useRef(initState$1.resetDndContextMethodRef.current),Te=({query:Re,entityData:Ie,entitySchema:Fe,type:qe})=>{if(!Re||!Ie||!Fe||!qe)return;const We={query:Re,entityData:Ie,entitySchema:Fe};pe(Ue=>Ue!=null&&Ue[qe]?(Ue[qe]=We,{...Ue}):{...Ue,[qe]:We})},Ne=Re=>{Re&&(Ae!=null&&Ae[Re])&&(delete Ae[Re],pe(Ae))},[$e,ke]=reactExports.useState(!0),[je,Ke]=reactExports.useState({}),Ye=(Re,Ie)=>{Ke(Fe=>({...Fe,[Re]:Ie}))},ze=(Re,Ie,Fe)=>{Ie(je[Re])},Xe=Re=>{Ke(Ie=>(delete Ie[Re],Ie))},Je=(Re,Ie,Fe)=>{if(!J.current){Re();return}Ho.warning({title:instance.t("unsavedChangeModal.title"),content:instance.t("unsavedChangeModal.content"),onOk:qe=>{ne.current&&oe.fetch({data:ne.current,recordType:Ie??""}).then(()=>{Fe()}),Re(),J.current=!1,ne.current=null,qe()},testId:"leave-editor",onCancel:qe=>{mainGridService.emit("clearSelection"),qe()},onClose:()=>{mainGridService.emit("clearSelection")}})},rt=Re=>{if(!J.current){Re();return}Ho.warning({title:instance.t("unsavedChangeInfoModal.title"),content:instance.t("unsavedChangeInfoModal.content"),cancelText:null,testId:"unsaved-changes"})},Ze=Re=>{J.current=Re},et=Re=>{ne.current=Re},nt=Re=>ue(Re),Ge=Re=>ke(Re),ve=Re=>{var Ie;(Ie=Se.current)==null||Ie.callBack(Re)},Be={state:{isEditorDataChanged:J.current,activeEditorTab:ce,cacheTabData:Ae,showLineHider:$e,resetDndContextMethodRef:Se,successMessage:xe,updatedRecordId:ge,mainGridService},action:{setIsEditorDataChangedAction:Ze,setActiveEditorTabAction:nt,setCacheQueryDataAction:Te,clearCacheQueryByTypeAction:Ne,setShowLineHiderAction:Ge,onConfirmLeaveEditor:Je,checkUnsavedEditor:rt,callResetDndContextMethod:ve,setSuccessMessage:me,setUpdatedRecordId:ye,setChangedDataEditorAction:et},openTabParams:{chatAbout:{setParams:Re=>Ye(AppContextOpenTabParamsCase.ChatAbout,Re),getParams:Re=>ze(AppContextOpenTabParamsCase.ChatAbout,Re),clearParams:()=>Xe(AppContextOpenTabParamsCase.ChatAbout)}}};return jsxRuntimeExports.jsx(AppContextWrapper.Provider,{value:Be,children:K})},useAppContext=()=>{const K=reactExports.useContext(AppContextWrapper);return{state:(K==null?void 0:K.state)||{},action:(K==null?void 0:K.action)||{},openTabParams:(K==null?void 0:K.openTabParams)||{}}},DndContextWrapper=reactExports.createContext(null),initialConfig=returnDefaultConfig([]),initDndContextState={config:initialConfig,configBackup:initialConfig,viewers:[],pinnedHandlers:[],isTypeReadOnly:!1,maximizedTabId:null,layoutDirection:LayoutDirection.VERTICAL,initiallyReceivedLayout:!0,blockDnd:!1,leftMouseBtnClicked:!1,isDragging:!1,tabsZone:null,initialTabsZone:null,dropZone:null,targetStackRef:null,draggingLabel:null,startTabIndex:0,endTabIndex:0,selectedGridRow:{key:"",type:""},dropMarker:{current:null},dropPreview:{current:null},managerRef:{current:null},isHorizontalLayoutDirection:!1,headersRef:{current:null},rowsData:[],selectedGridRowKey:"",cellHeight:null,userGuide:{},isRowBorder:externalStorage.getIsRowBorder(),droppableElRef:{current:null},draggingTabRef:{current:null},draggingTabOffsetWidthRef:{current:0},mouseCoord:{x:0,y:0},isWithinTabs:!0,placeholder:null,shouldInsertPlaceholder:!0,isViewersDataLoading:!0,hideEditor:void 0,isLayoutBtnsDisabled:!1,mouseUpHandlerRef:{current:null},isTabExistInStackRef:{current:null},isLayoutRestored:!1,stacksTabsScrollPosition:{current:{}},initiallyHiddenColumns:[],useCache:!1,shouldIgroreHideEditor:!1,pageSize:null,pageIndex:null,toolbarHandler:{},canceledHandlerIds:[],recordStatuses:{},selectRowByKeyWithDelay:{current:null},executedHandlersInfoByRecord:{},lastHandlerStatus:{},newRunHandlers:{},recordTypeState:null,initialTabsScroll:!0,restoreLayoutRef:{current:null}},DndContext=({activeTabId:K,children:J})=>{const{fetch:ne,isLoading:oe}=useRequest(handlerApi.handlerRun),ce=useSelector$1(selectMetaData),ue=useSelector$1(selectUser),Ae=useSelector$1(selectActiveDataset$1),{state:pe}=useAppContext(),xe=reactExports.useRef(),[me,ge]=reactExports.useState({}),[ye,Se]=reactExports.useState([]),[Te,Ne]=reactExports.useState({}),[$e,ke]=reactExports.useState({}),[je,Ke]=reactExports.useState({}),[Ye,ze]=reactExports.useState({}),[Xe,Je]=reactExports.useState(initDndContextState.config),[rt,Ze]=reactExports.useState(initDndContextState.configBackup),[et,nt]=reactExports.useState(initDndContextState.viewers),[Ge,ve]=reactExports.useState([]),[Be,Re]=reactExports.useState(initDndContextState.isTypeReadOnly),[Ie,Fe]=reactExports.useState(initDndContextState.maximizedTabId),[qe,We]=reactExports.useState(initDndContextState.layoutDirection),[Ue,_e]=reactExports.useState(initDndContextState.initiallyReceivedLayout),[Qe,tt]=reactExports.useState(initDndContextState.recordTypeState),it=reactExports.useMemo(()=>qe===LayoutDirection.HORIZONTAL,[qe]),[at,ot]=reactExports.useState(initDndContextState.blockDnd),[lt,st]=reactExports.useState(initDndContextState.leftMouseBtnClicked),[ut,ft]=reactExports.useState(initDndContextState.isDragging),[dt,Bt]=reactExports.useState(initDndContextState.tabsZone),[pt,mt]=reactExports.useState(initDndContextState.initialTabsZone),[bt,xt]=reactExports.useState(initDndContextState.dropZone),[yt,It]=reactExports.useState(initDndContextState.targetStackRef),[ht,gt]=reactExports.useState(initDndContextState.draggingLabel),[Pt,wt]=reactExports.useState(initDndContextState.startTabIndex),[St,Zt]=reactExports.useState(initDndContextState.endTabIndex),[Ct,Rt]=reactExports.useState(initDndContextState.selectedGridRow),[dr,Dt]=reactExports.useState(initDndContextState.rowsData),[Tt,or]=reactExports.useState(initDndContextState.selectedGridRowKey),[Mt,kt]=reactExports.useState(initDndContextState.cellHeight),[ur,$t]=reactExports.useState(initDndContextState.userGuide),[jt,nr]=reactExports.useState(initDndContextState.isRowBorder),[Ot,Lt]=reactExports.useState(initDndContextState.mouseCoord),[lr,Ht]=reactExports.useState(initDndContextState.isWithinTabs),[qt,tr]=reactExports.useState(initDndContextState.placeholder),[Vt,Gt]=reactExports.useState(initDndContextState.shouldInsertPlaceholder),[br,Yt]=reactExports.useState(initDndContextState.hideEditor),[Kt,yr]=reactExports.useState(initDndContextState.isLayoutBtnsDisabled),[zt,Jt]=reactExports.useState(initDndContextState.isLayoutRestored),[xr,Xt]=reactExports.useState(initDndContextState.initiallyHiddenColumns),[ir,Mr]=reactExports.useState(initDndContextState.useCache),[er,fr]=reactExports.useState(initDndContextState.shouldIgroreHideEditor),[Qr,sr]=reactExports.useState(initDndContextState.pageSize),[Ar,Kr]=reactExports.useState(initDndContextState.pageIndex),[ar]=reactExports.useState(initDndContextState.initialTabsScroll),hr=reactExports.useRef(initDndContextState.dropMarker.current),Lr=reactExports.useRef(initDndContextState.dropPreview.current),Pr=reactExports.useRef(initDndContextState.managerRef.current),Yr=reactExports.useRef(initDndContextState.restoreLayoutRef.current),Wr=reactExports.useRef(initDndContextState.droppableElRef.current),Zr=reactExports.useRef(initDndContextState.draggingTabRef.current),Jr=reactExports.useRef(initDndContextState.draggingTabOffsetWidthRef.current),Gr=reactExports.useRef(initDndContextState.mouseUpHandlerRef.current),sn=reactExports.useRef(initDndContextState.isTabExistInStackRef.current),ln=reactExports.useRef(initDndContextState.stacksTabsScrollPosition.current),hn=reactExports.useRef(initDndContextState.selectRowByKeyWithDelay.current),pn=Er=>{if(Er.isSorted&&!Er.isSortedDesc)return!1;if(Er.isSorted&&Er.isSortedDesc)return!0},Xr=Er=>{yr(Er)},yn=async({simplifiedConfig:Er,handlers:Sn,readOnly:Bn,maximizedTabId:$n,cellHeight:Un,userGuideCompleted:Fn,isHideEditorActive:Pn,headers:Gn,updatedColumnsState:qn,columnsWidths:Yn,isLayoutRestored:Qn,originalColumns:ct})=>{var vt,Et;if(!(!ce.data||!Er||!ue))try{const{Module:_t}=ce.data;let Ut=qn||(Gn||((vt=xe.current)==null?void 0:vt.headers)||[]).reduce((Qt,cr)=>{var pr,gr;return cr.id!==ColumnNameType.FILTER&&cr.id!==ColumnNameType.HANDLER_STATUS?[...Qt,{Id:cr.id,Filter:Qn?"":cr.filterValue??"",Hidden:Qn?!1:!cr.isVisible,SortDesc:Qn?void 0:pn(cr),SizeInPercent:parseInt(String(Qn?(Yn==null?void 0:Yn[cr.Header])??((pr=cr.getHeaderProps().style)==null?void 0:pr.width)??150:((gr=cr.getHeaderProps().style)==null?void 0:gr.width)??150),10),MaxSizeInPixels:cr.maxWidth,MinSizeInPixels:cr.minWidth,SizeFixed:!cr.canResize,_t:"ColumnState"}]:Qt},[])||[];Qn&&ct&&Ut.length&&(Ut=ct.map(Qt=>Ut.find(cr=>cr.Id===Qt.id)));const Nt={_t:SimplifiedEnum.UI_TYPE_STATE,ReadOnly:Bn,Layout:Er,User:ue.id,ColumnsState:Ut.filter(Qt=>Qt!=null)||[],PinnedHandlers:Sn||[],MaximizedTabId:$n||"",MainGridCellHeight:Un||+env.gridMaxLines,UserGuideContent:ur.userGuideContent||"",UserGuideFormat:ur.userGuideFormat||"",UserGuideCompleted:Fn??ur.userGuideCompleted??!1,HideEditor:Pn??br??!1,UseCache:ir,Type_:`${_t.ModuleName};${K}`,PageSize:Qr,PageIndex:Ar};(Et=xe.current)!=null&&Et.data&&!Object.hasOwn(xe.current.data,"Layout")&&(xe.current.addLayoutToSettings&&xe.current.addLayoutToSettings(Er),Ue&&_e(!1)),Xr(!0),await storageApi.saveEntity({dataset:Ae,data:[Nt]}).then(()=>{cn(Nt.PinnedHandlers),si(Nt.MainGridCellHeight)}).finally(()=>{Xr(!1)})}catch(_t){toast.error(_t)}},xn=({simplifiedConfig:Er,handlers:Sn,MaximizedTabId:Bn,cellRowsHeight:$n,userGuideCompleted:Un,isHideEditorActive:Fn,headers:Pn,updatedColumnsState:Gn,isLayoutRestored:qn=!1})=>{var Qn,ct;const Yn=getParsedConfig(rt,!0);Pn&&xe.current&&(xe.current.headers=Pn),yn({simplifiedConfig:Er||Yn,handlers:Sn||Ge,readOnly:Be,maximizedTabId:Bn||"",cellHeight:$n||Mt||CellRowsCount.ONE,userGuideCompleted:Un,isHideEditorActive:Fn,headers:Pn,updatedColumnsState:Gn,columnsWidths:(Qn=Yr.current)==null?void 0:Qn.columnsWidths,isLayoutRestored:qn,originalColumns:qn?(ct=Yr.current)==null?void 0:ct.originalColumns:void 0})},dn=Er=>{nt(Er||[])},cn=Er=>{ve(Er)},wn=()=>{ve([])},Cn=Er=>{Re(Er)},Rr=()=>{Re(!1)},Rn=(Er,Sn=!1)=>{Fe(Er),Sn||xn({handlers:Ge,MaximizedTabId:Er})},gn=()=>{Fe(null)},kn=()=>{Ie!==GridTabEnum.MAIN&&Rn(Ie!==GridTabEnum.MAIN?GridTabEnum.MAIN:"")},Kn=()=>{Ie!==EditorTabsEnum.EDITOR&&Rn(Ie!==EditorTabsEnum.EDITOR?EditorTabsEnum.EDITOR:"")},Jn=Er=>{We(Er),K&&externalStorage.setLayoutDirectiom(K,Er)},vi=reactExports.useCallback((Er,Sn,Bn)=>{switch(!0){case!!Bn:return[...(Bn==null?void 0:Bn.map($n=>EDITOR_TABS[$n]))||[],...et];case Er===EditorTabsEnum.NEW_ENTITY:return[EDITOR_TABS[EditorTabsEnum.NEW_ENTITY]];case Er===EditorTabsEnum.COPY_ENTITY:return[EDITOR_TABS[EditorTabsEnum.COPY_ENTITY]];case Er===EditorTabsEnum.SELECT_TYPE:return[EDITOR_TABS[EditorTabsEnum.SELECT_TYPE]];default:{const $n=Sn==="DAG";return[EDITOR_TABS[EditorTabsEnum.EDITOR],...$n?[EDITOR_TABS[EditorTabsEnum.DAG]]:[],...et]}}},[et]),yi=Er=>{Je(Er),findParent(Er,[EditorTabsEnum.NEW_ENTITY,EditorTabsEnum.COPY_ENTITY])||Ze(structuredClone(Er))},xi=Er=>{Dt(Er)},ai=Er=>{or(Er)},Ei=Er=>{or(Er)},bi=()=>kt(null),si=Er=>kt(Er),wi=Er=>{$t(Er)},Ci=()=>{$t({})},Si=Er=>{$t({...ur,userGuideCompleted:Er})},oi=Er=>{nr(Er),externalStorage.setIsRowBorder(Er)},li=Er=>{Ht(Er)},ci=Er=>{Lt(Er)},_i=async Er=>{if(K)try{const Sn={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"GetRecordPanels",Keys:[],Arguments:{TypeName:(Er==null?void 0:Er.type)||K,Key:(Er==null?void 0:Er.key)||""},Dataset:Ae,userName:ue==null?void 0:ue.username},$n=(await ne(Sn))[0].Result;let Un=!0;dn(($n==null?void 0:$n.map(({Name:Fn,Kind:Pn,Persistable:Gn})=>{const qn={id:Fn,key:Fn,label:Fn,isClosable:Gn,isActive:Un&&!!Pn,isCurrentlyDragging:!1,isPrimary:Pn};return Pn&&Un&&(Un=!1),qn}))||[])}catch(Sn){toast.error(Sn)}},Bi=Er=>{Yt(Er)},Ti=Er=>{const Sn=externalStorage.getLayoutDirection(Er||"");We(Sn||LayoutDirection.VERTICAL),Je(initDndContextState.config),Ze(initDndContextState.configBackup),nt(initDndContextState.viewers),ve(initDndContextState.pinnedHandlers),Re(initDndContextState.isTypeReadOnly),Fe(initDndContextState.maximizedTabId),We(initDndContextState.layoutDirection),_e(initDndContextState.initiallyReceivedLayout),ot(initDndContextState.blockDnd),st(initDndContextState.leftMouseBtnClicked),ft(initDndContextState.isDragging),Bt(initDndContextState.tabsZone),mt(initDndContextState.initialTabsZone),xt(initDndContextState.dropZone),It(initDndContextState.targetStackRef),gt(initDndContextState.draggingLabel),wt(initDndContextState.startTabIndex),Zt(initDndContextState.endTabIndex),Rt(initDndContextState.selectedGridRow),Dt(initDndContextState.rowsData),or(initDndContextState.selectedGridRowKey),kt(initDndContextState.cellHeight),$t(initDndContextState.userGuide),Lt(initDndContextState.mouseCoord),Ht(initDndContextState.isWithinTabs),tr(initDndContextState.placeholder),Gt(initDndContextState.shouldInsertPlaceholder),Yt(initDndContextState.hideEditor),tt(initDndContextState.recordTypeState),Xr(initDndContextState.isLayoutBtnsDisabled),Wr.current=initDndContextState.droppableElRef.current,Zr.current=initDndContextState.draggingTabRef.current,Jr.current=initDndContextState.draggingTabOffsetWidthRef.current,Gr.current=initDndContextState.mouseUpHandlerRef.current,sn.current=initDndContextState.isTabExistInStackRef.current,xe.current=initDndContextState.headersRef.current},ei=Er=>{Xt(Er)},Ri=()=>{Xt([])};reactExports.useImperativeHandle(pe.resetDndContextMethodRef,()=>({callBack:Ti}));const Ii=Er=>{Mr(Er)},$i=()=>{Mr(initDndContextState.useCache)},ui=Er=>Kr(Er),Mi=Er=>sr(Er);reactExports.useEffect(()=>{const Er=externalStorage.getLayoutDirection(K||"");return We(Er||LayoutDirection.VERTICAL),fr((ue==null?void 0:ue.roles.includes(UserRole.Developer))||!1),()=>{Je(initDndContextState.config),Ze(initDndContextState.configBackup),nt(initDndContextState.viewers),ve(initDndContextState.pinnedHandlers),Re(initDndContextState.isTypeReadOnly),Fe(initDndContextState.maximizedTabId),We(initDndContextState.layoutDirection),_e(initDndContextState.initiallyReceivedLayout),ot(initDndContextState.blockDnd),st(initDndContextState.leftMouseBtnClicked),ft(initDndContextState.isDragging),Bt(initDndContextState.tabsZone),mt(initDndContextState.initialTabsZone),xt(initDndContextState.dropZone),It(initDndContextState.targetStackRef),gt(initDndContextState.draggingLabel),wt(initDndContextState.startTabIndex),Zt(initDndContextState.endTabIndex),Rt(initDndContextState.selectedGridRow),Dt(initDndContextState.rowsData),or(initDndContextState.selectedGridRowKey),kt(initDndContextState.cellHeight),$t(initDndContextState.userGuide),Lt(initDndContextState.mouseCoord),Ht(initDndContextState.isWithinTabs),tr(initDndContextState.placeholder),Gt(initDndContextState.shouldInsertPlaceholder),Yt(initDndContextState.hideEditor),ei(initDndContextState.initiallyHiddenColumns),Mr(initDndContextState.useCache),Xr(initDndContextState.isLayoutBtnsDisabled),Wr.current=initDndContextState.droppableElRef.current,Zr.current=initDndContextState.draggingTabRef.current,Jr.current=initDndContextState.draggingTabOffsetWidthRef.current,Gr.current=initDndContextState.mouseUpHandlerRef.current,sn.current=initDndContextState.isTabExistInStackRef.current,ln.current=initDndContextState.stacksTabsScrollPosition.current,hn.current=initDndContextState.selectRowByKeyWithDelay.current,Yr.current=initDndContextState.restoreLayoutRef.current,xe.current=initDndContextState.headersRef.current}},[K]),reactExports.useEffect(()=>(lt&&Gr.current&&document.addEventListener("mouseup",Gr.current),()=>{Gr.current&&document.removeEventListener("mouseup",Gr.current)}),[lt]);const Ni=Er=>{const{tableName:Sn,handlerId:Bn,data:$n,statusCode:Un}=Er;ge(Fn=>{const Pn=Sn in Fn&&Bn in Fn[Sn]?{...Fn[Sn][Bn]}:{};return $n==null||$n.forEach(({Key:Gn,TaskRunId:qn})=>{Pn[Gn||Bn]={TaskRunId:qn,StatusCode:Un}}),{...Fn,[Sn]:{...Fn[Sn],[Bn]:{...Pn}}}})},Di=Er=>{ge(Sn=>{const Bn=structuredClone(Sn);return Object.keys(Bn).forEach($n=>{Oi(Bn[$n],Er)}),Bn})},Oi=(Er,Sn)=>{Object.keys(Er).forEach(Bn=>{ti(Er[Bn],Sn)})},ti=(Er,Sn)=>{Object.keys(Er).forEach(Bn=>{const $n=Sn.find(Un=>Un.TaskRunId===Er[Bn].TaskRunId);$n&&(Er[Bn]=$n)})},ri=Er=>Se(Er),Zn=()=>{Ne(Er=>{const Sn=Object.entries({...Er});return Object.fromEntries(Sn.filter(([,{statusCode:Bn}])=>Bn===RunHandlerStatusCodeEnum.Running))})},ni=Er=>{Ne(Sn=>{const Bn={...Sn};return Er.forEach(({Key:$n,StatusCode:Un,Message:Fn})=>{var Pn;$n&&(Bn[$n]={statusCode:Un,message:Fn??((Pn=Sn[$n])==null?void 0:Pn.message)??void 0})}),Bn})},ii=()=>{ge({}),ri([]),Ne({}),ke({}),Ke({}),ze({})},fi=Er=>{const Bn={...Qe??{},PinnedHandlers:Er,User:ue==null?void 0:ue.username,ReadOnly:!1};storageApi.saveEntity({dataset:Ae,data:[Bn]}).then(()=>tt(Bn))},di=reactExports.useMemo(()=>({state:{config:Xe,configBackup:rt,viewers:et,pinnedHandlers:Ge,isTypeReadOnly:Be,maximizedTabId:Ie,layoutDirection:qe,isHorizontalLayoutDirection:it,initiallyReceivedLayout:Ue,blockDnd:at,leftMouseBtnClicked:lt,isDragging:ut,tabsZone:dt,initialTabsZone:pt,dropZone:bt,targetStackRef:yt,draggingLabel:ht,startTabIndex:Pt,endTabIndex:St,selectedGridRow:Ct,dropMarker:hr,dropPreview:Lr,managerRef:Pr,headersRef:xe,rowsData:dr,selectedGridRowKey:Tt,cellHeight:Mt,userGuide:ur,isRowBorder:jt,droppableElRef:Wr,draggingTabRef:Zr,draggingTabOffsetWidthRef:Jr,mouseCoord:Ot,isWithinTabs:lr,placeholder:qt,shouldInsertPlaceholder:Vt,isViewersDataLoading:oe,hideEditor:br,isLayoutBtnsDisabled:Kt,mouseUpHandlerRef:Gr,isTabExistInStackRef:sn,isLayoutRestored:zt,stacksTabsScrollPosition:ln,initiallyHiddenColumns:xr,useCache:ir,shouldIgroreHideEditor:er,pageIndex:Ar,pageSize:Qr,toolbarHandler:me,canceledHandlerIds:ye,recordStatuses:Te,selectRowByKeyWithDelay:hn,executedHandlersInfoByRecord:$e,lastHandlerStatus:je,newRunHandlers:Ye,recordTypeState:Qe,initialTabsScroll:ar,restoreLayoutRef:Yr},action:{updateViewers:dn,getEditorTabs:vi,updatePinnedHandlers:cn,resetPinnedHandlers:wn,updateIsReadOnly:Cn,resetIsReadOnly:Rr,saveUiTypeData:xn,updateMaximizedTabId:Rn,resetMaximizedStates:gn,handleMaximizeGridRow:kn,handleMaximizeEditorRow:Kn,updateLayoutDirection:Jn,setInitiallyReceivedLayout:_e,setBlockDnd:ot,setLeftMouseBtnClicked:st,setIsDragging:ft,setTabsZone:Bt,setInitialTabsZone:mt,setDropZone:xt,setTargetStackRef:It,setDraggingLabel:gt,setStartTabIndex:wt,setEndTabIndex:Zt,setSelectedGridRow:Rt,updateConfig:yi,updateGridRowsData:xi,selectGridRowKey:ai,resetCellHeight:bi,updateCellHeight:si,updateUserGuide:wi,resetUserGuide:Ci,changeIsGuideCompleted:Si,onChangeIsRowBorder:oi,updateMouseCoord:ci,updateIsWithinTabs:li,setPlaceholder:tr,setShouldInsertPlaceholder:Gt,fetchListPanelsData:_i,updateHideEditorValue:Bi,updateIsLayoutBtnsDisabled:Xr,setIsLayoutRestored:Jt,updateInitiallyHiddenColumns:ei,resetInitiallyHiddenColumns:Ri,updateUseCache:Ii,resetUseCache:$i,getSortDesc:pn,updatePageIndex:ui,updatePageSize:Mi,setAllHandlerTasksStatus:Ni,setAllTasksStatuses:Di,setAllCanceledHandlerIds:ri,changeRecordStatuses:ni,clearHandlerState:ii,updateSelectedGridRowKey:Ei,setExecutedHandlersInfoByRecord:ke,setLastHandlerStatus:Ke,setNewRunHandlers:ze,updateRecordPinnedHandlers:fi,setRecordTypeState:tt,clearNotRunningStatuses:Zn}}),[Xe,rt,et,Ge,Be,Ie,qe,it,Ue,at,lt,ut,dt,pt,bt,yt,ht,Pt,St,Ct,hr,Lr,Pr,xe,dr,Tt,Mt,ur,jt,Wr,Zr,Jr,Ot,lr,qt,Vt,oe,br,Kt,Gr,sn,zt,ln,xr,ir,er,Ar,Qr,me,ye,Te,hn,$e,je,Ye,Qe,ar,Yr]);return jsxRuntimeExports.jsx(DndContextWrapper.Provider,{value:di,children:J})},useDndContext=()=>{const K=reactExports.useContext(DndContextWrapper);return{state:(K==null?void 0:K.state)||{},action:(K==null?void 0:K.action)||{}}},PanelGroupContext=reactExports.createContext(null);PanelGroupContext.displayName="PanelGroupContext";const DATA_ATTRIBUTES={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},PRECISION=10,useIsomorphicLayoutEffect$2=reactExports.useLayoutEffect,useId=C$1.useId,wrappedUseId=typeof useId=="function"?useId:()=>null;let counter=0;function useUniqueId$2(K=null){const J=wrappedUseId(),ne=reactExports.useRef(K||J||null);return ne.current===null&&(ne.current=""+counter++),K??ne.current}function PanelWithForwardedRef({children:K,className:J="",collapsedSize:ne,collapsible:oe,defaultSize:ce,forwardedRef:ue,id:Ae,maxSize:pe,minSize:xe,onCollapse:me,onExpand:ge,onResize:ye,order:Se,style:Te,tagName:Ne="div",...$e}){const ke=reactExports.useContext(PanelGroupContext);if(ke===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:je,expandPanel:Ke,getPanelSize:Ye,getPanelStyle:ze,groupId:Xe,isPanelCollapsed:Je,reevaluatePanelConstraints:rt,registerPanel:Ze,resizePanel:et,unregisterPanel:nt}=ke,Ge=useUniqueId$2(Ae),ve=reactExports.useRef({callbacks:{onCollapse:me,onExpand:ge,onResize:ye},constraints:{collapsedSize:ne,collapsible:oe,defaultSize:ce,maxSize:pe,minSize:xe},id:Ge,idIsFromProps:Ae!==void 0,order:Se});reactExports.useRef({didLogMissingDefaultSizeWarning:!1}),useIsomorphicLayoutEffect$2(()=>{const{callbacks:Re,constraints:Ie}=ve.current,Fe={...Ie};ve.current.id=Ge,ve.current.idIsFromProps=Ae!==void 0,ve.current.order=Se,Re.onCollapse=me,Re.onExpand=ge,Re.onResize=ye,Ie.collapsedSize=ne,Ie.collapsible=oe,Ie.defaultSize=ce,Ie.maxSize=pe,Ie.minSize=xe,(Fe.collapsedSize!==Ie.collapsedSize||Fe.collapsible!==Ie.collapsible||Fe.maxSize!==Ie.maxSize||Fe.minSize!==Ie.minSize)&&rt(ve.current,Fe)}),useIsomorphicLayoutEffect$2(()=>{const Re=ve.current;return Ze(Re),()=>{nt(Re)}},[Se,Ge,Ze,nt]),reactExports.useImperativeHandle(ue,()=>({collapse:()=>{je(ve.current)},expand:Re=>{Ke(ve.current,Re)},getId(){return Ge},getSize(){return Ye(ve.current)},isCollapsed(){return Je(ve.current)},isExpanded(){return!Je(ve.current)},resize:Re=>{et(ve.current,Re)}}),[je,Ke,Ye,Je,Ge,et]);const Be=ze(ve.current,ce);return reactExports.createElement(Ne,{...$e,children:K,className:J,id:Ge,style:{...Be,...Te},[DATA_ATTRIBUTES.groupId]:Xe,[DATA_ATTRIBUTES.panel]:"",[DATA_ATTRIBUTES.panelCollapsible]:oe||void 0,[DATA_ATTRIBUTES.panelId]:Ge,[DATA_ATTRIBUTES.panelSize]:parseFloat(""+Be.flexGrow).toFixed(1)})}const Panel$1=reactExports.forwardRef((K,J)=>reactExports.createElement(PanelWithForwardedRef,{...K,forwardedRef:J}));PanelWithForwardedRef.displayName="Panel";Panel$1.displayName="forwardRef(Panel)";let currentCursorStyle=null,prevRuleIndex=-1,styleElement=null;function getCursorStyle(K,J,ne){const oe=(J&EXCEEDED_HORIZONTAL_MIN)!==0,ce=(J&EXCEEDED_HORIZONTAL_MAX)!==0,ue=(J&EXCEEDED_VERTICAL_MIN)!==0,Ae=(J&EXCEEDED_VERTICAL_MAX)!==0;if(J){if(oe)return ue?"se-resize":Ae?"ne-resize":"e-resize";if(ce)return ue?"sw-resize":Ae?"nw-resize":"w-resize";if(ue)return"s-resize";if(Ae)return"n-resize"}switch(K){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function resetGlobalCursorStyle(){styleElement!==null&&(document.head.removeChild(styleElement),currentCursorStyle=null,styleElement=null,prevRuleIndex=-1)}function setGlobalCursorStyle(K,J,ne){var oe,ce;const ue=getCursorStyle(K,J);if(currentCursorStyle!==ue){if(currentCursorStyle=ue,styleElement===null&&(styleElement=document.createElement("style"),document.head.appendChild(styleElement)),prevRuleIndex>=0){var Ae;(Ae=styleElement.sheet)===null||Ae===void 0||Ae.removeRule(prevRuleIndex)}prevRuleIndex=(oe=(ce=styleElement.sheet)===null||ce===void 0?void 0:ce.insertRule(`*{cursor: ${ue} !important;}`))!==null&&oe!==void 0?oe:-1}}function isKeyDown(K){return K.type==="keydown"}function isPointerEvent(K){return K.type.startsWith("pointer")}function isMouseEvent$1(K){return K.type.startsWith("mouse")}function getResizeEventCoordinates(K){if(isPointerEvent(K)){if(K.isPrimary)return{x:K.clientX,y:K.clientY}}else if(isMouseEvent$1(K))return{x:K.clientX,y:K.clientY};return{x:1/0,y:1/0}}function getInputType(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function intersects(K,J,ne){return K.x<J.x+J.width&&K.x+K.width>J.x&&K.y<J.y+J.height&&K.y+K.height>J.y}function compare(K,J){if(K===J)throw new Error("Cannot compare node with itself");const ne={a:get_ancestors(K),b:get_ancestors(J)};let oe;for(;ne.a.at(-1)===ne.b.at(-1);)K=ne.a.pop(),J=ne.b.pop(),oe=K;assert(oe,"Stacking order can only be calculated for elements with a common ancestor");const ce={a:get_z_index(find_stacking_context(ne.a)),b:get_z_index(find_stacking_context(ne.b))};if(ce.a===ce.b){const ue=oe.childNodes,Ae={a:ne.a.at(-1),b:ne.b.at(-1)};let pe=ue.length;for(;pe--;){const xe=ue[pe];if(xe===Ae.a)return 1;if(xe===Ae.b)return-1}}return Math.sign(ce.a-ce.b)}const props=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function is_flex_item(K){var J;const ne=getComputedStyle((J=get_parent(K))!==null&&J!==void 0?J:K).display;return ne==="flex"||ne==="inline-flex"}function creates_stacking_context(K){const J=getComputedStyle(K);return!!(J.position==="fixed"||J.zIndex!=="auto"&&(J.position!=="static"||is_flex_item(K))||+J.opacity<1||"transform"in J&&J.transform!=="none"||"webkitTransform"in J&&J.webkitTransform!=="none"||"mixBlendMode"in J&&J.mixBlendMode!=="normal"||"filter"in J&&J.filter!=="none"||"webkitFilter"in J&&J.webkitFilter!=="none"||"isolation"in J&&J.isolation==="isolate"||props.test(J.willChange)||J.webkitOverflowScrolling==="touch")}function find_stacking_context(K){let J=K.length;for(;J--;){const ne=K[J];if(assert(ne,"Missing node"),creates_stacking_context(ne))return ne}return null}function get_z_index(K){return K&&Number(getComputedStyle(K).zIndex)||0}function get_ancestors(K){const J=[];for(;K;)J.push(K),K=get_parent(K);return J}function get_parent(K){const{parentNode:J}=K;return J&&J instanceof ShadowRoot?J.host:J}const EXCEEDED_HORIZONTAL_MIN=1,EXCEEDED_HORIZONTAL_MAX=2,EXCEEDED_VERTICAL_MIN=4,EXCEEDED_VERTICAL_MAX=8,isCoarsePointer=getInputType()==="coarse";let intersectingHandles=[],isPointerDown=!1,ownerDocumentCounts=new Map,panelConstraintFlags=new Map;const registeredResizeHandlers=new Set;function registerResizeHandle(K,J,ne,oe,ce){var ue;const{ownerDocument:Ae}=J,pe={direction:ne,element:J,hitAreaMargins:oe,setResizeHandlerState:ce},xe=(ue=ownerDocumentCounts.get(Ae))!==null&&ue!==void 0?ue:0;return ownerDocumentCounts.set(Ae,xe+1),registeredResizeHandlers.add(pe),updateListeners(),function(){var ge;panelConstraintFlags.delete(K),registeredResizeHandlers.delete(pe);const ye=(ge=ownerDocumentCounts.get(Ae))!==null&&ge!==void 0?ge:1;if(ownerDocumentCounts.set(Ae,ye-1),updateListeners(),ye===1&&ownerDocumentCounts.delete(Ae),intersectingHandles.includes(pe)){const Se=intersectingHandles.indexOf(pe);Se>=0&&intersectingHandles.splice(Se,1),updateCursor(),ce("up",!0,null)}}}function handlePointerDown$1(K){const{target:J}=K,{x:ne,y:oe}=getResizeEventCoordinates(K);isPointerDown=!0,recalculateIntersectingHandles({target:J,x:ne,y:oe}),updateListeners(),intersectingHandles.length>0&&(updateResizeHandlerStates("down",K),updateCursor(),K.preventDefault(),isWithinResizeHandle(J)||K.stopImmediatePropagation())}function handlePointerMove(K){const{x:J,y:ne}=getResizeEventCoordinates(K);if(isPointerDown&&K.buttons===0&&(isPointerDown=!1,updateResizeHandlerStates("up",K)),!isPointerDown){const{target:oe}=K;recalculateIntersectingHandles({target:oe,x:J,y:ne})}updateResizeHandlerStates("move",K),updateCursor(),intersectingHandles.length>0&&K.preventDefault()}function handlePointerUp(K){const{target:J}=K,{x:ne,y:oe}=getResizeEventCoordinates(K);panelConstraintFlags.clear(),isPointerDown=!1,intersectingHandles.length>0&&(K.preventDefault(),isWithinResizeHandle(J)||K.stopImmediatePropagation()),updateResizeHandlerStates("up",K),recalculateIntersectingHandles({target:J,x:ne,y:oe}),updateCursor(),updateListeners()}function isWithinResizeHandle(K){let J=K;for(;J;){if(J.hasAttribute(DATA_ATTRIBUTES.resizeHandle))return!0;J=J.parentElement}return!1}function recalculateIntersectingHandles({target:K,x:J,y:ne}){intersectingHandles.splice(0);let oe=null;(K instanceof HTMLElement||K instanceof SVGElement)&&(oe=K),registeredResizeHandlers.forEach(ce=>{const{element:ue,hitAreaMargins:Ae}=ce,pe=ue.getBoundingClientRect(),{bottom:xe,left:me,right:ge,top:ye}=pe,Se=isCoarsePointer?Ae.coarse:Ae.fine;if(J>=me-Se&&J<=ge+Se&&ne>=ye-Se&&ne<=xe+Se){if(oe!==null&&document.contains(oe)&&ue!==oe&&!ue.contains(oe)&&!oe.contains(ue)&&compare(oe,ue)>0){let Ne=oe,$e=!1;for(;Ne&&!Ne.contains(ue);){if(intersects(Ne.getBoundingClientRect(),pe)){$e=!0;break}Ne=Ne.parentElement}if($e)return}intersectingHandles.push(ce)}})}function reportConstraintsViolation(K,J){panelConstraintFlags.set(K,J)}function updateCursor(){let K=!1,J=!1;intersectingHandles.forEach(oe=>{const{direction:ce}=oe;ce==="horizontal"?K=!0:J=!0});let ne=0;panelConstraintFlags.forEach(oe=>{ne|=oe}),K&&J?setGlobalCursorStyle("intersection",ne):K?setGlobalCursorStyle("horizontal",ne):J?setGlobalCursorStyle("vertical",ne):resetGlobalCursorStyle()}let listenersAbortController;function updateListeners(){var K;(K=listenersAbortController)===null||K===void 0||K.abort(),listenersAbortController=new AbortController;const J={capture:!0,signal:listenersAbortController.signal};registeredResizeHandlers.size&&(isPointerDown?(intersectingHandles.length>0&&ownerDocumentCounts.forEach((ne,oe)=>{const{body:ce}=oe;ne>0&&(ce.addEventListener("contextmenu",handlePointerUp,J),ce.addEventListener("pointerleave",handlePointerMove,J),ce.addEventListener("pointermove",handlePointerMove,J))}),ownerDocumentCounts.forEach((ne,oe)=>{const{body:ce}=oe;ce.addEventListener("pointerup",handlePointerUp,J),ce.addEventListener("pointercancel",handlePointerUp,J)})):ownerDocumentCounts.forEach((ne,oe)=>{const{body:ce}=oe;ne>0&&(ce.addEventListener("pointerdown",handlePointerDown$1,J),ce.addEventListener("pointermove",handlePointerMove,J))}))}function updateResizeHandlerStates(K,J){registeredResizeHandlers.forEach(ne=>{const{setResizeHandlerState:oe}=ne,ce=intersectingHandles.includes(ne);oe(K,ce,J)})}function useForceUpdate(){const[K,J]=reactExports.useState(0);return reactExports.useCallback(()=>J(ne=>ne+1),[])}function assert(K,J){if(!K)throw console.error(J),Error(J)}function fuzzyCompareNumbers(K,J,ne=PRECISION){return K.toFixed(ne)===J.toFixed(ne)?0:K>J?1:-1}function fuzzyNumbersEqual$1(K,J,ne=PRECISION){return fuzzyCompareNumbers(K,J,ne)===0}function fuzzyNumbersEqual(K,J,ne){return fuzzyCompareNumbers(K,J,ne)===0}function fuzzyLayoutsEqual(K,J,ne){if(K.length!==J.length)return!1;for(let oe=0;oe<K.length;oe++){const ce=K[oe],ue=J[oe];if(!fuzzyNumbersEqual(ce,ue,ne))return!1}return!0}function resizePanel({panelConstraints:K,panelIndex:J,size:ne}){const oe=K[J];assert(oe!=null,`Panel constraints not found for index ${J}`);let{collapsedSize:ce=0,collapsible:ue,maxSize:Ae=100,minSize:pe=0}=oe;if(fuzzyCompareNumbers(ne,pe)<0)if(ue){const xe=(ce+pe)/2;fuzzyCompareNumbers(ne,xe)<0?ne=ce:ne=pe}else ne=pe;return ne=Math.min(Ae,ne),ne=parseFloat(ne.toFixed(PRECISION)),ne}function adjustLayoutByDelta({delta:K,initialLayout:J,panelConstraints:ne,pivotIndices:oe,prevLayout:ce,trigger:ue}){if(fuzzyNumbersEqual(K,0))return J;const Ae=[...J],[pe,xe]=oe;assert(pe!=null,"Invalid first pivot index"),assert(xe!=null,"Invalid second pivot index");let me=0;if(ue==="keyboard"){{const ye=K<0?xe:pe,Se=ne[ye];assert(Se,`Panel constraints not found for index ${ye}`);const{collapsedSize:Te=0,collapsible:Ne,minSize:$e=0}=Se;if(Ne){const ke=J[ye];if(assert(ke!=null,`Previous layout not found for panel index ${ye}`),fuzzyNumbersEqual(ke,Te)){const je=$e-ke;fuzzyCompareNumbers(je,Math.abs(K))>0&&(K=K<0?0-je:je)}}}{const ye=K<0?pe:xe,Se=ne[ye];assert(Se,`No panel constraints found for index ${ye}`);const{collapsedSize:Te=0,collapsible:Ne,minSize:$e=0}=Se;if(Ne){const ke=J[ye];if(assert(ke!=null,`Previous layout not found for panel index ${ye}`),fuzzyNumbersEqual(ke,$e)){const je=ke-Te;fuzzyCompareNumbers(je,Math.abs(K))>0&&(K=K<0?0-je:je)}}}}{const ye=K<0?1:-1;let Se=K<0?xe:pe,Te=0;for(;;){const $e=J[Se];assert($e!=null,`Previous layout not found for panel index ${Se}`);const je=resizePanel({panelConstraints:ne,panelIndex:Se,size:100})-$e;if(Te+=je,Se+=ye,Se<0||Se>=ne.length)break}const Ne=Math.min(Math.abs(K),Math.abs(Te));K=K<0?0-Ne:Ne}{let Se=K<0?pe:xe;for(;Se>=0&&Se<ne.length;){const Te=Math.abs(K)-Math.abs(me),Ne=J[Se];assert(Ne!=null,`Previous layout not found for panel index ${Se}`);const $e=Ne-Te,ke=resizePanel({panelConstraints:ne,panelIndex:Se,size:$e});if(!fuzzyNumbersEqual(Ne,ke)&&(me+=Ne-ke,Ae[Se]=ke,me.toFixed(3).localeCompare(Math.abs(K).toFixed(3),void 0,{numeric:!0})>=0))break;K<0?Se--:Se++}}if(fuzzyLayoutsEqual(ce,Ae))return ce;{const ye=K<0?xe:pe,Se=J[ye];assert(Se!=null,`Previous layout not found for panel index ${ye}`);const Te=Se+me,Ne=resizePanel({panelConstraints:ne,panelIndex:ye,size:Te});if(Ae[ye]=Ne,!fuzzyNumbersEqual(Ne,Te)){let $e=Te-Ne,je=K<0?xe:pe;for(;je>=0&&je<ne.length;){const Ke=Ae[je];assert(Ke!=null,`Previous layout not found for panel index ${je}`);const Ye=Ke+$e,ze=resizePanel({panelConstraints:ne,panelIndex:je,size:Ye});if(fuzzyNumbersEqual(Ke,ze)||($e-=ze-Ke,Ae[je]=ze),fuzzyNumbersEqual($e,0))break;K>0?je--:je++}}}const ge=Ae.reduce((ye,Se)=>Se+ye,0);return fuzzyNumbersEqual(ge,100)?Ae:ce}function calculateAriaValues({layout:K,panelsArray:J,pivotIndices:ne}){let oe=0,ce=100,ue=0,Ae=0;const pe=ne[0];assert(pe!=null,"No pivot index found"),J.forEach((ye,Se)=>{const{constraints:Te}=ye,{maxSize:Ne=100,minSize:$e=0}=Te;Se===pe?(oe=$e,ce=Ne):(ue+=$e,Ae+=Ne)});const xe=Math.min(ce,100-ue),me=Math.max(oe,100-Ae),ge=K[pe];return{valueMax:xe,valueMin:me,valueNow:ge}}function getResizeHandleElementsForGroup(K,J=document){return Array.from(J.querySelectorAll(`[${DATA_ATTRIBUTES.resizeHandleId}][data-panel-group-id="${K}"]`))}function getResizeHandleElementIndex(K,J,ne=document){const ce=getResizeHandleElementsForGroup(K,ne).findIndex(ue=>ue.getAttribute(DATA_ATTRIBUTES.resizeHandleId)===J);return ce??null}function determinePivotIndices(K,J,ne){const oe=getResizeHandleElementIndex(K,J,ne);return oe!=null?[oe,oe+1]:[-1,-1]}function isHTMLElement$1(K){return K instanceof HTMLElement?!0:typeof K=="object"&&K!==null&&"tagName"in K&&"getAttribute"in K}function getPanelGroupElement(K,J=document){if(isHTMLElement$1(J)&&J.dataset.panelGroupId==K)return J;const ne=J.querySelector(`[data-panel-group][data-panel-group-id="${K}"]`);return ne||null}function getResizeHandleElement(K,J=document){const ne=J.querySelector(`[${DATA_ATTRIBUTES.resizeHandleId}="${K}"]`);return ne||null}function getResizeHandlePanelIds(K,J,ne,oe=document){var ce,ue,Ae,pe;const xe=getResizeHandleElement(J,oe),me=getResizeHandleElementsForGroup(K,oe),ge=xe?me.indexOf(xe):-1,ye=(ce=(ue=ne[ge])===null||ue===void 0?void 0:ue.id)!==null&&ce!==void 0?ce:null,Se=(Ae=(pe=ne[ge+1])===null||pe===void 0?void 0:pe.id)!==null&&Ae!==void 0?Ae:null;return[ye,Se]}function useWindowSplitterPanelGroupBehavior({committedValuesRef:K,eagerValuesRef:J,groupId:ne,layout:oe,panelDataArray:ce,panelGroupElement:ue,setLayout:Ae}){reactExports.useRef({didWarnAboutMissingResizeHandle:!1}),useIsomorphicLayoutEffect$2(()=>{if(!ue)return;const pe=getResizeHandleElementsForGroup(ne,ue);for(let xe=0;xe<ce.length-1;xe++){const{valueMax:me,valueMin:ge,valueNow:ye}=calculateAriaValues({layout:oe,panelsArray:ce,pivotIndices:[xe,xe+1]}),Se=pe[xe];if(Se!=null){const Te=ce[xe];assert(Te,`No panel data found for index "${xe}"`),Se.setAttribute("aria-controls",Te.id),Se.setAttribute("aria-valuemax",""+Math.round(me)),Se.setAttribute("aria-valuemin",""+Math.round(ge)),Se.setAttribute("aria-valuenow",ye!=null?""+Math.round(ye):"")}}return()=>{pe.forEach((xe,me)=>{xe.removeAttribute("aria-controls"),xe.removeAttribute("aria-valuemax"),xe.removeAttribute("aria-valuemin"),xe.removeAttribute("aria-valuenow")})}},[ne,oe,ce,ue]),reactExports.useEffect(()=>{if(!ue)return;const pe=J.current;assert(pe,"Eager values not found");const{panelDataArray:xe}=pe,me=getPanelGroupElement(ne,ue);assert(me!=null,`No group found for id "${ne}"`);const ge=getResizeHandleElementsForGroup(ne,ue);assert(ge,`No resize handles found for group id "${ne}"`);const ye=ge.map(Se=>{const Te=Se.getAttribute(DATA_ATTRIBUTES.resizeHandleId);assert(Te,"Resize handle element has no handle id attribute");const[Ne,$e]=getResizeHandlePanelIds(ne,Te,xe,ue);if(Ne==null||$e==null)return()=>{};const ke=je=>{if(!je.defaultPrevented)switch(je.key){case"Enter":{je.preventDefault();const Ke=xe.findIndex(Ye=>Ye.id===Ne);if(Ke>=0){const Ye=xe[Ke];assert(Ye,`No panel data found for index ${Ke}`);const ze=oe[Ke],{collapsedSize:Xe=0,collapsible:Je,minSize:rt=0}=Ye.constraints;if(ze!=null&&Je){const Ze=adjustLayoutByDelta({delta:fuzzyNumbersEqual(ze,Xe)?rt-Xe:Xe-ze,initialLayout:oe,panelConstraints:xe.map(et=>et.constraints),pivotIndices:determinePivotIndices(ne,Te,ue),prevLayout:oe,trigger:"keyboard"});oe!==Ze&&Ae(Ze)}}break}}};return Se.addEventListener("keydown",ke),()=>{Se.removeEventListener("keydown",ke)}});return()=>{ye.forEach(Se=>Se())}},[ue,K,J,ne,oe,ce,Ae])}function areEqual$1(K,J){if(K.length!==J.length)return!1;for(let ne=0;ne<K.length;ne++)if(K[ne]!==J[ne])return!1;return!0}function getResizeEventCursorPosition(K,J){const ne=K==="horizontal",{x:oe,y:ce}=getResizeEventCoordinates(J);return ne?oe:ce}function calculateDragOffsetPercentage(K,J,ne,oe,ce){const ue=ne==="horizontal",Ae=getResizeHandleElement(J,ce);assert(Ae,`No resize handle element found for id "${J}"`);const pe=Ae.getAttribute(DATA_ATTRIBUTES.groupId);assert(pe,"Resize handle element has no group id attribute");let{initialCursorPosition:xe}=oe;const me=getResizeEventCursorPosition(ne,K),ge=getPanelGroupElement(pe,ce);assert(ge,`No group element found for id "${pe}"`);const ye=ge.getBoundingClientRect(),Se=ue?ye.width:ye.height;return(me-xe)/Se*100}function calculateDeltaPercentage(K,J,ne,oe,ce,ue){if(isKeyDown(K)){const Ae=ne==="horizontal";let pe=0;K.shiftKey?pe=100:ce!=null?pe=ce:pe=10;let xe=0;switch(K.key){case"ArrowDown":xe=Ae?0:pe;break;case"ArrowLeft":xe=Ae?-pe:0;break;case"ArrowRight":xe=Ae?pe:0;break;case"ArrowUp":xe=Ae?0:-pe;break;case"End":xe=100;break;case"Home":xe=-100;break}return xe}else return oe==null?0:calculateDragOffsetPercentage(K,J,ne,oe,ue)}function calculateUnsafeDefaultLayout({panelDataArray:K}){const J=Array(K.length),ne=K.map(ue=>ue.constraints);let oe=0,ce=100;for(let ue=0;ue<K.length;ue++){const Ae=ne[ue];assert(Ae,`Panel constraints not found for index ${ue}`);const{defaultSize:pe}=Ae;pe!=null&&(oe++,J[ue]=pe,ce-=pe)}for(let ue=0;ue<K.length;ue++){const Ae=ne[ue];assert(Ae,`Panel constraints not found for index ${ue}`);const{defaultSize:pe}=Ae;if(pe!=null)continue;const xe=K.length-oe,me=ce/xe;oe++,J[ue]=me,ce-=me}return J}function callPanelCallbacks(K,J,ne){J.forEach((oe,ce)=>{const ue=K[ce];assert(ue,`Panel data not found for index ${ce}`);const{callbacks:Ae,constraints:pe,id:xe}=ue,{collapsedSize:me=0,collapsible:ge}=pe,ye=ne[xe];if(ye==null||oe!==ye){ne[xe]=oe;const{onCollapse:Se,onExpand:Te,onResize:Ne}=Ae;Ne&&Ne(oe,ye),ge&&(Se||Te)&&(Te&&(ye==null||fuzzyNumbersEqual$1(ye,me))&&!fuzzyNumbersEqual$1(oe,me)&&Te(),Se&&(ye==null||!fuzzyNumbersEqual$1(ye,me))&&fuzzyNumbersEqual$1(oe,me)&&Se())}})}function compareLayouts(K,J){if(K.length!==J.length)return!1;for(let ne=0;ne<K.length;ne++)if(K[ne]!=J[ne])return!1;return!0}function computePanelFlexBoxStyle({defaultSize:K,dragState:J,layout:ne,panelData:oe,panelIndex:ce,precision:ue=3}){const Ae=ne[ce];let pe;return Ae==null?pe=K!=null?K.toFixed(ue):"1":oe.length===1?pe="1":pe=Ae.toFixed(ue),{flexBasis:0,flexGrow:pe,flexShrink:1,overflow:"hidden",pointerEvents:J!==null?"none":void 0}}function debounce(K,J=10){let ne=null;return(...ce)=>{ne!==null&&clearTimeout(ne),ne=setTimeout(()=>{K(...ce)},J)}}function initializeDefaultStorage(K){try{if(typeof localStorage<"u")K.getItem=J=>localStorage.getItem(J),K.setItem=(J,ne)=>{localStorage.setItem(J,ne)};else throw new Error("localStorage not supported in this environment")}catch(J){console.error(J),K.getItem=()=>null,K.setItem=()=>{}}}function getPanelGroupKey(K){return`react-resizable-panels:${K}`}function getPanelKey(K){return K.map(J=>{const{constraints:ne,id:oe,idIsFromProps:ce,order:ue}=J;return ce?oe:ue?`${ue}:${JSON.stringify(ne)}`:JSON.stringify(ne)}).sort((J,ne)=>J.localeCompare(ne)).join(",")}function loadSerializedPanelGroupState(K,J){try{const ne=getPanelGroupKey(K),oe=J.getItem(ne);if(oe){const ce=JSON.parse(oe);if(typeof ce=="object"&&ce!=null)return ce}}catch{}return null}function loadPanelGroupState(K,J,ne){var oe,ce;const ue=(oe=loadSerializedPanelGroupState(K,ne))!==null&&oe!==void 0?oe:{},Ae=getPanelKey(J);return(ce=ue[Ae])!==null&&ce!==void 0?ce:null}function savePanelGroupState(K,J,ne,oe,ce){var ue;const Ae=getPanelGroupKey(K),pe=getPanelKey(J),xe=(ue=loadSerializedPanelGroupState(K,ce))!==null&&ue!==void 0?ue:{};xe[pe]={expandToSizes:Object.fromEntries(ne.entries()),layout:oe};try{ce.setItem(Ae,JSON.stringify(xe))}catch(me){console.error(me)}}function validatePanelGroupLayout({layout:K,panelConstraints:J}){const ne=[...K],oe=ne.reduce((ue,Ae)=>ue+Ae,0);if(ne.length!==J.length)throw Error(`Invalid ${J.length} panel layout: ${ne.map(ue=>`${ue}%`).join(", ")}`);if(!fuzzyNumbersEqual(oe,100)&&ne.length>0)for(let ue=0;ue<J.length;ue++){const Ae=ne[ue];assert(Ae!=null,`No layout data found for index ${ue}`);const pe=100/oe*Ae;ne[ue]=pe}let ce=0;for(let ue=0;ue<J.length;ue++){const Ae=ne[ue];assert(Ae!=null,`No layout data found for index ${ue}`);const pe=resizePanel({panelConstraints:J,panelIndex:ue,size:Ae});Ae!=pe&&(ce+=Ae-pe,ne[ue]=pe)}if(!fuzzyNumbersEqual(ce,0))for(let ue=0;ue<J.length;ue++){const Ae=ne[ue];assert(Ae!=null,`No layout data found for index ${ue}`);const pe=Ae+ce,xe=resizePanel({panelConstraints:J,panelIndex:ue,size:pe});if(Ae!==xe&&(ce-=xe-Ae,ne[ue]=xe,fuzzyNumbersEqual(ce,0)))break}return ne}const LOCAL_STORAGE_DEBOUNCE_INTERVAL=100,defaultStorage={getItem:K=>(initializeDefaultStorage(defaultStorage),defaultStorage.getItem(K)),setItem:(K,J)=>{initializeDefaultStorage(defaultStorage),defaultStorage.setItem(K,J)}},debounceMap={};function PanelGroupWithForwardedRef({autoSaveId:K=null,children:J,className:ne="",direction:oe,forwardedRef:ce,id:ue=null,onLayout:Ae=null,keyboardResizeBy:pe=null,storage:xe=defaultStorage,style:me,tagName:ge="div",...ye}){const Se=useUniqueId$2(ue),Te=reactExports.useRef(null),[Ne,$e]=reactExports.useState(null),[ke,je]=reactExports.useState([]),Ke=useForceUpdate(),Ye=reactExports.useRef({}),ze=reactExports.useRef(new Map),Xe=reactExports.useRef(0),Je=reactExports.useRef({autoSaveId:K,direction:oe,dragState:Ne,id:Se,keyboardResizeBy:pe,onLayout:Ae,storage:xe}),rt=reactExports.useRef({layout:ke,panelDataArray:[],panelDataArrayChanged:!1});reactExports.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),reactExports.useImperativeHandle(ce,()=>({getId:()=>Je.current.id,getLayout:()=>{const{layout:it}=rt.current;return it},setLayout:it=>{const{onLayout:at}=Je.current,{layout:ot,panelDataArray:lt}=rt.current,st=validatePanelGroupLayout({layout:it,panelConstraints:lt.map(ut=>ut.constraints)});areEqual$1(ot,st)||(je(st),rt.current.layout=st,at&&at(st),callPanelCallbacks(lt,st,Ye.current))}}),[]),useIsomorphicLayoutEffect$2(()=>{Je.current.autoSaveId=K,Je.current.direction=oe,Je.current.dragState=Ne,Je.current.id=Se,Je.current.onLayout=Ae,Je.current.storage=xe}),useWindowSplitterPanelGroupBehavior({committedValuesRef:Je,eagerValuesRef:rt,groupId:Se,layout:ke,panelDataArray:rt.current.panelDataArray,setLayout:je,panelGroupElement:Te.current}),reactExports.useEffect(()=>{const{panelDataArray:it}=rt.current;if(K){if(ke.length===0||ke.length!==it.length)return;let at=debounceMap[K];at==null&&(at=debounce(savePanelGroupState,LOCAL_STORAGE_DEBOUNCE_INTERVAL),debounceMap[K]=at);const ot=[...it],lt=new Map(ze.current);at(K,ot,lt,ke,xe)}},[K,ke,xe]),reactExports.useEffect(()=>{});const Ze=reactExports.useCallback(it=>{const{onLayout:at}=Je.current,{layout:ot,panelDataArray:lt}=rt.current;if(it.constraints.collapsible){const st=lt.map(Bt=>Bt.constraints),{collapsedSize:ut=0,panelSize:ft,pivotIndices:dt}=panelDataHelper(lt,it,ot);if(assert(ft!=null,`Panel size not found for panel "${it.id}"`),!fuzzyNumbersEqual$1(ft,ut)){ze.current.set(it.id,ft);const pt=findPanelDataIndex(lt,it)===lt.length-1?ft-ut:ut-ft,mt=adjustLayoutByDelta({delta:pt,initialLayout:ot,panelConstraints:st,pivotIndices:dt,prevLayout:ot,trigger:"imperative-api"});compareLayouts(ot,mt)||(je(mt),rt.current.layout=mt,at&&at(mt),callPanelCallbacks(lt,mt,Ye.current))}}},[]),et=reactExports.useCallback((it,at)=>{const{onLayout:ot}=Je.current,{layout:lt,panelDataArray:st}=rt.current;if(it.constraints.collapsible){const ut=st.map(bt=>bt.constraints),{collapsedSize:ft=0,panelSize:dt=0,minSize:Bt=0,pivotIndices:pt}=panelDataHelper(st,it,lt),mt=at??Bt;if(fuzzyNumbersEqual$1(dt,ft)){const bt=ze.current.get(it.id),xt=bt!=null&&bt>=mt?bt:mt,It=findPanelDataIndex(st,it)===st.length-1?dt-xt:xt-dt,ht=adjustLayoutByDelta({delta:It,initialLayout:lt,panelConstraints:ut,pivotIndices:pt,prevLayout:lt,trigger:"imperative-api"});compareLayouts(lt,ht)||(je(ht),rt.current.layout=ht,ot&&ot(ht),callPanelCallbacks(st,ht,Ye.current))}}},[]),nt=reactExports.useCallback(it=>{const{layout:at,panelDataArray:ot}=rt.current,{panelSize:lt}=panelDataHelper(ot,it,at);return assert(lt!=null,`Panel size not found for panel "${it.id}"`),lt},[]),Ge=reactExports.useCallback((it,at)=>{const{panelDataArray:ot}=rt.current,lt=findPanelDataIndex(ot,it);return computePanelFlexBoxStyle({defaultSize:at,dragState:Ne,layout:ke,panelData:ot,panelIndex:lt})},[Ne,ke]),ve=reactExports.useCallback(it=>{const{layout:at,panelDataArray:ot}=rt.current,{collapsedSize:lt=0,collapsible:st,panelSize:ut}=panelDataHelper(ot,it,at);return assert(ut!=null,`Panel size not found for panel "${it.id}"`),st===!0&&fuzzyNumbersEqual$1(ut,lt)},[]),Be=reactExports.useCallback(it=>{const{layout:at,panelDataArray:ot}=rt.current,{collapsedSize:lt=0,collapsible:st,panelSize:ut}=panelDataHelper(ot,it,at);return assert(ut!=null,`Panel size not found for panel "${it.id}"`),!st||fuzzyCompareNumbers(ut,lt)>0},[]),Re=reactExports.useCallback(it=>{const{panelDataArray:at}=rt.current;at.push(it),at.sort((ot,lt)=>{const st=ot.order,ut=lt.order;return st==null&&ut==null?0:st==null?-1:ut==null?1:st-ut}),rt.current.panelDataArrayChanged=!0,Ke()},[Ke]);useIsomorphicLayoutEffect$2(()=>{if(rt.current.panelDataArrayChanged){rt.current.panelDataArrayChanged=!1;const{autoSaveId:it,onLayout:at,storage:ot}=Je.current,{layout:lt,panelDataArray:st}=rt.current;let ut=null;if(it){const dt=loadPanelGroupState(it,st,ot);dt&&(ze.current=new Map(Object.entries(dt.expandToSizes)),ut=dt.layout)}ut==null&&(ut=calculateUnsafeDefaultLayout({panelDataArray:st}));const ft=validatePanelGroupLayout({layout:ut,panelConstraints:st.map(dt=>dt.constraints)});areEqual$1(lt,ft)||(je(ft),rt.current.layout=ft,at&&at(ft),callPanelCallbacks(st,ft,Ye.current))}}),useIsomorphicLayoutEffect$2(()=>{const it=rt.current;return()=>{it.layout=[]}},[]);const Ie=reactExports.useCallback(it=>{let at=!1;const ot=Te.current;return ot&&window.getComputedStyle(ot,null).getPropertyValue("direction")==="rtl"&&(at=!0),function(st){st.preventDefault();const ut=Te.current;if(!ut)return()=>null;const{direction:ft,dragState:dt,id:Bt,keyboardResizeBy:pt,onLayout:mt}=Je.current,{layout:bt,panelDataArray:xt}=rt.current,{initialLayout:yt}=dt??{},It=determinePivotIndices(Bt,it,ut);let ht=calculateDeltaPercentage(st,it,ft,dt,pt,ut);const gt=ft==="horizontal";gt&&at&&(ht=-ht);const Pt=xt.map(Zt=>Zt.constraints),wt=adjustLayoutByDelta({delta:ht,initialLayout:yt??bt,panelConstraints:Pt,pivotIndices:It,prevLayout:bt,trigger:isKeyDown(st)?"keyboard":"mouse-or-touch"}),St=!compareLayouts(bt,wt);(isPointerEvent(st)||isMouseEvent$1(st))&&Xe.current!=ht&&(Xe.current=ht,!St&&ht!==0?gt?reportConstraintsViolation(it,ht<0?EXCEEDED_HORIZONTAL_MIN:EXCEEDED_HORIZONTAL_MAX):reportConstraintsViolation(it,ht<0?EXCEEDED_VERTICAL_MIN:EXCEEDED_VERTICAL_MAX):reportConstraintsViolation(it,0)),St&&(je(wt),rt.current.layout=wt,mt&&mt(wt),callPanelCallbacks(xt,wt,Ye.current))}},[]),Fe=reactExports.useCallback((it,at)=>{const{onLayout:ot}=Je.current,{layout:lt,panelDataArray:st}=rt.current,ut=st.map(bt=>bt.constraints),{panelSize:ft,pivotIndices:dt}=panelDataHelper(st,it,lt);assert(ft!=null,`Panel size not found for panel "${it.id}"`);const pt=findPanelDataIndex(st,it)===st.length-1?ft-at:at-ft,mt=adjustLayoutByDelta({delta:pt,initialLayout:lt,panelConstraints:ut,pivotIndices:dt,prevLayout:lt,trigger:"imperative-api"});compareLayouts(lt,mt)||(je(mt),rt.current.layout=mt,ot&&ot(mt),callPanelCallbacks(st,mt,Ye.current))},[]),qe=reactExports.useCallback((it,at)=>{const{layout:ot,panelDataArray:lt}=rt.current,{collapsedSize:st=0,collapsible:ut}=at,{collapsedSize:ft=0,collapsible:dt,maxSize:Bt=100,minSize:pt=0}=it.constraints,{panelSize:mt}=panelDataHelper(lt,it,ot);mt!=null&&(ut&&dt&&fuzzyNumbersEqual$1(mt,st)?fuzzyNumbersEqual$1(st,ft)||Fe(it,ft):mt<pt?Fe(it,pt):mt>Bt&&Fe(it,Bt))},[Fe]),We=reactExports.useCallback((it,at)=>{const{direction:ot}=Je.current,{layout:lt}=rt.current;if(!Te.current)return;const st=getResizeHandleElement(it,Te.current);assert(st,`Drag handle element not found for id "${it}"`);const ut=getResizeEventCursorPosition(ot,at);$e({dragHandleId:it,dragHandleRect:st.getBoundingClientRect(),initialCursorPosition:ut,initialLayout:lt})},[]),Ue=reactExports.useCallback(()=>{$e(null)},[]),_e=reactExports.useCallback(it=>{const{panelDataArray:at}=rt.current,ot=findPanelDataIndex(at,it);ot>=0&&(at.splice(ot,1),delete Ye.current[it.id],rt.current.panelDataArrayChanged=!0,Ke())},[Ke]),Qe=reactExports.useMemo(()=>({collapsePanel:Ze,direction:oe,dragState:Ne,expandPanel:et,getPanelSize:nt,getPanelStyle:Ge,groupId:Se,isPanelCollapsed:ve,isPanelExpanded:Be,reevaluatePanelConstraints:qe,registerPanel:Re,registerResizeHandle:Ie,resizePanel:Fe,startDragging:We,stopDragging:Ue,unregisterPanel:_e,panelGroupElement:Te.current}),[Ze,Ne,oe,et,nt,Ge,Se,ve,Be,qe,Re,Ie,Fe,We,Ue,_e]),tt={display:"flex",flexDirection:oe==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return reactExports.createElement(PanelGroupContext.Provider,{value:Qe},reactExports.createElement(ge,{...ye,children:J,className:ne,id:ue,ref:Te,style:{...tt,...me},[DATA_ATTRIBUTES.group]:"",[DATA_ATTRIBUTES.groupDirection]:oe,[DATA_ATTRIBUTES.groupId]:Se}))}const PanelGroup=reactExports.forwardRef((K,J)=>reactExports.createElement(PanelGroupWithForwardedRef,{...K,forwardedRef:J}));PanelGroupWithForwardedRef.displayName="PanelGroup";PanelGroup.displayName="forwardRef(PanelGroup)";function findPanelDataIndex(K,J){return K.findIndex(ne=>ne===J||ne.id===J.id)}function panelDataHelper(K,J,ne){const oe=findPanelDataIndex(K,J),ue=oe===K.length-1?[oe-1,oe]:[oe,oe+1],Ae=ne[oe];return{...J.constraints,panelSize:Ae,pivotIndices:ue}}function useWindowSplitterResizeHandlerBehavior({disabled:K,handleId:J,resizeHandler:ne,panelGroupElement:oe}){reactExports.useEffect(()=>{if(K||ne==null||oe==null)return;const ce=getResizeHandleElement(J,oe);if(ce==null)return;const ue=Ae=>{if(!Ae.defaultPrevented)switch(Ae.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{Ae.preventDefault(),ne(Ae);break}case"F6":{Ae.preventDefault();const pe=ce.getAttribute(DATA_ATTRIBUTES.groupId);assert(pe,`No group element found for id "${pe}"`);const xe=getResizeHandleElementsForGroup(pe,oe),me=getResizeHandleElementIndex(pe,J,oe);assert(me!==null,`No resize element found for id "${J}"`);const ge=Ae.shiftKey?me>0?me-1:xe.length-1:me+1<xe.length?me+1:0;xe[ge].focus();break}}};return ce.addEventListener("keydown",ue),()=>{ce.removeEventListener("keydown",ue)}},[oe,K,J,ne])}function PanelResizeHandle({children:K=null,className:J="",disabled:ne=!1,hitAreaMargins:oe,id:ce,onBlur:ue,onClick:Ae,onDragging:pe,onFocus:xe,onPointerDown:me,onPointerUp:ge,style:ye={},tabIndex:Se=0,tagName:Te="div",...Ne}){var $e,ke;const je=reactExports.useRef(null),Ke=reactExports.useRef({onClick:Ae,onDragging:pe,onPointerDown:me,onPointerUp:ge});reactExports.useEffect(()=>{Ke.current.onClick=Ae,Ke.current.onDragging=pe,Ke.current.onPointerDown=me,Ke.current.onPointerUp=ge});const Ye=reactExports.useContext(PanelGroupContext);if(Ye===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:ze,groupId:Xe,registerResizeHandle:Je,startDragging:rt,stopDragging:Ze,panelGroupElement:et}=Ye,nt=useUniqueId$2(ce),[Ge,ve]=reactExports.useState("inactive"),[Be,Re]=reactExports.useState(!1),[Ie,Fe]=reactExports.useState(null),qe=reactExports.useRef({state:Ge});useIsomorphicLayoutEffect$2(()=>{qe.current.state=Ge}),reactExports.useEffect(()=>{if(ne)Fe(null);else{const Qe=Je(nt);Fe(()=>Qe)}},[ne,nt,Je]);const We=($e=oe==null?void 0:oe.coarse)!==null&&$e!==void 0?$e:15,Ue=(ke=oe==null?void 0:oe.fine)!==null&&ke!==void 0?ke:5;reactExports.useEffect(()=>{if(ne||Ie==null)return;const Qe=je.current;assert(Qe,"Element ref not attached");let tt=!1;return registerResizeHandle(nt,Qe,ze,{coarse:We,fine:Ue},(at,ot,lt)=>{if(!ot){ve("inactive");return}switch(at){case"down":{ve("drag"),tt=!1,assert(lt,'Expected event to be defined for "down" action'),rt(nt,lt);const{onDragging:st,onPointerDown:ut}=Ke.current;st==null||st(!0),ut==null||ut();break}case"move":{const{state:st}=qe.current;tt=!0,st!=="drag"&&ve("hover"),assert(lt,'Expected event to be defined for "move" action'),Ie(lt);break}case"up":{ve("hover"),Ze();const{onClick:st,onDragging:ut,onPointerUp:ft}=Ke.current;ut==null||ut(!1),ft==null||ft(),tt||st==null||st();break}}})},[We,ze,ne,Ue,Je,nt,Ie,rt,Ze]),useWindowSplitterResizeHandlerBehavior({disabled:ne,handleId:nt,resizeHandler:Ie,panelGroupElement:et});const _e={touchAction:"none",userSelect:"none"};return reactExports.createElement(Te,{...Ne,children:K,className:J,id:ce,onBlur:()=>{Re(!1),ue==null||ue()},onFocus:()=>{Re(!0),xe==null||xe()},ref:je,role:"separator",style:{..._e,...ye},tabIndex:Se,[DATA_ATTRIBUTES.groupDirection]:ze,[DATA_ATTRIBUTES.groupId]:Xe,[DATA_ATTRIBUTES.resizeHandle]:"",[DATA_ATTRIBUTES.resizeHandleActive]:Ge==="drag"?"pointer":Be?"keyboard":void 0,[DATA_ATTRIBUTES.resizeHandleEnabled]:!ne,[DATA_ATTRIBUTES.resizeHandleId]:nt,[DATA_ATTRIBUTES.resizeHandleState]:Ge})}PanelResizeHandle.displayName="PanelResizeHandle";const makeStack=K=>{var J,ne,oe;return{type:StackEnum.STACK,key:`stack-${(J=K[0])==null?void 0:J.id}`,id:`stack-${(ne=K[0])==null?void 0:ne.id}`,isMainGrid:((oe=K[0])==null?void 0:oe.id)===GridTabEnum.MAIN,size:DefaultPanelSize.DEFAULT,content:K}},isGridTabDataType=K=>Object.hasOwn(K,"id")&&Object.hasOwn(K,"key")&&Object.hasOwn(K,"label"),standartConfigMock={type:"",key:"",id:"",isMainGrid:!1,size:DefaultPanelSize.FULL_VIEW,content:[]},tabMock={id:"",key:"",label:"",isActive:!1,isClosable:!1,isMainGridTab:!1},isElementType=K=>Object.hasOwn(K,"ColsCount"),defineConfigNodeType=K=>K.ColsCount===1&&K.Content.length===1?StackEnum.STACK:K.ColsCount===1&&K.Content.length>1?StackEnum.COLUMN:K.ColsCount>1&&K.Content.length<=K.ColsCount?StackEnum.ROW:"",defineTopLevelConfigType=K=>K.length===1&&K[0].Content.length===1?StackEnum.STACK:K.length===1&&K[0].Content.length>1?StackEnum.ROW:K.length>1?StackEnum.COLUMN:"",getDeParsedConfig=(K,J=[])=>{var ne;if(Array.isArray(K)){const oe=structuredClone(standartConfigMock);return K.forEach(ce=>{const ue=getDeParsedConfig(ce,J);!Array.isArray(ue)&&ue&&oe.content.push(ue)}),oe.type=defineTopLevelConfigType(K),oe.id=`${oe.type}-${oe.content[0].id.replace(/\s/g,"")}`,oe.key=oe.id,oe.content.length===1?oe.content[0]:oe}if(isElementType(K)){const oe=structuredClone(standartConfigMock);return oe.type=defineConfigNodeType(K),K.Content.forEach(ce=>{const ue=getDeParsedConfig(ce,J);ue&&isConfigType(ue)&&ue.type===oe.type?(oe.isMainGrid=ue.isMainGrid,oe.content.push(...ue.content)):ue&&oe.content.push(ue)}),oe.content.length&&(oe.id=`${oe.type}-${oe.content[0].id.replace(/\s/g,"")}`,oe.key=oe.id),oe}if(!isElementType(K)){const oe=structuredClone(standartConfigMock);return oe.type=StackEnum.STACK,(ne=K.Stack)==null||ne.forEach(ce=>{ce.Key!==GridTabEnum.MAIN&&J.push(ce.Key);const ue={...tabMock};ce.Key===K.Key&&(ue.isActive=!0),ue.id=ce.Key,ue.key=ue.id,ce.Key===EditorTabsEnum.EDITOR?ue.label=EDITOR_TABS[EditorTabsEnum.EDITOR].label:ce.Key===GridTabEnum.MAIN?(ue.isMainGridTab=!0,ue.label=GRID_TAB[GridTabEnum.MAIN].label,oe.isMainGrid=!0):ue.label=ue.id,oe.content.push(ue)}),oe.content.length&&(oe.id=`${oe.type}-${oe.content[0].id.replace(/\s/g,"")}`,oe.key=oe.id),oe}},filterConfigTransitionTabs=K=>{const J=K,ne=oe=>(!isConfigType(oe)||oe.content.length===0||(oe.type==="stack"?oe.content=oe.content.filter(ce=>{const ue=oe.content[0],Ae=ce,pe=Ae.id.includes(EditorTabsEnum.EDITOR_TRANSITION);return pe&&Ae.isActive&&(ue.isActive=!0),!pe}):oe.content=oe.content.map(ce=>ne(ce))),oe);return ne(J)},useDnD=({tabs:K,type:J,selectedGridRow:ne,passedTabs:oe,setTabs:ce,draggableGrid:ue,data:Ae})=>{const{state:pe,action:xe}=useAppContext(),{state:me,action:ge}=useDndContext(),{activeEditorTab:ye}=pe,{config:Se,initiallyReceivedLayout:Te}=me,{setInitiallyReceivedLayout:Ne,updateConfig:$e}=ge,[ke,je]=reactExports.useState(!1),[Ke,Ye]=reactExports.useState({}),ze=reactExports.useRef([]);reactExports.useEffect(()=>{xe.setActiveEditorTabAction(EditorTabsEnum.EDITOR);const Ze=structuredClone(Se),et=filterConfigTransitionTabs(Ze);$e(et);const nt=findParent(Ze,[EditorTabsEnum.EDITOR_TRANSITION]);if(nt){nt.content=nt.content.filter(ve=>(ve.isActive=ve.id===EditorTabsEnum.EDITOR,ve.id!==EditorTabsEnum.EDITOR_TRANSITION));const Ge=correctContent(Ze);$e(Ge)}},[ne==null?void 0:ne.key]);const Xe=(Ze,et=[])=>{const nt=structuredClone(Ze),Ge=Ze!=null&&Ze.length?getDeParsedConfig(nt,et):structuredClone(Se),ve=correctContent(Ge),Be=findParent(ve,[EditorTabsEnum.EDITOR]);let Re={},Ie=!0;return Be==null||Be.content.forEach(Fe=>{var We;const qe=Fe;qe.id===EditorTabsEnum.EDITOR&&Object.keys(Re).length===0&&(Re=Fe,qe.isActive=!0),Ie&&((We=me.viewers.find(Ue=>Ue.id===qe.id))!=null&&We.isPrimary)?(qe.isActive=!0,Ie=!1,Re.isActive=!1):qe.id!==EditorTabsEnum.EDITOR&&(qe.isActive=!1)}),Ge},Je=(Ze,et=[])=>{var nt;return Ae&&((nt=Ae.Layout)!=null&&nt.length)&&Te?Xe(Ae.Layout,et):ke?(je(!1),structuredClone(Ke)):structuredClone(Ze)},rt=(Ze,et)=>{var Re,Ie,Fe,qe,We,Ue;if(ne!=null&&ne.type&&J&&Ae&&!((Re=Ae.Layout)!=null&&Re.length)){let _e={};!et.find(at=>(at.id===EditorTabsEnum.EDITOR&&(_e=at,at.isActive=!1),at.isPrimary))&&!me.hideEditor&&(_e.isActive=!0);const tt=findParent(Se,[EditorTabsEnum.EDITOR]);tt&&(tt.content=et);const it=correctContent(Se);it.size=DefaultPanelSize.FULL_VIEW}if(Ae&&((Ie=Ae.Layout)!=null&&Ie.length)&&ye!==EditorTabsEnum.NEW_ENTITY&&ye!==EditorTabsEnum.COPY_ENTITY&&ye!==EditorTabsEnum.SELECT_TYPE){const _e=Je(Ze,ze.current);Te&&Ne(!1);const Qe=correctContent(_e),tt=findParent(Qe,[GridTabEnum.MAIN]),it=findParent(Qe,[EditorTabsEnum.NEW_ENTITY,EditorTabsEnum.COPY_ENTITY,EditorTabsEnum.SELECT_TYPE]);if(it&&(it.content=[...et],it.id=`${it.type}-${(Fe=it.content[0])==null?void 0:Fe.key.replace(/\s/g,"")}`,it.key=it.id),tt&&(tt.isMainGrid=!0,tt.content.forEach(ot=>{const lt=ot;lt.isActive=lt.id===GridTabEnum.MAIN})),!isAlltabsInLayout(et,ze.current,ne,J)){const ot=Je(Ze),lt=it||findParent(ot,[EditorTabsEnum.EDITOR]);if(lt){const st=me.viewers.filter(pt=>!ze.current.some(mt=>mt===pt.id)),ut=ze.current.filter(pt=>!et.some(mt=>mt.id===pt));if(ut.length&&ut.forEach(pt=>{const mt=findParent(ot,[pt]);(mt==null?void 0:mt.id)===lt.id?lt.content=lt.content.filter(bt=>bt.id!==pt):mt&&isConfigType(mt)&&(mt.content=mt.content.filter(bt=>bt.isActive||bt.id!==pt))}),st.length){const pt=[];st.forEach(mt=>{findParent(Qe,[mt.id])===void 0&&pt.push(mt)}),lt.content=[...lt.content,...pt]}let ft={},dt;lt.content.forEach(pt=>{isGridTabDataType(pt)&&pt.id===EditorTabsEnum.EDITOR&&(ft=pt),ft.isActive&&(pt.isActive=ft.id===pt.id),pt.isActive&&(dt=pt)}),dt||(ft.isActive=!0);const Bt=findParent(Qe,[EditorTabsEnum.EDITOR]);Bt&&(Bt.content=lt.content),ze.current=et.map(pt=>pt.id),ge.saveUiTypeData({simplifiedConfig:getParsedConfig(Qe),handlers:Ae.PinnedHandlers,MaximizedTabId:me.maximizedTabId||""})}}if(me.hideEditor&&!me.shouldIgroreHideEditor){const ot=findParent(Qe,[EditorTabsEnum.EDITOR]);if(ot&&ot.content.length>1){const lt=externalStorage.getViewerActiveTab();if(lt)ot.content.forEach(st=>{st.isActive=st.id===lt});else{const st=et.findIndex(ut=>ut.isPrimary);st>=0?(ot.content[0].isActive=!1,ot.content[st].isActive=!0):(ot.content[0].isActive=!1,ot.content.find(ft=>isGridTabDataType(ft)&&ft.isActive)||(ot.content[1].isActive=!0))}}}if(Qe.key=`${Qe.type}-${(qe=Qe.content[0])==null?void 0:qe.key.replace(/\s/g,"")}`,Qe.id=Qe.key,correctConfigDirection(Qe,me.layoutDirection),findParent(Ze,[EditorTabsEnum.NEW_ENTITY,EditorTabsEnum.COPY_ENTITY,EditorTabsEnum.SELECT_TYPE])&&me.configBackup.type!==Qe.type){const ot=revertConfigNodesOrientation(structuredClone(Qe),me.layoutDirection);correctContent(ot),Qe.content=ot.content}return Qe}if(Ae&&((We=Ae.Layout)!=null&&We.length)&&(ye===EditorTabsEnum.NEW_ENTITY||ye===EditorTabsEnum.COPY_ENTITY||ye===EditorTabsEnum.SELECT_TYPE)){Ye(Ze),je(!0);const _e=returnDefaultConfig(et),Qe=correctContent(_e),tt=findParent(Qe,[GridTabEnum.MAIN]);tt.isMainGrid=!0,tt.content=[tt.content.find(at=>at.id===GridTabEnum.MAIN)],tt.content[0].isActive=!0;const it={type:StackEnum.COLUMN,key:`column-${tt.id}`,id:`column-${tt.id}`,isMainGrid:!1,size:DefaultPanelSize.FULL_VIEW,content:[tt,makeStack(et)]};return correctConfigDirection(it,me.layoutDirection),it}if(ue===void 0)return makeStack(et);const nt=structuredClone(Ze),Ge=structuredClone(Ze.content),ve=Ge.filter(_e=>!_e.id.includes(GridTabEnum.MAIN));ve.length&&ve.length===1&&ve[0].type===StackEnum.STACK&&(ve[0].content&&ve[0].content.forEach(_e=>{const Qe=et.find(tt=>tt.id===_e.id);Qe&&(Qe.isActive=_e.isActive)}),ve[0].content=et,ve[0].id=`${ve[0].type}-${(Ue=et[0])==null?void 0:Ue.key.replace(/\s/g,"")}`,ve[0].key=ve[0].id,nt.content=Ge),ze.current=et.map(_e=>_e.id),correctConfigDirection(nt,me.layoutDirection);const Be=findParent(nt,[EditorTabsEnum.EDITOR]);if(Be){const _e=Be.content.filter(tt=>isGridTabDataType(tt)),Qe=_e.every(tt=>!tt.isActive);Qe&&me.hideEditor&&me.shouldIgroreHideEditor&&(_e[0].isActive=!0),Qe&&me.hideEditor&&!me.shouldIgroreHideEditor&&_e.length>1&&(_e[1].isActive=!0)}return nt};reactExports.useEffect(()=>{var nt,Ge;const Ze=ge.getEditorTabs(pe.activeEditorTab,J,oe);me.maximizedTabId&&me.maximizedTabId!==EditorTabsEnum.EDITOR&&Ze.find(ve=>ve.id===me.maximizedTabId)&&ge.updateMaximizedTabId(EditorTabsEnum.EDITOR,!0);let et=Ze.find(ve=>ve.id===K.activeTab)?K.activeTab:(nt=Ze[me.hideEditor&&!me.shouldIgroreHideEditor&&Ze.length>1?1:0])==null?void 0:nt.id;if(Ze.length&&!me.hideEditor||Ze.length==1&&me.hideEditor){const ve=Ze.findIndex(Be=>Be.isPrimary);ve>=0?(Ze[ve].isActive=!0,et=Ze[ve].id):Ze[0].isActive=!0}else if(Ze.length>1&&me.hideEditor&&!me.shouldIgroreHideEditor){const ve=externalStorage.getViewerActiveTab();if(ve)Ze.forEach(Be=>{Be.isActive=Be.id===ve,Be.isActive&&(et=Be.id)});else{const Be=Ze.findIndex(Re=>Re.isPrimary);Be>=0?(Ze[0].isActive=!1,Ze[Be].isActive=!0,et=Ze[Be].id):(Ze[0].isActive=!1,Ze[1].isActive=!0,et=Ze[1].id)}}ce({activeTab:et,openedTabs:Ze}),$e(rt((Ge=Ae==null?void 0:Ae.Layout)!=null&&Ge.length?Se:returnDefaultConfig([]),Ze))},[ye,me.viewers])},filterConfigContent=(K,J)=>{const ne=K;if(!(isConfigType(ne)&&ne.content.length&&(ne.content=ne.content.filter(oe=>filterConfigContent(oe,J)),ne.content.length===0))&&ne.key!==(J==null?void 0:J.key))return ne},findTarget=(K,J)=>{if(J){if(K.key===J)return K;if(K.content&&K.content.length)for(let ne=0;ne<K.content.length;ne+=1){const oe=findTarget(K.content[ne],J);if(oe)return oe}}},setActiveFalse=(K,J)=>{K==null||K.content.forEach(ne=>{const oe=ne;oe.id!==J.id&&J.isActive&&(oe.isActive=!1)})},setDraggingTabUndragging=(K,J)=>{const ne=findTarget(K,J.id);ne&&isGridTabDataType(ne)&&(ne.isCurrentlyDragging=!1)},reorderTabs=(K,J,ne)=>{const oe=Array.from(K),[ce]=oe.splice(J,1);return oe.splice(ne,0,ce),oe},droppable$1="_droppable_p0djk_1",top$1="_top_p0djk_5",bottom="_bottom_p0djk_10",left="_left_p0djk_16",right="_right_p0djk_21",maxTop="_maxTop_p0djk_27",maxBottom="_maxBottom_p0djk_33",maxLeft="_maxLeft_p0djk_40",maxRight="_maxRight_p0djk_41",fullWidth="_fullWidth_p0djk_56",overflowHidden="_overflowHidden_p0djk_60",positionAbsolute="_positionAbsolute_p0djk_64",full="_full_p0djk_56",styles$1A={droppable:droppable$1,top:top$1,bottom,left,right,maxTop,maxBottom,maxLeft,maxRight,fullWidth,overflowHidden,positionAbsolute,full},DnDDroppable=({children:K,isAbsolute:J,isTabs:ne,isTop:oe,isBottom:ce,isLeft:ue,isRight:Ae,isSingle:pe,isMaxTop:xe,isMaxBottom:me,isMaxLeft:ge,isMaxRight:ye,stackRef:Se,shouldApplyFullWidth:Te=!0,className:Ne})=>{const $e=reactExports.useRef(null),{state:ke,action:je}=useDndContext(),{config:Ke,leftMouseBtnClicked:Ye,isDragging:ze,initialTabsZone:Xe,draggingLabel:Je,startTabIndex:rt,endTabIndex:Ze,dropMarker:et,dropPreview:nt,managerRef:Ge,droppableElRef:ve,draggingTabRef:Be,isWithinTabs:Re,placeholder:Ie,isTabExistInStackRef:Fe}=ke,{updateConfig:qe,setIsDragging:We,setTabsZone:Ue,setDropZone:_e,setTargetStackRef:Qe,setDraggingLabel:tt,setEndTabIndex:it,updateIsWithinTabs:at,setPlaceholder:ot,setShouldInsertPlaceholder:lt}=je;reactExports.useEffect(()=>{var Bt,pt;if(((Bt=$e.current)==null?void 0:Bt.dataset.position)==="max-top"&&Ge.current){const mt=(pt=Ge.current.querySelector(".stack-content"))==null?void 0:pt.getBoundingClientRect();$e.current.style.top=`${mt==null?void 0:mt.top}px`}},[Ke,ze]);const st=reactExports.useCallback(()=>{if(!Ye||!$e.current||!et.current||!nt.current)return;if($e.current.classList.contains("tabs")){nt.current.classList.add("displayNone");const{childElementCount:mt}=$e.current.querySelector(".ant-tabs-nav-list")||1,bt=Se&&isConfigType(Se)&&Se.content.some(xt=>xt.id===(Je==null?void 0:Je.id));Fe.current=bt===void 0?null:bt,it(bt?mt-1:mt),Ue($e.current),Qe(Se),et.current.classList.add("displayNone");return}Ue(null),et.current.classList.remove("displayNone"),nt.current.classList.remove("displayNone");const Bt=$e.current.getBoundingClientRect(),pt=$e.current.parentElement.getBoundingClientRect();et.current.style.top=`${Bt.top}px`,$e.current.classList.contains("right")?et.current.style.left=`${pt.right-pt.width/2}px`:et.current.style.left=`${Bt.left}px`,$e.current.classList.contains("left")||$e.current.classList.contains("right")?et.current.style.width=`${pt.width/2}px`:et.current.style.width=$e.current.classList.contains("single")?"100%":`${Bt.width}px`,et.current.style.height=`${Bt.height}px`,_e($e.current)},[ze,Je,Ye]),ut=reactExports.useCallback(()=>{var mt,bt,xt,yt,It,ht,gt,Pt,wt,St,Zt,Ct,Rt,dr,Dt,Tt,or,Mt,kt,ur,$t,jt,nr,Ot;if(!ze||!nt.current)return;Ie==null||Ie.remove(),ot(null),lt(!0);const Bt=JSON.parse(JSON.stringify(Ke)),pt=findParent(Bt,[Je.id]);if(Je!=null&&Je.isMainGridTab&&(pt.isMainGrid=!1),((mt=$e.current)==null?void 0:mt.dataset.position)==="left"||((bt=$e.current)==null?void 0:bt.dataset.position)==="right"||((xt=$e.current)==null?void 0:xt.dataset.position)==="top"||((yt=$e.current)==null?void 0:yt.dataset.position)==="bottom"||((It=$e.current)==null?void 0:It.dataset.position)==="max-left"||((ht=$e.current)==null?void 0:ht.dataset.position)==="max-right"||((gt=$e.current)==null?void 0:gt.dataset.position)==="max-bottom"||((Pt=$e.current)==null?void 0:Pt.dataset.position)==="max-top"){const Lt=filterConfigContent(Bt,Je);Lt.key=`${Lt.type}-${(wt=Lt.content[0])==null?void 0:wt.key.replace(/\s/g,"")}`,Lt.id=`${Lt.type}-${(St=Lt.content[0])==null?void 0:St.key.replace(/\s/g,"")}`,Je!=null&&Je.isMainGridTab&&(Lt.isMainGrid=!1),Je!=null&&Je.isMainGridTab&&Lt.content.forEach(tr=>{const Vt=tr;Vt.isMainGrid=!1}),Je.isActive=!0;const lr={type:StackEnum.STACK,key:`stack-${Je.key.replace(/\s/g,"")}`,id:`stack-${Je.key.replace(/\s/g,"")}`,isMainGrid:(Je==null?void 0:Je.isMainGridTab)||!1,content:[Je]},Ht=((Zt=$e.current)==null?void 0:Zt.dataset.position)==="right"||((Ct=$e.current)==null?void 0:Ct.dataset.position)==="left"||((Rt=$e.current)==null?void 0:Rt.dataset.position)==="max-left"||((dr=$e.current)==null?void 0:dr.dataset.position)==="max-right",qt={type:`${Ht?StackEnum.ROW:StackEnum.COLUMN}`,key:`${Ht?StackEnum.ROW:StackEnum.COLUMN}-1`,id:`${Ht?StackEnum.ROW:StackEnum.COLUMN}-1`,isMainGrid:!1,size:DefaultPanelSize.DEFAULT,content:[]};if(Lt.type===StackEnum.ROW||Lt.type===StackEnum.COLUMN){const tr=findParent(Lt,[Se.key])||Se,Vt=tr.content.findIndex(Yt=>Yt.id===Se.key);qt.content=[...((Dt=$e.current)==null?void 0:Dt.dataset.position)==="left"||((Tt=$e.current)==null?void 0:Tt.dataset.position)==="max-left"||((or=$e.current)==null?void 0:or.dataset.position)==="top"||((Mt=$e.current)==null?void 0:Mt.dataset.position)==="max-top"?[lr,Vt>=0?tr.content[Vt]:Lt]:[Vt>=0?tr.content[Vt]:Lt,lr]],Vt>=0&&tr.content.splice(Vt,1,qt),qt.key=`${qt.type}-${qt.content[0].key.replace(/\s/g,"")}`,qt.id=`${qt.type}-${qt.content[0].key.replace(/\s/g,"")}`;const Gt=correctContent(Vt>=0?Lt:qt);Gt.key=`${Gt.type}-${Gt.content[0].key.replace(/\s/g,"")}`,Gt.id=`${Gt.type}-${Gt.content[0].key.replace(/\s/g,"")}`;const br=getParsedConfig(Gt,!0);qe(Gt),je.saveUiTypeData({simplifiedConfig:br})}else{qt.content=[...((kt=$e.current)==null?void 0:kt.dataset.position)==="left"||((ur=$e.current)==null?void 0:ur.dataset.position)==="max-left"||(($t=$e.current)==null?void 0:$t.dataset.position)==="top"||((jt=$e.current)==null?void 0:jt.dataset.position)==="max-top"?[lr,Lt]:[Lt,lr]],correctContent(qt),qt.key=`${Ht?StackEnum.ROW:StackEnum.COLUMN}-${qt.content[0].key.replace(/\s/g,"")}`,qt.id=`${Ht?StackEnum.ROW:StackEnum.COLUMN}-${qt.content[0].key.replace(/\s/g,"")}`;const tr=getParsedConfig(qt,!0);qe(qt),je.saveUiTypeData({simplifiedConfig:tr})}}if(((nr=$e.current)==null?void 0:nr.dataset.position)==="tabs"){const Lt=findParent(Bt,[Je.key]);if(!Lt)return;if(Lt.key!==Se.key){const tr=findTarget(Bt,Se.key);if(!tr)return;tr.content.forEach(Vt=>{const Gt=Vt;isGridTabDataType(Gt)&&(Gt.isActive=!1)}),Je.isActive=!0,tr.isMainGrid=tr.isMainGrid||!!(Je!=null&&Je.isMainGridTab),tr.content.splice(Ze,0,Je),Lt.content.splice(rt,1)}else{Je!=null&&Je.isMainGridTab&&(pt.isMainGrid=!0),setActiveFalse(pt,Je);const tr=reorderTabs(Lt.content,rt,Ze);Lt.content=tr}const lr=correctContent(Bt);lr.size=DefaultPanelSize.FULL_VIEW,setDraggingTabUndragging(lr,Je);const Ht=getParsedConfig(lr,!0);qe(lr),je.saveUiTypeData({simplifiedConfig:Ht});let qt=(Ot=$e.current.querySelector(".ant-tabs-nav-list"))==null?void 0:Ot.firstChild;for(;qt;)qt.removeAttribute("style"),qt=qt.nextSibling;if($e.current!==Xe){let tr=Xe==null?void 0:Xe.firstChild;for(;tr;)tr.removeAttribute("style"),tr=tr.nextSibling}}nt.current.classList.add("displayNone"),nt.current.removeAttribute("style"),We(!1),tt(null),at(!0),$e.current.removeAttribute("style")},[Ke,Je,ze,rt,Ze,Ye,Xe,Re,Ie]),ft=()=>{ve.current=$e.current,Ue($e.current),Qe(Se)},dt=reactExports.useCallback(Bt=>{var mt,bt;if(!ze)return;(mt=$e.current)!=null&&mt.classList.contains("tabs")&&(it(Number((bt=Be.current)==null?void 0:bt.dataset.index)),at(!1));let pt=Bt==null?void 0:Bt.firstChild;for(;pt;)pt.style.transform="",pt=pt.nextSibling},[Se,ze,Je,Re]);return jsxRuntimeExports.jsx("div",{ref:$e,className:cx("droppable",{displayNone:!ze&&!ne,[styles$1A.fullWidth]:Te&&ne,[styles$1A.overflowHidden]:Te&&ne,[styles$1A.positionAbsolute]:J,tabs:ne},oe&&styles$1A.top,ce&&styles$1A.bottom,{left:ue,[styles$1A.left]:ue},{right:Ae,[styles$1A.right]:Ae},{single:pe},{[styles$1A.full]:pe,maxTop:xe,[styles$1A.maxTop]:xe},{maxTop:xe,[styles$1A.maxTop]:xe},{maxBottom:me,[styles$1A.maxBottom]:me},{maxLeft:ge,[styles$1A.maxLeft]:ge},{maxRight:ye,[styles$1A.maxRight]:ye},styles$1A.droppable,Ne),"data-position":Ae&&"right"||ue&&"left"||oe&&"top"||ce&&"bottom"||ne&&"tabs"||pe&&"single"||xe&&"max-top"||me&&"max-bottom"||ge&&"max-left"||ye&&"max-right",onMouseDown:ft,onMouseEnter:st,onMouseUp:ut,onMouseLeave:()=>dt($e.current),children:K})},DropBox=({position:K,stackRef:J,children:ne,shouldApplyFullWidth:oe=!0,className:ce})=>{switch(K){case DropBoxEnum.GLOBAL:return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isMaxTop:!0,stackRef:J}),jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isMaxBottom:!0,stackRef:J}),jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isMaxLeft:!0,stackRef:J}),jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isMaxRight:!0,stackRef:J})]});case DropBoxEnum.TOP:return jsxRuntimeExports.jsx(DnDDroppable,{isTabs:!0,stackRef:J,shouldApplyFullWidth:oe,className:ce,children:ne});case DropBoxEnum.SINGLE:return jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isSingle:!0,stackRef:J});default:return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isTop:!0,stackRef:J}),jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isBottom:!0,stackRef:J}),jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isLeft:!0,stackRef:J}),jsxRuntimeExports.jsx(DnDDroppable,{isAbsolute:!0,isRight:!0,stackRef:J})]})}},cleanTypeHelper=K=>(K==null?void 0:K.split(".").pop())||"",container$I="_container_1e3ls_1",wrapper$2="_wrapper_1e3ls_12",icon$1="_icon_1e3ls_19",content$c="_content_1e3ls_26",additionalContent="_additionalContent_1e3ls_32",pagination$2="_pagination_1e3ls_38",styles$1z={container:container$I,wrapper:wrapper$2,icon:icon$1,content:content$c,additionalContent,pagination:pagination$2},NoGridData=K=>{const{NoGridDataInner:J}=useComponentsMapper();return jsxRuntimeExports.jsx(J,{...K})},NoGridDataInner=({content:K,isRefreshButton:J=!1,handleButtonClick:ne,containerClassname:oe,additionalContent:ce,icon:ue,loading:Ae,getPaginationBlock:pe,buttonIcon:xe=jsxRuntimeExports.jsx(Pk,{}),buttonTitle:me="noData.refresh"})=>{const{t:ge}=useTranslation();return jsxRuntimeExports.jsx(PF,{loading:Ae,children:K?jsxRuntimeExports.jsxs("div",{className:cx(styles$1z.container,oe),children:[jsxRuntimeExports.jsxs("div",{className:styles$1z.wrapper,children:[ue&&jsxRuntimeExports.jsx("div",{className:styles$1z.icon,children:ue}),typeof K=="string"?jsxRuntimeExports.jsx("span",{className:styles$1z.content,children:K}):K,ce&&jsxRuntimeExports.jsx("span",{className:styles$1z.additionalContent,children:ce}),J&&jsxRuntimeExports.jsx(rl,{iconBefore:xe,type:"primary",onClick:ne,children:ge(me)})]}),pe==null?void 0:pe(styles$1z.pagination)]}):null})};let Collection$3=class{constructor(J,ne){if(J==null&&ne==null)this._data=[],this._refs=[];else{if(J.length!==ne.length)throw Error("Collection: data length should match references length.");this._data=J,this._refs=ne}}get data(){return this._data}get refs(){return this._refs}get length(){return this._data.length}add(J,ne){this._data.push(J),this._refs.push(ne)}};var collection=Collection$3,helpers,hasRequiredHelpers;function requireHelpers(){if(hasRequiredHelpers)return helpers;hasRequiredHelpers=1;const K=requireError(),J=collection,ne={NUMBER:0,ARRAY:1,BOOLEAN:2,STRING:3,RANGE_REF:4,CELL_REF:5,COLLECTIONS:6,NUMBER_NO_BOOLEAN:10},oe=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142],ce={};Object.keys(ne).forEach(ge=>{ce[ne[ge]]=ge});class ue{constructor(){this.Types=ne,this.type2Number={number:ne.NUMBER,boolean:ne.BOOLEAN,string:ne.STRING,object:-1}}checkFunctionResult(ye){if(typeof ye==="number"){if(isNaN(ye))return K.VALUE;if(!isFinite(ye))return K.NUM}return ye??K.NULL}flattenDeep(ye){return ye.reduce((Se,Te)=>Array.isArray(Te)?Se.concat(this.flattenDeep(Te)):Se.concat(Te),[])}acceptNumber(ye,Se=!0,Te=!0){if(ye instanceof K)return ye;let Ne;if(typeof ye=="number")Ne=ye;else if(typeof ye=="boolean")if(Te)Ne=Number(ye);else throw K.VALUE;else if(typeof ye=="string"){if(ye.length===0||(Ne=Number(ye),Ne!==Ne))throw K.VALUE}else if(Array.isArray(ye))if(Se)Ne=this.acceptNumber(ye[0][0]);else if(ye[0].length===1)Ne=this.acceptNumber(ye[0][0]);else throw K.VALUE;else throw Error("Unknown type in FormulaHelpers.acceptNumber");return Ne}flattenParams(ye,Se,Te,Ne,$e=null,ke=1){if(ye.length<ke)throw K.ARG_MISSING([Se]);$e==null&&($e=Se===ne.NUMBER?0:Se==null?null:""),ye.forEach(je=>{const{isCellRef:Ke,isRangeRef:Ye,isArray:ze}=je,Xe=je.value instanceof J,Je=!Ke&&!Ye&&!ze&&!Xe,rt={isLiteral:Je,isCellRef:Ke,isRangeRef:Ye,isArray:ze,isUnion:Xe};if(Je)je.omitted?je=$e:je=this.accept(je,Se,$e),Ne(je,rt);else if(Ke)Ne(je.value,rt);else if(Xe){if(!Te)throw K.VALUE;je=je.value.data,je=this.flattenDeep(je),je.forEach(Ze=>{Ne(Ze,rt)})}else(Ye||ze)&&(je=this.flattenDeep(je.value),je.forEach(Ze=>{Ne(Ze,rt)}))})}accept(ye,Se=null,Te,Ne=!0,$e=!1){if(Array.isArray(Se)&&(Se=Se[0]),ye==null&&Te===void 0)throw K.ARG_MISSING([Se]);if(ye==null)return Te;if(typeof ye!="object"||Array.isArray(ye))return ye;const ke=ye.isArray;if(ye.value!=null&&(ye=ye.value),Se==null)return ye;if(ye instanceof K)throw ye;if(Se===ne.ARRAY){if(Array.isArray(ye))return Ne?this.flattenDeep(ye):ye;if(ye instanceof J)throw K.VALUE;if($e)return Ne?[ye]:[[ye]];throw K.VALUE}else if(Se===ne.COLLECTIONS)return ye;ke&&(ye=ye[0][0]);const je=this.type(ye);if(Se===ne.STRING)je===ne.BOOLEAN?ye=ye?"TRUE":"FALSE":ye=`${ye}`;else if(Se===ne.BOOLEAN){if(je===ne.STRING)throw K.VALUE;je===ne.NUMBER&&(ye=!!ye)}else if(Se===ne.NUMBER)ye=this.acceptNumber(ye,!1);else if(Se===ne.NUMBER_NO_BOOLEAN)ye=this.acceptNumber(ye,!1,!1);else throw K.VALUE;return ye}type(ye){let Se=this.type2Number[typeof ye];return Se===-1&&(Array.isArray(ye)?Se=ne.ARRAY:ye.ref?ye.ref.from?Se=ne.RANGE_REF:Se=ne.CELL_REF:ye instanceof J&&(Se=ne.COLLECTIONS)),Se}isRangeRef(ye){return ye.ref&&ye.ref.from}isCellRef(ye){return ye.ref&&!ye.ref.from}retrieveRanges(ye,Se,Te){return Te=me.extend(Se,Te),Se=this.retrieveArg(ye,Se),Se=Ae.accept(Se,ne.ARRAY,void 0,!1,!0),Te!==Se?(Te=this.retrieveArg(ye,Te),Te=Ae.accept(Te,ne.ARRAY,void 0,!1,!0)):Te=Se,[Se,Te]}retrieveArg(ye,Se){if(Se===null)return{value:0,isArray:!1,omitted:!0};const Te=ye.utils.extractRefValue(Se);return{value:Te.val,isArray:Te.isArray,ref:Se.ref}}}const Ae=new ue,pe={isWildCard:ge=>typeof ge=="string"?/[*?]/.test(ge):!1,toRegex:(ge,ye)=>RegExp(ge.replace(/[.+^${}()|[\]\\]/g,"\\$&").replace(/([^~]??)[?]/g,"$1.").replace(/([^~]??)[*]/g,"$1.*").replace(/~([?*])/g,"$1"),ye)},xe={parse:ge=>{const ye=typeof ge;if(ye==="string"){const Se=ge.toUpperCase();if(Se==="TRUE"||Se==="FALSE")return{op:"=",value:Se==="TRUE"};const Te=ge.match(/(<>|>=|<=|>|<|=)(.*)/);if(Te){let Ne=Te[1],$e;if(isNaN(Te[2])){const ke=Te[2].toUpperCase();if(ke==="TRUE"||ke==="FALSE")$e=ke==="TRUE";else if(/#NULL!|#DIV\/0!|#VALUE!|#NAME\?|#NUM!|#N\/A|#REF!/.test(Te[2]))$e=new K(Te[2]);else if($e=Te[2],pe.isWildCard($e))return{op:"wc",value:pe.toRegex($e),match:Ne==="="}}else $e=Number(Te[2]);return{op:Ne,value:$e}}else return pe.isWildCard(ge)?{op:"wc",value:pe.toRegex(ge),match:!0}:{op:"=",value:ge}}else{if(ye==="boolean"||ye==="number"||Array.isArray(ge)||ge instanceof K)return{op:"=",value:ge};throw Error(`Criteria.parse: type ${typeof ge} not support`)}}},me={columnNumberToName:ge=>{let ye=ge,Se="",Te=0;for(;ye>0;)Te=(ye-1)%26,Se=String.fromCharCode(65+Te)+Se,ye=Math.floor((ye-Te)/26);return Se},columnNameToNumber:ge=>{ge=ge.toUpperCase();const ye=ge.length;let Se=0;for(let Te=0;Te<ye;Te++){const Ne=ge.charCodeAt(Te);isNaN(Ne)||(Se+=(Ne-64)*26**(ye-Te-1))}return Se},extend:(ge,ye)=>{if(ye==null)return ge;let Se,Te;if(Ae.isCellRef(ge))Se=0,Te=0;else if(Ae.isRangeRef(ge))Se=ge.ref.to.row-ge.ref.from.row,Te=ge.ref.to.col-ge.ref.from.col;else throw Error("Address.extend should not reach here.");return Ae.isCellRef(ye)?(Se>0||Te>0)&&(ye={ref:{from:{col:ye.ref.col,row:ye.ref.row},to:{row:ye.ref.row+Se,col:ye.ref.col+Te}}}):(ye.ref.to.row=ye.ref.from.row+Se,ye.ref.to.col=ye.ref.from.col+Te),ye}};return helpers={FormulaHelpers:Ae,Types:ne,ReversedTypes:ce,Factorials:oe,WildCard:pe,Criteria:xe,Address:me},helpers}var error,hasRequiredError;function requireError(){if(hasRequiredError)return error;hasRequiredError=1;class K extends Error{constructor(ne,oe,ce){if(super(oe),oe==null&&ce==null&&K.errorMap.has(ne))return K.errorMap.get(ne);oe==null&&ce==null?(this._error=ne,K.errorMap.set(ne,this)):this._error=ne,this.details=ce}get error(){return this._error}get name(){return this._error}equals(ne){return ne instanceof K&&ne._error===this._error}toString(){return this._error}}return K.errorMap=new Map,K.DIV0=new K("#DIV/0!"),K.NA=new K("#N/A"),K.NAME=new K("#NAME?"),K.NULL=new K("#NULL!"),K.NUM=new K("#NUM!"),K.REF=new K("#REF!"),K.VALUE=new K("#VALUE!"),K.NOT_IMPLEMENTED=J=>new K("#NAME?",`Function ${J} is not implemented.`),K.TOO_MANY_ARGS=J=>new K("#N/A",`Function ${J} has too many arguments.`),K.ARG_MISSING=J=>{const{Types:ne}=requireHelpers();return new K("#N/A",`Argument type ${J.map(oe=>ne[oe]).join(", ")} is missing.`)},K.ERROR=(J,ne)=>new K("#ERROR!",J,ne),error=K,error}let SSF$1=class{};SSF$1.version="0.10.3";function _strrev(K){let J="",ne=K.length-1;for(;ne>=0;)J+=K.charAt(ne--);return J}function fill(K,J){let ne="";for(;ne.length<J;)ne+=K;return ne}function pad0(K,J){let ne=""+K;return ne.length>=J?ne:fill("0",J-ne.length)+ne}function pad_(K,J){let ne=""+K;return ne.length>=J?ne:fill(" ",J-ne.length)+ne}function rpad_(K,J){let ne=""+K;return ne.length>=J?ne:ne+fill(" ",J-ne.length)}function pad0r1(K,J){let ne=""+Math.round(K);return ne.length>=J?ne:fill("0",J-ne.length)+ne}function pad0r2(K,J){let ne=""+K;return ne.length>=J?ne:fill("0",J-ne.length)+ne}const p2_32=Math.pow(2,32);function pad0r(K,J){if(K>p2_32||K<-p2_32)return pad0r1(K,J);const ne=Math.round(K);return pad0r2(ne,J)}function isgeneral(K,J){return J=J||0,K.length>=7+J&&(K.charCodeAt(J)|32)===103&&(K.charCodeAt(J+1)|32)===101&&(K.charCodeAt(J+2)|32)===110&&(K.charCodeAt(J+3)|32)===101&&(K.charCodeAt(J+4)|32)===114&&(K.charCodeAt(J+5)|32)===97&&(K.charCodeAt(J+6)|32)===108}const days=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],months=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function init_table(K){K[0]="General",K[1]="0",K[2]="0.00",K[3]="#,##0",K[4]="#,##0.00",K[9]="0%",K[10]="0.00%",K[11]="0.00E+00",K[12]="# ?/?",K[13]="# ??/??",K[14]="m/d/yy",K[15]="d-mmm-yy",K[16]="d-mmm",K[17]="mmm-yy",K[18]="h:mm AM/PM",K[19]="h:mm:ss AM/PM",K[20]="h:mm",K[21]="h:mm:ss",K[22]="m/d/yy h:mm",K[37]="#,##0 ;(#,##0)",K[38]="#,##0 ;[Red](#,##0)",K[39]="#,##0.00;(#,##0.00)",K[40]="#,##0.00;[Red](#,##0.00)",K[45]="mm:ss",K[46]="[h]:mm:ss",K[47]="mmss.0",K[48]="##0.0E+0",K[49]="@",K[56]='"/ "hh""mm""ss" "',K[65535]="General"}const table_fmt={};init_table(table_fmt);function frac(K,J,ne){const oe=K<0?-1:1;let ce=K*oe,ue=0,Ae=1,pe=0,xe=1,me=0,ge=0,ye=Math.floor(ce);for(;me<J&&(ye=Math.floor(ce),pe=ye*Ae+ue,ge=ye*me+xe,!(ce-ye<5e-8));)ce=1/(ce-ye),ue=Ae,Ae=pe,xe=me,me=ge;if(ge>J&&(me>J?(ge=xe,pe=ue):(ge=me,pe=Ae)),!ne)return[0,oe*pe,ge];const Se=Math.floor(oe*pe/ge);return[Se,oe*pe-Se*ge,ge]}function parse_date_code(K,J,ne){if(K>2958465||K<0)return null;let oe=K|0,ce=Math.floor(86400*(K-oe)),ue=0,Ae=[];const pe={D:oe,T:ce,u:86400*(K-oe)-ce,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(pe.u)<1e-6&&(pe.u=0),J&&J.date1904&&(oe+=1462),pe.u>.9999&&(pe.u=0,++ce===86400&&(pe.T=ce=0,++oe,++pe.D)),oe===60)Ae=ne?[1317,10,29]:[1900,2,29],ue=3;else if(oe===0)Ae=ne?[1317,8,29]:[1900,1,0],ue=6;else{oe>60&&--oe;const xe=new Date(1900,0,1);xe.setDate(xe.getDate()+oe-1),Ae=[xe.getFullYear(),xe.getMonth()+1,xe.getDate()],ue=xe.getDay(),oe<60&&(ue=(ue+6)%7),ne&&(ue=fix_hijri())}return pe.y=Ae[0],pe.m=Ae[1],pe.d=Ae[2],pe.S=ce%60,ce=Math.floor(ce/60),pe.M=ce%60,ce=Math.floor(ce/60),pe.H=ce,pe.q=ue,pe}SSF$1.parse_date_code=parse_date_code;const basedate=new Date(1899,11,31,0,0,0),dnthresh=basedate.getTime(),base1904=new Date(1900,2,1,0,0,0);function datenum_local(K,J){let ne=K.getTime();return J?ne-=1461*24*60*60*1e3:K>=base1904&&(ne+=24*60*60*1e3),(ne-(dnthresh+(K.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function general_fmt_int(K){return K.toString(10)}SSF$1._general_int=general_fmt_int;const general_fmt_num=function(){const J=/\.(\d*[1-9])0+$/,ne=/\.0*$/,oe=/\.(\d*[1-9])0+/,ce=/\.0*[Ee]/,ue=/(E[+-])(\d)$/;function Ae(ge){const ye=ge<0?12:11;let Se=me(ge.toFixed(12));return Se.length<=ye||(Se=ge.toPrecision(10),Se.length<=ye)?Se:ge.toExponential(5)}function pe(ge){let ye=ge.toFixed(11).replace(J,".$1");return ye.length>(ge<0?12:11)&&(ye=ge.toPrecision(6)),ye}function xe(ge){for(let ye=0;ye!==ge.length;++ye)if((ge.charCodeAt(ye)|32)===101)return ge.replace(oe,".$1").replace(ce,"E").replace("e","E").replace(ue,"$10$2");return ge}function me(ge){return ge.indexOf(".")>-1?ge.replace(ne,"").replace(J,".$1"):ge}return function(ye){let Se=Math.floor(Math.log(Math.abs(ye))*Math.LOG10E),Te;return Se>=-4&&Se<=-1?Te=ye.toPrecision(10+Se):Math.abs(Se)<=9?Te=Ae(ye):Se===10?Te=ye.toFixed(10).substr(0,12):Te=pe(ye),me(xe(Te))}}();SSF$1._general_num=general_fmt_num;function general_fmt(K,J){switch(typeof K){case"string":return K;case"boolean":return K?"TRUE":"FALSE";case"number":return(K|0)===K?general_fmt_int(K):general_fmt_num(K);case"undefined":return"";case"object":if(K==null)return"";if(K instanceof Date)return format(14,datenum_local(K,J&&J.date1904),J)}throw new Error("unsupported value in General format: "+K)}SSF$1._general=general_fmt;function fix_hijri(){return 0}function write_date(K,J,ne,oe){let ce="",ue=0,Ae=0,pe=ne.y,xe,me=0;switch(K){case 98:pe=ne.y+543;case 121:switch(J.length){case 1:case 2:xe=pe%100,me=2;break;default:xe=pe%1e4,me=4;break}break;case 109:switch(J.length){case 1:case 2:xe=ne.m,me=J.length;break;case 3:return months[ne.m-1][1];case 5:return months[ne.m-1][0];default:return months[ne.m-1][2]}break;case 100:switch(J.length){case 1:case 2:xe=ne.d,me=J.length;break;case 3:return days[ne.q][0];default:return days[ne.q][1]}break;case 104:switch(J.length){case 1:case 2:xe=1+(ne.H+11)%12,me=J.length;break;default:throw"bad hour format: "+J}break;case 72:switch(J.length){case 1:case 2:xe=ne.H,me=J.length;break;default:throw"bad hour format: "+J}break;case 77:switch(J.length){case 1:case 2:xe=ne.M,me=J.length;break;default:throw"bad minute format: "+J}break;case 115:if(J!=="s"&&J!=="ss"&&J!==".0"&&J!==".00"&&J!==".000")throw"bad second format: "+J;return ne.u===0&&(J==="s"||J==="ss")?pad0(ne.S,J.length):(oe>=2?Ae=oe===3?1e3:100:Ae=oe===1?10:1,ue=Math.round(Ae*(ne.S+ne.u)),ue>=60*Ae&&(ue=0),J==="s"?ue===0?"0":""+ue/Ae:(ce=pad0(ue,2+oe),J==="ss"?ce.substr(0,2):"."+ce.substr(2,J.length-1)));case 90:switch(J){case"[h]":case"[hh]":xe=ne.D*24+ne.H;break;case"[m]":case"[mm]":xe=(ne.D*24+ne.H)*60+ne.M;break;case"[s]":case"[ss]":xe=((ne.D*24+ne.H)*60+ne.M)*60+Math.round(ne.S+ne.u);break;default:throw"bad abstime format: "+J}me=J.length===3?1:2;break;case 101:xe=pe,me=1}return me>0?pad0(xe,me):""}function commaify(K){if(K.length<=3)return K;let ne=K.length%3,oe=K.substr(0,ne);for(;ne!==K.length;ne+=3)oe+=(oe.length>0?",":"")+K.substr(ne,3);return oe}const write_num=function(){const J=/%/g;function ne(Xe,Je,rt){const Ze=Je.replace(J,""),et=Je.length-Ze.length;return write_num(Xe,Ze,rt*Math.pow(10,2*et))+fill("%",et)}function oe(Xe,Je,rt){let Ze=Je.length-1;for(;Je.charCodeAt(Ze-1)===44;)--Ze;return write_num(Xe,Je.substr(0,Ze),rt/Math.pow(10,3*(Je.length-Ze)))}function ce(Xe,Je){let rt,Ze=Xe.indexOf("E")-Xe.indexOf(".")-1;if(Xe.match(/^#+0.0E\+0$/)){if(Je===0)return"0.0E+0";if(Je<0)return"-"+ce(Xe,-Je);let et=Xe.indexOf(".");et===-1&&(et=Xe.indexOf("E"));let nt=Math.floor(Math.log(Je)*Math.LOG10E)%et;if(nt<0&&(nt+=et),rt=(Je/Math.pow(10,nt)).toPrecision(Ze+1+(et+nt)%et),rt.indexOf("e")===-1){const Ge=Math.floor(Math.log(Je)*Math.LOG10E);for(rt.indexOf(".")===-1?rt=rt.charAt(0)+"."+rt.substr(1)+"E+"+(Ge-rt.length+nt):rt+="E+"+(Ge-nt);rt.substr(0,2)==="0.";)rt=rt.charAt(0)+rt.substr(2,et)+"."+rt.substr(2+et),rt=rt.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");rt=rt.replace(/\+-/,"-")}rt=rt.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(Ge,ve,Be,Re){return ve+Be+Re.substr(0,(et+nt)%et)+"."+Re.substr(nt)+"E"})}else rt=Je.toExponential(Ze);return Xe.match(/E\+00$/)&&rt.match(/e[+-]\d$/)&&(rt=rt.substr(0,rt.length-1)+"0"+rt.charAt(rt.length-1)),Xe.match(/E\-/)&&rt.match(/e\+/)&&(rt=rt.replace(/e\+/,"e")),rt.replace("e","E")}const ue=/# (\?+)( ?)\/( ?)(\d+)/;function Ae(Xe,Je,rt){const Ze=parseInt(Xe[4],10),et=Math.round(Je*Ze),nt=Math.floor(et/Ze);let Ge=et-nt*Ze,ve=Ze;return rt+(nt===0?"":""+nt)+" "+(Ge===0?fill(" ",Xe[1].length+1+Xe[4].length):pad_(Ge,Xe[1].length)+Xe[2]+"/"+Xe[3]+pad0(ve,Xe[4].length))}function pe(Xe,Je,rt){return rt+(Je===0?"":""+Je)+fill(" ",Xe[1].length+2+Xe[4].length)}const xe=/^#*0*\.([0#]+)/,me=/\).*[0#]/,ge=/\(###\) ###\\?-####/;function ye(Xe){let Je="",rt;for(let Ze=0;Ze!==Xe.length;++Ze)switch(rt=Xe.charCodeAt(Ze)){case 35:break;case 63:Je+=" ";break;case 48:Je+="0";break;default:Je+=String.fromCharCode(rt)}return Je}function Se(Xe,Je){const rt=Math.pow(10,Je);return""+Math.round(Xe*rt)/rt}function Te(Xe,Je){return Je<(""+Math.round((Xe-Math.floor(Xe))*Math.pow(10,Je))).length?0:Math.round((Xe-Math.floor(Xe))*Math.pow(10,Je))}function Ne(Xe,Je){return Je<(""+Math.round((Xe-Math.floor(Xe))*Math.pow(10,Je))).length?1:0}function $e(Xe){return Xe<2147483647&&Xe>-2147483648?""+(Xe>=0?Xe|0:Xe-1|0):""+Math.floor(Xe)}function ke(Xe,Je,rt){if(Xe.charCodeAt(0)===40&&!Je.match(me)){const Ie=Je.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return rt>=0?ke("n",Ie,rt):"("+ke("n",Ie,-rt)+")"}if(Je.charCodeAt(Je.length-1)===44)return oe(Xe,Je,rt);if(Je.indexOf("%")!==-1)return ne(Xe,Je,rt);if(Je.indexOf("E")!==-1)return ce(Je,rt);if(Je.charCodeAt(0)===36)return"$"+ke(Xe,Je.substr(Je.charAt(1)==" "?2:1),rt);let Ze,et,nt,Ge,ve=Math.abs(rt),Be=rt<0?"-":"";if(Je.match(/^00+$/))return Be+pad0r(ve,Je.length);if(Je.match(/^[#?]+$/))return Ze=pad0r(rt,0),Ze==="0"&&(Ze=""),Ze.length>Je.length?Ze:ye(Je.substr(0,Je.length-Ze.length))+Ze;if(et=Je.match(ue))return Ae(et,ve,Be);if(Je.match(/^#+0+$/))return Be+pad0r(ve,Je.length-Je.indexOf("0"));if(et=Je.match(xe))return Ze=Se(rt,et[1].length).replace(/^([^\.]+)$/,"$1."+ye(et[1])).replace(/\.$/,"."+ye(et[1])).replace(/\.(\d*)$/,function(Ie,Fe){return"."+Fe+fill("0",ye(et[1]).length-Fe.length)}),Je.indexOf("0.")!==-1?Ze:Ze.replace(/^0\./,".");if(Je=Je.replace(/^#+([0.])/,"$1"),et=Je.match(/^(0*)\.(#*)$/))return Be+Se(ve,et[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,et[1].length?"0.":".");if(et=Je.match(/^#{1,3},##0(\.?)$/))return Be+commaify(pad0r(ve,0));if(et=Je.match(/^#,##0\.([#0]*0)$/))return rt<0?"-"+ke(Xe,Je,-rt):commaify(""+(Math.floor(rt)+Ne(rt,et[1].length)))+"."+pad0(Te(rt,et[1].length),et[1].length);if(et=Je.match(/^#,#*,#0/))return ke(Xe,Je.replace(/^#,#*,/,""),rt);if(et=Je.match(/^([0#]+)(\\?-([0#]+))+$/))return Ze=_strrev(ke(Xe,Je.replace(/[\\-]/g,""),rt)),nt=0,_strrev(_strrev(Je.replace(/\\/g,"")).replace(/[0#]/g,function(Ie){return nt<Ze.length?Ze.charAt(nt++):Ie==="0"?"0":""}));if(Je.match(ge))return Ze=ke(Xe,"##########",rt),"("+Ze.substr(0,3)+") "+Ze.substr(3,3)+"-"+Ze.substr(6);let Re="";if(et=Je.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return nt=Math.min(et[4].length,7),Ge=frac(ve,Math.pow(10,nt)-1,!1),Ze=""+Be,Re=write_num("n",et[1],Ge[1]),Re.charAt(Re.length-1)===" "&&(Re=Re.substr(0,Re.length-1)+"0"),Ze+=Re+et[2]+"/"+et[3],Re=rpad_(Ge[2],nt),Re.length<et[4].length&&(Re=ye(et[4].substr(et[4].length-Re.length))+Re),Ze+=Re,Ze;if(et=Je.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return nt=Math.min(Math.max(et[1].length,et[4].length),7),Ge=frac(ve,Math.pow(10,nt)-1,!0),Be+(Ge[0]||(Ge[1]?"":"0"))+" "+(Ge[1]?pad_(Ge[1],nt)+et[2]+"/"+et[3]+rpad_(Ge[2],nt):fill(" ",2*nt+1+et[2].length+et[3].length));if(et=Je.match(/^[#0?]+$/))return Ze=pad0r(rt,0),Je.length<=Ze.length?Ze:ye(Je.substr(0,Je.length-Ze.length))+Ze;if(et=Je.match(/^([#0?]+)\.([#0]+)$/)){Ze=""+rt.toFixed(Math.min(et[2].length,10)).replace(/([^0])0+$/,"$1"),nt=Ze.indexOf(".");const Ie=Je.indexOf(".")-nt,Fe=Je.length-Ze.length-Ie;return ye(Je.substr(0,Ie)+Ze+Je.substr(Je.length-Fe))}if(et=Je.match(/^00,000\.([#0]*0)$/))return nt=Te(rt,et[1].length),rt<0?"-"+ke(Xe,Je,-rt):commaify($e(rt)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(Ie){return"00,"+(Ie.length<3?pad0(0,3-Ie.length):"")+Ie})+"."+pad0(nt,et[1].length);switch(Je){case"###,##0.00":return ke(Xe,"#,##0.00",rt);case"###,###":case"##,###":case"#,###":const Ie=commaify(pad0r(ve,0));return Ie!=="0"?Be+Ie:"";case"###,###.00":return ke(Xe,"###,##0.00",rt).replace(/^0\./,".");case"#,###.00":return ke(Xe,"#,##0.00",rt).replace(/^0\./,".")}throw new Error("unsupported format |"+Je+"|")}function je(Xe,Je,rt){let Ze=Je.length-1;for(;Je.charCodeAt(Ze-1)===44;)--Ze;return write_num(Xe,Je.substr(0,Ze),rt/Math.pow(10,3*(Je.length-Ze)))}function Ke(Xe,Je,rt){const Ze=Je.replace(J,""),et=Je.length-Ze.length;return write_num(Xe,Ze,rt*Math.pow(10,2*et))+fill("%",et)}function Ye(Xe,Je){let rt,Ze=Xe.indexOf("E")-Xe.indexOf(".")-1;if(Xe.match(/^#+0.0E\+0$/)){if(Je===0)return"0.0E+0";if(Je<0)return"-"+Ye(Xe,-Je);let et=Xe.indexOf(".");et===-1&&(et=Xe.indexOf("E"));let nt=Math.floor(Math.log(Je)*Math.LOG10E)%et;if(nt<0&&(nt+=et),rt=(Je/Math.pow(10,nt)).toPrecision(Ze+1+(et+nt)%et),!rt.match(/[Ee]/)){const Ge=Math.floor(Math.log(Je)*Math.LOG10E);rt.indexOf(".")===-1?rt=rt.charAt(0)+"."+rt.substr(1)+"E+"+(Ge-rt.length+nt):rt+="E+"+(Ge-nt),rt=rt.replace(/\+-/,"-")}rt=rt.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(Ge,ve,Be,Re){return ve+Be+Re.substr(0,(et+nt)%et)+"."+Re.substr(nt)+"E"})}else rt=Je.toExponential(Ze);return Xe.match(/E\+00$/)&&rt.match(/e[+-]\d$/)&&(rt=rt.substr(0,rt.length-1)+"0"+rt.charAt(rt.length-1)),Xe.match(/E\-/)&&rt.match(/e\+/)&&(rt=rt.replace(/e\+/,"e")),rt.replace("e","E")}function ze(Xe,Je,rt){if(Xe.charCodeAt(0)===40&&!Je.match(me)){const Ie=Je.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return rt>=0?ze("n",Ie,rt):"("+ze("n",Ie,-rt)+")"}if(Je.charCodeAt(Je.length-1)===44)return je(Xe,Je,rt);if(Je.indexOf("%")!==-1)return Ke(Xe,Je,rt);if(Je.indexOf("E")!==-1)return Ye(Je,rt);if(Je.charCodeAt(0)===36)return"$"+ze(Xe,Je.substr(Je.charAt(1)==" "?2:1),rt);let Ze,et,nt,Ge,ve=Math.abs(rt),Be=rt<0?"-":"";if(Je.match(/^00+$/))return Be+pad0(ve,Je.length);if(Je.match(/^[#?]+$/))return Ze=""+rt,rt===0&&(Ze=""),Ze.length>Je.length?Ze:ye(Je.substr(0,Je.length-Ze.length))+Ze;if(et=Je.match(ue))return pe(et,ve,Be);if(Je.match(/^#+0+$/))return Be+pad0(ve,Je.length-Je.indexOf("0"));if(et=Je.match(xe))return Ze=(""+rt).replace(/^([^\.]+)$/,"$1."+ye(et[1])).replace(/\.$/,"."+ye(et[1])),Ze=Ze.replace(/\.(\d*)$/,function(Ie,Fe){return"."+Fe+fill("0",ye(et[1]).length-Fe.length)}),Je.indexOf("0.")!==-1?Ze:Ze.replace(/^0\./,".");if(Je=Je.replace(/^#+([0.])/,"$1"),et=Je.match(/^(0*)\.(#*)$/))return Be+(""+ve).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,et[1].length?"0.":".");if(et=Je.match(/^#{1,3},##0(\.?)$/))return Be+commaify(""+ve);if(et=Je.match(/^#,##0\.([#0]*0)$/))return rt<0?"-"+ze(Xe,Je,-rt):commaify(""+rt)+"."+fill("0",et[1].length);if(et=Je.match(/^#,#*,#0/))return ze(Xe,Je.replace(/^#,#*,/,""),rt);if(et=Je.match(/^([0#]+)(\\?-([0#]+))+$/))return Ze=_strrev(ze(Xe,Je.replace(/[\\-]/g,""),rt)),nt=0,_strrev(_strrev(Je.replace(/\\/g,"")).replace(/[0#]/g,function(Ie){return nt<Ze.length?Ze.charAt(nt++):Ie==="0"?"0":""}));if(Je.match(ge))return Ze=ze(Xe,"##########",rt),"("+Ze.substr(0,3)+") "+Ze.substr(3,3)+"-"+Ze.substr(6);let Re="";if(et=Je.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return nt=Math.min(et[4].length,7),Ge=frac(ve,Math.pow(10,nt)-1,!1),Ze=""+Be,Re=write_num("n",et[1],Ge[1]),Re.charAt(Re.length-1)==" "&&(Re=Re.substr(0,Re.length-1)+"0"),Ze+=Re+et[2]+"/"+et[3],Re=rpad_(Ge[2],nt),Re.length<et[4].length&&(Re=ye(et[4].substr(et[4].length-Re.length))+Re),Ze+=Re,Ze;if(et=Je.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return nt=Math.min(Math.max(et[1].length,et[4].length),7),Ge=frac(ve,Math.pow(10,nt)-1,!0),Be+(Ge[0]||(Ge[1]?"":"0"))+" "+(Ge[1]?pad_(Ge[1],nt)+et[2]+"/"+et[3]+rpad_(Ge[2],nt):fill(" ",2*nt+1+et[2].length+et[3].length));if(et=Je.match(/^[#0?]+$/))return Ze=""+rt,Je.length<=Ze.length?Ze:ye(Je.substr(0,Je.length-Ze.length))+Ze;if(et=Je.match(/^([#0]+)\.([#0]+)$/)){Ze=""+rt.toFixed(Math.min(et[2].length,10)).replace(/([^0])0+$/,"$1"),nt=Ze.indexOf(".");let Ie=Je.indexOf(".")-nt,Fe=Je.length-Ze.length-Ie;return ye(Je.substr(0,Ie)+Ze+Je.substr(Je.length-Fe))}if(et=Je.match(/^00,000\.([#0]*0)$/))return rt<0?"-"+ze(Xe,Je,-rt):commaify(""+rt).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(Ie){return"00,"+(Ie.length<3?pad0(0,3-Ie.length):"")+Ie})+"."+pad0(0,et[1].length);switch(Je){case"###,###":case"##,###":case"#,###":const Ie=commaify(""+ve);return Ie!=="0"?Be+Ie:"";default:if(Je.match(/\.[0#?]*$/))return ze(Xe,Je.slice(0,Je.lastIndexOf(".")),rt)+ye(Je.slice(Je.lastIndexOf(".")))}throw new Error("unsupported format |"+Je+"|")}return function(Je,rt,Ze){return(Ze|0)===Ze?ze(Je,rt,Ze):ke(Je,rt,Ze)}}();function split_fmt(K){const J=[];let ne=!1,oe=0;for(let ce=0;ce<K.length;++ce)switch(K.charCodeAt(ce)){case 34:ne=!ne;break;case 95:case 42:case 92:++ce;break;case 59:J[J.length]=K.substr(oe,ce-oe),oe=ce+1}if(J[J.length]=K.substr(oe),ne===!0)throw new Error("Format |"+K+"| unterminated string ");return J}SSF$1._split=split_fmt;const abstime=/\[[HhMmSs]*\]/;function fmt_is_date(K){let J=0,ne="",oe="";for(;J<K.length;)switch(ne=K.charAt(J)){case"G":isgeneral(K,J)&&(J+=6),J++;break;case'"':for(;K.charCodeAt(++J)!==34&&J<K.length;)++J;++J;break;case"\\":J+=2;break;case"_":J+=2;break;case"@":++J;break;case"B":case"b":if(K.charAt(J+1)==="1"||K.charAt(J+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":if(K.substr(J,3).toUpperCase()==="A/P"||K.substr(J,5).toUpperCase()==="AM/PM")return!0;++J;break;case"[":for(oe=ne;K.charAt(J++)!=="]"&&J<K.length;)oe+=K.charAt(J);if(oe.match(abstime))return!0;break;case".":case"0":case"#":for(;J<K.length&&("0#?.,E+-%".indexOf(ne=K.charAt(++J))>-1||ne=="\\"&&K.charAt(J+1)=="-"&&"0#".indexOf(K.charAt(J+2))>-1););break;case"?":for(;K.charAt(++J)===ne;);break;case"*":++J,(K.charAt(J)===" "||K.charAt(J)==="*")&&++J;break;case"(":case")":++J;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;J<K.length&&"0123456789".indexOf(K.charAt(++J))>-1;);break;case" ":++J;break;default:++J;break}return!1}SSF$1.is_date=fmt_is_date;function eval_fmt(K,J,ne,oe){let ce=[],ue="",Ae=0,pe="",xe="t",me,ge,ye,Se="H";for(;Ae<K.length;)switch(pe=K.charAt(Ae)){case"G":if(!isgeneral(K,Ae))throw new Error("unrecognized character "+pe+" in "+K);ce[ce.length]={t:"G",v:"General"},Ae+=7;break;case'"':for(ue="";(ye=K.charCodeAt(++Ae))!==34&&Ae<K.length;)ue+=String.fromCharCode(ye);ce[ce.length]={t:"t",v:ue},++Ae;break;case"\\":const Je=K.charAt(++Ae),rt=Je==="("||Je===")"?Je:"t";ce[ce.length]={t:rt,v:Je},++Ae;break;case"_":ce[ce.length]={t:"t",v:" "},Ae+=2;break;case"@":ce[ce.length]={t:"T",v:J},++Ae;break;case"B":case"b":if(K.charAt(Ae+1)==="1"||K.charAt(Ae+1)==="2"){if(me==null&&(me=parse_date_code(J,ne,K.charAt(Ae+1)==="2"),me==null))return"";ce[ce.length]={t:"X",v:K.substr(Ae,2)},xe=pe,Ae+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":pe=pe.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(J<0||me==null&&(me=parse_date_code(J,ne),me==null))return"";for(ue=pe;++Ae<K.length&&K.charAt(Ae).toLowerCase()===pe;)ue+=pe;pe==="m"&&xe.toLowerCase()==="h"&&(pe="M"),pe==="h"&&(pe=Se),ce[ce.length]={t:pe,v:ue},xe=pe;break;case"A":case"a":const Ze={t:pe,v:pe};if(me==null&&(me=parse_date_code(J,ne)),K.substr(Ae,3).toUpperCase()==="A/P"?(me!=null&&(Ze.v=me.H>=12?"P":"A"),Ze.t="T",Se="h",Ae+=3):K.substr(Ae,5).toUpperCase()==="AM/PM"?(me!=null&&(Ze.v=me.H>=12?"PM":"AM"),Ze.t="T",Ae+=5,Se="h"):(Ze.t="t",++Ae),me==null&&Ze.t==="T")return"";ce[ce.length]=Ze,xe=pe;break;case"[":for(ue=pe;K.charAt(Ae++)!=="]"&&Ae<K.length;)ue+=K.charAt(Ae);if(ue.slice(-1)!=="]")throw'unterminated "[" block: |'+ue+"|";if(ue.match(abstime)){if(me==null&&(me=parse_date_code(J,ne),me==null))return"";ce[ce.length]={t:"Z",v:ue.toLowerCase()},xe=ue.charAt(1)}else ue.indexOf("$")>-1&&(ue=(ue.match(/\$([^-\[\]]*)/)||[])[1]||"$",fmt_is_date(K)||(ce[ce.length]={t:"t",v:ue}));break;case".":if(me!=null){for(ue=pe;++Ae<K.length&&(pe=K.charAt(Ae))==="0";)ue+=pe;ce[ce.length]={t:"s",v:ue};break}case"0":case"#":for(ue=pe;++Ae<K.length&&"0#?.,E+-%".indexOf(pe=K.charAt(Ae))>-1||pe=="\\"&&K.charAt(Ae+1)=="-"&&Ae<K.length-2&&"0#".indexOf(K.charAt(Ae+2))>-1;)ue+=pe;ce[ce.length]={t:"n",v:ue};break;case"?":for(ue=pe;K.charAt(++Ae)===pe;)ue+=pe;ce[ce.length]={t:pe,v:ue},xe=pe;break;case"*":++Ae,(K.charAt(Ae)===" "||K.charAt(Ae)==="*")&&++Ae;break;case"(":case")":ce[ce.length]={t:oe===1||typeof J=="number"&&J<0?"t":pe,v:pe},++Ae;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(ue=pe;Ae<K.length&&"0123456789".indexOf(K.charAt(++Ae))>-1;)ue+=K.charAt(Ae);ce[ce.length]={t:"D",v:ue};break;case" ":ce[ce.length]={t:pe,v:pe},++Ae;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(pe)===-1)throw new Error("unrecognized character "+pe+" in "+K);ce[ce.length]={t:"t",v:pe},++Ae;break}let Te=0,Ne=0,$e;for(Ae=ce.length-1,xe="t";Ae>=0;--Ae)switch(ce[Ae].t){case"h":case"H":ce[Ae].t=Se,xe="h",Te<1&&(Te=1);break;case"s":($e=ce[Ae].v.match(/\.0+$/))&&(Ne=Math.max(Ne,$e[0].length-1)),Te<3&&(Te=3);case"d":case"y":case"M":case"e":xe=ce[Ae].t;break;case"m":xe==="s"&&(ce[Ae].t="M",Te<2&&(Te=2));break;case"X":break;case"Z":Te<1&&ce[Ae].v.match(/[Hh]/)&&(Te=1),Te<2&&ce[Ae].v.match(/[Mm]/)&&(Te=2),Te<3&&ce[Ae].v.match(/[Ss]/)&&(Te=3)}switch(Te){case 0:break;case 1:me.u>=.5&&(me.u=0,++me.S),me.S>=60&&(me.S=0,++me.M),me.M>=60&&(me.M=0,++me.H);break;case 2:me.u>=.5&&(me.u=0,++me.S),me.S>=60&&(me.S=0,++me.M);break}let ke="",je;for(Ae=0;Ae<ce.length;++Ae)switch(ce[Ae].t){case"t":case"T":case" ":case"D":break;case"X":ce[Ae].v="",ce[Ae].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":ce[Ae].v=write_date(ce[Ae].t.charCodeAt(0),ce[Ae].v,me,Ne),ce[Ae].t="t";break;case"n":case"(":case"?":for(je=Ae+1;ce[je]!=null&&((pe=ce[je].t)==="?"||pe==="D"||(pe===" "||pe==="t")&&ce[je+1]!=null&&(ce[je+1].t==="?"||ce[je+1].t==="t"&&ce[je+1].v==="/")||ce[Ae].t==="("&&(pe===" "||pe==="n"||pe===")")||pe==="t"&&(ce[je].v==="/"||ce[je].v===" "&&ce[je+1]!=null&&ce[je+1].t==="?"));)ce[Ae].v+=ce[je].v,ce[je]={v:"",t:";"},++je;ke+=ce[Ae].v,Ae=je-1;break;case"G":ce[Ae].t="t",ce[Ae].v=general_fmt(J,ne);break}let Ke="",Ye,ze;if(ke.length>0){ke.charCodeAt(0)===40?(Ye=J<0&&ke.charCodeAt(0)===45?-J:J,ze=write_num("(",ke,Ye)):(Ye=J<0&&oe>1?-J:J,ze=write_num("n",ke,Ye),Ye<0&&ce[0]&&ce[0].t==="t"&&(ze=ze.substr(1),ce[0].v="-"+ce[0].v)),je=ze.length-1;let Je=ce.length;for(Ae=0;Ae<ce.length;++Ae)if(ce[Ae]!=null&&ce[Ae].t!=="t"&&ce[Ae].v.indexOf(".")>-1){Je=Ae;break}let rt=ce.length;if(Je===ce.length&&ze.indexOf("E")===-1){for(Ae=ce.length-1;Ae>=0;--Ae)ce[Ae]==null||"n?(".indexOf(ce[Ae].t)===-1||(je>=ce[Ae].v.length-1?(je-=ce[Ae].v.length,ce[Ae].v=ze.substr(je+1,ce[Ae].v.length)):je<0?ce[Ae].v="":(ce[Ae].v=ze.substr(0,je+1),je=-1),ce[Ae].t="t",rt=Ae);je>=0&&rt<ce.length&&(ce[rt].v=ze.substr(0,je+1)+ce[rt].v)}else if(Je!==ce.length&&ze.indexOf("E")===-1){for(je=ze.indexOf(".")-1,Ae=Je;Ae>=0;--Ae)if(!(ce[Ae]==null||"n?(".indexOf(ce[Ae].t)===-1)){for(ge=ce[Ae].v.indexOf(".")>-1&&Ae===Je?ce[Ae].v.indexOf(".")-1:ce[Ae].v.length-1,Ke=ce[Ae].v.substr(ge+1);ge>=0;--ge)je>=0&&(ce[Ae].v.charAt(ge)==="0"||ce[Ae].v.charAt(ge)==="#")&&(Ke=ze.charAt(je--)+Ke);ce[Ae].v=Ke,ce[Ae].t="t",rt=Ae}for(je>=0&&rt<ce.length&&(ce[rt].v=ze.substr(0,je+1)+ce[rt].v),je=ze.indexOf(".")+1,Ae=Je;Ae<ce.length;++Ae)if(!(ce[Ae]==null||"n?(".indexOf(ce[Ae].t)===-1&&Ae!==Je)){for(ge=ce[Ae].v.indexOf(".")>-1&&Ae===Je?ce[Ae].v.indexOf(".")+1:0,Ke=ce[Ae].v.substr(0,ge);ge<ce[Ae].v.length;++ge)je<ze.length&&(Ke+=ze.charAt(je++));ce[Ae].v=Ke,ce[Ae].t="t",rt=Ae}}}for(Ae=0;Ae<ce.length;++Ae)ce[Ae]!=null&&"n(?".indexOf(ce[Ae].t)>-1&&(Ye=oe>1&&J<0&&Ae>0&&ce[Ae-1].v==="-"?-J:J,ce[Ae].v=write_num(ce[Ae].t,ce[Ae].v,Ye),ce[Ae].t="t");let Xe="";for(Ae=0;Ae!==ce.length;++Ae)ce[Ae]!=null&&(Xe+=ce[Ae].v);return Xe}SSF$1._eval=eval_fmt;const cfregex=/\[[=<>]/,cfregex2=/\[([=<>]*)(-?\d+\.?\d*)\]/;function chkcond(K,J){if(J==null)return!1;const ne=parseFloat(J[2]);switch(J[1]){case"=":if(K===ne)return!0;break;case">":if(K>ne)return!0;break;case"<":if(K<ne)return!0;break;case"<>":if(K!==ne)return!0;break;case">=":if(K>=ne)return!0;break;case"<=":if(K<=ne)return!0;break}return!1}function choose_fmt(K,J){let ne=split_fmt(K),oe=ne.length,ce=ne[oe-1].indexOf("@");if(oe<4&&ce>-1&&--oe,ne.length>4)throw new Error("cannot find right format for |"+ne.join("|")+"|");if(typeof J!="number")return[4,ne.length===4||ce>-1?ne[ne.length-1]:"@"];switch(ne.length){case 1:ne=ce>-1?["General","General","General",ne[0]]:[ne[0],ne[0],ne[0],"@"];break;case 2:ne=ce>-1?[ne[0],ne[0],ne[0],ne[1]]:[ne[0],ne[1],ne[0],"@"];break;case 3:ne=ce>-1?[ne[0],ne[1],ne[0],ne[2]]:[ne[0],ne[1],ne[2],"@"];break}const ue=J>0?ne[0]:J<0?ne[1]:ne[2];if(ne[0].indexOf("[")===-1&&ne[1].indexOf("[")===-1)return[oe,ue];if(ne[0].match(cfregex)!=null||ne[1].match(cfregex)!=null){const Ae=ne[0].match(cfregex2),pe=ne[1].match(cfregex2);return chkcond(J,Ae)?[oe,ne[0]]:chkcond(J,pe)?[oe,ne[1]]:[oe,ne[Ae!=null&&pe!=null?2:1]]}return[oe,ue]}function format(K,J,ne){ne==null&&(ne={});let oe="";switch(typeof K){case"string":K==="m/d/yy"&&ne.dateNF?oe=ne.dateNF:oe=K;break;case"number":K===14&&ne.dateNF?oe=ne.dateNF:oe=(ne.table!=null?ne.table:table_fmt)[K];break}if(isgeneral(oe,0))return general_fmt(J,ne);J instanceof Date&&(J=datenum_local(J,ne.date1904));const ce=choose_fmt(oe,J);if(isgeneral(ce[1]))return general_fmt(J,ne);if(J===!0)J="TRUE";else if(J===!1)J="FALSE";else if(J===""||J==null)return"";return eval_fmt(ce[1],J,ne,ce[0])}function load_entry(K,J){if(typeof J!="number"){J=+J||-1;for(let ne=0;ne<392;++ne){if(table_fmt[ne]===void 0){J<0&&(J=ne);continue}if(table_fmt[ne]===K){J=ne;break}}J<0&&(J=391)}return table_fmt[J]=K,J}SSF$1.load=load_entry;SSF$1._table=table_fmt;SSF$1.get_table=function(){return table_fmt};SSF$1.load_table=function(J){for(let ne=0;ne!==392;++ne)J[ne]!==void 0&&load_entry(J[ne],ne)};SSF$1.init_table=init_table;SSF$1.format=format;var ssf$1=SSF$1,src={exports:{}};(function(K){const J="",ne=["","","","","","","","","",""],oe=["","","","","","",""];function ce(xe){let me="";const ge=xe.length,ye=7;if(ge>ye){const Se=ge-ye+1,Te=xe.slice(0,Se),Ne=xe.slice(Se);return ce(Te)+""+ce(Ne)}else for(let Se=0;Se<ge;Se++){const Te=xe[Se];Te>0&&(me+=ne[Te]+oe[ge-Se-1])}return me}function ue(xe){let me=xe;me=me.replace("",""),me=me.replace("","");const ge=5;return me.length>ge&&me.length-me.lastIndexOf("")===ge&&(me=me.substr(0,me.length-ge)+""),me}function Ae(xe,me){let ge="";return xe===""&&me===""?ge=J:xe!==""&&me===""?ge=xe+"":xe===""&&me!==""?ge=me+"":ge=xe+""+me+"",ge}function pe(xe){let me=J;if(isNaN(xe)||xe>=Number.MAX_SAFE_INTEGER)return me;const ge=Math.floor(xe).toString(),ye=Math.round(xe%1*100).toString(),Se=Array.from(ge).map(Number),Te=Array.from(ye).map(Number);let Ne=ce(Se),$e=ce(Te);return Ne=ue(Ne),$e=ue($e),me=Ae(Ne,$e),me}K.exports!=null&&(K.exports=pe)})(src);var srcExports=src.exports;const FormulaError$h=requireError(),{FormulaHelpers:FormulaHelpers$e,Types:Types$b,WildCard:WildCard$1}=requireHelpers(),H$b=FormulaHelpers$e,ssf=ssf$1,bahttext=srcExports,charsets={latin:{halfRE:/[!-~]/g,fullRE:/[-]/g,delta:65248},hangul1:{halfRE:/[-]/g,fullRE:/[-]/g,delta:-60921},hangul2:{halfRE:/[-]/g,fullRE:/[-]/g,delta:-61025},kana:{delta:0,half:"",full:""},extras:{delta:0,half:" |",full:""}},toFull=K=>J=>K.delta?String.fromCharCode(J.charCodeAt(0)+K.delta):[...K.full][[...K.half].indexOf(J)],toHalf=K=>J=>K.delta?String.fromCharCode(J.charCodeAt(0)-K.delta):[...K.half][[...K.full].indexOf(J)],re=(K,J)=>K[J+"RE"]||new RegExp("["+K[J]+"]","g"),sets=Object.keys(charsets).map(K=>charsets[K]),toFullWidth=K=>sets.reduce((J,ne)=>J.replace(re(ne,"half"),toFull(ne)),K),toHalfWidth=K=>sets.reduce((J,ne)=>J.replace(re(ne,"full"),toHalf(ne)),K),TextFunctions$2={ASC:K=>(K=H$b.accept(K,Types$b.STRING),toHalfWidth(K)),BAHTTEXT:K=>{K=H$b.accept(K,Types$b.NUMBER);try{return bahttext(K)}catch(J){throw Error(`Error in https://github.com/jojoee/bahttext 
${J.toString()}`)}},CHAR:K=>{if(K=H$b.accept(K,Types$b.NUMBER),K>255||K<1)throw FormulaError$h.VALUE;return String.fromCharCode(K)},CLEAN:K=>(K=H$b.accept(K,Types$b.STRING),K.replace(/[\x00-\x1F]/g,"")),CODE:K=>{if(K=H$b.accept(K,Types$b.STRING),K.length===0)throw FormulaError$h.VALUE;return K.charCodeAt(0)},CONCAT:(...K)=>{let J="";return H$b.flattenParams(K,Types$b.STRING,!1,ne=>{ne=H$b.accept(ne,Types$b.STRING),J+=ne}),J},CONCATENATE:(...K)=>{let J="";if(K.length===0)throw Error("CONCATENATE need at least one argument.");return K.forEach(ne=>{ne=H$b.accept(ne,Types$b.STRING),J+=ne}),J},DBCS:K=>(K=H$b.accept(K,Types$b.STRING),toFullWidth(K)),DOLLAR:(K,J)=>{K=H$b.accept(K,Types$b.NUMBER),J=H$b.accept(J,Types$b.NUMBER,2);const ne=Array(J).fill("0").join("");return ssf.format(`$#,##0.${ne}_);($#,##0.${ne})`,K).trim()},EXACT:(K,J)=>(K=H$b.accept(K,[Types$b.STRING]),J=H$b.accept(J,[Types$b.STRING]),K===J),FIND:(K,J,ne)=>{if(K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.STRING),ne=H$b.accept(ne,Types$b.NUMBER,1),ne<1||ne>J.length)throw FormulaError$h.VALUE;const oe=J.indexOf(K,ne-1);if(oe===-1)throw FormulaError$h.VALUE;return oe+1},FINDB:(...K)=>TextFunctions$2.FIND(...K),FIXED:(K,J,ne)=>{K=H$b.accept(K,Types$b.NUMBER),J=H$b.accept(J,Types$b.NUMBER,2),ne=H$b.accept(ne,Types$b.BOOLEAN,!1);const oe=Array(J).fill("0").join(""),ce=ne?"":"#,";return ssf.format(`${ce}##0.${oe}_);(${ce}##0.${oe})`,K).trim()},LEFT:(K,J)=>{if(K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.NUMBER,1),J<0)throw FormulaError$h.VALUE;return J>K.length?K:K.slice(0,J)},LEFTB:(...K)=>TextFunctions$2.LEFT(...K),LEN:K=>(K=H$b.accept(K,Types$b.STRING),K.length),LENB:(...K)=>TextFunctions$2.LEN(...K),LOWER:K=>(K=H$b.accept(K,Types$b.STRING),K.toLowerCase()),MID:(K,J,ne)=>{if(K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.NUMBER),ne=H$b.accept(ne,Types$b.NUMBER),J>K.length)return"";if(J<1||ne<1)throw FormulaError$h.VALUE;return K.slice(J-1,J+ne-1)},MIDB:(...K)=>TextFunctions$2.MID(...K),NUMBERVALUE:(K,J,ne)=>{if(K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.STRING,"."),ne=H$b.accept(ne,Types$b.STRING,","),K.length===0)return 0;if(J.length===0||ne.length===0||(J=J[0],ne=ne[0],J===ne||K.indexOf(J)<K.lastIndexOf(ne)))throw FormulaError$h.VALUE;const oe=K.replace(ne,"").replace(J,".").replace(/[^\-0-9.%()]/g,"").match(/([(-]*)([0-9]*[.]*[0-9]+)([)]?)([%]*)/);if(!oe)throw FormulaError$h.VALUE;const ce=oe[1].length,ue=oe[3].length,Ae=oe[4].length;let pe=Number(oe[2]);if(ce>1||ce&&!ue||!ce&&ue||isNaN(pe))throw FormulaError$h.VALUE;return pe=pe/100**Ae,ce?-pe:pe},PHONETIC:()=>{},PROPER:K=>(K=H$b.accept(K,[Types$b.STRING]),K=K.toLowerCase(),K=K.charAt(0).toUpperCase()+K.slice(1),K.replace(/(?:[^a-zA-Z])([a-zA-Z])/g,J=>J.toUpperCase())),REPLACE:(K,J,ne,oe)=>{K=H$b.accept(K,[Types$b.STRING]),J=H$b.accept(J,[Types$b.NUMBER]),ne=H$b.accept(ne,[Types$b.NUMBER]),oe=H$b.accept(oe,[Types$b.STRING]);let ce=K.split("");return ce.splice(J-1,ne,oe),ce.join("")},REPLACEB:(...K)=>TextFunctions$2.REPLACE(...K),REPT:(K,J)=>{K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.NUMBER);let ne="";for(let oe=0;oe<J;oe++)ne+=K;return ne},RIGHT:(K,J)=>{if(K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.NUMBER,1),J<0)throw FormulaError$h.VALUE;const ne=K.length;return J>ne?K:K.slice(ne-J)},RIGHTB:(...K)=>TextFunctions$2.RIGHT(...K),SEARCH:(K,J,ne)=>{if(K=H$b.accept(K,Types$b.STRING),J=H$b.accept(J,Types$b.STRING),ne=H$b.accept(ne,Types$b.NUMBER,1),ne<1||ne>J.length)throw FormulaError$h.VALUE;let oe=WildCard$1.isWildCard(K)?WildCard$1.toRegex(K,"i"):K;const ce=J.slice(ne-1).search(oe);if(ce===-1)throw FormulaError$h.VALUE;return ce+ne},SEARCHB:(...K)=>TextFunctions$2.SEARCH(...K),SUBSTITUTE:(...K)=>{},T:K=>(K=H$b.accept(K),typeof K=="string"?K:""),TEXT:(K,J)=>{K=H$b.accept(K,Types$b.NUMBER),J=H$b.accept(J,Types$b.STRING);try{return ssf.format(J,K)}catch(ne){throw console.error(ne),FormulaError$h.VALUE}},TEXTJOIN:(...K)=>{},TRIM:K=>(K=H$b.accept(K,[Types$b.STRING]),K.replace(/^\s+|\s+$/g,"")),UNICHAR:K=>{if(K=H$b.accept(K,[Types$b.NUMBER]),K<=0)throw FormulaError$h.VALUE;return String.fromCharCode(K)},UNICODE:K=>TextFunctions$2.CODE(K)};var text$1=TextFunctions$2;const FormulaError$g=requireError(),{FormulaHelpers:FormulaHelpers$d}=requireHelpers(),Prefix$1={unaryOp:(K,J,ne)=>{let oe=1;if(K.forEach(ce=>{if(ce!=="+")if(ce==="-")oe=-oe;else throw new Error(`Unrecognized prefix: ${ce}`)}),J==null&&(J=0),oe===1)return J;try{J=FormulaHelpers$d.acceptNumber(J,ne)}catch(ce){if(ce instanceof FormulaError$g)Array.isArray(J)&&(J=J[0][0]);else throw ce}return typeof J=="number"&&isNaN(J)?FormulaError$g.VALUE:-J}},Postfix$1={percentOp:(K,J,ne)=>{try{K=FormulaHelpers$d.acceptNumber(K,ne)}catch(oe){if(oe instanceof FormulaError$g)return oe;throw oe}if(J==="%")return K/100;throw new Error(`Unrecognized postfix: ${J}`)}},type2Number={boolean:3,string:2,number:1},Infix$3={compareOp:(K,J,ne,oe,ce)=>{K==null&&(K=0),ne==null&&(ne=0),oe&&(K=K[0][0]),ce&&(ne=ne[0][0]);const ue=typeof K,Ae=typeof ne;if(ue===Ae)switch(J){case"=":return K===ne;case">":return K>ne;case"<":return K<ne;case"<>":return K!==ne;case"<=":return K<=ne;case">=":return K>=ne}else switch(J){case"=":return!1;case">":return type2Number[ue]>type2Number[Ae];case"<":return type2Number[ue]<type2Number[Ae];case"<>":return!0;case"<=":return type2Number[ue]<=type2Number[Ae];case">=":return type2Number[ue]>=type2Number[Ae]}throw Error("Infix.compareOp: Should not reach here.")},concatOp:(K,J,ne,oe,ce)=>{K==null&&(K=""),ne==null&&(ne=""),oe&&(K=K[0][0]),ce&&(ne=ne[0][0]);const ue=typeof K,Ae=typeof ne;return ue==="boolean"&&(K=K?"TRUE":"FALSE"),Ae==="boolean"&&(ne=ne?"TRUE":"FALSE"),""+K+ne},mathOp:(K,J,ne,oe,ce)=>{K==null&&(K=0),ne==null&&(ne=0);try{K=FormulaHelpers$d.acceptNumber(K,oe),ne=FormulaHelpers$d.acceptNumber(ne,ce)}catch(ue){if(ue instanceof FormulaError$g)return ue;throw ue}switch(J){case"+":return K+ne;case"-":return K-ne;case"*":return K*ne;case"/":return ne===0?FormulaError$g.DIV0:K/ne;case"^":return K**ne}throw Error("Infix.mathOp: Should not reach here.")}};var operators={Prefix:Prefix$1,Postfix:Postfix$1,Infix:Infix$3,Operators:{compareOp:["<",">","=","<>","<=",">="],concatOp:["&"],mathOp:["+","-","*","/","^"]}};const FormulaError$f=requireError(),{FormulaHelpers:FormulaHelpers$c,Types:Types$a,Factorials,Criteria:Criteria$1}=requireHelpers(),{Infix:Infix$2}=operators,H$a=FormulaHelpers$c,f$2=[],fd=[];function factorial(K){return K<=100?Factorials[K]:f$2[K]>0?f$2[K]:f$2[K]=factorial(K-1)*K}function factorialDouble(K){return K===1||K===0?1:K===2?2:fd[K]>0?fd[K]:fd[K]=factorialDouble(K-2)*K}const MathFunctions$2={ABS:K=>(K=H$a.accept(K,Types$a.NUMBER),Math.abs(K)),AGGREGATE:(K,J,ne,...oe)=>{},ARABIC:K=>{if(K=H$a.accept(K,Types$a.STRING).toUpperCase(),!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(K))throw new FormulaError$f("#VALUE!","Invalid roman numeral in ARABIC evaluation.");let J=0;return K.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,function(ne){J+={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1}[ne]}),J},BASE:(K,J,ne)=>{if(K=H$a.accept(K,Types$a.NUMBER),K<0||K>=2**53||(J=H$a.accept(J,Types$a.NUMBER),J<2||J>36)||(ne=H$a.accept(ne,Types$a.NUMBER,0),ne<0))throw FormulaError$f.NUM;const oe=K.toString(J).toUpperCase();return new Array(Math.max(ne+1-oe.length,0)).join("0")+oe},CEILING:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),J===0)return 0;if(K/J%1===0)return K;const ne=Math.abs(J),oe=Math.floor(Math.abs(K)/ne);return K<0?J<0?-ne*(oe+1):-ne*oe:(oe+1)*ne},"CEILING.MATH":(K,J,ne)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER,K>0?1:-1),ne=H$a.accept(ne,Types$a.NUMBER,0),K>=0)return MathFunctions$2.CEILING(K,J);const oe=ne?J:0;return MathFunctions$2.CEILING(K,J)-oe},"CEILING.PRECISE":(K,J)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER,1),MathFunctions$2.CEILING(K,Math.abs(J))),COMBIN:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),K<0||J<0||K<J)throw FormulaError$f.NUM;const ne=MathFunctions$2.FACT(K),oe=MathFunctions$2.FACT(J);return ne/oe/MathFunctions$2.FACT(K-J)},COMBINA:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),(K===0||K===1)&&J===0)return 1;if(K<0||J<0)throw FormulaError$f.NUM;return MathFunctions$2.COMBIN(K+J-1,K-1)},DECIMAL:(K,J)=>{if(K=H$a.accept(K,Types$a.STRING),J=H$a.accept(J,Types$a.NUMBER),J=Math.trunc(J),J<2||J>36)throw FormulaError$f.NUM;const ne=parseInt(K,J);if(isNaN(ne))throw FormulaError$f.NUM;return ne},DEGREES:K=>(K=H$a.accept(K,Types$a.NUMBER),K*(180/Math.PI)),EVEN:K=>MathFunctions$2.CEILING(K,-2),EXP:K=>(K=H$a.accept(K,Types$a.NUMBER),Math.exp(K)),FACT:K=>{if(K=H$a.accept(K,Types$a.NUMBER),K=Math.trunc(K),K>170||K<0)throw FormulaError$f.NUM;return K<=100?Factorials[K]:factorial(K)},FACTDOUBLE:K=>{if(K=H$a.accept(K,Types$a.NUMBER),K=Math.trunc(K),K<-1)throw FormulaError$f.NUM;return K===-1?1:factorialDouble(K)},FLOOR:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),J===0)return 0;if(K>0&&J<0)throw FormulaError$f.NUM;if(K/J%1===0)return K;const ne=Math.abs(J),oe=Math.floor(Math.abs(K)/ne);return K<0?J<0?-ne*oe:-ne*(oe+1):oe*ne},"FLOOR.MATH":(K,J,ne)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER,K>0?1:-1),ne=H$a.accept(ne,Types$a.NUMBER,0),ne===0||K>=0?MathFunctions$2.FLOOR(K,Math.abs(J)):MathFunctions$2.FLOOR(K,J)+J),"FLOOR.PRECISE":(K,J)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER,1),MathFunctions$2.FLOOR(K,Math.abs(J))),GCD:(...K)=>{const J=[];H$a.flattenParams(K,null,!1,Ae=>{if(Ae=typeof Ae=="boolean"?NaN:Number(Ae),isNaN(Ae))throw FormulaError$f.VALUE;if(Ae<0||Ae>9007199254740990)throw FormulaError$f.NUM;J.push(Math.trunc(Ae))},0);let ne,oe,ce=K.length,ue=Math.abs(J[0]);for(ne=1;ne<ce;ne++){for(oe=Math.abs(J[ne]);ue&&oe;)ue>oe?ue%=oe:oe%=ue;ue+=oe}return ue},INT:K=>(K=H$a.accept(K,Types$a.NUMBER),Math.floor(K)),"ISO.CEILING":(...K)=>MathFunctions$2["CEILING.PRECISE"](...K),LCM:(...K)=>{const J=[];H$a.flattenParams(K,null,!1,ce=>{if(ce=typeof ce=="boolean"?NaN:Number(ce),isNaN(ce))throw FormulaError$f.VALUE;if(ce<0||ce>9007199254740990)throw FormulaError$f.NUM;J.push(Math.trunc(ce))},1);let ne=J.length,oe=Math.abs(J[0]);for(let ce=1;ce<ne;ce++){let ue=Math.abs(J[ce]),Ae=oe;for(;oe&&ue;)oe>ue?oe%=ue:ue%=oe;oe=Math.abs(Ae*J[ce])/(oe+ue)}return oe},LN:K=>(K=H$a.accept(K,Types$a.NUMBER),Math.log(K)),LOG:(K,J)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER,10),Math.log(K)/Math.log(J)),LOG10:K=>(K=H$a.accept(K,Types$a.NUMBER),Math.log10(K)),MDETERM:K=>{if(K=H$a.accept(K,Types$a.ARRAY,void 0,!1,!0),K[0].length!==K.length)throw FormulaError$f.VALUE;const J=K.length,ne=K[0].length;let oe=0,ce,ue;if(J===1)return K[0][0];if(J===2)return K[0][0]*K[1][1]-K[0][1]*K[1][0];for(let Ae=0;Ae<ne;Ae++){ce=K[0][Ae],ue=K[0][Ae];for(let pe=1;pe<J;pe++)ue*=K[pe][((Ae+pe)%ne+ne)%ne],ce*=K[pe][((Ae-pe)%ne+ne)%ne];oe+=ue-ce}return oe},MINVERSE:K=>{},MMULT:(K,J)=>{K=H$a.accept(K,Types$a.ARRAY,void 0,!1,!0),J=H$a.accept(J,Types$a.ARRAY,void 0,!1,!0);const ne=K.length,oe=K[0].length,ce=J.length,ue=J[0].length,Ae=new Array(ne);if(oe!==ce)throw FormulaError$f.VALUE;for(let pe=0;pe<ne;pe++){Ae[pe]=new Array(ue);for(let xe=0;xe<ue;xe++){Ae[pe][xe]=0;for(let me=0;me<oe;me++){const ge=K[pe][me],ye=J[me][xe];if(typeof ge!="number"||typeof ye!="number")throw FormulaError$f.VALUE;Ae[pe][xe]+=K[pe][me]*J[me][xe]}}}return Ae},MOD:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),J===0)throw FormulaError$f.DIV0;return K-J*MathFunctions$2.INT(K/J)},MROUND:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),J===0)return 0;if(K>0&&J<0||K<0&&J>0)throw FormulaError$f.NUM;return K/J%1===0?K:Math.round(K/J)*J},MULTINOMIAL:(...K)=>{let J=0,ne=1;return H$a.flattenParams(K,Types$a.NUMBER,!1,oe=>{if(oe<0)throw FormulaError$f.NUM;J+=oe,ne*=factorial(oe)}),factorial(J)/ne},MUNIT:K=>{K=H$a.accept(K,Types$a.NUMBER);const J=[];for(let ne=0;ne<K;ne++){const oe=[];for(let ce=0;ce<K;ce++)ne===ce?oe.push(1):oe.push(0);J.push(oe)}return J},ODD:K=>{if(K=H$a.accept(K,Types$a.NUMBER),K===0)return 1;let J=Math.ceil(Math.abs(K));return J=J&1?J:J+1,K>0?J:-J},PI:()=>Math.PI,POWER:(K,J)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),K**J),PRODUCT:(...K)=>{let J=1;return H$a.flattenParams(K,null,!0,(ne,oe)=>{const ce=Number(ne);oe.isLiteral&&!isNaN(ce)?J*=ce:typeof ne=="number"&&(J*=ne)},1),J},QUOTIENT:(K,J)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),Math.trunc(K/J)),RADIANS:K=>(K=H$a.accept(K,Types$a.NUMBER),K/180*Math.PI),RAND:()=>Math.random(),RANDBETWEEN:(K,J)=>(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),Math.floor(Math.random()*(J-K+1)+K)),ROMAN:(K,J)=>{if(K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER,0),J!==0)throw Error("ROMAN: only allows form=0 (classic form).");const ne=String(K).split(""),oe=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let ce="",ue=3;for(;ue--;)ce=(oe[+ne.pop()+ue*10]||"")+ce;return new Array(+ne.join("")+1).join("M")+ce},ROUND:(K,J)=>{K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER);const ne=Math.pow(10,Math.abs(J)),oe=K>0?1:-1;return J>0?oe*Math.round(Math.abs(K)*ne)/ne:J===0?oe*Math.round(Math.abs(K)):oe*Math.round(Math.abs(K)/ne)*ne},ROUNDDOWN:(K,J)=>{K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER);const ne=Math.pow(10,Math.abs(J)),oe=K>0?1:-1;if(J>0){const ce=1/ne*.5;return oe*Math.round((Math.abs(K)-ce)*ne)/ne}else{if(J===0)return oe*Math.round(Math.abs(K)-.5);{const ce=ne*.5;return oe*Math.round((Math.abs(K)-ce)/ne)*ne}}},ROUNDUP:(K,J)=>{K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER);const ne=Math.pow(10,Math.abs(J)),oe=K>0?1:-1;if(J>0){const ce=1/ne*.5;return oe*Math.round((Math.abs(K)+ce)*ne)/ne}else{if(J===0)return oe*Math.round(Math.abs(K)+.5);{const ce=ne*.5;return oe*Math.round((Math.abs(K)+ce)/ne)*ne}}},SERIESSUM:(K,J,ne,oe)=>{K=H$a.accept(K,Types$a.NUMBER),J=H$a.accept(J,Types$a.NUMBER),ne=H$a.accept(ne,Types$a.NUMBER);let ce=0,ue;return H$a.flattenParams([oe],Types$a.NUMBER,!1,Ae=>{if(typeof Ae!="number")throw FormulaError$f.VALUE;ce===0?ue=Ae*Math.pow(K,J):ue+=Ae*Math.pow(K,J+ce*ne),ce++}),ue},SIGN:K=>(K=H$a.accept(K,Types$a.NUMBER),K>0?1:K===0?0:-1),SQRT:K=>{if(K=H$a.accept(K,Types$a.NUMBER),K<0)throw FormulaError$f.NUM;return Math.sqrt(K)},SQRTPI:K=>{if(K=H$a.accept(K,Types$a.NUMBER),K<0)throw FormulaError$f.NUM;return Math.sqrt(K*Math.PI)},SUBTOTAL:()=>{},SUM:(...K)=>{let J=0;return H$a.flattenParams(K,Types$a.NUMBER,!0,(ne,oe)=>{(oe.isLiteral||typeof ne=="number")&&(J+=ne)}),J},SUMIF:(K,J,ne,oe)=>{const ce=H$a.retrieveRanges(K,J,oe);J=ce[0],oe=ce[1],ne=H$a.retrieveArg(K,ne);const ue=ne.isArray;ne=Criteria$1.parse(H$a.accept(ne));let Ae=0;return J.forEach((pe,xe)=>{pe.forEach((me,ge)=>{const ye=oe[xe][ge];typeof ye=="number"&&(ne.op==="wc"?ne.match===ne.value.test(me)&&(Ae+=ye):Infix$2.compareOp(me,ne.op,ne.value,Array.isArray(me),ue)&&(Ae+=ye))})}),Ae},SUMIFS:()=>{},SUMPRODUCT:(K,...J)=>{K=H$a.accept(K,Types$a.ARRAY,void 0,!1,!0),J.forEach(oe=>{if(oe=H$a.accept(oe,Types$a.ARRAY,void 0,!1,!0),K[0].length!==oe[0].length||K.length!==oe.length)throw FormulaError$f.VALUE;for(let ce=0;ce<K.length;ce++)for(let ue=0;ue<K[0].length;ue++)typeof K[ce][ue]!="number"&&(K[ce][ue]=0),typeof oe[ce][ue]!="number"&&(oe[ce][ue]=0),K[ce][ue]*=oe[ce][ue]});let ne=0;return K.forEach(oe=>{oe.forEach(ce=>{ne+=ce})}),ne},SUMSQ:(...K)=>{let J=0;return H$a.flattenParams(K,Types$a.NUMBER,!0,(ne,oe)=>{(oe.isLiteral||typeof ne=="number")&&(J+=ne**2)}),J},SUMX2MY2:(K,J)=>{const ne=[],oe=[];let ce=0;if(H$a.flattenParams([K],null,!1,(ue,Ae)=>{ne.push(ue)}),H$a.flattenParams([J],null,!1,(ue,Ae)=>{oe.push(ue)}),ne.length!==oe.length)throw FormulaError$f.NA;for(let ue=0;ue<ne.length;ue++)typeof ne[ue]=="number"&&typeof oe[ue]=="number"&&(ce+=ne[ue]**2-oe[ue]**2);return ce},SUMX2PY2:(K,J)=>{const ne=[],oe=[];let ce=0;if(H$a.flattenParams([K],null,!1,(ue,Ae)=>{ne.push(ue)}),H$a.flattenParams([J],null,!1,(ue,Ae)=>{oe.push(ue)}),ne.length!==oe.length)throw FormulaError$f.NA;for(let ue=0;ue<ne.length;ue++)typeof ne[ue]=="number"&&typeof oe[ue]=="number"&&(ce+=ne[ue]**2+oe[ue]**2);return ce},SUMXMY2:(K,J)=>{const ne=[],oe=[];let ce=0;if(H$a.flattenParams([K],null,!1,(ue,Ae)=>{ne.push(ue)}),H$a.flattenParams([J],null,!1,(ue,Ae)=>{oe.push(ue)}),ne.length!==oe.length)throw FormulaError$f.NA;for(let ue=0;ue<ne.length;ue++)typeof ne[ue]=="number"&&typeof oe[ue]=="number"&&(ce+=(ne[ue]-oe[ue])**2);return ce},TRUNC:K=>(K=H$a.accept(K,Types$a.NUMBER),Math.trunc(K))};var math=MathFunctions$2;const FormulaError$e=requireError(),{FormulaHelpers:FormulaHelpers$b,Types:Types$9}=requireHelpers(),H$9=FormulaHelpers$b,MAX_NUMBER=2**27-1,TrigFunctions$1={ACOS:K=>{if(K=H$9.accept(K,Types$9.NUMBER),K>1||K<-1)throw FormulaError$e.NUM;return Math.acos(K)},ACOSH:K=>{if(K=H$9.accept(K,Types$9.NUMBER),K<1)throw FormulaError$e.NUM;return Math.acosh(K)},ACOT:K=>(K=H$9.accept(K,Types$9.NUMBER),Math.PI/2-Math.atan(K)),ACOTH:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)<=1)throw FormulaError$e.NUM;return Math.atanh(1/K)},ASIN:K=>{if(K=H$9.accept(K,Types$9.NUMBER),K>1||K<-1)throw FormulaError$e.NUM;return Math.asin(K)},ASINH:K=>(K=H$9.accept(K,Types$9.NUMBER),Math.asinh(K)),ATAN:K=>(K=H$9.accept(K,Types$9.NUMBER),Math.atan(K)),ATAN2:(K,J)=>{if(K=H$9.accept(K,Types$9.NUMBER),J=H$9.accept(J,Types$9.NUMBER),J===0&&K===0)throw FormulaError$e.DIV0;return Math.atan2(J,K)},ATANH:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>1)throw FormulaError$e.NUM;return Math.atanh(K)},COS:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>MAX_NUMBER)throw FormulaError$e.NUM;return Math.cos(K)},COSH:K=>(K=H$9.accept(K,Types$9.NUMBER),Math.cosh(K)),COT:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>MAX_NUMBER)throw FormulaError$e.NUM;if(K===0)throw FormulaError$e.DIV0;return 1/Math.tan(K)},COTH:K=>{if(K=H$9.accept(K,Types$9.NUMBER),K===0)throw FormulaError$e.DIV0;return 1/Math.tanh(K)},CSC:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>MAX_NUMBER)throw FormulaError$e.NUM;return 1/Math.sin(K)},CSCH:K=>{if(K=H$9.accept(K,Types$9.NUMBER),K===0)throw FormulaError$e.DIV0;return 1/Math.sinh(K)},SEC:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>MAX_NUMBER)throw FormulaError$e.NUM;return 1/Math.cos(K)},SECH:K=>(K=H$9.accept(K,Types$9.NUMBER),1/Math.cosh(K)),SIN:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>MAX_NUMBER)throw FormulaError$e.NUM;return Math.sin(K)},SINH:K=>(K=H$9.accept(K,Types$9.NUMBER),Math.sinh(K)),TAN:K=>{if(K=H$9.accept(K,Types$9.NUMBER),Math.abs(K)>MAX_NUMBER)throw FormulaError$e.NUM;return Math.tan(K)},TANH:K=>(K=H$9.accept(K,Types$9.NUMBER),Math.tanh(K))};var trigonometry=TrigFunctions$1;const FormulaError$d=requireError(),{FormulaHelpers:FormulaHelpers$a,Types:Types$8}=requireHelpers(),H$8=FormulaHelpers$a;function getNumLogicalValue(K){let J=0,ne=0;return H$8.flattenParams(K,null,!0,oe=>{const ce=typeof oe;ce==="string"?oe==="TRUE"?oe=!0:oe==="FALSE"&&(oe=!1):ce==="number"&&(oe=!!oe),typeof oe=="boolean"&&(oe===!0?J++:ne++)}),[J,ne]}const LogicalFunctions$1={AND:(...K)=>{const[J,ne]=getNumLogicalValue(K);return J===0&&ne===0?FormulaError$d.VALUE:J>0&&ne===0},FALSE:()=>!1,IF:(K,J,ne,oe)=>(J=H$8.accept(J,Types$8.BOOLEAN),ne=H$8.accept(ne),oe=H$8.accept(oe,null,!1),J?ne:oe),IFERROR:(K,J)=>K.value instanceof FormulaError$d?H$8.accept(J):H$8.accept(K),IFNA:function(K,J){if(arguments.length>2)throw FormulaError$d.TOO_MANY_ARGS("IFNA");return FormulaError$d.NA.equals(K.value)?H$8.accept(J):H$8.accept(K)},IFS:(...K)=>{if(K.length%2!==0)return new FormulaError$d("#N/A","IFS expects all arguments after position 0 to be in pairs.");for(let J=0;J<K.length/2;J++){const ne=H$8.accept(K[J*2],Types$8.BOOLEAN),oe=H$8.accept(K[J*2+1]);if(ne)return oe}return FormulaError$d.NA},NOT:K=>(K=H$8.accept(K,Types$8.BOOLEAN),!K),OR:(...K)=>{const[J,ne]=getNumLogicalValue(K);return J===0&&ne===0?FormulaError$d.VALUE:J>0},SWITCH:(...K)=>{},TRUE:()=>!0,XOR:(...K)=>{const[J,ne]=getNumLogicalValue(K);return J===0&&ne===0?FormulaError$d.VALUE:J%2===1}};var logical=LogicalFunctions$1,bessel$1={};(function(K){(function(J){J(typeof DO_NOT_EXPORT_BESSEL>"u"?K:{})})(function(J){J.version="1.0.2";var ne=Math;function oe(ge,ye){for(var Se=0,Te=0;Se<ge.length;++Se)Te=ye*Te+ge[Se];return Te}function ce(ge,ye,Se,Te,Ne){if(ye===0)return Se;if(ye===1)return Te;for(var $e=2/ge,ke=Te,je=1;je<ye;++je)ke=Te*je*$e+Ne*Se,Se=Te,Te=ke;return ke}function ue(ge,ye,Se,Te,Ne){return function(ke,je){if(Te){if(ke===0)return Te==1?-1/0:1/0;if(ke<0)return NaN}if(je===0)return ge(ke);if(je===1)return ye(ke);if(je<0)return NaN;je|=0;var Ke=ge(ke),Ye=ye(ke);return ce(ke,je,Ke,Ye,Ne)}}var Ae=function(){var ge=.636619772,ye=[57568490574,-13362590354,6516196407e-1,-1121442418e-2,77392.33017,-184.9052456].reverse(),Se=[57568490411,1029532985,9494680718e-3,59272.64853,267.8532712,1].reverse(),Te=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),Ne=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934935152e-16].reverse();function $e(Xe){var Je=0,rt=0,Ze=0,et=Xe*Xe;if(Xe<8)rt=oe(ye,et),Ze=oe(Se,et),Je=rt/Ze;else{var nt=Xe-.785398164;et=64/et,rt=oe(Te,et),Ze=oe(Ne,et),Je=ne.sqrt(ge/Xe)*(ne.cos(nt)*rt-ne.sin(nt)*Ze*8/Xe)}return Je}var ke=[72362614232,-7895059235,2423968531e-1,-2972611439e-3,15704.4826,-30.16036606].reverse(),je=[144725228442,2300535178,1858330474e-2,99447.43394,376.9991397,1].reverse(),Ke=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),Ye=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse();function ze(Xe){var Je=0,rt=0,Ze=0,et=Xe*Xe,nt=ne.abs(Xe)-2.356194491;return Math.abs(Xe)<8?(rt=Xe*oe(ke,et),Ze=oe(je,et),Je=rt/Ze):(et=64/et,rt=oe(Ke,et),Ze=oe(Ye,et),Je=ne.sqrt(ge/ne.abs(Xe))*(ne.cos(nt)*rt-ne.sin(nt)*Ze*8/ne.abs(Xe)),Xe<0&&(Je=-Je)),Je}return function Xe(Je,rt){if(rt=Math.round(rt),!isFinite(Je))return isNaN(Je)?Je:0;if(rt<0)return(rt%2?-1:1)*Xe(Je,-rt);if(Je<0)return(rt%2?-1:1)*Xe(-Je,rt);if(rt===0)return $e(Je);if(rt===1)return ze(Je);if(Je===0)return 0;var Ze=0;if(Je>rt)Ze=ce(Je,rt,$e(Je),ze(Je),-1);else{for(var et=2*ne.floor((rt+ne.floor(ne.sqrt(40*rt)))/2),nt=!1,Ge=0,ve=0,Be=1,Re=0,Ie=2/Je,Fe=et;Fe>0;Fe--)Re=Fe*Ie*Be-Ge,Ge=Be,Be=Re,ne.abs(Be)>1e10&&(Be*=1e-10,Ge*=1e-10,Ze*=1e-10,ve*=1e-10),nt&&(ve+=Be),nt=!nt,Fe==rt&&(Ze=Ge);ve=2*ve-Be,Ze/=ve}return Ze}}(),pe=function(){var ge=.636619772,ye=[-2957821389,7062834065,-5123598036e-1,1087988129e-2,-86327.92757,228.4622733].reverse(),Se=[40076544269,7452499648e-1,7189466438e-3,47447.2647,226.1030244,1].reverse(),Te=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),Ne=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934945152e-16].reverse();function $e(Xe){var Je=0,rt=0,Ze=0,et=Xe*Xe,nt=Xe-.785398164;return Xe<8?(rt=oe(ye,et),Ze=oe(Se,et),Je=rt/Ze+ge*Ae(Xe,0)*ne.log(Xe)):(et=64/et,rt=oe(Te,et),Ze=oe(Ne,et),Je=ne.sqrt(ge/Xe)*(ne.sin(nt)*rt+ne.cos(nt)*Ze*8/Xe)),Je}var ke=[-4900604943e3,127527439e4,-51534381390,7349264551e-1,-4237922726e-3,8511.937935].reverse(),je=[249958057e5,424441966400,3733650367,2245904002e-2,102042.605,354.9632885,1].reverse(),Ke=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),Ye=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse();function ze(Xe){var Je=0,rt=0,Ze=0,et=Xe*Xe,nt=Xe-2.356194491;return Xe<8?(rt=Xe*oe(ke,et),Ze=oe(je,et),Je=rt/Ze+ge*(Ae(Xe,1)*ne.log(Xe)-1/Xe)):(et=64/et,rt=oe(Ke,et),Ze=oe(Ye,et),Je=ne.sqrt(ge/Xe)*(ne.sin(nt)*rt+ne.cos(nt)*Ze*8/Xe)),Je}return ue($e,ze,"BESSELY",1,-1)}(),xe=function(){var ge=[1,3.5156229,3.0899424,1.2067492,.2659732,.0360768,.0045813].reverse(),ye=[.39894228,.01328592,.00225319,-.00157565,.00916281,-.02057706,.02635537,-.01647633,.00392377].reverse();function Se(ke){return ke<=3.75?oe(ge,ke*ke/(3.75*3.75)):ne.exp(ne.abs(ke))/ne.sqrt(ne.abs(ke))*oe(ye,3.75/ne.abs(ke))}var Te=[.5,.87890594,.51498869,.15084934,.02658733,.00301532,32411e-8].reverse(),Ne=[.39894228,-.03988024,-.00362018,.00163801,-.01031555,.02282967,-.02895312,.01787654,-.00420059].reverse();function $e(ke){return ke<3.75?ke*oe(Te,ke*ke/(3.75*3.75)):(ke<0?-1:1)*ne.exp(ne.abs(ke))/ne.sqrt(ne.abs(ke))*oe(Ne,3.75/ne.abs(ke))}return function ke(je,Ke){if(Ke=Math.round(Ke),Ke===0)return Se(je);if(Ke===1)return $e(je);if(Ke<0)return NaN;if(ne.abs(je)===0)return 0;if(je==1/0)return 1/0;var Ye=0,ze,Xe=2/ne.abs(je),Je=0,rt=1,Ze=0,et=2*ne.round((Ke+ne.round(ne.sqrt(40*Ke)))/2);for(ze=et;ze>0;ze--)Ze=ze*Xe*rt+Je,Je=rt,rt=Ze,ne.abs(rt)>1e10&&(rt*=1e-10,Je*=1e-10,Ye*=1e-10),ze==Ke&&(Ye=Je);return Ye*=ke(je,0)/rt,je<0&&Ke%2?-Ye:Ye}}(),me=function(){var ge=[-.57721566,.4227842,.23069756,.0348859,.00262698,1075e-7,74e-7].reverse(),ye=[1.25331414,-.07832358,.02189568,-.01062446,.00587872,-.0025154,53208e-8].reverse();function Se(ke){return ke<=2?-ne.log(ke/2)*xe(ke,0)+oe(ge,ke*ke/4):ne.exp(-ke)/ne.sqrt(ke)*oe(ye,2/ke)}var Te=[1,.15443144,-.67278579,-.18156897,-.01919402,-.00110404,-4686e-8].reverse(),Ne=[1.25331414,.23498619,-.0365562,.01504268,-.00780353,.00325614,-68245e-8].reverse();function $e(ke){return ke<=2?ne.log(ke/2)*xe(ke,1)+1/ke*oe(Te,ke*ke/4):ne.exp(-ke)/ne.sqrt(ke)*oe(Ne,2/ke)}return ue(Se,$e,"BESSELK",2,1)}();J.besselj=Ae,J.bessely=pe,J.besseli=xe,J.besselk=me})})(bessel$1);var jstat={exports:{}};(function(K,J){(function(ne,oe){K.exports=oe()})(commonjsGlobal,function(){var ne=function(oe,ce){var ue=Array.prototype.concat,Ae=Array.prototype.slice,pe=Object.prototype.toString;function xe(Ke,Ye){var ze=Ke>Ye?Ke:Ye;return oe.pow(10,17-~~(oe.log(ze>0?ze:-ze)*oe.LOG10E))}var me=Array.isArray||function(Ye){return pe.call(Ye)==="[object Array]"};function ge(Ke){return pe.call(Ke)==="[object Function]"}function ye(Ke){return typeof Ke=="number"?Ke-Ke===0:!1}function Se(Ke){return ue.apply([],Ke)}function Te(){return new Te._init(arguments)}Te.fn=Te.prototype,Te._init=function(Ye){if(me(Ye[0]))if(me(Ye[0][0])){ge(Ye[1])&&(Ye[0]=Te.map(Ye[0],Ye[1]));for(var ze=0;ze<Ye[0].length;ze++)this[ze]=Ye[0][ze];this.length=Ye[0].length}else this[0]=ge(Ye[1])?Te.map(Ye[0],Ye[1]):Ye[0],this.length=1;else if(ye(Ye[0]))this[0]=Te.seq.apply(null,Ye),this.length=1;else{if(Ye[0]instanceof Te)return Te(Ye[0].toArray());this[0]=[],this.length=1}return this},Te._init.prototype=Te.prototype,Te._init.constructor=Te,Te.utils={calcRdx:xe,isArray:me,isFunction:ge,isNumber:ye,toVector:Se},Te._random_fn=oe.random,Te.setRandom=function(Ye){if(typeof Ye!="function")throw new TypeError("fn is not a function");Te._random_fn=Ye},Te.extend=function(Ye){var ze,Xe;if(arguments.length===1){for(Xe in Ye)Te[Xe]=Ye[Xe];return this}for(ze=1;ze<arguments.length;ze++)for(Xe in arguments[ze])Ye[Xe]=arguments[ze][Xe];return Ye},Te.rows=function(Ye){return Ye.length||1},Te.cols=function(Ye){return Ye[0].length||1},Te.dimensions=function(Ye){return{rows:Te.rows(Ye),cols:Te.cols(Ye)}},Te.row=function(Ye,ze){return me(ze)?ze.map(function(Xe){return Te.row(Ye,Xe)}):Ye[ze]},Te.rowa=function(Ye,ze){return Te.row(Ye,ze)},Te.col=function(Ye,ze){if(me(ze)){var Xe=Te.arange(Ye.length).map(function(){return new Array(ze.length)});return ze.forEach(function(Ze,et){Te.arange(Ye.length).forEach(function(nt){Xe[nt][et]=Ye[nt][Ze]})}),Xe}for(var Je=new Array(Ye.length),rt=0;rt<Ye.length;rt++)Je[rt]=[Ye[rt][ze]];return Je},Te.cola=function(Ye,ze){return Te.col(Ye,ze).map(function(Xe){return Xe[0]})},Te.diag=function(Ye){for(var ze=Te.rows(Ye),Xe=new Array(ze),Je=0;Je<ze;Je++)Xe[Je]=[Ye[Je][Je]];return Xe},Te.antidiag=function(Ye){for(var ze=Te.rows(Ye)-1,Xe=new Array(ze),Je=0;ze>=0;ze--,Je++)Xe[Je]=[Ye[Je][ze]];return Xe},Te.transpose=function(Ye){var ze=[],Xe,Je,rt,Ze,et;for(me(Ye[0])||(Ye=[Ye]),Je=Ye.length,rt=Ye[0].length,et=0;et<rt;et++){for(Xe=new Array(Je),Ze=0;Ze<Je;Ze++)Xe[Ze]=Ye[Ze][et];ze.push(Xe)}return ze.length===1?ze[0]:ze},Te.map=function(Ye,ze,Xe){var Je,rt,Ze,et,nt;for(me(Ye[0])||(Ye=[Ye]),rt=Ye.length,Ze=Ye[0].length,et=Xe?Ye:new Array(rt),Je=0;Je<rt;Je++)for(et[Je]||(et[Je]=new Array(Ze)),nt=0;nt<Ze;nt++)et[Je][nt]=ze(Ye[Je][nt],Je,nt);return et.length===1?et[0]:et},Te.cumreduce=function(Ye,ze,Xe){var Je,rt,Ze,et,nt;for(me(Ye[0])||(Ye=[Ye]),rt=Ye.length,Ze=Ye[0].length,et=Xe?Ye:new Array(rt),Je=0;Je<rt;Je++)for(et[Je]||(et[Je]=new Array(Ze)),Ze>0&&(et[Je][0]=Ye[Je][0]),nt=1;nt<Ze;nt++)et[Je][nt]=ze(et[Je][nt-1],Ye[Je][nt]);return et.length===1?et[0]:et},Te.alter=function(Ye,ze){return Te.map(Ye,ze,!0)},Te.create=function(Ye,ze,Xe){var Je=new Array(Ye),rt,Ze;for(ge(ze)&&(Xe=ze,ze=Ye),rt=0;rt<Ye;rt++)for(Je[rt]=new Array(ze),Ze=0;Ze<ze;Ze++)Je[rt][Ze]=Xe(rt,Ze);return Je};function Ne(){return 0}Te.zeros=function(Ye,ze){return ye(ze)||(ze=Ye),Te.create(Ye,ze,Ne)};function $e(){return 1}Te.ones=function(Ye,ze){return ye(ze)||(ze=Ye),Te.create(Ye,ze,$e)},Te.rand=function(Ye,ze){return ye(ze)||(ze=Ye),Te.create(Ye,ze,Te._random_fn)};function ke(Ke,Ye){return Ke===Ye?1:0}Te.identity=function(Ye,ze){return ye(ze)||(ze=Ye),Te.create(Ye,ze,ke)},Te.symmetric=function(Ye){var ze=Ye.length,Xe,Je;if(Ye.length!==Ye[0].length)return!1;for(Xe=0;Xe<ze;Xe++)for(Je=0;Je<ze;Je++)if(Ye[Je][Xe]!==Ye[Xe][Je])return!1;return!0},Te.clear=function(Ye){return Te.alter(Ye,Ne)},Te.seq=function(Ye,ze,Xe,Je){ge(Je)||(Je=!1);var rt=[],Ze=xe(Ye,ze),et=(ze*Ze-Ye*Ze)/((Xe-1)*Ze),nt=Ye,Ge;for(Ge=0;nt<=ze&&Ge<Xe;Ge++,nt=(Ye*Ze+et*Ze*Ge)/Ze)rt.push(Je?Je(nt,Ge):nt);return rt},Te.arange=function(Ye,ze,Xe){var Je=[],rt;if(Xe=Xe||1,ze===ce&&(ze=Ye,Ye=0),Ye===ze||Xe===0)return[];if(Ye<ze&&Xe<0)return[];if(Ye>ze&&Xe>0)return[];if(Xe>0)for(rt=Ye;rt<ze;rt+=Xe)Je.push(rt);else for(rt=Ye;rt>ze;rt+=Xe)Je.push(rt);return Je},Te.slice=function(){function Ke(ze,Xe,Je,rt){var Ze,et=[],nt=ze.length;if(Xe===ce&&Je===ce&&rt===ce)return Te.copy(ze);if(Xe=Xe||0,Je=Je||ze.length,Xe=Xe>=0?Xe:nt+Xe,Je=Je>=0?Je:nt+Je,rt=rt||1,Xe===Je||rt===0)return[];if(Xe<Je&&rt<0)return[];if(Xe>Je&&rt>0)return[];if(rt>0)for(Ze=Xe;Ze<Je;Ze+=rt)et.push(ze[Ze]);else for(Ze=Xe;Ze>Je;Ze+=rt)et.push(ze[Ze]);return et}function Ye(ze,Xe){var Je,rt;if(Xe=Xe||{},ye(Xe.row)){if(ye(Xe.col))return ze[Xe.row][Xe.col];var Ze=Te.rowa(ze,Xe.row);return Je=Xe.col||{},Ke(Ze,Je.start,Je.end,Je.step)}if(ye(Xe.col)){var et=Te.cola(ze,Xe.col);return rt=Xe.row||{},Ke(et,rt.start,rt.end,rt.step)}rt=Xe.row||{},Je=Xe.col||{};var nt=Ke(ze,rt.start,rt.end,rt.step);return nt.map(function(Ge){return Ke(Ge,Je.start,Je.end,Je.step)})}return Ye}(),Te.sliceAssign=function(Ye,ze,Xe){var Je,rt;if(ye(ze.row)){if(ye(ze.col))return Ye[ze.row][ze.col]=Xe;ze.col=ze.col||{},ze.col.start=ze.col.start||0,ze.col.end=ze.col.end||Ye[0].length,ze.col.step=ze.col.step||1,Je=Te.arange(ze.col.start,oe.min(Ye.length,ze.col.end),ze.col.step);var Ze=ze.row;return Je.forEach(function(nt,Ge){Ye[Ze][nt]=Xe[Ge]}),Ye}if(ye(ze.col)){ze.row=ze.row||{},ze.row.start=ze.row.start||0,ze.row.end=ze.row.end||Ye.length,ze.row.step=ze.row.step||1,rt=Te.arange(ze.row.start,oe.min(Ye[0].length,ze.row.end),ze.row.step);var et=ze.col;return rt.forEach(function(nt,Ge){Ye[nt][et]=Xe[Ge]}),Ye}return Xe[0].length===ce&&(Xe=[Xe]),ze.row.start=ze.row.start||0,ze.row.end=ze.row.end||Ye.length,ze.row.step=ze.row.step||1,ze.col.start=ze.col.start||0,ze.col.end=ze.col.end||Ye[0].length,ze.col.step=ze.col.step||1,rt=Te.arange(ze.row.start,oe.min(Ye.length,ze.row.end),ze.row.step),Je=Te.arange(ze.col.start,oe.min(Ye[0].length,ze.col.end),ze.col.step),rt.forEach(function(nt,Ge){Je.forEach(function(ve,Be){Ye[nt][ve]=Xe[Ge][Be]})}),Ye},Te.diagonal=function(Ye){var ze=Te.zeros(Ye.length,Ye.length);return Ye.forEach(function(Xe,Je){ze[Je][Je]=Xe}),ze},Te.copy=function(Ye){return Ye.map(function(ze){return ye(ze)?ze:ze.map(function(Xe){return Xe})})};var je=Te.prototype;return je.length=0,je.push=Array.prototype.push,je.sort=Array.prototype.sort,je.splice=Array.prototype.splice,je.slice=Array.prototype.slice,je.toArray=function(){return this.length>1?Ae.call(this):Ae.call(this)[0]},je.map=function(Ye,ze){return Te(Te.map(this,Ye,ze))},je.cumreduce=function(Ye,ze){return Te(Te.cumreduce(this,Ye,ze))},je.alter=function(Ye){return Te.alter(this,Ye),this},function(Ke){for(var Ye=0;Ye<Ke.length;Ye++)(function(ze){je[ze]=function(Xe){var Je=this,rt;return Xe?(setTimeout(function(){Xe.call(Je,je[ze].call(Je))}),this):(rt=Te[ze](this),me(rt)?Te(rt):rt)}})(Ke[Ye])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(Ke){for(var Ye=0;Ye<Ke.length;Ye++)(function(ze){je[ze]=function(Xe,Je){var rt=this;return Je?(setTimeout(function(){Je.call(rt,je[ze].call(rt,Xe))}),this):Te(Te[ze](this,Xe))}})(Ke[Ye])}("row col".split(" ")),function(Ke){for(var Ye=0;Ye<Ke.length;Ye++)(function(ze){je[ze]=function(){return Te(Te[ze].apply(null,arguments))}})(Ke[Ye])}("create zeros ones rand identity".split(" ")),Te}(Math);return function(oe,ce){var ue=oe.utils.isFunction;function Ae(me,ge){return me-ge}function pe(me,ge,ye){return ce.max(ge,ce.min(me,ye))}oe.sum=function(ge){for(var ye=0,Se=ge.length;--Se>=0;)ye+=ge[Se];return ye},oe.sumsqrd=function(ge){for(var ye=0,Se=ge.length;--Se>=0;)ye+=ge[Se]*ge[Se];return ye},oe.sumsqerr=function(ge){for(var ye=oe.mean(ge),Se=0,Te=ge.length,Ne;--Te>=0;)Ne=ge[Te]-ye,Se+=Ne*Ne;return Se},oe.sumrow=function(ge){for(var ye=0,Se=ge.length;--Se>=0;)ye+=ge[Se];return ye},oe.product=function(ge){for(var ye=1,Se=ge.length;--Se>=0;)ye*=ge[Se];return ye},oe.min=function(ge){for(var ye=ge[0],Se=0;++Se<ge.length;)ge[Se]<ye&&(ye=ge[Se]);return ye},oe.max=function(ge){for(var ye=ge[0],Se=0;++Se<ge.length;)ge[Se]>ye&&(ye=ge[Se]);return ye},oe.unique=function(ge){for(var ye={},Se=[],Te=0;Te<ge.length;Te++)ye[ge[Te]]||(ye[ge[Te]]=!0,Se.push(ge[Te]));return Se},oe.mean=function(ge){return oe.sum(ge)/ge.length},oe.meansqerr=function(ge){return oe.sumsqerr(ge)/ge.length},oe.geomean=function(ge){var ye=ge.map(ce.log),Se=oe.mean(ye);return ce.exp(Se)},oe.median=function(ge){var ye=ge.length,Se=ge.slice().sort(Ae);return ye&1?Se[ye/2|0]:(Se[ye/2-1]+Se[ye/2])/2},oe.cumsum=function(ge){return oe.cumreduce(ge,function(ye,Se){return ye+Se})},oe.cumprod=function(ge){return oe.cumreduce(ge,function(ye,Se){return ye*Se})},oe.diff=function(ge){var ye=[],Se=ge.length,Te;for(Te=1;Te<Se;Te++)ye.push(ge[Te]-ge[Te-1]);return ye},oe.rank=function(me){var ge,ye=[],Se={};for(ge=0;ge<me.length;ge++){var Te=me[ge];Se[Te]?Se[Te]++:(Se[Te]=1,ye.push(Te))}var Ne=ye.sort(Ae),$e={},ke=1;for(ge=0;ge<Ne.length;ge++){var Te=Ne[ge],je=Se[Te],Ke=ke,Ye=ke+je-1,ze=(Ke+Ye)/2;$e[Te]=ze,ke+=je}return me.map(function(Xe){return $e[Xe]})},oe.mode=function(ge){var ye=ge.length,Se=ge.slice().sort(Ae),Te=1,Ne=0,$e=0,ke=[],je;for(je=0;je<ye;je++)Se[je]===Se[je+1]?Te++:(Te>Ne?(ke=[Se[je]],Ne=Te,$e=0):Te===Ne&&(ke.push(Se[je]),$e++),Te=1);return $e===0?ke[0]:ke},oe.range=function(ge){return oe.max(ge)-oe.min(ge)},oe.variance=function(ge,ye){return oe.sumsqerr(ge)/(ge.length-(ye?1:0))},oe.pooledvariance=function(ge){var ye=ge.reduce(function(Te,Ne){return Te+oe.sumsqerr(Ne)},0),Se=ge.reduce(function(Te,Ne){return Te+Ne.length},0);return ye/(Se-ge.length)},oe.deviation=function(me){for(var ge=oe.mean(me),ye=me.length,Se=new Array(ye),Te=0;Te<ye;Te++)Se[Te]=me[Te]-ge;return Se},oe.stdev=function(ge,ye){return ce.sqrt(oe.variance(ge,ye))},oe.pooledstdev=function(ge){return ce.sqrt(oe.pooledvariance(ge))},oe.meandev=function(ge){for(var ye=oe.mean(ge),Se=[],Te=ge.length-1;Te>=0;Te--)Se.push(ce.abs(ge[Te]-ye));return oe.mean(Se)},oe.meddev=function(ge){for(var ye=oe.median(ge),Se=[],Te=ge.length-1;Te>=0;Te--)Se.push(ce.abs(ge[Te]-ye));return oe.median(Se)},oe.coeffvar=function(ge){return oe.stdev(ge)/oe.mean(ge)},oe.quartiles=function(ge){var ye=ge.length,Se=ge.slice().sort(Ae);return[Se[ce.round(ye/4)-1],Se[ce.round(ye/2)-1],Se[ce.round(ye*3/4)-1]]},oe.quantiles=function(ge,ye,Se,Te){var Ne=ge.slice().sort(Ae),$e=[ye.length],ke=ge.length,je,Ke,Ye,ze,Xe,Je;for(typeof Se>"u"&&(Se=3/8),typeof Te>"u"&&(Te=3/8),je=0;je<ye.length;je++)Ke=ye[je],Ye=Se+Ke*(1-Se-Te),ze=ke*Ke+Ye,Xe=ce.floor(pe(ze,1,ke-1)),Je=pe(ze-Xe,0,1),$e[je]=(1-Je)*Ne[Xe-1]+Je*Ne[Xe];return $e},oe.percentile=function(ge,ye,Se){var Te=ge.slice().sort(Ae),Ne=ye*(Te.length+(Se?1:-1))+(Se?0:1),$e=parseInt(Ne),ke=Ne-$e;return $e+1<Te.length?Te[$e-1]+ke*(Te[$e]-Te[$e-1]):Te[$e-1]},oe.percentileOfScore=function(ge,ye,Se){var Te=0,Ne=ge.length,$e=!1,ke,je;for(Se==="strict"&&($e=!0),je=0;je<Ne;je++)ke=ge[je],($e&&ke<ye||!$e&&ke<=ye)&&Te++;return Te/Ne},oe.histogram=function(ge,ye){ye=ye||4;var Se=oe.min(ge),Te=(oe.max(ge)-Se)/ye,Ne=ge.length,$e=[],ke;for(ke=0;ke<ye;ke++)$e[ke]=0;for(ke=0;ke<Ne;ke++)$e[ce.min(ce.floor((ge[ke]-Se)/Te),ye-1)]+=1;return $e},oe.covariance=function(ge,ye){var Se=oe.mean(ge),Te=oe.mean(ye),Ne=ge.length,$e=new Array(Ne),ke;for(ke=0;ke<Ne;ke++)$e[ke]=(ge[ke]-Se)*(ye[ke]-Te);return oe.sum($e)/(Ne-1)},oe.corrcoeff=function(ge,ye){return oe.covariance(ge,ye)/oe.stdev(ge,1)/oe.stdev(ye,1)},oe.spearmancoeff=function(me,ge){return me=oe.rank(me),ge=oe.rank(ge),oe.corrcoeff(me,ge)},oe.stanMoment=function(ge,ye){for(var Se=oe.mean(ge),Te=oe.stdev(ge),Ne=ge.length,$e=0,ke=0;ke<Ne;ke++)$e+=ce.pow((ge[ke]-Se)/Te,ye);return $e/ge.length},oe.skewness=function(ge){return oe.stanMoment(ge,3)},oe.kurtosis=function(ge){return oe.stanMoment(ge,4)-3};var xe=oe.prototype;(function(me){for(var ge=0;ge<me.length;ge++)(function(ye){xe[ye]=function(Se,Te){var Ne=[],$e=0,ke=this;if(ue(Se)&&(Te=Se,Se=!1),Te)return setTimeout(function(){Te.call(ke,xe[ye].call(ke,Se))}),this;if(this.length>1){for(ke=Se===!0?this:this.transpose();$e<ke.length;$e++)Ne[$e]=oe[ye](ke[$e]);return Ne}return oe[ye](this[0],Se)}})(me[ge])})("cumsum cumprod".split(" ")),function(me){for(var ge=0;ge<me.length;ge++)(function(ye){xe[ye]=function(Se,Te){var Ne=[],$e=0,ke=this;if(ue(Se)&&(Te=Se,Se=!1),Te)return setTimeout(function(){Te.call(ke,xe[ye].call(ke,Se))}),this;if(this.length>1){for(ye!=="sumrow"&&(ke=Se===!0?this:this.transpose());$e<ke.length;$e++)Ne[$e]=oe[ye](ke[$e]);return Se===!0?oe[ye](oe.utils.toVector(Ne)):Ne}return oe[ye](this[0],Se)}})(me[ge])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(me){for(var ge=0;ge<me.length;ge++)(function(ye){xe[ye]=function(){var Se=[],Te=0,Ne=this,$e=Array.prototype.slice.call(arguments),ke;if(ue($e[$e.length-1])){ke=$e[$e.length-1];var je=$e.slice(0,$e.length-1);return setTimeout(function(){ke.call(Ne,xe[ye].apply(Ne,je))}),this}else{ke=void 0;var Ke=function(ze){return oe[ye].apply(Ne,[ze].concat($e))}}if(this.length>1){for(Ne=Ne.transpose();Te<Ne.length;Te++)Se[Te]=Ke(Ne[Te]);return Se}return Ke(this[0])}})(me[ge])}("quantiles percentileOfScore".split(" "))}(ne,Math),function(oe,ce){oe.gammaln=function(Ae){var pe=0,xe=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],me=1.000000000190015,ge,ye,Se;for(Se=(ye=ge=Ae)+5.5,Se-=(ge+.5)*ce.log(Se);pe<6;pe++)me+=xe[pe]/++ye;return ce.log(2.5066282746310007*me/ge)-Se},oe.loggam=function(Ae){var pe,xe,me,ge,ye,Se,Te,Ne=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(pe=Ae,Te=0,Ae==1||Ae==2)return 0;for(Ae<=7&&(Te=ce.floor(7-Ae),pe=Ae+Te),xe=1/(pe*pe),me=2*ce.PI,ye=Ne[9],Se=8;Se>=0;Se--)ye*=xe,ye+=Ne[Se];if(ge=ye/pe+.5*ce.log(me)+(pe-.5)*ce.log(pe)-pe,Ae<=7)for(Se=1;Se<=Te;Se++)ge-=ce.log(pe-1),pe-=1;return ge},oe.gammafn=function(Ae){var pe=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],xe=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],me=!1,ge=0,ye=0,Se=0,Te=Ae,Ne,$e,ke,je;if(Ae>171.6243769536076)return 1/0;if(Te<=0)if(je=Te%1+36e-17,je)me=(Te&1?-1:1)*ce.PI/ce.sin(ce.PI*je),Te=1-Te;else return 1/0;for(ke=Te,Te<1?$e=Te++:$e=(Te-=ge=(Te|0)-1)-1,Ne=0;Ne<8;++Ne)Se=(Se+pe[Ne])*$e,ye=ye*$e+xe[Ne];if(je=Se/ye+1,ke<Te)je/=ke;else if(ke>Te)for(Ne=0;Ne<ge;++Ne)je*=Te,Te++;return me&&(je=me/je),je},oe.gammap=function(Ae,pe){return oe.lowRegGamma(Ae,pe)*oe.gammafn(Ae)},oe.lowRegGamma=function(Ae,pe){var xe=oe.gammaln(Ae),me=Ae,ge=1/Ae,ye=ge,Se=pe+1-Ae,Te=1/1e-30,Ne=1/Se,$e=Ne,ke=1,je=-~(ce.log(Ae>=1?Ae:1/Ae)*8.5+Ae*.4+17),Ke;if(pe<0||Ae<=0)return NaN;if(pe<Ae+1){for(;ke<=je;ke++)ge+=ye*=pe/++me;return ge*ce.exp(-pe+Ae*ce.log(pe)-xe)}for(;ke<=je;ke++)Ke=-ke*(ke-Ae),Se+=2,Ne=Ke*Ne+Se,Te=Se+Ke/Te,Ne=1/Ne,$e*=Ne*Te;return 1-$e*ce.exp(-pe+Ae*ce.log(pe)-xe)},oe.factorialln=function(Ae){return Ae<0?NaN:oe.gammaln(Ae+1)},oe.factorial=function(Ae){return Ae<0?NaN:oe.gammafn(Ae+1)},oe.combination=function(Ae,pe){return Ae>170||pe>170?ce.exp(oe.combinationln(Ae,pe)):oe.factorial(Ae)/oe.factorial(pe)/oe.factorial(Ae-pe)},oe.combinationln=function(Ae,pe){return oe.factorialln(Ae)-oe.factorialln(pe)-oe.factorialln(Ae-pe)},oe.permutation=function(Ae,pe){return oe.factorial(Ae)/oe.factorial(Ae-pe)},oe.betafn=function(Ae,pe){if(!(Ae<=0||pe<=0))return Ae+pe>170?ce.exp(oe.betaln(Ae,pe)):oe.gammafn(Ae)*oe.gammafn(pe)/oe.gammafn(Ae+pe)},oe.betaln=function(Ae,pe){return oe.gammaln(Ae)+oe.gammaln(pe)-oe.gammaln(Ae+pe)},oe.betacf=function(Ae,pe,xe){var me=1e-30,ge=1,ye=pe+xe,Se=pe+1,Te=pe-1,Ne=1,$e=1-ye*Ae/Se,ke,je,Ke,Ye;for(ce.abs($e)<me&&($e=me),$e=1/$e,Ye=$e;ge<=100&&(ke=2*ge,je=ge*(xe-ge)*Ae/((Te+ke)*(pe+ke)),$e=1+je*$e,ce.abs($e)<me&&($e=me),Ne=1+je/Ne,ce.abs(Ne)<me&&(Ne=me),$e=1/$e,Ye*=$e*Ne,je=-(pe+ge)*(ye+ge)*Ae/((pe+ke)*(Se+ke)),$e=1+je*$e,ce.abs($e)<me&&($e=me),Ne=1+je/Ne,ce.abs(Ne)<me&&(Ne=me),$e=1/$e,Ke=$e*Ne,Ye*=Ke,!(ce.abs(Ke-1)<3e-7));ge++);return Ye},oe.gammapinv=function(Ae,pe){var xe=0,me=pe-1,ge=1e-8,ye=oe.gammaln(pe),Se,Te,Ne,$e,ke,je,Ke;if(Ae>=1)return ce.max(100,pe+100*ce.sqrt(pe));if(Ae<=0)return 0;for(pe>1?(je=ce.log(me),Ke=ce.exp(me*(je-1)-ye),ke=Ae<.5?Ae:1-Ae,Ne=ce.sqrt(-2*ce.log(ke)),Se=(2.30753+Ne*.27061)/(1+Ne*(.99229+Ne*.04481))-Ne,Ae<.5&&(Se=-Se),Se=ce.max(.001,pe*ce.pow(1-1/(9*pe)-Se/(3*ce.sqrt(pe)),3))):(Ne=1-pe*(.253+pe*.12),Ae<Ne?Se=ce.pow(Ae/Ne,1/pe):Se=1-ce.log(1-(Ae-Ne)/(1-Ne)));xe<12;xe++){if(Se<=0)return 0;if(Te=oe.lowRegGamma(pe,Se)-Ae,pe>1?Ne=Ke*ce.exp(-(Se-me)+me*(ce.log(Se)-je)):Ne=ce.exp(-Se+me*ce.log(Se)-ye),$e=Te/Ne,Se-=Ne=$e/(1-.5*ce.min(1,$e*((pe-1)/Se-1))),Se<=0&&(Se=.5*(Se+Ne)),ce.abs(Ne)<ge*Se)break}return Se},oe.erf=function(Ae){var pe=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],xe=pe.length-1,me=!1,ge=0,ye=0,Se,Te,Ne,$e;for(Ae<0&&(Ae=-Ae,me=!0),Se=2/(2+Ae),Te=4*Se-2;xe>0;xe--)Ne=ge,ge=Te*ge-ye+pe[xe],ye=Ne;return $e=Se*ce.exp(-Ae*Ae+.5*(pe[0]+Te*ge)-ye),me?$e-1:1-$e},oe.erfc=function(Ae){return 1-oe.erf(Ae)},oe.erfcinv=function(Ae){var pe=0,xe,me,ge,ye;if(Ae>=2)return-100;if(Ae<=0)return 100;for(ye=Ae<1?Ae:2-Ae,ge=ce.sqrt(-2*ce.log(ye/2)),xe=-.70711*((2.30753+ge*.27061)/(1+ge*(.99229+ge*.04481))-ge);pe<2;pe++)me=oe.erfc(xe)-ye,xe+=me/(1.1283791670955126*ce.exp(-xe*xe)-xe*me);return Ae<1?xe:-xe},oe.ibetainv=function(Ae,pe,xe){var me=1e-8,ge=pe-1,ye=xe-1,Se=0,Te,Ne,$e,ke,je,Ke,Ye,ze,Xe,Je,rt;if(Ae<=0)return 0;if(Ae>=1)return 1;for(pe>=1&&xe>=1?($e=Ae<.5?Ae:1-Ae,ke=ce.sqrt(-2*ce.log($e)),Ye=(2.30753+ke*.27061)/(1+ke*(.99229+ke*.04481))-ke,Ae<.5&&(Ye=-Ye),ze=(Ye*Ye-3)/6,Xe=2/(1/(2*pe-1)+1/(2*xe-1)),Je=Ye*ce.sqrt(ze+Xe)/Xe-(1/(2*xe-1)-1/(2*pe-1))*(ze+5/6-2/(3*Xe)),Ye=pe/(pe+xe*ce.exp(2*Je))):(Te=ce.log(pe/(pe+xe)),Ne=ce.log(xe/(pe+xe)),ke=ce.exp(pe*Te)/pe,je=ce.exp(xe*Ne)/xe,Je=ke+je,Ae<ke/Je?Ye=ce.pow(pe*Je*Ae,1/pe):Ye=1-ce.pow(xe*Je*(1-Ae),1/xe)),rt=-oe.gammaln(pe)-oe.gammaln(xe)+oe.gammaln(pe+xe);Se<10;Se++){if(Ye===0||Ye===1)return Ye;if(Ke=oe.ibeta(Ye,pe,xe)-Ae,ke=ce.exp(ge*ce.log(Ye)+ye*ce.log(1-Ye)+rt),je=Ke/ke,Ye-=ke=je/(1-.5*ce.min(1,je*(ge/Ye-ye/(1-Ye)))),Ye<=0&&(Ye=.5*(Ye+ke)),Ye>=1&&(Ye=.5*(Ye+ke+1)),ce.abs(ke)<me*Ye&&Se>0)break}return Ye},oe.ibeta=function(Ae,pe,xe){var me=Ae===0||Ae===1?0:ce.exp(oe.gammaln(pe+xe)-oe.gammaln(pe)-oe.gammaln(xe)+pe*ce.log(Ae)+xe*ce.log(1-Ae));return Ae<0||Ae>1?!1:Ae<(pe+1)/(pe+xe+2)?me*oe.betacf(Ae,pe,xe)/pe:1-me*oe.betacf(1-Ae,xe,pe)/xe},oe.randn=function(Ae,pe){var xe,me,ge,ye,Se;if(pe||(pe=Ae),Ae)return oe.create(Ae,pe,function(){return oe.randn()});do xe=oe._random_fn(),me=1.7156*(oe._random_fn()-.5),ge=xe-.449871,ye=ce.abs(me)+.386595,Se=ge*ge+ye*(.196*ye-.25472*ge);while(Se>.27597&&(Se>.27846||me*me>-4*ce.log(xe)*xe*xe));return me/xe},oe.randg=function(Ae,pe,xe){var me=Ae,ge,ye,Se,Te,Ne,$e;if(xe||(xe=pe),Ae||(Ae=1),pe)return $e=oe.zeros(pe,xe),$e.alter(function(){return oe.randg(Ae)}),$e;Ae<1&&(Ae+=1),ge=Ae-1/3,ye=1/ce.sqrt(9*ge);do{do Ne=oe.randn(),Te=1+ye*Ne;while(Te<=0);Te=Te*Te*Te,Se=oe._random_fn()}while(Se>1-.331*ce.pow(Ne,4)&&ce.log(Se)>.5*Ne*Ne+ge*(1-Te+ce.log(Te)));if(Ae==me)return ge*Te;do Se=oe._random_fn();while(Se===0);return ce.pow(Se,1/me)*ge*Te},function(ue){for(var Ae=0;Ae<ue.length;Ae++)(function(pe){oe.fn[pe]=function(){return oe(oe.map(this,function(xe){return oe[pe](xe)}))}})(ue[Ae])}("gammaln gammafn factorial factorialln".split(" ")),function(ue){for(var Ae=0;Ae<ue.length;Ae++)(function(pe){oe.fn[pe]=function(){return oe(oe[pe].apply(null,arguments))}})(ue[Ae])}("randn".split(" "))}(ne,Math),function(oe,ce){(function(me){for(var ge=0;ge<me.length;ge++)(function(ye){oe[ye]=function Se(Te,Ne,$e){return this instanceof Se?(this._a=Te,this._b=Ne,this._c=$e,this):new Se(Te,Ne,$e)},oe.fn[ye]=function(Se,Te,Ne){var $e=oe[ye](Se,Te,Ne);return $e.data=this,$e},oe[ye].prototype.sample=function(Se){var Te=this._a,Ne=this._b,$e=this._c;return Se?oe.alter(Se,function(){return oe[ye].sample(Te,Ne,$e)}):oe[ye].sample(Te,Ne,$e)},function(Se){for(var Te=0;Te<Se.length;Te++)(function(Ne){oe[ye].prototype[Ne]=function($e){var ke=this._a,je=this._b,Ke=this._c;return!$e&&$e!==0&&($e=this.data),typeof $e!="number"?oe.fn.map.call($e,function(Ye){return oe[ye][Ne](Ye,ke,je,Ke)}):oe[ye][Ne]($e,ke,je,Ke)}})(Se[Te])}("pdf cdf inv".split(" ")),function(Se){for(var Te=0;Te<Se.length;Te++)(function(Ne){oe[ye].prototype[Ne]=function(){return oe[ye][Ne](this._a,this._b,this._c)}})(Se[Te])}("mean median mode variance".split(" "))})(me[ge])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),oe.extend(oe.beta,{pdf:function(ge,ye,Se){return ge>1||ge<0?0:ye==1&&Se==1?1:ye<512&&Se<512?ce.pow(ge,ye-1)*ce.pow(1-ge,Se-1)/oe.betafn(ye,Se):ce.exp((ye-1)*ce.log(ge)+(Se-1)*ce.log(1-ge)-oe.betaln(ye,Se))},cdf:function(ge,ye,Se){return ge>1||ge<0?(ge>1)*1:oe.ibeta(ge,ye,Se)},inv:function(ge,ye,Se){return oe.ibetainv(ge,ye,Se)},mean:function(ge,ye){return ge/(ge+ye)},median:function(ge,ye){return oe.ibetainv(.5,ge,ye)},mode:function(ge,ye){return(ge-1)/(ge+ye-2)},sample:function(ge,ye){var Se=oe.randg(ge);return Se/(Se+oe.randg(ye))},variance:function(ge,ye){return ge*ye/(ce.pow(ge+ye,2)*(ge+ye+1))}}),oe.extend(oe.centralF,{pdf:function(ge,ye,Se){var Te,Ne,$e;return ge<0?0:ye<=2?ge===0&&ye<2?1/0:ge===0&&ye===2?1:1/oe.betafn(ye/2,Se/2)*ce.pow(ye/Se,ye/2)*ce.pow(ge,ye/2-1)*ce.pow(1+ye/Se*ge,-(ye+Se)/2):(Te=ye*ge/(Se+ge*ye),Ne=Se/(Se+ge*ye),$e=ye*Ne/2,$e*oe.binomial.pdf((ye-2)/2,(ye+Se-2)/2,Te))},cdf:function(ge,ye,Se){return ge<0?0:oe.ibeta(ye*ge/(ye*ge+Se),ye/2,Se/2)},inv:function(ge,ye,Se){return Se/(ye*(1/oe.ibetainv(ge,ye/2,Se/2)-1))},mean:function(ge,ye){return ye>2?ye/(ye-2):void 0},mode:function(ge,ye){return ge>2?ye*(ge-2)/(ge*(ye+2)):void 0},sample:function(ge,ye){var Se=oe.randg(ge/2)*2,Te=oe.randg(ye/2)*2;return Se/ge/(Te/ye)},variance:function(ge,ye){if(!(ye<=4))return 2*ye*ye*(ge+ye-2)/(ge*(ye-2)*(ye-2)*(ye-4))}}),oe.extend(oe.cauchy,{pdf:function(ge,ye,Se){return Se<0?0:Se/(ce.pow(ge-ye,2)+ce.pow(Se,2))/ce.PI},cdf:function(ge,ye,Se){return ce.atan((ge-ye)/Se)/ce.PI+.5},inv:function(me,ge,ye){return ge+ye*ce.tan(ce.PI*(me-.5))},median:function(ge){return ge},mode:function(ge){return ge},sample:function(ge,ye){return oe.randn()*ce.sqrt(1/(2*oe.randg(.5)))*ye+ge}}),oe.extend(oe.chisquare,{pdf:function(ge,ye){return ge<0?0:ge===0&&ye===2?.5:ce.exp((ye/2-1)*ce.log(ge)-ge/2-ye/2*ce.log(2)-oe.gammaln(ye/2))},cdf:function(ge,ye){return ge<0?0:oe.lowRegGamma(ye/2,ge/2)},inv:function(me,ge){return 2*oe.gammapinv(me,.5*ge)},mean:function(me){return me},median:function(ge){return ge*ce.pow(1-2/(9*ge),3)},mode:function(ge){return ge-2>0?ge-2:0},sample:function(ge){return oe.randg(ge/2)*2},variance:function(ge){return 2*ge}}),oe.extend(oe.exponential,{pdf:function(ge,ye){return ge<0?0:ye*ce.exp(-ye*ge)},cdf:function(ge,ye){return ge<0?0:1-ce.exp(-ye*ge)},inv:function(me,ge){return-ce.log(1-me)/ge},mean:function(me){return 1/me},median:function(me){return 1/me*ce.log(2)},mode:function(){return 0},sample:function(ge){return-1/ge*ce.log(oe._random_fn())},variance:function(me){return ce.pow(me,-2)}}),oe.extend(oe.gamma,{pdf:function(ge,ye,Se){return ge<0?0:ge===0&&ye===1?1/Se:ce.exp((ye-1)*ce.log(ge)-ge/Se-oe.gammaln(ye)-ye*ce.log(Se))},cdf:function(ge,ye,Se){return ge<0?0:oe.lowRegGamma(ye,ge/Se)},inv:function(me,ge,ye){return oe.gammapinv(me,ge)*ye},mean:function(me,ge){return me*ge},mode:function(ge,ye){if(ge>1)return(ge-1)*ye},sample:function(ge,ye){return oe.randg(ge)*ye},variance:function(ge,ye){return ge*ye*ye}}),oe.extend(oe.invgamma,{pdf:function(ge,ye,Se){return ge<=0?0:ce.exp(-(ye+1)*ce.log(ge)-Se/ge-oe.gammaln(ye)+ye*ce.log(Se))},cdf:function(ge,ye,Se){return ge<=0?0:1-oe.lowRegGamma(ye,Se/ge)},inv:function(me,ge,ye){return ye/oe.gammapinv(1-me,ge)},mean:function(me,ge){return me>1?ge/(me-1):void 0},mode:function(ge,ye){return ye/(ge+1)},sample:function(ge,ye){return ye/oe.randg(ge)},variance:function(ge,ye){if(!(ge<=2))return ye*ye/((ge-1)*(ge-1)*(ge-2))}}),oe.extend(oe.kumaraswamy,{pdf:function(ge,ye,Se){return ge===0&&ye===1?Se:ge===1&&Se===1?ye:ce.exp(ce.log(ye)+ce.log(Se)+(ye-1)*ce.log(ge)+(Se-1)*ce.log(1-ce.pow(ge,ye)))},cdf:function(ge,ye,Se){return ge<0?0:ge>1?1:1-ce.pow(1-ce.pow(ge,ye),Se)},inv:function(ge,ye,Se){return ce.pow(1-ce.pow(1-ge,1/Se),1/ye)},mean:function(me,ge){return ge*oe.gammafn(1+1/me)*oe.gammafn(ge)/oe.gammafn(1+1/me+ge)},median:function(ge,ye){return ce.pow(1-ce.pow(2,-1/ye),1/ge)},mode:function(ge,ye){if(ge>=1&&ye>=1&&ge!==1&&ye!==1)return ce.pow((ge-1)/(ge*ye-1),1/ge)},variance:function(){throw new Error("variance not yet implemented")}}),oe.extend(oe.lognormal,{pdf:function(ge,ye,Se){return ge<=0?0:ce.exp(-ce.log(ge)-.5*ce.log(2*ce.PI)-ce.log(Se)-ce.pow(ce.log(ge)-ye,2)/(2*Se*Se))},cdf:function(ge,ye,Se){return ge<0?0:.5+.5*oe.erf((ce.log(ge)-ye)/ce.sqrt(2*Se*Se))},inv:function(me,ge,ye){return ce.exp(-1.4142135623730951*ye*oe.erfcinv(2*me)+ge)},mean:function(ge,ye){return ce.exp(ge+ye*ye/2)},median:function(ge){return ce.exp(ge)},mode:function(ge,ye){return ce.exp(ge-ye*ye)},sample:function(ge,ye){return ce.exp(oe.randn()*ye+ge)},variance:function(ge,ye){return(ce.exp(ye*ye)-1)*ce.exp(2*ge+ye*ye)}}),oe.extend(oe.noncentralt,{pdf:function(ge,ye,Se){var Te=1e-14;return ce.abs(Se)<Te?oe.studentt.pdf(ge,ye):ce.abs(ge)<Te?ce.exp(oe.gammaln((ye+1)/2)-Se*Se/2-.5*ce.log(ce.PI*ye)-oe.gammaln(ye/2)):ye/ge*(oe.noncentralt.cdf(ge*ce.sqrt(1+2/ye),ye+2,Se)-oe.noncentralt.cdf(ge,ye,Se))},cdf:function(ge,ye,Se){var Te=1e-14,Ne=200;if(ce.abs(Se)<Te)return oe.studentt.cdf(ge,ye);var $e=!1;ge<0&&($e=!0,Se=-Se);for(var ke=oe.normal.cdf(-Se,0,1),je=Te+1,Ke=je,Ye=ge*ge/(ge*ge+ye),ze=0,Xe=ce.exp(-Se*Se/2),Je=ce.exp(-Se*Se/2-.5*ce.log(2)-oe.gammaln(3/2))*Se;ze<Ne||Ke>Te||je>Te;)Ke=je,ze>0&&(Xe*=Se*Se/(2*ze),Je*=Se*Se/(2*(ze+1/2))),je=Xe*oe.beta.cdf(Ye,ze+.5,ye/2)+Je*oe.beta.cdf(Ye,ze+1,ye/2),ke+=.5*je,ze++;return $e?1-ke:ke}}),oe.extend(oe.normal,{pdf:function(ge,ye,Se){return ce.exp(-.5*ce.log(2*ce.PI)-ce.log(Se)-ce.pow(ge-ye,2)/(2*Se*Se))},cdf:function(ge,ye,Se){return .5*(1+oe.erf((ge-ye)/ce.sqrt(2*Se*Se)))},inv:function(me,ge,ye){return-1.4142135623730951*ye*oe.erfcinv(2*me)+ge},mean:function(me){return me},median:function(ge){return ge},mode:function(me){return me},sample:function(ge,ye){return oe.randn()*ye+ge},variance:function(me,ge){return ge*ge}}),oe.extend(oe.pareto,{pdf:function(ge,ye,Se){return ge<ye?0:Se*ce.pow(ye,Se)/ce.pow(ge,Se+1)},cdf:function(ge,ye,Se){return ge<ye?0:1-ce.pow(ye/ge,Se)},inv:function(ge,ye,Se){return ye/ce.pow(1-ge,1/Se)},mean:function(ge,ye){if(!(ye<=1))return ye*ce.pow(ge,ye)/(ye-1)},median:function(ge,ye){return ge*(ye*ce.SQRT2)},mode:function(ge){return ge},variance:function(me,ge){if(!(ge<=2))return me*me*ge/(ce.pow(ge-1,2)*(ge-2))}}),oe.extend(oe.studentt,{pdf:function(ge,ye){return ye=ye>1e100?1e100:ye,1/(ce.sqrt(ye)*oe.betafn(.5,ye/2))*ce.pow(1+ge*ge/ye,-((ye+1)/2))},cdf:function(ge,ye){var Se=ye/2;return oe.ibeta((ge+ce.sqrt(ge*ge+ye))/(2*ce.sqrt(ge*ge+ye)),Se,Se)},inv:function(me,ge){var ye=oe.ibetainv(2*ce.min(me,1-me),.5*ge,.5);return ye=ce.sqrt(ge*(1-ye)/ye),me>.5?ye:-ye},mean:function(ge){return ge>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(ge){return oe.randn()*ce.sqrt(ge/(2*oe.randg(ge/2)))},variance:function(ge){return ge>2?ge/(ge-2):ge>1?1/0:void 0}}),oe.extend(oe.weibull,{pdf:function(ge,ye,Se){return ge<0||ye<0||Se<0?0:Se/ye*ce.pow(ge/ye,Se-1)*ce.exp(-ce.pow(ge/ye,Se))},cdf:function(ge,ye,Se){return ge<0?0:1-ce.exp(-ce.pow(ge/ye,Se))},inv:function(me,ge,ye){return ge*ce.pow(-ce.log(1-me),1/ye)},mean:function(me,ge){return me*oe.gammafn(1+1/ge)},median:function(ge,ye){return ge*ce.pow(ce.log(2),1/ye)},mode:function(ge,ye){return ye<=1?0:ge*ce.pow((ye-1)/ye,1/ye)},sample:function(ge,ye){return ge*ce.pow(-ce.log(oe._random_fn()),1/ye)},variance:function(ge,ye){return ge*ge*oe.gammafn(1+2/ye)-ce.pow(oe.weibull.mean(ge,ye),2)}}),oe.extend(oe.uniform,{pdf:function(ge,ye,Se){return ge<ye||ge>Se?0:1/(Se-ye)},cdf:function(ge,ye,Se){return ge<ye?0:ge<Se?(ge-ye)/(Se-ye):1},inv:function(me,ge,ye){return ge+me*(ye-ge)},mean:function(ge,ye){return .5*(ge+ye)},median:function(ge,ye){return oe.mean(ge,ye)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(ge,ye){return ge/2+ye/2+(ye/2-ge/2)*(2*oe._random_fn()-1)},variance:function(ge,ye){return ce.pow(ye-ge,2)/12}});function ue(me,ge,ye,Se){for(var Te=0,Ne=1,$e=1,ke=1,je=0,Ke=0,Ye;ce.abs(($e-Ke)/$e)>Se;)Ke=$e,Ye=-(ge+je)*(ge+ye+je)*me/(ge+2*je)/(ge+2*je+1),Te=$e+Ye*Te,Ne=ke+Ye*Ne,je=je+1,Ye=je*(ye-je)*me/(ge+2*je-1)/(ge+2*je),$e=Te+Ye*$e,ke=Ne+Ye*ke,Te=Te/ke,Ne=Ne/ke,$e=$e/ke,ke=1;return $e/ge}oe.extend(oe.binomial,{pdf:function(ge,ye,Se){return Se===0||Se===1?ye*Se===ge?1:0:oe.combination(ye,ge)*ce.pow(Se,ge)*ce.pow(1-Se,ye-ge)},cdf:function(ge,ye,Se){var Te,Ne=1e-10;if(ge<0)return 0;if(ge>=ye)return 1;if(Se<0||Se>1||ye<=0)return NaN;ge=ce.floor(ge);var $e=Se,ke=ge+1,je=ye-ge,Ke=ke+je,Ye=ce.exp(oe.gammaln(Ke)-oe.gammaln(je)-oe.gammaln(ke)+ke*ce.log($e)+je*ce.log(1-$e));return $e<(ke+1)/(Ke+2)?Te=Ye*ue($e,ke,je,Ne):Te=1-Ye*ue(1-$e,je,ke,Ne),ce.round((1-Te)*(1/Ne))/(1/Ne)}}),oe.extend(oe.negbin,{pdf:function(ge,ye,Se){return ge!==ge>>>0?!1:ge<0?0:oe.combination(ge+ye-1,ye-1)*ce.pow(1-Se,ge)*ce.pow(Se,ye)},cdf:function(ge,ye,Se){var Te=0,Ne=0;if(ge<0)return 0;for(;Ne<=ge;Ne++)Te+=oe.negbin.pdf(Ne,ye,Se);return Te}}),oe.extend(oe.hypgeom,{pdf:function(ge,ye,Se,Te){if(ge!==ge|0)return!1;if(ge<0||ge<Se-(ye-Te))return 0;if(ge>Te||ge>Se)return 0;if(Se*2>ye)return Te*2>ye?oe.hypgeom.pdf(ye-Se-Te+ge,ye,ye-Se,ye-Te):oe.hypgeom.pdf(Te-ge,ye,ye-Se,Te);if(Te*2>ye)return oe.hypgeom.pdf(Se-ge,ye,Se,ye-Te);if(Se<Te)return oe.hypgeom.pdf(ge,ye,Te,Se);for(var Ne=1,$e=0,ke=0;ke<ge;ke++){for(;Ne>1&&$e<Te;)Ne*=1-Se/(ye-$e),$e++;Ne*=(Te-ke)*(Se-ke)/((ke+1)*(ye-Se-Te+ke+1))}for(;$e<Te;$e++)Ne*=1-Se/(ye-$e);return ce.min(1,ce.max(0,Ne))},cdf:function(ge,ye,Se,Te){if(ge<0||ge<Se-(ye-Te))return 0;if(ge>=Te||ge>=Se)return 1;if(Se*2>ye)return Te*2>ye?oe.hypgeom.cdf(ye-Se-Te+ge,ye,ye-Se,ye-Te):1-oe.hypgeom.cdf(Te-ge-1,ye,ye-Se,Te);if(Te*2>ye)return 1-oe.hypgeom.cdf(Se-ge-1,ye,Se,ye-Te);if(Se<Te)return oe.hypgeom.cdf(ge,ye,Te,Se);for(var Ne=1,$e=1,ke=0,je=0;je<ge;je++){for(;Ne>1&&ke<Te;){var Ke=1-Se/(ye-ke);$e*=Ke,Ne*=Ke,ke++}$e*=(Te-je)*(Se-je)/((je+1)*(ye-Se-Te+je+1)),Ne+=$e}for(;ke<Te;ke++)Ne*=1-Se/(ye-ke);return ce.min(1,ce.max(0,Ne))}}),oe.extend(oe.poisson,{pdf:function(ge,ye){return ye<0||ge%1!==0||ge<0?0:ce.pow(ye,ge)*ce.exp(-ye)/oe.factorial(ge)},cdf:function(ge,ye){var Se=[],Te=0;if(ge<0)return 0;for(;Te<=ge;Te++)Se.push(oe.poisson.pdf(Te,ye));return oe.sum(Se)},mean:function(me){return me},variance:function(me){return me},sampleSmall:function(ge){var ye=1,Se=0,Te=ce.exp(-ge);do Se++,ye*=oe._random_fn();while(ye>Te);return Se-1},sampleLarge:function(ge){var ye=ge,Se,Te,Ne,$e,ke,je,Ke,Ye,ze,Xe;for($e=ce.sqrt(ye),ke=ce.log(ye),Ke=.931+2.53*$e,je=-.059+.02483*Ke,Ye=1.1239+1.1328/(Ke-3.4),ze=.9277-3.6224/(Ke-2);;){if(Te=ce.random()-.5,Ne=ce.random(),Xe=.5-ce.abs(Te),Se=ce.floor((2*je/Xe+Ke)*Te+ye+.43),Xe>=.07&&Ne<=ze)return Se;if(!(Se<0||Xe<.013&&Ne>Xe)&&ce.log(Ne)+ce.log(Ye)-ce.log(je/(Xe*Xe)+Ke)<=-ye+Se*ke-oe.loggam(Se+1))return Se}},sample:function(ge){return ge<10?this.sampleSmall(ge):this.sampleLarge(ge)}}),oe.extend(oe.triangular,{pdf:function(ge,ye,Se,Te){return Se<=ye||Te<ye||Te>Se?NaN:ge<ye||ge>Se?0:ge<Te?2*(ge-ye)/((Se-ye)*(Te-ye)):ge===Te?2/(Se-ye):2*(Se-ge)/((Se-ye)*(Se-Te))},cdf:function(ge,ye,Se,Te){return Se<=ye||Te<ye||Te>Se?NaN:ge<=ye?0:ge>=Se?1:ge<=Te?ce.pow(ge-ye,2)/((Se-ye)*(Te-ye)):1-ce.pow(Se-ge,2)/((Se-ye)*(Se-Te))},inv:function(ge,ye,Se,Te){return Se<=ye||Te<ye||Te>Se?NaN:ge<=(Te-ye)/(Se-ye)?ye+(Se-ye)*ce.sqrt(ge*((Te-ye)/(Se-ye))):ye+(Se-ye)*(1-ce.sqrt((1-ge)*(1-(Te-ye)/(Se-ye))))},mean:function(ge,ye,Se){return(ge+ye+Se)/3},median:function(ge,ye,Se){if(Se<=(ge+ye)/2)return ye-ce.sqrt((ye-ge)*(ye-Se))/ce.sqrt(2);if(Se>(ge+ye)/2)return ge+ce.sqrt((ye-ge)*(Se-ge))/ce.sqrt(2)},mode:function(ge,ye,Se){return Se},sample:function(ge,ye,Se){var Te=oe._random_fn();return Te<(Se-ge)/(ye-ge)?ge+ce.sqrt(Te*(ye-ge)*(Se-ge)):ye-ce.sqrt((1-Te)*(ye-ge)*(ye-Se))},variance:function(ge,ye,Se){return(ge*ge+ye*ye+Se*Se-ge*ye-ge*Se-ye*Se)/18}}),oe.extend(oe.arcsine,{pdf:function(ge,ye,Se){return Se<=ye?NaN:ge<=ye||ge>=Se?0:2/ce.PI*ce.pow(ce.pow(Se-ye,2)-ce.pow(2*ge-ye-Se,2),-.5)},cdf:function(ge,ye,Se){return ge<ye?0:ge<Se?2/ce.PI*ce.asin(ce.sqrt((ge-ye)/(Se-ye))):1},inv:function(me,ge,ye){return ge+(.5-.5*ce.cos(ce.PI*me))*(ye-ge)},mean:function(ge,ye){return ye<=ge?NaN:(ge+ye)/2},median:function(ge,ye){return ye<=ge?NaN:(ge+ye)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(ge,ye){return(ge+ye)/2+(ye-ge)/2*ce.sin(2*ce.PI*oe.uniform.sample(0,1))},variance:function(ge,ye){return ye<=ge?NaN:ce.pow(ye-ge,2)/8}});function Ae(me){return me/ce.abs(me)}oe.extend(oe.laplace,{pdf:function(ge,ye,Se){return Se<=0?0:ce.exp(-ce.abs(ge-ye)/Se)/(2*Se)},cdf:function(ge,ye,Se){return Se<=0?0:ge<ye?.5*ce.exp((ge-ye)/Se):1-.5*ce.exp(-(ge-ye)/Se)},mean:function(me){return me},median:function(me){return me},mode:function(me){return me},variance:function(me,ge){return 2*ge*ge},sample:function(ge,ye){var Se=oe._random_fn()-.5;return ge-ye*Ae(Se)*ce.log(1-2*ce.abs(Se))}});function pe(me,ge,ye){var Se=12,Te=6,Ne=-30,$e=-50,ke=60,je=8,Ke=3,Ye=2,ze=3,Xe=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],Je=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],rt=me*.5;if(rt>=je)return 1;var Ze=2*oe.normal.cdf(rt,0,1,1,0)-1;Ze>=ce.exp($e/ye)?Ze=ce.pow(Ze,ye):Ze=0;var et;me>Ke?et=Ye:et=ze;for(var nt=rt,Ge=(je-rt)/et,ve=nt+Ge,Be=0,Re=ye-1,Ie=1;Ie<=et;Ie++){for(var Fe=0,qe=.5*(ve+nt),We=.5*(ve-nt),Ue=1;Ue<=Se;Ue++){var _e,Qe;Te<Ue?(_e=Se-Ue+1,Qe=Xe[_e-1]):(_e=Ue,Qe=-Xe[_e-1]);var tt=We*Qe,it=qe+tt,at=it*it;if(at>ke)break;var ot=2*oe.normal.cdf(it,0,1,1,0),lt=2*oe.normal.cdf(it,me,1,1,0),st=ot*.5-lt*.5;st>=ce.exp(Ne/Re)&&(st=Je[_e-1]*ce.exp(-(.5*at))*ce.pow(st,Re),Fe+=st)}Fe*=2*We*ye/ce.sqrt(2*ce.PI),Be+=Fe,nt=ve,ve+=Ge}return Ze+=Be,Ze<=ce.exp(Ne/ge)?0:(Ze=ce.pow(Ze,ge),Ze>=1?1:Ze)}function xe(me,ge,ye){var Se=.322232421088,Te=.099348462606,Ne=-1,$e=.588581570495,ke=-.342242088547,je=.531103462366,Ke=-.204231210125,Ye=.10353775285,ze=-453642210148e-16,Xe=.0038560700634,Je=.8832,rt=.2368,Ze=1.214,et=1.208,nt=1.4142,Ge=120,ve=.5-.5*me,Be=ce.sqrt(ce.log(1/(ve*ve))),Re=Be+((((Be*ze+Ke)*Be+ke)*Be+Ne)*Be+Se)/((((Be*Xe+Ye)*Be+je)*Be+$e)*Be+Te);ye<Ge&&(Re+=(Re*Re*Re+Re)/ye/4);var Ie=Je-rt*Re;return ye<Ge&&(Ie+=-Ze/ye+et*Re/ye),Re*(Ie*ce.log(ge-1)+nt)}oe.extend(oe.tukey,{cdf:function(ge,ye,Se){var Te=1,Ne=ye,$e=16,ke=8,je=-30,Ke=1e-14,Ye=100,ze=800,Xe=5e3,Je=25e3,rt=1,Ze=.5,et=.25,nt=.125,Ge=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],ve=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(ge<=0)return 0;if(Se<2||Te<1||Ne<2)return NaN;if(!Number.isFinite(ge))return 1;if(Se>Je)return pe(ge,Te,Ne);var Be=Se*.5,Re=Be*ce.log(Se)-Se*ce.log(2)-oe.gammaln(Be),Ie=Be-1,Fe=Se*.25,qe;Se<=Ye?qe=rt:Se<=ze?qe=Ze:Se<=Xe?qe=et:qe=nt,Re+=ce.log(qe);for(var We=0,Ue=1;Ue<=50;Ue++){for(var _e=0,Qe=(2*Ue-1)*qe,tt=1;tt<=$e;tt++){var it,at;ke<tt?(it=tt-ke-1,at=Re+Ie*ce.log(Qe+Ge[it]*qe)-(Ge[it]*qe+Qe)*Fe):(it=tt-1,at=Re+Ie*ce.log(Qe-Ge[it]*qe)+(Ge[it]*qe-Qe)*Fe);var ot;if(at>=je){ke<tt?ot=ge*ce.sqrt((Ge[it]*qe+Qe)*.5):ot=ge*ce.sqrt((-(Ge[it]*qe)+Qe)*.5);var lt=pe(ot,Te,Ne),st=lt*ve[it]*ce.exp(at);_e+=st}}if(Ue*qe>=1&&_e<=Ke)break;We+=_e}if(_e>Ke)throw new Error("tukey.cdf failed to converge");return We>1&&(We=1),We},inv:function(me,ge,ye){var Se=1,Te=ge,Ne=1e-4,$e=50;if(ye<2||Se<1||Te<2)return NaN;if(me<0||me>1)return NaN;if(me===0)return 0;if(me===1)return 1/0;var ke=xe(me,Te,ye),je=oe.tukey.cdf(ke,ge,ye)-me,Ke;je>0?Ke=ce.max(0,ke-1):Ke=ke+1;for(var Ye=oe.tukey.cdf(Ke,ge,ye)-me,ze,Xe=1;Xe<$e;Xe++){ze=Ke-Ye*(Ke-ke)/(Ye-je),je=Ye,ke=Ke,ze<0&&(ze=0,Ye=-me),Ye=oe.tukey.cdf(ze,ge,ye)-me,Ke=ze;var Je=ce.abs(Ke-ke);if(Je<Ne)return ze}throw new Error("tukey.inv failed to converge")}})}(ne,Math),function(oe,ce){var ue=Array.prototype.push,Ae=oe.utils.isArray;function pe(xe){return Ae(xe)||xe instanceof oe}oe.extend({add:function(me,ge){return pe(ge)?(pe(ge[0])||(ge=[ge]),oe.map(me,function(ye,Se,Te){return ye+ge[Se][Te]})):oe.map(me,function(ye){return ye+ge})},subtract:function(me,ge){return pe(ge)?(pe(ge[0])||(ge=[ge]),oe.map(me,function(ye,Se,Te){return ye-ge[Se][Te]||0})):oe.map(me,function(ye){return ye-ge})},divide:function(me,ge){return pe(ge)?(pe(ge[0])||(ge=[ge]),oe.multiply(me,oe.inv(ge))):oe.map(me,function(ye){return ye/ge})},multiply:function(me,ge){var ye,Se,Te,Ne,$e,ke,je,Ke;if(me.length===void 0&&ge.length===void 0)return me*ge;if($e=me.length,ke=me[0].length,je=oe.zeros($e,Te=pe(ge)?ge[0].length:ke),Ke=0,pe(ge)){for(;Ke<Te;Ke++)for(ye=0;ye<$e;ye++){for(Ne=0,Se=0;Se<ke;Se++)Ne+=me[ye][Se]*ge[Se][Ke];je[ye][Ke]=Ne}return $e===1&&Ke===1?je[0][0]:je}return oe.map(me,function(Ye){return Ye*ge})},outer:function(me,ge){return oe.multiply(me.map(function(ye){return[ye]}),[ge])},dot:function(me,ge){pe(me[0])||(me=[me]),pe(ge[0])||(ge=[ge]);for(var ye=me[0].length===1&&me.length!==1?oe.transpose(me):me,Se=ge[0].length===1&&ge.length!==1?oe.transpose(ge):ge,Te=[],Ne=0,$e=ye.length,ke=ye[0].length,je,Ke;Ne<$e;Ne++){for(Te[Ne]=[],je=0,Ke=0;Ke<ke;Ke++)je+=ye[Ne][Ke]*Se[Ne][Ke];Te[Ne]=je}return Te.length===1?Te[0]:Te},pow:function(me,ge){return oe.map(me,function(ye){return ce.pow(ye,ge)})},exp:function(me){return oe.map(me,function(ge){return ce.exp(ge)})},log:function(me){return oe.map(me,function(ge){return ce.log(ge)})},abs:function(me){return oe.map(me,function(ge){return ce.abs(ge)})},norm:function(me,ge){var ye=0,Se=0;for(isNaN(ge)&&(ge=2),pe(me[0])&&(me=me[0]);Se<me.length;Se++)ye+=ce.pow(ce.abs(me[Se]),ge);return ce.pow(ye,1/ge)},angle:function(me,ge){return ce.acos(oe.dot(me,ge)/(oe.norm(me)*oe.norm(ge)))},aug:function(me,ge){var ye=[],Se;for(Se=0;Se<me.length;Se++)ye.push(me[Se].slice());for(Se=0;Se<ye.length;Se++)ue.apply(ye[Se],ge[Se]);return ye},inv:function(me){for(var ge=me.length,ye=me[0].length,Se=oe.identity(ge,ye),Te=oe.gauss_jordan(me,Se),Ne=[],$e=0,ke;$e<ge;$e++)for(Ne[$e]=[],ke=ye;ke<Te[0].length;ke++)Ne[$e][ke-ye]=Te[$e][ke];return Ne},det:function xe(me){if(me.length===2)return me[0][0]*me[1][1]-me[0][1]*me[1][0];for(var ge=0,ye=0;ye<me.length;ye++){for(var Se=[],Te=1;Te<me.length;Te++){Se[Te-1]=[];for(var Ne=0;Ne<me.length;Ne++)Ne<ye?Se[Te-1][Ne]=me[Te][Ne]:Ne>ye&&(Se[Te-1][Ne-1]=me[Te][Ne])}var $e=ye%2?-1:1;ge+=xe(Se)*me[0][ye]*$e}return ge},gauss_elimination:function(me,ge){var ye=0,Se=0,Te=me.length,Ne=me[0].length,$e=1,ke=0,je=[],Ke,Ye,ze,Xe;for(me=oe.aug(me,ge),Ke=me[0].length,ye=0;ye<Te;ye++){for(Ye=me[ye][ye],Se=ye,Xe=ye+1;Xe<Ne;Xe++)Ye<ce.abs(me[Xe][ye])&&(Ye=me[Xe][ye],Se=Xe);if(Se!=ye)for(Xe=0;Xe<Ke;Xe++)ze=me[ye][Xe],me[ye][Xe]=me[Se][Xe],me[Se][Xe]=ze;for(Se=ye+1;Se<Te;Se++)for($e=me[Se][ye]/me[ye][ye],Xe=ye;Xe<Ke;Xe++)me[Se][Xe]=me[Se][Xe]-$e*me[ye][Xe]}for(ye=Te-1;ye>=0;ye--){for(ke=0,Se=ye+1;Se<=Te-1;Se++)ke=ke+je[Se]*me[ye][Se];je[ye]=(me[ye][Ke-1]-ke)/me[ye][ye]}return je},gauss_jordan:function(me,ge){var ye=oe.aug(me,ge),Se=ye.length,Te=ye[0].length,Ne=0,$e,ke,je;for(ke=0;ke<Se;ke++){var Ke=ke;for(je=ke+1;je<Se;je++)ce.abs(ye[je][ke])>ce.abs(ye[Ke][ke])&&(Ke=je);var Ye=ye[ke];for(ye[ke]=ye[Ke],ye[Ke]=Ye,je=ke+1;je<Se;je++)for(Ne=ye[je][ke]/ye[ke][ke],$e=ke;$e<Te;$e++)ye[je][$e]-=ye[ke][$e]*Ne}for(ke=Se-1;ke>=0;ke--){for(Ne=ye[ke][ke],je=0;je<ke;je++)for($e=Te-1;$e>ke-1;$e--)ye[je][$e]-=ye[ke][$e]*ye[je][ke]/Ne;for(ye[ke][ke]/=Ne,$e=Se;$e<Te;$e++)ye[ke][$e]/=Ne}return ye},triaUpSolve:function(me,ge){var ye=me[0].length,Se=oe.zeros(1,ye)[0],Te,Ne=!1;return ge[0].length!=null&&(ge=ge.map(function($e){return $e[0]}),Ne=!0),oe.arange(ye-1,-1,-1).forEach(function($e){Te=oe.arange($e+1,ye).map(function(ke){return Se[ke]*me[$e][ke]}),Se[$e]=(ge[$e]-oe.sum(Te))/me[$e][$e]}),Ne?Se.map(function($e){return[$e]}):Se},triaLowSolve:function(me,ge){var ye=me[0].length,Se=oe.zeros(1,ye)[0],Te,Ne=!1;return ge[0].length!=null&&(ge=ge.map(function($e){return $e[0]}),Ne=!0),oe.arange(ye).forEach(function($e){Te=oe.arange($e).map(function(ke){return me[$e][ke]*Se[ke]}),Se[$e]=(ge[$e]-oe.sum(Te))/me[$e][$e]}),Ne?Se.map(function($e){return[$e]}):Se},lu:function(me){var ge=me.length,ye=oe.identity(ge),Se=oe.zeros(me.length,me[0].length),Te;return oe.arange(ge).forEach(function(Ne){Se[0][Ne]=me[0][Ne]}),oe.arange(1,ge).forEach(function(Ne){oe.arange(Ne).forEach(function($e){Te=oe.arange($e).map(function(ke){return ye[Ne][ke]*Se[ke][$e]}),ye[Ne][$e]=(me[Ne][$e]-oe.sum(Te))/Se[$e][$e]}),oe.arange(Ne,ge).forEach(function($e){Te=oe.arange(Ne).map(function(ke){return ye[Ne][ke]*Se[ke][$e]}),Se[Ne][$e]=me[Te.length][$e]-oe.sum(Te)})}),[ye,Se]},cholesky:function(me){var ge=me.length,ye=oe.zeros(me.length,me[0].length),Se;return oe.arange(ge).forEach(function(Te){Se=oe.arange(Te).map(function(Ne){return ce.pow(ye[Te][Ne],2)}),ye[Te][Te]=ce.sqrt(me[Te][Te]-oe.sum(Se)),oe.arange(Te+1,ge).forEach(function(Ne){Se=oe.arange(Te).map(function($e){return ye[Te][$e]*ye[Ne][$e]}),ye[Ne][Te]=(me[Te][Ne]-oe.sum(Se))/ye[Te][Te]})}),ye},gauss_jacobi:function(me,ge,ye,Se){for(var Te=0,Ne=0,$e=me.length,ke=[],je=[],Ke=[],Ye,ze,Xe,Je;Te<$e;Te++)for(ke[Te]=[],je[Te]=[],Ke[Te]=[],Ne=0;Ne<$e;Ne++)Te>Ne?(ke[Te][Ne]=me[Te][Ne],je[Te][Ne]=Ke[Te][Ne]=0):Te<Ne?(je[Te][Ne]=me[Te][Ne],ke[Te][Ne]=Ke[Te][Ne]=0):(Ke[Te][Ne]=me[Te][Ne],ke[Te][Ne]=je[Te][Ne]=0);for(Xe=oe.multiply(oe.multiply(oe.inv(Ke),oe.add(ke,je)),-1),ze=oe.multiply(oe.inv(Ke),ge),Ye=ye,Je=oe.add(oe.multiply(Xe,ye),ze),Te=2;ce.abs(oe.norm(oe.subtract(Je,Ye)))>Se;)Ye=Je,Je=oe.add(oe.multiply(Xe,Ye),ze),Te++;return Je},gauss_seidel:function(me,ge,ye,Se){for(var Te=0,Ne=me.length,$e=[],ke=[],je=[],Ke,Ye,ze,Xe,Je;Te<Ne;Te++)for($e[Te]=[],ke[Te]=[],je[Te]=[],Ke=0;Ke<Ne;Ke++)Te>Ke?($e[Te][Ke]=me[Te][Ke],ke[Te][Ke]=je[Te][Ke]=0):Te<Ke?(ke[Te][Ke]=me[Te][Ke],$e[Te][Ke]=je[Te][Ke]=0):(je[Te][Ke]=me[Te][Ke],$e[Te][Ke]=ke[Te][Ke]=0);for(Xe=oe.multiply(oe.multiply(oe.inv(oe.add(je,$e)),ke),-1),ze=oe.multiply(oe.inv(oe.add(je,$e)),ge),Ye=ye,Je=oe.add(oe.multiply(Xe,ye),ze),Te=2;ce.abs(oe.norm(oe.subtract(Je,Ye)))>Se;)Ye=Je,Je=oe.add(oe.multiply(Xe,Ye),ze),Te=Te+1;return Je},SOR:function(me,ge,ye,Se,Te){for(var Ne=0,$e=me.length,ke=[],je=[],Ke=[],Ye,ze,Xe,Je,rt;Ne<$e;Ne++)for(ke[Ne]=[],je[Ne]=[],Ke[Ne]=[],Ye=0;Ye<$e;Ye++)Ne>Ye?(ke[Ne][Ye]=me[Ne][Ye],je[Ne][Ye]=Ke[Ne][Ye]=0):Ne<Ye?(je[Ne][Ye]=me[Ne][Ye],ke[Ne][Ye]=Ke[Ne][Ye]=0):(Ke[Ne][Ye]=me[Ne][Ye],ke[Ne][Ye]=je[Ne][Ye]=0);for(Je=oe.multiply(oe.inv(oe.add(Ke,oe.multiply(ke,Te))),oe.subtract(oe.multiply(Ke,1-Te),oe.multiply(je,Te))),Xe=oe.multiply(oe.multiply(oe.inv(oe.add(Ke,oe.multiply(ke,Te))),ge),Te),ze=ye,rt=oe.add(oe.multiply(Je,ye),Xe),Ne=2;ce.abs(oe.norm(oe.subtract(rt,ze)))>Se;)ze=rt,rt=oe.add(oe.multiply(Je,ze),Xe),Ne++;return rt},householder:function(me){for(var ge=me.length,ye=me[0].length,Se=0,Te=[],Ne=[],$e,ke,je,Ke,Ye;Se<ge-1;Se++){for($e=0,Ke=Se+1;Ke<ye;Ke++)$e+=me[Ke][Se]*me[Ke][Se];for(Ye=me[Se+1][Se]>0?-1:1,$e=Ye*ce.sqrt($e),ke=ce.sqrt(($e*$e-me[Se+1][Se]*$e)/2),Te=oe.zeros(ge,1),Te[Se+1][0]=(me[Se+1][Se]-$e)/(2*ke),je=Se+2;je<ge;je++)Te[je][0]=me[je][Se]/(2*ke);Ne=oe.subtract(oe.identity(ge,ye),oe.multiply(oe.multiply(Te,oe.transpose(Te)),2)),me=oe.multiply(Ne,oe.multiply(me,Ne))}return me},QR:function(){var xe=oe.sum,me=oe.arange;function ge(ye){var Se=ye.length,Te=ye[0].length,Ne=oe.zeros(Te,Te);ye=oe.copy(ye);var $e,ke,je;for(ke=0;ke<Te;ke++){for(Ne[ke][ke]=ce.sqrt(xe(me(Se).map(function(Ke){return ye[Ke][ke]*ye[Ke][ke]}))),$e=0;$e<Se;$e++)ye[$e][ke]=ye[$e][ke]/Ne[ke][ke];for(je=ke+1;je<Te;je++)for(Ne[ke][je]=xe(me(Se).map(function(Ke){return ye[Ke][ke]*ye[Ke][je]})),$e=0;$e<Se;$e++)ye[$e][je]=ye[$e][je]-ye[$e][ke]*Ne[ke][je]}return[ye,Ne]}return ge}(),lstsq:function(){function xe(ge){ge=oe.copy(ge);var ye=ge.length,Se=oe.identity(ye);return oe.arange(ye-1,-1,-1).forEach(function(Te){oe.sliceAssign(Se,{row:Te},oe.divide(oe.slice(Se,{row:Te}),ge[Te][Te])),oe.sliceAssign(ge,{row:Te},oe.divide(oe.slice(ge,{row:Te}),ge[Te][Te])),oe.arange(Te).forEach(function(Ne){var $e=oe.multiply(ge[Ne][Te],-1),ke=oe.slice(ge,{row:Ne}),je=oe.multiply(oe.slice(ge,{row:Te}),$e);oe.sliceAssign(ge,{row:Ne},oe.add(ke,je));var Ke=oe.slice(Se,{row:Ne}),Ye=oe.multiply(oe.slice(Se,{row:Te}),$e);oe.sliceAssign(Se,{row:Ne},oe.add(Ke,Ye))})}),Se}function me(ge,ye){var Se=!1;ye[0].length===void 0&&(ye=ye.map(function(Je){return[Je]}),Se=!0);var Te=oe.QR(ge),Ne=Te[0],$e=Te[1],ke=ge[0].length,je=oe.slice(Ne,{col:{end:ke}}),Ke=oe.slice($e,{row:{end:ke}}),Ye=xe(Ke),ze=oe.transpose(je);ze[0].length===void 0&&(ze=[ze]);var Xe=oe.multiply(oe.multiply(Ye,ze),ye);return Xe.length===void 0&&(Xe=[[Xe]]),Se?Xe.map(function(Je){return Je[0]}):Xe}return me}(),jacobi:function(me){for(var ge=1,ye=me.length,Se=oe.identity(ye,ye),Te=[],Ne,$e,ke,je,Ke,Ye,ze,Xe;ge===1;){for(Ye=me[0][1],je=0,Ke=1,$e=0;$e<ye;$e++)for(ke=0;ke<ye;ke++)$e!=ke&&Ye<ce.abs(me[$e][ke])&&(Ye=ce.abs(me[$e][ke]),je=$e,Ke=ke);for(me[je][je]===me[Ke][Ke]?ze=me[je][Ke]>0?ce.PI/4:-ce.PI/4:ze=ce.atan(2*me[je][Ke]/(me[je][je]-me[Ke][Ke]))/2,Xe=oe.identity(ye,ye),Xe[je][je]=ce.cos(ze),Xe[je][Ke]=-ce.sin(ze),Xe[Ke][je]=ce.sin(ze),Xe[Ke][Ke]=ce.cos(ze),Se=oe.multiply(Se,Xe),Ne=oe.multiply(oe.multiply(oe.inv(Xe),me),Xe),me=Ne,ge=0,$e=1;$e<ye;$e++)for(ke=1;ke<ye;ke++)$e!=ke&&ce.abs(me[$e][ke])>.001&&(ge=1)}for($e=0;$e<ye;$e++)Te.push(me[$e][$e]);return[Se,Te]},rungekutta:function(me,ge,ye,Se,Te,Ne){var $e,ke,je,Ke,Ye;if(Ne===2)for(;Se<=ye;)$e=ge*me(Se,Te),ke=ge*me(Se+ge,Te+$e),je=Te+($e+ke)/2,Te=je,Se=Se+ge;if(Ne===4)for(;Se<=ye;)$e=ge*me(Se,Te),ke=ge*me(Se+ge/2,Te+$e/2),Ke=ge*me(Se+ge/2,Te+ke/2),Ye=ge*me(Se+ge,Te+Ke),je=Te+($e+2*ke+2*Ke+Ye)/6,Te=je,Se=Se+ge;return Te},romberg:function(me,ge,ye,Se){for(var Te=0,Ne=(ye-ge)/2,$e=[],ke=[],je=[],Ke,Ye,ze,Xe,Je;Te<Se/2;){for(Je=me(ge),ze=ge,Xe=0;ze<=ye;ze=ze+Ne,Xe++)$e[Xe]=ze;for(Ke=$e.length,ze=1;ze<Ke-1;ze++)Je+=(ze%2!==0?4:2)*me($e[ze]);Je=Ne/3*(Je+me(ye)),je[Te]=Je,Ne/=2,Te++}for(Ye=je.length,Ke=1;Ye!==1;){for(ze=0;ze<Ye-1;ze++)ke[ze]=(ce.pow(4,Ke)*je[ze+1]-je[ze])/(ce.pow(4,Ke)-1);Ye=ke.length,je=ke,ke=[],Ke++}return je},richardson:function(me,ge,ye,Se){function Te(rt,Ze){for(var et=0,nt=rt.length,Ge;et<nt;et++)rt[et]===Ze&&(Ge=et);return Ge}for(var Ne=ce.abs(ye-me[Te(me,ye)+1]),$e=0,ke=[],je=[],Ke,Ye,ze,Xe,Je;Se>=Ne;)Ke=Te(me,ye+Se),Ye=Te(me,ye),ke[$e]=(ge[Ke]-2*ge[Ye]+ge[2*Ye-Ke])/(Se*Se),Se/=2,$e++;for(Xe=ke.length,ze=1;Xe!=1;){for(Je=0;Je<Xe-1;Je++)je[Je]=(ce.pow(4,ze)*ke[Je+1]-ke[Je])/(ce.pow(4,ze)-1);Xe=je.length,ke=je,je=[],ze++}return ke},simpson:function(me,ge,ye,Se){for(var Te=(ye-ge)/Se,Ne=me(ge),$e=[],ke=ge,je=0,Ke=1,Ye;ke<=ye;ke=ke+Te,je++)$e[je]=ke;for(Ye=$e.length;Ke<Ye-1;Ke++)Ne+=(Ke%2!==0?4:2)*me($e[Ke]);return Te/3*(Ne+me(ye))},hermite:function(me,ge,ye,Se){for(var Te=me.length,Ne=0,$e=0,ke=[],je=[],Ke=[],Ye=[],ze;$e<Te;$e++){for(ke[$e]=1,ze=0;ze<Te;ze++)$e!=ze&&(ke[$e]*=(Se-me[ze])/(me[$e]-me[ze]));for(je[$e]=0,ze=0;ze<Te;ze++)$e!=ze&&(je[$e]+=1/(me[$e]-me[ze]));Ke[$e]=(1-2*(Se-me[$e])*je[$e])*(ke[$e]*ke[$e]),Ye[$e]=(Se-me[$e])*(ke[$e]*ke[$e]),Ne+=Ke[$e]*ge[$e]+Ye[$e]*ye[$e]}return Ne},lagrange:function(me,ge,ye){for(var Se=0,Te=0,Ne,$e,ke=me.length;Te<ke;Te++){for($e=ge[Te],Ne=0;Ne<ke;Ne++)Te!=Ne&&($e*=(ye-me[Ne])/(me[Te]-me[Ne]));Se+=$e}return Se},cubic_spline:function(me,ge,ye){for(var Se=me.length,Te=0,Ne,$e=[],ke=[],je=[],Ke=[],Ye=[],ze=[],Xe=[];Te<Se-1;Te++)Ye[Te]=me[Te+1]-me[Te];for(je[0]=0,Te=1;Te<Se-1;Te++)je[Te]=3/Ye[Te]*(ge[Te+1]-ge[Te])-3/Ye[Te-1]*(ge[Te]-ge[Te-1]);for(Te=1;Te<Se-1;Te++)$e[Te]=[],ke[Te]=[],$e[Te][Te-1]=Ye[Te-1],$e[Te][Te]=2*(Ye[Te-1]+Ye[Te]),$e[Te][Te+1]=Ye[Te],ke[Te][0]=je[Te];for(Ke=oe.multiply(oe.inv($e),ke),Ne=0;Ne<Se-1;Ne++)ze[Ne]=(ge[Ne+1]-ge[Ne])/Ye[Ne]-Ye[Ne]*(Ke[Ne+1][0]+2*Ke[Ne][0])/3,Xe[Ne]=(Ke[Ne+1][0]-Ke[Ne][0])/(3*Ye[Ne]);for(Ne=0;Ne<Se&&!(me[Ne]>ye);Ne++);return Ne-=1,ge[Ne]+(ye-me[Ne])*ze[Ne]+oe.sq(ye-me[Ne])*Ke[Ne]+(ye-me[Ne])*oe.sq(ye-me[Ne])*Xe[Ne]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(me){var ge=me.length,ye=me[0].length,Se=0,Te,Ne,$e=[],ke=[],je=[],Ke=[],Ye=[],ze=[],Xe=[],Je=[],rt=[],Ze=[];for(Se=0;Se<ge;Se++)$e[Se]=oe.sum(me[Se])/ye;for(Se=0;Se<ye;Se++)for(Xe[Se]=[],Te=0;Te<ge;Te++)Xe[Se][Te]=me[Te][Se]-$e[Te];for(Xe=oe.transpose(Xe),Se=0;Se<ge;Se++)for(Je[Se]=[],Te=0;Te<ge;Te++)Je[Se][Te]=oe.dot([Xe[Se]],[Xe[Te]])/(ye-1);for(je=oe.jacobi(Je),rt=je[0],ke=je[1],Ze=oe.transpose(rt),Se=0;Se<ke.length;Se++)for(Te=Se;Te<ke.length;Te++)ke[Se]<ke[Te]&&(Ne=ke[Se],ke[Se]=ke[Te],ke[Te]=Ne,Ke=Ze[Se],Ze[Se]=Ze[Te],Ze[Te]=Ke);for(ze=oe.transpose(Xe),Se=0;Se<ge;Se++)for(Ye[Se]=[],Te=0;Te<ze.length;Te++)Ye[Se][Te]=oe.dot([Ze[Se]],[ze[Te]]);return[me,ke,Ze,Ye]}}),function(xe){for(var me=0;me<xe.length;me++)(function(ge){oe.fn[ge]=function(ye,Se){var Te=this;return Se?(setTimeout(function(){Se.call(Te,oe.fn[ge].call(Te,ye))},15),this):typeof oe[ge](this,ye)=="number"?oe[ge](this,ye):oe(oe[ge](this,ye))}})(xe[me])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(ne,Math),function(oe,ce){var ue=[].slice,Ae=oe.utils.isNumber,pe=oe.utils.isArray;oe.extend({zscore:function(){var ge=ue.call(arguments);return Ae(ge[1])?(ge[0]-ge[1])/ge[2]:(ge[0]-oe.mean(ge[1]))/oe.stdev(ge[1],ge[2])},ztest:function(){var ge=ue.call(arguments),ye;return pe(ge[1])?(ye=oe.zscore(ge[0],ge[1],ge[3]),ge[2]===1?oe.normal.cdf(-ce.abs(ye),0,1):oe.normal.cdf(-ce.abs(ye),0,1)*2):ge.length>2?(ye=oe.zscore(ge[0],ge[1],ge[2]),ge[3]===1?oe.normal.cdf(-ce.abs(ye),0,1):oe.normal.cdf(-ce.abs(ye),0,1)*2):(ye=ge[0],ge[1]===1?oe.normal.cdf(-ce.abs(ye),0,1):oe.normal.cdf(-ce.abs(ye),0,1)*2)}}),oe.extend(oe.fn,{zscore:function(ge,ye){return(ge-this.mean())/this.stdev(ye)},ztest:function(ge,ye,Se){var Te=ce.abs(this.zscore(ge,Se));return ye===1?oe.normal.cdf(-Te,0,1):oe.normal.cdf(-Te,0,1)*2}}),oe.extend({tscore:function(){var ge=ue.call(arguments);return ge.length===4?(ge[0]-ge[1])/(ge[2]/ce.sqrt(ge[3])):(ge[0]-oe.mean(ge[1]))/(oe.stdev(ge[1],!0)/ce.sqrt(ge[1].length))},ttest:function(){var ge=ue.call(arguments),ye;return ge.length===5?(ye=ce.abs(oe.tscore(ge[0],ge[1],ge[2],ge[3])),ge[4]===1?oe.studentt.cdf(-ye,ge[3]-1):oe.studentt.cdf(-ye,ge[3]-1)*2):Ae(ge[1])?(ye=ce.abs(ge[0]),ge[2]==1?oe.studentt.cdf(-ye,ge[1]-1):oe.studentt.cdf(-ye,ge[1]-1)*2):(ye=ce.abs(oe.tscore(ge[0],ge[1])),ge[2]==1?oe.studentt.cdf(-ye,ge[1].length-1):oe.studentt.cdf(-ye,ge[1].length-1)*2)}}),oe.extend(oe.fn,{tscore:function(ge){return(ge-this.mean())/(this.stdev(!0)/ce.sqrt(this.cols()))},ttest:function(ge,ye){return ye===1?1-oe.studentt.cdf(ce.abs(this.tscore(ge)),this.cols()-1):oe.studentt.cdf(-ce.abs(this.tscore(ge)),this.cols()-1)*2}}),oe.extend({anovafscore:function(){var ge=ue.call(arguments),ye,Se,Te,Ne,$e,ke,je,Ke;if(ge.length===1){for($e=new Array(ge[0].length),je=0;je<ge[0].length;je++)$e[je]=ge[0][je];ge=$e}for(Se=new Array,je=0;je<ge.length;je++)Se=Se.concat(ge[je]);for(Te=oe.mean(Se),ye=0,je=0;je<ge.length;je++)ye=ye+ge[je].length*ce.pow(oe.mean(ge[je])-Te,2);for(ye/=ge.length-1,ke=0,je=0;je<ge.length;je++)for(Ne=oe.mean(ge[je]),Ke=0;Ke<ge[je].length;Ke++)ke+=ce.pow(ge[je][Ke]-Ne,2);return ke/=Se.length-ge.length,ye/ke},anovaftest:function(){var ge=ue.call(arguments),ye,Se,Te,Ne;if(Ae(ge[0]))return 1-oe.centralF.cdf(ge[0],ge[1],ge[2]);var $e=oe.anovafscore(ge);for(ye=ge.length-1,Te=0,Ne=0;Ne<ge.length;Ne++)Te=Te+ge[Ne].length;return Se=Te-ye-1,1-oe.centralF.cdf($e,ye,Se)},ftest:function(ge,ye,Se){return 1-oe.centralF.cdf(ge,ye,Se)}}),oe.extend(oe.fn,{anovafscore:function(){return oe.anovafscore(this.toArray())},anovaftes:function(){var ge=0,ye;for(ye=0;ye<this.length;ye++)ge=ge+this[ye].length;return oe.ftest(this.anovafscore(),this.length-1,ge-this.length)}}),oe.extend({qscore:function(){var ge=ue.call(arguments),ye,Se,Te,Ne,$e;return Ae(ge[0])?(ye=ge[0],Se=ge[1],Te=ge[2],Ne=ge[3],$e=ge[4]):(ye=oe.mean(ge[0]),Se=oe.mean(ge[1]),Te=ge[0].length,Ne=ge[1].length,$e=ge[2]),ce.abs(ye-Se)/($e*ce.sqrt((1/Te+1/Ne)/2))},qtest:function(){var ge=ue.call(arguments),ye;ge.length===3?(ye=ge[0],ge=ge.slice(1)):ge.length===7?(ye=oe.qscore(ge[0],ge[1],ge[2],ge[3],ge[4]),ge=ge.slice(5)):(ye=oe.qscore(ge[0],ge[1],ge[2]),ge=ge.slice(3));var Se=ge[0],Te=ge[1];return 1-oe.tukey.cdf(ye,Te,Se-Te)},tukeyhsd:function(ge){for(var ye=oe.pooledstdev(ge),Se=ge.map(function(Ke){return oe.mean(Ke)}),Te=ge.reduce(function(Ke,Ye){return Ke+Ye.length},0),Ne=[],$e=0;$e<ge.length;++$e)for(var ke=$e+1;ke<ge.length;++ke){var je=oe.qtest(Se[$e],Se[ke],ge[$e].length,ge[ke].length,ye,Te,ge.length);Ne.push([[$e,ke],je])}return Ne}}),oe.extend({normalci:function(){var ge=ue.call(arguments),ye=new Array(2),Se;return ge.length===4?Se=ce.abs(oe.normal.inv(ge[1]/2,0,1)*ge[2]/ce.sqrt(ge[3])):Se=ce.abs(oe.normal.inv(ge[1]/2,0,1)*oe.stdev(ge[2])/ce.sqrt(ge[2].length)),ye[0]=ge[0]-Se,ye[1]=ge[0]+Se,ye},tci:function(){var ge=ue.call(arguments),ye=new Array(2),Se;return ge.length===4?Se=ce.abs(oe.studentt.inv(ge[1]/2,ge[3]-1)*ge[2]/ce.sqrt(ge[3])):Se=ce.abs(oe.studentt.inv(ge[1]/2,ge[2].length-1)*oe.stdev(ge[2],!0)/ce.sqrt(ge[2].length)),ye[0]=ge[0]-Se,ye[1]=ge[0]+Se,ye},significant:function(ge,ye){return ge<ye}}),oe.extend(oe.fn,{normalci:function(ge,ye){return oe.normalci(ge,ye,this.toArray())},tci:function(ge,ye){return oe.tci(ge,ye,this.toArray())}});function xe(me,ge,ye,Se){if(me>1||ye>1||me<=0||ye<=0)throw new Error("Proportions should be greater than 0 and less than 1");var Te=(me*ge+ye*Se)/(ge+Se),Ne=ce.sqrt(Te*(1-Te)*(1/ge+1/Se));return(me-ye)/Ne}oe.extend(oe.fn,{oneSidedDifferenceOfProportions:function(ge,ye,Se,Te){var Ne=xe(ge,ye,Se,Te);return oe.ztest(Ne,1)},twoSidedDifferenceOfProportions:function(ge,ye,Se,Te){var Ne=xe(ge,ye,Se,Te);return oe.ztest(Ne,2)}})}(ne,Math),ne.models=function(){function oe(xe){var me=xe[0].length,ge=ne.arange(me).map(function(ye){var Se=ne.arange(me).filter(function(Te){return Te!==ye});return ce(ne.col(xe,ye).map(function(Te){return Te[0]}),ne.col(xe,Se))});return ge}function ce(xe,me){var ge=xe.length,ye=me[0].length-1,Se=ge-ye-1,Te=ne.lstsq(me,xe),Ne=ne.multiply(me,Te.map(function(Xe){return[Xe]})).map(function(Xe){return Xe[0]}),$e=ne.subtract(xe,Ne),ke=ne.mean(xe),je=ne.sum(Ne.map(function(Xe){return Math.pow(Xe-ke,2)})),Ke=ne.sum(xe.map(function(Xe,Je){return Math.pow(Xe-Ne[Je],2)})),Ye=je+Ke,ze=je/Ye;return{exog:me,endog:xe,nobs:ge,df_model:ye,df_resid:Se,coef:Te,predict:Ne,resid:$e,ybar:ke,SST:Ye,SSE:je,SSR:Ke,R2:ze}}function ue(xe){var me=oe(xe.exog),ge=Math.sqrt(xe.SSR/xe.df_resid),ye=me.map(function(ke){var je=ke.SST,Ke=ke.R2;return ge/Math.sqrt(je*(1-Ke))}),Se=xe.coef.map(function(ke,je){return(ke-0)/ye[je]}),Te=Se.map(function(ke){var je=ne.studentt.cdf(ke,xe.df_resid);return(je>.5?1-je:je)*2}),Ne=ne.studentt.inv(.975,xe.df_resid),$e=xe.coef.map(function(ke,je){var Ke=Ne*ye[je];return[ke-Ke,ke+Ke]});return{se:ye,t:Se,p:Te,sigmaHat:ge,interval95:$e}}function Ae(xe){var me=xe.R2/xe.df_model/((1-xe.R2)/xe.df_resid),ge=function(Se,Te,Ne){return ne.beta.cdf(Se/(Ne/Te+Se),Te/2,Ne/2)},ye=1-ge(me,xe.df_model,xe.df_resid);return{F_statistic:me,pvalue:ye}}function pe(xe,me){var ge=ce(xe,me),ye=ue(ge),Se=Ae(ge),Te=1-(1-ge.R2)*((ge.nobs-1)/ge.df_resid);return ge.t=ye,ge.f=Se,ge.adjust_R2=Te,ge}return{ols:pe}}(),ne.extend({buildxmatrix:function(){for(var ce=new Array(arguments.length),ue=0;ue<arguments.length;ue++){var Ae=[1];ce[ue]=Ae.concat(arguments[ue])}return ne(ce)},builddxmatrix:function(){for(var ce=new Array(arguments[0].length),ue=0;ue<arguments[0].length;ue++){var Ae=[1];ce[ue]=Ae.concat(arguments[0][ue])}return ne(ce)},buildjxmatrix:function(ce){for(var ue=new Array(ce.length),Ae=0;Ae<ce.length;Ae++)ue[Ae]=ce[Ae];return ne.builddxmatrix(ue)},buildymatrix:function(ce){return ne(ce).transpose()},buildjymatrix:function(ce){return ce.transpose()},matrixmult:function(ce,ue){var Ae,pe,xe,me,ge;if(ce.cols()==ue.rows()){if(ue.rows()>1){for(me=[],Ae=0;Ae<ce.rows();Ae++)for(me[Ae]=[],pe=0;pe<ue.cols();pe++){for(ge=0,xe=0;xe<ce.cols();xe++)ge+=ce.toArray()[Ae][xe]*ue.toArray()[xe][pe];me[Ae][pe]=ge}return ne(me)}for(me=[],Ae=0;Ae<ce.rows();Ae++)for(me[Ae]=[],pe=0;pe<ue.cols();pe++){for(ge=0,xe=0;xe<ce.cols();xe++)ge+=ce.toArray()[Ae][xe]*ue.toArray()[pe];me[Ae][pe]=ge}return ne(me)}},regress:function(ce,ue){var Ae=ne.xtranspxinv(ce),pe=ce.transpose(),xe=ne.matrixmult(ne(Ae),pe);return ne.matrixmult(xe,ue)},regresst:function(ce,ue,Ae){var pe=ne.regress(ce,ue),xe={};xe.anova={};var me=ne.jMatYBar(ce,pe);xe.yBar=me;var ge=ue.mean();xe.anova.residuals=ne.residuals(ue,me),xe.anova.ssr=ne.ssr(me,ge),xe.anova.msr=xe.anova.ssr/(ce[0].length-1),xe.anova.sse=ne.sse(ue,me),xe.anova.mse=xe.anova.sse/(ue.length-(ce[0].length-1)-1),xe.anova.sst=ne.sst(ue,ge),xe.anova.mst=xe.anova.sst/(ue.length-1),xe.anova.r2=1-xe.anova.sse/xe.anova.sst,xe.anova.r2<0&&(xe.anova.r2=0),xe.anova.fratio=xe.anova.msr/xe.anova.mse,xe.anova.pvalue=ne.anovaftest(xe.anova.fratio,ce[0].length-1,ue.length-(ce[0].length-1)-1),xe.anova.rmse=Math.sqrt(xe.anova.mse),xe.anova.r2adj=1-xe.anova.mse/xe.anova.mst,xe.anova.r2adj<0&&(xe.anova.r2adj=0),xe.stats=new Array(ce[0].length);for(var ye=ne.xtranspxinv(ce),Se,Te,Ne,$e=0;$e<pe.length;$e++)Se=Math.sqrt(xe.anova.mse*Math.abs(ye[$e][$e])),Te=Math.abs(pe[$e]/Se),Ne=ne.ttest(Te,ue.length-ce[0].length-1,Ae),xe.stats[$e]=[pe[$e],Se,Te,Ne];return xe.regress=pe,xe},xtranspx:function(ce){return ne.matrixmult(ce.transpose(),ce)},xtranspxinv:function(ce){var ue=ne.matrixmult(ce.transpose(),ce),Ae=ne.inv(ue);return Ae},jMatYBar:function(ce,ue){var Ae=ne.matrixmult(ce,ue);return new ne(Ae)},residuals:function(ce,ue){return ne.matrixsubtract(ce,ue)},ssr:function(ce,ue){for(var Ae=0,pe=0;pe<ce.length;pe++)Ae+=Math.pow(ce[pe]-ue,2);return Ae},sse:function(ce,ue){for(var Ae=0,pe=0;pe<ce.length;pe++)Ae+=Math.pow(ce[pe]-ue[pe],2);return Ae},sst:function(ce,ue){for(var Ae=0,pe=0;pe<ce.length;pe++)Ae+=Math.pow(ce[pe]-ue,2);return Ae},matrixsubtract:function(ce,ue){for(var Ae=new Array(ce.length),pe=0;pe<ce.length;pe++){Ae[pe]=new Array(ce[pe].length);for(var xe=0;xe<ce[pe].length;xe++)Ae[pe][xe]=ce[pe][xe]-ue[pe][xe]}return ne(Ae)}}),ne.jStat=ne,ne})})(jstat);var jstatExports=jstat.exports;const FormulaError$c=requireError(),TextFunctions$1=text$1,{FormulaHelpers:FormulaHelpers$9,Types:Types$7}=requireHelpers(),H$7=FormulaHelpers$9,bessel=bessel$1,jStat$1=jstatExports,MAX_OCT=536870911,MIN_OCT=-536870912,MAX_BIN=511,MIN_BIN=-512,numberRegex=/^\s?[+-]?\s?[0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?\s?$/,IMWithoutRealRegex=/^\s?([+-]?\s?([0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?)?)\s?[ij]\s?$/,IMRegex=/^\s?([+-]?\s?[0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?)\s?([+-]?\s?([0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?)?)\s?[ij]\s?$/;function parseIM(K){K=H$7.accept(K);let J=0,ne=0,oe="i";if(typeof K=="number")return{real:K,im:ne,unit:oe};if(typeof K=="boolean")throw FormulaError$c.VALUE;let ce=K.match(numberRegex);if(ce)return J=Number(ce[0]),{real:J,im:ne,unit:oe};if(ce=K.match(IMWithoutRealRegex),ce)return ne=Number(/^\s?[+-]?\s?$/.test(ce[1])?ce[1]+"1":ce[1]),oe=ce[0].slice(-1),{real:J,im:ne,unit:oe};if(ce=K.match(IMRegex),ce)return J=Number(ce[1]),ne=Number(/^\s?[+-]?\s?$/.test(ce[3])?ce[3]+"1":ce[3]),oe=ce[0].slice(-1),{real:J,im:ne,unit:oe};throw FormulaError$c.NUM}const EngineeringFunctions={BESSELI:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN),J=Math.trunc(J),J<0)throw FormulaError$c.NUM;return bessel.besseli(K,J)},BESSELJ:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN),J=Math.trunc(J),J<0)throw FormulaError$c.NUM;return bessel.besselj(K,J)},BESSELK:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN),J=Math.trunc(J),J<0)throw FormulaError$c.NUM;return bessel.besselk(K,J)},BESSELY:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN),J=Math.trunc(J),J<0)throw FormulaError$c.NUM;return bessel.bessely(K,J)},BIN2DEC:K=>{K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN);let J=K.toString();if(J.length>10)throw FormulaError$c.NUM;return J.length===10&&J.substring(0,1)==="1"?parseInt(J.substring(1),2)+MIN_BIN:parseInt(J,2)},BIN2HEX:(K,J)=>{K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN,null);const ne=K.toString();if(ne.length>10)throw FormulaError$c.NUM;if(ne.length===10&&ne.substring(0,1)==="1")return(parseInt(ne.substring(1),2)+0xfffffffe00).toString(16).toUpperCase();const oe=parseInt(K,2).toString(16);if(J==null)return oe.toUpperCase();if(J<0)throw FormulaError$c.NUM;if(J=Math.trunc(J),J>=oe.length)return(TextFunctions$1.REPT("0",J-oe.length)+oe).toUpperCase();throw FormulaError$c.NUM},BIN2OCT:(K,J)=>{K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER,null);let ne=K.toString();if(ne.length>10)throw FormulaError$c.NUM;if(ne.length===10&&ne.substr(0,1)==="1")return(parseInt(ne.substr(1),2)+1073741312).toString(8);let oe=parseInt(K,2).toString(8);if(J==null)return oe.toUpperCase();if(J<0)throw FormulaError$c.NUM;if(J=Math.trunc(J),J>=oe.length)return TextFunctions$1.REPT("0",J-oe.length)+oe;throw FormulaError$c.NUM},BITAND:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER),K<0||J<0||Math.floor(K)!==K||Math.floor(J)!==J||K>0xffffffffffff||J>0xffffffffffff)throw FormulaError$c.NUM;return K&J},BITLSHIFT:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER),J=Math.trunc(J),Math.abs(J)>53||K<0||Math.floor(K)!==K||K>0xffffffffffff)throw FormulaError$c.NUM;const ne=J>=0?K*2**J:Math.trunc(K/2**-J);if(ne>0xffffffffffff)throw FormulaError$c.NUM;return ne},BITOR:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER),K<0||J<0||Math.floor(K)!==K||Math.floor(J)!==J||K>0xffffffffffff||J>0xffffffffffff)throw FormulaError$c.NUM;return K|J},BITRSHIFT:(K,J)=>(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER),EngineeringFunctions.BITLSHIFT(K,-J)),BITXOR:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER),K<0||K>0xffffffffffff||Math.floor(K)!==K||J<0||J>0xffffffffffff||Math.floor(J)!==J)throw FormulaError$c.NUM;return K^J},COMPLEX:(K,J,ne)=>{if(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN),ne=H$7.accept(ne,Types$7.STRING,"i"),ne!=="i"&&ne!=="j")throw FormulaError$c.VALUE;if(K===0&&J===0)return 0;if(K===0)return J===1?ne:J===-1?"-"+ne:J.toString()+ne;if(J===0)return K.toString();{let oe=J>0?"+":"";return J===1?K.toString()+oe+ne:J===-1?K.toString()+oe+"-"+ne:K.toString()+oe+J.toString()+ne}},DEC2BIN:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER,null),K<MIN_BIN||K>MAX_BIN)throw FormulaError$c.NUM;if(K<0)return"1"+TextFunctions$1.REPT("0",9-(512+K).toString(2).length)+(512+K).toString(2);let ne=parseInt(K,10).toString(2);if(J==null)return ne;if(J=Math.trunc(J),J<=0||J<ne.length)throw FormulaError$c.NUM;return TextFunctions$1.REPT("0",J-ne.length)+ne},DEC2HEX:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER,null),K<-549755813888||K>549755813888)throw FormulaError$c.NUM;if(K<0)return(1099511627776+K).toString(16).toUpperCase();let ne=parseInt(K,10).toString(16);if(J==null)return ne.toUpperCase();if(J=Math.trunc(J),J<=0||J<ne.length)throw FormulaError$c.NUM;return TextFunctions$1.REPT("0",J-ne.length)+ne.toUpperCase()},DEC2OCT:(K,J)=>{if(K=H$7.accept(K,Types$7.NUMBER),J=H$7.accept(J,Types$7.NUMBER,null),K<-536870912||K>536870912)throw FormulaError$c.NUM;if(K<0)return(K+1073741824).toString(8);let ne=parseInt(K,10).toString(8);if(J==null)return ne.toUpperCase();if(J=Math.trunc(J),J<=0||J<ne.length)throw FormulaError$c.NUM;return TextFunctions$1.REPT("0",J-ne.length)+ne},DELTA:(K,J)=>(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN,0),K===J?1:0),ERF:(K,J)=>(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN,0),jStat$1.erf(K)),ERFC:K=>(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),jStat$1.erfc(K)),GESTEP:(K,J)=>(K=H$7.accept(K,Types$7.NUMBER_NO_BOOLEAN),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN,0),K>=J?1:0),HEX2BIN:(K,J)=>{if(K=H$7.accept(K,Types$7.STRING),J=H$7.accept(J,Types$7.NUMBER,null),K.length>10||!/^[0-9a-fA-F]*$/.test(K))throw FormulaError$c.NUM;let ne=K.length===10&&K.substr(0,1).toLowerCase()==="f",oe=ne?parseInt(K,16)-1099511627776:parseInt(K,16);if(oe<MIN_BIN||oe>MAX_BIN)throw FormulaError$c.NUM;if(ne)return"1"+TextFunctions$1.REPT("0",9-(oe+512).toString(2).length)+(oe+512).toString(2);let ce=oe.toString(2);if(J==null)return ce;if(J=Math.trunc(J),J<=0||J<ce.length)throw FormulaError$c.NUM;return TextFunctions$1.REPT("0",J-ce.length)+ce},HEX2DEC:K=>{if(K=H$7.accept(K,Types$7.STRING),K.length>10||!/^[0-9a-fA-F]*$/.test(K))throw FormulaError$c.NUM;let J=parseInt(K,16);return J>=549755813888?J-1099511627776:J},HEX2OCT:(K,J)=>{if(K=H$7.accept(K,Types$7.STRING),K.length>10||!/^[0-9a-fA-F]*$/.test(K))throw FormulaError$c.NUM;let ne=EngineeringFunctions.HEX2DEC(K);if(ne>MAX_OCT||ne<MIN_OCT)throw FormulaError$c.NUM;return EngineeringFunctions.DEC2OCT(ne,J)},IMABS:K=>{const{real:J,im:ne}=parseIM(K);return Math.sqrt(Math.pow(J,2)+Math.pow(ne,2))},IMAGINARY:K=>parseIM(K).im,IMARGUMENT:K=>{const{real:J,im:ne}=parseIM(K);if(J===0&&ne===0)throw FormulaError$c.DIV0;return J===0&&ne>0?Math.PI/2:J===0&&ne<0?-Math.PI/2:J<0&&ne===0?Math.PI:J>0&&ne===0?0:J>0?Math.atan(ne/J):J<0&&ne>0?Math.atan(ne/J)+Math.PI:Math.atan(ne/J)-Math.PI},IMCONJUGATE:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);return ne!==0?EngineeringFunctions.COMPLEX(J,-ne,oe):""+J},IMCOS:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.cos(J)*(Math.exp(ne)+Math.exp(-ne))/2,ue=-Math.sin(J)*(Math.exp(ne)-Math.exp(-ne))/2;return EngineeringFunctions.COMPLEX(ce,ue,oe)},IMCOSH:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.cos(ne)*(Math.exp(J)+Math.exp(-J))/2,ue=-Math.sin(ne)*(Math.exp(J)-Math.exp(-J))/2;return EngineeringFunctions.COMPLEX(ce,-ue,oe)},IMCOT:K=>{K=H$7.accept(K);let J=EngineeringFunctions.IMCOS(K),ne=EngineeringFunctions.IMSIN(K);return EngineeringFunctions.IMDIV(J,ne)},IMCSC:K=>(K=H$7.accept(K),EngineeringFunctions.IMDIV("1",EngineeringFunctions.IMSIN(K))),IMCSCH:K=>(K=H$7.accept(K),EngineeringFunctions.IMDIV("1",EngineeringFunctions.IMSINH(K))),IMDIV:(K,J)=>{const ne=parseIM(K),oe=ne.real,ce=ne.im,ue=ne.unit,Ae=parseIM(J),pe=Ae.real,xe=Ae.im,me=Ae.unit;if(pe===0&&xe===0||ue!==me)throw FormulaError$c.NUM;let ge=ue,ye=Math.pow(pe,2)+Math.pow(xe,2);return EngineeringFunctions.COMPLEX((oe*pe+ce*xe)/ye,(ce*pe-oe*xe)/ye,ge)},IMEXP:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.exp(J);return EngineeringFunctions.COMPLEX(ce*Math.cos(ne),ce*Math.sin(ne),oe)},IMLN:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);return EngineeringFunctions.COMPLEX(Math.log(Math.sqrt(Math.pow(J,2)+Math.pow(ne,2))),Math.atan(ne/J),oe)},IMLOG10:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.log(Math.sqrt(Math.pow(J,2)+Math.pow(ne,2)))/Math.log(10),ue=Math.atan(ne/J)/Math.log(10);return EngineeringFunctions.COMPLEX(ce,ue,oe)},IMLOG2:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.log(Math.sqrt(Math.pow(J,2)+Math.pow(ne,2)))/Math.log(2),ue=Math.atan(ne/J)/Math.log(2);return EngineeringFunctions.COMPLEX(ce,ue,oe)},IMPOWER:(K,J)=>{let{unit:ne}=parseIM(K);J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN);let oe=Math.pow(EngineeringFunctions.IMABS(K),J),ce=EngineeringFunctions.IMARGUMENT(K),ue=oe*Math.cos(J*ce),Ae=oe*Math.sin(J*ce);return EngineeringFunctions.COMPLEX(ue,Ae,ne)},IMPRODUCT:(...K)=>{let J,ne=0;return H$7.flattenParams(K,null,!1,oe=>{if(ne===0)J=H$7.accept(oe),parseIM(J);else{const ce=parseIM(J),ue=ce.real,Ae=ce.im,pe=ce.unit,xe=parseIM(oe),me=xe.real,ge=xe.im,ye=xe.unit;if(pe!==ye)throw FormulaError$c.VALUE;J=EngineeringFunctions.COMPLEX(ue*me-Ae*ge,ue*ge+Ae*me)}ne++},1),J},IMREAL:K=>parseIM(K).real,IMSEC:K=>EngineeringFunctions.IMDIV("1",EngineeringFunctions.IMCOS(K)),IMSECH:K=>EngineeringFunctions.IMDIV("1",EngineeringFunctions.IMCOSH(K)),IMSIN:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.sin(J)*(Math.exp(ne)+Math.exp(-ne))/2,ue=Math.cos(J)*(Math.exp(ne)-Math.exp(-ne))/2;return EngineeringFunctions.COMPLEX(ce,ue,oe)},IMSINH:K=>{const{real:J,im:ne,unit:oe}=parseIM(K);let ce=Math.cos(ne)*(Math.exp(J)-Math.exp(-J))/2,ue=Math.sin(ne)*(Math.exp(J)+Math.exp(-J))/2;return EngineeringFunctions.COMPLEX(ce,ue,oe)},IMSQRT:K=>{const{unit:J}=parseIM(K);let ne=Math.sqrt(EngineeringFunctions.IMABS(K)),oe=EngineeringFunctions.IMARGUMENT(K);return EngineeringFunctions.COMPLEX(ne*Math.cos(oe/2),ne*Math.sin(oe/2),J)},IMSUB:(K,J)=>{const ne=parseIM(K),oe=ne.real,ce=ne.im,ue=ne.unit,Ae=parseIM(J),pe=Ae.real,xe=Ae.im,me=Ae.unit;if(ue!==me)throw FormulaError$c.VALUE;return EngineeringFunctions.COMPLEX(oe-pe,ce-xe,ue)},IMSUM:(...K)=>{let J=0,ne=0,oe;return H$7.flattenParams(K,null,!1,ce=>{const{real:ue,im:Ae,unit:pe}=parseIM(ce);if(oe||(oe=pe),oe!==pe)throw FormulaError$c.VALUE;J+=ue,ne+=Ae}),EngineeringFunctions.COMPLEX(J,ne,oe)},IMTAN:K=>{const{unit:J}=parseIM(K);return EngineeringFunctions.IMDIV(EngineeringFunctions.IMSIN(K),EngineeringFunctions.IMCOS(K),J)},OCT2BIN:(K,J)=>{if(K=H$7.accept(K,Types$7.STRING),J=H$7.accept(J,Types$7.NUMBER,null),K.length>10||J>10||J!==null&&J<0)throw FormulaError$c.NUM;J=Math.trunc(J);let ne=K.length===10&&K.substring(0,1)==="7",oe=EngineeringFunctions.OCT2DEC(K);if(oe<MIN_BIN||oe>MAX_BIN)return FormulaError$c.NUM;if(ne)return"1"+TextFunctions$1.REPT("0",9-(512+oe).toString(2).length)+(512+oe).toString(2);let ce=oe.toString(2);if(J===0)return ce;if(J<ce.length)throw FormulaError$c.NUM;return TextFunctions$1.REPT("0",J-ce.length)+ce},OCT2DEC:K=>{if(K=H$7.accept(K,Types$7.STRING),K.length>10)throw FormulaError$c.NUM;for(const ne of K)if(ne<"0"||ne>"7")throw FormulaError$c.NUM;let J=parseInt(K,8);return J>=536870912?J-1073741824:J},OCT2HEX:(K,J)=>{if(K=H$7.accept(K,Types$7.STRING),J=H$7.accept(J,Types$7.NUMBER_NO_BOOLEAN,null),K.length>10)throw FormulaError$c.NUM;for(const ce of K)if(ce<"0"||ce>"7")throw FormulaError$c.NUM;if(J=Math.trunc(J),J<0||J>10)throw FormulaError$c.NUM;let ne=EngineeringFunctions.OCT2DEC(K),oe=EngineeringFunctions.DEC2HEX(ne);if(J===0)return oe;if(J<oe.length)throw FormulaError$c.NUM;return TextFunctions$1.REPT("0",J-oe.length)+oe}};var engineering=EngineeringFunctions;const FormulaError$b=requireError(),{FormulaHelpers:FormulaHelpers$8,Types:Types$6,WildCard,Address:Address$3}=requireHelpers(),Collection$2=collection,H$6=FormulaHelpers$8,ReferenceFunctions$1={ADDRESS:(K,J,ne,oe,ce)=>{if(K=H$6.accept(K,Types$6.NUMBER),J=H$6.accept(J,Types$6.NUMBER),ne=H$6.accept(ne,Types$6.NUMBER,1),oe=H$6.accept(oe,Types$6.BOOLEAN,!0),ce=H$6.accept(ce,Types$6.STRING,""),K<1||J<1||ne<1||ne>4)throw FormulaError$b.VALUE;let ue="";return ce.length>0&&(/[^A-Za-z_.\d\u007F-\uFFFF]/.test(ce)?ue+=`'${ce}'!`:ue+=ce+"!"),oe?(ue+=ne===1||ne===3?"$":"",ue+=Address$3.columnNumberToName(J),ue+=ne===1||ne===2?"$":"",ue+=K):(ue+="R",ue+=ne===4||ne===3?`[${K}]`:K,ue+="C",ue+=ne===4||ne===2?`[${J}]`:J),ue},AREAS:K=>(K=H$6.accept(K),K instanceof Collection$2?K.length:1),CHOOSE:(K,...J)=>{},COLUMN:(K,J)=>{if(J==null){if(K.position.col!=null)return K.position.col;throw Error("FormulaParser.parse is called without position parameter.")}else{if(typeof J!="object"||Array.isArray(J))throw FormulaError$b.VALUE;if(H$6.isCellRef(J))return J.ref.col;if(H$6.isRangeRef(J))return J.ref.from.col;throw Error("ReferenceFunctions.COLUMN should not reach here.")}},COLUMNS:(K,J)=>{if(J==null)throw Error("COLUMNS requires one argument");if(typeof J!="object"||Array.isArray(J))throw FormulaError$b.VALUE;if(H$6.isCellRef(J))return 1;if(H$6.isRangeRef(J))return Math.abs(J.ref.from.col-J.ref.to.col)+1;throw Error("ReferenceFunctions.COLUMNS should not reach here.")},HLOOKUP:(K,J,ne,oe)=>{K=H$6.accept(K);try{J=H$6.accept(J,Types$6.ARRAY,void 0,!1)}catch(ue){throw ue instanceof FormulaError$b?FormulaError$b.NA:ue}if(ne=H$6.accept(ne,Types$6.NUMBER),oe=H$6.accept(oe,Types$6.BOOLEAN,!0),ne<1)throw FormulaError$b.VALUE;if(J[ne-1]===void 0)throw FormulaError$b.REF;const ce=typeof K;if(oe){let ue=ce===typeof J[0][0]?J[0][0]:null;for(let Ae=1;Ae<J[0].length;Ae++){const pe=J[0][Ae];if(typeof pe===ce){if(ue>K&&pe>K)throw FormulaError$b.NA;if(pe===K)return J[ne-1][Ae];if(ue!=null&&pe>K&&ue<=K)return J[ne-1][Ae-1];ue=pe}}if(ue==null)throw FormulaError$b.NA;return ue}else{let ue=-1;if(WildCard.isWildCard(K)?ue=J[0].findIndex(Ae=>WildCard.toRegex(K,"i").test(Ae)):ue=J[0].findIndex(Ae=>Ae===K),ue===-1)throw FormulaError$b.NA;return J[ne-1][ue]}},INDEX:(K,J,ne,oe,ce)=>{ne=K.utils.extractRefValue(ne),ne={value:ne.val,isArray:ne.isArray},ne=H$6.accept(ne,Types$6.NUMBER),ne=Math.trunc(ne),oe==null?oe=1:(oe=K.utils.extractRefValue(oe),oe={value:oe.val,isArray:oe.isArray},oe=H$6.accept(oe,Types$6.NUMBER,1),oe=Math.trunc(oe)),ce==null?ce=1:(ce=K.utils.extractRefValue(ce),ce={value:ce.val,isArray:ce.isArray},ce=H$6.accept(ce,Types$6.NUMBER,1),ce=Math.trunc(ce));let ue=J;if(J instanceof Collection$2)ue=J.refs[ce-1];else if(ce>1)throw FormulaError$b.REF;if(ne===0&&oe===0)return ue;if(ne===0){if(H$6.isRangeRef(ue)){if(ue.ref.to.col-ue.ref.from.col<oe-1)throw FormulaError$b.REF;return ue.ref.from.col+=oe-1,ue.ref.to.col=ue.ref.from.col,ue}else if(Array.isArray(ue)){const Ae=[];return ue.forEach(pe=>Ae.push([pe[oe-1]])),Ae}}if(oe===0){if(H$6.isRangeRef(ue)){if(ue.ref.to.row-ue.ref.from.row<ne-1)throw FormulaError$b.REF;return ue.ref.from.row+=ne-1,ue.ref.to.row=ue.ref.from.row,ue}else if(Array.isArray(ue))return ue[oe-1]}if(ne!==0&&oe!==0){if(H$6.isRangeRef(ue)){if(ue=ue.ref,ue.to.row-ue.from.row<ne-1||ue.to.col-ue.from.col<oe-1)throw FormulaError$b.REF;return{ref:{row:ue.from.row+ne-1,col:ue.from.col+oe-1}}}else if(H$6.isCellRef(ue)){if(ue=ue.ref,ne>1||oe>1)throw FormulaError$b.REF;return{ref:{row:ue.row+ne-1,col:ue.col+oe-1}}}else if(Array.isArray(ue)){if(ue.length<ne||ue[0].length<oe)throw FormulaError$b.REF;return ue[ne-1][oe-1]}}},MATCH:()=>{},ROW:(K,J)=>{if(J==null){if(K.position.row!=null)return K.position.row;throw Error("FormulaParser.parse is called without position parameter.")}else{if(typeof J!="object"||Array.isArray(J))throw FormulaError$b.VALUE;if(H$6.isCellRef(J))return J.ref.row;if(H$6.isRangeRef(J))return J.ref.from.row;throw Error("ReferenceFunctions.ROW should not reach here.")}},ROWS:(K,J)=>{if(J==null)throw Error("ROWS requires one argument");if(typeof J!="object"||Array.isArray(J))throw FormulaError$b.VALUE;if(H$6.isCellRef(J))return 1;if(H$6.isRangeRef(J))return Math.abs(J.ref.from.row-J.ref.to.row)+1;throw Error("ReferenceFunctions.ROWS should not reach here.")},TRANSPOSE:K=>{K=H$6.accept(K,Types$6.ARRAY,void 0,!1);const J=[];for(let ne=0;ne<K[0].length;ne++){J[ne]=[];for(let oe=0;oe<K.length;oe++)J[ne][oe]=K[oe][ne]}return J},VLOOKUP:(K,J,ne,oe)=>{K=H$6.accept(K);try{J=H$6.accept(J,Types$6.ARRAY,void 0,!1)}catch(ue){throw ue instanceof FormulaError$b?FormulaError$b.NA:ue}if(ne=H$6.accept(ne,Types$6.NUMBER),oe=H$6.accept(oe,Types$6.BOOLEAN,!0),ne<1)throw FormulaError$b.VALUE;if(J[0][ne-1]===void 0)throw FormulaError$b.REF;const ce=typeof K;if(oe){let ue=ce===typeof J[0][0]?J[0][0]:null;for(let Ae=1;Ae<J.length;Ae++){const pe=J[Ae],xe=J[Ae][0];if(typeof xe===ce){if(ue>K&&xe>K)throw FormulaError$b.NA;if(xe===K)return pe[ne-1];if(ue!=null&&xe>K&&ue<=K)return J[Ae-1][ne-1];ue=xe}}if(ue==null)throw FormulaError$b.NA;return ue}else{let ue=-1;if(WildCard.isWildCard(K)?ue=J.findIndex(Ae=>WildCard.toRegex(K,"i").test(Ae[0])):ue=J.findIndex(Ae=>Ae[0]===K),ue===-1)throw FormulaError$b.NA;return J[ue][ne-1]}}};var reference=ReferenceFunctions$1;const FormulaError$a=requireError(),{FormulaHelpers:FormulaHelpers$7,Types:Types$5}=requireHelpers(),H$5=FormulaHelpers$7,error2Number={"#NULL!":1,"#DIV/0!":2,"#VALUE!":3,"#REF!":4,"#NAME?":5,"#NUM!":6,"#N/A":7},InfoFunctions={CELL:(K,J)=>{},"ERROR.TYPE":K=>{if(K=H$5.accept(K),K instanceof FormulaError$a)return error2Number[K.toString()];throw FormulaError$a.NA},INFO:()=>{},ISBLANK:K=>K.ref?K.value==null||K.value==="":!1,ISERR:K=>(K=H$5.accept(K),K instanceof FormulaError$a&&K.toString()!=="#N/A"),ISERROR:K=>(K=H$5.accept(K),K instanceof FormulaError$a),ISEVEN:K=>(K=H$5.accept(K,Types$5.NUMBER),K=Math.trunc(K),K%2===0),ISLOGICAL:K=>(K=H$5.accept(K),typeof K=="boolean"),ISNA:K=>(K=H$5.accept(K),K instanceof FormulaError$a&&K.toString()==="#N/A"),ISNONTEXT:K=>(K=H$5.accept(K),typeof K!="string"),ISNUMBER:K=>(K=H$5.accept(K),typeof K=="number"),ISREF:K=>!K.ref||H$5.isCellRef(K)&&(K.ref.row>1048576||K.ref.col>16384)||H$5.isRangeRef(K)&&(K.ref.from.row>1048576||K.ref.from.col>16384||K.ref.to.row>1048576||K.ref.to.col>16384)?!1:(K=H$5.accept(K),!(K instanceof FormulaError$a&&K.toString()==="#REF!")),ISTEXT:K=>(K=H$5.accept(K),typeof K=="string"),N:K=>{K=H$5.accept(K);const J=typeof K;if(J==="number")return K;if(J==="boolean")return Number(K);if(K instanceof FormulaError$a)throw K;return 0},NA:()=>{throw FormulaError$a.NA},TYPE:K=>{if(K.ref){if(H$5.isRangeRef(K))return 16;if(H$5.isCellRef(K)&&(K=H$5.accept(K),typeof K=="string"&&K.length===0))return 1}K=H$5.accept(K);const J=typeof K;if(J==="number")return 1;if(J==="string")return 2;if(J==="boolean")return 4;if(K instanceof FormulaError$a)return 16;if(Array.isArray(K))return 64}};var information=InfoFunctions;const FormulaError$9=requireError(),{FormulaHelpers:FormulaHelpers$6,Types:Types$4}=requireHelpers(),H$4=FormulaHelpers$6,jStat=jstatExports,MathFunctions$1=math,SQRT2PI=2.5066282746310002,DistributionFunctions$1={"BETA.DIST":(K,J,ne,oe,ce,ue)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),ce=H$4.accept(ce,Types$4.NUMBER,0),ue=H$4.accept(ue,Types$4.NUMBER,1),J<=0||ne<=0||K<ce||K>ue||ce===ue)throw FormulaError$9.NUM;return K=(K-ce)/(ue-ce),oe?jStat.beta.cdf(K,J,ne):jStat.beta.pdf(K,J,ne)/(ue-ce)},"BETA.INV":(K,J,ne,oe,ce)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.NUMBER,0),ce=H$4.accept(ce,Types$4.NUMBER,1),J<=0||ne<=0||K<=0||K>1)throw FormulaError$9.NUM;return jStat.beta.inv(K,J,ne)*(ce-oe)+oe},"BINOM.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),J<0||ne<0||ne>1||K<0||K>J)throw FormulaError$9.NUM;return oe?jStat.binomial.cdf(K,J,ne):jStat.binomial.pdf(K,J,ne)},"BINOM.DIST.RANGE":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.NUMBER,ne),K<0||J<0||J>1||ne<0||ne>K||oe<ne||oe>K)throw FormulaError$9.NUM;let ce=0;for(let ue=ne;ue<=oe;ue++)ce+=MathFunctions$1.COMBIN(K,ue)*Math.pow(J,ue)*Math.pow(1-J,K-ue);return ce},"BINOM.INV":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<0||J<0||J>1||ne<0||ne>1)throw FormulaError$9.NUM;let oe=0;for(;oe<=K;){if(jStat.binomial.cdf(oe,K,J)>=ne)return oe;oe++}},"CHISQ.DIST":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),J=Math.trunc(J),K<0||J<1||J>10**10)throw FormulaError$9.NUM;return ne?jStat.chisquare.cdf(K,J):jStat.chisquare.pdf(K,J)},"CHISQ.DIST.RT":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),J=Math.trunc(J),K<0||J<1||J>10**10)throw FormulaError$9.NUM;return 1-jStat.chisquare.cdf(K,J)},"CHISQ.INV":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),J=Math.trunc(J),K<0||K>1||J<1||J>10**10)throw FormulaError$9.NUM;return jStat.chisquare.inv(K,J)},"CHISQ.INV.RT":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),J=Math.trunc(J),K<0||K>1||J<1||J>10**10)throw FormulaError$9.NUM;return jStat.chisquare.inv(1-K,J)},"CHISQ.TEST":(K,J)=>{const ne=H$4.accept(K,Types$4.ARRAY,void 0,!1,!1),oe=H$4.accept(J,Types$4.ARRAY,void 0,!1,!1);if(ne.length!==oe.length||ne[0].length!==oe[0].length||ne.length===1&&ne[0].length===1)throw FormulaError$9.NA;const ce=ne.length,ue=ne[0].length;let Ae=(ce-1)*(ue-1);ce===1?Ae=ue-1:Ae=ce-1;let pe=0;for(let Se=0;Se<ce;Se++)for(let Te=0;Te<ue;Te++)if(!(typeof ne[Se][Te]!="number"||typeof oe[Se][Te]!="number")){if(oe[Se][Te]===0)throw FormulaError$9.DIV0;pe+=Math.pow(ne[Se][Te]-oe[Se][Te],2)/oe[Se][Te]}let xe=Math.exp(-.5*pe);Ae%2===1&&(xe=xe*Math.sqrt(2*pe/Math.PI));let me=Ae;for(;me>=2;)xe=xe*pe/me,me=me-2;let ge=xe,ye=Ae;for(;ge>1e-15*xe;)ye=ye+2,ge=ge*pe/ye,xe=xe+ge;return 1-xe},"CONFIDENCE.NORM":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),ne=Math.trunc(ne),K<=0||K>=1||J<=0||ne<1)throw FormulaError$9.NUM;return jStat.normalci(1,K,J,ne)[1]-1},"CONFIDENCE.T":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),ne=Math.trunc(ne),K<=0||K>=1||J<=0||ne<1)throw FormulaError$9.NUM;if(ne===1)throw FormulaError$9.DIV0;return jStat.tci(1,K,J,ne)[1]-1},CORREL:(K,J)=>{if(K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0),K.length!==J.length)throw FormulaError$9.NA;const ne=[],oe=[];for(let ce=0;ce<K.length;ce++)typeof K[ce]!="number"||typeof J[ce]!="number"||(ne.push(K[ce]),oe.push(J[ce]));if(ne.length<=1)throw FormulaError$9.DIV0;return jStat.corrcoeff(ne,oe)},"COVARIANCE.P":(K,J)=>{if(K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0),K.length!==J.length)throw FormulaError$9.NA;const ne=[],oe=[];for(let pe=0;pe<K.length;pe++)typeof K[pe]!="number"||typeof J[pe]!="number"||(ne.push(K[pe]),oe.push(J[pe]));const ce=jStat.mean(ne),ue=jStat.mean(oe);let Ae=0;for(let pe=0;pe<ne.length;pe++)Ae+=(ne[pe]-ce)*(oe[pe]-ue);return Ae/ne.length},"COVARIANCE.S":(K,J)=>{if(K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0),K.length!==J.length)throw FormulaError$9.NA;const ne=[],oe=[];for(let ce=0;ce<K.length;ce++)typeof K[ce]!="number"||typeof J[ce]!="number"||(ne.push(K[ce]),oe.push(J[ce]));if(ne.length<=1)throw FormulaError$9.DIV0;return jStat.covariance(ne,oe)},DEVSQ:(...K)=>{let J=0,ne=[];H$4.flattenParams(K,Types$4.NUMBER,!0,(ce,ue)=>{typeof ce=="number"&&(J+=ce,ne.push(ce))});const oe=J/ne.length;J=0;for(let ce=0;ce<ne.length;ce++)J+=(ne[ce]-oe)**2;return J},"EXPON.DIST":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.BOOLEAN),K<0||J<=0)throw FormulaError$9.NUM;return ne?jStat.exponential.cdf(K,J):jStat.exponential.pdf(K,J)},"F.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),K<0||J<1||ne<1)throw FormulaError$9.NUM;return J=Math.trunc(J),ne=Math.trunc(ne),oe?jStat.centralF.cdf(K,J,ne):jStat.centralF.pdf(K,J,ne)},"F.DIST.RT":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<0||J<1||ne<1)throw FormulaError$9.NUM;return J=Math.trunc(J),ne=Math.trunc(ne),1-jStat.centralF.cdf(K,J,ne)},"F.INV":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<0||K>1||J<1||ne<1)throw FormulaError$9.NUM;return J=Math.trunc(J),ne=Math.trunc(ne),jStat.centralF.inv(K,J,ne)},"F.INV.RT":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<0||K>1||J<1||J>=Math.pow(10,10)||ne<1||ne>=Math.pow(10,10))throw FormulaError$9.NUM;return J=Math.trunc(J),ne=Math.trunc(ne),jStat.centralF.inv(1-K,J,ne)},"F.TEST":(K,J)=>{K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0);const ne=[],oe=[];let ce=0,ue=0;for(let xe=0;xe<Math.max(K.length,J.length);xe++)typeof K[xe]=="number"&&(ne.push(K[xe]),ce+=K[xe]),typeof J[xe]=="number"&&(oe.push(J[xe]),ue+=J[xe]);if(ne.length<=1||oe.length<=1)throw FormulaError$9.DIV0;ce/=ne.length,ue/=oe.length;let Ae=0,pe=0;for(let xe=0;xe<ne.length;xe++)Ae+=(ce-ne[xe])**2;Ae/=ne.length-1;for(let xe=0;xe<oe.length;xe++)pe+=(ue-oe[xe])**2;return pe/=oe.length-1,jStat.centralF.cdf(Ae/pe,ne.length-1,oe.length-1)*2},FISHER:K=>{if(K=H$4.accept(K,Types$4.NUMBER),K<=-1||K>=1)throw FormulaError$9.NUM;return Math.log((1+K)/(1-K))/2},FISHERINV:K=>{K=H$4.accept(K,Types$4.NUMBER);let J=Math.exp(2*K);return(J-1)/(J+1)},FORECAST:(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0),ne=H$4.accept(ne,Types$4.ARRAY,void 0,!0,!0),ne.length!==J.length)throw FormulaError$9.NA;const oe=[],ce=[];let ue=!0;for(let Se=0;Se<J.length;Se++)typeof J[Se]!="number"||typeof ne[Se]!="number"||(oe.push(J[Se]),ce.push(ne[Se]),ne[Se]!==ne[0]&&(ue=!1));if(ue)throw FormulaError$9.DIV0;const Ae=jStat.mean(oe),pe=jStat.mean(ce);let xe=0,me=0;for(let Se=0;Se<oe.length;Se++)xe+=(ce[Se]-pe)*(oe[Se]-Ae),me+=(ce[Se]-pe)**2;const ge=xe/me;return Ae-ge*pe+ge*K},"FORECAST.ETS":()=>{},"FORECAST.ETS.CONFINT":()=>{},"FORECAST.ETS.SEASONALITY":()=>{},"FORECAST.ETS.STAT":()=>{},"FORECAST.LINEAR":(...K)=>DistributionFunctions$1.FORECAST(...K),FREQUENCY:(K,J)=>{K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0);const ne=[];for(let ce=0;ce<J.length;ce++)typeof J[ce]=="number"&&ne.push(J[ce]);ne.sort(),ne.push(1/0);const oe=[];for(let ce=0;ce<ne.length;ce++){oe[ce]=[],oe[ce][0]=0;for(let ue=0;ue<K.length;ue++){if(typeof K[ue]!="number")continue;K[ue]<=ne[ce]&&(oe[ce][0]++,K[ue]=null)}}return oe},GAMMA:K=>{if(K=H$4.accept(K,Types$4.NUMBER),K===0||K<0&&K===Math.trunc(K))throw FormulaError$9.NUM;return jStat.gammafn(K)},"GAMMA.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),K<0||J<=0||ne<=0)throw FormulaError$9.NUM;return oe?jStat.gamma.cdf(K,J,ne,!0):jStat.gamma.pdf(K,J,ne,!1)},"GAMMA.INV":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<0||K>1||J<=0||ne<=0)throw FormulaError$9.NUM;return jStat.gamma.inv(K,J,ne)},GAMMALN:K=>{if(K=H$4.accept(K,Types$4.NUMBER),K<=0)throw FormulaError$9.NUM;return jStat.gammaln(K)},"GAMMALN.PRECISE":K=>{if(K=H$4.accept(K,Types$4.NUMBER),K<=0)throw FormulaError$9.NUM;return jStat.gammaln(K)},GAUSS:K=>(K=H$4.accept(K,Types$4.NUMBER),jStat.normal.cdf(K,0,1)-.5),GEOMEAN:(...K)=>{const J=[];return H$4.flattenParams(K,Types$4.NUMBER,!0,(ne,oe)=>{typeof ne=="number"&&J.push(ne)}),jStat.geomean(J)},GROWTH:(K,J,ne,oe)=>{K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0);for(let Te=0;Te<K.length;Te++)if(typeof K[Te]!="number")throw FormulaError$9.VALUE;J=H$4.accept(J,Types$4.ARRAY,null,!0,!0);const ce=J==null;if(J==null){J=[];for(let Te=1;Te<=K.length;Te++)J.push(Te)}else{if(J.length!==K.length)throw FormulaError$9.REF;for(let Te=0;Te<J.length;Te++)if(typeof J[Te]!="number")throw FormulaError$9.VALUE}if(ne=H$4.accept(ne,Types$4.ARRAY,null,!1,!0),ne==null&&ce){ne=[];for(let Te=1;Te<=K.length;Te++)ne.push(Te);ne=[ne]}else ne==null&&(ne=Array.isArray(J[0])?J:[J]);oe=H$4.accept(oe,Types$4.BOOLEAN,!0);const ue=K.length;let Ae=0,pe=0,xe=0,me=0;for(let Te=0;Te<ue;Te++){const Ne=J[Te],$e=Math.log(K[Te]);Ae+=Ne,pe+=$e,xe+=Ne*$e,me+=Ne*Ne}Ae/=ue,pe/=ue,xe/=ue,me/=ue;let ge,ye;oe?(ge=(xe-Ae*pe)/(me-Ae*Ae),ye=pe-ge*Ae):(ge=xe/me,ye=0);const Se=[];for(let Te=0;Te<ne.length;Te++){Se[Te]=[];for(let Ne=0;Ne<ne[0].length;Ne++){if(typeof ne[Te][Ne]!="number")throw FormulaError$9.VALUE;Se[Te][Ne]=Math.exp(ye+ge*ne[Te][Ne])}}return Se},HARMEAN:(...K)=>{let J=0,ne=0;return H$4.flattenParams(K,Types$4.NUMBER,!0,(oe,ce)=>{typeof oe=="number"&&(ne+=1/oe,J++)}),J/ne},"HYPGEOM.DIST":(K,J,ne,oe,ce)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.NUMBER),ce=H$4.accept(ce,Types$4.BOOLEAN),K=Math.trunc(K),J=Math.trunc(J),ne=Math.trunc(ne),oe=Math.trunc(oe),oe<=0||K<0||J<=0||ne<=0||J>oe||ne>oe||J<K||ne<K||K<J-oe+ne)throw FormulaError$9.NUM;function ue(pe,xe,me,ge){return MathFunctions$1.COMBIN(me,pe)*MathFunctions$1.COMBIN(ge-me,xe-pe)/MathFunctions$1.COMBIN(ge,xe)}function Ae(pe,xe,me,ge){let ye=0;for(let Se=0;Se<=pe;Se++)ye+=ue(Se,xe,me,ge);return ye}return ce?Ae(K,J,ne,oe):ue(K,J,ne,oe)},INTERCEPT:(K,J)=>{if(K=H$4.accept(K,Types$4.ARRAY,void 0,!0,!0),J=H$4.accept(J,Types$4.ARRAY,void 0,!0,!0),J.length!==K.length)throw FormulaError$9.NA;const ne=[],oe=[];for(let me=0;me<K.length;me++)typeof K[me]!="number"||typeof J[me]!="number"||(ne.push(K[me]),oe.push(J[me]));if(ne.length<=1)throw FormulaError$9.DIV0;const ce=jStat.mean(ne),ue=jStat.mean(oe);let Ae=0,pe=0;for(let me=0;me<ne.length;me++)Ae+=(oe[me]-ue)*(ne[me]-ce),pe+=(oe[me]-ue)**2;const xe=Ae/pe;return ce-xe*ue},KURT:(...K)=>{let J=0,ne=[];H$4.flattenParams(K,Types$4.NUMBER,!0,(ue,Ae)=>{typeof ue=="number"&&(J+=ue,ne.push(ue))});const oe=ne.length;J/=oe;let ce=0;for(let ue=0;ue<oe;ue++)ce+=Math.pow(ne[ue]-J,4);return ce=ce/Math.pow(jStat.stdev(ne,!0),4),oe*(oe+1)/((oe-1)*(oe-2)*(oe-3))*ce-3*(oe-1)*(oe-1)/((oe-2)*(oe-3))},LINEST:()=>{},LOGEST:()=>{},"LOGNORM.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),K<=0||ne<=0)throw FormulaError$9.NUM;return oe?jStat.lognormal.cdf(K,J,ne):jStat.lognormal.pdf(K,J,ne)},"LOGNORM.INV":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<=0||K>=1||ne<=0)throw FormulaError$9.NUM;return jStat.lognormal.inv(K,J,ne)},"MODE.MULT":()=>{},"MODE.SNGL":()=>{},"NEGBINOM.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),K=Math.trunc(K),J=Math.trunc(J),ne<0||ne>1||K<0||J<1)throw FormulaError$9.NUM;return oe?jStat.negbin.cdf(K,J,ne):jStat.negbin.pdf(K,J,ne)},"NORM.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),ne<=0)throw FormulaError$9.NUM;return oe?jStat.normal.cdf(K,J,ne):jStat.normal.pdf(K,J,ne)},"NORM.INV":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),K<=0||K>=1||ne<=0)throw FormulaError$9.NUM;return jStat.normal.inv(K,J,ne)},"NORM.S.DIST":(K,J)=>(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.BOOLEAN),J?jStat.normal.cdf(K,0,1):jStat.normal.pdf(K,0,1)),"NORM.S.INV":K=>{if(K=H$4.accept(K,Types$4.NUMBER),K<=0||K>=1)throw FormulaError$9.NUM;return jStat.normal.inv(K,0,1)},PEARSON:()=>{},"PERCENTILE.EXC":()=>{},"PERCENTILE.INC":()=>{},"PERCENTRANK.EXC":()=>{},"PERCENTRANK.INC":()=>{},PERMUTATIONA:()=>{},PHI:K=>(K=H$4.accept(K,Types$4.NUMBER),Math.exp(-.5*K*K)/SQRT2PI),"POISSON.DIST":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.BOOLEAN),K<0||J<0)throw FormulaError$9.NUM;return K=Math.trunc(K),ne?jStat.poisson.cdf(K,J):jStat.poisson.pdf(K,J)},PROB:()=>{},"QUARTILE.EXC":()=>{},"QUARTILE.INC":()=>{},"RANK.AVG":()=>{},"RANK.EQ":()=>{},RSQ:()=>{},SKEW:()=>{},"SKEW.P":()=>{},SLOPE:()=>{},STANDARDIZE:(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),ne<=0)throw FormulaError$9.NUM;return(K-J)/ne},"STDEV.P":()=>{},"STDEV.S":()=>{},STDEVA:()=>{},STDEVPA:()=>{},STEYX:()=>{},"T.DIST":(K,J,ne)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.BOOLEAN),J<1)throw FormulaError$9.NUM;return ne?jStat.studentt.cdf(K,J):jStat.studentt.pdf(K,J)},"T.DIST.2T":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),J<1||K<0)throw FormulaError$9.NUM;return(1-jStat.studentt.cdf(K,J))*2},"T.DIST.RT":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),J<1)throw FormulaError$9.NUM;return 1-jStat.studentt.cdf(K,J)},"T.INV":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),K<=0||K>1||J<1)throw FormulaError$9.NUM;return J=J%1===0?J:Math.trunc(J),jStat.studentt.inv(K,J)},"T.INV.2T":(K,J)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),K<=0||K>1||J<1)throw FormulaError$9.NUM;return J=J%1===0?J:Math.trunc(J),Math.abs(jStat.studentt.inv(K/2,J))},"T.TEST":()=>{},TREND:()=>{},TRIMMEAN:()=>{},"VAR.P":()=>{},"VAR.S":()=>{},VARA:()=>{},VARPA:()=>{},"WEIBULL.DIST":(K,J,ne,oe)=>{if(K=H$4.accept(K,Types$4.NUMBER),J=H$4.accept(J,Types$4.NUMBER),ne=H$4.accept(ne,Types$4.NUMBER),oe=H$4.accept(oe,Types$4.BOOLEAN),K<0||J<=0||ne<=0)throw FormulaError$9.NUM;return oe?1-Math.exp(-Math.pow(K/ne,J)):Math.pow(K,J-1)*Math.exp(-Math.pow(K/ne,J))*J/Math.pow(ne,J)},"Z.TEST":()=>{}};var distribution={DistributionFunctions:DistributionFunctions$1};const FormulaError$8=requireError(),{FormulaHelpers:FormulaHelpers$5,Types:Types$3,Criteria,Address:Address$2}=requireHelpers(),{Infix:Infix$1}=operators,H$3=FormulaHelpers$5,{DistributionFunctions}=distribution,StatisticalFunctions$1={AVEDEV:(...K)=>{let J=0;const ne=[];H$3.flattenParams(K,Types$3.NUMBER,!0,(ce,ue)=>{typeof ce=="number"&&(J+=ce,ne.push(ce))});const oe=J/ne.length;J=0;for(let ce=0;ce<ne.length;ce++)J+=Math.abs(ne[ce]-oe);return J/ne.length},AVERAGE:(...K)=>{let J=0,ne=0;return H$3.flattenParams(K,Types$3.NUMBER,!0,(oe,ce)=>{typeof oe=="number"&&(J+=oe,ne++)}),J/ne},AVERAGEA:(...K)=>{let J=0,ne=0;return H$3.flattenParams(K,Types$3.NUMBER,!0,(oe,ce)=>{const ue=typeof oe;ue==="number"?(J+=oe,ne++):ue==="string"&&ne++}),J/ne},AVERAGEIF:(K,J,ne,oe)=>{const ce=H$3.retrieveRanges(K,J,oe);J=ce[0],oe=ce[1],ne=H$3.retrieveArg(K,ne);const ue=ne.isArray;ne=Criteria.parse(H$3.accept(ne));let Ae=0,pe=0;if(J.forEach((xe,me)=>{xe.forEach((ge,ye)=>{const Se=oe[me][ye];typeof Se=="number"&&(ne.op==="wc"?ne.match===ne.value.test(ge)&&(Ae+=Se,pe++):Infix$1.compareOp(ge,ne.op,ne.value,Array.isArray(ge),ue)&&(Ae+=Se,pe++))})}),pe===0)throw FormulaError$8.DIV0;return Ae/pe},AVERAGEIFS:()=>{},COUNT:(...K)=>{let J=0;return H$3.flattenParams(K,null,!0,(ne,oe)=>{(oe.isLiteral&&!isNaN(ne)||typeof ne=="number")&&J++}),J},COUNTIF:(K,J)=>{K=H$3.accept(K,Types$3.ARRAY,void 0,!1,!0);const ne=J.isArray;J=H$3.accept(J);let oe=0;return J=Criteria.parse(J),K.forEach(ce=>{ce.forEach(ue=>{J.op==="wc"?J.match===J.value.test(ue)&&oe++:Infix$1.compareOp(ue,J.op,J.value,Array.isArray(ue),ne)&&oe++})}),oe},LARGE:()=>{},MAX:()=>{},MAXA:()=>{},MAXIFS:()=>{},MEDIAN:()=>{},MIN:()=>{},MINA:()=>{},MINIFS:()=>{},PERMUT:()=>{},PERMUTATIONA:()=>{},SMALL:()=>{}};var statistical=Object.assign(StatisticalFunctions$1,DistributionFunctions);const FormulaError$7=requireError(),{FormulaHelpers:FormulaHelpers$4,Types:Types$2}=requireHelpers(),H$2=FormulaHelpers$4,MS_PER_DAY=1e3*60*60*24,d1900=new Date(Date.UTC(1900,0,1)),WEEK_STARTS=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],WEEK_TYPES=[void 0,[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],void 0,void 0,void 0,void 0,void 0,void 0,void 0,[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],WEEKEND_TYPES=[void 0,[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0],[1],[2],[3],[4],[5],[6]],timeRegex=/^\s*(\d\d?)\s*(:\s*\d\d?)?\s*(:\s*\d\d?)?\s*(pm|am)?\s*$/i,dateRegex1=/^\s*((\d\d?)\s*([-\/])\s*(\d\d?))([\d:.apm\s]*)$/i,dateRegex2=/^\s*((\d\d?)\s*([-/])\s*(jan\w*|feb\w*|mar\w*|apr\w*|may\w*|jun\w*|jul\w*|aug\w*|sep\w*|oct\w*|nov\w*|dec\w*))([\d:.apm\s]*)$/i,dateRegex3=/^\s*((jan\w*|feb\w*|mar\w*|apr\w*|may\w*|jun\w*|jul\w*|aug\w*|sep\w*|oct\w*|nov\w*|dec\w*)\s*([-/])\s*(\d\d?))([\d:.apm\s]*)$/i;function parseSimplifiedDate(K){const J=K.match(dateRegex1),ne=K.match(dateRegex2),oe=K.match(dateRegex3);return J?K=J[1]+J[3]+new Date().getFullYear()+J[5]:ne?K=ne[1]+ne[3]+new Date().getFullYear()+ne[5]:oe&&(K=oe[1]+oe[3]+new Date().getFullYear()+oe[5]),new Date(Date.parse(`${K} UTC`))}function parseTime(K){const J=K.match(timeRegex);if(!J)return;const ne=J[2]?J[2]:":00",oe=J[3]?J[3]:":00",ce=J[4]?" "+J[4]:"",ue=new Date(Date.parse(`1/1/1900 ${J[1]+ne+oe+ce} UTC`));let Ae=new Date;return Ae=new Date(Date.UTC(Ae.getFullYear(),Ae.getMonth(),Ae.getDate(),Ae.getHours(),Ae.getMinutes(),Ae.getSeconds(),Ae.getMilliseconds())),new Date(Date.UTC(Ae.getUTCFullYear(),Ae.getUTCMonth(),Ae.getUTCDate(),ue.getUTCHours(),ue.getUTCMinutes(),ue.getUTCSeconds(),ue.getUTCMilliseconds()))}function toSerial(K){const J=K>-22038912e5?2:1;return Math.floor((K-d1900)/864e5)+J}function toDate(K){if(K<0)throw FormulaError$7.VALUE;return K<=60?new Date(d1900.getTime()+(K-1)*864e5):new Date(d1900.getTime()+(K-2)*864e5)}function parseDateWithExtra(K){if(K instanceof Date)return{date:K};K=H$2.accept(K);let J=!0,ne;return isNaN(K)?(ne=parseTime(K),ne?J=!1:ne=parseSimplifiedDate(K)):(K=Number(K),ne=toDate(K)),{date:ne,isDateGiven:J}}function parseDate(K){return parseDateWithExtra(K).date}function compareDateIgnoreTime(K,J){return K.getUTCFullYear()===J.getUTCFullYear()&&K.getUTCMonth()===J.getUTCMonth()&&K.getUTCDate()===J.getUTCDate()}function isLeapYear(K){return K===1900?!0:new Date(K,1,29).getMonth()===1}const DateFunctions$1={DATE:(K,J,ne)=>{if(K=H$2.accept(K,Types$2.NUMBER),J=H$2.accept(J,Types$2.NUMBER),ne=H$2.accept(ne,Types$2.NUMBER),K<0||K>=1e4)throw FormulaError$7.NUM;return K<1900&&(K+=1900),toSerial(Date.UTC(K,J-1,ne))},DATEDIF:(K,J,ne)=>{if(K=parseDate(K),J=parseDate(J),ne=H$2.accept(ne,Types$2.STRING).toLowerCase(),K>J)throw FormulaError$7.NUM;const oe=J.getUTCFullYear()-K.getUTCFullYear(),ce=J.getUTCMonth()-K.getUTCMonth(),ue=J.getUTCDate()-K.getUTCDate();let Ae;switch(ne){case"y":return Ae=ce<0||ce===0&&ue<0?-1:0,Ae+oe;case"m":return Ae=ue<0?-1:0,oe*12+ce+Ae;case"d":return Math.floor(J-K)/MS_PER_DAY;case"md":return K.setUTCFullYear(J.getUTCFullYear()),ue<0?K.setUTCMonth(J.getUTCMonth()-1):K.setUTCMonth(J.getUTCMonth()),Math.floor(J-K)/MS_PER_DAY;case"ym":return Ae=ue<0?-1:0,(Ae+oe*12+ce)%12;case"yd":return ce<0||ce===0&&ue<0?K.setUTCFullYear(J.getUTCFullYear()-1):K.setUTCFullYear(J.getUTCFullYear()),Math.floor(J-K)/MS_PER_DAY}},DATEVALUE:K=>{K=H$2.accept(K,Types$2.STRING);const{date:J,isDateGiven:ne}=parseDateWithExtra(K);if(!ne)return 0;const oe=toSerial(J);if(oe<0||oe>2958465)throw FormulaError$7.VALUE;return oe},DAY:K=>parseDate(K).getUTCDate(),DAYS:(K,J)=>{K=parseDate(K),J=parseDate(J);let ne=0;return J<-22038912e5&&-22038912e5<K&&(ne=1),Math.floor(K-J)/MS_PER_DAY+ne},DAYS360:(K,J,ne)=>{K=parseDate(K),J=parseDate(J),ne=H$2.accept(ne,Types$2.BOOLEAN,!1),K.getUTCDate()===31&&K.setUTCDate(30),!ne&&K.getUTCDate()<30&&J.getUTCDate()>30?J.setUTCMonth(J.getUTCMonth()+1,1):J.getUTCDate()===31&&J.setUTCDate(30);const oe=J.getUTCFullYear()-K.getUTCFullYear(),ce=J.getUTCMonth()-K.getUTCMonth(),ue=J.getUTCDate()-K.getUTCDate();return ce*30+ue+oe*12*30},EDATE:(K,J)=>(K=parseDate(K),J=H$2.accept(J,Types$2.NUMBER),K.setUTCMonth(K.getUTCMonth()+J),toSerial(K)),EOMONTH:(K,J)=>(K=parseDate(K),J=H$2.accept(J,Types$2.NUMBER),K.setUTCMonth(K.getUTCMonth()+J+1,0),toSerial(K)),HOUR:K=>parseDate(K).getUTCHours(),ISOWEEKNUM:K=>{const J=parseDate(K),ne=new Date(Date.UTC(J.getFullYear(),J.getMonth(),J.getDate())),oe=ne.getUTCDay();ne.setUTCDate(ne.getUTCDate()+4-oe);const ce=new Date(Date.UTC(ne.getUTCFullYear(),0,1));return Math.ceil(((ne-ce)/864e5+1)/7)},MINUTE:K=>parseDate(K).getUTCMinutes(),MONTH:K=>parseDate(K).getUTCMonth()+1,NETWORKDAYS:(K,J,ne)=>{K=parseDate(K),J=parseDate(J);let oe=1;if(K>J){oe=-1;const Ae=K;K=J,J=Ae}const ce=[];ne!=null&&H$2.flattenParams([ne],Types$2.NUMBER,!1,Ae=>{ce.push(parseDate(Ae))});let ue=0;for(;K<=J;){if(K.getUTCDay()!==0&&K.getUTCDay()!==6){let Ae=!1;for(let pe=0;pe<ce.length;pe++)if(compareDateIgnoreTime(K,ce[pe])){Ae=!0;break}Ae||ue++}K.setUTCDate(K.getUTCDate()+1)}return oe*ue},"NETWORKDAYS.INTL":(K,J,ne,oe)=>{K=parseDate(K),J=parseDate(J);let ce=1;if(K>J){ce=-1;const pe=K;K=J,J=pe}if(ne=H$2.accept(ne,null,1),ne==="1111111")return 0;if(typeof ne=="string"&&Number(ne).toString()!==ne){if(ne.length!==7)throw FormulaError$7.VALUE;ne=ne.charAt(6)+ne.slice(0,6);const pe=[];for(let xe=0;xe<ne.length;xe++)ne.charAt(xe)==="1"&&pe.push(xe);ne=pe}else{if(typeof ne!="number")throw FormulaError$7.VALUE;ne=WEEKEND_TYPES[ne]}const ue=[];oe!=null&&H$2.flattenParams([oe],Types$2.NUMBER,!1,pe=>{ue.push(parseDate(pe))});let Ae=0;for(;K<=J;){let pe=!1;for(let xe=0;xe<ne.length;xe++)if(ne[xe]===K.getUTCDay()){pe=!0;break}if(!pe){let xe=!1;for(let me=0;me<ue.length;me++)if(compareDateIgnoreTime(K,ue[me])){xe=!0;break}xe||Ae++}K.setUTCDate(K.getUTCDate()+1)}return ce*Ae},NOW:()=>{const K=new Date;return toSerial(Date.UTC(K.getFullYear(),K.getMonth(),K.getDate(),K.getHours(),K.getMinutes(),K.getSeconds(),K.getMilliseconds()))+(3600*K.getHours()+60*K.getMinutes()+K.getSeconds())/86400},SECOND:K=>parseDate(K).getUTCSeconds(),TIME:(K,J,ne)=>{if(K=H$2.accept(K,Types$2.NUMBER),J=H$2.accept(J,Types$2.NUMBER),ne=H$2.accept(ne,Types$2.NUMBER),K<0||K>32767||J<0||J>32767||ne<0||ne>32767)throw FormulaError$7.NUM;return(3600*K+60*J+ne)/86400},TIMEVALUE:K=>(K=parseDate(K),(3600*K.getUTCHours()+60*K.getUTCMinutes()+K.getUTCSeconds())/86400),TODAY:()=>{const K=new Date;return toSerial(Date.UTC(K.getFullYear(),K.getMonth(),K.getDate()))},WEEKDAY:(K,J)=>{const ne=parseDate(K);J=H$2.accept(J,Types$2.NUMBER,1);const oe=ne.getUTCDay(),ce=WEEK_TYPES[J];if(!ce)throw FormulaError$7.NUM;return ce[oe]},WEEKNUM:(K,J)=>{const ne=parseDate(K);if(J=H$2.accept(J,Types$2.NUMBER,1),J===21)return DateFunctions$1.ISOWEEKNUM(K);const oe=WEEK_STARTS[J],ce=new Date(Date.UTC(ne.getUTCFullYear(),0,1)),ue=ce.getUTCDay()<oe?1:0;return Math.ceil(((ne-ce)/864e5+1)/7)+ue},WORKDAY:(K,J,ne)=>DateFunctions$1["WORKDAY.INTL"](K,J,1,ne),"WORKDAY.INTL":(K,J,ne,oe)=>{if(K=parseDate(K),J=H$2.accept(J,Types$2.NUMBER),ne=H$2.accept(ne,null,1),ne==="1111111")throw FormulaError$7.VALUE;if(typeof ne=="string"&&Number(ne).toString()!==ne){if(ne.length!==7)throw FormulaError$7.VALUE;ne=ne.charAt(6)+ne.slice(0,6);const Ae=[];for(let pe=0;pe<ne.length;pe++)ne.charAt(pe)==="1"&&Ae.push(pe);ne=Ae}else{if(typeof ne!="number")throw FormulaError$7.VALUE;if(ne=WEEKEND_TYPES[ne],ne==null)throw FormulaError$7.NUM}const ce=[];oe!=null&&H$2.flattenParams([oe],Types$2.NUMBER,!1,Ae=>{ce.push(parseDate(Ae))}),K.setUTCDate(K.getUTCDate()+1);let ue=0;for(;ue<J;){let Ae=!1;for(let pe=0;pe<ne.length;pe++)if(ne[pe]===K.getUTCDay()){Ae=!0;break}if(!Ae){let pe=!1;for(let xe=0;xe<ce.length;xe++)if(compareDateIgnoreTime(K,ce[xe])){pe=!0;break}pe||ue++}K.setUTCDate(K.getUTCDate()+1)}return toSerial(K)-1},YEAR:K=>parseDate(K).getUTCFullYear(),YEARFRAC:(K,J,ne)=>{if(K=parseDate(K),J=parseDate(J),K>J){const me=K;K=J,J=me}if(ne=H$2.accept(ne,Types$2.NUMBER,0),ne=Math.trunc(ne),ne<0||ne>4)throw FormulaError$7.VALUE;let oe=K.getUTCDate();const ce=K.getUTCMonth()+1,ue=K.getUTCFullYear();let Ae=J.getUTCDate();const pe=J.getUTCMonth()+1,xe=J.getUTCFullYear();switch(ne){case 0:return oe===31&&Ae===31?(oe=30,Ae=30):oe===31?oe=30:oe===30&&Ae===31&&(Ae=30),Math.abs(Ae+pe*30+xe*360-(oe+ce*30+ue*360))/360;case 1:if(xe-ue<2){const me=isLeapYear(ue)&&ue!==1900?366:365;return DateFunctions$1.DAYS(J,K)/me}else{const me=xe-ue+1,ye=(new Date(xe+1,0,1)-new Date(ue,0,1))/1e3/60/60/24/me;return DateFunctions$1.DAYS(J,K)/ye}case 2:return Math.abs(DateFunctions$1.DAYS(J,K)/360);case 3:return Math.abs(DateFunctions$1.DAYS(J,K)/365);case 4:return Math.abs(Ae+pe*30+xe*360-(oe+ce*30+ue*360))/360}}};var date=DateFunctions$1;const FormulaError$6=requireError(),{FormulaHelpers:FormulaHelpers$3,Types:Types$1}=requireHelpers(),H$1=FormulaHelpers$3,WebFunctions$1={ENCODEURL:K=>encodeURIComponent(H$1.accept(K,Types$1.STRING)),FILTERXML:()=>{},WEBSERVICE:(K,J)=>{throw FormulaError$6.ERROR("WEBSERVICE is not supported in sync mode.")}};var web=WebFunctions$1,VERSION="7.1.2";function isEmpty$1(K){return K&&K.length===0}function keys$2(K){return K==null?[]:Object.keys(K)}function values(K){for(var J=[],ne=Object.keys(K),oe=0;oe<ne.length;oe++)J.push(K[ne[oe]]);return J}function mapValues(K,J){for(var ne=[],oe=keys$2(K),ce=0;ce<oe.length;ce++){var ue=oe[ce];ne.push(J.call(null,K[ue],ue))}return ne}function map$1(K,J){for(var ne=[],oe=0;oe<K.length;oe++)ne.push(J.call(null,K[oe],oe));return ne}function flatten$1(K){for(var J=[],ne=0;ne<K.length;ne++){var oe=K[ne];Array.isArray(oe)?J=J.concat(flatten$1(oe)):J.push(oe)}return J}function first$1(K){return isEmpty$1(K)?void 0:K[0]}function last(K){var J=K&&K.length;return J?K[J-1]:void 0}function forEach(K,J){if(Array.isArray(K))for(var ne=0;ne<K.length;ne++)J.call(null,K[ne],ne);else if(isObject$6(K))for(var oe=keys$2(K),ne=0;ne<oe.length;ne++){var ce=oe[ne],ue=K[ce];J.call(null,ue,ce)}else throw Error("non exhaustive match")}function isString(K){return typeof K=="string"}function isUndefined(K){return K===void 0}function isFunction$4(K){return K instanceof Function}function drop$2(K,J){return J===void 0&&(J=1),K.slice(J,K.length)}function dropRight(K,J){return J===void 0&&(J=1),K.slice(0,K.length-J)}function filter$3(K,J){var ne=[];if(Array.isArray(K))for(var oe=0;oe<K.length;oe++){var ce=K[oe];J.call(null,ce)&&ne.push(ce)}return ne}function reject(K,J){return filter$3(K,function(ne){return!J(ne)})}function pick(K,J){for(var ne=Object.keys(K),oe={},ce=0;ce<ne.length;ce++){var ue=ne[ce],Ae=K[ue];J(Ae)&&(oe[ue]=Ae)}return oe}function has$1(K,J){return isObject$6(K)?K.hasOwnProperty(J):!1}function contains$1(K,J){return find$1(K,function(ne){return ne===J})!==void 0}function cloneArr(K){for(var J=[],ne=0;ne<K.length;ne++)J.push(K[ne]);return J}function cloneObj(K){var J={};for(var ne in K)Object.prototype.hasOwnProperty.call(K,ne)&&(J[ne]=K[ne]);return J}function find$1(K,J){for(var ne=0;ne<K.length;ne++){var oe=K[ne];if(J.call(null,oe))return oe}}function findAll(K,J){for(var ne=[],oe=0;oe<K.length;oe++){var ce=K[oe];J.call(null,ce)&&ne.push(ce)}return ne}function reduce$1(K,J,ne){for(var oe=Array.isArray(K),ce=oe?K:values(K),ue=oe?[]:keys$2(K),Ae=ne,pe=0;pe<ce.length;pe++)Ae=J.call(null,Ae,ce[pe],oe?pe:ue[pe]);return Ae}function compact(K){return reject(K,function(J){return J==null})}function uniq(K,J){J===void 0&&(J=function(oe){return oe});var ne=[];return reduce$1(K,function(oe,ce){var ue=J(ce);return contains$1(ne,ue)?oe:(ne.push(ue),oe.concat(ce))},[])}function isArray$4(K){return Array.isArray(K)}function isRegExp(K){return K instanceof RegExp}function isObject$6(K){return K instanceof Object}function every(K,J){for(var ne=0;ne<K.length;ne++)if(!J(K[ne],ne))return!1;return!0}function difference(K,J){return reject(K,function(ne){return contains$1(J,ne)})}function some(K,J){for(var ne=0;ne<K.length;ne++)if(J(K[ne]))return!0;return!1}function indexOf(K,J){for(var ne=0;ne<K.length;ne++)if(K[ne]===J)return ne;return-1}function assign(K){for(var J=[],ne=1;ne<arguments.length;ne++)J[ne-1]=arguments[ne];for(var oe=0;oe<J.length;oe++)for(var ce=J[oe],ue=keys$2(ce),Ae=0;Ae<ue.length;Ae++){var pe=ue[Ae];K[pe]=ce[pe]}return K}function assignNoOverwrite(K){for(var J=[],ne=1;ne<arguments.length;ne++)J[ne-1]=arguments[ne];for(var oe=0;oe<J.length;oe++)for(var ce=J[oe],ue=keys$2(ce),Ae=0;Ae<ue.length;Ae++){var pe=ue[Ae];has$1(K,pe)||(K[pe]=ce[pe])}return K}function defaults$1(){for(var K=[],J=0;J<arguments.length;J++)K[J]=arguments[J];return assignNoOverwrite.apply(null,[{}].concat(K))}function groupBy(K,J){var ne={};return forEach(K,function(oe){var ce=J(oe),ue=ne[ce];ue?ue.push(oe):ne[ce]=[oe]}),ne}function merge$1(K,J){for(var ne=cloneObj(K),oe=keys$2(J),ce=0;ce<oe.length;ce++){var ue=oe[ce],Ae=J[ue];ne[ue]=Ae}return ne}function NOOP(){}function IDENTITY(K){return K}function packArray(K){for(var J=[],ne=0;ne<K.length;ne++){var oe=K[ne];J.push(oe!==void 0?oe:void 0)}return J}function PRINT_ERROR(K){console&&console.error&&console.error("Error: "+K)}function PRINT_WARNING(K){console&&console.warn&&console.warn("Warning: "+K)}function isES2015MapSupported(){return typeof Map=="function"}function applyMixins(K,J){J.forEach(function(ne){var oe=ne.prototype;Object.getOwnPropertyNames(oe).forEach(function(ce){if(ce!=="constructor"){var ue=Object.getOwnPropertyDescriptor(oe,ce);ue&&(ue.get||ue.set)?Object.defineProperty(K.prototype,ce,ue):K.prototype[ce]=ne.prototype[ce]}})})}function toFastProperties(K){function J(){}J.prototype=K;var ne=new J;function oe(){return typeof ne.bar}return oe(),oe(),K}function peek(K){return K[K.length-1]}function timer$1(K){var J=new Date().getTime(),ne=K(),oe=new Date().getTime(),ce=oe-J;return{time:ce,value:ne}}var regexpToAst={exports:{}};(function(K){(function(J,ne){K.exports?K.exports=ne():J.regexpToAst=ne()})(typeof self<"u"?self:commonjsGlobal,function(){function J(){}J.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},J.prototype.restoreState=function($e){this.idx=$e.idx,this.input=$e.input,this.groupIdx=$e.groupIdx},J.prototype.pattern=function($e){this.idx=0,this.input=$e,this.groupIdx=0,this.consumeChar("/");var ke=this.disjunction();this.consumeChar("/");for(var je={type:"Flags",loc:{begin:this.idx,end:$e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":pe(je,"global");break;case"i":pe(je,"ignoreCase");break;case"m":pe(je,"multiLine");break;case"u":pe(je,"unicode");break;case"y":pe(je,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:je,value:ke,loc:this.loc(0)}},J.prototype.disjunction=function(){var $e=[],ke=this.idx;for($e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),$e.push(this.alternative());return{type:"Disjunction",value:$e,loc:this.loc(ke)}},J.prototype.alternative=function(){for(var $e=[],ke=this.idx;this.isTerm();)$e.push(this.term());return{type:"Alternative",value:$e,loc:this.loc(ke)}},J.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},J.prototype.assertion=function(){var $e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc($e)};case"$":return{type:"EndAnchor",loc:this.loc($e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc($e)};case"B":return{type:"NonWordBoundary",loc:this.loc($e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");var ke;switch(this.popChar()){case"=":ke="Lookahead";break;case"!":ke="NegativeLookahead";break}xe(ke);var je=this.disjunction();return this.consumeChar(")"),{type:ke,value:je,loc:this.loc($e)}}me()},J.prototype.quantifier=function($e){var ke,je=this.idx;switch(this.popChar()){case"*":ke={atLeast:0,atMost:1/0};break;case"+":ke={atLeast:1,atMost:1/0};break;case"?":ke={atLeast:0,atMost:1};break;case"{":var Ke=this.integerIncludingZero();switch(this.popChar()){case"}":ke={atLeast:Ke,atMost:Ke};break;case",":var Ye;this.isDigit()?(Ye=this.integerIncludingZero(),ke={atLeast:Ke,atMost:Ye}):ke={atLeast:Ke,atMost:1/0},this.consumeChar("}");break}if($e===!0&&ke===void 0)return;xe(ke);break}if(!($e===!0&&ke===void 0))return xe(ke),this.peekChar(0)==="?"?(this.consumeChar("?"),ke.greedy=!1):ke.greedy=!0,ke.type="Quantifier",ke.loc=this.loc(je),ke},J.prototype.atom=function(){var $e,ke=this.idx;switch(this.peekChar()){case".":$e=this.dotAll();break;case"\\":$e=this.atomEscape();break;case"[":$e=this.characterClass();break;case"(":$e=this.group();break}return $e===void 0&&this.isPatternCharacter()&&($e=this.patternCharacter()),xe($e),$e.loc=this.loc(ke),this.isQuantifier()&&($e.quantifier=this.quantifier()),$e},J.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[ue(`
`),ue("\r"),ue("\u2028"),ue("\u2029")]}},J.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},J.prototype.decimalEscapeAtom=function(){var $e=this.positiveInteger();return{type:"GroupBackReference",value:$e}},J.prototype.characterClassEscape=function(){var $e,ke=!1;switch(this.popChar()){case"d":$e=ye;break;case"D":$e=ye,ke=!0;break;case"s":$e=Te;break;case"S":$e=Te,ke=!0;break;case"w":$e=Se;break;case"W":$e=Se,ke=!0;break}return xe($e),{type:"Set",value:$e,complement:ke}},J.prototype.controlEscapeAtom=function(){var $e;switch(this.popChar()){case"f":$e=ue("\f");break;case"n":$e=ue(`
`);break;case"r":$e=ue("\r");break;case"t":$e=ue("	");break;case"v":$e=ue("\v");break}return xe($e),{type:"Character",value:$e}},J.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var $e=this.popChar();if(/[a-zA-Z]/.test($e)===!1)throw Error("Invalid ");var ke=$e.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:ke}},J.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:ue("\0")}},J.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},J.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},J.prototype.identityEscapeAtom=function(){var $e=this.popChar();return{type:"Character",value:ue($e)}},J.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:var $e=this.popChar();return{type:"Character",value:ue($e)}}},J.prototype.characterClass=function(){var $e=[],ke=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),ke=!0);this.isClassAtom();){var je=this.classAtom(),Ke=je.type==="Character";if(Ke&&this.isRangeDash()){this.consumeChar("-");var Ye=this.classAtom(),ze=Ye.type==="Character";if(ze){if(Ye.value<je.value)throw Error("Range out of order in character class");$e.push({from:je.value,to:Ye.value})}else Ae(je.value,$e),$e.push(ue("-")),Ae(Ye.value,$e)}else Ae(je.value,$e)}return this.consumeChar("]"),{type:"Set",complement:ke,value:$e}},J.prototype.classAtom=function(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},J.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:ue("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},J.prototype.group=function(){var $e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),$e=!1;break;default:this.groupIdx++;break}var ke=this.disjunction();this.consumeChar(")");var je={type:"Group",capturing:$e,value:ke};return $e&&(je.idx=this.groupIdx),je},J.prototype.positiveInteger=function(){var $e=this.popChar();if(ce.test($e)===!1)throw Error("Expecting a positive integer");for(;oe.test(this.peekChar(0));)$e+=this.popChar();return parseInt($e,10)},J.prototype.integerIncludingZero=function(){var $e=this.popChar();if(oe.test($e)===!1)throw Error("Expecting an integer");for(;oe.test(this.peekChar(0));)$e+=this.popChar();return parseInt($e,10)},J.prototype.patternCharacter=function(){var $e=this.popChar();switch($e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:ue($e)}}},J.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},J.prototype.isRangeDash=function(){return this.peekChar()==="-"&&this.isClassAtom(1)},J.prototype.isDigit=function(){return oe.test(this.peekChar(0))},J.prototype.isClassAtom=function($e){switch($e===void 0&&($e=0),this.peekChar($e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},J.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},J.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},J.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}},J.prototype.isQuantifier=function(){var $e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState($e)}},J.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},J.prototype.parseHexDigits=function($e){for(var ke="",je=0;je<$e;je++){var Ke=this.popChar();if(ne.test(Ke)===!1)throw Error("Expecting a HexDecimal digits");ke+=Ke}var Ye=parseInt(ke,16);return{type:"Character",value:Ye}},J.prototype.peekChar=function($e){return $e===void 0&&($e=0),this.input[this.idx+$e]},J.prototype.popChar=function(){var $e=this.peekChar(0);return this.consumeChar(),$e},J.prototype.consumeChar=function($e){if($e!==void 0&&this.input[this.idx]!==$e)throw Error("Expected: '"+$e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},J.prototype.loc=function($e){return{begin:$e,end:this.idx}};var ne=/[0-9a-fA-F]/,oe=/[0-9]/,ce=/[1-9]/;function ue($e){return $e.charCodeAt(0)}function Ae($e,ke){$e.length!==void 0?$e.forEach(function(je){ke.push(je)}):ke.push($e)}function pe($e,ke){if($e[ke]===!0)throw"duplicate flag "+ke;$e[ke]=!0}function xe($e){if($e===void 0)throw Error("Internal Error - Should never get here!")}function me(){throw Error("Internal Error - Should never get here!")}var ge,ye=[];for(ge=ue("0");ge<=ue("9");ge++)ye.push(ge);var Se=[ue("_")].concat(ye);for(ge=ue("a");ge<=ue("z");ge++)Se.push(ge);for(ge=ue("A");ge<=ue("Z");ge++)Se.push(ge);var Te=[ue(" "),ue("\f"),ue(`
`),ue("\r"),ue("	"),ue("\v"),ue("	"),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue(""),ue("\u2028"),ue("\u2029"),ue(""),ue(""),ue(""),ue("\uFEFF")];function Ne(){}return Ne.prototype.visitChildren=function($e){for(var ke in $e){var je=$e[ke];$e.hasOwnProperty(ke)&&(je.type!==void 0?this.visit(je):Array.isArray(je)&&je.forEach(function(Ke){this.visit(Ke)},this))}},Ne.prototype.visit=function($e){switch($e.type){case"Pattern":this.visitPattern($e);break;case"Flags":this.visitFlags($e);break;case"Disjunction":this.visitDisjunction($e);break;case"Alternative":this.visitAlternative($e);break;case"StartAnchor":this.visitStartAnchor($e);break;case"EndAnchor":this.visitEndAnchor($e);break;case"WordBoundary":this.visitWordBoundary($e);break;case"NonWordBoundary":this.visitNonWordBoundary($e);break;case"Lookahead":this.visitLookahead($e);break;case"NegativeLookahead":this.visitNegativeLookahead($e);break;case"Character":this.visitCharacter($e);break;case"Set":this.visitSet($e);break;case"Group":this.visitGroup($e);break;case"GroupBackReference":this.visitGroupBackReference($e);break;case"Quantifier":this.visitQuantifier($e);break}this.visitChildren($e)},Ne.prototype.visitPattern=function($e){},Ne.prototype.visitFlags=function($e){},Ne.prototype.visitDisjunction=function($e){},Ne.prototype.visitAlternative=function($e){},Ne.prototype.visitStartAnchor=function($e){},Ne.prototype.visitEndAnchor=function($e){},Ne.prototype.visitWordBoundary=function($e){},Ne.prototype.visitNonWordBoundary=function($e){},Ne.prototype.visitLookahead=function($e){},Ne.prototype.visitNegativeLookahead=function($e){},Ne.prototype.visitCharacter=function($e){},Ne.prototype.visitSet=function($e){},Ne.prototype.visitGroup=function($e){},Ne.prototype.visitGroupBackReference=function($e){},Ne.prototype.visitQuantifier=function($e){},{RegExpParser:J,BaseRegExpVisitor:Ne,VERSION:"0.5.0"}})})(regexpToAst);var regexpToAstExports=regexpToAst.exports,regExpAstCache={},regExpParser=new regexpToAstExports.RegExpParser;function getRegExpAst(K){var J=K.toString();if(regExpAstCache.hasOwnProperty(J))return regExpAstCache[J];var ne=regExpParser.pattern(J);return regExpAstCache[J]=ne,ne}function clearRegExpParserCache(){regExpAstCache={}}var __extends$d=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),complementErrorMessage="Complement Sets are not supported for first char optimization",failedOptimizationPrefixMsg=`Unable to use "first char" lexer optimizations:
`;function getOptimizedStartCodesIndices(K,J){J===void 0&&(J=!1);try{var ne=getRegExpAst(K),oe=firstCharOptimizedIndices(ne.value,{},ne.flags.ignoreCase);return oe}catch(ue){if(ue.message===complementErrorMessage)J&&PRINT_WARNING(""+failedOptimizationPrefixMsg+("	Unable to optimize: < "+K.toString()+` >
`)+`	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{var ce="";J&&(ce=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),PRINT_ERROR(failedOptimizationPrefixMsg+`
`+("	Failed parsing: < "+K.toString()+` >
`)+("	Using the regexp-to-ast library version: "+regexpToAstExports.VERSION+`
`)+"	Please open an issue at: https://github.com/bd82/regexp-to-ast/issues"+ce)}}return[]}function firstCharOptimizedIndices(K,J,ne){switch(K.type){case"Disjunction":for(var oe=0;oe<K.value.length;oe++)firstCharOptimizedIndices(K.value[oe],J,ne);break;case"Alternative":for(var ce=K.value,oe=0;oe<ce.length;oe++){var ue=ce[oe];switch(ue.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var Ae=ue;switch(Ae.type){case"Character":addOptimizedIdxToResult(Ae.value,J,ne);break;case"Set":if(Ae.complement===!0)throw Error(complementErrorMessage);forEach(Ae.value,function(me){if(typeof me=="number")addOptimizedIdxToResult(me,J,ne);else{var ge=me;if(ne===!0)for(var ye=ge.from;ye<=ge.to;ye++)addOptimizedIdxToResult(ye,J,ne);else{for(var ye=ge.from;ye<=ge.to&&ye<minOptimizationVal;ye++)addOptimizedIdxToResult(ye,J,ne);if(ge.to>=minOptimizationVal)for(var Se=ge.from>=minOptimizationVal?ge.from:minOptimizationVal,Te=ge.to,Ne=charCodeToOptimizedIndex(Se),$e=charCodeToOptimizedIndex(Te),ke=Ne;ke<=$e;ke++)J[ke]=ke}}});break;case"Group":firstCharOptimizedIndices(Ae.value,J,ne);break;default:throw Error("Non Exhaustive Match")}var pe=Ae.quantifier!==void 0&&Ae.quantifier.atLeast===0;if(Ae.type==="Group"&&isWholeOptional(Ae)===!1||Ae.type!=="Group"&&pe===!1)break}break;default:throw Error("non exhaustive match!")}return values(J)}function addOptimizedIdxToResult(K,J,ne){var oe=charCodeToOptimizedIndex(K);J[oe]=oe,ne===!0&&handleIgnoreCase(K,J)}function handleIgnoreCase(K,J){var ne=String.fromCharCode(K),oe=ne.toUpperCase();if(oe!==ne){var ce=charCodeToOptimizedIndex(oe.charCodeAt(0));J[ce]=ce}else{var ue=ne.toLowerCase();if(ue!==ne){var ce=charCodeToOptimizedIndex(ue.charCodeAt(0));J[ce]=ce}}}function findCode(K,J){return find$1(K.value,function(ne){if(typeof ne=="number")return contains$1(J,ne);var oe=ne;return find$1(J,function(ce){return oe.from<=ce&&ce<=oe.to})!==void 0})}function isWholeOptional(K){return K.quantifier&&K.quantifier.atLeast===0?!0:K.value?isArray$4(K.value)?every(K.value,isWholeOptional):isWholeOptional(K.value):!1}var CharCodeFinder=function(K){__extends$d(J,K);function J(ne){var oe=K.call(this)||this;return oe.targetCharCodes=ne,oe.found=!1,oe}return J.prototype.visitChildren=function(ne){if(this.found!==!0){switch(ne.type){case"Lookahead":this.visitLookahead(ne);return;case"NegativeLookahead":this.visitNegativeLookahead(ne);return}K.prototype.visitChildren.call(this,ne)}},J.prototype.visitCharacter=function(ne){contains$1(this.targetCharCodes,ne.value)&&(this.found=!0)},J.prototype.visitSet=function(ne){ne.complement?findCode(ne,this.targetCharCodes)===void 0&&(this.found=!0):findCode(ne,this.targetCharCodes)!==void 0&&(this.found=!0)},J}(regexpToAstExports.BaseRegExpVisitor);function canMatchCharCode(K,J){if(J instanceof RegExp){var ne=getRegExpAst(J),oe=new CharCodeFinder(K);return oe.visit(ne),oe.found}else return find$1(J,function(ce){return contains$1(K,ce.charCodeAt(0))})!==void 0}var __extends$c=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),PATTERN="PATTERN",DEFAULT_MODE="defaultMode",MODES="modes",SUPPORT_STICKY=typeof new RegExp("(?:)").sticky=="boolean";function analyzeTokenTypes(K,J){J=defaults$1(J,{useSticky:SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:function(Ke,Ye){return Ye()}});var ne=J.tracer;ne("initCharCodeToOptimizedIndexMap",function(){initCharCodeToOptimizedIndexMap()});var oe;ne("Reject Lexer.NA",function(){oe=reject(K,function(Ke){return Ke[PATTERN]===Lexer$1.NA})});var ce=!1,ue;ne("Transform Patterns",function(){ce=!1,ue=map$1(oe,function(Ke){var Ye=Ke[PATTERN];if(isRegExp(Ye)){var ze=Ye.source;return ze.length===1&&ze!=="^"&&ze!=="$"&&ze!=="."&&!Ye.ignoreCase?ze:ze.length===2&&ze[0]==="\\"&&!contains$1(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],ze[1])?ze[1]:J.useSticky?addStickyFlag(Ye):addStartOfInput(Ye)}else{if(isFunction$4(Ye))return ce=!0,{exec:Ye};if(has$1(Ye,"exec"))return ce=!0,Ye;if(typeof Ye=="string"){if(Ye.length===1)return Ye;var Xe=Ye.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),Je=new RegExp(Xe);return J.useSticky?addStickyFlag(Je):addStartOfInput(Je)}else throw Error("non exhaustive match")}})});var Ae,pe,xe,me,ge;ne("misc mapping",function(){Ae=map$1(oe,function(Ke){return Ke.tokenTypeIdx}),pe=map$1(oe,function(Ke){var Ye=Ke.GROUP;if(Ye!==Lexer$1.SKIPPED){if(isString(Ye))return Ye;if(isUndefined(Ye))return!1;throw Error("non exhaustive match")}}),xe=map$1(oe,function(Ke){var Ye=Ke.LONGER_ALT;if(Ye){var ze=indexOf(oe,Ye);return ze}}),me=map$1(oe,function(Ke){return Ke.PUSH_MODE}),ge=map$1(oe,function(Ke){return has$1(Ke,"POP_MODE")})});var ye;ne("Line Terminator Handling",function(){var Ke=getCharCodes(J.lineTerminatorCharacters);ye=map$1(oe,function(Ye){return!1}),J.positionTracking!=="onlyOffset"&&(ye=map$1(oe,function(Ye){if(has$1(Ye,"LINE_BREAKS"))return Ye.LINE_BREAKS;if(checkLineBreaksIssues(Ye,Ke)===!1)return canMatchCharCode(Ke,Ye.PATTERN)}))});var Se,Te,Ne,$e;ne("Misc Mapping #2",function(){Se=map$1(oe,isCustomPattern),Te=map$1(ue,isShortPattern),Ne=reduce$1(oe,function(Ke,Ye){var ze=Ye.GROUP;return isString(ze)&&ze!==Lexer$1.SKIPPED&&(Ke[ze]=[]),Ke},{}),$e=map$1(ue,function(Ke,Ye){return{pattern:ue[Ye],longerAlt:xe[Ye],canLineTerminator:ye[Ye],isCustom:Se[Ye],short:Te[Ye],group:pe[Ye],push:me[Ye],pop:ge[Ye],tokenTypeIdx:Ae[Ye],tokenType:oe[Ye]}})});var ke=!0,je=[];return J.safeMode||ne("First Char Optimization",function(){je=reduce$1(oe,function(Ke,Ye,ze){if(typeof Ye.PATTERN=="string"){var Xe=Ye.PATTERN.charCodeAt(0),Je=charCodeToOptimizedIndex(Xe);addToMapOfArrays(Ke,Je,$e[ze])}else if(isArray$4(Ye.START_CHARS_HINT)){var rt;forEach(Ye.START_CHARS_HINT,function(et){var nt=typeof et=="string"?et.charCodeAt(0):et,Ge=charCodeToOptimizedIndex(nt);rt!==Ge&&(rt=Ge,addToMapOfArrays(Ke,Ge,$e[ze]))})}else if(isRegExp(Ye.PATTERN))if(Ye.PATTERN.unicode)ke=!1,J.ensureOptimizations&&PRINT_ERROR(""+failedOptimizationPrefixMsg+("	Unable to analyze < "+Ye.PATTERN.toString()+` > pattern.
`)+`	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{var Ze=getOptimizedStartCodesIndices(Ye.PATTERN,J.ensureOptimizations);isEmpty$1(Ze)&&(ke=!1),forEach(Ze,function(et){addToMapOfArrays(Ke,et,$e[ze])})}else J.ensureOptimizations&&PRINT_ERROR(""+failedOptimizationPrefixMsg+("	TokenType: <"+Ye.name+`> is using a custom token pattern without providing <start_chars_hint> parameter.
`)+`	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),ke=!1;return Ke},[])}),ne("ArrayPacking",function(){je=packArray(je)}),{emptyGroups:Ne,patternIdxToConfig:$e,charCodeToPatternIdxToConfig:je,hasCustom:ce,canBeOptimized:ke}}function validatePatterns(K,J){var ne=[],oe=findMissingPatterns(K);ne=ne.concat(oe.errors);var ce=findInvalidPatterns(oe.valid),ue=ce.valid;return ne=ne.concat(ce.errors),ne=ne.concat(validateRegExpPattern(ue)),ne=ne.concat(findInvalidGroupType(ue)),ne=ne.concat(findModesThatDoNotExist(ue,J)),ne=ne.concat(findUnreachablePatterns(ue)),ne}function validateRegExpPattern(K){var J=[],ne=filter$3(K,function(oe){return isRegExp(oe[PATTERN])});return J=J.concat(findEndOfInputAnchor(ne)),J=J.concat(findStartOfInputAnchor(ne)),J=J.concat(findUnsupportedFlags(ne)),J=J.concat(findDuplicatePatterns(ne)),J=J.concat(findEmptyMatchRegExps(ne)),J}function findMissingPatterns(K){var J=filter$3(K,function(ce){return!has$1(ce,PATTERN)}),ne=map$1(J,function(ce){return{message:"Token Type: ->"+ce.name+"<- missing static 'PATTERN' property",type:LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[ce]}}),oe=difference(K,J);return{errors:ne,valid:oe}}function findInvalidPatterns(K){var J=filter$3(K,function(ce){var ue=ce[PATTERN];return!isRegExp(ue)&&!isFunction$4(ue)&&!has$1(ue,"exec")&&!isString(ue)}),ne=map$1(J,function(ce){return{message:"Token Type: ->"+ce.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[ce]}}),oe=difference(K,J);return{errors:ne,valid:oe}}var end_of_input=/[^\\][\$]/;function findEndOfInputAnchor(K){var J=function(ce){__extends$c(ue,ce);function ue(){var Ae=ce!==null&&ce.apply(this,arguments)||this;return Ae.found=!1,Ae}return ue.prototype.visitEndAnchor=function(Ae){this.found=!0},ue}(regexpToAstExports.BaseRegExpVisitor),ne=filter$3(K,function(ce){var ue=ce[PATTERN];try{var Ae=getRegExpAst(ue),pe=new J;return pe.visit(Ae),pe.found}catch{return end_of_input.test(ue.source)}}),oe=map$1(ne,function(ce){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+ce.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[ce]}});return oe}function findEmptyMatchRegExps(K){var J=filter$3(K,function(oe){var ce=oe[PATTERN];return ce.test("")}),ne=map$1(J,function(oe){return{message:"Token Type: ->"+oe.name+"<- static 'PATTERN' must not match an empty string",type:LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[oe]}});return ne}var start_of_input=/[^\\[][\^]|^\^/;function findStartOfInputAnchor(K){var J=function(ce){__extends$c(ue,ce);function ue(){var Ae=ce!==null&&ce.apply(this,arguments)||this;return Ae.found=!1,Ae}return ue.prototype.visitStartAnchor=function(Ae){this.found=!0},ue}(regexpToAstExports.BaseRegExpVisitor),ne=filter$3(K,function(ce){var ue=ce[PATTERN];try{var Ae=getRegExpAst(ue),pe=new J;return pe.visit(Ae),pe.found}catch{return start_of_input.test(ue.source)}}),oe=map$1(ne,function(ce){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+ce.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[ce]}});return oe}function findUnsupportedFlags(K){var J=filter$3(K,function(oe){var ce=oe[PATTERN];return ce instanceof RegExp&&(ce.multiline||ce.global)}),ne=map$1(J,function(oe){return{message:"Token Type: ->"+oe.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[oe]}});return ne}function findDuplicatePatterns(K){var J=[],ne=map$1(K,function(ue){return reduce$1(K,function(Ae,pe){return ue.PATTERN.source===pe.PATTERN.source&&!contains$1(J,pe)&&pe.PATTERN!==Lexer$1.NA&&(J.push(pe),Ae.push(pe)),Ae},[])});ne=compact(ne);var oe=filter$3(ne,function(ue){return ue.length>1}),ce=map$1(oe,function(ue){var Ae=map$1(ue,function(xe){return xe.name}),pe=first$1(ue).PATTERN;return{message:"The same RegExp pattern ->"+pe+"<-"+("has been used in all of the following Token Types: "+Ae.join(", ")+" <-"),type:LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:ue}});return ce}function findInvalidGroupType(K){var J=filter$3(K,function(oe){if(!has$1(oe,"GROUP"))return!1;var ce=oe.GROUP;return ce!==Lexer$1.SKIPPED&&ce!==Lexer$1.NA&&!isString(ce)}),ne=map$1(J,function(oe){return{message:"Token Type: ->"+oe.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[oe]}});return ne}function findModesThatDoNotExist(K,J){var ne=filter$3(K,function(ce){return ce.PUSH_MODE!==void 0&&!contains$1(J,ce.PUSH_MODE)}),oe=map$1(ne,function(ce){var ue="Token Type: ->"+ce.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+ce.PUSH_MODE+"<-which does not exist";return{message:ue,type:LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[ce]}});return oe}function findUnreachablePatterns(K){var J=[],ne=reduce$1(K,function(oe,ce,ue){var Ae=ce.PATTERN;return Ae===Lexer$1.NA||(isString(Ae)?oe.push({str:Ae,idx:ue,tokenType:ce}):isRegExp(Ae)&&noMetaChar(Ae)&&oe.push({str:Ae.source,idx:ue,tokenType:ce})),oe},[]);return forEach(K,function(oe,ce){forEach(ne,function(ue){var Ae=ue.str,pe=ue.idx,xe=ue.tokenType;if(ce<pe&&testTokenType(Ae,oe.PATTERN)){var me="Token: ->"+xe.name+`<- can never be matched.
`+("Because it appears AFTER the Token Type ->"+oe.name+"<-")+`in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;J.push({message:me,type:LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[oe,xe]})}})}),J}function testTokenType(K,J){if(isRegExp(J)){var ne=J.exec(K);return ne!==null&&ne.index===0}else{if(isFunction$4(J))return J(K,0,[],{});if(has$1(J,"exec"))return J.exec(K,0,[],{});if(typeof J=="string")return J===K;throw Error("non exhaustive match")}}function noMetaChar(K){var J=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return find$1(J,function(ne){return K.source.indexOf(ne)!==-1})===void 0}function addStartOfInput(K){var J=K.ignoreCase?"i":"";return new RegExp("^(?:"+K.source+")",J)}function addStickyFlag(K){var J=K.ignoreCase?"iy":"y";return new RegExp(""+K.source,J)}function performRuntimeChecks(K,J,ne){var oe=[];return has$1(K,DEFAULT_MODE)||oe.push({message:"A MultiMode Lexer cannot be initialized without a <"+DEFAULT_MODE+`> property in its definition
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),has$1(K,MODES)||oe.push({message:"A MultiMode Lexer cannot be initialized without a <"+MODES+`> property in its definition
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),has$1(K,MODES)&&has$1(K,DEFAULT_MODE)&&!has$1(K.modes,K.defaultMode)&&oe.push({message:"A MultiMode Lexer cannot be initialized with a "+DEFAULT_MODE+": <"+K.defaultMode+`>which does not exist
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),has$1(K,MODES)&&forEach(K.modes,function(ce,ue){forEach(ce,function(Ae,pe){isUndefined(Ae)&&oe.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:"+("<"+ue+"> at index: <"+pe+`>
`),type:LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),oe}function performWarningRuntimeChecks(K,J,ne){var oe=[],ce=!1,ue=compact(flatten$1(mapValues(K.modes,function(xe){return xe}))),Ae=reject(ue,function(xe){return xe[PATTERN]===Lexer$1.NA}),pe=getCharCodes(ne);return J&&forEach(Ae,function(xe){var me=checkLineBreaksIssues(xe,pe);if(me!==!1){var ge=buildLineBreakIssueMessage(xe,me),ye={message:ge,type:me.issue,tokenType:xe};oe.push(ye)}else has$1(xe,"LINE_BREAKS")?xe.LINE_BREAKS===!0&&(ce=!0):canMatchCharCode(pe,xe.PATTERN)&&(ce=!0)}),J&&!ce&&oe.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),oe}function cloneEmptyGroups(K){var J={},ne=keys$2(K);return forEach(ne,function(oe){var ce=K[oe];if(isArray$4(ce))J[oe]=[];else throw Error("non exhaustive match")}),J}function isCustomPattern(K){var J=K.PATTERN;if(isRegExp(J))return!1;if(isFunction$4(J))return!0;if(has$1(J,"exec"))return!0;if(isString(J))return!1;throw Error("non exhaustive match")}function isShortPattern(K){return isString(K)&&K.length===1?K.charCodeAt(0):!1}var LineTerminatorOptimizedTester={test:function(K){for(var J=K.length,ne=this.lastIndex;ne<J;ne++){var oe=K.charCodeAt(ne);if(oe===10)return this.lastIndex=ne+1,!0;if(oe===13)return K.charCodeAt(ne+1)===10?this.lastIndex=ne+2:this.lastIndex=ne+1,!0}return!1},lastIndex:0};function checkLineBreaksIssues(K,J){if(has$1(K,"LINE_BREAKS"))return!1;if(isRegExp(K.PATTERN)){try{canMatchCharCode(J,K.PATTERN)}catch(ne){return{issue:LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:ne.message}}return!1}else{if(isString(K.PATTERN))return!1;if(isCustomPattern(K))return{issue:LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function buildLineBreakIssueMessage(K,J){if(J.issue===LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
`+("	The problem is in the <"+K.name+`> Token Type
`)+("	 Root cause: "+J.errMsg+`.
`)+"	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(J.issue===LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
`+("	The problem is in the <"+K.name+`> Token Type
`)+"	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}function getCharCodes(K){var J=map$1(K,function(ne){return isString(ne)&&ne.length>0?ne.charCodeAt(0):ne});return J}function addToMapOfArrays(K,J,ne){K[J]===void 0?K[J]=[ne]:K[J].push(ne)}var minOptimizationVal=256;function charCodeToOptimizedIndex(K){return K<minOptimizationVal?K:charCodeToOptimizedIdxMap[K]}var charCodeToOptimizedIdxMap=[];function initCharCodeToOptimizedIndexMap(){if(isEmpty$1(charCodeToOptimizedIdxMap)){charCodeToOptimizedIdxMap=new Array(65536);for(var K=0;K<65536;K++)charCodeToOptimizedIdxMap[K]=K>255?255+~~(K/255):K}}function tokenStructuredMatcher(K,J){var ne=K.tokenTypeIdx;return ne===J.tokenTypeIdx?!0:J.isParent===!0&&J.categoryMatchesMap[ne]===!0}function tokenStructuredMatcherNoCategories(K,J){return K.tokenTypeIdx===J.tokenTypeIdx}var tokenShortNameIdx=1,tokenIdxToClass={};function augmentTokenTypes(K){var J=expandCategories(K);assignTokenDefaultProps(J),assignCategoriesMapProp(J),assignCategoriesTokensProp(J),forEach(J,function(ne){ne.isParent=ne.categoryMatches.length>0})}function expandCategories(K){for(var J=cloneArr(K),ne=K,oe=!0;oe;){ne=compact(flatten$1(map$1(ne,function(ue){return ue.CATEGORIES})));var ce=difference(ne,J);J=J.concat(ce),isEmpty$1(ce)?oe=!1:ne=ce}return J}function assignTokenDefaultProps(K){forEach(K,function(J){hasShortKeyProperty(J)||(tokenIdxToClass[tokenShortNameIdx]=J,J.tokenTypeIdx=tokenShortNameIdx++),hasCategoriesProperty(J)&&!isArray$4(J.CATEGORIES)&&(J.CATEGORIES=[J.CATEGORIES]),hasCategoriesProperty(J)||(J.CATEGORIES=[]),hasExtendingTokensTypesProperty(J)||(J.categoryMatches=[]),hasExtendingTokensTypesMapProperty(J)||(J.categoryMatchesMap={})})}function assignCategoriesTokensProp(K){forEach(K,function(J){J.categoryMatches=[],forEach(J.categoryMatchesMap,function(ne,oe){J.categoryMatches.push(tokenIdxToClass[oe].tokenTypeIdx)})})}function assignCategoriesMapProp(K){forEach(K,function(J){singleAssignCategoriesToksMap([],J)})}function singleAssignCategoriesToksMap(K,J){forEach(K,function(ne){J.categoryMatchesMap[ne.tokenTypeIdx]=!0}),forEach(J.CATEGORIES,function(ne){var oe=K.concat(J);contains$1(oe,ne)||singleAssignCategoriesToksMap(oe,ne)})}function hasShortKeyProperty(K){return has$1(K,"tokenTypeIdx")}function hasCategoriesProperty(K){return has$1(K,"CATEGORIES")}function hasExtendingTokensTypesProperty(K){return has$1(K,"categoryMatches")}function hasExtendingTokensTypesMapProperty(K){return has$1(K,"categoryMatchesMap")}function isTokenType(K){return has$1(K,"tokenTypeIdx")}var defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(K){return"Unable to pop Lexer Mode after encountering Token ->"+K.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(K,J,ne,oe,ce){return"unexpected character: ->"+K.charAt(J)+"<- at offset: "+J+","+(" skipped "+ne+" characters.")}},LexerDefinitionErrorType;(function(K){K[K.MISSING_PATTERN=0]="MISSING_PATTERN",K[K.INVALID_PATTERN=1]="INVALID_PATTERN",K[K.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",K[K.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",K[K.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",K[K.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",K[K.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",K[K.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",K[K.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",K[K.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",K[K.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",K[K.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",K[K.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",K[K.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",K[K.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",K[K.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",K[K.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"})(LexerDefinitionErrorType||(LexerDefinitionErrorType={}));var DEFAULT_LEXER_CONFIG={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1};Object.freeze(DEFAULT_LEXER_CONFIG);var Lexer$1=function(){function K(J,ne){var oe=this;if(ne===void 0&&(ne=DEFAULT_LEXER_CONFIG),this.lexerDefinition=J,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},typeof ne=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=merge$1(DEFAULT_LEXER_CONFIG,ne);var ce=this.config.traceInitPerf;ce===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof ce=="number"&&(this.traceInitMaxIdent=ce,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",function(){var ue,Ae=!0;oe.TRACE_INIT("Lexer Config handling",function(){if(oe.config.lineTerminatorsPattern===DEFAULT_LEXER_CONFIG.lineTerminatorsPattern)oe.config.lineTerminatorsPattern=LineTerminatorOptimizedTester;else if(oe.config.lineTerminatorCharacters===DEFAULT_LEXER_CONFIG.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(ne.safeMode&&ne.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');oe.trackStartLines=/full|onlyStart/i.test(oe.config.positionTracking),oe.trackEndLines=/full/i.test(oe.config.positionTracking),isArray$4(J)?(ue={modes:{}},ue.modes[DEFAULT_MODE]=cloneArr(J),ue[DEFAULT_MODE]=DEFAULT_MODE):(Ae=!1,ue=cloneObj(J))}),oe.config.skipValidations===!1&&(oe.TRACE_INIT("performRuntimeChecks",function(){oe.lexerDefinitionErrors=oe.lexerDefinitionErrors.concat(performRuntimeChecks(ue,oe.trackStartLines,oe.config.lineTerminatorCharacters))}),oe.TRACE_INIT("performWarningRuntimeChecks",function(){oe.lexerDefinitionWarning=oe.lexerDefinitionWarning.concat(performWarningRuntimeChecks(ue,oe.trackStartLines,oe.config.lineTerminatorCharacters))})),ue.modes=ue.modes?ue.modes:{},forEach(ue.modes,function(ge,ye){ue.modes[ye]=reject(ge,function(Se){return isUndefined(Se)})});var pe=keys$2(ue.modes);if(forEach(ue.modes,function(ge,ye){oe.TRACE_INIT("Mode: <"+ye+"> processing",function(){if(oe.modes.push(ye),oe.config.skipValidations===!1&&oe.TRACE_INIT("validatePatterns",function(){oe.lexerDefinitionErrors=oe.lexerDefinitionErrors.concat(validatePatterns(ge,pe))}),isEmpty$1(oe.lexerDefinitionErrors)){augmentTokenTypes(ge);var Se;oe.TRACE_INIT("analyzeTokenTypes",function(){Se=analyzeTokenTypes(ge,{lineTerminatorCharacters:oe.config.lineTerminatorCharacters,positionTracking:ne.positionTracking,ensureOptimizations:ne.ensureOptimizations,safeMode:ne.safeMode,tracer:oe.TRACE_INIT.bind(oe)})}),oe.patternIdxToConfig[ye]=Se.patternIdxToConfig,oe.charCodeToPatternIdxToConfig[ye]=Se.charCodeToPatternIdxToConfig,oe.emptyGroups=merge$1(oe.emptyGroups,Se.emptyGroups),oe.hasCustom=Se.hasCustom||oe.hasCustom,oe.canModeBeOptimized[ye]=Se.canBeOptimized}})}),oe.defaultMode=ue.defaultMode,!isEmpty$1(oe.lexerDefinitionErrors)&&!oe.config.deferDefinitionErrorsHandling){var xe=map$1(oe.lexerDefinitionErrors,function(ge){return ge.message}),me=xe.join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+me)}forEach(oe.lexerDefinitionWarning,function(ge){PRINT_WARNING(ge.message)}),oe.TRACE_INIT("Choosing sub-methods implementations",function(){if(SUPPORT_STICKY?(oe.chopInput=IDENTITY,oe.match=oe.matchWithTest):(oe.updateLastIndex=NOOP,oe.match=oe.matchWithExec),Ae&&(oe.handleModes=NOOP),oe.trackStartLines===!1&&(oe.computeNewColumn=IDENTITY),oe.trackEndLines===!1&&(oe.updateTokenEndLineColumnLocation=NOOP),/full/i.test(oe.config.positionTracking))oe.createTokenInstance=oe.createFullToken;else if(/onlyStart/i.test(oe.config.positionTracking))oe.createTokenInstance=oe.createStartOnlyToken;else if(/onlyOffset/i.test(oe.config.positionTracking))oe.createTokenInstance=oe.createOffsetOnlyToken;else throw Error('Invalid <positionTracking> config option: "'+oe.config.positionTracking+'"');oe.hasCustom?(oe.addToken=oe.addTokenUsingPush,oe.handlePayload=oe.handlePayloadWithCustom):(oe.addToken=oe.addTokenUsingMemberAccess,oe.handlePayload=oe.handlePayloadNoCustom)}),oe.TRACE_INIT("Failed Optimization Warnings",function(){var ge=reduce$1(oe.canModeBeOptimized,function(ye,Se,Te){return Se===!1&&ye.push(Te),ye},[]);if(ne.ensureOptimizations&&!isEmpty$1(ge))throw Error("Lexer Modes: < "+ge.join(", ")+` > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),oe.TRACE_INIT("clearRegExpParserCache",function(){clearRegExpParserCache()}),oe.TRACE_INIT("toFastProperties",function(){toFastProperties(oe)})})}return K.prototype.tokenize=function(J,ne){if(ne===void 0&&(ne=this.defaultMode),!isEmpty$1(this.lexerDefinitionErrors)){var oe=map$1(this.lexerDefinitionErrors,function(Ae){return Ae.message}),ce=oe.join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+ce)}var ue=this.tokenizeInternal(J,ne);return ue},K.prototype.tokenizeInternal=function(J,ne){var oe=this,ce,ue,Ae,pe,xe,me,ge,ye,Se,Te,Ne,$e,ke,je,Ke=J,Ye=Ke.length,ze=0,Xe=0,Je=this.hasCustom?0:Math.floor(J.length/10),rt=new Array(Je),Ze=[],et=this.trackStartLines?1:void 0,nt=this.trackStartLines?1:void 0,Ge=cloneEmptyGroups(this.emptyGroups),ve=this.trackStartLines,Be=this.config.lineTerminatorsPattern,Re=0,Ie=[],Fe=[],qe=[],We=[];Object.freeze(We);var Ue=void 0;function _e(){return Ie}function Qe(Pt){var wt=charCodeToOptimizedIndex(Pt),St=Fe[wt];return St===void 0?We:St}var tt=function(Pt){if(qe.length===1&&Pt.tokenType.PUSH_MODE===void 0){var wt=oe.config.errorMessageProvider.buildUnableToPopLexerModeMessage(Pt);Ze.push({offset:Pt.startOffset,line:Pt.startLine!==void 0?Pt.startLine:void 0,column:Pt.startColumn!==void 0?Pt.startColumn:void 0,length:Pt.image.length,message:wt})}else{qe.pop();var St=last(qe);Ie=oe.patternIdxToConfig[St],Fe=oe.charCodeToPatternIdxToConfig[St],Re=Ie.length;var Zt=oe.canModeBeOptimized[St]&&oe.config.safeMode===!1;Fe&&Zt?Ue=Qe:Ue=_e}};function it(Pt){qe.push(Pt),Fe=this.charCodeToPatternIdxToConfig[Pt],Ie=this.patternIdxToConfig[Pt],Re=Ie.length,Re=Ie.length;var wt=this.canModeBeOptimized[Pt]&&this.config.safeMode===!1;Fe&&wt?Ue=Qe:Ue=_e}it.call(this,ne);for(var at;ze<Ye;){xe=null;var ot=Ke.charCodeAt(ze),lt=Ue(ot),st=lt.length;for(ce=0;ce<st;ce++){at=lt[ce];var ut=at.pattern;me=null;var ft=at.short;if(ft!==!1?ot===ft&&(xe=ut):at.isCustom===!0?(je=ut.exec(Ke,ze,rt,Ge),je!==null?(xe=je[0],je.payload!==void 0&&(me=je.payload)):xe=null):(this.updateLastIndex(ut,ze),xe=this.match(ut,J,ze)),xe!==null){if(pe=at.longerAlt,pe!==void 0){var dt=Ie[pe],Bt=dt.pattern;ge=null,dt.isCustom===!0?(je=Bt.exec(Ke,ze,rt,Ge),je!==null?(Ae=je[0],je.payload!==void 0&&(ge=je.payload)):Ae=null):(this.updateLastIndex(Bt,ze),Ae=this.match(Bt,J,ze)),Ae&&Ae.length>xe.length&&(xe=Ae,me=ge,at=dt)}break}}if(xe!==null){if(ye=xe.length,Se=at.group,Se!==void 0&&(Te=at.tokenTypeIdx,Ne=this.createTokenInstance(xe,ze,Te,at.tokenType,et,nt,ye),this.handlePayload(Ne,me),Se===!1?Xe=this.addToken(rt,Xe,Ne):Ge[Se].push(Ne)),J=this.chopInput(J,ye),ze=ze+ye,nt=this.computeNewColumn(nt,ye),ve===!0&&at.canLineTerminator===!0){var pt=0,mt=void 0,bt=void 0;Be.lastIndex=0;do mt=Be.test(xe),mt===!0&&(bt=Be.lastIndex-1,pt++);while(mt===!0);pt!==0&&(et=et+pt,nt=ye-bt,this.updateTokenEndLineColumnLocation(Ne,Se,bt,pt,et,nt,ye))}this.handleModes(at,tt,it,Ne)}else{for(var xt=ze,yt=et,It=nt,ht=!1;!ht&&ze<Ye;)for(Ke.charCodeAt(ze),J=this.chopInput(J,1),ze++,ue=0;ue<Re;ue++){var gt=Ie[ue],ut=gt.pattern,ft=gt.short;if(ft!==!1?Ke.charCodeAt(ze)===ft&&(ht=!0):gt.isCustom===!0?ht=ut.exec(Ke,ze,rt,Ge)!==null:(this.updateLastIndex(ut,ze),ht=ut.exec(J)!==null),ht===!0)break}$e=ze-xt,ke=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(Ke,xt,$e,yt,It),Ze.push({offset:xt,line:yt,column:It,length:$e,message:ke})}}return this.hasCustom||(rt.length=Xe),{tokens:rt,groups:Ge,errors:Ze}},K.prototype.handleModes=function(J,ne,oe,ce){if(J.pop===!0){var ue=J.push;ne(ce),ue!==void 0&&oe.call(this,ue)}else J.push!==void 0&&oe.call(this,J.push)},K.prototype.chopInput=function(J,ne){return J.substring(ne)},K.prototype.updateLastIndex=function(J,ne){J.lastIndex=ne},K.prototype.updateTokenEndLineColumnLocation=function(J,ne,oe,ce,ue,Ae,pe){var xe,me;ne!==void 0&&(xe=oe===pe-1,me=xe?-1:0,ce===1&&xe===!0||(J.endLine=ue+me,J.endColumn=Ae-1+-me))},K.prototype.computeNewColumn=function(J,ne){return J+ne},K.prototype.createTokenInstance=function(){return null},K.prototype.createOffsetOnlyToken=function(J,ne,oe,ce){return{image:J,startOffset:ne,tokenTypeIdx:oe,tokenType:ce}},K.prototype.createStartOnlyToken=function(J,ne,oe,ce,ue,Ae){return{image:J,startOffset:ne,startLine:ue,startColumn:Ae,tokenTypeIdx:oe,tokenType:ce}},K.prototype.createFullToken=function(J,ne,oe,ce,ue,Ae,pe){return{image:J,startOffset:ne,endOffset:ne+pe-1,startLine:ue,endLine:ue,startColumn:Ae,endColumn:Ae+pe-1,tokenTypeIdx:oe,tokenType:ce}},K.prototype.addToken=function(J,ne,oe){return 666},K.prototype.addTokenUsingPush=function(J,ne,oe){return J.push(oe),ne},K.prototype.addTokenUsingMemberAccess=function(J,ne,oe){return J[ne]=oe,ne++,ne},K.prototype.handlePayload=function(J,ne){},K.prototype.handlePayloadNoCustom=function(J,ne){},K.prototype.handlePayloadWithCustom=function(J,ne){ne!==null&&(J.payload=ne)},K.prototype.match=function(J,ne,oe){return null},K.prototype.matchWithTest=function(J,ne,oe){var ce=J.test(ne);return ce===!0?ne.substring(oe,J.lastIndex):null},K.prototype.matchWithExec=function(J,ne){var oe=J.exec(ne);return oe!==null?oe[0]:oe},K.prototype.TRACE_INIT=function(J,ne){if(this.traceInitPerf===!0){this.traceInitIndent++;var oe=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(oe+"--> <"+J+">");var ce=timer$1(ne),ue=ce.time,Ae=ce.value,pe=ue>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&pe(oe+"<-- <"+J+"> time: "+ue+"ms"),this.traceInitIndent--,Ae}else return ne()},K.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",K.NA=/NOT_APPLICABLE/,K}();function tokenLabel(K){return hasTokenLabel(K)?K.LABEL:K.name}function tokenName(K){return K.name}function hasTokenLabel(K){return isString(K.LABEL)&&K.LABEL!==""}var PARENT="parent",CATEGORIES="categories",LABEL="label",GROUP="group",PUSH_MODE="push_mode",POP_MODE="pop_mode",LONGER_ALT="longer_alt",LINE_BREAKS$1="line_breaks",START_CHARS_HINT="start_chars_hint";function createToken$1(K){return createTokenInternal(K)}function createTokenInternal(K){var J=K.pattern,ne={};if(ne.name=K.name,isUndefined(J)||(ne.PATTERN=J),has$1(K,PARENT))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return has$1(K,CATEGORIES)&&(ne.CATEGORIES=K[CATEGORIES]),augmentTokenTypes([ne]),has$1(K,LABEL)&&(ne.LABEL=K[LABEL]),has$1(K,GROUP)&&(ne.GROUP=K[GROUP]),has$1(K,POP_MODE)&&(ne.POP_MODE=K[POP_MODE]),has$1(K,PUSH_MODE)&&(ne.PUSH_MODE=K[PUSH_MODE]),has$1(K,LONGER_ALT)&&(ne.LONGER_ALT=K[LONGER_ALT]),has$1(K,LINE_BREAKS$1)&&(ne.LINE_BREAKS=K[LINE_BREAKS$1]),has$1(K,START_CHARS_HINT)&&(ne.START_CHARS_HINT=K[START_CHARS_HINT]),ne}var EOF$1=createToken$1({name:"EOF",pattern:Lexer$1.NA});augmentTokenTypes([EOF$1]);function createTokenInstance(K,J,ne,oe,ce,ue,Ae,pe){return{image:J,startOffset:ne,endOffset:oe,startLine:ce,endLine:ue,startColumn:Ae,endColumn:pe,tokenTypeIdx:K.tokenTypeIdx,tokenType:K}}function tokenMatcher(K,J){return tokenStructuredMatcher(K,J)}var __extends$b=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),AbstractProduction=function(){function K(J){this._definition=J}return Object.defineProperty(K.prototype,"definition",{get:function(){return this._definition},set:function(J){this._definition=J},enumerable:!1,configurable:!0}),K.prototype.accept=function(J){J.visit(this),forEach(this.definition,function(ne){ne.accept(J)})},K}(),NonTerminal=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,[])||this;return oe.idx=1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return Object.defineProperty(J.prototype,"definition",{get:function(){return this.referencedRule!==void 0?this.referencedRule.definition:[]},set:function(ne){},enumerable:!1,configurable:!0}),J.prototype.accept=function(ne){ne.visit(this)},J}(AbstractProduction),Rule=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.orgText="",assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),Alternative=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.ignoreAmbiguities=!1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),Option=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.idx=1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),RepetitionMandatory=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.idx=1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),RepetitionMandatoryWithSeparator=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.idx=1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),Repetition=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.idx=1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),RepetitionWithSeparator=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.idx=1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return J}(AbstractProduction),Alternation=function(K){__extends$b(J,K);function J(ne){var oe=K.call(this,ne.definition)||this;return oe.idx=1,oe.ignoreAmbiguities=!1,oe.hasPredicates=!1,assign(oe,pick(ne,function(ce){return ce!==void 0})),oe}return Object.defineProperty(J.prototype,"definition",{get:function(){return this._definition},set:function(ne){this._definition=ne},enumerable:!1,configurable:!0}),J}(AbstractProduction),Terminal=function(){function K(J){this.idx=1,assign(this,pick(J,function(ne){return ne!==void 0}))}return K.prototype.accept=function(J){J.visit(this)},K}();function serializeGrammar(K){return map$1(K,serializeProduction)}function serializeProduction(K){function J(ce){return map$1(ce,serializeProduction)}if(K instanceof NonTerminal)return{type:"NonTerminal",name:K.nonTerminalName,idx:K.idx};if(K instanceof Alternative)return{type:"Alternative",definition:J(K.definition)};if(K instanceof Option)return{type:"Option",idx:K.idx,definition:J(K.definition)};if(K instanceof RepetitionMandatory)return{type:"RepetitionMandatory",idx:K.idx,definition:J(K.definition)};if(K instanceof RepetitionMandatoryWithSeparator)return{type:"RepetitionMandatoryWithSeparator",idx:K.idx,separator:serializeProduction(new Terminal({terminalType:K.separator})),definition:J(K.definition)};if(K instanceof RepetitionWithSeparator)return{type:"RepetitionWithSeparator",idx:K.idx,separator:serializeProduction(new Terminal({terminalType:K.separator})),definition:J(K.definition)};if(K instanceof Repetition)return{type:"Repetition",idx:K.idx,definition:J(K.definition)};if(K instanceof Alternation)return{type:"Alternation",idx:K.idx,definition:J(K.definition)};if(K instanceof Terminal){var ne={type:"Terminal",name:K.terminalType.name,label:tokenLabel(K.terminalType),idx:K.idx},oe=K.terminalType.PATTERN;return K.terminalType.PATTERN&&(ne.pattern=isRegExp(oe)?oe.source:oe),ne}else{if(K instanceof Rule)return{type:"Rule",name:K.name,orgText:K.orgText,definition:J(K.definition)};throw Error("non exhaustive match")}}var RestWalker=function(){function K(){}return K.prototype.walk=function(J,ne){var oe=this;ne===void 0&&(ne=[]),forEach(J.definition,function(ce,ue){var Ae=drop$2(J.definition,ue+1);if(ce instanceof NonTerminal)oe.walkProdRef(ce,Ae,ne);else if(ce instanceof Terminal)oe.walkTerminal(ce,Ae,ne);else if(ce instanceof Alternative)oe.walkFlat(ce,Ae,ne);else if(ce instanceof Option)oe.walkOption(ce,Ae,ne);else if(ce instanceof RepetitionMandatory)oe.walkAtLeastOne(ce,Ae,ne);else if(ce instanceof RepetitionMandatoryWithSeparator)oe.walkAtLeastOneSep(ce,Ae,ne);else if(ce instanceof RepetitionWithSeparator)oe.walkManySep(ce,Ae,ne);else if(ce instanceof Repetition)oe.walkMany(ce,Ae,ne);else if(ce instanceof Alternation)oe.walkOr(ce,Ae,ne);else throw Error("non exhaustive match")})},K.prototype.walkTerminal=function(J,ne,oe){},K.prototype.walkProdRef=function(J,ne,oe){},K.prototype.walkFlat=function(J,ne,oe){var ce=ne.concat(oe);this.walk(J,ce)},K.prototype.walkOption=function(J,ne,oe){var ce=ne.concat(oe);this.walk(J,ce)},K.prototype.walkAtLeastOne=function(J,ne,oe){var ce=[new Option({definition:J.definition})].concat(ne,oe);this.walk(J,ce)},K.prototype.walkAtLeastOneSep=function(J,ne,oe){var ce=restForRepetitionWithSeparator(J,ne,oe);this.walk(J,ce)},K.prototype.walkMany=function(J,ne,oe){var ce=[new Option({definition:J.definition})].concat(ne,oe);this.walk(J,ce)},K.prototype.walkManySep=function(J,ne,oe){var ce=restForRepetitionWithSeparator(J,ne,oe);this.walk(J,ce)},K.prototype.walkOr=function(J,ne,oe){var ce=this,ue=ne.concat(oe);forEach(J.definition,function(Ae){var pe=new Alternative({definition:[Ae]});ce.walk(pe,ue)})},K}();function restForRepetitionWithSeparator(K,J,ne){var oe=[new Option({definition:[new Terminal({terminalType:K.separator})].concat(K.definition)})],ce=oe.concat(J,ne);return ce}var GAstVisitor=function(){function K(){}return K.prototype.visit=function(J){var ne=J;switch(ne.constructor){case NonTerminal:return this.visitNonTerminal(ne);case Alternative:return this.visitAlternative(ne);case Option:return this.visitOption(ne);case RepetitionMandatory:return this.visitRepetitionMandatory(ne);case RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(ne);case RepetitionWithSeparator:return this.visitRepetitionWithSeparator(ne);case Repetition:return this.visitRepetition(ne);case Alternation:return this.visitAlternation(ne);case Terminal:return this.visitTerminal(ne);case Rule:return this.visitRule(ne);default:throw Error("non exhaustive match")}},K.prototype.visitNonTerminal=function(J){},K.prototype.visitAlternative=function(J){},K.prototype.visitOption=function(J){},K.prototype.visitRepetition=function(J){},K.prototype.visitRepetitionMandatory=function(J){},K.prototype.visitRepetitionMandatoryWithSeparator=function(J){},K.prototype.visitRepetitionWithSeparator=function(J){},K.prototype.visitAlternation=function(J){},K.prototype.visitTerminal=function(J){},K.prototype.visitRule=function(J){},K}(),__extends$a=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}();function isSequenceProd(K){return K instanceof Alternative||K instanceof Option||K instanceof Repetition||K instanceof RepetitionMandatory||K instanceof RepetitionMandatoryWithSeparator||K instanceof RepetitionWithSeparator||K instanceof Terminal||K instanceof Rule}function isOptionalProd(K,J){J===void 0&&(J=[]);var ne=K instanceof Option||K instanceof Repetition||K instanceof RepetitionWithSeparator;return ne?!0:K instanceof Alternation?some(K.definition,function(oe){return isOptionalProd(oe,J)}):K instanceof NonTerminal&&contains$1(J,K)?!1:K instanceof AbstractProduction?(K instanceof NonTerminal&&J.push(K),every(K.definition,function(oe){return isOptionalProd(oe,J)})):!1}function isBranchingProd(K){return K instanceof Alternation}function getProductionDslName(K){if(K instanceof NonTerminal)return"SUBRULE";if(K instanceof Option)return"OPTION";if(K instanceof Alternation)return"OR";if(K instanceof RepetitionMandatory)return"AT_LEAST_ONE";if(K instanceof RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(K instanceof RepetitionWithSeparator)return"MANY_SEP";if(K instanceof Repetition)return"MANY";if(K instanceof Terminal)return"CONSUME";throw Error("non exhaustive match")}var DslMethodsCollectorVisitor=function(K){__extends$a(J,K);function J(){var ne=K!==null&&K.apply(this,arguments)||this;return ne.separator="-",ne.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},ne}return J.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},J.prototype.visitTerminal=function(ne){var oe=ne.terminalType.name+this.separator+"Terminal";has$1(this.dslMethods,oe)||(this.dslMethods[oe]=[]),this.dslMethods[oe].push(ne)},J.prototype.visitNonTerminal=function(ne){var oe=ne.nonTerminalName+this.separator+"Terminal";has$1(this.dslMethods,oe)||(this.dslMethods[oe]=[]),this.dslMethods[oe].push(ne)},J.prototype.visitOption=function(ne){this.dslMethods.option.push(ne)},J.prototype.visitRepetitionWithSeparator=function(ne){this.dslMethods.repetitionWithSeparator.push(ne)},J.prototype.visitRepetitionMandatory=function(ne){this.dslMethods.repetitionMandatory.push(ne)},J.prototype.visitRepetitionMandatoryWithSeparator=function(ne){this.dslMethods.repetitionMandatoryWithSeparator.push(ne)},J.prototype.visitRepetition=function(ne){this.dslMethods.repetition.push(ne)},J.prototype.visitAlternation=function(ne){this.dslMethods.alternation.push(ne)},J}(GAstVisitor),collectorVisitor=new DslMethodsCollectorVisitor;function collectMethods(K){collectorVisitor.reset(),K.accept(collectorVisitor);var J=collectorVisitor.dslMethods;return collectorVisitor.reset(),J}function first(K){if(K instanceof NonTerminal)return first(K.referencedRule);if(K instanceof Terminal)return firstForTerminal(K);if(isSequenceProd(K))return firstForSequence(K);if(isBranchingProd(K))return firstForBranching(K);throw Error("non exhaustive match")}function firstForSequence(K){for(var J=[],ne=K.definition,oe=0,ce=ne.length>oe,ue,Ae=!0;ce&&Ae;)ue=ne[oe],Ae=isOptionalProd(ue),J=J.concat(first(ue)),oe=oe+1,ce=ne.length>oe;return uniq(J)}function firstForBranching(K){var J=map$1(K.definition,function(ne){return first(ne)});return uniq(flatten$1(J))}function firstForTerminal(K){return[K.terminalType]}var IN$1="_~IN~_",__extends$9=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),ResyncFollowsWalker=function(K){__extends$9(J,K);function J(ne){var oe=K.call(this)||this;return oe.topProd=ne,oe.follows={},oe}return J.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},J.prototype.walkTerminal=function(ne,oe,ce){},J.prototype.walkProdRef=function(ne,oe,ce){var ue=buildBetweenProdsFollowPrefix(ne.referencedRule,ne.idx)+this.topProd.name,Ae=oe.concat(ce),pe=new Alternative({definition:Ae}),xe=first(pe);this.follows[ue]=xe},J}(RestWalker);function computeAllProdsFollows(K){var J={};return forEach(K,function(ne){var oe=new ResyncFollowsWalker(ne).startWalking();assign(J,oe)}),J}function buildBetweenProdsFollowPrefix(K,J){return K.name+J+IN$1}var defaultParserErrorProvider={buildMismatchTokenMessage:function(K){var J=K.expected,ne=K.actual;K.previous,K.ruleName;var oe=hasTokenLabel(J),ce=oe?"--> "+tokenLabel(J)+" <--":"token of type --> "+J.name+" <--",ue="Expecting "+ce+" but found --> '"+ne.image+"' <--";return ue},buildNotAllInputParsedMessage:function(K){var J=K.firstRedundant;return K.ruleName,"Redundant input, expecting EOF but found: "+J.image},buildNoViableAltMessage:function(K){var J=K.expectedPathsPerAlt,ne=K.actual;K.previous;var oe=K.customUserDescription;K.ruleName;var ce="Expecting: ",ue=first$1(ne).image,Ae=`
but found: '`+ue+"'";if(oe)return ce+oe+Ae;var pe=reduce$1(J,function(ye,Se){return ye.concat(Se)},[]),xe=map$1(pe,function(ye){return"["+map$1(ye,function(Se){return tokenLabel(Se)}).join(", ")+"]"}),me=map$1(xe,function(ye,Se){return"  "+(Se+1)+". "+ye}),ge=`one of these possible Token sequences:
`+me.join(`
`);return ce+ge+Ae},buildEarlyExitMessage:function(K){var J=K.expectedIterationPaths,ne=K.actual,oe=K.customUserDescription;K.ruleName;var ce="Expecting: ",ue=first$1(ne).image,Ae=`
but found: '`+ue+"'";if(oe)return ce+oe+Ae;var pe=map$1(J,function(me){return"["+map$1(me,function(ge){return tokenLabel(ge)}).join(",")+"]"}),xe=`expecting at least one iteration which starts with one of these possible Token sequences::
  `+("<"+pe.join(" ,")+">");return ce+xe+Ae}};Object.freeze(defaultParserErrorProvider);var defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(K,J){var ne="Invalid grammar, reference to a rule which is not defined: ->"+J.nonTerminalName+`<-
inside top level rule: ->`+K.name+"<-";return ne}},defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(K,J){function ne(ge){return ge instanceof Terminal?ge.terminalType.name:ge instanceof NonTerminal?ge.nonTerminalName:""}var oe=K.name,ce=first$1(J),ue=ce.idx,Ae=getProductionDslName(ce),pe=ne(ce),xe=ue>0,me="->"+Ae+(xe?ue:"")+"<- "+(pe?"with argument: ->"+pe+"<-":"")+`
                  appears more than once (`+J.length+" times) in the top level rule: ->"+oe+`<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return me=me.replace(/[ \t]+/g," "),me=me.replace(/\s\s+/g,`
`),me},buildNamespaceConflictError:function(K){var J=`Namespace conflict found in grammar.
`+("The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+K.name+`>.
`)+`To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`;return J},buildAlternationPrefixAmbiguityError:function(K){var J=map$1(K.prefixPath,function(ce){return tokenLabel(ce)}).join(", "),ne=K.alternation.idx===0?"":K.alternation.idx,oe="Ambiguous alternatives: <"+K.ambiguityIndices.join(" ,")+`> due to common lookahead prefix
`+("in <OR"+ne+"> inside <"+K.topLevelRule.name+`> Rule,
`)+("<"+J+`> may appears as a prefix path in all these alternatives.
`)+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`;return oe},buildAlternationAmbiguityError:function(K){var J=map$1(K.prefixPath,function(ce){return tokenLabel(ce)}).join(", "),ne=K.alternation.idx===0?"":K.alternation.idx,oe="Ambiguous Alternatives Detected: <"+K.ambiguityIndices.join(" ,")+"> in <OR"+ne+">"+(" inside <"+K.topLevelRule.name+`> Rule,
`)+("<"+J+`> may appears as a prefix path in all these alternatives.
`);return oe=oe+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,oe},buildEmptyRepetitionError:function(K){var J=getProductionDslName(K.repetition);K.repetition.idx!==0&&(J+=K.repetition.idx);var ne="The repetition <"+J+"> within Rule <"+K.topLevelRule.name+`> can never consume any tokens.
This could lead to an infinite loop.`;return ne},buildTokenNameError:function(K){return"deprecated"},buildEmptyAlternationError:function(K){var J="Ambiguous empty alternative: <"+(K.emptyChoiceIdx+1)+">"+(" in <OR"+K.alternation.idx+"> inside <"+K.topLevelRule.name+`> Rule.
`)+"Only the last alternative may be an empty alternative.";return J},buildTooManyAlternativesError:function(K){var J=`An Alternation cannot have more than 256 alternatives:
`+("<OR"+K.alternation.idx+"> inside <"+K.topLevelRule.name+`> Rule.
 has `+(K.alternation.definition.length+1)+" alternatives.");return J},buildLeftRecursionError:function(K){var J=K.topLevelRule.name,ne=map$1(K.leftRecursionPath,function(ue){return ue.name}),oe=J+" --> "+ne.concat([J]).join(" --> "),ce=`Left Recursion found in grammar.
`+("rule: <"+J+`> can be invoked from itself (directly or indirectly)
`)+(`without consuming any Tokens. The grammar path that causes this is: 
 `+oe+`
`)+` To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.`;return ce},buildInvalidRuleNameError:function(K){return"deprecated"},buildDuplicateRuleNameError:function(K){var J;K.topLevelRule instanceof Rule?J=K.topLevelRule.name:J=K.topLevelRule;var ne="Duplicate definition, rule: ->"+J+"<- is already defined in the grammar: ->"+K.grammarName+"<-";return ne}},__extends$8=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}();function resolveGrammar$1(K,J){var ne=new GastRefResolverVisitor(K,J);return ne.resolveRefs(),ne.errors}var GastRefResolverVisitor=function(K){__extends$8(J,K);function J(ne,oe){var ce=K.call(this)||this;return ce.nameToTopRule=ne,ce.errMsgProvider=oe,ce.errors=[],ce}return J.prototype.resolveRefs=function(){var ne=this;forEach(values(this.nameToTopRule),function(oe){ne.currTopLevel=oe,oe.accept(ne)})},J.prototype.visitNonTerminal=function(ne){var oe=this.nameToTopRule[ne.nonTerminalName];if(oe)ne.referencedRule=oe;else{var ce=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,ne);this.errors.push({message:ce,type:ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:ne.nonTerminalName})}},J}(GAstVisitor),__extends$7=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),AbstractNextPossibleTokensWalker=function(K){__extends$7(J,K);function J(ne,oe){var ce=K.call(this)||this;return ce.topProd=ne,ce.path=oe,ce.possibleTokTypes=[],ce.nextProductionName="",ce.nextProductionOccurrence=0,ce.found=!1,ce.isAtEndOfPath=!1,ce}return J.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=cloneArr(this.path.ruleStack).reverse(),this.occurrenceStack=cloneArr(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},J.prototype.walk=function(ne,oe){oe===void 0&&(oe=[]),this.found||K.prototype.walk.call(this,ne,oe)},J.prototype.walkProdRef=function(ne,oe,ce){if(ne.referencedRule.name===this.nextProductionName&&ne.idx===this.nextProductionOccurrence){var ue=oe.concat(ce);this.updateExpectedNext(),this.walk(ne.referencedRule,ue)}},J.prototype.updateExpectedNext=function(){isEmpty$1(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},J}(RestWalker),NextAfterTokenWalker=function(K){__extends$7(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.path=oe,ce.nextTerminalName="",ce.nextTerminalOccurrence=0,ce.nextTerminalName=ce.path.lastTok.name,ce.nextTerminalOccurrence=ce.path.lastTokOccurrence,ce}return J.prototype.walkTerminal=function(ne,oe,ce){if(this.isAtEndOfPath&&ne.terminalType.name===this.nextTerminalName&&ne.idx===this.nextTerminalOccurrence&&!this.found){var ue=oe.concat(ce),Ae=new Alternative({definition:ue});this.possibleTokTypes=first(Ae),this.found=!0}},J}(AbstractNextPossibleTokensWalker),AbstractNextTerminalAfterProductionWalker=function(K){__extends$7(J,K);function J(ne,oe){var ce=K.call(this)||this;return ce.topRule=ne,ce.occurrence=oe,ce.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},ce}return J.prototype.startWalking=function(){return this.walk(this.topRule),this.result},J}(RestWalker),NextTerminalAfterManyWalker=function(K){__extends$7(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.walkMany=function(ne,oe,ce){if(ne.idx===this.occurrence){var ue=first$1(oe.concat(ce));this.result.isEndOfRule=ue===void 0,ue instanceof Terminal&&(this.result.token=ue.terminalType,this.result.occurrence=ue.idx)}else K.prototype.walkMany.call(this,ne,oe,ce)},J}(AbstractNextTerminalAfterProductionWalker),NextTerminalAfterManySepWalker=function(K){__extends$7(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.walkManySep=function(ne,oe,ce){if(ne.idx===this.occurrence){var ue=first$1(oe.concat(ce));this.result.isEndOfRule=ue===void 0,ue instanceof Terminal&&(this.result.token=ue.terminalType,this.result.occurrence=ue.idx)}else K.prototype.walkManySep.call(this,ne,oe,ce)},J}(AbstractNextTerminalAfterProductionWalker),NextTerminalAfterAtLeastOneWalker=function(K){__extends$7(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.walkAtLeastOne=function(ne,oe,ce){if(ne.idx===this.occurrence){var ue=first$1(oe.concat(ce));this.result.isEndOfRule=ue===void 0,ue instanceof Terminal&&(this.result.token=ue.terminalType,this.result.occurrence=ue.idx)}else K.prototype.walkAtLeastOne.call(this,ne,oe,ce)},J}(AbstractNextTerminalAfterProductionWalker),NextTerminalAfterAtLeastOneSepWalker=function(K){__extends$7(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.walkAtLeastOneSep=function(ne,oe,ce){if(ne.idx===this.occurrence){var ue=first$1(oe.concat(ce));this.result.isEndOfRule=ue===void 0,ue instanceof Terminal&&(this.result.token=ue.terminalType,this.result.occurrence=ue.idx)}else K.prototype.walkAtLeastOneSep.call(this,ne,oe,ce)},J}(AbstractNextTerminalAfterProductionWalker);function possiblePathsFrom(K,J,ne){ne===void 0&&(ne=[]),ne=cloneArr(ne);var oe=[],ce=0;function ue(me){return me.concat(drop$2(K,ce+1))}function Ae(me){var ge=possiblePathsFrom(ue(me),J,ne);return oe.concat(ge)}for(;ne.length<J&&ce<K.length;){var pe=K[ce];if(pe instanceof Alternative)return Ae(pe.definition);if(pe instanceof NonTerminal)return Ae(pe.definition);if(pe instanceof Option)oe=Ae(pe.definition);else if(pe instanceof RepetitionMandatory){var xe=pe.definition.concat([new Repetition({definition:pe.definition})]);return Ae(xe)}else if(pe instanceof RepetitionMandatoryWithSeparator){var xe=[new Alternative({definition:pe.definition}),new Repetition({definition:[new Terminal({terminalType:pe.separator})].concat(pe.definition)})];return Ae(xe)}else if(pe instanceof RepetitionWithSeparator){var xe=pe.definition.concat([new Repetition({definition:[new Terminal({terminalType:pe.separator})].concat(pe.definition)})]);oe=Ae(xe)}else if(pe instanceof Repetition){var xe=pe.definition.concat([new Repetition({definition:pe.definition})]);oe=Ae(xe)}else{if(pe instanceof Alternation)return forEach(pe.definition,function(me){isEmpty$1(me.definition)===!1&&(oe=Ae(me.definition))}),oe;if(pe instanceof Terminal)ne.push(pe.terminalType);else throw Error("non exhaustive match")}ce++}return oe.push({partialPath:ne,suffixDef:drop$2(K,ce)}),oe}function nextPossibleTokensAfter(K,J,ne,oe){var ce="EXIT_NONE_TERMINAL",ue=[ce],Ae="EXIT_ALTERNATIVE",pe=!1,xe=J.length,me=xe-oe-1,ge=[],ye=[];for(ye.push({idx:-1,def:K,ruleStack:[],occurrenceStack:[]});!isEmpty$1(ye);){var Se=ye.pop();if(Se===Ae){pe&&last(ye).idx<=me&&ye.pop();continue}var Te=Se.def,Ne=Se.idx,$e=Se.ruleStack,ke=Se.occurrenceStack;if(!isEmpty$1(Te)){var je=Te[0];if(je===ce){var Ke={idx:Ne,def:drop$2(Te),ruleStack:dropRight($e),occurrenceStack:dropRight(ke)};ye.push(Ke)}else if(je instanceof Terminal)if(Ne<xe-1){var Ye=Ne+1,ze=J[Ye];if(ne(ze,je.terminalType)){var Ke={idx:Ye,def:drop$2(Te),ruleStack:$e,occurrenceStack:ke};ye.push(Ke)}}else if(Ne===xe-1)ge.push({nextTokenType:je.terminalType,nextTokenOccurrence:je.idx,ruleStack:$e,occurrenceStack:ke}),pe=!0;else throw Error("non exhaustive match");else if(je instanceof NonTerminal){var Xe=cloneArr($e);Xe.push(je.nonTerminalName);var Je=cloneArr(ke);Je.push(je.idx);var Ke={idx:Ne,def:je.definition.concat(ue,drop$2(Te)),ruleStack:Xe,occurrenceStack:Je};ye.push(Ke)}else if(je instanceof Option){var rt={idx:Ne,def:drop$2(Te),ruleStack:$e,occurrenceStack:ke};ye.push(rt),ye.push(Ae);var Ze={idx:Ne,def:je.definition.concat(drop$2(Te)),ruleStack:$e,occurrenceStack:ke};ye.push(Ze)}else if(je instanceof RepetitionMandatory){var et=new Repetition({definition:je.definition,idx:je.idx}),nt=je.definition.concat([et],drop$2(Te)),Ke={idx:Ne,def:nt,ruleStack:$e,occurrenceStack:ke};ye.push(Ke)}else if(je instanceof RepetitionMandatoryWithSeparator){var Ge=new Terminal({terminalType:je.separator}),et=new Repetition({definition:[Ge].concat(je.definition),idx:je.idx}),nt=je.definition.concat([et],drop$2(Te)),Ke={idx:Ne,def:nt,ruleStack:$e,occurrenceStack:ke};ye.push(Ke)}else if(je instanceof RepetitionWithSeparator){var rt={idx:Ne,def:drop$2(Te),ruleStack:$e,occurrenceStack:ke};ye.push(rt),ye.push(Ae);var Ge=new Terminal({terminalType:je.separator}),ve=new Repetition({definition:[Ge].concat(je.definition),idx:je.idx}),nt=je.definition.concat([ve],drop$2(Te)),Ze={idx:Ne,def:nt,ruleStack:$e,occurrenceStack:ke};ye.push(Ze)}else if(je instanceof Repetition){var rt={idx:Ne,def:drop$2(Te),ruleStack:$e,occurrenceStack:ke};ye.push(rt),ye.push(Ae);var ve=new Repetition({definition:je.definition,idx:je.idx}),nt=je.definition.concat([ve],drop$2(Te)),Ze={idx:Ne,def:nt,ruleStack:$e,occurrenceStack:ke};ye.push(Ze)}else if(je instanceof Alternation)for(var Be=je.definition.length-1;Be>=0;Be--){var Re=je.definition[Be],Ie={idx:Ne,def:Re.definition.concat(drop$2(Te)),ruleStack:$e,occurrenceStack:ke};ye.push(Ie),ye.push(Ae)}else if(je instanceof Alternative)ye.push({idx:Ne,def:je.definition.concat(drop$2(Te)),ruleStack:$e,occurrenceStack:ke});else if(je instanceof Rule)ye.push(expandTopLevelRule(je,Ne,$e,ke));else throw Error("non exhaustive match")}}return ge}function expandTopLevelRule(K,J,ne,oe){var ce=cloneArr(ne);ce.push(K.name);var ue=cloneArr(oe);return ue.push(1),{idx:J,def:K.definition,ruleStack:ce,occurrenceStack:ue}}var __extends$6=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),PROD_TYPE;(function(K){K[K.OPTION=0]="OPTION",K[K.REPETITION=1]="REPETITION",K[K.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",K[K.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",K[K.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",K[K.ALTERNATION=5]="ALTERNATION"})(PROD_TYPE||(PROD_TYPE={}));function getProdType(K){if(K instanceof Option)return PROD_TYPE.OPTION;if(K instanceof Repetition)return PROD_TYPE.REPETITION;if(K instanceof RepetitionMandatory)return PROD_TYPE.REPETITION_MANDATORY;if(K instanceof RepetitionMandatoryWithSeparator)return PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR;if(K instanceof RepetitionWithSeparator)return PROD_TYPE.REPETITION_WITH_SEPARATOR;if(K instanceof Alternation)return PROD_TYPE.ALTERNATION;throw Error("non exhaustive match")}function buildLookaheadFuncForOr(K,J,ne,oe,ce,ue){var Ae=getLookaheadPathsForOr(K,J,ne),pe=areTokenCategoriesNotUsed(Ae)?tokenStructuredMatcherNoCategories:tokenStructuredMatcher;return ue(Ae,oe,pe,ce)}function buildLookaheadFuncForOptionalProd(K,J,ne,oe,ce,ue){var Ae=getLookaheadPathsForOptionalProd(K,J,ce,ne),pe=areTokenCategoriesNotUsed(Ae)?tokenStructuredMatcherNoCategories:tokenStructuredMatcher;return ue(Ae[0],pe,oe)}function buildAlternativesLookAheadFunc(K,J,ne,oe){var ce=K.length,ue=every(K,function(xe){return every(xe,function(me){return me.length===1})});if(J)return function(xe){for(var me=map$1(xe,function(Ye){return Ye.GATE}),ge=0;ge<ce;ge++){var ye=K[ge],Se=ye.length,Te=me[ge];if(!(Te!==void 0&&Te.call(this)===!1))e:for(var Ne=0;Ne<Se;Ne++){for(var $e=ye[Ne],ke=$e.length,je=0;je<ke;je++){var Ke=this.LA(je+1);if(ne(Ke,$e[je])===!1)continue e}return ge}}};if(ue&&!oe){var Ae=map$1(K,function(xe){return flatten$1(xe)}),pe=reduce$1(Ae,function(xe,me,ge){return forEach(me,function(ye){has$1(xe,ye.tokenTypeIdx)||(xe[ye.tokenTypeIdx]=ge),forEach(ye.categoryMatches,function(Se){has$1(xe,Se)||(xe[Se]=ge)})}),xe},[]);return function(){var xe=this.LA(1);return pe[xe.tokenTypeIdx]}}else return function(){for(var xe=0;xe<ce;xe++){var me=K[xe],ge=me.length;e:for(var ye=0;ye<ge;ye++){for(var Se=me[ye],Te=Se.length,Ne=0;Ne<Te;Ne++){var $e=this.LA(Ne+1);if(ne($e,Se[Ne])===!1)continue e}return xe}}}}function buildSingleAlternativeLookaheadFunction(K,J,ne){var oe=every(K,function(me){return me.length===1}),ce=K.length;if(oe&&!ne){var ue=flatten$1(K);if(ue.length===1&&isEmpty$1(ue[0].categoryMatches)){var Ae=ue[0],pe=Ae.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===pe}}else{var xe=reduce$1(ue,function(me,ge,ye){return me[ge.tokenTypeIdx]=!0,forEach(ge.categoryMatches,function(Se){me[Se]=!0}),me},[]);return function(){var me=this.LA(1);return xe[me.tokenTypeIdx]===!0}}}else return function(){e:for(var me=0;me<ce;me++){for(var ge=K[me],ye=ge.length,Se=0;Se<ye;Se++){var Te=this.LA(Se+1);if(J(Te,ge[Se])===!1)continue e}return!0}return!1}}var RestDefinitionFinderWalker=function(K){__extends$6(J,K);function J(ne,oe,ce){var ue=K.call(this)||this;return ue.topProd=ne,ue.targetOccurrence=oe,ue.targetProdType=ce,ue}return J.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},J.prototype.checkIsTarget=function(ne,oe,ce,ue){return ne.idx===this.targetOccurrence&&this.targetProdType===oe?(this.restDef=ce.concat(ue),!0):!1},J.prototype.walkOption=function(ne,oe,ce){this.checkIsTarget(ne,PROD_TYPE.OPTION,oe,ce)||K.prototype.walkOption.call(this,ne,oe,ce)},J.prototype.walkAtLeastOne=function(ne,oe,ce){this.checkIsTarget(ne,PROD_TYPE.REPETITION_MANDATORY,oe,ce)||K.prototype.walkOption.call(this,ne,oe,ce)},J.prototype.walkAtLeastOneSep=function(ne,oe,ce){this.checkIsTarget(ne,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,oe,ce)||K.prototype.walkOption.call(this,ne,oe,ce)},J.prototype.walkMany=function(ne,oe,ce){this.checkIsTarget(ne,PROD_TYPE.REPETITION,oe,ce)||K.prototype.walkOption.call(this,ne,oe,ce)},J.prototype.walkManySep=function(ne,oe,ce){this.checkIsTarget(ne,PROD_TYPE.REPETITION_WITH_SEPARATOR,oe,ce)||K.prototype.walkOption.call(this,ne,oe,ce)},J}(RestWalker),InsideDefinitionFinderVisitor=function(K){__extends$6(J,K);function J(ne,oe,ce){var ue=K.call(this)||this;return ue.targetOccurrence=ne,ue.targetProdType=oe,ue.targetRef=ce,ue.result=[],ue}return J.prototype.checkIsTarget=function(ne,oe){ne.idx===this.targetOccurrence&&this.targetProdType===oe&&(this.targetRef===void 0||ne===this.targetRef)&&(this.result=ne.definition)},J.prototype.visitOption=function(ne){this.checkIsTarget(ne,PROD_TYPE.OPTION)},J.prototype.visitRepetition=function(ne){this.checkIsTarget(ne,PROD_TYPE.REPETITION)},J.prototype.visitRepetitionMandatory=function(ne){this.checkIsTarget(ne,PROD_TYPE.REPETITION_MANDATORY)},J.prototype.visitRepetitionMandatoryWithSeparator=function(ne){this.checkIsTarget(ne,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR)},J.prototype.visitRepetitionWithSeparator=function(ne){this.checkIsTarget(ne,PROD_TYPE.REPETITION_WITH_SEPARATOR)},J.prototype.visitAlternation=function(ne){this.checkIsTarget(ne,PROD_TYPE.ALTERNATION)},J}(GAstVisitor);function initializeArrayOfArrays(K){for(var J=new Array(K),ne=0;ne<K;ne++)J[ne]=[];return J}function pathToHashKeys(K){for(var J=[""],ne=0;ne<K.length;ne++){for(var oe=K[ne],ce=[],ue=0;ue<J.length;ue++){var Ae=J[ue];ce.push(Ae+"_"+oe.tokenTypeIdx);for(var pe=0;pe<oe.categoryMatches.length;pe++){var xe="_"+oe.categoryMatches[pe];ce.push(Ae+xe)}}J=ce}return J}function isUniquePrefixHash(K,J,ne){for(var oe=0;oe<K.length;oe++)if(oe!==ne)for(var ce=K[oe],ue=0;ue<J.length;ue++){var Ae=J[ue];if(ce[Ae]===!0)return!1}return!0}function lookAheadSequenceFromAlternatives(K,J){for(var ne=map$1(K,function(ge){return possiblePathsFrom([ge],1)}),oe=initializeArrayOfArrays(ne.length),ce=map$1(ne,function(ge){var ye={};return forEach(ge,function(Se){var Te=pathToHashKeys(Se.partialPath);forEach(Te,function(Ne){ye[Ne]=!0})}),ye}),ue=ne,Ae=1;Ae<=J;Ae++){var pe=ue;ue=initializeArrayOfArrays(pe.length);for(var xe=function(ge){for(var ye=pe[ge],Se=0;Se<ye.length;Se++){var Te=ye[Se].partialPath,Ne=ye[Se].suffixDef,$e=pathToHashKeys(Te),ke=isUniquePrefixHash(ce,$e,ge);if(ke||isEmpty$1(Ne)||Te.length===J){var je=oe[ge];if(containsPath(je,Te)===!1){je.push(Te);for(var Ke=0;Ke<$e.length;Ke++){var Ye=$e[Ke];ce[ge][Ye]=!0}}}else{var ze=possiblePathsFrom(Ne,Ae+1,Te);ue[ge]=ue[ge].concat(ze),forEach(ze,function(Xe){var Je=pathToHashKeys(Xe.partialPath);forEach(Je,function(rt){ce[ge][rt]=!0})})}}},me=0;me<pe.length;me++)xe(me)}return oe}function getLookaheadPathsForOr(K,J,ne,oe){var ce=new InsideDefinitionFinderVisitor(K,PROD_TYPE.ALTERNATION,oe);return J.accept(ce),lookAheadSequenceFromAlternatives(ce.result,ne)}function getLookaheadPathsForOptionalProd(K,J,ne,oe){var ce=new InsideDefinitionFinderVisitor(K,ne);J.accept(ce);var ue=ce.result,Ae=new RestDefinitionFinderWalker(J,K,ne),pe=Ae.startWalking(),xe=new Alternative({definition:ue}),me=new Alternative({definition:pe});return lookAheadSequenceFromAlternatives([xe,me],oe)}function containsPath(K,J){e:for(var ne=0;ne<K.length;ne++){var oe=K[ne];if(oe.length===J.length){for(var ce=0;ce<oe.length;ce++){var ue=J[ce],Ae=oe[ce],pe=ue===Ae||Ae.categoryMatchesMap[ue.tokenTypeIdx]!==void 0;if(pe===!1)continue e}return!0}}return!1}function isStrictPrefixOfPath(K,J){return K.length<J.length&&every(K,function(ne,oe){var ce=J[oe];return ne===ce||ce.categoryMatchesMap[ne.tokenTypeIdx]})}function areTokenCategoriesNotUsed(K){return every(K,function(J){return every(J,function(ne){return every(ne,function(oe){return isEmpty$1(oe.categoryMatches)})})})}var __extends$5=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}();function validateGrammar$1(K,J,ne,oe,ce){var ue=map$1(K,function(Te){return validateDuplicateProductions(Te,oe)}),Ae=map$1(K,function(Te){return validateNoLeftRecursion(Te,Te,oe)}),pe=[],xe=[],me=[];every(Ae,isEmpty$1)&&(pe=map$1(K,function(Te){return validateEmptyOrAlternative(Te,oe)}),xe=map$1(K,function(Te){return validateAmbiguousAlternationAlternatives(Te,J,oe)}),me=validateSomeNonEmptyLookaheadPath(K,J,oe));var ge=checkTerminalAndNoneTerminalsNameSpace(K,ne,oe),ye=map$1(K,function(Te){return validateTooManyAlts(Te,oe)}),Se=map$1(K,function(Te){return validateRuleDoesNotAlreadyExist(Te,K,ce,oe)});return flatten$1(ue.concat(me,Ae,pe,xe,ge,ye,Se))}function validateDuplicateProductions(K,J){var ne=new OccurrenceValidationCollector;K.accept(ne);var oe=ne.allProductions,ce=groupBy(oe,identifyProductionForDuplicates),ue=pick(ce,function(pe){return pe.length>1}),Ae=map$1(values(ue),function(pe){var xe=first$1(pe),me=J.buildDuplicateFoundError(K,pe),ge=getProductionDslName(xe),ye={message:me,type:ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:K.name,dslName:ge,occurrence:xe.idx},Se=getExtraProductionArgument(xe);return Se&&(ye.parameter=Se),ye});return Ae}function identifyProductionForDuplicates(K){return getProductionDslName(K)+"_#_"+K.idx+"_#_"+getExtraProductionArgument(K)}function getExtraProductionArgument(K){return K instanceof Terminal?K.terminalType.name:K instanceof NonTerminal?K.nonTerminalName:""}var OccurrenceValidationCollector=function(K){__extends$5(J,K);function J(){var ne=K!==null&&K.apply(this,arguments)||this;return ne.allProductions=[],ne}return J.prototype.visitNonTerminal=function(ne){this.allProductions.push(ne)},J.prototype.visitOption=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetitionWithSeparator=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetitionMandatory=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetitionMandatoryWithSeparator=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetition=function(ne){this.allProductions.push(ne)},J.prototype.visitAlternation=function(ne){this.allProductions.push(ne)},J.prototype.visitTerminal=function(ne){this.allProductions.push(ne)},J}(GAstVisitor);function validateRuleDoesNotAlreadyExist(K,J,ne,oe){var ce=[],ue=reduce$1(J,function(pe,xe){return xe.name===K.name?pe+1:pe},0);if(ue>1){var Ae=oe.buildDuplicateRuleNameError({topLevelRule:K,grammarName:ne});ce.push({message:Ae,type:ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:K.name})}return ce}function validateRuleIsOverridden(K,J,ne){var oe=[],ce;return contains$1(J,K)||(ce="Invalid rule override, rule: ->"+K+"<- cannot be overridden in the grammar: ->"+ne+"<-as it is not defined in any of the super grammars ",oe.push({message:ce,type:ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:K})),oe}function validateNoLeftRecursion(K,J,ne,oe){oe===void 0&&(oe=[]);var ce=[],ue=getFirstNoneTerminal(J.definition);if(isEmpty$1(ue))return[];var Ae=K.name,pe=contains$1(ue,K);pe&&ce.push({message:ne.buildLeftRecursionError({topLevelRule:K,leftRecursionPath:oe}),type:ParserDefinitionErrorType.LEFT_RECURSION,ruleName:Ae});var xe=difference(ue,oe.concat([K])),me=map$1(xe,function(ge){var ye=cloneArr(oe);return ye.push(ge),validateNoLeftRecursion(K,ge,ne,ye)});return ce.concat(flatten$1(me))}function getFirstNoneTerminal(K){var J=[];if(isEmpty$1(K))return J;var ne=first$1(K);if(ne instanceof NonTerminal)J.push(ne.referencedRule);else if(ne instanceof Alternative||ne instanceof Option||ne instanceof RepetitionMandatory||ne instanceof RepetitionMandatoryWithSeparator||ne instanceof RepetitionWithSeparator||ne instanceof Repetition)J=J.concat(getFirstNoneTerminal(ne.definition));else if(ne instanceof Alternation)J=flatten$1(map$1(ne.definition,function(Ae){return getFirstNoneTerminal(Ae.definition)}));else if(!(ne instanceof Terminal))throw Error("non exhaustive match");var oe=isOptionalProd(ne),ce=K.length>1;if(oe&&ce){var ue=drop$2(K);return J.concat(getFirstNoneTerminal(ue))}else return J}var OrCollector=function(K){__extends$5(J,K);function J(){var ne=K!==null&&K.apply(this,arguments)||this;return ne.alternations=[],ne}return J.prototype.visitAlternation=function(ne){this.alternations.push(ne)},J}(GAstVisitor);function validateEmptyOrAlternative(K,J){var ne=new OrCollector;K.accept(ne);var oe=ne.alternations,ce=reduce$1(oe,function(ue,Ae){var pe=dropRight(Ae.definition),xe=map$1(pe,function(me,ge){var ye=nextPossibleTokensAfter([me],[],null,1);return isEmpty$1(ye)?{message:J.buildEmptyAlternationError({topLevelRule:K,alternation:Ae,emptyChoiceIdx:ge}),type:ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:K.name,occurrence:Ae.idx,alternative:ge+1}:null});return ue.concat(compact(xe))},[]);return ce}function validateAmbiguousAlternationAlternatives(K,J,ne){var oe=new OrCollector;K.accept(oe);var ce=oe.alternations;ce=reject(ce,function(Ae){return Ae.ignoreAmbiguities===!0});var ue=reduce$1(ce,function(Ae,pe){var xe=pe.idx,me=pe.maxLookahead||J,ge=getLookaheadPathsForOr(xe,K,me,pe),ye=checkAlternativesAmbiguities(ge,pe,K,ne),Se=checkPrefixAlternativesAmbiguities(ge,pe,K,ne);return Ae.concat(ye,Se)},[]);return ue}var RepetionCollector=function(K){__extends$5(J,K);function J(){var ne=K!==null&&K.apply(this,arguments)||this;return ne.allProductions=[],ne}return J.prototype.visitRepetitionWithSeparator=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetitionMandatory=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetitionMandatoryWithSeparator=function(ne){this.allProductions.push(ne)},J.prototype.visitRepetition=function(ne){this.allProductions.push(ne)},J}(GAstVisitor);function validateTooManyAlts(K,J){var ne=new OrCollector;K.accept(ne);var oe=ne.alternations,ce=reduce$1(oe,function(ue,Ae){return Ae.definition.length>255&&ue.push({message:J.buildTooManyAlternativesError({topLevelRule:K,alternation:Ae}),type:ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:K.name,occurrence:Ae.idx}),ue},[]);return ce}function validateSomeNonEmptyLookaheadPath(K,J,ne){var oe=[];return forEach(K,function(ce){var ue=new RepetionCollector;ce.accept(ue);var Ae=ue.allProductions;forEach(Ae,function(pe){var xe=getProdType(pe),me=pe.maxLookahead||J,ge=pe.idx,ye=getLookaheadPathsForOptionalProd(ge,ce,xe,me),Se=ye[0];if(isEmpty$1(flatten$1(Se))){var Te=ne.buildEmptyRepetitionError({topLevelRule:ce,repetition:pe});oe.push({message:Te,type:ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:ce.name})}})}),oe}function checkAlternativesAmbiguities(K,J,ne,oe){var ce=[],ue=reduce$1(K,function(pe,xe,me){return J.definition[me].ignoreAmbiguities===!0||forEach(xe,function(ge){var ye=[me];forEach(K,function(Se,Te){me!==Te&&containsPath(Se,ge)&&J.definition[Te].ignoreAmbiguities!==!0&&ye.push(Te)}),ye.length>1&&!containsPath(ce,ge)&&(ce.push(ge),pe.push({alts:ye,path:ge}))}),pe},[]),Ae=map$1(ue,function(pe){var xe=map$1(pe.alts,function(ge){return ge+1}),me=oe.buildAlternationAmbiguityError({topLevelRule:ne,alternation:J,ambiguityIndices:xe,prefixPath:pe.path});return{message:me,type:ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:ne.name,occurrence:J.idx,alternatives:[pe.alts]}});return Ae}function checkPrefixAlternativesAmbiguities(K,J,ne,oe){var ce=[],ue=reduce$1(K,function(Ae,pe,xe){var me=map$1(pe,function(ge){return{idx:xe,path:ge}});return Ae.concat(me)},[]);return forEach(ue,function(Ae){var pe=J.definition[Ae.idx];if(pe.ignoreAmbiguities!==!0){var xe=Ae.idx,me=Ae.path,ge=findAll(ue,function(Se){return J.definition[Se.idx].ignoreAmbiguities!==!0&&Se.idx<xe&&isStrictPrefixOfPath(Se.path,me)}),ye=map$1(ge,function(Se){var Te=[Se.idx+1,xe+1],Ne=J.idx===0?"":J.idx,$e=oe.buildAlternationPrefixAmbiguityError({topLevelRule:ne,alternation:J,ambiguityIndices:Te,prefixPath:Se.path});return{message:$e,type:ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:ne.name,occurrence:Ne,alternatives:Te}});ce=ce.concat(ye)}}),ce}function checkTerminalAndNoneTerminalsNameSpace(K,J,ne){var oe=[],ce=map$1(J,function(ue){return ue.name});return forEach(K,function(ue){var Ae=ue.name;if(contains$1(ce,Ae)){var pe=ne.buildNamespaceConflictError(ue);oe.push({message:pe,type:ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:Ae})}}),oe}function resolveGrammar(K){K=defaults$1(K,{errMsgProvider:defaultGrammarResolverErrorProvider});var J={};return forEach(K.rules,function(ne){J[ne.name]=ne}),resolveGrammar$1(J,K.errMsgProvider)}function validateGrammar(K){return K=defaults$1(K,{errMsgProvider:defaultGrammarValidatorErrorProvider}),validateGrammar$1(K.rules,K.maxLookahead,K.tokenTypes,K.errMsgProvider,K.grammarName)}function assignOccurrenceIndices(K){forEach(K.rules,function(J){var ne=new DslMethodsCollectorVisitor;J.accept(ne),forEach(ne.dslMethods,function(oe){forEach(oe,function(ce,ue){ce.idx=ue+1})})})}var __extends$4=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),MISMATCHED_TOKEN_EXCEPTION="MismatchedTokenException",NO_VIABLE_ALT_EXCEPTION="NoViableAltException",EARLY_EXIT_EXCEPTION="EarlyExitException",NOT_ALL_INPUT_PARSED_EXCEPTION="NotAllInputParsedException",RECOGNITION_EXCEPTION_NAMES=[MISMATCHED_TOKEN_EXCEPTION,NO_VIABLE_ALT_EXCEPTION,EARLY_EXIT_EXCEPTION,NOT_ALL_INPUT_PARSED_EXCEPTION];Object.freeze(RECOGNITION_EXCEPTION_NAMES);function isRecognitionException(K){return contains$1(RECOGNITION_EXCEPTION_NAMES,K.name)}var RecognitionException=function(K){__extends$4(J,K);function J(ne,oe){var ce=this.constructor,ue=K.call(this,ne)||this;return ue.token=oe,ue.resyncedTokens=[],Object.setPrototypeOf(ue,ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(ue,ue.constructor),ue}return J}(Error),MismatchedTokenException=function(K){__extends$4(J,K);function J(ne,oe,ce){var ue=K.call(this,ne,oe)||this;return ue.previousToken=ce,ue.name=MISMATCHED_TOKEN_EXCEPTION,ue}return J}(RecognitionException),NoViableAltException=function(K){__extends$4(J,K);function J(ne,oe,ce){var ue=K.call(this,ne,oe)||this;return ue.previousToken=ce,ue.name=NO_VIABLE_ALT_EXCEPTION,ue}return J}(RecognitionException),NotAllInputParsedException$1=function(K){__extends$4(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.name=NOT_ALL_INPUT_PARSED_EXCEPTION,ce}return J}(RecognitionException),EarlyExitException=function(K){__extends$4(J,K);function J(ne,oe,ce){var ue=K.call(this,ne,oe)||this;return ue.previousToken=ce,ue.name=EARLY_EXIT_EXCEPTION,ue}return J}(RecognitionException),EOF_FOLLOW_KEY={},IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException";function InRuleRecoveryException(K){this.name=IN_RULE_RECOVERY_EXCEPTION,this.message=K}InRuleRecoveryException.prototype=Error.prototype;var Recoverable=function(){function K(){}return K.prototype.initRecoverable=function(J){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=has$1(J,"recoveryEnabled")?J.recoveryEnabled:DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=attemptInRepetitionRecovery)},K.prototype.getTokenToInsert=function(J){var ne=createTokenInstance(J,"",NaN,NaN,NaN,NaN,NaN,NaN);return ne.isInsertedInRecovery=!0,ne},K.prototype.canTokenTypeBeInsertedInRecovery=function(J){return!0},K.prototype.tryInRepetitionRecovery=function(J,ne,oe,ce){for(var ue=this,Ae=this.findReSyncTokenType(),pe=this.exportLexerState(),xe=[],me=!1,ge=this.LA(1),ye=this.LA(1),Se=function(){var Te=ue.LA(0),Ne=ue.errorMessageProvider.buildMismatchTokenMessage({expected:ce,actual:ge,previous:Te,ruleName:ue.getCurrRuleFullName()}),$e=new MismatchedTokenException(Ne,ge,ue.LA(0));$e.resyncedTokens=dropRight(xe),ue.SAVE_ERROR($e)};!me;)if(this.tokenMatcher(ye,ce)){Se();return}else if(oe.call(this)){Se(),J.apply(this,ne);return}else this.tokenMatcher(ye,Ae)?me=!0:(ye=this.SKIP_TOKEN(),this.addToResyncTokens(ye,xe));this.importLexerState(pe)},K.prototype.shouldInRepetitionRecoveryBeTried=function(J,ne,oe){return!(oe===!1||J===void 0||ne===void 0||this.tokenMatcher(this.LA(1),J)||this.isBackTracking()||this.canPerformInRuleRecovery(J,this.getFollowsForInRuleRecovery(J,ne)))},K.prototype.getFollowsForInRuleRecovery=function(J,ne){var oe=this.getCurrentGrammarPath(J,ne),ce=this.getNextPossibleTokenTypes(oe);return ce},K.prototype.tryInRuleRecovery=function(J,ne){if(this.canRecoverWithSingleTokenInsertion(J,ne)){var oe=this.getTokenToInsert(J);return oe}if(this.canRecoverWithSingleTokenDeletion(J)){var ce=this.SKIP_TOKEN();return this.consumeToken(),ce}throw new InRuleRecoveryException("sad sad panda")},K.prototype.canPerformInRuleRecovery=function(J,ne){return this.canRecoverWithSingleTokenInsertion(J,ne)||this.canRecoverWithSingleTokenDeletion(J)},K.prototype.canRecoverWithSingleTokenInsertion=function(J,ne){var oe=this;if(!this.canTokenTypeBeInsertedInRecovery(J)||isEmpty$1(ne))return!1;var ce=this.LA(1),ue=find$1(ne,function(Ae){return oe.tokenMatcher(ce,Ae)})!==void 0;return ue},K.prototype.canRecoverWithSingleTokenDeletion=function(J){var ne=this.tokenMatcher(this.LA(2),J);return ne},K.prototype.isInCurrentRuleReSyncSet=function(J){var ne=this.getCurrFollowKey(),oe=this.getFollowSetFromFollowKey(ne);return contains$1(oe,J)},K.prototype.findReSyncTokenType=function(){for(var J=this.flattenFollowSet(),ne=this.LA(1),oe=2;;){var ce=ne.tokenType;if(contains$1(J,ce))return ce;ne=this.LA(oe),oe++}},K.prototype.getCurrFollowKey=function(){if(this.RULE_STACK.length===1)return EOF_FOLLOW_KEY;var J=this.getLastExplicitRuleShortName(),ne=this.getLastExplicitRuleOccurrenceIndex(),oe=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(J),idxInCallingRule:ne,inRule:this.shortRuleNameToFullName(oe)}},K.prototype.buildFullFollowKeyStack=function(){var J=this,ne=this.RULE_STACK,oe=this.RULE_OCCURRENCE_STACK;return map$1(ne,function(ce,ue){return ue===0?EOF_FOLLOW_KEY:{ruleName:J.shortRuleNameToFullName(ce),idxInCallingRule:oe[ue],inRule:J.shortRuleNameToFullName(ne[ue-1])}})},K.prototype.flattenFollowSet=function(){var J=this,ne=map$1(this.buildFullFollowKeyStack(),function(oe){return J.getFollowSetFromFollowKey(oe)});return flatten$1(ne)},K.prototype.getFollowSetFromFollowKey=function(J){if(J===EOF_FOLLOW_KEY)return[EOF$1];var ne=J.ruleName+J.idxInCallingRule+IN$1+J.inRule;return this.resyncFollows[ne]},K.prototype.addToResyncTokens=function(J,ne){return this.tokenMatcher(J,EOF$1)||ne.push(J),ne},K.prototype.reSyncTo=function(J){for(var ne=[],oe=this.LA(1);this.tokenMatcher(oe,J)===!1;)oe=this.SKIP_TOKEN(),this.addToResyncTokens(oe,ne);return dropRight(ne)},K.prototype.attemptInRepetitionRecovery=function(J,ne,oe,ce,ue,Ae,pe){},K.prototype.getCurrentGrammarPath=function(J,ne){var oe=this.getHumanReadableRuleStack(),ce=cloneArr(this.RULE_OCCURRENCE_STACK),ue={ruleStack:oe,occurrenceStack:ce,lastTok:J,lastTokOccurrence:ne};return ue},K.prototype.getHumanReadableRuleStack=function(){var J=this;return map$1(this.RULE_STACK,function(ne){return J.shortRuleNameToFullName(ne)})},K}();function attemptInRepetitionRecovery(K,J,ne,oe,ce,ue,Ae){var pe=this.getKeyForAutomaticLookahead(oe,ce),xe=this.firstAfterRepMap[pe];if(xe===void 0){var me=this.getCurrRuleFullName(),ge=this.getGAstProductions()[me],ye=new ue(ge,ce);xe=ye.startWalking(),this.firstAfterRepMap[pe]=xe}var Se=xe.token,Te=xe.occurrence,Ne=xe.isEndOfRule;this.RULE_STACK.length===1&&Ne&&Se===void 0&&(Se=EOF$1,Te=1),this.shouldInRepetitionRecoveryBeTried(Se,Te,Ae)&&this.tryInRepetitionRecovery(K,J,ne,Se)}var BITS_FOR_METHOD_TYPE=4,BITS_FOR_OCCURRENCE_IDX=8,OR_IDX=1<<BITS_FOR_OCCURRENCE_IDX,OPTION_IDX=2<<BITS_FOR_OCCURRENCE_IDX,MANY_IDX=3<<BITS_FOR_OCCURRENCE_IDX,AT_LEAST_ONE_IDX=4<<BITS_FOR_OCCURRENCE_IDX,MANY_SEP_IDX=5<<BITS_FOR_OCCURRENCE_IDX,AT_LEAST_ONE_SEP_IDX=6<<BITS_FOR_OCCURRENCE_IDX;function getKeyForAutomaticLookahead(K,J,ne){return ne|J|K}var LooksAhead=function(){function K(){}return K.prototype.initLooksAhead=function(J){this.dynamicTokensEnabled=has$1(J,"dynamicTokensEnabled")?J.dynamicTokensEnabled:DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=has$1(J,"maxLookahead")?J.maxLookahead:DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=isES2015MapSupported()?new Map:[],isES2015MapSupported()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},K.prototype.preComputeLookaheadFunctions=function(J){var ne=this;forEach(J,function(oe){ne.TRACE_INIT(oe.name+" Rule Lookahead",function(){var ce=collectMethods(oe),ue=ce.alternation,Ae=ce.repetition,pe=ce.option,xe=ce.repetitionMandatory,me=ce.repetitionMandatoryWithSeparator,ge=ce.repetitionWithSeparator;forEach(ue,function(ye){var Se=ye.idx===0?"":ye.idx;ne.TRACE_INIT(""+getProductionDslName(ye)+Se,function(){var Te=buildLookaheadFuncForOr(ye.idx,oe,ye.maxLookahead||ne.maxLookahead,ye.hasPredicates,ne.dynamicTokensEnabled,ne.lookAheadBuilderForAlternatives),Ne=getKeyForAutomaticLookahead(ne.fullRuleNameToShort[oe.name],OR_IDX,ye.idx);ne.setLaFuncCache(Ne,Te)})}),forEach(Ae,function(ye){ne.computeLookaheadFunc(oe,ye.idx,MANY_IDX,PROD_TYPE.REPETITION,ye.maxLookahead,getProductionDslName(ye))}),forEach(pe,function(ye){ne.computeLookaheadFunc(oe,ye.idx,OPTION_IDX,PROD_TYPE.OPTION,ye.maxLookahead,getProductionDslName(ye))}),forEach(xe,function(ye){ne.computeLookaheadFunc(oe,ye.idx,AT_LEAST_ONE_IDX,PROD_TYPE.REPETITION_MANDATORY,ye.maxLookahead,getProductionDslName(ye))}),forEach(me,function(ye){ne.computeLookaheadFunc(oe,ye.idx,AT_LEAST_ONE_SEP_IDX,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,ye.maxLookahead,getProductionDslName(ye))}),forEach(ge,function(ye){ne.computeLookaheadFunc(oe,ye.idx,MANY_SEP_IDX,PROD_TYPE.REPETITION_WITH_SEPARATOR,ye.maxLookahead,getProductionDslName(ye))})})})},K.prototype.computeLookaheadFunc=function(J,ne,oe,ce,ue,Ae){var pe=this;this.TRACE_INIT(""+Ae+(ne===0?"":ne),function(){var xe=buildLookaheadFuncForOptionalProd(ne,J,ue||pe.maxLookahead,pe.dynamicTokensEnabled,ce,pe.lookAheadBuilderForOptional),me=getKeyForAutomaticLookahead(pe.fullRuleNameToShort[J.name],oe,ne);pe.setLaFuncCache(me,xe)})},K.prototype.lookAheadBuilderForOptional=function(J,ne,oe){return buildSingleAlternativeLookaheadFunction(J,ne,oe)},K.prototype.lookAheadBuilderForAlternatives=function(J,ne,oe,ce){return buildAlternativesLookAheadFunc(J,ne,oe,ce)},K.prototype.getKeyForAutomaticLookahead=function(J,ne){var oe=this.getLastExplicitRuleShortName();return getKeyForAutomaticLookahead(oe,J,ne)},K.prototype.getLaFuncFromCache=function(J){},K.prototype.getLaFuncFromMap=function(J){return this.lookAheadFuncsCache.get(J)},K.prototype.getLaFuncFromObj=function(J){return this.lookAheadFuncsCache[J]},K.prototype.setLaFuncCache=function(J,ne){},K.prototype.setLaFuncCacheUsingMap=function(J,ne){this.lookAheadFuncsCache.set(J,ne)},K.prototype.setLaFuncUsingObj=function(J,ne){this.lookAheadFuncsCache[J]=ne},K}();function setNodeLocationOnlyOffset(K,J){isNaN(K.startOffset)===!0?(K.startOffset=J.startOffset,K.endOffset=J.endOffset):K.endOffset<J.endOffset&&(K.endOffset=J.endOffset)}function setNodeLocationFull(K,J){isNaN(K.startOffset)===!0?(K.startOffset=J.startOffset,K.startColumn=J.startColumn,K.startLine=J.startLine,K.endOffset=J.endOffset,K.endColumn=J.endColumn,K.endLine=J.endLine):K.endOffset<J.endOffset&&(K.endOffset=J.endOffset,K.endColumn=J.endColumn,K.endLine=J.endLine)}function addTerminalToCst(K,J,ne){K.children[ne]===void 0?K.children[ne]=[J]:K.children[ne].push(J)}function addNoneTerminalToCst(K,J,ne){K.children[J]===void 0?K.children[J]=[ne]:K.children[J].push(ne)}function classNameFromInstance(K){return functionName(K.constructor)}var NAME="name";function functionName(K){var J=K.name;return J||"anonymous"}function defineNameProp(K,J){var ne=Object.getOwnPropertyDescriptor(K,NAME);return isUndefined(ne)||ne.configurable?(Object.defineProperty(K,NAME,{enumerable:!1,configurable:!0,writable:!1,value:J}),!0):!1}function defaultVisit(K,J){for(var ne=keys$2(K),oe=ne.length,ce=0;ce<oe;ce++)for(var ue=ne[ce],Ae=K[ue],pe=Ae.length,xe=0;xe<pe;xe++){var me=Ae[xe];me.tokenTypeIdx===void 0&&this[me.name](me.children,J)}}function createBaseSemanticVisitorConstructor(K,J){var ne=function(){};defineNameProp(ne,K+"BaseSemantics");var oe={visit:function(ce,ue){if(isArray$4(ce)&&(ce=ce[0]),!isUndefined(ce))return this[ce.name](ce.children,ue)},validateVisitor:function(){var ce=validateVisitor(this,J);if(!isEmpty$1(ce)){var ue=map$1(ce,function(Ae){return Ae.msg});throw Error("Errors Detected in CST Visitor <"+functionName(this.constructor)+`>:
	`+(""+ue.join(`

`).replace(/\n/g,`
	`)))}}};return ne.prototype=oe,ne.prototype.constructor=ne,ne._RULE_NAMES=J,ne}function createBaseVisitorConstructorWithDefaults(K,J,ne){var oe=function(){};defineNameProp(oe,K+"BaseSemanticsWithDefaults");var ce=Object.create(ne.prototype);return forEach(J,function(ue){ce[ue]=defaultVisit}),oe.prototype=ce,oe.prototype.constructor=oe,oe}var CstVisitorDefinitionError;(function(K){K[K.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",K[K.MISSING_METHOD=1]="MISSING_METHOD"})(CstVisitorDefinitionError||(CstVisitorDefinitionError={}));function validateVisitor(K,J){var ne=validateMissingCstMethods(K,J),oe=validateRedundantMethods(K,J);return ne.concat(oe)}function validateMissingCstMethods(K,J){var ne=map$1(J,function(oe){if(!isFunction$4(K[oe]))return{msg:"Missing visitor method: <"+oe+"> on "+functionName(K.constructor)+" CST Visitor.",type:CstVisitorDefinitionError.MISSING_METHOD,methodName:oe}});return compact(ne)}var VALID_PROP_NAMES=["constructor","visit","validateVisitor"];function validateRedundantMethods(K,J){var ne=[];for(var oe in K)isFunction$4(K[oe])&&!contains$1(VALID_PROP_NAMES,oe)&&!contains$1(J,oe)&&ne.push({msg:"Redundant visitor method: <"+oe+"> on "+functionName(K.constructor)+` CST Visitor
There is no Grammar Rule corresponding to this method's name.
`,type:CstVisitorDefinitionError.REDUNDANT_METHOD,methodName:oe});return ne}var TreeBuilder=function(){function K(){}return K.prototype.initTreeBuilder=function(J){if(this.CST_STACK=[],this.outputCst=J.outputCst,this.nodeLocationTracking=has$1(J,"nodeLocationTracking")?J.nodeLocationTracking:DEFAULT_PARSER_CONFIG.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=NOOP,this.cstFinallyStateUpdate=NOOP,this.cstPostTerminal=NOOP,this.cstPostNonTerminal=NOOP,this.cstPostRule=NOOP;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=setNodeLocationFull,this.setNodeLocationFromNode=setNodeLocationFull,this.cstPostRule=NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=NOOP,this.setNodeLocationFromNode=NOOP,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=setNodeLocationOnlyOffset,this.setNodeLocationFromNode=setNodeLocationOnlyOffset,this.cstPostRule=NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=NOOP,this.setNodeLocationFromNode=NOOP,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=NOOP,this.setNodeLocationFromNode=NOOP,this.cstPostRule=NOOP,this.setInitialNodeLocation=NOOP;else throw Error('Invalid <nodeLocationTracking> config option: "'+J.nodeLocationTracking+'"')},K.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(J){J.location={startOffset:NaN,endOffset:NaN}},K.prototype.setInitialNodeLocationOnlyOffsetRegular=function(J){J.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},K.prototype.setInitialNodeLocationFullRecovery=function(J){J.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},K.prototype.setInitialNodeLocationFullRegular=function(J){var ne=this.LA(1);J.location={startOffset:ne.startOffset,startLine:ne.startLine,startColumn:ne.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},K.prototype.cstInvocationStateUpdate=function(J,ne){var oe={name:J,children:{}};this.setInitialNodeLocation(oe),this.CST_STACK.push(oe)},K.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},K.prototype.cstPostRuleFull=function(J){var ne=this.LA(0),oe=J.location;oe.startOffset<=ne.startOffset?(oe.endOffset=ne.endOffset,oe.endLine=ne.endLine,oe.endColumn=ne.endColumn):(oe.startOffset=NaN,oe.startLine=NaN,oe.startColumn=NaN)},K.prototype.cstPostRuleOnlyOffset=function(J){var ne=this.LA(0),oe=J.location;oe.startOffset<=ne.startOffset?oe.endOffset=ne.endOffset:oe.startOffset=NaN},K.prototype.cstPostTerminal=function(J,ne){var oe=this.CST_STACK[this.CST_STACK.length-1];addTerminalToCst(oe,ne,J),this.setNodeLocationFromToken(oe.location,ne)},K.prototype.cstPostNonTerminal=function(J,ne){var oe=this.CST_STACK[this.CST_STACK.length-1];addNoneTerminalToCst(oe,ne,J),this.setNodeLocationFromNode(oe.location,J.location)},K.prototype.getBaseCstVisitorConstructor=function(){if(isUndefined(this.baseCstVisitorConstructor)){var J=createBaseSemanticVisitorConstructor(this.className,keys$2(this.gastProductionsCache));return this.baseCstVisitorConstructor=J,J}return this.baseCstVisitorConstructor},K.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if(isUndefined(this.baseCstVisitorWithDefaultsConstructor)){var J=createBaseVisitorConstructorWithDefaults(this.className,keys$2(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=J,J}return this.baseCstVisitorWithDefaultsConstructor},K.prototype.getLastExplicitRuleShortName=function(){var J=this.RULE_STACK;return J[J.length-1]},K.prototype.getPreviousExplicitRuleShortName=function(){var J=this.RULE_STACK;return J[J.length-2]},K.prototype.getLastExplicitRuleOccurrenceIndex=function(){var J=this.RULE_OCCURRENCE_STACK;return J[J.length-1]},K}(),LexerAdapter=function(){function K(){}return K.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(K.prototype,"input",{get:function(){return this.tokVector},set:function(J){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=J,this.tokVectorLength=J.length},enumerable:!1,configurable:!0}),K.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):END_OF_FILE},K.prototype.LA=function(J){var ne=this.currIdx+J;return ne<0||this.tokVectorLength<=ne?END_OF_FILE:this.tokVector[ne]},K.prototype.consumeToken=function(){this.currIdx++},K.prototype.exportLexerState=function(){return this.currIdx},K.prototype.importLexerState=function(J){this.currIdx=J},K.prototype.resetLexerState=function(){this.currIdx=-1},K.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},K.prototype.getLexerPosition=function(){return this.exportLexerState()},K}(),RecognizerApi=function(){function K(){}return K.prototype.ACTION=function(J){return J.call(this)},K.prototype.consume=function(J,ne,oe){return this.consumeInternal(ne,J,oe)},K.prototype.subrule=function(J,ne,oe){return this.subruleInternal(ne,J,oe)},K.prototype.option=function(J,ne){return this.optionInternal(ne,J)},K.prototype.or=function(J,ne){return this.orInternal(ne,J)},K.prototype.many=function(J,ne){return this.manyInternal(J,ne)},K.prototype.atLeastOne=function(J,ne){return this.atLeastOneInternal(J,ne)},K.prototype.CONSUME=function(J,ne){return this.consumeInternal(J,0,ne)},K.prototype.CONSUME1=function(J,ne){return this.consumeInternal(J,1,ne)},K.prototype.CONSUME2=function(J,ne){return this.consumeInternal(J,2,ne)},K.prototype.CONSUME3=function(J,ne){return this.consumeInternal(J,3,ne)},K.prototype.CONSUME4=function(J,ne){return this.consumeInternal(J,4,ne)},K.prototype.CONSUME5=function(J,ne){return this.consumeInternal(J,5,ne)},K.prototype.CONSUME6=function(J,ne){return this.consumeInternal(J,6,ne)},K.prototype.CONSUME7=function(J,ne){return this.consumeInternal(J,7,ne)},K.prototype.CONSUME8=function(J,ne){return this.consumeInternal(J,8,ne)},K.prototype.CONSUME9=function(J,ne){return this.consumeInternal(J,9,ne)},K.prototype.SUBRULE=function(J,ne){return this.subruleInternal(J,0,ne)},K.prototype.SUBRULE1=function(J,ne){return this.subruleInternal(J,1,ne)},K.prototype.SUBRULE2=function(J,ne){return this.subruleInternal(J,2,ne)},K.prototype.SUBRULE3=function(J,ne){return this.subruleInternal(J,3,ne)},K.prototype.SUBRULE4=function(J,ne){return this.subruleInternal(J,4,ne)},K.prototype.SUBRULE5=function(J,ne){return this.subruleInternal(J,5,ne)},K.prototype.SUBRULE6=function(J,ne){return this.subruleInternal(J,6,ne)},K.prototype.SUBRULE7=function(J,ne){return this.subruleInternal(J,7,ne)},K.prototype.SUBRULE8=function(J,ne){return this.subruleInternal(J,8,ne)},K.prototype.SUBRULE9=function(J,ne){return this.subruleInternal(J,9,ne)},K.prototype.OPTION=function(J){return this.optionInternal(J,0)},K.prototype.OPTION1=function(J){return this.optionInternal(J,1)},K.prototype.OPTION2=function(J){return this.optionInternal(J,2)},K.prototype.OPTION3=function(J){return this.optionInternal(J,3)},K.prototype.OPTION4=function(J){return this.optionInternal(J,4)},K.prototype.OPTION5=function(J){return this.optionInternal(J,5)},K.prototype.OPTION6=function(J){return this.optionInternal(J,6)},K.prototype.OPTION7=function(J){return this.optionInternal(J,7)},K.prototype.OPTION8=function(J){return this.optionInternal(J,8)},K.prototype.OPTION9=function(J){return this.optionInternal(J,9)},K.prototype.OR=function(J){return this.orInternal(J,0)},K.prototype.OR1=function(J){return this.orInternal(J,1)},K.prototype.OR2=function(J){return this.orInternal(J,2)},K.prototype.OR3=function(J){return this.orInternal(J,3)},K.prototype.OR4=function(J){return this.orInternal(J,4)},K.prototype.OR5=function(J){return this.orInternal(J,5)},K.prototype.OR6=function(J){return this.orInternal(J,6)},K.prototype.OR7=function(J){return this.orInternal(J,7)},K.prototype.OR8=function(J){return this.orInternal(J,8)},K.prototype.OR9=function(J){return this.orInternal(J,9)},K.prototype.MANY=function(J){this.manyInternal(0,J)},K.prototype.MANY1=function(J){this.manyInternal(1,J)},K.prototype.MANY2=function(J){this.manyInternal(2,J)},K.prototype.MANY3=function(J){this.manyInternal(3,J)},K.prototype.MANY4=function(J){this.manyInternal(4,J)},K.prototype.MANY5=function(J){this.manyInternal(5,J)},K.prototype.MANY6=function(J){this.manyInternal(6,J)},K.prototype.MANY7=function(J){this.manyInternal(7,J)},K.prototype.MANY8=function(J){this.manyInternal(8,J)},K.prototype.MANY9=function(J){this.manyInternal(9,J)},K.prototype.MANY_SEP=function(J){this.manySepFirstInternal(0,J)},K.prototype.MANY_SEP1=function(J){this.manySepFirstInternal(1,J)},K.prototype.MANY_SEP2=function(J){this.manySepFirstInternal(2,J)},K.prototype.MANY_SEP3=function(J){this.manySepFirstInternal(3,J)},K.prototype.MANY_SEP4=function(J){this.manySepFirstInternal(4,J)},K.prototype.MANY_SEP5=function(J){this.manySepFirstInternal(5,J)},K.prototype.MANY_SEP6=function(J){this.manySepFirstInternal(6,J)},K.prototype.MANY_SEP7=function(J){this.manySepFirstInternal(7,J)},K.prototype.MANY_SEP8=function(J){this.manySepFirstInternal(8,J)},K.prototype.MANY_SEP9=function(J){this.manySepFirstInternal(9,J)},K.prototype.AT_LEAST_ONE=function(J){this.atLeastOneInternal(0,J)},K.prototype.AT_LEAST_ONE1=function(J){return this.atLeastOneInternal(1,J)},K.prototype.AT_LEAST_ONE2=function(J){this.atLeastOneInternal(2,J)},K.prototype.AT_LEAST_ONE3=function(J){this.atLeastOneInternal(3,J)},K.prototype.AT_LEAST_ONE4=function(J){this.atLeastOneInternal(4,J)},K.prototype.AT_LEAST_ONE5=function(J){this.atLeastOneInternal(5,J)},K.prototype.AT_LEAST_ONE6=function(J){this.atLeastOneInternal(6,J)},K.prototype.AT_LEAST_ONE7=function(J){this.atLeastOneInternal(7,J)},K.prototype.AT_LEAST_ONE8=function(J){this.atLeastOneInternal(8,J)},K.prototype.AT_LEAST_ONE9=function(J){this.atLeastOneInternal(9,J)},K.prototype.AT_LEAST_ONE_SEP=function(J){this.atLeastOneSepFirstInternal(0,J)},K.prototype.AT_LEAST_ONE_SEP1=function(J){this.atLeastOneSepFirstInternal(1,J)},K.prototype.AT_LEAST_ONE_SEP2=function(J){this.atLeastOneSepFirstInternal(2,J)},K.prototype.AT_LEAST_ONE_SEP3=function(J){this.atLeastOneSepFirstInternal(3,J)},K.prototype.AT_LEAST_ONE_SEP4=function(J){this.atLeastOneSepFirstInternal(4,J)},K.prototype.AT_LEAST_ONE_SEP5=function(J){this.atLeastOneSepFirstInternal(5,J)},K.prototype.AT_LEAST_ONE_SEP6=function(J){this.atLeastOneSepFirstInternal(6,J)},K.prototype.AT_LEAST_ONE_SEP7=function(J){this.atLeastOneSepFirstInternal(7,J)},K.prototype.AT_LEAST_ONE_SEP8=function(J){this.atLeastOneSepFirstInternal(8,J)},K.prototype.AT_LEAST_ONE_SEP9=function(J){this.atLeastOneSepFirstInternal(9,J)},K.prototype.RULE=function(J,ne,oe){if(oe===void 0&&(oe=DEFAULT_RULE_CONFIG),contains$1(this.definedRulesNames,J)){var ce=defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:J,grammarName:this.className}),ue={message:ce,type:ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:J};this.definitionErrors.push(ue)}this.definedRulesNames.push(J);var Ae=this.defineRule(J,ne,oe);return this[J]=Ae,Ae},K.prototype.OVERRIDE_RULE=function(J,ne,oe){oe===void 0&&(oe=DEFAULT_RULE_CONFIG);var ce=[];ce=ce.concat(validateRuleIsOverridden(J,this.definedRulesNames,this.className)),this.definitionErrors.push.apply(this.definitionErrors,ce);var ue=this.defineRule(J,ne,oe);return this[J]=ue,ue},K.prototype.BACKTRACK=function(J,ne){return function(){this.isBackTrackingStack.push(1);var oe=this.saveRecogState();try{return J.apply(this,ne),!0}catch(ce){if(isRecognitionException(ce))return!1;throw ce}finally{this.reloadRecogState(oe),this.isBackTrackingStack.pop()}}},K.prototype.getGAstProductions=function(){return this.gastProductionsCache},K.prototype.getSerializedGastProductions=function(){return serializeGrammar(values(this.gastProductionsCache))},K}(),RecognizerEngine=function(){function K(){}return K.prototype.initRecognizerEngine=function(J,ne){if(this.className=classNameFromInstance(this),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=tokenStructuredMatcherNoCategories,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},has$1(ne,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(isArray$4(J)){if(isEmpty$1(J))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof J[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(isArray$4(J))this.tokensMap=reduce$1(J,function(Ae,pe){return Ae[pe.name]=pe,Ae},{});else if(has$1(J,"modes")&&every(flatten$1(values(J.modes)),isTokenType)){var oe=flatten$1(values(J.modes)),ce=uniq(oe);this.tokensMap=reduce$1(ce,function(Ae,pe){return Ae[pe.name]=pe,Ae},{})}else if(isObject$6(J))this.tokensMap=cloneObj(J);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=EOF$1;var ue=every(values(J),function(Ae){return isEmpty$1(Ae.categoryMatches)});this.tokenMatcher=ue?tokenStructuredMatcherNoCategories:tokenStructuredMatcher,augmentTokenTypes(values(this.tokensMap))},K.prototype.defineRule=function(J,ne,oe){if(this.selfAnalysisDone)throw Error("Grammar rule <"+J+`> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);var ce=has$1(oe,"resyncEnabled")?oe.resyncEnabled:DEFAULT_RULE_CONFIG.resyncEnabled,ue=has$1(oe,"recoveryValueFunc")?oe.recoveryValueFunc:DEFAULT_RULE_CONFIG.recoveryValueFunc,Ae=this.ruleShortNameIdx<<BITS_FOR_METHOD_TYPE+BITS_FOR_OCCURRENCE_IDX;this.ruleShortNameIdx++,this.shortRuleNameToFull[Ae]=J,this.fullRuleNameToShort[J]=Ae;function pe(ge){try{if(this.outputCst===!0){ne.apply(this,ge);var ye=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(ye),ye}else return ne.apply(this,ge)}catch(Se){return this.invokeRuleCatch(Se,ce,ue)}finally{this.ruleFinallyStateUpdate()}}var xe;xe=function(ge,ye){return ge===void 0&&(ge=0),this.ruleInvocationStateUpdate(Ae,J,ge),pe.call(this,ye)};var me="ruleName";return xe[me]=J,xe.originalGrammarAction=ne,xe},K.prototype.invokeRuleCatch=function(J,ne,oe){var ce=this.RULE_STACK.length===1,ue=ne&&!this.isBackTracking()&&this.recoveryEnabled;if(isRecognitionException(J)){var Ae=J;if(ue){var pe=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(pe))if(Ae.resyncedTokens=this.reSyncTo(pe),this.outputCst){var xe=this.CST_STACK[this.CST_STACK.length-1];return xe.recoveredNode=!0,xe}else return oe();else{if(this.outputCst){var xe=this.CST_STACK[this.CST_STACK.length-1];xe.recoveredNode=!0,Ae.partialCstResult=xe}throw Ae}}else{if(ce)return this.moveToTerminatedState(),oe();throw Ae}}else throw J},K.prototype.optionInternal=function(J,ne){var oe=this.getKeyForAutomaticLookahead(OPTION_IDX,ne);return this.optionInternalLogic(J,ne,oe)},K.prototype.optionInternalLogic=function(J,ne,oe){var ce=this,ue=this.getLaFuncFromCache(oe),Ae,pe;if(J.DEF!==void 0){if(Ae=J.DEF,pe=J.GATE,pe!==void 0){var xe=ue;ue=function(){return pe.call(ce)&&xe.call(ce)}}}else Ae=J;if(ue.call(this)===!0)return Ae.call(this)},K.prototype.atLeastOneInternal=function(J,ne){var oe=this.getKeyForAutomaticLookahead(AT_LEAST_ONE_IDX,J);return this.atLeastOneInternalLogic(J,ne,oe)},K.prototype.atLeastOneInternalLogic=function(J,ne,oe){var ce=this,ue=this.getLaFuncFromCache(oe),Ae,pe;if(ne.DEF!==void 0){if(Ae=ne.DEF,pe=ne.GATE,pe!==void 0){var xe=ue;ue=function(){return pe.call(ce)&&xe.call(ce)}}}else Ae=ne;if(ue.call(this)===!0)for(var me=this.doSingleRepetition(Ae);ue.call(this)===!0&&me===!0;)me=this.doSingleRepetition(Ae);else throw this.raiseEarlyExitException(J,PROD_TYPE.REPETITION_MANDATORY,ne.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[J,ne],ue,AT_LEAST_ONE_IDX,J,NextTerminalAfterAtLeastOneWalker)},K.prototype.atLeastOneSepFirstInternal=function(J,ne){var oe=this.getKeyForAutomaticLookahead(AT_LEAST_ONE_SEP_IDX,J);this.atLeastOneSepFirstInternalLogic(J,ne,oe)},K.prototype.atLeastOneSepFirstInternalLogic=function(J,ne,oe){var ce=this,ue=ne.DEF,Ae=ne.SEP,pe=this.getLaFuncFromCache(oe);if(pe.call(this)===!0){ue.call(this);for(var xe=function(){return ce.tokenMatcher(ce.LA(1),Ae)};this.tokenMatcher(this.LA(1),Ae)===!0;)this.CONSUME(Ae),ue.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[J,Ae,xe,ue,NextTerminalAfterAtLeastOneSepWalker],xe,AT_LEAST_ONE_SEP_IDX,J,NextTerminalAfterAtLeastOneSepWalker)}else throw this.raiseEarlyExitException(J,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,ne.ERR_MSG)},K.prototype.manyInternal=function(J,ne){var oe=this.getKeyForAutomaticLookahead(MANY_IDX,J);return this.manyInternalLogic(J,ne,oe)},K.prototype.manyInternalLogic=function(J,ne,oe){var ce=this,ue=this.getLaFuncFromCache(oe),Ae,pe;if(ne.DEF!==void 0){if(Ae=ne.DEF,pe=ne.GATE,pe!==void 0){var xe=ue;ue=function(){return pe.call(ce)&&xe.call(ce)}}}else Ae=ne;for(var me=!0;ue.call(this)===!0&&me===!0;)me=this.doSingleRepetition(Ae);this.attemptInRepetitionRecovery(this.manyInternal,[J,ne],ue,MANY_IDX,J,NextTerminalAfterManyWalker,me)},K.prototype.manySepFirstInternal=function(J,ne){var oe=this.getKeyForAutomaticLookahead(MANY_SEP_IDX,J);this.manySepFirstInternalLogic(J,ne,oe)},K.prototype.manySepFirstInternalLogic=function(J,ne,oe){var ce=this,ue=ne.DEF,Ae=ne.SEP,pe=this.getLaFuncFromCache(oe);if(pe.call(this)===!0){ue.call(this);for(var xe=function(){return ce.tokenMatcher(ce.LA(1),Ae)};this.tokenMatcher(this.LA(1),Ae)===!0;)this.CONSUME(Ae),ue.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[J,Ae,xe,ue,NextTerminalAfterManySepWalker],xe,MANY_SEP_IDX,J,NextTerminalAfterManySepWalker)}},K.prototype.repetitionSepSecondInternal=function(J,ne,oe,ce,ue){for(;oe();)this.CONSUME(ne),ce.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[J,ne,oe,ce,ue],oe,AT_LEAST_ONE_SEP_IDX,J,ue)},K.prototype.doSingleRepetition=function(J){var ne=this.getLexerPosition();J.call(this);var oe=this.getLexerPosition();return oe>ne},K.prototype.orInternal=function(J,ne){var oe=this.getKeyForAutomaticLookahead(OR_IDX,ne),ce=isArray$4(J)?J:J.DEF,ue=this.getLaFuncFromCache(oe),Ae=ue.call(this,ce);if(Ae!==void 0){var pe=ce[Ae];return pe.ALT.call(this)}this.raiseNoAltException(ne,J.ERR_MSG)},K.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){var J=this.LA(1),ne=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:J,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new NotAllInputParsedException$1(ne,J))}},K.prototype.subruleInternal=function(J,ne,oe){var ce;try{var ue=oe!==void 0?oe.ARGS:void 0;return ce=J.call(this,ne,ue),this.cstPostNonTerminal(ce,oe!==void 0&&oe.LABEL!==void 0?oe.LABEL:J.ruleName),ce}catch(Ae){this.subruleInternalError(Ae,oe,J.ruleName)}},K.prototype.subruleInternalError=function(J,ne,oe){throw isRecognitionException(J)&&J.partialCstResult!==void 0&&(this.cstPostNonTerminal(J.partialCstResult,ne!==void 0&&ne.LABEL!==void 0?ne.LABEL:oe),delete J.partialCstResult),J},K.prototype.consumeInternal=function(J,ne,oe){var ce;try{var ue=this.LA(1);this.tokenMatcher(ue,J)===!0?(this.consumeToken(),ce=ue):this.consumeInternalError(J,ue,oe)}catch(Ae){ce=this.consumeInternalRecovery(J,ne,Ae)}return this.cstPostTerminal(oe!==void 0&&oe.LABEL!==void 0?oe.LABEL:J.name,ce),ce},K.prototype.consumeInternalError=function(J,ne,oe){var ce,ue=this.LA(0);throw oe!==void 0&&oe.ERR_MSG?ce=oe.ERR_MSG:ce=this.errorMessageProvider.buildMismatchTokenMessage({expected:J,actual:ne,previous:ue,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new MismatchedTokenException(ce,ne,ue))},K.prototype.consumeInternalRecovery=function(J,ne,oe){if(this.recoveryEnabled&&oe.name==="MismatchedTokenException"&&!this.isBackTracking()){var ce=this.getFollowsForInRuleRecovery(J,ne);try{return this.tryInRuleRecovery(J,ce)}catch(ue){throw ue.name===IN_RULE_RECOVERY_EXCEPTION?oe:ue}}else throw oe},K.prototype.saveRecogState=function(){var J=this.errors,ne=cloneArr(this.RULE_STACK);return{errors:J,lexerState:this.exportLexerState(),RULE_STACK:ne,CST_STACK:this.CST_STACK}},K.prototype.reloadRecogState=function(J){this.errors=J.errors,this.importLexerState(J.lexerState),this.RULE_STACK=J.RULE_STACK},K.prototype.ruleInvocationStateUpdate=function(J,ne,oe){this.RULE_OCCURRENCE_STACK.push(oe),this.RULE_STACK.push(J),this.cstInvocationStateUpdate(ne,J)},K.prototype.isBackTracking=function(){return this.isBackTrackingStack.length!==0},K.prototype.getCurrRuleFullName=function(){var J=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[J]},K.prototype.shortRuleNameToFullName=function(J){return this.shortRuleNameToFull[J]},K.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),EOF$1)},K.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},K}(),ErrorHandler=function(){function K(){}return K.prototype.initErrorHandler=function(J){this._errors=[],this.errorMessageProvider=has$1(J,"errorMessageProvider")?J.errorMessageProvider:DEFAULT_PARSER_CONFIG.errorMessageProvider},K.prototype.SAVE_ERROR=function(J){if(isRecognitionException(J))return J.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:cloneArr(this.RULE_OCCURRENCE_STACK)},this._errors.push(J),J;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(K.prototype,"errors",{get:function(){return cloneArr(this._errors)},set:function(J){this._errors=J},enumerable:!1,configurable:!0}),K.prototype.raiseEarlyExitException=function(J,ne,oe){for(var ce=this.getCurrRuleFullName(),ue=this.getGAstProductions()[ce],Ae=getLookaheadPathsForOptionalProd(J,ue,ne,this.maxLookahead),pe=Ae[0],xe=[],me=1;me<=this.maxLookahead;me++)xe.push(this.LA(me));var ge=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:pe,actual:xe,previous:this.LA(0),customUserDescription:oe,ruleName:ce});throw this.SAVE_ERROR(new EarlyExitException(ge,this.LA(1),this.LA(0)))},K.prototype.raiseNoAltException=function(J,ne){for(var oe=this.getCurrRuleFullName(),ce=this.getGAstProductions()[oe],ue=getLookaheadPathsForOr(J,ce,this.maxLookahead),Ae=[],pe=1;pe<=this.maxLookahead;pe++)Ae.push(this.LA(pe));var xe=this.LA(0),me=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:ue,actual:Ae,previous:xe,customUserDescription:ne,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new NoViableAltException(me,this.LA(1),xe))},K}(),ContentAssist=function(){function K(){}return K.prototype.initContentAssist=function(){},K.prototype.computeContentAssist=function(J,ne){var oe=this.gastProductionsCache[J];if(isUndefined(oe))throw Error("Rule ->"+J+"<- does not exist in this grammar.");return nextPossibleTokensAfter([oe],ne,this.tokenMatcher,this.maxLookahead)},K.prototype.getNextPossibleTokenTypes=function(J){var ne=first$1(J.ruleStack),oe=this.getGAstProductions(),ce=oe[ne],ue=new NextAfterTokenWalker(ce,J).startWalking();return ue},K}(),RECORDING_NULL_OBJECT={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(RECORDING_NULL_OBJECT);var HANDLE_SEPARATOR=!0,MAX_METHOD_IDX=Math.pow(2,BITS_FOR_OCCURRENCE_IDX)-1,RFT=createToken$1({name:"RECORDING_PHASE_TOKEN",pattern:Lexer$1.NA});augmentTokenTypes([RFT]);var RECORDING_PHASE_TOKEN=createTokenInstance(RFT,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(RECORDING_PHASE_TOKEN);var RECORDING_PHASE_CSTNODE={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},GastRecorder=function(){function K(){}return K.prototype.initGastRecorder=function(J){this.recordingProdStack=[],this.RECORDING_PHASE=!1},K.prototype.enableRecording=function(){var J=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",function(){for(var ne=function(ce){var ue=ce>0?ce:"";J["CONSUME"+ue]=function(Ae,pe){return this.consumeInternalRecord(Ae,ce,pe)},J["SUBRULE"+ue]=function(Ae,pe){return this.subruleInternalRecord(Ae,ce,pe)},J["OPTION"+ue]=function(Ae){return this.optionInternalRecord(Ae,ce)},J["OR"+ue]=function(Ae){return this.orInternalRecord(Ae,ce)},J["MANY"+ue]=function(Ae){this.manyInternalRecord(ce,Ae)},J["MANY_SEP"+ue]=function(Ae){this.manySepFirstInternalRecord(ce,Ae)},J["AT_LEAST_ONE"+ue]=function(Ae){this.atLeastOneInternalRecord(ce,Ae)},J["AT_LEAST_ONE_SEP"+ue]=function(Ae){this.atLeastOneSepFirstInternalRecord(ce,Ae)}},oe=0;oe<10;oe++)ne(oe);J.consume=function(ce,ue,Ae){return this.consumeInternalRecord(ue,ce,Ae)},J.subrule=function(ce,ue,Ae){return this.subruleInternalRecord(ue,ce,Ae)},J.option=function(ce,ue){return this.optionInternalRecord(ue,ce)},J.or=function(ce,ue){return this.orInternalRecord(ue,ce)},J.many=function(ce,ue){this.manyInternalRecord(ce,ue)},J.atLeastOne=function(ce,ue){this.atLeastOneInternalRecord(ce,ue)},J.ACTION=J.ACTION_RECORD,J.BACKTRACK=J.BACKTRACK_RECORD,J.LA=J.LA_RECORD})},K.prototype.disableRecording=function(){var J=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",function(){for(var ne=0;ne<10;ne++){var oe=ne>0?ne:"";delete J["CONSUME"+oe],delete J["SUBRULE"+oe],delete J["OPTION"+oe],delete J["OR"+oe],delete J["MANY"+oe],delete J["MANY_SEP"+oe],delete J["AT_LEAST_ONE"+oe],delete J["AT_LEAST_ONE_SEP"+oe]}delete J.consume,delete J.subrule,delete J.option,delete J.or,delete J.many,delete J.atLeastOne,delete J.ACTION,delete J.BACKTRACK,delete J.LA})},K.prototype.ACTION_RECORD=function(J){},K.prototype.BACKTRACK_RECORD=function(J,ne){return function(){return!0}},K.prototype.LA_RECORD=function(J){return END_OF_FILE},K.prototype.topLevelRuleRecord=function(J,ne){try{var oe=new Rule({definition:[],name:J});return oe.name=J,this.recordingProdStack.push(oe),ne.call(this),this.recordingProdStack.pop(),oe}catch(ce){if(ce.KNOWN_RECORDER_ERROR!==!0)try{ce.message=ce.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw ce}throw ce}},K.prototype.optionInternalRecord=function(J,ne){return recordProd.call(this,Option,J,ne)},K.prototype.atLeastOneInternalRecord=function(J,ne){recordProd.call(this,RepetitionMandatory,ne,J)},K.prototype.atLeastOneSepFirstInternalRecord=function(J,ne){recordProd.call(this,RepetitionMandatoryWithSeparator,ne,J,HANDLE_SEPARATOR)},K.prototype.manyInternalRecord=function(J,ne){recordProd.call(this,Repetition,ne,J)},K.prototype.manySepFirstInternalRecord=function(J,ne){recordProd.call(this,RepetitionWithSeparator,ne,J,HANDLE_SEPARATOR)},K.prototype.orInternalRecord=function(J,ne){return recordOrProd.call(this,J,ne)},K.prototype.subruleInternalRecord=function(J,ne,oe){if(assertMethodIdxIsValid(ne),!J||has$1(J,"ruleName")===!1){var ce=new Error("<SUBRULE"+getIdxSuffix(ne)+"> argument is invalid"+(" expecting a Parser method reference but got: <"+JSON.stringify(J)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw ce.KNOWN_RECORDER_ERROR=!0,ce}var ue=peek(this.recordingProdStack),Ae=J.ruleName,pe=new NonTerminal({idx:ne,nonTerminalName:Ae,referencedRule:void 0});return ue.definition.push(pe),this.outputCst?RECORDING_PHASE_CSTNODE:RECORDING_NULL_OBJECT},K.prototype.consumeInternalRecord=function(J,ne,oe){if(assertMethodIdxIsValid(ne),!hasShortKeyProperty(J)){var ce=new Error("<CONSUME"+getIdxSuffix(ne)+"> argument is invalid"+(" expecting a TokenType reference but got: <"+JSON.stringify(J)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw ce.KNOWN_RECORDER_ERROR=!0,ce}var ue=peek(this.recordingProdStack),Ae=new Terminal({idx:ne,terminalType:J});return ue.definition.push(Ae),RECORDING_PHASE_TOKEN},K}();function recordProd(K,J,ne,oe){oe===void 0&&(oe=!1),assertMethodIdxIsValid(ne);var ce=peek(this.recordingProdStack),ue=isFunction$4(J)?J:J.DEF,Ae=new K({definition:[],idx:ne});return oe&&(Ae.separator=J.SEP),has$1(J,"MAX_LOOKAHEAD")&&(Ae.maxLookahead=J.MAX_LOOKAHEAD),this.recordingProdStack.push(Ae),ue.call(this),ce.definition.push(Ae),this.recordingProdStack.pop(),RECORDING_NULL_OBJECT}function recordOrProd(K,J){var ne=this;assertMethodIdxIsValid(J);var oe=peek(this.recordingProdStack),ce=isArray$4(K)===!1,ue=ce===!1?K:K.DEF,Ae=new Alternation({definition:[],idx:J,ignoreAmbiguities:ce&&K.IGNORE_AMBIGUITIES===!0});has$1(K,"MAX_LOOKAHEAD")&&(Ae.maxLookahead=K.MAX_LOOKAHEAD);var pe=some(ue,function(xe){return isFunction$4(xe.GATE)});return Ae.hasPredicates=pe,oe.definition.push(Ae),forEach(ue,function(xe){var me=new Alternative({definition:[]});Ae.definition.push(me),has$1(xe,"IGNORE_AMBIGUITIES")?me.ignoreAmbiguities=xe.IGNORE_AMBIGUITIES:has$1(xe,"GATE")&&(me.ignoreAmbiguities=!0),ne.recordingProdStack.push(me),xe.ALT.call(ne),ne.recordingProdStack.pop()}),RECORDING_NULL_OBJECT}function getIdxSuffix(K){return K===0?"":""+K}function assertMethodIdxIsValid(K){if(K<0||K>MAX_METHOD_IDX){var J=new Error("Invalid DSL Method idx value: <"+K+`>
	`+("Idx value must be a none negative value smaller than "+(MAX_METHOD_IDX+1)));throw J.KNOWN_RECORDER_ERROR=!0,J}}var PerformanceTracer=function(){function K(){}return K.prototype.initPerformanceTracer=function(J){if(has$1(J,"traceInitPerf")){var ne=J.traceInitPerf,oe=typeof ne=="number";this.traceInitMaxIdent=oe?ne:1/0,this.traceInitPerf=oe?ne>0:ne}else this.traceInitMaxIdent=0,this.traceInitPerf=DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1},K.prototype.TRACE_INIT=function(J,ne){if(this.traceInitPerf===!0){this.traceInitIndent++;var oe=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(oe+"--> <"+J+">");var ce=timer$1(ne),ue=ce.time,Ae=ce.value,pe=ue>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&pe(oe+"<-- <"+J+"> time: "+ue+"ms"),this.traceInitIndent--,Ae}else return ne()},K}(),__extends$3=function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)Object.prototype.hasOwnProperty.call(ce,ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),END_OF_FILE=createTokenInstance(EOF$1,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(END_OF_FILE);var DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),ParserDefinitionErrorType;(function(K){K[K.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",K[K.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",K[K.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",K[K.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",K[K.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",K[K.LEFT_RECURSION=5]="LEFT_RECURSION",K[K.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",K[K.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",K[K.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",K[K.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",K[K.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",K[K.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",K[K.TOO_MANY_ALTS=12]="TOO_MANY_ALTS"})(ParserDefinitionErrorType||(ParserDefinitionErrorType={}));function EMPTY_ALT(K){return K===void 0&&(K=void 0),function(){return K}}var Parser$4=function(){function K(J,ne){this.definitionErrors=[],this.selfAnalysisDone=!1;var oe=this;if(oe.initErrorHandler(ne),oe.initLexerAdapter(),oe.initLooksAhead(ne),oe.initRecognizerEngine(J,ne),oe.initRecoverable(ne),oe.initTreeBuilder(ne),oe.initContentAssist(),oe.initGastRecorder(ne),oe.initPerformanceTracer(ne),has$1(ne,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=has$1(ne,"skipValidations")?ne.skipValidations:DEFAULT_PARSER_CONFIG.skipValidations}return K.performSelfAnalysis=function(J){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")},K.prototype.performSelfAnalysis=function(){var J=this;this.TRACE_INIT("performSelfAnalysis",function(){var ne;J.selfAnalysisDone=!0;var oe=J.className;J.TRACE_INIT("toFastProps",function(){toFastProperties(J)}),J.TRACE_INIT("Grammar Recording",function(){try{J.enableRecording(),forEach(J.definedRulesNames,function(ue){var Ae=J[ue],pe=Ae.originalGrammarAction,xe=void 0;J.TRACE_INIT(ue+" Rule",function(){xe=J.topLevelRuleRecord(ue,pe)}),J.gastProductionsCache[ue]=xe})}finally{J.disableRecording()}});var ce=[];if(J.TRACE_INIT("Grammar Resolving",function(){ce=resolveGrammar({rules:values(J.gastProductionsCache)}),J.definitionErrors.push.apply(J.definitionErrors,ce)}),J.TRACE_INIT("Grammar Validations",function(){if(isEmpty$1(ce)&&J.skipValidations===!1){var ue=validateGrammar({rules:values(J.gastProductionsCache),maxLookahead:J.maxLookahead,tokenTypes:values(J.tokensMap),errMsgProvider:defaultGrammarValidatorErrorProvider,grammarName:oe});J.definitionErrors.push.apply(J.definitionErrors,ue)}}),isEmpty$1(J.definitionErrors)&&(J.recoveryEnabled&&J.TRACE_INIT("computeAllProdsFollows",function(){var ue=computeAllProdsFollows(values(J.gastProductionsCache));J.resyncFollows=ue}),J.TRACE_INIT("ComputeLookaheadFunctions",function(){J.preComputeLookaheadFunctions(values(J.gastProductionsCache))})),!K.DEFER_DEFINITION_ERRORS_HANDLING&&!isEmpty$1(J.definitionErrors))throw ne=map$1(J.definitionErrors,function(ue){return ue.message}),new Error(`Parser Definition Errors detected:
 `+ne.join(`
-------------------------------
`))})},K.DEFER_DEFINITION_ERRORS_HANDLING=!1,K}();applyMixins(Parser$4,[Recoverable,LooksAhead,TreeBuilder,LexerAdapter,RecognizerEngine,RecognizerApi,ErrorHandler,ContentAssist,GastRecorder,PerformanceTracer]);var CstParser=function(K){__extends$3(J,K);function J(ne,oe){oe===void 0&&(oe=DEFAULT_PARSER_CONFIG);var ce=this,ue=cloneObj(oe);return ue.outputCst=!0,ce=K.call(this,ne,ue)||this,ce}return J}(Parser$4),EmbeddedActionsParser$1=function(K){__extends$3(J,K);function J(ne,oe){oe===void 0&&(oe=DEFAULT_PARSER_CONFIG);var ce=this,ue=cloneObj(oe);return ue.outputCst=!1,ce=K.call(this,ne,ue)||this,ce}return J}(Parser$4);function createSyntaxDiagramsCode(K,J){var ne=J===void 0?{}:J,oe=ne.resourceBase,ce=oe===void 0?"https://unpkg.com/chevrotain@"+VERSION+"/diagrams/":oe,ue=ne.css,Ae=ue===void 0?"https://unpkg.com/chevrotain@"+VERSION+"/diagrams/diagrams.css":ue,pe=`
<!-- This is a generated file -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>
  body {
    background-color: hsl(30, 20%, 95%)
  }
</style>

`,xe=`
<link rel='stylesheet' href='`+Ae+`'>
`,me=`
<script src='`+ce+`vendor/railroad-diagrams.js'><\/script>
<script src='`+ce+`src/diagrams_builder.js'><\/script>
<script src='`+ce+`src/diagrams_behavior.js'><\/script>
<script src='`+ce+`src/main.js'><\/script>
`,ge=`
<div id="diagrams" align="center"></div>    
`,ye=`
<script>
    window.serializedGrammar = `+JSON.stringify(K,null,"  ")+`;
<\/script>
`,Se=`
<script>
    var diagramsDiv = document.getElementById("diagrams");
    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);
<\/script>
`;return pe+xe+me+ge+ye+Se}var NL$1=`
`;function genUmdModule(K){return`
(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(['chevrotain'], factory);
    } else if (typeof module === 'object' && module.exports) {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like environments that support module.exports,
        // like Node.
        module.exports = factory(require('chevrotain'));
    } else {
        // Browser globals (root is window)
        root.returnExports = factory(root.b);
    }
}(typeof self !== 'undefined' ? self : this, function (chevrotain) {

`+genClass(K)+`
    
return {
    `+K.name+": "+K.name+` 
}
}));
`}function genWrapperFunction(K){return`    
`+genClass(K)+`
return new `+K.name+`(tokenVocabulary, config)    
`}function genClass(K){var J=`
function `+K.name+`(tokenVocabulary, config) {
    // invoke super constructor
    // No support for embedded actions currently, so we can 'hardcode'
    // The use of CstParser.
    chevrotain.CstParser.call(this, tokenVocabulary, config)

    const $ = this

    `+genAllRules(K.rules)+`

    // very important to call this after all the rules have been defined.
    // otherwise the parser may not work correctly as it will lack information
    // derived during the self analysis phase.
    this.performSelfAnalysis(this)
}

// inheritance as implemented in javascript in the previous decade... :(
`+K.name+`.prototype = Object.create(chevrotain.CstParser.prototype)
`+K.name+".prototype.constructor = "+K.name+`    
    `;return J}function genAllRules(K){var J=map$1(K,function(ne){return genRule(ne,1)});return J.join(`
`)}function genRule(K,J){var ne=indent(J,'$.RULE("'+K.name+'", function() {')+NL$1;return ne+=genDefinition(K.definition,J+1),ne+=indent(J+1,"})")+NL$1,ne}function genTerminal(K,J){var ne=K.terminalType.name;return indent(J,"$.CONSUME"+K.idx+"(this.tokensMap."+ne+")"+NL$1)}function genNonTerminal(K,J){return indent(J,"$.SUBRULE"+K.idx+"($."+K.nonTerminalName+")"+NL$1)}function genAlternation(K,J){var ne=indent(J,"$.OR"+K.idx+"([")+NL$1,oe=map$1(K.definition,function(ce){return genSingleAlt(ce,J+1)});return ne+=oe.join(","+NL$1),ne+=NL$1+indent(J,"])"+NL$1),ne}function genSingleAlt(K,J){var ne=indent(J,"{")+NL$1;return ne+=indent(J+1,"ALT: function() {")+NL$1,ne+=genDefinition(K.definition,J+1),ne+=indent(J+1,"}")+NL$1,ne+=indent(J,"}"),ne}function genProd(K,J){if(K instanceof NonTerminal)return genNonTerminal(K,J);if(K instanceof Option)return genDSLRule("OPTION",K,J);if(K instanceof RepetitionMandatory)return genDSLRule("AT_LEAST_ONE",K,J);if(K instanceof RepetitionMandatoryWithSeparator)return genDSLRule("AT_LEAST_ONE_SEP",K,J);if(K instanceof RepetitionWithSeparator)return genDSLRule("MANY_SEP",K,J);if(K instanceof Repetition)return genDSLRule("MANY",K,J);if(K instanceof Alternation)return genAlternation(K,J);if(K instanceof Terminal)return genTerminal(K,J);if(K instanceof Alternative)return genDefinition(K.definition,J);throw Error("non exhaustive match")}function genDSLRule(K,J,ne){var oe=indent(ne,"$."+(K+J.idx)+"(");return J.separator?(oe+="{"+NL$1,oe+=indent(ne+1,"SEP: this.tokensMap."+J.separator.name)+","+NL$1,oe+="DEF: "+genDefFunction(J.definition,ne+2)+NL$1,oe+=indent(ne,"}")+NL$1):oe+=genDefFunction(J.definition,ne+1),oe+=indent(ne,")")+NL$1,oe}function genDefFunction(K,J){var ne="function() {"+NL$1;return ne+=genDefinition(K,J),ne+=indent(J,"}")+NL$1,ne}function genDefinition(K,J){var ne="";return forEach(K,function(oe){ne+=genProd(oe,J+1)}),ne}function indent(K,J){var ne=Array(K*4+1).join(" ");return ne+J}function generateParserFactory(K){var J=genWrapperFunction({name:K.name,rules:K.rules}),ne=new Function("tokenVocabulary","config","chevrotain",J);return function(oe){return ne(K.tokenVocabulary,oe,require("../api"))}}function generateParserModule(K){return genUmdModule({name:K.name,rules:K.rules})}function clearCache(){console.warn(`The clearCache function was 'soft' removed from the Chevrotain API.
	 It performs no action other than printing this message.
	 Please avoid using it as it will be completely removed in the future`)}var Parser$3=function(){function K(){throw new Error(`The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.	
See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0`)}return K}();const api$2=Object.freeze(Object.defineProperty({__proto__:null,Alternation,Alternative,CstParser,EMPTY_ALT,EOF:EOF$1,EarlyExitException,EmbeddedActionsParser:EmbeddedActionsParser$1,GAstVisitor,Lexer:Lexer$1,get LexerDefinitionErrorType(){return LexerDefinitionErrorType},MismatchedTokenException,NoViableAltException,NonTerminal,NotAllInputParsedException:NotAllInputParsedException$1,Option,Parser:Parser$3,get ParserDefinitionErrorType(){return ParserDefinitionErrorType},Repetition,RepetitionMandatory,RepetitionMandatoryWithSeparator,RepetitionWithSeparator,Rule,Terminal,VERSION,assignOccurrenceIndices,clearCache,createSyntaxDiagramsCode,createToken:createToken$1,createTokenInstance,defaultGrammarResolverErrorProvider,defaultGrammarValidatorErrorProvider,defaultLexerErrorProvider,defaultParserErrorProvider,generateParserFactory,generateParserModule,isRecognitionException,resolveGrammar,serializeGrammar,serializeProduction,tokenLabel,tokenMatcher,tokenName,validateGrammar},Symbol.toStringTag,{value:"Module"})),require$$4$1=getAugmentedNamespace(api$2),{createToken,Lexer}=require$$4$1,FormulaError$5=requireError(),tokenVocabulary$1={},WhiteSpace=createToken({name:"WhiteSpace",pattern:/\s+/,group:Lexer.SKIPPED}),String$2=createToken({name:"String",pattern:/"(""|[^"])*"/}),SingleQuotedString=createToken({name:"SingleQuotedString",pattern:/'(''|[^'])*'/}),SheetQuoted$1=createToken({name:"SheetQuoted",pattern:/'((?![\\\/\[\]*?:]).)+?'!/}),Function$2=createToken({name:"Function",pattern:/[A-Za-z_]+[A-Za-z_0-9.]*\(/}),FormulaErrorT$1=createToken({name:"FormulaErrorT",pattern:/#NULL!|#DIV\/0!|#VALUE!|#NAME\?|#NUM!|#N\/A/}),RefError$1=createToken({name:"RefError",pattern:/#REF!/}),Name$1=createToken({name:"Name",pattern:/[a-zA-Z_][a-zA-Z0-9_.?]*/}),Sheet$1=createToken({name:"Sheet",pattern:/[A-Za-z_.\d\u007F-\uFFFF]+!/}),Cell$2=createToken({name:"Cell",pattern:/[$]?[A-Za-z]{1,3}[$]?[1-9][0-9]*/,longer_alt:Name$1}),Number$2=createToken({name:"Number",pattern:/[0-9]+[.]?[0-9]*([eE][+\-][0-9]+)?/}),Boolean$2=createToken({name:"Boolean",pattern:/TRUE|FALSE/i}),Column$1=createToken({name:"Column",pattern:/[$]?[A-Za-z]{1,3}/,longer_alt:Name$1}),At=createToken({name:"At",pattern:/@/}),Comma$1=createToken({name:"Comma",pattern:/,/}),Colon$1=createToken({name:"Colon",pattern:/:/}),Semicolon$1=createToken({name:"Semicolon",pattern:/;/}),OpenParen$1=createToken({name:"OpenParen",pattern:/\(/}),CloseParen$1=createToken({name:"CloseParen",pattern:/\)/}),OpenSquareParen=createToken({name:"OpenSquareParen",pattern:/\[/}),CloseSquareParen=createToken({name:"CloseSquareParen",pattern:/]/});createToken({name:"exclamationMark",pattern:/!/});const OpenCurlyParen$1=createToken({name:"OpenCurlyParen",pattern:/{/}),CloseCurlyParen$1=createToken({name:"CloseCurlyParen",pattern:/}/}),QuoteS=createToken({name:"QuoteS",pattern:/'/}),MulOp$1=createToken({name:"MulOp",pattern:/\*/}),PlusOp$1=createToken({name:"PlusOp",pattern:/\+/}),DivOp$1=createToken({name:"DivOp",pattern:/\//}),MinOp$1=createToken({name:"MinOp",pattern:/-/}),ConcatOp$1=createToken({name:"ConcatOp",pattern:/&/}),ExOp$1=createToken({name:"ExOp",pattern:/\^/}),PercentOp$1=createToken({name:"PercentOp",pattern:/%/}),GtOp$1=createToken({name:"GtOp",pattern:/>/}),EqOp$1=createToken({name:"EqOp",pattern:/=/}),LtOp$1=createToken({name:"LtOp",pattern:/</}),NeqOp$1=createToken({name:"NeqOp",pattern:/<>/}),GteOp$1=createToken({name:"GteOp",pattern:/>=/}),LteOp$1=createToken({name:"LteOp",pattern:/<=/}),allTokens$1=[WhiteSpace,String$2,SheetQuoted$1,SingleQuotedString,Function$2,FormulaErrorT$1,RefError$1,Sheet$1,Cell$2,Boolean$2,Column$1,Name$1,Number$2,At,Comma$1,Colon$1,Semicolon$1,OpenParen$1,CloseParen$1,OpenSquareParen,CloseSquareParen,OpenCurlyParen$1,CloseCurlyParen$1,QuoteS,MulOp$1,PlusOp$1,DivOp$1,MinOp$1,ConcatOp$1,ExOp$1,MulOp$1,PercentOp$1,NeqOp$1,GteOp$1,LteOp$1,GtOp$1,EqOp$1,LtOp$1],SelectLexer=new Lexer(allTokens$1,{ensureOptimizations:!0});allTokens$1.forEach(K=>{tokenVocabulary$1[K.name]=K});var lexing={tokenVocabulary:tokenVocabulary$1,lex:function(K){const J=SelectLexer.tokenize(K);if(J.errors.length>0){const ne=J.errors[0],oe=ne.line,ce=ne.column;let ue=`
`+K.split(`
`)[oe-1]+`
`;throw ue+=Array(ce-1).fill(" ").join("")+`^
`,ne.message=ue+`Error at position ${oe}:${ce}
`+ne.message,ne.errorLocation={line:oe,column:ce},FormulaError$5.ERROR(ne.message,ne)}return J}};const lexer$2=lexing,{EmbeddedActionsParser}=require$$4$1,tokenVocabulary=lexer$2.tokenVocabulary,{String:String$1,SheetQuoted,ExcelRefFunction,ExcelConditionalRefFunction,Function:Function$1,FormulaErrorT,RefError,Cell:Cell$1,Sheet,Name,Number:Number$1,Boolean:Boolean$1,Column,Comma,Colon,Semicolon,OpenParen,CloseParen,OpenCurlyParen,CloseCurlyParen,MulOp,PlusOp,DivOp,MinOp,ConcatOp,ExOp,PercentOp,NeqOp,GteOp,LteOp,GtOp,EqOp,LtOp}=lexer$2.tokenVocabulary;class Parsing extends EmbeddedActionsParser{constructor(J,ne){super(tokenVocabulary,{outputCst:!1,maxLookahead:1,skipValidations:!0}),this.utils=ne,this.binaryOperatorsPrecedence=[["^"],["*","/"],["+","-"],["&"],["<",">","=","<>","<=",">="]];const oe=this;oe.RULE("formulaWithBinaryOp",()=>{const ce=[],ue=[oe.SUBRULE(oe.formulaWithPercentOp)];return oe.MANY(()=>{ce.push(oe.OR(oe.c1||(oe.c1=[{ALT:()=>oe.CONSUME(GtOp).image},{ALT:()=>oe.CONSUME(EqOp).image},{ALT:()=>oe.CONSUME(LtOp).image},{ALT:()=>oe.CONSUME(NeqOp).image},{ALT:()=>oe.CONSUME(GteOp).image},{ALT:()=>oe.CONSUME(LteOp).image},{ALT:()=>oe.CONSUME(ConcatOp).image},{ALT:()=>oe.CONSUME(PlusOp).image},{ALT:()=>oe.CONSUME(MinOp).image},{ALT:()=>oe.CONSUME(MulOp).image},{ALT:()=>oe.CONSUME(DivOp).image},{ALT:()=>oe.CONSUME(ExOp).image}]))),ue.push(oe.SUBRULE2(oe.formulaWithPercentOp))}),oe.ACTION(()=>{for(const Ae of this.binaryOperatorsPrecedence)for(let pe=0,xe=ce.length;pe<xe;pe++){const me=ce[pe];Ae.includes(me)&&(ce.splice(pe,1),ue.splice(pe,2,this.utils.applyInfix(ue[pe],me,ue[pe+1])),pe--,xe--)}}),ue[0]}),oe.RULE("plusMinusOp",()=>oe.OR([{ALT:()=>oe.CONSUME(PlusOp).image},{ALT:()=>oe.CONSUME(MinOp).image}])),oe.RULE("formulaWithPercentOp",()=>{let ce=oe.SUBRULE(oe.formulaWithUnaryOp);return oe.OPTION(()=>{const ue=oe.CONSUME(PercentOp).image;ce=oe.ACTION(()=>this.utils.applyPostfix(ce,ue))}),ce}),oe.RULE("formulaWithUnaryOp",()=>{const ce=[];oe.MANY(()=>{const Ae=oe.OR([{ALT:()=>oe.CONSUME(PlusOp).image},{ALT:()=>oe.CONSUME(MinOp).image}]);ce.push(Ae)});const ue=oe.SUBRULE(oe.formulaWithIntersect);return ce.length>0?oe.ACTION(()=>this.utils.applyPrefix(ce,ue)):ue}),oe.RULE("formulaWithIntersect",()=>{let ce=oe.SUBRULE(oe.formulaWithRange);const ue=[ce];return oe.MANY({GATE:()=>{const Ae=oe.LA(0);return oe.LA(1).startOffset>Ae.endOffset+1},DEF:()=>{ue.push(oe.SUBRULE3(oe.formulaWithRange))}}),ue.length>1?oe.ACTION(()=>oe.ACTION(()=>this.utils.applyIntersect(ue))):ce}),oe.RULE("formulaWithRange",()=>{const ce=oe.SUBRULE(oe.formula),ue=[ce];return oe.MANY(()=>{oe.CONSUME(Colon),ue.push(oe.SUBRULE2(oe.formula))}),ue.length>1?oe.ACTION(()=>oe.ACTION(()=>this.utils.applyRange(ue))):ce}),oe.RULE("formula",()=>oe.OR9([{ALT:()=>oe.SUBRULE(oe.referenceWithoutInfix)},{ALT:()=>oe.SUBRULE(oe.paren)},{ALT:()=>oe.SUBRULE(oe.constant)},{ALT:()=>oe.SUBRULE(oe.functionCall)},{ALT:()=>oe.SUBRULE(oe.constantArray)}])),oe.RULE("paren",()=>{oe.CONSUME(OpenParen);let ce;const ue=[];return ue.push(oe.SUBRULE(oe.formulaWithBinaryOp)),oe.MANY(()=>{oe.CONSUME(Comma),ue.push(oe.SUBRULE2(oe.formulaWithBinaryOp))}),ue.length>1?ce=oe.ACTION(()=>this.utils.applyUnion(ue)):ce=ue[0],oe.CONSUME(CloseParen),ce}),oe.RULE("constantArray",()=>{const ce=[[]];let ue=0;return oe.CONSUME(OpenCurlyParen),ce[ue].push(oe.SUBRULE(oe.constantForArray)),oe.MANY(()=>{const Ae=oe.OR([{ALT:()=>oe.CONSUME(Comma).image},{ALT:()=>oe.CONSUME(Semicolon).image}]),pe=oe.SUBRULE2(oe.constantForArray);Ae===","||(ue++,ce[ue]=[]),ce[ue].push(pe)}),oe.CONSUME(CloseCurlyParen),oe.ACTION(()=>this.utils.toArray(ce))}),oe.RULE("constantForArray",()=>oe.OR([{ALT:()=>{const ce=oe.OPTION(()=>oe.SUBRULE(oe.plusMinusOp)),ue=oe.CONSUME(Number$1).image,Ae=oe.ACTION(()=>this.utils.toNumber(ue));return ce?oe.ACTION(()=>this.utils.applyPrefix([ce],Ae)):Ae}},{ALT:()=>{const ce=oe.CONSUME(String$1).image;return oe.ACTION(()=>this.utils.toString(ce))}},{ALT:()=>{const ce=oe.CONSUME(Boolean$1).image;return oe.ACTION(()=>this.utils.toBoolean(ce))}},{ALT:()=>{const ce=oe.CONSUME(FormulaErrorT).image;return oe.ACTION(()=>this.utils.toError(ce))}},{ALT:()=>{const ce=oe.CONSUME(RefError).image;return oe.ACTION(()=>this.utils.toError(ce))}}])),oe.RULE("constant",()=>oe.OR([{ALT:()=>{const ce=oe.CONSUME(Number$1).image;return oe.ACTION(()=>this.utils.toNumber(ce))}},{ALT:()=>{const ce=oe.CONSUME(String$1).image;return oe.ACTION(()=>this.utils.toString(ce))}},{ALT:()=>{const ce=oe.CONSUME(Boolean$1).image;return oe.ACTION(()=>this.utils.toBoolean(ce))}},{ALT:()=>{const ce=oe.CONSUME(FormulaErrorT).image;return oe.ACTION(()=>this.utils.toError(ce))}}])),oe.RULE("functionCall",()=>{const ce=oe.CONSUME(Function$1).image.slice(0,-1),ue=oe.SUBRULE(oe.arguments);return oe.CONSUME(CloseParen),oe.ACTION(()=>J.callFunction(ce,ue))}),oe.RULE("arguments",()=>{oe.MANY2(()=>{oe.CONSUME2(Comma)});const ce=[];return oe.OPTION(()=>{ce.push(oe.SUBRULE(oe.formulaWithBinaryOp)),oe.MANY(()=>{oe.CONSUME1(Comma),ce.push(null),oe.OPTION3(()=>{ce.pop(),ce.push(oe.SUBRULE2(oe.formulaWithBinaryOp))})})}),ce}),oe.RULE("referenceWithoutInfix",()=>oe.OR([{ALT:()=>oe.SUBRULE(oe.referenceItem)},{ALT:()=>{const ce=oe.SUBRULE(oe.prefixName),ue=oe.SUBRULE2(oe.formulaWithRange);return oe.ACTION(()=>{if(this.utils.isFormulaError(ue))return ue;ue.ref.sheet=ce}),ue}}])),oe.RULE("referenceItem",()=>oe.OR([{ALT:()=>{const ce=oe.CONSUME(Cell$1).image;return oe.ACTION(()=>this.utils.parseCellAddress(ce))}},{ALT:()=>{const ce=oe.CONSUME(Name).image;return oe.ACTION(()=>J.getVariable(ce))}},{ALT:()=>{const ce=oe.CONSUME(Column).image;return oe.ACTION(()=>this.utils.parseCol(ce))}},{ALT:()=>{const ce=oe.CONSUME(RefError).image;return oe.ACTION(()=>this.utils.toError(ce))}}])),oe.RULE("prefixName",()=>oe.OR([{ALT:()=>oe.CONSUME(Sheet).image.slice(0,-1)},{ALT:()=>oe.CONSUME(SheetQuoted).image.slice(1,-2).replace(/''/g,"'")}])),this.performSelfAnalysis()}}var parsing={Parser:Parsing};const FormulaError$4=requireError(),{Address:Address$1}=requireHelpers(),{Prefix,Postfix,Infix,Operators}=operators,Collection$1=collection,MAX_ROW$1=1048576,MAX_COLUMN$1=16384,{NotAllInputParsedException}=require$$4$1;let Utils$3=class{constructor(J){this.context=J}columnNameToNumber(J){return Address$1.columnNameToNumber(J)}parseCellAddress(J){const ne=J.match(/([$]?)([A-Za-z]{1,3})([$]?)([1-9][0-9]*)/);return{ref:{address:ne[0],col:this.columnNameToNumber(ne[2]),row:+ne[4]}}}parseRow(J){const ne=+J;if(!Number.isInteger(ne))throw Error("Row number must be integer.");return{ref:{col:void 0,row:+J}}}parseCol(J){return{ref:{col:this.columnNameToNumber(J),row:void 0}}}parseColRange(J,ne){return J=this.columnNameToNumber(J),ne=this.columnNameToNumber(ne),{ref:{from:{col:Math.min(J,ne),row:null},to:{col:Math.max(J,ne),row:null}}}}parseRowRange(J,ne){return{ref:{from:{col:null,row:Math.min(J,ne)},to:{col:null,row:Math.max(J,ne)}}}}_applyPrefix(J,ne,oe){return this.isFormulaError(ne)?ne:Prefix.unaryOp(J,ne,oe)}async applyPrefixAsync(J,ne){const{val:oe,isArray:ce}=this.extractRefValue(await ne);return this._applyPrefix(J,oe,ce)}applyPrefix(J,ne){if(this.context.async)return this.applyPrefixAsync(J,ne);{const{val:oe,isArray:ce}=this.extractRefValue(ne);return this._applyPrefix(J,oe,ce)}}_applyPostfix(J,ne,oe){return this.isFormulaError(J)?J:Postfix.percentOp(J,oe,ne)}async applyPostfixAsync(J,ne){const{val:oe,isArray:ce}=this.extractRefValue(await J);return this._applyPostfix(oe,ce,ne)}applyPostfix(J,ne){if(this.context.async)return this.applyPostfixAsync(J,ne);{const{val:oe,isArray:ce}=this.extractRefValue(J);return this._applyPostfix(oe,ce,ne)}}_applyInfix(J,ne,oe){const ce=J.val,ue=J.isArray,Ae=oe.val,pe=oe.isArray;if(this.isFormulaError(ce))return ce;if(this.isFormulaError(Ae))return Ae;if(Operators.compareOp.includes(ne))return Infix.compareOp(ce,ne,Ae,ue,pe);if(Operators.concatOp.includes(ne))return Infix.concatOp(ce,ne,Ae,ue,pe);if(Operators.mathOp.includes(ne))return Infix.mathOp(ce,ne,Ae,ue,pe);throw new Error(`Unrecognized infix: ${ne}`)}async applyInfixAsync(J,ne,oe){const ce=this.extractRefValue(await J),ue=this.extractRefValue(await oe);return this._applyInfix(ce,ne,ue)}applyInfix(J,ne,oe){if(this.context.async)return this.applyInfixAsync(J,ne,oe);{const ce=this.extractRefValue(J),ue=this.extractRefValue(oe);return this._applyInfix(ce,ne,ue)}}applyIntersect(J){if(this.isFormulaError(J[0]))return J[0];if(!J[0].ref)throw Error(`Expecting a reference, but got ${J[0]}.`);let ne,oe,ce,ue,Ae,pe;const xe=J.shift().ref;if(Ae=xe.sheet,xe.from)ne=Math.max(xe.from.row,xe.to.row),ce=Math.min(xe.from.row,xe.to.row),oe=Math.max(xe.from.col,xe.to.col),ue=Math.min(xe.from.col,xe.to.col);else{if(xe.row===void 0||xe.col===void 0)throw Error("Cannot intersect the whole row or column.");ne=ce=xe.row,oe=ue=xe.col}let me;return J.forEach(ge=>{if(this.isFormulaError(ge))return ge;if(ge=ge.ref,!ge)throw Error(`Expecting a reference, but got ${ge}.`);if(ge.from){const ye=Math.max(ge.from.row,ge.to.row),Se=Math.min(ge.from.row,ge.to.row),Te=Math.max(ge.from.col,ge.to.col),Ne=Math.min(ge.from.col,ge.to.col);(Se>ne||ye<ce||Ne>oe||Te<ue||Ae!==ge.sheet)&&(me=FormulaError$4.NULL),ne=Math.min(ne,ye),ce=Math.max(ce,Se),oe=Math.min(oe,Te),ue=Math.max(ue,Ne)}else{if(ge.row===void 0||ge.col===void 0)throw Error("Cannot intersect the whole row or column.");(ge.row>ne||ge.row<ce||ge.col>oe||ge.col<ue||Ae!==ge.sheet)&&(me=FormulaError$4.NULL),ne=ce=ge.row,oe=ue=ge.col}}),me||(ne===ce&&oe===ue?pe={ref:{sheet:Ae,row:ne,col:oe}}:pe={ref:{sheet:Ae,from:{row:ce,col:ue},to:{row:ne,col:oe}}},pe.ref.sheet||delete pe.ref.sheet,pe)}applyUnion(J){const ne=new Collection$1;for(let oe=0;oe<J.length;oe++){if(this.isFormulaError(J[oe]))return J[oe];ne.add(this.extractRefValue(J[oe]).val,J[oe])}return ne}applyRange(J){let ne,oe=-1,ce=-1,ue=MAX_ROW$1+1,Ae=MAX_COLUMN$1+1;return J.forEach(pe=>{if(this.isFormulaError(pe))return pe;typeof pe=="number"&&(pe=this.parseRow(pe)),pe=pe.ref,pe.row===void 0&&(ue=1,oe=MAX_ROW$1),pe.col===void 0&&(Ae=1,ce=MAX_COLUMN$1),pe.row>oe&&(oe=pe.row),pe.row<ue&&(ue=pe.row),pe.col>ce&&(ce=pe.col),pe.col<Ae&&(Ae=pe.col)}),oe===ue&&ce===Ae?ne={ref:{row:oe,col:ce}}:ne={ref:{from:{row:ue,col:Ae},to:{row:oe,col:ce}}},ne}extractRefValue(J){let ne=J,oe=!1;return Array.isArray(ne)&&(oe=!0),J.ref?{val:this.context.retrieveRef(J),isArray:oe}:{val:ne,isArray:oe}}toArray(J){return J}toNumber(J){return Number(J)}toString(J){return J.substring(1,J.length-1).replace(/""/g,'"')}toBoolean(J){return J==="TRUE"}toError(J){return new FormulaError$4(J.toUpperCase())}isFormulaError(J){return J instanceof FormulaError$4}static formatChevrotainError(J,ne){let oe,ce,ue="";return J instanceof NotAllInputParsedException?(oe=J.token.startLine,ce=J.token.startColumn):(oe=J.previousToken.startLine,ce=J.previousToken.startColumn+1),ue+=`
`+ne.split(`
`)[oe-1]+`
`,ue+=Array(ce-1).fill(" ").join("")+`^
`,ue+=`Error at position ${oe}:${ce}
`+J.message,J.errorLocation={line:oe,column:ce},FormulaError$4.ERROR(ue,J)}};var utils$5=Utils$3;const TextFunctions=text$1,MathFunctions=math,TrigFunctions=trigonometry,LogicalFunctions=logical,EngFunctions=engineering,ReferenceFunctions=reference,InformationFunctions=information,StatisticalFunctions=statistical,DateFunctions=date,WebFunctions=web,FormulaError$3=requireError(),{FormulaHelpers:FormulaHelpers$2}=requireHelpers(),{Parser:Parser$2,allTokens}=parsing,lexer$1=lexing,Utils$2=utils$5;let FormulaParser$2=class{constructor(J,ne=!1){this.logs=[],this.isTest=ne,this.utils=new Utils$2(this),J=Object.assign({functions:{},functionsNeedContext:{},onVariable:()=>null,onCell:()=>0,onRange:()=>[[0]]},J),this.onVariable=J.onVariable,this.functions=Object.assign({},DateFunctions,StatisticalFunctions,InformationFunctions,ReferenceFunctions,EngFunctions,LogicalFunctions,TextFunctions,MathFunctions,TrigFunctions,WebFunctions,J.functions,J.functionsNeedContext),this.onRange=J.onRange,this.onCell=J.onCell,this.funsNullAs0=Object.keys(MathFunctions).concat(Object.keys(TrigFunctions)).concat(Object.keys(LogicalFunctions)).concat(Object.keys(EngFunctions)).concat(Object.keys(ReferenceFunctions)).concat(Object.keys(StatisticalFunctions)).concat(Object.keys(DateFunctions)),this.funsNeedContextAndNoDataRetrieve=["ROW","ROWS","COLUMN","COLUMNS","SUMIF","INDEX","AVERAGEIF","IF"],this.funsNeedContext=[...Object.keys(J.functionsNeedContext),...this.funsNeedContextAndNoDataRetrieve,"INDEX","OFFSET","INDIRECT","IF","CHOOSE","WEBSERVICE"],this.funsPreserveRef=Object.keys(InformationFunctions),this.parser=new Parser$2(this,this.utils)}static get allTokens(){return allTokens}getCell(J){return J.sheet==null&&(J.sheet=this.position?this.position.sheet:void 0),this.onCell(J)}getRange(J){return J.sheet==null&&(J.sheet=this.position?this.position.sheet:void 0),this.onRange(J)}getVariable(J){const ne={ref:this.onVariable(J,this.position.sheet,this.position)};return ne.ref==null?FormulaError$3.NAME:ne}retrieveRef(J){return FormulaHelpers$2.isRangeRef(J)?this.getRange(J.ref):FormulaHelpers$2.isCellRef(J)?this.getCell(J.ref):J}_callFunction(J,ne){J.indexOf("_xlfn.")===0&&(J=J.slice(6)),J=J.toUpperCase();const oe=this.funsNullAs0.includes(J)?0:"";if(this.funsNeedContextAndNoDataRetrieve.includes(J)||(ne=ne.map(ce=>{if(ce===null)return{value:oe,isArray:!1,omitted:!0};const ue=this.utils.extractRefValue(ce);return this.funsPreserveRef.includes(J)?{value:ue.val,isArray:ue.isArray,ref:ce.ref}:{value:ue.val,isArray:ue.isArray,isRangeRef:!!FormulaHelpers$2.isRangeRef(ce),isCellRef:!!FormulaHelpers$2.isCellRef(ce)}})),this.functions[J]){let ce;try{!this.funsNeedContextAndNoDataRetrieve.includes(J)&&!this.funsNeedContext.includes(J)?ce=this.functions[J](...ne):ce=this.functions[J](this,...ne)}catch(ue){if(ue instanceof FormulaError$3)return ue;throw ue}if(ce===void 0){if(this.isTest)return this.logs.includes(J)||this.logs.push(J),{value:0,ref:{}};throw FormulaError$3.NOT_IMPLEMENTED(J)}return ce}else{if(this.isTest)return this.logs.includes(J)||this.logs.push(J),{value:0,ref:{}};throw FormulaError$3.NOT_IMPLEMENTED(J)}}async callFunctionAsync(J,ne){const oe=[];for(const ue of ne)oe.push(await ue);const ce=await this._callFunction(J,oe);return FormulaHelpers$2.checkFunctionResult(ce)}callFunction(J,ne){if(this.async)return this.callFunctionAsync(J,ne);{const oe=this._callFunction(J,ne);return FormulaHelpers$2.checkFunctionResult(oe)}}supportedFunctions(){const J=[];return Object.keys(this.functions).forEach(oe=>{try{if(this.functions[oe](0,0,0,0,0,0,0,0,0,0,0)===void 0)return;J.push(oe)}catch(ce){ce instanceof Error&&J.push(oe)}}),J.sort()}checkFormulaResult(J,ne=!1){const oe=typeof J;if(oe==="number"){if(isNaN(J))return FormulaError$3.VALUE;if(!isFinite(J))return FormulaError$3.NUM;J+=0}else if(oe==="object"){if(J instanceof FormulaError$3)return J;if(ne){if(J.ref&&(J=this.retrieveRef(J)),typeof J=="object"&&!Array.isArray(J)&&J!=null)return FormulaError$3.VALUE}else if(J.ref&&J.ref.row&&!J.ref.from)J=this.retrieveRef(J);else if(J.ref&&J.ref.from&&J.ref.from.col===J.ref.to.col)J=this.retrieveRef({ref:{row:J.ref.from.row,col:J.ref.from.col}});else if(Array.isArray(J))J=J[0][0];else return FormulaError$3.VALUE}return J}parse(J,ne,oe=!1){if(J.length===0)throw Error("Input must not be empty.");this.position=ne,this.async=!1;const ce=lexer$1.lex(J);this.parser.input=ce.tokens;let ue;try{if(ue=this.parser.formulaWithBinaryOp(),ue=this.checkFormulaResult(ue,oe),ue instanceof FormulaError$3)return ue}catch(Ae){throw FormulaError$3.ERROR(Ae.message,Ae)}if(this.parser.errors.length>0){const Ae=this.parser.errors[0];throw Utils$2.formatChevrotainError(Ae,J)}return ue}async parseAsync(J,ne,oe=!1){if(J.length===0)throw Error("Input must not be empty.");this.position=ne,this.async=!0;const ce=lexer$1.lex(J);this.parser.input=ce.tokens;let ue;try{if(ue=await this.parser.formulaWithBinaryOp(),ue=this.checkFormulaResult(ue,oe),ue instanceof FormulaError$3)return ue}catch(Ae){throw FormulaError$3.ERROR(Ae.message,Ae)}if(this.parser.errors.length>0){const Ae=this.parser.errors[0];throw Utils$2.formatChevrotainError(Ae,J)}return ue}};var hooks$1={FormulaParser:FormulaParser$2,FormulaHelpers:FormulaHelpers$2};const FormulaError$2=requireError(),{FormulaHelpers:FormulaHelpers$1,Types,Address}=requireHelpers(),Collection=collection,MAX_ROW=1048576,MAX_COLUMN=16384;let Utils$1=class{constructor(J){this.context=J}columnNameToNumber(J){return Address.columnNameToNumber(J)}parseCellAddress(J){const ne=J.match(/([$]?)([A-Za-z]{1,3})([$]?)([1-9][0-9]*)/);return{ref:{col:this.columnNameToNumber(ne[2]),row:+ne[4]}}}parseRow(J){const ne=+J;if(!Number.isInteger(ne))throw Error("Row number must be integer.");return{ref:{col:void 0,row:+J}}}parseCol(J){return{ref:{col:this.columnNameToNumber(J),row:void 0}}}applyPrefix(J,ne){return this.extractRefValue(ne),0}applyPostfix(J,ne){return this.extractRefValue(J),0}applyInfix(J,ne,oe){return this.extractRefValue(J),this.extractRefValue(oe),0}applyIntersect(J){if(this.isFormulaError(J[0]))return J[0];if(!J[0].ref)throw Error(`Expecting a reference, but got ${J[0]}.`);let ne,oe,ce,ue,Ae,pe;const xe=J.shift().ref;if(Ae=xe.sheet,xe.from)ne=Math.max(xe.from.row,xe.to.row),ce=Math.min(xe.from.row,xe.to.row),oe=Math.max(xe.from.col,xe.to.col),ue=Math.min(xe.from.col,xe.to.col);else{if(xe.row===void 0||xe.col===void 0)throw Error("Cannot intersect the whole row or column.");ne=ce=xe.row,oe=ue=xe.col}let me;return J.forEach(ge=>{if(this.isFormulaError(ge))return ge;if(ge=ge.ref,!ge)throw Error(`Expecting a reference, but got ${ge}.`);if(ge.from){const ye=Math.max(ge.from.row,ge.to.row),Se=Math.min(ge.from.row,ge.to.row),Te=Math.max(ge.from.col,ge.to.col),Ne=Math.min(ge.from.col,ge.to.col);(Se>ne||ye<ce||Ne>oe||Te<ue||Ae!==ge.sheet)&&(me=FormulaError$2.NULL),ne=Math.min(ne,ye),ce=Math.max(ce,Se),oe=Math.min(oe,Te),ue=Math.max(ue,Ne)}else{if(ge.row===void 0||ge.col===void 0)throw Error("Cannot intersect the whole row or column.");(ge.row>ne||ge.row<ce||ge.col>oe||ge.col<ue||Ae!==ge.sheet)&&(me=FormulaError$2.NULL),ne=ce=ge.row,oe=ue=ge.col}}),me||(ne===ce&&oe===ue?pe={ref:{sheet:Ae,row:ne,col:oe}}:pe={ref:{sheet:Ae,from:{row:ce,col:ue},to:{row:ne,col:oe}}},pe.ref.sheet||delete pe.ref.sheet,pe)}applyUnion(J){const ne=new Collection;for(let oe=0;oe<J.length;oe++){if(this.isFormulaError(J[oe]))return J[oe];ne.add(this.extractRefValue(J[oe]).val,J[oe])}return ne}applyRange(J){let ne,oe=-1,ce=-1,ue=MAX_ROW+1,Ae=MAX_COLUMN+1;return J.forEach(pe=>{if(this.isFormulaError(pe))return pe;typeof pe=="number"&&(pe=this.parseRow(pe)),pe=pe.ref,pe.row===void 0&&(ue=1,oe=MAX_ROW),pe.col===void 0&&(Ae=1,ce=MAX_COLUMN),pe.row>oe&&(oe=pe.row),pe.row<ue&&(ue=pe.row),pe.col>ce&&(ce=pe.col),pe.col<Ae&&(Ae=pe.col)}),oe===ue&&ce===Ae?ne={ref:{row:oe,col:ce}}:ne={ref:{from:{row:ue,col:Ae},to:{row:oe,col:ce}}},ne}extractRefValue(J){const ne=Array.isArray(J);return J.ref?{val:this.context.retrieveRef(J),isArray:ne}:{val:J,isArray:ne}}toArray(J){return J}toNumber(J){return Number(J)}toString(J){return J.substring(1,J.length-1).replace(/""/g,'"')}toBoolean(J){return J==="TRUE"}toError(J){return new FormulaError$2(J.toUpperCase())}isFormulaError(J){return J instanceof FormulaError$2}};var utils$4=Utils$1;const FormulaError$1=requireError(),{FormulaHelpers}=requireHelpers(),{Parser:Parser$1}=parsing,lexer=lexing,Utils=utils$4,{formatChevrotainError}=utils$5;let DepParser$1=class{constructor(J){this.data=[],this.utils=new Utils(this),J=Object.assign({onVariable:()=>null},J),this.utils=new Utils(this),this.onVariable=J.onVariable,this.functions={},this.parser=new Parser$1(this,this.utils)}getCell(J){return J.row!=null&&(J.sheet==null&&(J.sheet=this.position?this.position.sheet:void 0),this.data.findIndex(oe=>oe.from&&oe.from.row<=J.row&&oe.to.row>=J.row&&oe.from.col<=J.col&&oe.to.col>=J.col||oe.row===J.row&&oe.col===J.col&&oe.sheet===J.sheet)===-1&&this.data.push(J)),0}getRange(J){return J.from.row!=null&&(J.sheet==null&&(J.sheet=this.position?this.position.sheet:void 0),this.data.findIndex(oe=>oe.from&&oe.from.row===J.from.row&&oe.from.col===J.from.col&&oe.to.row===J.to.row&&oe.to.col===J.to.col)===-1&&this.data.push(J)),[[0]]}getVariable(J){const ne={ref:this.onVariable(J,this.position.sheet)};return ne.ref==null?FormulaError$1.NAME:(FormulaHelpers.isCellRef(ne)?this.getCell(ne.ref):this.getRange(ne.ref),0)}retrieveRef(J){return FormulaHelpers.isRangeRef(J)?this.getRange(J.ref):FormulaHelpers.isCellRef(J)?this.getCell(J.ref):J}callFunction(J,ne){return ne.forEach(oe=>{oe!=null&&this.retrieveRef(oe)}),{value:0,ref:{}}}checkFormulaResult(J){this.retrieveRef(J)}parse(J,ne,oe=!1){if(J.length===0)throw Error("Input must not be empty.");this.data=[],this.position=ne;const ce=lexer.lex(J);this.parser.input=ce.tokens;try{const ue=this.parser.formulaWithBinaryOp();this.checkFormulaResult(ue)}catch(ue){if(!oe)throw FormulaError$1.ERROR(ue.message,ue)}if(this.parser.errors.length>0&&!oe){const ue=this.parser.errors[0];throw formatChevrotainError(ue,J)}return this.data}};var hooks={DepParser:DepParser$1};const{FormulaParser}=hooks$1,{DepParser}=hooks,SSF=ssf$1,FormulaError=requireError();Object.assign(FormulaParser,{MAX_ROW:1048576,MAX_COLUMN:16384,SSF,DepParser,FormulaError,...requireHelpers()});var fastFormulaParser=FormulaParser;const FormulaParser$1=getDefaultExportFromCjs(fastFormulaParser),CONTEXT_VALUE=Symbol(),ORIGINAL_PROVIDER=Symbol(),isSSR=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?reactExports.useEffect:reactExports.useLayoutEffect,runWithNormalPriority=schedulerExports.unstable_runWithPriority?K=>{try{schedulerExports.unstable_runWithPriority(schedulerExports.unstable_NormalPriority,K)}catch(J){if(J.message==="Not implemented.")K();else throw J}}:K=>K(),createProvider=K=>({value:ne,children:oe})=>{const ce=reactExports.useRef(ne),ue=reactExports.useRef(0),[Ae,pe]=reactExports.useState(null);Ae&&(Ae(ne),pe(null));const xe=reactExports.useRef();if(!xe.current){const me=new Set,ge=(ye,Se)=>{reactDomExports.unstable_batchedUpdates(()=>{ue.current+=1;const Te={n:ue.current};Se!=null&&Se.suspense&&(Te.n*=-1,Te.p=new Promise(Ne=>{pe(()=>$e=>{Te.v=$e,delete Te.p,Ne($e)})})),me.forEach(Ne=>Ne(Te)),ye()})};xe.current={[CONTEXT_VALUE]:{v:ce,n:ue,l:me,u:ge}}}return useIsomorphicLayoutEffect$1(()=>{ce.current=ne,ue.current+=1,runWithNormalPriority(()=>{xe.current[CONTEXT_VALUE].l.forEach(me=>{me({n:ue.current,v:ne})})})},[ne]),reactExports.createElement(K,{value:xe.current},oe)};function createContext(K){const J=reactExports.createContext({[CONTEXT_VALUE]:{v:{current:K},n:{current:-1},l:new Set,u:ne=>ne()}});return J[ORIGINAL_PROVIDER]=J.Provider,J.Provider=createProvider(J.Provider),delete J.Consumer,J}function useContextSelector(K,J){const ne=reactExports.useContext(K)[CONTEXT_VALUE];process$1;const{v:{current:oe},n:{current:ce},l:ue}=ne,Ae=J(oe),[pe,xe]=reactExports.useReducer((me,ge)=>{if(!ge)return[oe,Ae];if("p"in ge)throw ge.p;if(ge.n===ce)return Object.is(me[1],Ae)?me:[oe,Ae];try{if("v"in ge){if(Object.is(me[0],ge.v))return me;const ye=J(ge.v);return Object.is(me[1],ye)?me:[ge.v,ye]}}catch{}return[...me]},[oe,Ae]);return Object.is(pe[1],Ae)||xe(),useIsomorphicLayoutEffect$1(()=>(ue.add(xe),()=>{ue.delete(xe)}),[ue]),pe[1]}var extendStatics$1=function(K,J){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,oe){ne.__proto__=oe}||function(ne,oe){for(var ce in oe)Object.prototype.hasOwnProperty.call(oe,ce)&&(ne[ce]=oe[ce])},extendStatics$1(K,J)};function __extends$2(K,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");extendStatics$1(K,J);function ne(){this.constructor=K}K.prototype=J===null?Object.create(J):(ne.prototype=J.prototype,new ne)}var __assign$2=function(){return __assign$2=Object.assign||function(J){for(var ne,oe=1,ce=arguments.length;oe<ce;oe++){ne=arguments[oe];for(var ue in ne)Object.prototype.hasOwnProperty.call(ne,ue)&&(J[ue]=ne[ue])}return J},__assign$2.apply(this,arguments)};function __generator$2(K,J){var ne={label:0,sent:function(){if(ue[0]&1)throw ue[1];return ue[1]},trys:[],ops:[]},oe,ce,ue,Ae;return Ae={next:pe(0),throw:pe(1),return:pe(2)},typeof Symbol=="function"&&(Ae[Symbol.iterator]=function(){return this}),Ae;function pe(me){return function(ge){return xe([me,ge])}}function xe(me){if(oe)throw new TypeError("Generator is already executing.");for(;Ae&&(Ae=0,me[0]&&(ne=0)),ne;)try{if(oe=1,ce&&(ue=me[0]&2?ce.return:me[0]?ce.throw||((ue=ce.return)&&ue.call(ce),0):ce.next)&&!(ue=ue.call(ce,me[1])).done)return ue;switch(ce=0,ue&&(me=[me[0]&2,ue.value]),me[0]){case 0:case 1:ue=me;break;case 4:return ne.label++,{value:me[1],done:!1};case 5:ne.label++,ce=me[1],me=[0];continue;case 7:me=ne.ops.pop(),ne.trys.pop();continue;default:if(ue=ne.trys,!(ue=ue.length>0&&ue[ue.length-1])&&(me[0]===6||me[0]===2)){ne=0;continue}if(me[0]===3&&(!ue||me[1]>ue[0]&&me[1]<ue[3])){ne.label=me[1];break}if(me[0]===6&&ne.label<ue[1]){ne.label=ue[1],ue=me;break}if(ue&&ne.label<ue[2]){ne.label=ue[2],ne.ops.push(me);break}ue[2]&&ne.ops.pop(),ne.trys.pop();continue}me=J.call(K,ne)}catch(ge){me=[6,ge],ce=0}finally{oe=ue=0}if(me[0]&5)throw me[1];return{value:me[0]?me[1]:void 0,done:!0}}}function __values(K){var J=typeof Symbol=="function"&&Symbol.iterator,ne=J&&K[J],oe=0;if(ne)return ne.call(K);if(K&&typeof K.length=="number")return{next:function(){return K&&oe>=K.length&&(K=void 0),{value:K&&K[oe++],done:!K}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(K,J){var ne=typeof Symbol=="function"&&K[Symbol.iterator];if(!ne)return K;var oe=ne.call(K),ce,ue=[],Ae;try{for(;(J===void 0||J-- >0)&&!(ce=oe.next()).done;)ue.push(ce.value)}catch(pe){Ae={error:pe}}finally{try{ce&&!ce.done&&(ne=oe.return)&&ne.call(oe)}finally{if(Ae)throw Ae.error}}return ue}function __spreadArray$2(K,J,ne){if(arguments.length===2)for(var oe=0,ce=J.length,ue;oe<ce;oe++)(ue||!(oe in J))&&(ue||(ue=Array.prototype.slice.call(J,0,oe)),ue[oe]=J[oe]);return K.concat(ue||Array.prototype.slice.call(J))}var SET_DATA="SET_DATA",SET_CREATE_FORMULA_PARSER="SET_CREATE_FORMULA_PARSER",SELECT_ENTIRE_ROW="SELECT_ENTIRE_ROW",SELECT_ENTIRE_COLUMN="SELECT_ENTIRE_COLUMN",SELECT_ENTIRE_WORKSHEET="SELECT_ENTIRE_WORKSHEET",SET_SELECTION="SET_SELECTION",SELECT="SELECT",ACTIVATE="ACTIVATE",SET_CELL_DATA="SET_CELL_DATA",SET_CELL_DIMENSIONS="SET_CELL_DIMENSIONS",COPY="COPY",CUT="CUT",PASTE="PASTE",EDIT="EDIT",VIEW="VIEW",CLEAR="CLEAR",BLUR="BLUR",KEY_PRESS="KEY_PRESS",KEY_DOWN="KEY_DOWN",DRAG_START="DRAG_START",DRAG_END="DRAG_END",COMMIT="COMMIT";function setData(K){return{type:SET_DATA,payload:{data:K}}}function setCreateFormulaParser(K){return{type:SET_CREATE_FORMULA_PARSER,payload:{createFormulaParser:K}}}function selectEntireRow(K,J){return{type:SELECT_ENTIRE_ROW,payload:{row:K,extend:J}}}function selectEntireColumn(K,J){return{type:SELECT_ENTIRE_COLUMN,payload:{column:K,extend:J}}}function selectEntireWorksheet(){return{type:SELECT_ENTIRE_WORKSHEET}}function setSelection(K){return{type:SET_SELECTION,payload:{selection:K}}}function select$5(K){return{type:SELECT,payload:{point:K}}}function activate(K){return{type:ACTIVATE,payload:{point:K}}}function setCellData(K,J){return{type:SET_CELL_DATA,payload:{active:K,data:J}}}function setCellDimensions(K,J){return{type:SET_CELL_DIMENSIONS,payload:{point:K,dimensions:J}}}function paste(K){return{type:PASTE,payload:{data:K}}}function keyPress(K){return{type:KEY_PRESS,payload:{event:K}}}function keyDown(K){return{type:KEY_DOWN,payload:{event:K}}}function dragStart(){return{type:DRAG_START}}function dragEnd(){return{type:DRAG_END}}function commit$1(K){return{type:COMMIT,payload:{changes:K}}}function copy(){return{type:COPY}}function cut(){return{type:CUT}}function edit$1(){return{type:EDIT}}function view$1(){return{type:VIEW}}function blur$1(){return{type:BLUR}}function get$2(K,J){var ne=J[K.row];if(ne!==void 0)return ne[K.column]}function slice(K,J,ne){for(var oe=[],ce=J.column-K.column,ue=K.row;ue<=J.row;ue++){var Ae=ue-K.row;oe[Ae]=oe[Ae]||Array(ce);for(var pe=K.column;pe<=J.column;pe++)oe[Ae][pe-K.column]=get$2({row:ue,column:pe},ne)}return oe}function set$2(K,J,ne){var oe=__spreadArray$2([],__read$1(ne),!1),ce=ne[0],ue=ce?__spreadArray$2([],__read$1(ce),!1):[];ue.length-1<K.column&&(ue[K.column]=void 0,oe[0]=ue);var Ae=ne[K.row]?__spreadArray$2([],__read$1(ne[K.row]),!1):[];return Ae[K.column]=J,oe[K.row]=Ae,oe}function mutableSet(K,J,ne){var oe=ne[0];oe||(oe=[],ne[0]=oe),K.row in ne||(ne[K.row]=[]),K.column in oe||(oe[K.column]=void 0),ne[K.row][K.column]=J}function unset(K,J){if(!has(K,J))return J;var ne=__spreadArray$2([],__read$1(J),!1),oe=__spreadArray$2([],__read$1(J[K.row]),!1);return oe[K.column]=void 0,ne[K.row]=oe,ne}function map(K,J){var ne,oe,ce=[];try{for(var ue=__values(entries(J)),Ae=ue.next();!Ae.done;Ae=ue.next()){var pe=__read$1(Ae.value,2),xe=pe[0],me=pe[1];mutableSet(xe,K(me,xe),ce)}}catch(ge){ne={error:ge}}finally{try{Ae&&!Ae.done&&(oe=ue.return)&&oe.call(ue)}finally{if(ne)throw ne.error}}return ce}function entries(K){var J,ne,oe,ce,ue,Ae,pe,xe,me,ge,ye,Se,Te,Ne,$e,ke,je;return __generator$2(this,function(Ke){switch(Ke.label){case 0:Ke.trys.push([0,11,12,13]),J=__values(K.entries()),ne=J.next(),Ke.label=1;case 1:if(ne.done)return[3,10];oe=__read$1(ne.value,2),ce=oe[0],ue=oe[1],Ke.label=2;case 2:Ke.trys.push([2,7,8,9]),Ae=(ke=void 0,__values(ue.entries())),pe=Ae.next(),Ke.label=3;case 3:return pe.done?[3,6]:(xe=__read$1(pe.value,2),me=xe[0],ge=xe[1],ye={row:ce,column:me},[4,[ye,ge]]);case 4:Ke.sent(),Ke.label=5;case 5:return pe=Ae.next(),[3,3];case 6:return[3,9];case 7:return Se=Ke.sent(),ke={error:Se},[3,9];case 8:try{pe&&!pe.done&&(je=Ae.return)&&je.call(Ae)}finally{if(ke)throw ke.error}return[7];case 9:return ne=J.next(),[3,1];case 10:return[3,13];case 11:return Te=Ke.sent(),Ne={error:Te},[3,13];case 12:try{ne&&!ne.done&&($e=J.return)&&$e.call(J)}finally{if(Ne)throw Ne.error}return[7];case 13:return[2]}})}function join(K,J,ne){J===void 0&&(J="	"),ne===void 0&&(ne=`
`);for(var oe="",ce=getSize$1(K),ue=ce.rows,Ae=ce.columns,pe=0;pe<ue;pe++){pe&&(oe+=ne);for(var xe=0;xe<Ae;xe++)xe&&(oe+=J),K[pe]&&xe in K[pe]&&(oe+=String(K[pe][xe]))}return oe}function split(K,J,ne,oe){ne===void 0&&(ne="	"),oe===void 0&&(oe=/\r\n|\n|\r/);var ce=K.replace(/"([^"]*?)"/g,function(ue,Ae){return Ae.replace(/\n/g,"\\n")});return ce.split(oe).map(function(ue){return ue.split(ne).map(function(Ae){return Ae.replace(/\\n/g,`
`)}).map(J)})}function has(K,J){var ne=J[0];return ne&&K.row>=0&&K.column>=0&&Number.isInteger(K.row)&&Number.isInteger(K.column)&&K.column<ne.length&&K.row<J.length}function getSize$1(K){return{columns:getColumnsCount(K),rows:getRowsCount(K)}}function getRowsCount(K){return K.length}function getColumnsCount(K){var J=K[0];return J?J.length:0}function pad(K,J){var ne=getSize$1(K),oe=ne.rows,ce=ne.columns;if(oe>=J.rows&&ce>=J.columns)return K;var ue={rows:J.rows>oe?J.rows:oe,columns:J.columns>ce?J.columns:ce},Ae=__spreadArray$2([],__read$1(K),!1);if(ue.columns>ce){var pe=ue.columns-ce;Ae=Ae.map(function(ge){return __spreadArray$2(__spreadArray$2([],__read$1(ge),!1),__read$1(Array(pe).fill(void 0)),!1)})}if(ue.rows>oe){var xe=ue.rows-oe,me=Array(ue.columns).fill(void 0);Ae=__spreadArray$2(__spreadArray$2([],__read$1(Ae),!1),__read$1(Array(xe).fill(me)),!1)}return Ae}function toArray(K,J){for(var ne=[],oe=0;oe<K.length;oe++)for(var ce=0;ce<K[oe].length;ce++){var ue=K[oe][ce];ne.push(J?J(ue,{row:oe,column:ce}):ue)}return ne}function maxPoint(K){var J=getSize$1(K);return{row:J.rows-1,column:J.columns-1}}var PointRange=function(){function K(J,ne){this.start={row:Math.min(J.row,ne.row),column:Math.min(J.column,ne.column)},this.end={row:Math.max(J.row,ne.row),column:Math.max(J.column,ne.column)}}return K.prototype[Symbol.iterator]=function(){var J,ne;return __generator$2(this,function(oe){switch(oe.label){case 0:J=this.start.row,oe.label=1;case 1:if(!(J<=this.end.row))return[3,6];ne=this.start.column,oe.label=2;case 2:return ne<=this.end.column?[4,{row:J,column:ne}]:[3,5];case 3:oe.sent(),oe.label=4;case 4:return ne++,[3,2];case 5:return J++,[3,1];case 6:return[2]}})},K.prototype.size=function(){var J=this.end.row+1-this.start.row,ne=this.end.column+1-this.start.column;return J*ne},K.prototype.has=function(J){return J.row>=this.start.row&&J.column>=this.start.column&&J.row<=this.end.row&&J.column<=this.end.column},K.prototype.mask=function(J){return new K({row:J.start.row>this.start.row?J.start.row:this.start.row,column:J.start.column>this.start.column?J.start.column:this.start.column},{row:J.end.row<this.end.row?J.end.row:this.end.row,column:J.end.column<this.end.column?J.end.column:this.end.column})},K.prototype.equals=function(J){return this.start.row===J.start.row&&this.start.column===J.start.column&&this.end.row===J.end.row&&this.end.column===J.end.column},K}();function isEqual$4(K,J){return K.column===J.column&&K.row===J.row}var ORIGIN={row:0,column:0},Selection$2=function(){function K(){}return K}(),EmptySelection=function(K){__extends$2(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.toRange=function(ne){return null},J.prototype.normalizeTo=function(ne){return this},J.prototype.hasEntireRow=function(ne){return!1},J.prototype.hasEntireColumn=function(ne){return!1},J.prototype.size=function(){return 0},J.prototype.has=function(){return!1},J.prototype.equals=function(ne){return ne instanceof J},J}(Selection$2),RangeSelection=function(K){__extends$2(J,K);function J(ne){var oe=K.call(this)||this;return oe.range=ne,oe}return J.prototype.toRange=function(ne){return this.range},J.prototype.normalizeTo=function(ne){var oe=getMatrixRange(ne),ce=new J(this.range.mask(oe));return ce},J.prototype.hasEntireRow=function(ne){return!1},J.prototype.hasEntireColumn=function(ne){return!1},J.prototype.size=function(ne){var oe=this.toRange(ne);return oe?oe.size():0},J.prototype.has=function(ne,oe){var ce=this.toRange(ne);return ce!==null&&ce.has(oe)},J.prototype.equals=function(ne){return ne instanceof J&&this.range.equals(ne.range)},J}(Selection$2),EntireSelection=function(K){__extends$2(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J}(Selection$2),EntireWorksheetSelection=function(K){__extends$2(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.toRange=function(ne){return getMatrixRange(ne)},J.prototype.normalizeTo=function(ne){return this},J.prototype.hasEntireColumn=function(ne){return!0},J.prototype.hasEntireRow=function(ne){return!0},J.prototype.size=function(ne){return getColumnsCount(ne)*getRowsCount(ne)},J.prototype.has=function(ne,oe){return!0},J.prototype.equals=function(ne){return ne instanceof J},J}(EntireSelection),EntireAxisSelection=function(K){__extends$2(J,K);function J(ne,oe){var ce=this;if(!isIndex$2(ne))throw new InvalidIndexError("start");if(!isIndex$2(oe))throw new InvalidIndexError("end");return ce=K.call(this)||this,ce.start=Math.min(ne,oe),ce.end=Math.max(ne,oe),ce}return J.prototype.equals=function(ne){return ne instanceof J&&this.constructor===ne.constructor&&this.start===ne.start&&this.end===ne.end},J}(EntireSelection),EntireRowsSelection=function(K){__extends$2(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.toRange=function(ne){var oe=maxPoint(ne);return new PointRange({row:this.start,column:0},{row:this.end,column:oe.column})},J.prototype.normalizeTo=function(ne){var oe=getRowsCount(ne),ce=new J(Math.max(this.start,0),Math.min(this.end,oe-1));return ce},J.prototype.hasEntireRow=function(ne){return ne>=this.start&&ne<=this.end},J.prototype.hasEntireColumn=function(ne){return!1},J.prototype.size=function(ne){var oe=this.end-this.start+1;return oe*getColumnsCount(ne)},J.prototype.has=function(ne,oe){return oe.row>=this.start&&oe.row<=this.end},J}(EntireAxisSelection),EntireColumnsSelection=function(K){__extends$2(J,K);function J(){return K!==null&&K.apply(this,arguments)||this}return J.prototype.toRange=function(ne){var oe=maxPoint(ne);return new PointRange({row:0,column:this.start},{row:oe.row,column:this.end})},J.prototype.normalizeTo=function(ne){var oe=getColumnsCount(ne),ce=new J(Math.max(this.start,0),Math.min(this.end,oe-1));return ce},J.prototype.hasEntireRow=function(ne){return!1},J.prototype.hasEntireColumn=function(ne){return ne>=this.start&&ne<=this.end},J.prototype.size=function(ne){var oe=this.end-this.start+1;return oe*getRowsCount(ne)},J.prototype.has=function(ne,oe){return oe.column>=this.start&&oe.column<=this.end},J}(EntireAxisSelection);function getMatrixRange(K){var J=maxPoint(K);return new PointRange(ORIGIN,J)}function isIndex$2(K){return Number.isInteger(K)&&K>=0}var InvalidIndexError=function(K){__extends$2(J,K);function J(ne){return K.call(this,"".concat(ne," is not a valid index. It must be 0 or a positive integer"))||this}return J}(Error),PLAIN_TEXT_MIME="text/plain",FOCUS_WITHIN_SELECTOR=":focus-within";function moveCursorToEnd(K){K.selectionStart=K.selectionEnd=K.value.length}function range(K,J,ne){J===void 0&&(J=0),ne===void 0&&(ne=1);var oe=[];if(Math.sign(K-J)===-1){for(var ce=J;ce>K;ce-=ne)oe.push(ce);return oe}for(var ce=J;ce<K;ce+=ne)oe.push(ce);return oe}function isActive$1(K,J){return!!(K&&isEqual$4(J,K))}function getOffsetRect(K){return{width:K.offsetWidth,height:K.offsetHeight,left:K.offsetLeft,top:K.offsetTop}}function writeTextToClipboard(K,J){var ne;(ne=K.clipboardData)===null||ne===void 0||ne.setData(PLAIN_TEXT_MIME,J)}function readTextFromClipboard(K){return window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):K.clipboardData&&K.clipboardData.getData?K.clipboardData.getData(PLAIN_TEXT_MIME):""}function getCellDimensions(K,J,ne){var oe=J&&J[K.row],ce=ne&&ne[K.column];return oe&&ce&&__assign$2(__assign$2({},oe),ce)}function getRangeDimensions(K,J,ne){var oe=getCellDimensions(ne.start,K,J),ce=getCellDimensions(ne.end,K,J);return oe&&ce&&{width:ce.left+ce.width-oe.left,height:ce.top+ce.height-oe.top,top:oe.top,left:oe.left}}function getSelectedDimensions(K,J,ne,oe){var ce=oe.toRange(ne);return ce?getRangeDimensions(K,J,ce):void 0}function getCSV(K){var J=map(function(ne){return(ne==null?void 0:ne.value)||""},K);return join(J)}function calculateSpreadsheetSize(K,J,ne){var oe=getSize$1(K),ce=oe.columns,ue=oe.rows;return{rows:J?Math.max(ue,J.length):ue,columns:ne?Math.max(ce,ne.length):ce}}function shouldHandleClipboardEvent(K,J){return K!==null&&J==="view"&&isFocusedWithin(K)}function isFocusedWithin(K){return K.matches(FOCUS_WITHIN_SELECTOR)}function hasLineBreaker(K){return typeof K=="string"&&K.includes(`
`)}function toString(K){return"".concat(K.row,",").concat(K.column)}function fromString(K){var J=__read$1(K.split(","),2),ne=J[0],oe=J[1];return{row:Number(ne),column:Number(oe)}}var PointSet=function(){function K(J){this.set=J}return K.from=function(J){var ne,oe,ce=new Set;try{for(var ue=__values(J),Ae=ue.next();!Ae.done;Ae=ue.next()){var pe=Ae.value;ce.add(toString(pe))}}catch(xe){ne={error:xe}}finally{try{Ae&&!Ae.done&&(oe=ue.return)&&oe.call(ue)}finally{if(ne)throw ne.error}}return new K(ce)},K.prototype.has=function(J){return this.set.has(toString(J))},Object.defineProperty(K.prototype,"size",{get:function(){return this.set.size},enumerable:!1,configurable:!0}),K.prototype.add=function(J){var ne=new Set(this.set);return ne.add(toString(J)),new K(ne)},K.prototype.delete=function(J){var ne=new Set(this.set);return ne.delete(toString(J))?new K(ne):this},K.prototype.difference=function(J){var ne,oe,ce=this;try{for(var ue=__values(J),Ae=ue.next();!Ae.done;Ae=ue.next()){var pe=Ae.value;ce=ce.delete(pe)}}catch(xe){ne={error:xe}}finally{try{Ae&&!Ae.done&&(oe=ue.return)&&oe.call(ue)}finally{if(ne)throw ne.error}}return ce},K.prototype.union=function(J){var ne,oe,ce=this;try{for(var ue=__values(J),Ae=ue.next();!Ae.done;Ae=ue.next()){var pe=Ae.value;ce=ce.add(pe)}}catch(xe){ne={error:xe}}finally{try{Ae&&!Ae.done&&(oe=ue.return)&&oe.call(ue)}finally{if(ne)throw ne.error}}return ce},K.prototype[Symbol.iterator]=function(){var J,ne,oe,ce,ue,Ae;return __generator$2(this,function(pe){switch(pe.label){case 0:pe.trys.push([0,5,6,7]),J=__values(this.set),ne=J.next(),pe.label=1;case 1:return ne.done?[3,4]:(oe=ne.value,[4,fromString(oe)]);case 2:pe.sent(),pe.label=3;case 3:return ne=J.next(),[3,1];case 4:return[3,7];case 5:return ce=pe.sent(),ue={error:ce},[3,7];case 6:try{ne&&!ne.done&&(Ae=J.return)&&Ae.call(J)}finally{if(ue)throw ue.error}return[7];case 7:return[2]}})},K}(),FORMULA_VALUE_PREFIX="=";function isFormulaValue(K){return typeof K=="string"&&K.startsWith(FORMULA_VALUE_PREFIX)&&K.length>1}function extractFormula(K){return K.slice(1)}function createFormulaParser(K,J){return new FormulaParser$1(__assign$2(__assign$2({},J),{onCell:function(ne){var oe={row:ne.row-1,column:ne.col-1},ce=get$2(oe,K);return isNaN(ce==null?void 0:ce.value)?ce==null?void 0:ce.value:Number(ce==null?void 0:ce.value)},onRange:function(ne){var oe=getSize$1(K),ce={row:ne.from.row-1,column:ne.from.col-1},ue={row:Math.min(ne.to.row-1,oe.rows-1),column:Math.min(ne.to.col-1,oe.columns-1)},Ae=slice(ce,ue,K);return toArray(Ae,function(pe){return isNaN(pe==null?void 0:pe.value)?pe==null?void 0:pe.value:Number(pe==null?void 0:pe.value)})}}))}var depParser=new fastFormulaParser.DepParser;function getReferences(K,J,ne){var oe=getSize$1(ne),ce=oe.rows,ue=oe.columns;try{var Ae=depParser.parse(K,convertPointToCellRef(J)),pe=PointSet.from(Ae.flatMap(function(xe){var me="from"in xe;if(me){var ge=xe.from,ye=xe.to,Se={row:ge.row-1,column:ge.col-1},Te={row:Math.min(ye.row-1,ce-1),column:Math.min(ye.col-1,ue-1)},Ne=new PointRange(Se,Te);return Array.from(Ne)}return{row:xe.row-1,column:xe.col-1}}));return pe}catch(xe){if(xe instanceof fastFormulaParser.FormulaError)return PointSet.from([]);throw xe}}function evaluate(K,J,ne){try{var oe=convertPointToCellRef(J),ce=ne.parse(K,oe);return ce instanceof fastFormulaParser.FormulaError?ce.toString():ce}catch(ue){if(ue instanceof fastFormulaParser.FormulaError)return ue.toString();throw ue}}function convertPointToCellRef(K){return{row:K.row+1,col:K.column+1,sheet:"Sheet1"}}var PointGraph=function(){function K(J){J===void 0&&(J=new Map),this.forwards=J}return K.from=function(J){var ne,oe,ce=new Map;try{for(var ue=__values(J),Ae=ue.next();!Ae.done;Ae=ue.next()){var pe=__read$1(Ae.value,2),xe=pe[0],me=pe[1];ce.set(toString(xe),me)}}catch(ge){ne={error:ge}}finally{try{Ae&&!Ae.done&&(oe=ue.return)&&oe.call(ue)}finally{if(ne)throw ne.error}}return new K(ce)},K.prototype.set=function(J,ne){var oe=new K(new Map(this.forwards));return ne.size===0?(oe.forwards.delete(toString(J)),oe):(oe.forwards.set(toString(J),ne),oe)},K.prototype.get=function(J){return this.forwards.get(toString(J))||PointSet.from([])},K.prototype.getBackwards=function(J){var ne,oe,ce=PointSet.from([]);try{for(var ue=__values(this.forwards),Ae=ue.next();!Ae.done;Ae=ue.next()){var pe=__read$1(Ae.value,2),xe=pe[0],me=pe[1];me.has(J)&&(ce=ce.add(fromString(xe)))}}catch(ge){ne={error:ge}}finally{try{Ae&&!Ae.done&&(oe=ue.return)&&oe.call(ue)}finally{if(ne)throw ne.error}}return ce},K.prototype.getBackwardsRecursive=function(J,ne){var oe,ce;ne===void 0&&(ne=PointSet.from([]));var ue=this.getBackwards(J),Ae=ne;try{for(var pe=__values(ue),xe=pe.next();!xe.done;xe=pe.next()){var me=xe.value;Ae.has(me)||(Ae=Ae.add(me),ue=ue.union(this.getBackwardsRecursive(me,Ae)))}}catch(ge){oe={error:ge}}finally{try{xe&&!xe.done&&(ce=pe.return)&&ce.call(pe)}finally{if(oe)throw oe.error}}return ue},K.prototype.hasCircularDependency=function(J){for(var ne,oe,ce=PointSet.from([]),ue=[J];ue.length>0;){var Ae=ue.pop();if(Ae){if(ce.has(Ae))return!0;ce=ce.add(Ae);var pe=this.get(Ae);if(pe)try{for(var xe=(ne=void 0,__values(pe)),me=xe.next();!me.done;me=xe.next()){var ge=me.value;ue.push(ge)}}catch(ye){ne={error:ye}}finally{try{me&&!me.done&&(oe=xe.return)&&oe.call(xe)}finally{if(ne)throw ne.error}}}}return!1},K.prototype[Symbol.iterator]=function(){var J,ne,oe,ce,ue,Ae,pe,xe,me,ge,ye,Se,Te,Ne,$e,ke,je;return __generator$2(this,function(Ke){switch(Ke.label){case 0:J=new Set,Ke.label=1;case 1:Ke.trys.push([1,13,14,15]),ne=__values(this.forwards),oe=ne.next(),Ke.label=2;case 2:return oe.done?[3,12]:(ce=__read$1(oe.value,2),ue=ce[0],Ae=ce[1],pe=fromString(ue),J.add(ue),[4,[pe,Ae]]);case 3:Ke.sent(),Ke.label=4;case 4:Ke.trys.push([4,9,10,11]),xe=(ke=void 0,__values(Ae)),me=xe.next(),Ke.label=5;case 5:return me.done?[3,8]:(ge=me.value,ye=toString(ge),!J.has(ye)&&!this.forwards.has(ye)?(J.add(ye),[4,[ge,PointSet.from([])]]):[3,7]);case 6:Ke.sent(),Ke.label=7;case 7:return me=xe.next(),[3,5];case 8:return[3,11];case 9:return Se=Ke.sent(),ke={error:Se},[3,11];case 10:try{me&&!me.done&&(je=xe.return)&&je.call(xe)}finally{if(ke)throw ke.error}return[7];case 11:return oe=ne.next(),[3,2];case 12:return[3,15];case 13:return Te=Ke.sent(),Ne={error:Te},[3,15];case 14:try{oe&&!oe.done&&($e=ne.return)&&$e.call(ne)}finally{if(Ne)throw Ne.error}return[7];case 15:return[2]}})},K.prototype.traverseBFSBackwards=function(){var J,ne,oe,ce,ue,pe,Ae,pe,xe,me,ge,ye,Se,Te,Ne,$e;return __generator$2(this,function(ke){switch(ke.label){case 0:J=PointSet.from([]),ne=[];try{for(oe=__values(this),ce=oe.next();!ce.done;ce=oe.next())ue=__read$1(ce.value,2),pe=ue[0],Ae=ue[1],Ae.size===0&&(J=J.add(pe),ne.push(pe))}catch(je){Se={error:je}}finally{try{ce&&!ce.done&&(Te=oe.return)&&Te.call(oe)}finally{if(Se)throw Se.error}}ke.label=1;case 1:return ne.length>0?(pe=ne.shift(),pe?[4,pe]:[3,1]):[3,3];case 2:if(ke.sent(),xe=this.getBackwards(pe),xe.size===0)return[3,1];try{for(me=(Ne=void 0,__values(xe)),ge=me.next();!ge.done;ge=me.next())ye=ge.value,!J.has(ye)&&this.get(ye).difference(J).size===0&&(ne.push(ye),J=J.add(ye))}catch(je){Ne={error:je}}finally{try{ge&&!ge.done&&($e=me.return)&&$e.call(me)}finally{if(Ne)throw Ne.error}}return[3,1];case 3:return[2]}})},K}(),Model=function(){function K(J,ne,oe,ce){this.createFormulaParser=J,this.data=ne,this.referenceGraph=oe||createReferenceGraph(ne),this.evaluatedData=ce||createEvaluatedData(ne,this.referenceGraph,this.createFormulaParser)}return K}();function updateCellValue(K,J,ne){var oe=set$2(J,ne,K.data),ce=isFormulaValue(ne.value)?updateReferenceGraph(K.referenceGraph,J,ne,oe):K.referenceGraph,ue=K.createFormulaParser(oe),Ae=evaluateCell(K.evaluatedData,oe,ce,J,ne,ue);return new Model(K.createFormulaParser,oe,ce,Ae)}function updateReferenceGraph(K,J,ne,oe){var ce=getReferences(extractFormula(ne.value),J,oe),ue=K.set(J,ce);return ue}function evaluateCell(K,J,ne,oe,ce,ue){var Ae,pe,xe,me;if(ne.hasCircularDependency(oe)){var ge=PointSet.from([oe]),ye=set$2(oe,__assign$2(__assign$2({},ce),{value:fastFormulaParser.FormulaError.REF}),K);try{for(var Se=__values(ne.getBackwardsRecursive(oe)),Te=Se.next();!Te.done;Te=Se.next()){var Ne=Te.value;if(ge.has(Ne))break;ge=ge.add(Ne);var $e=get$2(Ne,J);$e&&(ye=set$2(Ne,__assign$2(__assign$2({},$e),{value:fastFormulaParser.FormulaError.REF}),ye))}}catch(rt){Ae={error:rt}}finally{try{Te&&!Te.done&&(pe=Se.return)&&pe.call(Se)}finally{if(Ae)throw Ae.error}}return ye}var ke=K,je=isFormulaValue(ce.value)?getFormulaComputedValue(ce.value,oe,ue):ce.value,Ke=__assign$2(__assign$2({},ce),{value:je});ke=set$2(oe,Ke,ke);try{for(var Ye=__values(ne.getBackwardsRecursive(oe)),ze=Ye.next();!ze.done;ze=Ye.next()){var Ne=ze.value,$e=get$2(Ne,J);if($e){var Xe=isFormulaValue($e.value)?getFormulaComputedValue($e.value,oe,ue):$e.value,Je=__assign$2(__assign$2({},$e),{value:Xe});ke=set$2(Ne,Je,ke)}}}catch(rt){xe={error:rt}}finally{try{ze&&!ze.done&&(me=Ye.return)&&me.call(Ye)}finally{if(xe)throw xe.error}}return ke}function createReferenceGraph(K){var J,ne,oe=[];try{for(var ce=__values(entries(K)),ue=ce.next();!ue.done;ue=ce.next()){var Ae=__read$1(ue.value,2),pe=Ae[0],xe=Ae[1];if(xe&&isFormulaValue(xe.value)){var me=getReferences(extractFormula(xe.value),pe,K);oe.push([pe,me])}}}catch(ge){J={error:ge}}finally{try{ue&&!ue.done&&(ne=ce.return)&&ne.call(ce)}finally{if(J)throw J.error}}return PointGraph.from(oe)}function createEvaluatedData(K,J,ne){var oe,ce,ue=K,Ae=ne(ue);try{for(var pe=__values(J.traverseBFSBackwards()),xe=pe.next();!xe.done;xe=pe.next()){var me=xe.value,ge=get$2(me,K);if(ge&&isFormulaValue(ge.value)){var ye=getFormulaComputedValue(ge.value,me,Ae);ue=set$2(me,__assign$2(__assign$2({},ge),{value:ye}),ue),Ae=ne(ue)}}}catch(Se){oe={error:Se}}finally{try{xe&&!xe.done&&(ce=pe.return)&&ce.call(pe)}finally{if(oe)throw oe.error}}return ue}function getFormulaComputedValue(K,J,ne){var oe=extractFormula(K);try{return evaluate(oe,J,ne)}catch{return fastFormulaParser.FormulaError.REF}}var INITIAL_STATE={active:null,mode:"view",rowDimensions:{},columnDimensions:{},lastChanged:null,hasPasted:!1,cut:!1,dragging:!1,model:new Model(createFormulaParser,[]),selected:new EmptySelection,copied:null,lastCommit:null};function reducer$5(K,J){var ne,oe,ce,ue,Ae,pe;switch(J.type){case SET_DATA:{var xe=J.payload.data,me=K.active&&has(K.active,xe)?K.active:null,ge=K.selected.normalizeTo(xe);return __assign$2(__assign$2({},K),{model:new Model(K.model.createFormulaParser,xe),active:me,selected:ge})}case SET_CREATE_FORMULA_PARSER:{var ye=J.payload.createFormulaParser;return __assign$2(__assign$2({},K),{model:new Model(ye,K.model.data)})}case SELECT_ENTIRE_ROW:{var Se=J.payload,Te=Se.row,Ne=Se.extend,$e=K.active;return __assign$2(__assign$2({},K),{selected:Ne&&$e?new EntireRowsSelection($e.row,Te):new EntireRowsSelection(Te,Te),active:Ne&&$e?$e:__assign$2(__assign$2({},ORIGIN),{row:Te}),mode:"view"})}case SELECT_ENTIRE_COLUMN:{var ke=J.payload,je=ke.column,Ne=ke.extend,$e=K.active;return __assign$2(__assign$2({},K),{selected:Ne&&$e?new EntireColumnsSelection($e.column,je):new EntireColumnsSelection(je,je),active:Ne&&$e?$e:__assign$2(__assign$2({},ORIGIN),{column:je}),mode:"view"})}case SELECT_ENTIRE_WORKSHEET:return __assign$2(__assign$2({},K),{selected:new EntireWorksheetSelection,active:ORIGIN,mode:"view"});case SET_SELECTION:{var Ke=J.payload.selection,Ye=Ke.toRange(K.model.data),$e=K.active&&Ke.has(K.model.data,K.active)?K.active:Ye==null?void 0:Ye.start;return __assign$2(__assign$2({},K),{selected:Ke,active:$e||null,mode:"view"})}case SELECT:{var ze=J.payload.point;return K.active&&!isActive$1(K.active,ze)?__assign$2(__assign$2({},K),{selected:new RangeSelection(new PointRange(ze,K.active)),mode:"view"}):K}case ACTIVATE:{var ze=J.payload.point;return __assign$2(__assign$2({},K),{selected:new RangeSelection(new PointRange(ze,ze)),active:ze,mode:isActive$1(K.active,ze)?"edit":"view"})}case SET_CELL_DATA:{var Xe=J.payload,$e=Xe.active,Je=Xe.data;return isActiveReadOnly(K)?K:__assign$2(__assign$2({},K),{model:updateCellValue(K.model,$e,Je),lastChanged:$e})}case SET_CELL_DIMENSIONS:{var rt=J.payload,ze=rt.point,Ze=rt.dimensions,et=K.rowDimensions[ze.row],nt=K.columnDimensions[ze.column];return et&&nt&&et.top===Ze.top&&et.height===Ze.height&&nt.left===Ze.left&&nt.width===Ze.width?K:__assign$2(__assign$2({},K),{rowDimensions:__assign$2(__assign$2({},K.rowDimensions),(ne={},ne[ze.row]={top:Ze.top,height:Ze.height},ne)),columnDimensions:__assign$2(__assign$2({},K.columnDimensions),(oe={},oe[ze.column]={left:Ze.left,width:Ze.width},oe))})}case COPY:case CUT:{var Ge=K.selected.toRange(K.model.data);return __assign$2(__assign$2({},K),{copied:Ge,cut:J.type===CUT,hasPasted:!1})}case PASTE:{var ve=J.payload.data,$e=K.active;if(!$e)return K;var Be=split(ve,function(It){return{value:It}}),Re=getSize$1(Be),Ge=K.selected.toRange(K.model.data);if(Ge&&Re.rows===1&&Re.columns===1){var Ie=get$2({row:0,column:0},Be),Fe=K.cut&&K.copied?unset(K.copied.start,K.model.data):K.model.data,qe=[];try{for(var We=__values(Ge||[]),Ue=We.next();!Ue.done;Ue=We.next()){var ze=Ue.value,_e=get$2(ze,K.model.data);qe.push({prevCell:_e||null,nextCell:Ie||null}),Fe=set$2(ze,Ie,Fe)}}catch(It){ce={error:It}}finally{try{Ue&&!Ue.done&&(ue=We.return)&&ue.call(We)}finally{if(ce)throw ce.error}}return __assign$2(__assign$2({},K),{model:new Model(createFormulaParser,Fe),copied:null,cut:!1,hasPasted:!0,mode:"view",lastCommit:qe})}var Qe={rows:$e.row+Re.rows,columns:$e.column+Re.columns},tt=pad(K.model.data,Qe),it={data:tt,commit:[]};try{for(var at=__values(entries(Be)),ot=at.next();!ot.done;ot=at.next()){var lt=__read$1(ot.value,2),ze=lt[0],Ie=lt[1],st=it.commit||[],ut={row:ze.row+$e.row,column:ze.column+$e.column},ft=it.data;if(K.cut){if(K.copied){var dt={row:ze.row+K.copied.start.row,column:ze.column+K.copied.start.column};ft=unset(dt,it.data)}st=__spreadArray$2(__spreadArray$2([],__read$1(st),!1),[{prevCell:Ie||null,nextCell:null}],!1)}has(ut,tt)||(it={data:ft,commit:st});var _e=get$2(ut,ft)||null;st=__spreadArray$2(__spreadArray$2([],__read$1(st),!1),[{prevCell:_e,nextCell:Ie||null}],!1),it.data=set$2(ut,__assign$2(__assign$2({value:void 0},_e),Ie),ft),it.commit=st}}catch(It){Ae={error:It}}finally{try{ot&&!ot.done&&(pe=at.return)&&pe.call(at)}finally{if(Ae)throw Ae.error}}return __assign$2(__assign$2({},K),{model:new Model(createFormulaParser,it.data),selected:new RangeSelection(new PointRange($e,{row:$e.row+Re.rows-1,column:$e.column+Re.columns-1})),copied:null,cut:!1,hasPasted:!0,mode:"view",lastCommit:it.commit})}case EDIT:return edit(K);case VIEW:return view(K);case CLEAR:return clear(K);case BLUR:return blur(K);case KEY_PRESS:{var Bt=J.payload.event;if(isActiveReadOnly(K)||Bt.metaKey)return K;if(K.mode==="view"&&K.active){var Ge=K.selected.toRange(K.model.data);return(Ge==null?void 0:Ge.size())===1?edit(clear(K)):edit(K)}return K}case KEY_DOWN:{var pt=J.payload.event,mt=getKeyDownHandler(K,pt);return mt?__assign$2(__assign$2({},K),mt(K,pt)):K}case DRAG_START:return __assign$2(__assign$2({},K),{dragging:!0});case DRAG_END:return __assign$2(__assign$2({},K),{dragging:!1});case COMMIT:{var bt=J.payload.changes;return __assign$2(__assign$2({},K),commit(bt))}default:throw new Error("Unknown action")}}function edit(K){return isActiveReadOnly(K)?K:__assign$2(__assign$2({},K),{mode:"edit"})}function clear(K){var J,ne;if(!K.active)return K;var oe=function(Te){return Te&&!Te.readOnly},ce=function(Te){return oe(Te)?Object.assign({},Te,{value:void 0}):Te},ue=K.selected.toRange(K.model.data),Ae=[],pe=K.model.data;try{for(var xe=__values(ue||[]),me=xe.next();!me.done;me=xe.next()){var ge=me.value,ye=get$2(ge,K.model.data),Se=ce(ye);Ae.push({prevCell:ye||null,nextCell:Se||null}),pe=set$2(ge,Se,pe)}}catch(Te){J={error:Te}}finally{try{me&&!me.done&&(ne=xe.return)&&ne.call(xe)}finally{if(J)throw J.error}}return __assign$2(__assign$2(__assign$2({},K),{model:new Model(createFormulaParser,pe)}),commit(Ae))}function blur(K){return __assign$2(__assign$2({},K),{active:null,selected:new EmptySelection})}function view(K){return __assign$2(__assign$2({},K),{mode:"view"})}function commit(K){return{lastCommit:K}}var go=function(K,J){return function(ne){if(ne.active){var oe=getSize$1(ne.model.data),ce=ne.active.column+J,ue=ce>=oe.columns,Ae={row:ne.active.row+K+(ue?1:0),column:(ne.active.column+J)%oe.columns};return has(Ae,ne.model.data)?__assign$2(__assign$2({},ne),{active:Ae,selected:new RangeSelection(new PointRange(Ae,Ae)),mode:"view"}):__assign$2(__assign$2({},ne),{mode:"view"})}}},keyDownHandlers={ArrowUp:go(-1,0),ArrowDown:go(1,0),ArrowLeft:go(0,-1),ArrowRight:go(0,1),Tab:go(0,1),Enter:edit,Backspace:clear,Delete:clear,Escape:blur},editKeyDownHandlers={Escape:view,Tab:keyDownHandlers.Tab,Enter:keyDownHandlers.ArrowDown},editShiftKeyDownHandlers={Tab:go(0,-1)},Direction$1;(function(K){K.Left="Left",K.Right="Right",K.Top="Top",K.Bottom="Bottom"})(Direction$1||(Direction$1={}));var shiftKeyDownHandlers={ArrowUp:function(K){return __assign$2(__assign$2({},K),{selected:modifyEdge(K.selected,K.active,K.model.data,Direction$1.Top)})},ArrowDown:function(K){return __assign$2(__assign$2({},K),{selected:modifyEdge(K.selected,K.active,K.model.data,Direction$1.Bottom)})},ArrowLeft:function(K){return __assign$2(__assign$2({},K),{selected:modifyEdge(K.selected,K.active,K.model.data,Direction$1.Left)})},ArrowRight:function(K){return __assign$2(__assign$2({},K),{selected:modifyEdge(K.selected,K.active,K.model.data,Direction$1.Right)})},Tab:go(0,-1)},shiftMetaKeyDownHandlers={},metaKeyDownHandlers={};function getKeyDownHandler(K,J){var ne=J.key,oe;return K.mode==="edit"?J.shiftKey?oe=editShiftKeyDownHandlers:oe=editKeyDownHandlers:J.shiftKey&&J.metaKey?oe=shiftMetaKeyDownHandlers:J.shiftKey?oe=shiftKeyDownHandlers:J.metaKey?oe=metaKeyDownHandlers:oe=keyDownHandlers,oe[ne]}function hasKeyDownHandler(K,J){return getKeyDownHandler(K,J)!==void 0}function isActiveReadOnly(K){var J=getActive(K);return!!(J!=null&&J.readOnly)}function getActive(K){var J=K.active&&get$2(K.active,K.model.data);return J||null}function modifyEdge(K,J,ne,oe){if(!J)return K;if(K instanceof RangeSelection){var ce=modifyRangeSelectionEdge(K,J,ne,oe);return ce}return K instanceof EntireColumnsSelection?modifyEntireColumnsSelection(K,J,ne,oe):K instanceof EntireRowsSelection?modifyEntireRowsSelection(K,J,ne,oe):K}function modifyRangeSelectionEdge(K,J,ne,oe){var ce,ue=oe===Direction$1.Left||oe===Direction$1.Right?"column":"row",Ae=oe===Direction$1.Left||oe===Direction$1.Top?"start":"end",pe=Ae==="start"?-1:1,xe=K.range.has(__assign$2(__assign$2({},J),(ce={},ce[ue]=J[ue]+pe*-1,ce))),me=xe?Ae==="start"?"end":"start":Ae,ge=new PointRange(K.range.start,K.range.end);ge[me][ue]+=pe;var ye=new RangeSelection(ge).normalizeTo(ne);return ye}function modifyEntireRowsSelection(K,J,ne,oe){if(oe===Direction$1.Left||oe===Direction$1.Right)return K;var ce=oe===Direction$1.Top?-1:1,ue=oe===Direction$1.Top?"start":"end",Ae=ue==="start"?"end":"start",pe=__assign$2({},K);(oe===Direction$1.Top?K.end>J.row:K.start<J.row)?pe[Ae]=K[Ae]+ce:pe[ue]=K[ue]+ce;var xe=new EntireRowsSelection(Math.max(pe.start,0),Math.max(pe.end,0));return xe.normalizeTo(ne)}function modifyEntireColumnsSelection(K,J,ne,oe){if(oe===Direction$1.Top||oe===Direction$1.Bottom)return K;var ce=oe===Direction$1.Left?-1:1,ue=oe===Direction$1.Left?"start":"end",Ae=ue==="start"?"end":"start",pe=__assign$2({},K);(oe===Direction$1.Left?K.end>J.row:K.start<J.row)?pe[Ae]=K[Ae]+ce:pe[ue]=K[ue]+ce;var xe=new EntireColumnsSelection(Math.max(pe.start,0),Math.max(pe.end,0));return xe.normalizeTo(ne)}var context$1=createContext([INITIAL_STATE,function(){}]),Table=function(K){var J=K.children,ne=K.columns,oe=K.hideColumnIndicators,ce=ne+(oe?0:1),ue=range(ce).map(function(Ae){return reactExports.createElement("col",{key:Ae})});return reactExports.createElement("table",{className:"Spreadsheet__table"},reactExports.createElement("colgroup",null,ue),reactExports.createElement("tbody",null,J))},Row=function(K){return reactExports.createElement("tr",__assign$2({},K))},HeaderRow=function(K){return reactExports.createElement("tr",__assign$2({},K))};function useDispatch(){return useContextSelector(context$1,function(K){var J=__read$1(K,2);J[0];var ne=J[1];return ne})}function useSelector(K){return useContextSelector(context$1,function(J){var ne=__read$1(J,1),oe=ne[0];return K(oe)})}var CornerIndicator=function(K){var J=K.selected,ne=K.onSelect,oe=reactExports.useCallback(function(){ne()},[ne]);return reactExports.createElement("th",{className:cx("Spreadsheet__header",{"Spreadsheet__header--selected":J}),onClick:oe,tabIndex:0})},enhance$3=function(K){return function(ne){var oe=useDispatch(),ce=reactExports.useCallback(function(){return oe(selectEntireWorksheet())},[oe]),ue=useSelector(function(Ae){return Ae.selected instanceof EntireWorksheetSelection});return reactExports.createElement(K,__assign$2({},ne,{selected:ue,onSelect:ce}))}},ColumnIndicator=function(K){var J=K.column,ne=K.label,oe=K.selected,ce=K.onSelect,ue=reactExports.useCallback(function(Ae){ce(J,Ae.shiftKey)},[ce,J]);return reactExports.createElement("th",{className:cx("Spreadsheet__header",{"Spreadsheet__header--selected":oe}),onClick:ue,tabIndex:0},ne!==void 0?ne:columnIndexToLabel(J))},enhance$2=function(K){return function(ne){var oe=useDispatch(),ce=reactExports.useCallback(function(Ae,pe){return oe(selectEntireColumn(Ae,pe))},[oe]),ue=useSelector(function(Ae){return Ae.selected.hasEntireColumn(ne.column)});return reactExports.createElement(K,__assign$2({},ne,{selected:ue,onSelect:ce}))}};function columnIndexToLabel(K){for(var J="",ne=K;ne>=0;)J=String.fromCharCode(65+ne%26)+J,ne=Math.floor(ne/26)-1;return J}var RowIndicator=function(K){var J=K.row,ne=K.label,oe=K.selected,ce=K.onSelect,ue=reactExports.useCallback(function(Ae){ce(J,Ae.shiftKey)},[ce,J]);return reactExports.createElement("th",{className:cx("Spreadsheet__header",{"Spreadsheet__header--selected":oe}),onClick:ue,tabIndex:0},ne!==void 0?ne:J+1)},enhance$1=function(K){return function(ne){var oe=useDispatch(),ce=useSelector(function(Ae){return Ae.selected.hasEntireRow(ne.row)}),ue=reactExports.useCallback(function(Ae,pe){return oe(selectEntireRow(Ae,pe))},[oe]);return reactExports.createElement(K,__assign$2({},ne,{selected:ce,onSelect:ue}))}},Cell=function(K){var J=K.row,ne=K.column,oe=K.DataViewer,ce=K.selected,ue=K.active,Ae=K.dragging,pe=K.mode,xe=K.data,me=K.evaluatedData,ge=K.select,ye=K.activate,Se=K.setCellDimensions,Te=K.setCellData,Ne=reactExports.useRef(null),$e=reactExports.useMemo(function(){return{row:J,column:ne}},[J,ne]),ke=reactExports.useCallback(function(Ke){pe==="view"&&(Se($e,getOffsetRect(Ke.currentTarget)),Ke.shiftKey?ge($e):ye($e))},[pe,Se,$e,ge,ye]),je=reactExports.useCallback(function(Ke){Ae&&(Se($e,getOffsetRect(Ke.currentTarget)),ge($e))},[Se,ge,Ae,$e]);return reactExports.useEffect(function(){var Ke=Ne.current;ce&&Ke&&Se($e,getOffsetRect(Ke)),Ke&&ue&&pe==="view"&&Ke.focus()},[Se,ce,ue,pe,$e,xe]),xe&&xe.DataViewer&&(oe=xe.DataViewer),reactExports.createElement("td",{ref:Ne,className:cx("Spreadsheet__cell",xe==null?void 0:xe.className,{"Spreadsheet__cell--readonly":xe==null?void 0:xe.readOnly}),onMouseOver:je,onMouseDown:ke,tabIndex:0},reactExports.createElement(oe,{row:J,column:ne,cell:xe,evaluatedCell:me,setCellData:Te}))},enhance=function(K){return function(ne){var oe=ne.row,ce=ne.column,ue=useDispatch(),Ae=reactExports.useMemo(function(){return{row:oe,column:ce}},[oe,ce]),pe=reactExports.useCallback(function(Ke){return ue(setCellData(Ae,Ke))},[ue,Ae]),xe=reactExports.useCallback(function(Ke){return ue(select$5(Ke))},[ue]),me=reactExports.useCallback(function(Ke){return ue(activate(Ke))},[ue]),ge=reactExports.useCallback(function(Ke,Ye){return ue(setCellDimensions(Ke,Ye))},[ue]),ye=useSelector(function(Ke){return isActive$1(Ke.active,Ae)}),Se=useSelector(function(Ke){return ye?Ke.mode:"view"}),Te=useSelector(function(Ke){return get$2(Ae,Ke.model.data)}),Ne=useSelector(function(Ke){return get$2(Ae,Ke.model.evaluatedData)}),$e=useSelector(function(Ke){return Ke.selected.has(Ke.model.data,Ae)}),ke=useSelector(function(Ke){return Ke.dragging}),je=useSelector(function(Ke){var Ye;return((Ye=Ke.copied)===null||Ye===void 0?void 0:Ye.has(Ae))||!1});return reactExports.createElement(K,__assign$2({},ne,{selected:$e,active:ye,copied:je,dragging:ke,mode:Se,evaluatedData:Ne,data:Te,select:xe,activate:me,setCellDimensions:ge,setCellData:pe}))}},TRUE_TEXT="TRUE",FALSE_TEXT="FALSE",DataViewer=function(K){var J=K.cell,ne=K.evaluatedCell,oe=getValue$3(J,ne);return typeof oe=="boolean"?reactExports.createElement("span",{className:"Spreadsheet__data-viewer Spreadsheet__data-viewer--boolean"},convertBooleanToText(oe)):reactExports.createElement("span",{className:cx("Spreadsheet__data-viewer",{"Spreadsheet__data-viewer--preserve-breaks":hasLineBreaker(oe)})},oe)};function getValue$3(K,J){var ne,oe=(ne=J==null?void 0:J.value)!==null&&ne!==void 0?ne:K==null?void 0:K.value;return oe&&typeof oe=="object"?oe.toString():oe}function convertBooleanToText(K){return K?TRUE_TEXT:FALSE_TEXT}var DataEditor=function(K){var J,ne=K.onChange,oe=K.cell,ce=reactExports.useRef(null),ue=reactExports.useCallback(function(pe){ne(__assign$2(__assign$2({},oe),{value:pe.target.value}))},[ne,oe]);reactExports.useEffect(function(){ce.current&&moveCursorToEnd(ce.current)},[ce]);var Ae=(J=oe==null?void 0:oe.value)!==null&&J!==void 0?J:"";return reactExports.createElement("div",{className:"Spreadsheet__data-editor"},reactExports.createElement("input",{ref:ce,type:"text",onChange:ue,value:Ae,autoFocus:!0}))},ActiveCell=function(K){var J=reactExports.useRef(null),ne=useDispatch(),oe=reactExports.useCallback(function(Ke,Ye){return ne(setCellData(Ke,Ye))},[ne]),ce=reactExports.useCallback(function(){return ne(edit$1())},[ne]),ue=reactExports.useCallback(function(Ke){return ne(commit$1(Ke))},[ne]),Ae=reactExports.useCallback(function(){ne(view$1())},[ne]),pe=useSelector(function(Ke){return Ke.active}),xe=useSelector(function(Ke){return Ke.mode}),me=useSelector(function(Ke){return Ke.active?get$2(Ke.active,Ke.model.data):void 0}),ge=useSelector(function(Ke){return pe?getCellDimensions(pe,Ke.rowDimensions,Ke.columnDimensions):void 0}),ye=reactExports.useMemo(function(){return!pe||!ge},[pe,ge]),Se=reactExports.useRef(void 0),Te=reactExports.useRef(null),Ne=reactExports.useRef(void 0),$e=reactExports.useCallback(function(Ke){pe&&oe(pe,Ke)},[oe,pe]);reactExports.useEffect(function(){var Ke=J.current;!ye&&Ke&&Ke.focus()},[J,ye]),reactExports.useEffect(function(){var Ke=Te.current,Ye=Ne.current;if(Te.current=pe,Ne.current=me,!(!Ke||!Ye)){var ze=(pe==null?void 0:pe.row)!==Ke.row||(pe==null?void 0:pe.column)!==Ke.column,Xe=xe!=="edit";if(ze||Xe){var Je=Se.current;Ye!==Je?ue([{prevCell:Je||null,nextCell:Ye}]):!ze&&me!==Ye&&ue([{prevCell:Ye,nextCell:me||null}]),Se.current=me}}});var ke=me&&me.DataEditor||K.DataEditor,je=me&&me.readOnly;return ye?null:reactExports.createElement("div",{ref:J,className:cx("Spreadsheet__active-cell","Spreadsheet__active-cell--".concat(xe)),style:ge,onClick:xe==="view"&&!je?ce:void 0,tabIndex:0},xe==="edit"&&pe&&reactExports.createElement(ke,{row:pe.row,column:pe.column,cell:me,onChange:$e,exitEditMode:Ae}))},FloatingRect=function(K){var J,ne=K.dimensions,oe=K.dragging,ce=K.hidden,ue=K.variant,Ae=ne||{},pe=Ae.width,xe=Ae.height,me=Ae.top,ge=Ae.left;return reactExports.createElement("div",{className:cx("Spreadsheet__floating-rect",(J={},J["Spreadsheet__floating-rect--".concat(ue)]=ue,J["Spreadsheet__floating-rect--dragging"]=oe,J["Spreadsheet__floating-rect--hidden"]=ce,J)),style:{width:pe,height:xe,top:me,left:ge}})},Selected=function(){var K=useSelector(function(ce){return ce.selected}),J=useSelector(function(ce){return K&&getSelectedDimensions(ce.rowDimensions,ce.columnDimensions,ce.model.data,ce.selected)}),ne=useSelector(function(ce){return ce.dragging}),oe=useSelector(function(ce){return ce.selected.size(ce.model.data)<2});return reactExports.createElement(FloatingRect,{variant:"selected",dimensions:J,dragging:ne,hidden:oe})},Copied=function(){var K=useSelector(function(oe){return oe.copied}),J=useSelector(function(oe){return K&&getRangeDimensions(oe.rowDimensions,oe.columnDimensions,K)}),ne=K===null;return reactExports.createElement(FloatingRect,{variant:"copied",dimensions:J,hidden:ne,dragging:!1})};function styleInject(K,J){J===void 0&&(J={});var ne=J.insertAt;if(!(typeof document>"u")){var oe=document.head||document.getElementsByTagName("head")[0],ce=document.createElement("style");ce.type="text/css",ne==="top"&&oe.firstChild?oe.insertBefore(ce,oe.firstChild):oe.appendChild(ce),ce.styleSheet?ce.styleSheet.cssText=K:ce.appendChild(document.createTextNode(K))}}var css_248z=`.Spreadsheet {
  --background-color: white;
  --text-color: black;
  --readonly-text-color: rgba(0, 0, 0, 0.4);
  --outline-color: #4285f4;
  --outline-background-color: rgba(160, 195, 255, 0.2);
  --border-color: hsl(2deg, 0%, 91%);
  --header-background-color: rgba(0, 0, 0, 0.04);
  --elevation: 0 2px 5px rgba(0, 0, 0, 0.4);

  position: relative;
  overflow: visible;
  background: var(--background-color);
  color: var(--text-color);
  display: inline-block;
}

.Spreadsheet--dark-mode {
  --background-color: black;
  --text-color: white;
  --readonly-text-color: rgba(255, 255, 255, 0.4);
  --header-background-color: rgba(255, 255, 255, 0.04);
  --border-color: hsl(2deg, 0%, 19%);
}

.Spreadsheet__active-cell {
  position: absolute;
  border: 2px solid var(--outline-color);
  box-sizing: border-box;
}

.Spreadsheet__active-cell--edit {
  background: var(--background-color);
  box-shadow: var(--elevation);
}

.Spreadsheet__table {
  border-collapse: collapse;
  table-layout: fixed;
}

.Spreadsheet__cell,
.Spreadsheet__active-cell {
  cursor: cell;
}

.Spreadsheet__cell {
  outline: none;
}

.Spreadsheet__cell--readonly {
  color: var(--readonly-text-color);
}

.Spreadsheet__cell,
.Spreadsheet__header {
  min-width: 6em;
  min-height: 1.9em;
  height: 1.9em;
  max-height: 1.9em;
  border: 1px solid var(--border-color);
  overflow: hidden;
  word-break: keep-all;
  white-space: nowrap;
  text-align: left;
  box-sizing: border-box;
  user-select: none;
}

.Spreadsheet__header {
  background: var(--header-background-color);
  color: var(--readonly-text-color);
  text-align: center;
  font: inherit;
}

.Spreadsheet__header--selected {
  background: #5f6268;
  color: #fff;
}

.Spreadsheet__header,
.Spreadsheet__data-viewer,
.Spreadsheet__data-editor input {
  padding: 4px;
  box-sizing: border-box;
}

.Spreadsheet__data-viewer--preserve-breaks {
  white-space: pre-wrap;
}

.Spreadsheet__data-editor,
.Spreadsheet__data-editor input {
  width: 100%;
  height: 100%;
}

.Spreadsheet__data-editor input {
  font: inherit;
  color: inherit;
  background: none;
  border: none;
  outline: none;
  margin: 0;
}

.Spreadsheet__data-viewer--boolean {
  text-align: center;
}

.Spreadsheet__floating-rect {
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
}

.Spreadsheet__floating-rect--hidden {
  display: none;
}

.Spreadsheet__floating-rect--selected {
  background: var(--outline-background-color);
  border: 2px var(--outline-color) solid;
}

.Spreadsheet__floating-rect--dragging {
  border: none;
}

.Spreadsheet__floating-rect--copied {
  border: 2px var(--outline-color) dashed;
}
`;styleInject(css_248z);var Spreadsheet=function(K){var J,ne=K.className,oe=K.darkMode,ce=K.columnLabels,ue=K.rowLabels,Ae=K.hideColumnIndicators,pe=K.hideRowIndicators,xe=K.onKeyDown,me=K.Table,ge=me===void 0?Table:me,ye=K.Row,Se=ye===void 0?Row:ye,Te=K.HeaderRow,Ne=Te===void 0?HeaderRow:Te,$e=K.DataEditor,ke=$e===void 0?DataEditor:$e,je=K.DataViewer,Ke=je===void 0?DataViewer:je,Ye=K.onChange,ze=Ye===void 0?function(){}:Ye,Xe=K.onModeChange,Je=Xe===void 0?function(){}:Xe,rt=K.onSelect,Ze=rt===void 0?function(){}:rt,et=K.onActivate,nt=et===void 0?function(){}:et,Ge=K.onBlur,ve=Ge===void 0?function(){}:Ge,Be=K.onCellCommit,Re=Be===void 0?function(){}:Be,Ie=K.onEvaluatedDataChange,Fe=Ie===void 0?function(){}:Ie,qe=reactExports.useMemo(function(){var tr=K.createFormulaParser||createFormulaParser,Vt=new Model(tr,K.data);return __assign$2(__assign$2({},INITIAL_STATE),{model:Vt,selected:K.selected||INITIAL_STATE.selected})},[K.createFormulaParser,K.data,K.selected]),We=reactExports.useReducer(reducer$5,qe),Ue=__read$1(We,2),_e=Ue[0],Qe=Ue[1],tt=reactExports.useMemo(function(){return calculateSpreadsheetSize(_e.model.data,ue,ce)},[_e.model.data,ue,ce]),it=_e.mode,at=reactExports.useRef(null),ot=function(tr){return reactExports.useCallback(function(){for(var Vt=[],Gt=0;Gt<arguments.length;Gt++)Vt[Gt]=arguments[Gt];return Qe(tr.apply(void 0,__spreadArray$2([],__read$1(Vt),!1)))},[tr])},lt=ot(cut),st=ot(copy),ut=ot(paste),ft=ot(keyDown),dt=ot(keyPress),Bt=ot(dragStart),pt=ot(dragEnd),mt=ot(setData),bt=ot(setCreateFormulaParser),xt=ot(blur$1),yt=ot(setSelection),It=reactExports.useRef(_e.active);reactExports.useEffect(function(){if(_e.active!==It.current)if(_e.active)nt(_e.active);else{var tr=at.current;tr&&isFocusedWithin(tr)&&document.activeElement&&document.activeElement.blur(),ve()}It.current=_e.active},[nt,ve,_e.active]);var ht=reactExports.useRef(_e.model.data);reactExports.useEffect(function(){_e.model.data!==ht.current&&_e.model.data!==K.data&&ze(_e.model.data),ht.current=_e.model.data},[_e.model.data,ze,K.data]);var gt=reactExports.useRef(_e.model.evaluatedData);reactExports.useEffect(function(){var tr,Vt;((tr=_e==null?void 0:_e.model)===null||tr===void 0?void 0:tr.evaluatedData)!==(gt==null?void 0:gt.current)&&Fe((Vt=_e==null?void 0:_e.model)===null||Vt===void 0?void 0:Vt.evaluatedData),gt.current=_e.model.evaluatedData},[(J=_e==null?void 0:_e.model)===null||J===void 0?void 0:J.evaluatedData,Fe]);var Pt=reactExports.useRef(_e.selected);reactExports.useEffect(function(){_e.selected.equals(Pt.current)||(!K.selected||!_e.selected.equals(K.selected))&&Ze(_e.selected),Pt.current=_e.selected},[_e.selected,Ze,K.selected]);var wt=reactExports.useRef(_e.mode);reactExports.useEffect(function(){_e.mode!==wt.current&&Je(_e.mode),wt.current=_e.mode},[_e.mode,Je]);var St=reactExports.useRef(_e.lastCommit);reactExports.useEffect(function(){var tr,Vt;if(_e.lastCommit&&_e.lastCommit!==St.current)try{for(var Gt=__values(_e.lastCommit),br=Gt.next();!br.done;br=Gt.next()){var Yt=br.value;Re(Yt.prevCell,Yt.nextCell,_e.lastChanged)}}catch(Kt){tr={error:Kt}}finally{try{br&&!br.done&&(Vt=Gt.return)&&Vt.call(Gt)}finally{if(tr)throw tr.error}}},[Re,_e.lastChanged,_e.lastCommit]);var Zt=reactExports.useRef(K.selected);reactExports.useEffect(function(){K.selected&&Zt.current&&!K.selected.equals(Zt.current)&&yt(K.selected),Zt.current=K.selected},[K.selected,yt]);var Ct=reactExports.useRef(K.data);reactExports.useEffect(function(){K.data!==Ct.current&&mt(K.data),Ct.current=K.data},[K.data,mt]);var Rt=reactExports.useRef(K.createFormulaParser);reactExports.useEffect(function(){K.createFormulaParser!==Rt.current&&K.createFormulaParser&&bt(K.createFormulaParser),Rt.current=K.createFormulaParser},[K.createFormulaParser,bt]);var dr=reactExports.useCallback(function(tr){var Vt=_e.model,Gt=_e.selected,br=Vt.data,Yt=Gt.toRange(br);if(Yt){var Kt=slice(Yt.start,Yt.end,br),yr=getCSV(Kt);writeTextToClipboard(tr,yr)}},[_e]),Dt=reactExports.useCallback(function(tr){shouldHandleClipboardEvent(at.current,it)&&(tr.preventDefault(),tr.stopPropagation(),dr(tr),lt())},[it,dr,lt]),Tt=reactExports.useCallback(function(tr){shouldHandleClipboardEvent(at.current,it)&&(tr.preventDefault(),tr.stopPropagation(),dr(tr),st())},[it,dr,st]),or=reactExports.useCallback(function(tr){if(shouldHandleClipboardEvent(at.current,it)&&(tr.preventDefault(),tr.stopPropagation(),tr.clipboardData)){var Vt=readTextFromClipboard(tr);ut(Vt)}},[it,ut]),Mt=reactExports.useCallback(function(tr){tr.persist(),xe&&xe(tr),tr.defaultPrevented||(hasKeyDownHandler(_e,tr)&&tr.nativeEvent.preventDefault(),ft(tr))},[_e,xe,ft]),kt=reactExports.useCallback(function(){pt(),document.removeEventListener("mouseup",kt)},[pt]),ur=reactExports.useCallback(function(tr){!_e.dragging&&tr.buttons===1&&(Bt(),document.addEventListener("mouseup",kt))},[_e,Bt,kt]),$t=reactExports.useCallback(function(tr){tr.currentTarget.contains(tr.relatedTarget)||xt()},[xt]),jt=reactExports.useMemo(function(){return enhance(K.Cell||Cell)},[K.Cell]),nr=reactExports.useMemo(function(){return enhance$3(K.CornerIndicator||CornerIndicator)},[K.CornerIndicator]),Ot=reactExports.useMemo(function(){return enhance$1(K.RowIndicator||RowIndicator)},[K.RowIndicator]),Lt=reactExports.useMemo(function(){return enhance$2(K.ColumnIndicator||ColumnIndicator)},[K.ColumnIndicator]);reactExports.useEffect(function(){return document.addEventListener("cut",Dt),document.addEventListener("copy",Tt),document.addEventListener("paste",or),function(){document.removeEventListener("cut",Dt),document.removeEventListener("copy",Tt),document.removeEventListener("paste",or)}},[Dt,Tt,or]);var lr=reactExports.useMemo(function(){return reactExports.createElement(ge,{columns:tt.columns,hideColumnIndicators:Ae},reactExports.createElement(Ne,null,!pe&&!Ae&&reactExports.createElement(nr,null),!Ae&&range(tt.columns).map(function(tr){return ce?reactExports.createElement(Lt,{key:tr,column:tr,label:tr in ce?ce[tr]:null}):reactExports.createElement(Lt,{key:tr,column:tr})})),range(tt.rows).map(function(tr){return reactExports.createElement(Se,{key:tr,row:tr},!pe&&(ue?reactExports.createElement(Ot,{key:tr,row:tr,label:tr in ue?ue[tr]:null}):reactExports.createElement(Ot,{key:tr,row:tr})),range(tt.columns).map(function(Vt){return reactExports.createElement(jt,{key:Vt,row:tr,column:Vt,DataViewer:Ke})}))}))},[ge,tt.rows,tt.columns,Ae,Se,Ne,pe,nr,ce,Lt,ue,Ot,jt,Ke]),Ht=reactExports.useMemo(function(){return reactExports.createElement(ActiveCell,{DataEditor:ke})},[ke]),qt=reactExports.useMemo(function(){return reactExports.createElement("div",{ref:at,className:cx("Spreadsheet",ne,{"Spreadsheet--dark-mode":oe}),onKeyPress:dt,onKeyDown:Mt,onMouseMove:ur,onBlur:$t},lr,Ht,reactExports.createElement(Selected,null),reactExports.createElement(Copied,null))},[ne,oe,dt,Mt,ur,$t,lr,Ht]);return reactExports.createElement(context$1.Provider,{value:We},qt)};const ADD_SHEET_WIDTH=45,NAVIGATION_WIDTH=50,ONE_TAP_SCROLL_LENGTH=100,UIExcelSheetBar=({sheetNames:K,currentSheet:J,onCurrentSheetChange:ne})=>{const oe=reactExports.useRef(null),ce=reactExports.useRef(null),[ue,Ae]=reactExports.useState(!0),[pe,xe]=reactExports.useState(!0),[me,ge]=reactExports.useState(!1);reactExports.useEffect(()=>{const ke=new ResizeObserver(je=>{je.forEach(Ke=>{var ze;const Ye=((ze=ce.current)==null?void 0:ze.scrollWidth)??0;ge(Ke.target.clientWidth<Ye+ADD_SHEET_WIDTH+NAVIGATION_WIDTH),Ne()})});return oe.current&&ke.observe(oe.current),()=>{ke.disconnect()}},[]);const ye=K.map(ke=>({key:ke,label:ke})),Se=ke=>{const je=K.findIndex(Ke=>Ke===ke);ne(je),ce.current&&Array.from(ce.current.children)[je].scrollIntoView({behavior:"smooth"})},Te=ke=>{const je=ke.clientWidth,Ke=ke.scrollLeft,Ye=0,ze=ke.scrollWidth;return{isLeftEnabled:Ke>Ye,isRightEnabled:Ke+je<ze,minLeftScroll:Ye,maxLeftScroll:ze,currentLeftScroll:Ke,currentClientWidth:je}},Ne=()=>{if(ce.current){const{isLeftEnabled:ke,isRightEnabled:je}=Te(ce.current);Ae(ke),xe(je)}},$e=ke=>{if(ce.current){const{isLeftEnabled:je,isRightEnabled:Ke,minLeftScroll:Ye,maxLeftScroll:ze,currentLeftScroll:Xe,currentClientWidth:Je}=Te(ce.current);if(ke==="left"){ce.current.scrollLeft=Xe-ONE_TAP_SCROLL_LENGTH>Ye?Xe-ONE_TAP_SCROLL_LENGTH:Ye,Ae(je);return}ke==="right"&&(ce.current.scrollLeft=Xe+Je+ONE_TAP_SCROLL_LENGTH<ze?Xe+100:ze,xe(Ke))}};return jsxRuntimeExports.jsxs("nav",{className:"ui-excel-sheet-bar",ref:oe,children:[jsxRuntimeExports.jsx("div",{ref:ce,className:"ui-excel-sheet-bar__sheets",onScroll:Ne,children:jsxRuntimeExports.jsx(wF,{variant:"card",isClosable:!1,activeKey:K[J],onChange:Se,items:ye})}),jsxRuntimeExports.jsxs("div",{className:cx("ui-excel-sheet-bar__nav-buttons",{overflowed:me}),children:[jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",disabled:!ue,onClick:()=>$e("left"),iconBefore:jsxRuntimeExports.jsx(vk,{})}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",disabled:!pe,onClick:()=>$e("right"),iconBefore:jsxRuntimeExports.jsx(fk,{})})]})]})},UIExcelCornerIndicator=()=>jsxRuntimeExports.jsx("th",{className:"ui-excel-corner-indicator",children:jsxRuntimeExports.jsx("div",{className:"ui-excel-corner-indicator__icon"})}),UIExcel=({workbook:K,className:J,darkMode:ne,readOnly:oe,minRowLength:ce=100})=>{const[ue,Ae]=reactExports.useState(0),pe=K.SheetNames[ue],xe=reactExports.useMemo(()=>XLSX.utils.sheet_to_json(K.Sheets[pe],{header:1,defval:""}).map(Se=>{const Te=Object.values(Se).map($e=>({value:$e,readOnly:!!oe})),Ne=COLUMN_LABELS.length-Te.length;if(Ne>0){const $e=Array.from({length:Ne},()=>({value:"",readOnly:!0}));return[...Te,...$e]}return Te}),[ue]),me=Array(ce>xe.length?ce:xe.length).fill(0).map((Se,Te)=>`${Te+1}`),ge=Se=>{Ae(Se)},ye=Se=>{(Se.ctrlKey||Se.metaKey)&&(Se.code===KeyboardCode.KeyV||Se.code===KeyboardCode.KeyX)&&Se.preventDefault()};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:cx("ui-excel",J),children:jsxRuntimeExports.jsx(Spreadsheet,{data:xe,columnLabels:COLUMN_LABELS,rowLabels:me,CornerIndicator:UIExcelCornerIndicator,darkMode:ne,onKeyDown:ye})}),jsxRuntimeExports.jsx(UIExcelSheetBar,{sheetNames:K.SheetNames,currentSheet:ue,onCurrentSheetChange:ge})]})},COLUMN_LABELS=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],XlsxViewer=({content:K})=>{const J=useSelector$1(selectApplicationTheme),[ne]=reactExports.useState(()=>XLSX.read(K,{type:"base64"}));return jsxRuntimeExports.jsx(UIExcel,{workbook:ne,darkMode:J===THEME_KEYS.dark,readOnly:!0})},contentWrapper="_contentWrapper_9q3bq_1",styles$1y={contentWrapper},decodeBase64Utf8=K=>{const J=window.atob(K),ne=Uint8Array.from(J,ce=>ce.charCodeAt(0));return new TextDecoder("utf-8").decode(ne)},ContentViewer=({content:K})=>{const J=reactExports.useRef(null),ne=reactExports.useMemo(()=>decodeBase64Utf8(K),[K]);return reactExports.useEffect(()=>{J.current&&(J.current.innerHTML=ne)},[ne]),jsxRuntimeExports.jsx("div",{ref:J,className:styles$1y.contentWrapper})},convertBase64toImage=K=>`data:image/;base64,${K}`,ImageViewer=({content:K})=>jsxRuntimeExports.jsx("div",{className:"image-viewer",children:jsxRuntimeExports.jsx("img",{className:"image-viewer__img",src:convertBase64toImage(K)})}),plotlyWrapper="_plotlyWrapper_1qv34_1",styles$1x={plotlyWrapper,"plot-container":"_plot-container_1qv34_5"},PlotlyViewer=({content:K})=>{const J=reactExports.useRef(null),ne=reactExports.useMemo(()=>decodeURIComponent(escape(window.atob(K))),[K]),oe=reactExports.useCallback(()=>{if(J.current)for(;J.current.firstChild;)J.current.removeChild(J.current.firstChild)},[]);return reactExports.useEffect(()=>{if(J.current){window.Plotly=Plotly;const ce=document.createRange().createContextualFragment(ne);J.current.append(ce)}return()=>{window.Plotly=void 0,oe()}},[ne,oe]),jsxRuntimeExports.jsx("div",{ref:J,className:styles$1x.plotlyWrapper})};function throttle(K,J){let ne;const oe=()=>{ne&&(K(...ne),ne=void 0)};return(...ce)=>{const ue=!!ne;ne=ce,!ue&&setTimeout(oe,J)}}function useThrottle(K,J,ne){return reactExports.useMemo(()=>throttle(K,J),ne)}function useToggle(K=!1,J){const[ne,oe]=reactExports.useState(K),ce=reactExports.useMemo(()=>{const ue=!K;return{toggle:()=>oe(ge=>ge===K?ue:K),set:ge=>oe(ge),setLeft:()=>oe(K),setRight:()=>oe(ue)}},[]);return[ne,ce]}function useBoolean(K=!1){const[J,{toggle:ne,set:oe}]=useToggle(!!K),ce=reactExports.useMemo(()=>({toggle:ne,set:pe=>oe(!!pe),setTrue:()=>oe(!0),setFalse:()=>oe(!1)}),[]);return[J,ce]}var ElementWidth=(K=>(K[K.TABS=202]="TABS",K[K.HANDLERS=200]="HANDLERS",K))(ElementWidth||{});const useElementsDimension=({elements:K=[],elementWidth:J=202,reorderOptions:ne,elementGap:oe=0})=>{const ce=reactExports.useRef(null),ue=reactExports.useRef(null),Ae=reactExports.useRef(null),[pe,xe]=reactExports.useState(-1),[me,ge]=reactExports.useState({necessaryWidths:[],dropdownWidth:0});reactExports.useLayoutEffect(()=>{if(!ce.current||!ue.current)return;const{dropdownWidth:je,necessaryWidths:Ke,containerWidth:Ye}=getPrecalculatedWidths(ce.current,ue.current,K.length,J,Ae,oe),ze=getLastVisibleTabIndex({containerWidth:Ye,necessaryWidths:Ke,dropdownWidth:je});if(ne){const{activeElementIndex:Xe,isCurrentlyDragging:Je,onReorderElements:rt}=ne;ze<K.length-1&&Xe>ze&&!Je&&Ye&&rt(K,Xe,pe<Xe?Xe-1:pe)}ge({dropdownWidth:je,necessaryWidths:Ke}),xe(ze)},[K.length,K,pe,ne==null?void 0:ne.activeElementIndex]);const ye=pe===-1?[]:K.slice(0,pe+1),Se=K.slice(pe+1),Te=Se.length>0,Ne=()=>{if(!ce.current)return;const je=getLastVisibleTabIndex({containerWidth:ce.current.getBoundingClientRect().width,necessaryWidths:me.necessaryWidths,dropdownWidth:me.dropdownWidth});je!==pe&&xe(je)},{ref:$e}=useResizeObserver({onResize:Ne});return{elementsRef:useMergeRefs([$e,ce]),dropdownRef:ue,visibleElements:ye,hiddenElements:Se,isDropdownButtonVisible:Te,measurementRef:Ae}},getPrecalculatedWidths=(K,J,ne,oe,ce,ue)=>{var me,ge;const{width:Ae}=K.getBoundingClientRect(),pe=J.getBoundingClientRect().width||0;let xe=[];return ce&&((me=ce.current)!=null&&me.children)?Array.from((ge=ce.current)==null?void 0:ge.children).forEach((ye,Se)=>{const Ne=ye.offsetWidth,$e=xe.length>0?xe[Se-1]+ue:0;xe.push($e+Ne)}):xe=Array(ne).fill(0).reduce((ye,Se,Te)=>{const $e=oe*Te+oe;return[...ye,$e]},[]),{dropdownWidth:pe,necessaryWidths:xe,containerWidth:Ae}},getLastVisibleTabIndex=({necessaryWidths:K,containerWidth:J,dropdownWidth:ne})=>{if(K.length===0)return-1;if(K[K.length-1]<J-ne)return K.length-1;if(K[0]+ne>J)return-1;const oe=K.filter(ce=>ce+ne<=J);return oe.length?oe.length-1:-1};function getOffsetOfPreviousViewports(K,J){return J.slice(0,K).reduce((ne,oe)=>ne+oe.height,0)}function isTextItem(K){return isObject$9(K)?["str","dir","transform","width","height","fontName","hasEOL"].every(ne=>ne in K):!1}async function getPageContent(K){return(await K.getTextContent()).items.filter(isTextItem).map(ne=>{let oe=ne.str||"";return ne.hasEOL&&(oe+=" "),oe}).join("")}function searchAllMatches(K,J){const ne=new RegExp(escapeStringRegexp(K),"ig");return Array.from(J.matchAll(ne),oe=>{const ce=oe.index||0;return{startIndex:ce,endIndex:ce+oe[0].length}})}const input$2="_input_oww37_1",styles$1w={input:input$2},PdfInputPagination=({page:K,lastPage:J,onChangePage:ne})=>{const[oe,ce]=reactExports.useState(null);reactExports.useEffect(()=>{ce(K)},[K]);const ue=()=>{if(!oe)return ce(K);const pe=oe>J,xe=oe<1;if(Number.isNaN(oe)||pe||xe)return ce(K);oe!==K&&ne(oe)},Ae=pe=>{(pe.code===KeyboardCode.Enter||pe.code===KeyboardCode.NumpadEnter)&&ue()};return jsxRuntimeExports.jsx(CF,{variant:"outlined",className:styles$1w.input,value:oe,onChange:pe=>ce(pe?Number(pe):null),onKeyDown:Ae,onBlur:ue})},container$H="_container_1d3mg_1",pagination$1="_pagination_1d3mg_7",styles$1v={container:container$H,pagination:pagination$1},PDFPagination=({currentPage:K=1,lastPage:J=1,onChangePage:ne})=>{const{t:oe}=useTranslation(),ce=reactExports.useMemo(()=>K===1,[K]),ue=reactExports.useMemo(()=>K===J,[K,J]),Ae=reactExports.useCallback(()=>{ce||ne(K-1)},[ce,K,ne]),pe=reactExports.useCallback(()=>{ue||ne(K+1)},[ue,K,ne]);return jsxRuntimeExports.jsxs("div",{className:styles$1v.container,children:[jsxRuntimeExports.jsx(mf,{title:oe("viewers.pdf.previousPage"),children:jsxRuntimeExports.jsx(rl,{type:"tertiary",iconBefore:jsxRuntimeExports.jsx(dk,{}),disabled:ce,onClick:Ae})}),jsxRuntimeExports.jsx(mf,{title:oe("viewers.pdf.nextPage"),children:jsxRuntimeExports.jsx(rl,{type:"tertiary",iconBefore:jsxRuntimeExports.jsx(Zj,{}),disabled:ue,onClick:pe})}),jsxRuntimeExports.jsxs("div",{className:styles$1v.pagination,children:[jsxRuntimeExports.jsx(PdfInputPagination,{page:K,lastPage:J,onChangePage:ne}),jsxRuntimeExports.jsx("span",{children:"/"}),jsxRuntimeExports.jsx("span",{children:J})]})]})};function useDebounce(K=500){const J=reactExports.useRef(),[ne,oe]=reactExports.useState(!1);return{debounce:({fn:ue,value:Ae})=>{oe(!0),J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{ue(Ae),oe(!1)},K)},isLoading:ne}}const status="_status_pff8a_1",input$1="_input_pff8a_9",suffix="_suffix_pff8a_13",styles$1u={status,input:input$1,suffix},PdfSearchInput=reactExports.forwardRef((K,J)=>{var $e,ke;const{t:ne}=useTranslation(),oe=reactExports.useRef(null),{debounce:ce,isLoading:ue}=useDebounce(),Ae=(((ke=($e=oe.current)==null?void 0:$e.input)==null?void 0:ke.value)||"").length>0,pe=K.matchedTermsSize===0,xe=K.matchedTermsSize===0,me=()=>{pe||K.onPreviousMatch()},ge=()=>{xe||K.onNextMatch()},ye=je=>{var Xe,Je;const Ke=je.code===KeyboardCode.Enter||je.code===KeyboardCode.NumpadEnter,Ye=((Je=(Xe=oe.current)==null?void 0:Xe.input)==null?void 0:Je.value)||"",ze=K.matchedTermsSize>0;Ke&&ze&&K.onChangeSearch(Ye)},Se=()=>{var je;return(je=oe.current)==null?void 0:je.focus()},Te=()=>{var je;(je=oe.current)!=null&&je.input&&(oe.current.input.value="")};reactExports.useImperativeHandle(J,()=>({focus:Se,clear:Te}));const Ne=()=>ue?jsxRuntimeExports.jsx(MF,{}):Ae?jsxRuntimeExports.jsxs("div",{className:styles$1u.status,children:[K.currentMatchedTerm," / ",K.matchedTermsSize]}):null;return jsxRuntimeExports.jsx(Ml,{ref:oe,variant:"outlined",className:styles$1u.input,placeholder:ne("viewers.pdf.placeholder")||"",onChange:je=>ce({fn:K.onChangeSearch,value:je}),onKeyDown:ye,prefix:jsxRuntimeExports.jsx(gf$1,{}),suffix:jsxRuntimeExports.jsxs("div",{className:styles$1u.suffix,children:[Ne(),jsxRuntimeExports.jsx(mf,{title:ne("viewers.pdf.previousMatch"),children:jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",disabled:pe,onClick:me,iconBefore:jsxRuntimeExports.jsx(vk,{})})}),jsxRuntimeExports.jsx(mf,{title:ne("viewers.pdf.nextMatch"),children:jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",disabled:xe,onClick:ge,iconBefore:jsxRuntimeExports.jsx(fk,{})})})]})})});PdfSearchInput.displayName="PdfSearchInput";const PdfSearch=({currentMatchedTerm:K,matchedTermsSize:J,isOpen:ne,onChangeSearch:oe,onNextMatch:ce,onPreviousMatch:ue})=>{const Ae=reactExports.useRef(null);return reactExports.useEffect(()=>{Ae.current&&(ne?Ae.current.focus():(Ae.current.clear(),oe("")))},[ne]),jsxRuntimeExports.jsx(PdfSearchInput,{ref:Ae,currentMatchedTerm:K,matchedTermsSize:J,onNextMatch:ce,onPreviousMatch:ue,onChangeSearch:oe})};class PageCharIndexList{constructor(J=[]){Xn(this,"charIndexes",[]);this.charIndexes=J}static createByElements(J){const ne=J.map(oe=>oe.textContent).reduce((oe,ce,ue)=>isString$2(ce)?ce.length===0?oe.concat([{char:" ",charIndexInSpan:0,spanIndex:ue}]):oe.concat(ce.split("").map((Ae,pe)=>({char:Ae,charIndexInSpan:pe,spanIndex:ue}))):oe,[]);return new PageCharIndexList(ne)}get isEmpty(){return this.charIndexes.length===0}get fullText(){return this.charIndexes.map(J=>J.char).join("")}slice(J,ne){const oe=this.charIndexes.slice(J,ne);return new PageCharIndexList(oe)}groupBySpanIndex(){return this.charIndexes.reduce((J,ne)=>({...J,[ne.spanIndex]:(J[ne.spanIndex]||[]).concat([ne])}),{})}}const removeNode=K=>{const J=K.parentNode;J&&J.removeChild(K)},replaceNode=(K,J)=>{removeNode(K);const ne=J.parentNode;ne&&ne.insertBefore(K,J),removeNode(J)},unwrap=K=>{const J=K.parentNode;if(!J)return;const ne=document.createRange();ne.selectNodeContents(K),replaceNode(ne.extractContents(),K),J.normalize()},isVisibleInContainer=(K,J)=>{const ne=K.getBoundingClientRect(),oe=J.getBoundingClientRect();return ne.top>=oe.top&&ne.bottom<=oe.bottom},sortHighlightByPositions=(K,J)=>K.top<J.top?-1:K.top>J.top?1:K.left<J.left?-1:K.left>J.left?1:0,updateHighlightIndexByPosition=K=>{const J=K.slice().sort(sortHighlightByPositions),ne=J.reduce((oe,ce,ue)=>Object.hasOwn(oe,ce.index)?oe:{...oe,[ce.index]:ue},{});return J.map(oe=>({...oe,index:ne[oe.index]}))},PDF_HIGHLIGHT_CLASSNAME="pdf-highlight",highlight="_highlight_89w3m_1",active$2="_active_89w3m_8",styles$1t={highlight,active:active$2},PdfHighlight=({isActive:K,index:J,left:ne,top:oe,height:ce,width:ue})=>jsxRuntimeExports.jsx("div",{"data-index":J,style:{width:ue,height:ce,left:ne,top:oe},className:cx(styles$1t.highlight,PDF_HIGHLIGHT_CLASSNAME,{[styles$1t.active]:K})}),container$G="_container_9mzfj_1",styles$1s={container:container$G},PdfHighlights=({highlights:K,activeIndex:J})=>K.length===0?null:jsxRuntimeExports.jsx("div",{className:styles$1s.container,children:K.map((ne,oe)=>jsxRuntimeExports.jsx(PdfHighlight,{isActive:ne.index===J,...ne},oe))});class CharIndexSpan{constructor(J,ne){Xn(this,"charIndexes");Xn(this,"elements",[]);this.charIndexes=J,this.elements=ne}toRectWithCoordinates(J){var pe;const{firstChild:ne}=this.element;if(!ne||ne.nodeType!==Node.TEXT_NODE)return null;const oe=((pe=ne.textContent)==null?void 0:pe.length)??0,{start:ce,end:ue}=this.offsets;if(ce>oe||ue+1>oe)return null;const Ae=this.createRange(ne,ce,ue+1);return this.normalizedCoordinatesByParent(J,this.getRectAndCoordinatesByRange(Ae))}normalizedCoordinatesByParent(J,ne){return{...ne,left:ne.left-J.left,top:ne.top-J.top}}getRectAndCoordinatesByRange(J){const ne=document.createElement("span");J.surroundContents(ne);const oe=ne.getBoundingClientRect(),ce={left:oe.left,top:oe.top,height:oe.height,width:oe.width};return unwrap(ne),ce}createRange(J,ne,oe){const ce=document.createRange();return ce.setStart(J,ne),ce.setEnd(J,oe),ce}get offsets(){const J=this.charIndexes[0].charIndexInSpan,ne=this.charIndexes.length===1?J:this.charIndexes[this.charIndexes.length-1].charIndexInSpan;return{start:J,end:ne}}get element(){return this.elements[this.charIndexes[0].spanIndex]}}class CharIndexList{constructor(J){Xn(this,"charIndexes");this.charIndexes=J}removeSpacesBetweenWords(){return this.charIndexes=this.charIndexes.filter(J=>J.length!==1||J[0].char.trim()!==""),this}generateRectWithCoordinates(J,ne){return this.charIndexes.reduce((oe,ce)=>{const ue=new CharIndexSpan(ce,ne).toRectWithCoordinates(J);return ue&&oe.push(ue),oe},[])}}const container$F="_container_1p0n0_1",styles$1r={container:container$F},PdfPage=({shouldScroll:K,setScrolled:J,onScrollToOffset:ne,currentMatchedTerm:oe,search:ce,documentRef:ue,containerRef:Ae,pageNumber:pe})=>{const[xe,me]=reactExports.useState([]),ge=!oe||oe.page!==pe?-1:oe.matchIndex;reactExports.useEffect(()=>{const Te=(oe==null?void 0:oe.page)===pe,Ne=xe.length===0;if(!Te||!ue.current||!Ae.current||Ne||!K)return;const $e=ue.current.querySelector(`div[data-page-number="${pe}"] .${PDF_HIGHLIGHT_CLASSNAME}[data-index="${oe.matchIndex}"]`);$e&&!isVisibleInContainer($e,Ae.current)&&ne($e.offsetTop),J()},[oe,xe,K]);const ye=()=>me([]),Se=reactExports.useCallback(()=>{if(!ce||!ue.current){ye();return}const Te=ue.current.querySelector(`div[data-page-number="${pe}"] .textLayer`);if(!Te)return;const Ne=Te.getBoundingClientRect(),$e=Array.from((Te==null?void 0:Te.querySelectorAll('[role="presentation"]'))||[]),ke=PageCharIndexList.createByElements($e);if(ke.isEmpty)return;const je=searchAllMatches(ce,ke.fullText).map(Ke=>ke.slice(Ke.startIndex,Ke.endIndex).groupBySpanIndex()).reduce((Ke,Ye,ze)=>{const Xe=new CharIndexList(Object.values(Ye)).removeSpacesBetweenWords().generateRectWithCoordinates(Ne,$e).map(Je=>({...Je,index:ze}));return Ke.concat(Xe)},[]);me(updateHighlightIndexByPosition(je))},[pe,ce]);return jsxRuntimeExports.jsx(Page,{className:styles$1r.page,pageNumber:pe,loading:jsxRuntimeExports.jsx(PF,{loading:!0}),onRenderTextLayerSuccess:Se,children:jsxRuntimeExports.jsx(PdfHighlights,{highlights:xe,activeIndex:ge})})};function usePDFMatches(){const[K,J]=reactExports.useState([]),[ne,oe]=reactExports.useState(0),[ce,ue]=reactExports.useReducer(Se=>Se+1,0),Ae=K.length,pe=reactExports.useMemo(()=>{const Se=K[ne-1];return Se?{...Se}:void 0},[K,ne,ce]),xe=Se=>{J(Se),oe(Se.length===0?0:1)},me=reactExports.useCallback(()=>{J([]),oe(0)},[]),ge=reactExports.useCallback((Se=!0)=>{oe(Te=>{if(Ae===0||Te===0)return Te;const Ne=Te===1;return Se?Ne?Ae:Te-1:Ne?Te:Te-1}),ue()},[Ae]),ye=reactExports.useCallback((Se=!0)=>{oe(Te=>{if(Ae===0||Te===0)return Te;const Ne=Te===Ae;return Se?Ne?1:Te+1:Ne?Te:Te+1}),ue()},[K.length]);return{currentMatchedTerm:pe,currentMatchedIndex:ne,matchedSize:Ae,previous:ge,next:ye,reset:me,update:xe,forceUpdateCurrentMatchedTerm:ue}}function usePDFSearch({documentRef:K,pdfRef:J}){const[ne,{toggle:oe}]=useBoolean(!1),[ce,ue]=reactExports.useState(""),{currentMatchedTerm:Ae,currentMatchedIndex:pe,matchedSize:xe,reset:me,next:ge,previous:ye,update:Se,forceUpdateCurrentMatchedTerm:Te}=usePDFMatches(),Ne=reactExports.useRef([]),$e=reactExports.useCallback(Ke=>{Ne.current=Ke},[]),ke=(Ke,Ye,ze)=>{const Xe=Ye+1;return searchAllMatches(ze,Ke).map((Je,rt)=>({...Je,page:Xe,matchIndex:rt}))},je=reactExports.useCallback(Ke=>{ue(Ye=>{if(Ye===Ke)return xe>1?ge():Te(),Ke;if(!J.current)return Ke;if(Ke){let Xe=[];Ne.current.forEach((Je,rt)=>{Xe=Xe.concat(ke(Je,rt,Ke))}),Se(Xe)}else me();return Ke})},[xe]);return reactExports.useEffect(()=>{const Ke=Ye=>{(Ye.ctrlKey||Ye.metaKey)&&Ye.code===KeyboardCode.KeyF&&(Ye.preventDefault(),Ye.stopPropagation(),oe())};return K.current&&(K.current.setAttribute("tabIndex","-1"),K.current.addEventListener("keydown",Ke)),()=>{K.current&&(K.current.removeAttribute("tabIndex"),K.current.addEventListener("keydown",Ke))}},[]),{isShowSearch:ne,onToggleSearch:oe,search:ce,onChangeSearch:je,onSetTextContents:$e,currentMatchedTerm:Ae,matchedSize:xe,currentMatchedIndex:pe,onNextMatch:ge,onPreviousMatch:ye}}const document$1="_document_xuamp_1",container$E="_container_xuamp_23",pdfControlsContainer="_pdfControlsContainer_xuamp_31",pdfBlock="_pdfBlock_xuamp_38",virtualizer="_virtualizer_xuamp_45",virtualItem="_virtualItem_xuamp_50",styles$1q={document:document$1,container:container$E,pdfControlsContainer,pdfBlock,virtualizer,virtualItem};__webpack_exports__GlobalWorkerOptions.workerSrc=`//unpkg.com/pdfjs-dist@${__webpack_exports__version}/build/pdf.worker.min.mjs`;const LazyDocument=reactExports.lazy(()=>__vitePreload(()=>import("./controls-B-lqj8_S.js").then(K=>K.b),__vite__mapDeps([0,1,2,3,4])).then(K=>({default:K.Document}))),PDFViewer=({content:K})=>{var ve;const J=reactExports.useRef(null),ne=reactExports.useRef(null),oe=reactExports.useRef(null),{isShowSearch:ce,onSetTextContents:ue,currentMatchedTerm:Ae,currentMatchedIndex:pe,matchedSize:xe,onNextMatch:me,search:ge,onChangeSearch:ye,onPreviousMatch:Se}=usePDFSearch({documentRef:J,pdfRef:oe}),Te=reactExports.useRef(new AbortController),[Ne,$e]=reactExports.useState(1),[ke,je]=reactExports.useState([]),Ke=reactExports.useMemo(()=>({cMapUrl:"cmaps/",standardFontDataUrl:"standard_fonts/"}),[]),[Ye,{setTrue:ze,setFalse:Xe}]=useBoolean(!1),Je=K?`data:application/pdf;base64,${K}`:"",rt=useVirtualizer({scrollPaddingStart:-5,count:ke.length,getScrollElement:()=>ne.current,estimateSize:reactExports.useCallback(Be=>ke[Be].height,[ke])});reactExports.useEffect(()=>()=>{Te.current.abort("Component will unmount")},[]);const Ze=Be=>{oe.current=Be,Te.current=new AbortController;const{signal:Re}=Te.current,Ie=Array.from({length:Be.numPages},(Fe,qe)=>qe+1).map(Fe=>Be.getPage(Fe));makeCancellablePromise(Promise.all(Ie).then(Fe=>{const qe=Fe.map(Ue=>Ue.getViewport({scale:1})),We=Fe.map(getPageContent);return Promise.all(We).then(Ue=>({viewports:qe,textContents:Ue}))}).then(({viewports:Fe,textContents:qe})=>{je(Fe),ue(qe)}),Re).catch(Fe=>{isAbortedPromiseError(Fe)||console.error(Fe)})},et=useThrottle(Be=>{var We;const Re=Be.target.scrollTop,Ie=((We=ne.current)==null?void 0:We.offsetHeight)||0,Fe=Re+Ie/2,qe=rt.getVirtualItemForOffset(Fe)||rt.getVirtualItems()[0];$e(qe.index+1)},100,[rt]),nt=reactExports.useCallback(Be=>{const Re=Be-1;rt.scrollToIndex(Re,{align:"start"})},[rt]),Ge=reactExports.useCallback((Be,Re)=>{const Ie=getOffsetOfPreviousViewports(Be-1,ke);rt.scrollToOffset(Ie+Re)},[ke,rt]);return reactExports.useEffect(()=>{if(!Ae)return;ze();const Be=Ae.page-1;rt.getVirtualItems().some(Fe=>Fe.index===Be)||nt(Ae.page)},[Ae,rt]),jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(PF,{loading:!0}),children:jsxRuntimeExports.jsxs(LazyDocument,{inputRef:J,className:styles$1q.document,file:Je,options:Ke,loading:null,onLoadSuccess:Ze,children:[jsxRuntimeExports.jsx("div",{className:styles$1q.container,children:jsxRuntimeExports.jsxs("div",{className:styles$1q.pdfControlsContainer,children:[jsxRuntimeExports.jsx(PDFPagination,{currentPage:Ne,lastPage:(ve=oe==null?void 0:oe.current)==null?void 0:ve.numPages,onChangePage:nt}),jsxRuntimeExports.jsx(PdfSearch,{currentMatchedTerm:pe,matchedTermsSize:xe,onPreviousMatch:Se,onNextMatch:me,isOpen:ce,onChangeSearch:ye})]})}),jsxRuntimeExports.jsx("div",{className:styles$1q.pdfBlock,ref:ne,onScroll:et,children:jsxRuntimeExports.jsx("div",{className:styles$1q.virtualizer,style:{height:rt.getTotalSize()},children:rt.getVirtualItems().map(Be=>jsxRuntimeExports.jsx("div",{className:styles$1q.virtualItem,"data-virtual-index":Be.index,style:{height:Be.size,transform:`translateY(${Be.start}px)`},children:jsxRuntimeExports.jsx(PdfPage,{shouldScroll:Ye,setScrolled:Xe,currentMatchedTerm:Ae,documentRef:J,containerRef:ne,pageNumber:Be.index+1,search:ge,onScrollToOffset:Re=>Ge(Be.index+1,Re)})},Be.key))})})]})})},errorMessage$1="_errorMessage_125hq_1",styles$1p={errorMessage:errorMessage$1},BinaryContentContainer=({FileType:K,FileBytes:J,HtmlBytes:ne,PdfBytes:oe,PngBytes:ce})=>{const{t:ue}=useTranslation();if(J||ne||oe||ce){const Ae=J??ne??oe??ce??"";return(xe=>({[BinaryContentTypesEnum.Png]:jsxRuntimeExports.jsx(ImageViewer,{content:Ae}),[BinaryContentTypesEnum.Jpg]:jsxRuntimeExports.jsx(ImageViewer,{content:Ae}),[BinaryContentTypesEnum.Html]:jsxRuntimeExports.jsx(ContentViewer,{content:Ae}),[BinaryContentTypesEnum.Plotly]:jsxRuntimeExports.jsx(PlotlyViewer,{content:Ae}),[BinaryContentTypesEnum.Pdf]:jsxRuntimeExports.jsx(PDFViewer,{content:Ae}),[BinaryContentTypesEnum.Xlsx]:jsxRuntimeExports.jsx(XlsxViewer,{content:Ae}),[BinaryContentTypesEnum.Csv]:jsxRuntimeExports.jsx(XlsxViewer,{content:Ae})})[xe]||jsxRuntimeExports.jsx("div",{className:styles$1p.errorMessage,children:ue("shared.notSupported")}))(K)}return null};var reactTable={exports:{}},reactTable_production_min={exports:{}};(function(K,J){(function(ne,oe){oe(J,reactExports)})(commonjsGlobal,function(ne,oe){function ce(ct,vt,Et,_t,Ut,Nt,Qt){try{var cr=ct[Nt](Qt),pr=cr.value}catch(gr){return void Et(gr)}cr.done?vt(pr):Promise.resolve(pr).then(_t,Ut)}function ue(ct){return function(){var vt=this,Et=arguments;return new Promise(function(_t,Ut){var Nt=ct.apply(vt,Et);function Qt(pr){ce(Nt,_t,Ut,Qt,cr,"next",pr)}function cr(pr){ce(Nt,_t,Ut,Qt,cr,"throw",pr)}Qt(void 0)})}}function Ae(){return(Ae=Object.assign||function(ct){for(var vt=1;vt<arguments.length;vt++){var Et=arguments[vt];for(var _t in Et)Object.prototype.hasOwnProperty.call(Et,_t)&&(ct[_t]=Et[_t])}return ct}).apply(this,arguments)}function pe(ct,vt){if(ct==null)return{};var Et,_t,Ut={},Nt=Object.keys(ct);for(_t=0;_t<Nt.length;_t++)Et=Nt[_t],vt.indexOf(Et)>=0||(Ut[Et]=ct[Et]);return Ut}function xe(ct){var vt=function(Et,_t){if(typeof Et!="object"||Et===null)return Et;var Ut=Et[Symbol.toPrimitive];if(Ut!==void 0){var Nt=Ut.call(Et,_t);if(typeof Nt!="object")return Nt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Et)}(ct,"string");return typeof vt=="symbol"?vt:String(vt)}oe=oe&&Object.prototype.hasOwnProperty.call(oe,"default")?oe.default:oe;var me={init:"init"},ge=function(ct){var vt=ct.value;return vt===void 0?"":vt},ye=function(){return oe.createElement(oe.Fragment,null,"")},Se={Cell:ge,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function Te(){for(var ct=arguments.length,vt=new Array(ct),Et=0;Et<ct;Et++)vt[Et]=arguments[Et];return vt.reduce(function(_t,Ut){var Nt=Ut.style,Qt=Ut.className;return _t=Ae({},_t,{},pe(Ut,["style","className"])),Nt&&(_t.style=_t.style?Ae({},_t.style||{},{},Nt||{}):Nt),Qt&&(_t.className=_t.className?_t.className+" "+Qt:Qt),_t.className===""&&delete _t.className,_t},{})}var Ne=function(ct,vt){return vt===void 0&&(vt={}),function(Et){return Et===void 0&&(Et={}),[].concat(ct,[Et]).reduce(function(_t,Ut){return function Nt(Qt,cr,pr){return typeof cr=="function"?Nt({},cr(Qt,pr)):Array.isArray(cr)?Te.apply(void 0,[Qt].concat(cr)):Te(Qt,cr)}(_t,Ut,Ae({},vt,{userProps:Et}))},{})}},$e=function(ct,vt,Et,_t){return Et===void 0&&(Et={}),ct.reduce(function(Ut,Nt){return Nt(Ut,Et)},vt)},ke=function(ct,vt,Et){return Et===void 0&&(Et={}),ct.forEach(function(_t){_t(vt,Et)})};function je(ct,vt,Et,_t){ct.findIndex(function(Ut){return Ut.pluginName===Et}),vt.forEach(function(Ut){ct.findIndex(function(Nt){return Nt.pluginName===Ut})})}function Ke(ct,vt){return typeof ct=="function"?ct(vt):ct}function Ye(ct){var vt=oe.useRef();return vt.current=ct,oe.useCallback(function(){return vt.current},[])}var ze=typeof document<"u"?oe.useLayoutEffect:oe.useEffect;function Xe(ct,vt){var Et=oe.useRef(!1);ze(function(){Et.current&&ct(),Et.current=!0},vt)}function Je(ct,vt,Et){return Et===void 0&&(Et={}),function(_t,Ut){Ut===void 0&&(Ut={});var Nt=typeof _t=="string"?vt[_t]:_t;if(Nt===void 0)throw console.info(vt),new Error("Renderer Error ");return rt(Nt,Ae({},ct,{column:vt},Et,{},Ut))}}function rt(ct,vt){return function(_t){return typeof _t=="function"&&(Ut=Object.getPrototypeOf(_t)).prototype&&Ut.prototype.isReactComponent;var Ut}(Et=ct)||typeof Et=="function"||function(_t){return typeof _t=="object"&&typeof _t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(_t.$$typeof.description)}(Et)?oe.createElement(ct,vt):ct;var Et}function Ze(ct,vt,Et){return Et===void 0&&(Et=0),ct.map(function(_t){return nt(_t=Ae({},_t,{parent:vt,depth:Et})),_t.columns&&(_t.columns=Ze(_t.columns,_t,Et+1)),_t})}function et(ct){return Fe(ct,"columns")}function nt(ct){var vt=ct.id,Et=ct.accessor,_t=ct.Header;if(typeof Et=="string"){vt=vt||Et;var Ut=Et.split(".");Et=function(Nt){return function(Qt,cr,pr){if(!cr)return Qt;var gr,Br=typeof cr=="function"?cr:JSON.stringify(cr),wr=Be.get(Br)||function(){var Cr=function(vr){return function Sr(Ir,$r){if($r===void 0&&($r=[]),Array.isArray(Ir))for(var Or=0;Or<Ir.length;Or+=1)Sr(Ir[Or],$r);else $r.push(Ir);return $r}(vr).map(function(Sr){return String(Sr).replace(".","_")}).join(".").replace(tt,".").replace(it,"").split(".")}(cr);return Be.set(Br,Cr),Cr}();try{gr=wr.reduce(function(Cr,vr){return Cr[vr]},Qt)}catch{}return gr!==void 0?gr:pr}(Nt,Ut)}}if(!vt&&typeof _t=="string"&&_t&&(vt=_t),!vt&&ct.columns)throw console.error(ct),new Error('A column ID (or unique "Header" value) is required!');if(!vt)throw console.error(ct),new Error("A column ID (or string accessor) is required!");return Object.assign(ct,{id:vt,accessor:Et}),ct}function Ge(ct,vt){if(!vt)throw new Error;return Object.assign(ct,Ae({Header:ye,Footer:ye},Se,{},vt,{},ct)),Object.assign(ct,{originalWidth:ct.width}),ct}function ve(ct,vt,Et){Et===void 0&&(Et=function(){return{}});for(var _t=[],Ut=ct,Nt=0,Qt=function(){return Nt++},cr=function(){var pr={headers:[]},gr=[],Br=Ut.some(function(wr){return wr.parent});Ut.forEach(function(wr){var Cr,vr=[].concat(gr).reverse()[0];Br&&(wr.parent?Cr=Ae({},wr.parent,{originalId:wr.parent.id,id:wr.parent.id+"_"+Qt(),headers:[wr]},Et(wr)):Cr=Ge(Ae({originalId:wr.id+"_placeholder",id:wr.id+"_placeholder_"+Qt(),placeholderOf:wr,headers:[wr]},Et(wr)),vt),vr&&vr.originalId===Cr.originalId?vr.headers.push(wr):gr.push(Cr)),pr.headers.push(wr)}),_t.push(pr),Ut=gr};Ut.length;)cr();return _t.reverse()}var Be=new Map;function Re(){for(var ct=arguments.length,vt=new Array(ct),Et=0;Et<ct;Et++)vt[Et]=arguments[Et];for(var _t=0;_t<vt.length;_t+=1)if(vt[_t]!==void 0)return vt[_t]}function Ie(ct){if(typeof ct=="function")return ct}function Fe(ct,vt){var Et=[];return function _t(Ut){Ut.forEach(function(Nt){Nt[vt]?_t(Nt[vt]):Et.push(Nt)})}(ct),Et}function qe(ct,vt){var Et=vt.manualExpandedKey,_t=vt.expanded,Ut=vt.expandSubRows,Nt=Ut===void 0||Ut,Qt=[];return ct.forEach(function(cr){return function pr(gr,Br){Br===void 0&&(Br=!0),gr.isExpanded=gr.original&&gr.original[Et]||_t[gr.id],gr.canExpand=gr.subRows&&!!gr.subRows.length,Br&&Qt.push(gr),gr.subRows&&gr.subRows.length&&gr.isExpanded&&gr.subRows.forEach(function(wr){return pr(wr,Nt)})}(cr)}),Qt}function We(ct,vt,Et){return Ie(ct)||vt[ct]||Et[ct]||Et.text}function Ue(ct,vt,Et){return ct?ct(vt,Et):vt===void 0}function _e(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var Qe=null,tt=/\[/g,it=/\]/g,at=function(ct){return Ae({role:"table"},ct)},ot=function(ct){return Ae({role:"rowgroup"},ct)},lt=function(ct,vt){var Et=vt.column;return Ae({key:"header_"+Et.id,colSpan:Et.totalVisibleHeaderCount,role:"columnheader"},ct)},st=function(ct,vt){var Et=vt.column;return Ae({key:"footer_"+Et.id,colSpan:Et.totalVisibleHeaderCount},ct)},ut=function(ct,vt){return Ae({key:"headerGroup_"+vt.index,role:"row"},ct)},ft=function(ct,vt){return Ae({key:"footerGroup_"+vt.index},ct)},dt=function(ct,vt){return Ae({key:"row_"+vt.row.id,role:"row"},ct)},Bt=function(ct,vt){var Et=vt.cell;return Ae({key:"cell_"+Et.row.id+"_"+Et.column.id,role:"cell"},ct)};function pt(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[at],getTableBodyProps:[ot],getHeaderGroupProps:[ut],getFooterGroupProps:[ft],getHeaderProps:[lt],getFooterProps:[st],getRowProps:[dt],getCellProps:[Bt],useFinalInstance:[]}}me.resetHiddenColumns="resetHiddenColumns",me.toggleHideColumn="toggleHideColumn",me.setHiddenColumns="setHiddenColumns",me.toggleHideAllColumns="toggleHideAllColumns";var mt=function(ct){ct.getToggleHiddenProps=[bt],ct.getToggleHideAllColumnsProps=[xt],ct.stateReducers.push(yt),ct.useInstanceBeforeDimensions.push(It),ct.headerGroupsDeps.push(function(vt,Et){var _t=Et.instance;return[].concat(vt,[_t.state.hiddenColumns])}),ct.useInstance.push(ht)};mt.pluginName="useColumnVisibility";var bt=function(ct,vt){var Et=vt.column;return[ct,{onChange:function(_t){Et.toggleHidden(!_t.target.checked)},style:{cursor:"pointer"},checked:Et.isVisible,title:"Toggle Column Visible"}]},xt=function(ct,vt){var Et=vt.instance;return[ct,{onChange:function(_t){Et.toggleHideAllColumns(!_t.target.checked)},style:{cursor:"pointer"},checked:!Et.allColumnsHidden&&!Et.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!Et.allColumnsHidden&&Et.state.hiddenColumns.length}]};function yt(ct,vt,Et,_t){if(vt.type===me.init)return Ae({hiddenColumns:[]},ct);if(vt.type===me.resetHiddenColumns)return Ae({},ct,{hiddenColumns:_t.initialState.hiddenColumns||[]});if(vt.type===me.toggleHideColumn){var Ut=(vt.value!==void 0?vt.value:!ct.hiddenColumns.includes(vt.columnId))?[].concat(ct.hiddenColumns,[vt.columnId]):ct.hiddenColumns.filter(function(Nt){return Nt!==vt.columnId});return Ae({},ct,{hiddenColumns:Ut})}return vt.type===me.setHiddenColumns?Ae({},ct,{hiddenColumns:Ke(vt.value,ct.hiddenColumns)}):vt.type===me.toggleHideAllColumns?Ae({},ct,{hiddenColumns:(vt.value!==void 0?vt.value:!ct.hiddenColumns.length)?_t.allColumns.map(function(Nt){return Nt.id}):[]}):void 0}function It(ct){var vt=ct.headers,Et=ct.state.hiddenColumns;oe.useRef(!1).current;var _t=0;vt.forEach(function(Ut){return _t+=function Nt(Qt,cr){Qt.isVisible=cr&&!Et.includes(Qt.id);var pr=0;return Qt.headers&&Qt.headers.length?Qt.headers.forEach(function(gr){return pr+=Nt(gr,Qt.isVisible)}):pr=Qt.isVisible?1:0,Qt.totalVisibleHeaderCount=pr,pr}(Ut,!0)})}function ht(ct){var vt=ct.columns,Et=ct.flatHeaders,_t=ct.dispatch,Ut=ct.allColumns,Nt=ct.getHooks,Qt=ct.state.hiddenColumns,cr=ct.autoResetHiddenColumns,pr=cr===void 0||cr,gr=Ye(ct),Br=Ut.length===Qt.length,wr=oe.useCallback(function($r,Or){return _t({type:me.toggleHideColumn,columnId:$r,value:Or})},[_t]),Cr=oe.useCallback(function($r){return _t({type:me.setHiddenColumns,value:$r})},[_t]),vr=oe.useCallback(function($r){return _t({type:me.toggleHideAllColumns,value:$r})},[_t]),Sr=Ne(Nt().getToggleHideAllColumnsProps,{instance:gr()});Et.forEach(function($r){$r.toggleHidden=function(Or){_t({type:me.toggleHideColumn,columnId:$r.id,value:Or})},$r.getToggleHiddenProps=Ne(Nt().getToggleHiddenProps,{instance:gr(),column:$r})});var Ir=Ye(pr);Xe(function(){Ir()&&_t({type:me.resetHiddenColumns})},[_t,vt]),Object.assign(ct,{allColumnsHidden:Br,toggleHideColumn:wr,setHiddenColumns:Cr,toggleHideAllColumns:vr,getToggleHideAllColumnsProps:Sr})}var gt={},Pt={},wt=function(ct,vt,Et){return ct},St=function(ct,vt){return ct.subRows||[]},Zt=function(ct,vt,Et){return""+(Et?[Et.id,vt].join("."):vt)},Ct=function(ct){return ct};function Rt(ct){var vt=ct.initialState,Et=vt===void 0?gt:vt,_t=ct.defaultColumn,Ut=_t===void 0?Pt:_t,Nt=ct.getSubRows,Qt=Nt===void 0?St:Nt,cr=ct.getRowId,pr=cr===void 0?Zt:cr,gr=ct.stateReducer,Br=gr===void 0?wt:gr,wr=ct.useControlledState,Cr=wr===void 0?Ct:wr;return Ae({},pe(ct,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:Et,defaultColumn:Ut,getSubRows:Qt,getRowId:pr,stateReducer:Br,useControlledState:Cr})}function dr(ct,vt){vt===void 0&&(vt=0);var Et=0,_t=0,Ut=0,Nt=0;return ct.forEach(function(Qt){var cr=Qt.headers;if(Qt.totalLeft=vt,cr&&cr.length){var pr=dr(cr,vt),gr=pr[0],Br=pr[1],wr=pr[2],Cr=pr[3];Qt.totalMinWidth=gr,Qt.totalWidth=Br,Qt.totalMaxWidth=wr,Qt.totalFlexWidth=Cr}else Qt.totalMinWidth=Qt.minWidth,Qt.totalWidth=Math.min(Math.max(Qt.minWidth,Qt.width),Qt.maxWidth),Qt.totalMaxWidth=Qt.maxWidth,Qt.totalFlexWidth=Qt.canResize?Qt.totalWidth:0;Qt.isVisible&&(vt+=Qt.totalWidth,Et+=Qt.totalMinWidth,_t+=Qt.totalWidth,Ut+=Qt.totalMaxWidth,Nt+=Qt.totalFlexWidth)}),[Et,_t,Ut,Nt]}function Dt(ct){var vt=ct.data,Et=ct.rows,_t=ct.flatRows,Ut=ct.rowsById,Nt=ct.column,Qt=ct.getRowId,cr=ct.getSubRows,pr=ct.accessValueHooks,gr=ct.getInstance;vt.forEach(function(Br,wr){return function Cr(vr,Sr,Ir,$r,Or){Ir===void 0&&(Ir=0);var zr=vr,Dr=Qt(vr,Sr,$r),Tr=Ut[Dr];if(Tr)Tr.subRows&&Tr.originalSubRows.forEach(function(Nr,jr){return Cr(Nr,jr,Ir+1,Tr)});else if((Tr={id:Dr,original:zr,index:Sr,depth:Ir,cells:[{}]}).cells.map=_e,Tr.cells.filter=_e,Tr.cells.forEach=_e,Tr.cells[0].getCellProps=_e,Tr.values={},Or.push(Tr),_t.push(Tr),Ut[Dr]=Tr,Tr.originalSubRows=cr(vr,Sr),Tr.originalSubRows){var qr=[];Tr.originalSubRows.forEach(function(Nr,jr){return Cr(Nr,jr,Ir+1,Tr,qr)}),Tr.subRows=qr}Nt.accessor&&(Tr.values[Nt.id]=Nt.accessor(vr,Sr,Tr,Or,vt)),Tr.values[Nt.id]=$e(pr,Tr.values[Nt.id],{row:Tr,column:Nt,instance:gr()})}(Br,wr,0,void 0,Et)})}me.resetExpanded="resetExpanded",me.toggleRowExpanded="toggleRowExpanded",me.toggleAllRowsExpanded="toggleAllRowsExpanded";var Tt=function(ct){ct.getToggleAllRowsExpandedProps=[or],ct.getToggleRowExpandedProps=[Mt],ct.stateReducers.push(kt),ct.useInstance.push(ur),ct.prepareRow.push($t)};Tt.pluginName="useExpanded";var or=function(ct,vt){var Et=vt.instance;return[ct,{onClick:function(_t){Et.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},Mt=function(ct,vt){var Et=vt.row;return[ct,{onClick:function(){Et.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function kt(ct,vt,Et,_t){if(vt.type===me.init)return Ae({expanded:{}},ct);if(vt.type===me.resetExpanded)return Ae({},ct,{expanded:_t.initialState.expanded||{}});if(vt.type===me.toggleAllRowsExpanded){var Ut=vt.value,Nt=_t.rowsById,Qt=Object.keys(Nt).length===Object.keys(ct.expanded).length;if(Ut!==void 0?Ut:!Qt){var cr={};return Object.keys(Nt).forEach(function(Sr){cr[Sr]=!0}),Ae({},ct,{expanded:cr})}return Ae({},ct,{expanded:{}})}if(vt.type===me.toggleRowExpanded){var pr,gr=vt.id,Br=vt.value,wr=ct.expanded[gr],Cr=Br!==void 0?Br:!wr;if(!wr&&Cr)return Ae({},ct,{expanded:Ae({},ct.expanded,(pr={},pr[gr]=!0,pr))});if(wr&&!Cr){var vr=ct.expanded;return vr[gr],Ae({},ct,{expanded:pe(vr,[gr].map(xe))})}return ct}}function ur(ct){var vt=ct.data,Et=ct.rows,_t=ct.rowsById,Ut=ct.manualExpandedKey,Nt=Ut===void 0?"expanded":Ut,Qt=ct.paginateExpandedRows,cr=Qt===void 0||Qt,pr=ct.expandSubRows,gr=pr===void 0||pr,Br=ct.autoResetExpanded,wr=Br===void 0||Br,Cr=ct.getHooks,vr=ct.plugins,Sr=ct.state.expanded,Ir=ct.dispatch;je(vr,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var $r=Ye(wr),Or=!!(Object.keys(_t).length&&Object.keys(Sr).length);Or&&Object.keys(_t).some(function(An){return!Sr[An]})&&(Or=!1),Xe(function(){$r()&&Ir({type:me.resetExpanded})},[Ir,vt]);var zr=oe.useCallback(function(An,kr){Ir({type:me.toggleRowExpanded,id:An,value:kr})},[Ir]),Dr=oe.useCallback(function(An){return Ir({type:me.toggleAllRowsExpanded,value:An})},[Ir]),Tr=oe.useMemo(function(){return cr?qe(Et,{manualExpandedKey:Nt,expanded:Sr,expandSubRows:gr}):Et},[cr,Et,Nt,Sr,gr]),qr=oe.useMemo(function(){return function(An){var kr=0;return Object.keys(An).forEach(function(Hr){var Tn=Hr.split(".");kr=Math.max(kr,Tn.length)}),kr}(Sr)},[Sr]),Nr=Ye(ct),jr=Ne(Cr().getToggleAllRowsExpandedProps,{instance:Nr()});Object.assign(ct,{preExpandedRows:Et,expandedRows:Tr,rows:Tr,expandedDepth:qr,isAllRowsExpanded:Or,toggleRowExpanded:zr,toggleAllRowsExpanded:Dr,getToggleAllRowsExpandedProps:jr})}function $t(ct,vt){var Et=vt.instance.getHooks,_t=vt.instance;ct.toggleRowExpanded=function(Ut){return _t.toggleRowExpanded(ct.id,Ut)},ct.getToggleRowExpandedProps=Ne(Et().getToggleRowExpandedProps,{instance:_t,row:ct})}var jt=function(ct,vt,Et){return ct=ct.filter(function(_t){return vt.some(function(Ut){var Nt=_t.values[Ut];return String(Nt).toLowerCase().includes(String(Et).toLowerCase())})})};jt.autoRemove=function(ct){return!ct};var nr=function(ct,vt,Et){return ct.filter(function(_t){return vt.some(function(Ut){var Nt=_t.values[Ut];return Nt===void 0||String(Nt).toLowerCase()===String(Et).toLowerCase()})})};nr.autoRemove=function(ct){return!ct};var Ot=function(ct,vt,Et){return ct.filter(function(_t){return vt.some(function(Ut){var Nt=_t.values[Ut];return Nt===void 0||String(Nt)===String(Et)})})};Ot.autoRemove=function(ct){return!ct};var Lt=function(ct,vt,Et){return ct.filter(function(_t){return vt.some(function(Ut){return _t.values[Ut].includes(Et)})})};Lt.autoRemove=function(ct){return!ct||!ct.length};var lr=function(ct,vt,Et){return ct.filter(function(_t){return vt.some(function(Ut){var Nt=_t.values[Ut];return Nt&&Nt.length&&Et.every(function(Qt){return Nt.includes(Qt)})})})};lr.autoRemove=function(ct){return!ct||!ct.length};var Ht=function(ct,vt,Et){return ct.filter(function(_t){return vt.some(function(Ut){var Nt=_t.values[Ut];return Nt&&Nt.length&&Et.some(function(Qt){return Nt.includes(Qt)})})})};Ht.autoRemove=function(ct){return!ct||!ct.length};var qt=function(ct,vt,Et){return ct.filter(function(_t){return vt.some(function(Ut){var Nt=_t.values[Ut];return Et.includes(Nt)})})};qt.autoRemove=function(ct){return!ct||!ct.length};var tr=function(ct,vt,Et){return ct.filter(function(_t){return vt.some(function(Ut){return _t.values[Ut]===Et})})};tr.autoRemove=function(ct){return ct===void 0};var Vt=function(ct,vt,Et){return ct.filter(function(_t){return vt.some(function(Ut){return _t.values[Ut]==Et})})};Vt.autoRemove=function(ct){return ct==null};var Gt=function(ct,vt,Et){var _t=Et||[],Ut=_t[0],Nt=_t[1];if((Ut=typeof Ut=="number"?Ut:-1/0)>(Nt=typeof Nt=="number"?Nt:1/0)){var Qt=Ut;Ut=Nt,Nt=Qt}return ct.filter(function(cr){return vt.some(function(pr){var gr=cr.values[pr];return gr>=Ut&&gr<=Nt})})};Gt.autoRemove=function(ct){return!ct||typeof ct[0]!="number"&&typeof ct[1]!="number"};var br=Object.freeze({__proto__:null,text:jt,exactText:nr,exactTextCase:Ot,includes:Lt,includesAll:lr,includesSome:Ht,includesValue:qt,exact:tr,equals:Vt,between:Gt});me.resetFilters="resetFilters",me.setFilter="setFilter",me.setAllFilters="setAllFilters";var Yt=function(ct){ct.stateReducers.push(Kt),ct.useInstance.push(yr)};function Kt(ct,vt,Et,_t){if(vt.type===me.init)return Ae({filters:[]},ct);if(vt.type===me.resetFilters)return Ae({},ct,{filters:_t.initialState.filters||[]});if(vt.type===me.setFilter){var Ut=vt.columnId,Nt=vt.filterValue,Qt=_t.allColumns,cr=_t.filterTypes,pr=Qt.find(function(Ir){return Ir.id===Ut});if(!pr)throw new Error("React-Table: Could not find a column with id: "+Ut);var gr=We(pr.filter,cr||{},br),Br=ct.filters.find(function(Ir){return Ir.id===Ut}),wr=Ke(Nt,Br&&Br.value);return Ue(gr.autoRemove,wr,pr)?Ae({},ct,{filters:ct.filters.filter(function(Ir){return Ir.id!==Ut})}):Ae({},ct,Br?{filters:ct.filters.map(function(Ir){return Ir.id===Ut?{id:Ut,value:wr}:Ir})}:{filters:[].concat(ct.filters,[{id:Ut,value:wr}])})}if(vt.type===me.setAllFilters){var Cr=vt.filters,vr=_t.allColumns,Sr=_t.filterTypes;return Ae({},ct,{filters:Ke(Cr,ct.filters).filter(function(Ir){var $r=vr.find(function(Or){return Or.id===Ir.id});return!Ue(We($r.filter,Sr||{},br).autoRemove,Ir.value,$r)})})}}function yr(ct){var vt=ct.data,Et=ct.rows,_t=ct.flatRows,Ut=ct.rowsById,Nt=ct.allColumns,Qt=ct.filterTypes,cr=ct.manualFilters,pr=ct.defaultCanFilter,gr=pr!==void 0&&pr,Br=ct.disableFilters,wr=ct.state.filters,Cr=ct.dispatch,vr=ct.autoResetFilters,Sr=vr===void 0||vr,Ir=oe.useCallback(function(Nr,jr){Cr({type:me.setFilter,columnId:Nr,filterValue:jr})},[Cr]),$r=oe.useCallback(function(Nr){Cr({type:me.setAllFilters,filters:Nr})},[Cr]);Nt.forEach(function(Nr){var jr=Nr.id,An=Nr.accessor,kr=Nr.defaultCanFilter,Hr=Nr.disableFilters;Nr.canFilter=An?Re(Hr!==!0&&void 0,Br!==!0&&void 0,!0):Re(kr,gr,!1),Nr.setFilter=function(Vr){return Ir(Nr.id,Vr)};var Tn=wr.find(function(Vr){return Vr.id===jr});Nr.filterValue=Tn&&Tn.value});var Or=oe.useMemo(function(){if(cr||!wr.length)return[Et,_t,Ut];var Nr=[],jr={};return[function An(kr,Hr){Hr===void 0&&(Hr=0);var Tn=kr;return(Tn=wr.reduce(function(Vr,_n){var En=_n.id,In=_n.value,Fr=Nt.find(function(Nn){return Nn.id===En});if(!Fr)return Vr;Hr===0&&(Fr.preFilteredRows=Vr);var mn=We(Fr.filter,Qt||{},br);return mn?(Fr.filteredRows=mn(Vr,[En],In),Fr.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+Fr.id+"."),Vr)},kr)).forEach(function(Vr){Nr.push(Vr),jr[Vr.id]=Vr,Vr.subRows&&(Vr.subRows=Vr.subRows&&Vr.subRows.length>0?An(Vr.subRows,Hr+1):Vr.subRows)}),Tn}(Et),Nr,jr]},[cr,wr,Et,_t,Ut,Nt,Qt]),zr=Or[0],Dr=Or[1],Tr=Or[2];oe.useMemo(function(){Nt.filter(function(Nr){return!wr.find(function(jr){return jr.id===Nr.id})}).forEach(function(Nr){Nr.preFilteredRows=zr,Nr.filteredRows=zr})},[zr,wr,Nt]);var qr=Ye(Sr);Xe(function(){qr()&&Cr({type:me.resetFilters})},[Cr,cr?null:vt]),Object.assign(ct,{preFilteredRows:Et,preFilteredFlatRows:_t,preFilteredRowsById:Ut,filteredRows:zr,filteredFlatRows:Dr,filteredRowsById:Tr,rows:zr,flatRows:Dr,rowsById:Tr,setFilter:Ir,setAllFilters:$r})}Yt.pluginName="useFilters",me.resetGlobalFilter="resetGlobalFilter",me.setGlobalFilter="setGlobalFilter";var zt=function(ct){ct.stateReducers.push(Jt),ct.useInstance.push(xr)};function Jt(ct,vt,Et,_t){if(vt.type===me.resetGlobalFilter)return Ae({},ct,{globalFilter:_t.initialState.globalFilter||void 0});if(vt.type===me.setGlobalFilter){var Ut=vt.filterValue,Nt=_t.userFilterTypes,Qt=We(_t.globalFilter,Nt||{},br),cr=Ke(Ut,ct.globalFilter);return Ue(Qt.autoRemove,cr)?(ct.globalFilter,pe(ct,["globalFilter"])):Ae({},ct,{globalFilter:cr})}}function xr(ct){var vt=ct.data,Et=ct.rows,_t=ct.flatRows,Ut=ct.rowsById,Nt=ct.allColumns,Qt=ct.filterTypes,cr=ct.globalFilter,pr=ct.manualGlobalFilter,gr=ct.state.globalFilter,Br=ct.dispatch,wr=ct.autoResetGlobalFilter,Cr=wr===void 0||wr,vr=ct.disableGlobalFilter,Sr=oe.useCallback(function(Tr){Br({type:me.setGlobalFilter,filterValue:Tr})},[Br]),Ir=oe.useMemo(function(){if(pr||gr===void 0)return[Et,_t,Ut];var Tr=[],qr={},Nr=We(cr,Qt||{},br);if(!Nr)return console.warn("Could not find a valid 'globalFilter' option."),Et;Nt.forEach(function(An){var kr=An.disableGlobalFilter;An.canFilter=Re(kr!==!0&&void 0,vr!==!0&&void 0,!0)});var jr=Nt.filter(function(An){return An.canFilter===!0});return[function An(kr){return(kr=Nr(kr,jr.map(function(Hr){return Hr.id}),gr)).forEach(function(Hr){Tr.push(Hr),qr[Hr.id]=Hr,Hr.subRows=Hr.subRows&&Hr.subRows.length?An(Hr.subRows):Hr.subRows}),kr}(Et),Tr,qr]},[pr,gr,cr,Qt,Nt,Et,_t,Ut,vr]),$r=Ir[0],Or=Ir[1],zr=Ir[2],Dr=Ye(Cr);Xe(function(){Dr()&&Br({type:me.resetGlobalFilter})},[Br,pr?null:vt]),Object.assign(ct,{preGlobalFilteredRows:Et,preGlobalFilteredFlatRows:_t,preGlobalFilteredRowsById:Ut,globalFilteredRows:$r,globalFilteredFlatRows:Or,globalFilteredRowsById:zr,rows:$r,flatRows:Or,rowsById:zr,setGlobalFilter:Sr,disableGlobalFilter:vr})}function Xt(ct,vt){return vt.reduce(function(Et,_t){return Et+(typeof _t=="number"?_t:0)},0)}zt.pluginName="useGlobalFilter";var ir=Object.freeze({__proto__:null,sum:Xt,min:function(ct){var vt=ct[0]||0;return ct.forEach(function(Et){typeof Et=="number"&&(vt=Math.min(vt,Et))}),vt},max:function(ct){var vt=ct[0]||0;return ct.forEach(function(Et){typeof Et=="number"&&(vt=Math.max(vt,Et))}),vt},minMax:function(ct){var vt=ct[0]||0,Et=ct[0]||0;return ct.forEach(function(_t){typeof _t=="number"&&(vt=Math.min(vt,_t),Et=Math.max(Et,_t))}),vt+".."+Et},average:function(ct){return Xt(0,ct)/ct.length},median:function(ct){if(!ct.length)return null;var vt=Math.floor(ct.length/2),Et=[].concat(ct).sort(function(_t,Ut){return _t-Ut});return ct.length%2!=0?Et[vt]:(Et[vt-1]+Et[vt])/2},unique:function(ct){return Array.from(new Set(ct).values())},uniqueCount:function(ct){return new Set(ct).size},count:function(ct){return ct.length}}),Mr=[],er={};me.resetGroupBy="resetGroupBy",me.setGroupBy="setGroupBy",me.toggleGroupBy="toggleGroupBy";var fr=function(ct){ct.getGroupByToggleProps=[Qr],ct.stateReducers.push(sr),ct.visibleColumnsDeps.push(function(vt,Et){var _t=Et.instance;return[].concat(vt,[_t.state.groupBy])}),ct.visibleColumns.push(Ar),ct.useInstance.push(ar),ct.prepareRow.push(hr)};fr.pluginName="useGroupBy";var Qr=function(ct,vt){var Et=vt.header;return[ct,{onClick:Et.canGroupBy?function(_t){_t.persist(),Et.toggleGroupBy()}:void 0,style:{cursor:Et.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function sr(ct,vt,Et,_t){if(vt.type===me.init)return Ae({groupBy:[]},ct);if(vt.type===me.resetGroupBy)return Ae({},ct,{groupBy:_t.initialState.groupBy||[]});if(vt.type===me.setGroupBy)return Ae({},ct,{groupBy:vt.value});if(vt.type===me.toggleGroupBy){var Ut=vt.columnId,Nt=vt.value,Qt=Nt!==void 0?Nt:!ct.groupBy.includes(Ut);return Ae({},ct,Qt?{groupBy:[].concat(ct.groupBy,[Ut])}:{groupBy:ct.groupBy.filter(function(cr){return cr!==Ut})})}}function Ar(ct,vt){var Et=vt.instance.state.groupBy,_t=Et.map(function(Nt){return ct.find(function(Qt){return Qt.id===Nt})}).filter(Boolean),Ut=ct.filter(function(Nt){return!Et.includes(Nt.id)});return(ct=[].concat(_t,Ut)).forEach(function(Nt){Nt.isGrouped=Et.includes(Nt.id),Nt.groupedIndex=Et.indexOf(Nt.id)}),ct}var Kr={};function ar(ct){var vt=ct.data,Et=ct.rows,_t=ct.flatRows,Ut=ct.rowsById,Nt=ct.allColumns,Qt=ct.flatHeaders,cr=ct.groupByFn,pr=cr===void 0?Lr:cr,gr=ct.manualGroupBy,Br=ct.aggregations,wr=Br===void 0?Kr:Br,Cr=ct.plugins,vr=ct.state.groupBy,Sr=ct.dispatch,Ir=ct.autoResetGroupBy,$r=Ir===void 0||Ir,Or=ct.disableGroupBy,zr=ct.defaultCanGroupBy,Dr=ct.getHooks;je(Cr,["useColumnOrder","useFilters"],"useGroupBy");var Tr=Ye(ct);Nt.forEach(function(Fr){var mn=Fr.accessor,Nn=Fr.defaultGroupBy,Hn=Fr.disableGroupBy;Fr.canGroupBy=mn?Re(Fr.canGroupBy,Hn!==!0&&void 0,Or!==!0&&void 0,!0):Re(Fr.canGroupBy,Nn,zr,!1),Fr.canGroupBy&&(Fr.toggleGroupBy=function(){return ct.toggleGroupBy(Fr.id)}),Fr.Aggregated=Fr.Aggregated||Fr.Cell});var qr=oe.useCallback(function(Fr,mn){Sr({type:me.toggleGroupBy,columnId:Fr,value:mn})},[Sr]),Nr=oe.useCallback(function(Fr){Sr({type:me.setGroupBy,value:Fr})},[Sr]);Qt.forEach(function(Fr){Fr.getGroupByToggleProps=Ne(Dr().getGroupByToggleProps,{instance:Tr(),header:Fr})});var jr=oe.useMemo(function(){if(gr||!vr.length)return[Et,_t,Ut,Mr,er,_t,Ut];var Fr=vr.filter(function(Ln){return Nt.find(function(Wn){return Wn.id===Ln})}),mn=[],Nn={},Hn=[],Ur={},Mn=[],Dn={},jn=function Ln(Wn,zn,Ui){if(zn===void 0&&(zn=0),zn===Fr.length)return Wn.map(function(Ai){return Ae({},Ai,{depth:zn})});var Fi=Fr[zn],Gi=pr(Wn,Fi);return Object.entries(Gi).map(function(Ai,zi){var Hi=Ai[0],hi=Ai[1],pi=Fi+":"+Hi,ji=Ln(hi,zn+1,pi=Ui?Ui+">"+pi:pi),Qi=zn?Fe(hi,"leafRows"):hi,Wi=function(Vn,Li,Xi){var gi={};return Nt.forEach(function(On){if(Fr.includes(On.id))gi[On.id]=Li[0]?Li[0].values[On.id]:null;else{var Vi=typeof On.aggregate=="function"?On.aggregate:wr[On.aggregate]||ir[On.aggregate];if(Vi){var Zi=Li.map(function(mi){return mi.values[On.id]}),Ji=Vn.map(function(mi){var Pi=mi.values[On.id];if(!Xi&&On.aggregateValue){var Ki=typeof On.aggregateValue=="function"?On.aggregateValue:wr[On.aggregateValue]||ir[On.aggregateValue];if(!Ki)throw console.info({column:On}),new Error("React Table: Invalid column.aggregateValue option for column listed above");Pi=Ki(Pi,mi,On)}return Pi});gi[On.id]=Vi(Ji,Zi)}else{if(On.aggregate)throw console.info({column:On}),new Error("React Table: Invalid column.aggregate option for column listed above");gi[On.id]=null}}}),gi}(Qi,hi,zn),Yi={id:pi,isGrouped:!0,groupByID:Fi,groupByVal:Hi,values:Wi,subRows:ji,leafRows:Qi,depth:zn,index:zi};return ji.forEach(function(Vn){mn.push(Vn),Nn[Vn.id]=Vn,Vn.isGrouped?(Hn.push(Vn),Ur[Vn.id]=Vn):(Mn.push(Vn),Dn[Vn.id]=Vn)}),Yi})}(Et);return jn.forEach(function(Ln){mn.push(Ln),Nn[Ln.id]=Ln,Ln.isGrouped?(Hn.push(Ln),Ur[Ln.id]=Ln):(Mn.push(Ln),Dn[Ln.id]=Ln)}),[jn,mn,Nn,Hn,Ur,Mn,Dn]},[gr,vr,Et,_t,Ut,Nt,wr,pr]),An=jr[0],kr=jr[1],Hr=jr[2],Tn=jr[3],Vr=jr[4],_n=jr[5],En=jr[6],In=Ye($r);Xe(function(){In()&&Sr({type:me.resetGroupBy})},[Sr,gr?null:vt]),Object.assign(ct,{preGroupedRows:Et,preGroupedFlatRow:_t,preGroupedRowsById:Ut,groupedRows:An,groupedFlatRows:kr,groupedRowsById:Hr,onlyGroupedFlatRows:Tn,onlyGroupedRowsById:Vr,nonGroupedFlatRows:_n,nonGroupedRowsById:En,rows:An,flatRows:kr,rowsById:Hr,toggleGroupBy:qr,setGroupBy:Nr})}function hr(ct){ct.allCells.forEach(function(vt){var Et;vt.isGrouped=vt.column.isGrouped&&vt.column.id===ct.groupByID,vt.isPlaceholder=!vt.isGrouped&&vt.column.isGrouped,vt.isAggregated=!vt.isGrouped&&!vt.isPlaceholder&&((Et=ct.subRows)==null?void 0:Et.length)})}function Lr(ct,vt){return ct.reduce(function(Et,_t,Ut){var Nt=""+_t.values[vt];return Et[Nt]=Array.isArray(Et[Nt])?Et[Nt]:[],Et[Nt].push(_t),Et},{})}var Pr=/([0-9]+)/gm;function Yr(ct,vt){return ct===vt?0:ct>vt?1:-1}function Wr(ct,vt,Et){return[ct.values[Et],vt.values[Et]]}function Zr(ct){return typeof ct=="number"?isNaN(ct)||ct===1/0||ct===-1/0?"":String(ct):typeof ct=="string"?ct:""}var Jr=Object.freeze({__proto__:null,alphanumeric:function(ct,vt,Et){var _t=Wr(ct,vt,Et),Ut=_t[0],Nt=_t[1];for(Ut=Zr(Ut),Nt=Zr(Nt),Ut=Ut.split(Pr).filter(Boolean),Nt=Nt.split(Pr).filter(Boolean);Ut.length&&Nt.length;){var Qt=Ut.shift(),cr=Nt.shift(),pr=parseInt(Qt,10),gr=parseInt(cr,10),Br=[pr,gr].sort();if(isNaN(Br[0])){if(Qt>cr)return 1;if(cr>Qt)return-1}else{if(isNaN(Br[1]))return isNaN(pr)?-1:1;if(pr>gr)return 1;if(gr>pr)return-1}}return Ut.length-Nt.length},datetime:function(ct,vt,Et){var _t=Wr(ct,vt,Et),Ut=_t[0],Nt=_t[1];return Yr(Ut=Ut.getTime(),Nt=Nt.getTime())},basic:function(ct,vt,Et){var _t=Wr(ct,vt,Et);return Yr(_t[0],_t[1])},string:function(ct,vt,Et){var _t=Wr(ct,vt,Et),Ut=_t[0],Nt=_t[1];for(Ut=Ut.split("").filter(Boolean),Nt=Nt.split("").filter(Boolean);Ut.length&&Nt.length;){var Qt=Ut.shift(),cr=Nt.shift(),pr=Qt.toLowerCase(),gr=cr.toLowerCase();if(pr>gr)return 1;if(gr>pr)return-1;if(Qt>cr)return 1;if(cr>Qt)return-1}return Ut.length-Nt.length},number:function(ct,vt,Et){var _t=Wr(ct,vt,Et),Ut=_t[0],Nt=_t[1],Qt=/[^0-9.]/gi;return Yr(Ut=Number(String(Ut).replace(Qt,"")),Nt=Number(String(Nt).replace(Qt,"")))}});me.resetSortBy="resetSortBy",me.setSortBy="setSortBy",me.toggleSortBy="toggleSortBy",me.clearSortBy="clearSortBy",Se.sortType="alphanumeric",Se.sortDescFirst=!1;var Gr=function(ct){ct.getSortByToggleProps=[sn],ct.stateReducers.push(ln),ct.useInstance.push(hn)};Gr.pluginName="useSortBy";var sn=function(ct,vt){var Et=vt.instance,_t=vt.column,Ut=Et.isMultiSortEvent,Nt=Ut===void 0?function(Qt){return Qt.shiftKey}:Ut;return[ct,{onClick:_t.canSort?function(Qt){Qt.persist(),_t.toggleSortBy(void 0,!Et.disableMultiSort&&Nt(Qt))}:void 0,style:{cursor:_t.canSort?"pointer":void 0},title:_t.canSort?"Toggle SortBy":void 0}]};function ln(ct,vt,Et,_t){if(vt.type===me.init)return Ae({sortBy:[]},ct);if(vt.type===me.resetSortBy)return Ae({},ct,{sortBy:_t.initialState.sortBy||[]});if(vt.type===me.clearSortBy)return Ae({},ct,{sortBy:ct.sortBy.filter(function(Tr){return Tr.id!==vt.columnId})});if(vt.type===me.setSortBy)return Ae({},ct,{sortBy:vt.sortBy});if(vt.type===me.toggleSortBy){var Ut,Nt=vt.columnId,Qt=vt.desc,cr=vt.multi,pr=_t.allColumns,gr=_t.disableMultiSort,Br=_t.disableSortRemove,wr=_t.disableMultiRemove,Cr=_t.maxMultiSortColCount,vr=Cr===void 0?Number.MAX_SAFE_INTEGER:Cr,Sr=ct.sortBy,Ir=pr.find(function(Tr){return Tr.id===Nt}).sortDescFirst,$r=Sr.find(function(Tr){return Tr.id===Nt}),Or=Sr.findIndex(function(Tr){return Tr.id===Nt}),zr=Qt!=null,Dr=[];return(Ut=!gr&&cr?$r?"toggle":"add":Or!==Sr.length-1||Sr.length!==1?"replace":$r?"toggle":"replace")!="toggle"||Br||zr||cr&&wr||!($r&&$r.desc&&!Ir||!$r.desc&&Ir)||(Ut="remove"),Ut==="replace"?Dr=[{id:Nt,desc:zr?Qt:Ir}]:Ut==="add"?(Dr=[].concat(Sr,[{id:Nt,desc:zr?Qt:Ir}])).splice(0,Dr.length-vr):Ut==="toggle"?Dr=Sr.map(function(Tr){return Tr.id===Nt?Ae({},Tr,{desc:zr?Qt:!$r.desc}):Tr}):Ut==="remove"&&(Dr=Sr.filter(function(Tr){return Tr.id!==Nt})),Ae({},ct,{sortBy:Dr})}}function hn(ct){var vt=ct.data,Et=ct.rows,_t=ct.flatRows,Ut=ct.allColumns,Nt=ct.orderByFn,Qt=Nt===void 0?pn:Nt,cr=ct.sortTypes,pr=ct.manualSortBy,gr=ct.defaultCanSort,Br=ct.disableSortBy,wr=ct.flatHeaders,Cr=ct.state.sortBy,vr=ct.dispatch,Sr=ct.plugins,Ir=ct.getHooks,$r=ct.autoResetSortBy,Or=$r===void 0||$r;je(Sr,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var zr=oe.useCallback(function(kr){vr({type:me.setSortBy,sortBy:kr})},[vr]),Dr=oe.useCallback(function(kr,Hr,Tn){vr({type:me.toggleSortBy,columnId:kr,desc:Hr,multi:Tn})},[vr]),Tr=Ye(ct);wr.forEach(function(kr){var Hr=kr.accessor,Tn=kr.canSort,Vr=kr.disableSortBy,_n=kr.id,En=Hr?Re(Vr!==!0&&void 0,Br!==!0&&void 0,!0):Re(gr,Tn,!1);kr.canSort=En,kr.canSort&&(kr.toggleSortBy=function(Fr,mn){return Dr(kr.id,Fr,mn)},kr.clearSortBy=function(){vr({type:me.clearSortBy,columnId:kr.id})}),kr.getSortByToggleProps=Ne(Ir().getSortByToggleProps,{instance:Tr(),column:kr});var In=Cr.find(function(Fr){return Fr.id===_n});kr.isSorted=!!In,kr.sortedIndex=Cr.findIndex(function(Fr){return Fr.id===_n}),kr.isSortedDesc=kr.isSorted?In.desc:void 0});var qr=oe.useMemo(function(){if(pr||!Cr.length)return[Et,_t];var kr=[],Hr=Cr.filter(function(Tn){return Ut.find(function(Vr){return Vr.id===Tn.id})});return[function Tn(Vr){var _n=Qt(Vr,Hr.map(function(En){var In=Ut.find(function(Nn){return Nn.id===En.id});if(!In)throw new Error("React-Table: Could not find a column with id: "+En.id+" while sorting");var Fr=In.sortType,mn=Ie(Fr)||(cr||{})[Fr]||Jr[Fr];if(!mn)throw new Error("React-Table: Could not find a valid sortType of '"+Fr+"' for column '"+En.id+"'.");return function(Nn,Hn){return mn(Nn,Hn,En.id,En.desc)}}),Hr.map(function(En){var In=Ut.find(function(Fr){return Fr.id===En.id});return In&&In.sortInverted?En.desc:!En.desc}));return _n.forEach(function(En){kr.push(En),En.subRows&&En.subRows.length!==0&&(En.subRows=Tn(En.subRows))}),_n}(Et),kr]},[pr,Cr,Et,_t,Ut,Qt,cr]),Nr=qr[0],jr=qr[1],An=Ye(Or);Xe(function(){An()&&vr({type:me.resetSortBy})},[pr?null:vt]),Object.assign(ct,{preSortedRows:Et,preSortedFlatRows:_t,sortedRows:Nr,sortedFlatRows:jr,rows:Nr,flatRows:jr,setSortBy:zr,toggleSortBy:Dr})}function pn(ct,vt,Et){return[].concat(ct).sort(function(_t,Ut){for(var Nt=0;Nt<vt.length;Nt+=1){var Qt=vt[Nt],cr=Et[Nt]===!1||Et[Nt]==="desc",pr=Qt(_t,Ut);if(pr!==0)return cr?-pr:pr}return Et[0]?_t.index-Ut.index:Ut.index-_t.index})}me.resetPage="resetPage",me.gotoPage="gotoPage",me.setPageSize="setPageSize";var Xr=function(ct){ct.stateReducers.push(yn),ct.useInstance.push(xn)};function yn(ct,vt,Et,_t){if(vt.type===me.init)return Ae({pageSize:10,pageIndex:0},ct);if(vt.type===me.resetPage)return Ae({},ct,{pageIndex:_t.initialState.pageIndex||0});if(vt.type===me.gotoPage){var Ut=_t.pageCount,Nt=_t.page,Qt=Ke(vt.pageIndex,ct.pageIndex),cr=!1;return Qt>ct.pageIndex?cr=Ut===-1?Nt.length>=ct.pageSize:Qt<Ut:Qt<ct.pageIndex&&(cr=Qt>-1),cr?Ae({},ct,{pageIndex:Qt}):ct}if(vt.type===me.setPageSize){var pr=vt.pageSize,gr=ct.pageSize*ct.pageIndex;return Ae({},ct,{pageIndex:Math.floor(gr/pr),pageSize:pr})}}function xn(ct){var vt=ct.rows,Et=ct.autoResetPage,_t=Et===void 0||Et,Ut=ct.manualExpandedKey,Nt=Ut===void 0?"expanded":Ut,Qt=ct.plugins,cr=ct.pageCount,pr=ct.paginateExpandedRows,gr=pr===void 0||pr,Br=ct.expandSubRows,wr=Br===void 0||Br,Cr=ct.state,vr=Cr.pageSize,Sr=Cr.pageIndex,Ir=Cr.expanded,$r=Cr.globalFilter,Or=Cr.filters,zr=Cr.groupBy,Dr=Cr.sortBy,Tr=ct.dispatch,qr=ct.data,Nr=ct.manualPagination;je(Qt,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var jr=Ye(_t);Xe(function(){jr()&&Tr({type:me.resetPage})},[Tr,Nr?null:qr,$r,Or,zr,Dr]);var An=Nr?cr:Math.ceil(vt.length/vr),kr=oe.useMemo(function(){return An>0?[].concat(new Array(An)).fill(null).map(function(mn,Nn){return Nn}):[]},[An]),Hr=oe.useMemo(function(){var mn;if(Nr)mn=vt;else{var Nn=vr*Sr,Hn=Nn+vr;mn=vt.slice(Nn,Hn)}return gr?mn:qe(mn,{manualExpandedKey:Nt,expanded:Ir,expandSubRows:wr})},[wr,Ir,Nt,Nr,Sr,vr,gr,vt]),Tn=Sr>0,Vr=An===-1?Hr.length>=vr:Sr<An-1,_n=oe.useCallback(function(mn){Tr({type:me.gotoPage,pageIndex:mn})},[Tr]),En=oe.useCallback(function(){return _n(function(mn){return mn-1})},[_n]),In=oe.useCallback(function(){return _n(function(mn){return mn+1})},[_n]),Fr=oe.useCallback(function(mn){Tr({type:me.setPageSize,pageSize:mn})},[Tr]);Object.assign(ct,{pageOptions:kr,pageCount:An,page:Hr,canPreviousPage:Tn,canNextPage:Vr,gotoPage:_n,previousPage:En,nextPage:In,setPageSize:Fr})}Xr.pluginName="usePagination",me.resetPivot="resetPivot",me.togglePivot="togglePivot";var dn=function(ct){ct.getPivotToggleProps=[wn],ct.stateReducers.push(Cn),ct.useInstanceAfterData.push(Rr),ct.allColumns.push(Rn),ct.accessValue.push(gn),ct.materializedColumns.push(kn),ct.materializedColumnsDeps.push(Kn),ct.visibleColumns.push(Jn),ct.visibleColumnsDeps.push(vi),ct.useInstance.push(yi),ct.prepareRow.push(xi)};dn.pluginName="usePivotColumns";var cn=[],wn=function(ct,vt){var Et=vt.header;return[ct,{onClick:Et.canPivot?function(_t){_t.persist(),Et.togglePivot()}:void 0,style:{cursor:Et.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function Cn(ct,vt,Et,_t){if(vt.type===me.init)return Ae({pivotColumns:cn},ct);if(vt.type===me.resetPivot)return Ae({},ct,{pivotColumns:_t.initialState.pivotColumns||cn});if(vt.type===me.togglePivot){var Ut=vt.columnId,Nt=vt.value,Qt=Nt!==void 0?Nt:!ct.pivotColumns.includes(Ut);return Ae({},ct,Qt?{pivotColumns:[].concat(ct.pivotColumns,[Ut])}:{pivotColumns:ct.pivotColumns.filter(function(cr){return cr!==Ut})})}}function Rr(ct){ct.allColumns.forEach(function(vt){vt.isPivotSource=ct.state.pivotColumns.includes(vt.id)})}function Rn(ct,vt){var Et=vt.instance;return ct.forEach(function(_t){_t.isPivotSource=Et.state.pivotColumns.includes(_t.id),_t.uniqueValues=new Set}),ct}function gn(ct,vt){var Et=vt.column;return Et.uniqueValues&&ct!==void 0&&Et.uniqueValues.add(ct),ct}function kn(ct,vt){var Et=vt.instance,_t=Et.allColumns,Ut=Et.state;if(!Ut.pivotColumns.length||!Ut.groupBy||!Ut.groupBy.length)return ct;var Nt=Ut.pivotColumns.map(function(pr){return _t.find(function(gr){return gr.id===pr})}).filter(Boolean),Qt=_t.filter(function(pr){return!pr.isPivotSource&&!Ut.groupBy.includes(pr.id)&&!Ut.pivotColumns.includes(pr.id)}),cr=et(function pr(gr,Br,wr){gr===void 0&&(gr=0),wr===void 0&&(wr=[]);var Cr=Nt[gr];return Cr?Array.from(Cr.uniqueValues).sort().map(function(vr){var Sr=Ae({},Cr,{Header:Cr.PivotHeader||typeof Cr.header=="string"?Cr.Header+": "+vr:vr,isPivotGroup:!0,parent:Br,depth:gr,id:Br?Br.id+"."+Cr.id+"."+vr:Cr.id+"."+vr,pivotValue:vr});return Sr.columns=pr(gr+1,Sr,[].concat(wr,[function(Ir){return Ir.values[Cr.id]===vr}])),Sr}):Qt.map(function(vr){return Ae({},vr,{canPivot:!1,isPivoted:!0,parent:Br,depth:gr,id:""+(Br?Br.id+"."+vr.id:vr.id),accessor:function(Sr,Ir,$r){if(wr.every(function(Or){return Or($r)}))return $r.values[vr.id]}})})}());return[].concat(ct,cr)}function Kn(ct,vt){var Et=vt.instance.state,_t=Et.pivotColumns,Ut=Et.groupBy;return[].concat(ct,[_t,Ut])}function Jn(ct,vt){var Et=vt.instance.state;return ct=ct.filter(function(_t){return!_t.isPivotSource}),Et.pivotColumns.length&&Et.groupBy&&Et.groupBy.length&&(ct=ct.filter(function(_t){return _t.isGrouped||_t.isPivoted})),ct}function vi(ct,vt){var Et=vt.instance;return[].concat(ct,[Et.state.pivotColumns,Et.state.groupBy])}function yi(ct){var vt=ct.columns,Et=ct.allColumns,_t=ct.flatHeaders,Ut=ct.getHooks,Nt=ct.plugins,Qt=ct.dispatch,cr=ct.autoResetPivot,pr=cr===void 0||cr,gr=ct.manaulPivot,Br=ct.disablePivot,wr=ct.defaultCanPivot;je(Nt,["useGroupBy"],"usePivotColumns");var Cr=Ye(ct);Et.forEach(function(Sr){var Ir=Sr.accessor,$r=Sr.defaultPivot,Or=Sr.disablePivot;Sr.canPivot=Ir?Re(Sr.canPivot,Or!==!0&&void 0,Br!==!0&&void 0,!0):Re(Sr.canPivot,$r,wr,!1),Sr.canPivot&&(Sr.togglePivot=function(){return ct.togglePivot(Sr.id)}),Sr.Aggregated=Sr.Aggregated||Sr.Cell}),_t.forEach(function(Sr){Sr.getPivotToggleProps=Ne(Ut().getPivotToggleProps,{instance:Cr(),header:Sr})});var vr=Ye(pr);Xe(function(){vr()&&Qt({type:me.resetPivot})},[Qt,gr?null:vt]),Object.assign(ct,{togglePivot:function(Sr,Ir){Qt({type:me.togglePivot,columnId:Sr,value:Ir})}})}function xi(ct){ct.allCells.forEach(function(vt){vt.isPivoted=vt.column.isPivoted})}me.resetSelectedRows="resetSelectedRows",me.toggleAllRowsSelected="toggleAllRowsSelected",me.toggleRowSelected="toggleRowSelected",me.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var ai=function(ct){ct.getToggleRowSelectedProps=[Ei],ct.getToggleAllRowsSelectedProps=[bi],ct.getToggleAllPageRowsSelectedProps=[si],ct.stateReducers.push(wi),ct.useInstance.push(Ci),ct.prepareRow.push(Si)};ai.pluginName="useRowSelect";var Ei=function(ct,vt){var Et=vt.instance,_t=vt.row,Ut=Et.manualRowSelectedKey,Nt=Ut===void 0?"isSelected":Ut;return[ct,{onChange:function(Qt){_t.toggleRowSelected(Qt.target.checked)},style:{cursor:"pointer"},checked:!(!_t.original||!_t.original[Nt])||_t.isSelected,title:"Toggle Row Selected",indeterminate:_t.isSomeSelected}]},bi=function(ct,vt){var Et=vt.instance;return[ct,{onChange:function(_t){Et.toggleAllRowsSelected(_t.target.checked)},style:{cursor:"pointer"},checked:Et.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:!!(!Et.isAllRowsSelected&&Object.keys(Et.state.selectedRowIds).length)}]},si=function(ct,vt){var Et=vt.instance;return[ct,{onChange:function(_t){Et.toggleAllPageRowsSelected(_t.target.checked)},style:{cursor:"pointer"},checked:Et.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:!!(!Et.isAllPageRowsSelected&&Et.page.some(function(_t){var Ut=_t.id;return Et.state.selectedRowIds[Ut]}))}]};function wi(ct,vt,Et,_t){if(vt.type===me.init)return Ae({selectedRowIds:{}},ct);if(vt.type===me.resetSelectedRows)return Ae({},ct,{selectedRowIds:_t.initialState.selectedRowIds||{}});if(vt.type===me.toggleAllRowsSelected){var Ut=vt.value,Nt=_t.isAllRowsSelected,Qt=_t.rowsById,cr=_t.nonGroupedRowsById,pr=cr===void 0?Qt:cr,gr=Ut!==void 0?Ut:!Nt,Br=Object.assign({},ct.selectedRowIds);return gr?Object.keys(pr).forEach(function(_n){Br[_n]=!0}):Object.keys(pr).forEach(function(_n){delete Br[_n]}),Ae({},ct,{selectedRowIds:Br})}if(vt.type===me.toggleRowSelected){var wr=vt.id,Cr=vt.value,vr=_t.rowsById,Sr=_t.selectSubRows,Ir=Sr===void 0||Sr,$r=_t.getSubRows,Or=ct.selectedRowIds[wr],zr=Cr!==void 0?Cr:!Or;if(Or===zr)return ct;var Dr=Ae({},ct.selectedRowIds);return function _n(En){var In=vr[En];if(In&&(In.isGrouped||(zr?Dr[En]=!0:delete Dr[En]),Ir&&$r(In)))return $r(In).forEach(function(Fr){return _n(Fr.id)})}(wr),Ae({},ct,{selectedRowIds:Dr})}if(vt.type===me.toggleAllPageRowsSelected){var Tr=vt.value,qr=_t.page,Nr=_t.rowsById,jr=_t.selectSubRows,An=jr===void 0||jr,kr=_t.isAllPageRowsSelected,Hr=_t.getSubRows,Tn=Tr!==void 0?Tr:!kr,Vr=Ae({},ct.selectedRowIds);return qr.forEach(function(_n){return function En(In){var Fr=Nr[In];if(Fr.isGrouped||(Tn?Vr[In]=!0:delete Vr[In]),An&&Hr(Fr))return Hr(Fr).forEach(function(mn){return En(mn.id)})}(_n.id)}),Ae({},ct,{selectedRowIds:Vr})}return ct}function Ci(ct){var vt=ct.data,Et=ct.rows,_t=ct.getHooks,Ut=ct.plugins,Nt=ct.rowsById,Qt=ct.nonGroupedRowsById,cr=Qt===void 0?Nt:Qt,pr=ct.autoResetSelectedRows,gr=pr===void 0||pr,Br=ct.state.selectedRowIds,wr=ct.selectSubRows,Cr=wr===void 0||wr,vr=ct.dispatch,Sr=ct.page,Ir=ct.getSubRows;je(Ut,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var $r=oe.useMemo(function(){var Hr=[];return Et.forEach(function(Tn){var Vr=Cr?function _n(En,In,Fr){if(In[En.id])return!0;var mn=Fr(En);if(mn&&mn.length){var Nn=!0,Hn=!1;return mn.forEach(function(Ur){Hn&&!Nn||(_n(Ur,In,Fr)?Hn=!0:Nn=!1)}),!!Nn||!!Hn&&null}return!1}(Tn,Br,Ir):!!Br[Tn.id];Tn.isSelected=!!Vr,Tn.isSomeSelected=Vr===null,Vr&&Hr.push(Tn)}),Hr},[Et,Cr,Br,Ir]),Or=!!(Object.keys(cr).length&&Object.keys(Br).length),zr=Or;Or&&Object.keys(cr).some(function(Hr){return!Br[Hr]})&&(Or=!1),Or||Sr&&Sr.length&&Sr.some(function(Hr){var Tn=Hr.id;return!Br[Tn]})&&(zr=!1);var Dr=Ye(gr);Xe(function(){Dr()&&vr({type:me.resetSelectedRows})},[vr,vt]);var Tr=oe.useCallback(function(Hr){return vr({type:me.toggleAllRowsSelected,value:Hr})},[vr]),qr=oe.useCallback(function(Hr){return vr({type:me.toggleAllPageRowsSelected,value:Hr})},[vr]),Nr=oe.useCallback(function(Hr,Tn){return vr({type:me.toggleRowSelected,id:Hr,value:Tn})},[vr]),jr=Ye(ct),An=Ne(_t().getToggleAllRowsSelectedProps,{instance:jr()}),kr=Ne(_t().getToggleAllPageRowsSelectedProps,{instance:jr()});Object.assign(ct,{selectedFlatRows:$r,isAllRowsSelected:Or,isAllPageRowsSelected:zr,toggleRowSelected:Nr,toggleAllRowsSelected:Tr,getToggleAllRowsSelectedProps:An,getToggleAllPageRowsSelectedProps:kr,toggleAllPageRowsSelected:qr})}function Si(ct,vt){var Et=vt.instance;ct.toggleRowSelected=function(_t){return Et.toggleRowSelected(ct.id,_t)},ct.getToggleRowSelectedProps=Ne(Et.getHooks().getToggleRowSelectedProps,{instance:Et,row:ct})}var oi=function(ct){return{}},li=function(ct){return{}};me.setRowState="setRowState",me.setCellState="setCellState",me.resetRowState="resetRowState";var ci=function(ct){ct.stateReducers.push(_i),ct.useInstance.push(Bi),ct.prepareRow.push(Ti)};function _i(ct,vt,Et,_t){var Ut=_t.initialRowStateAccessor,Nt=Ut===void 0?oi:Ut,Qt=_t.initialCellStateAccessor,cr=Qt===void 0?li:Qt,pr=_t.rowsById;if(vt.type===me.init)return Ae({rowState:{}},ct);if(vt.type===me.resetRowState)return Ae({},ct,{rowState:_t.initialState.rowState||{}});if(vt.type===me.setRowState){var gr,Br=vt.rowId,wr=vt.value,Cr=ct.rowState[Br]!==void 0?ct.rowState[Br]:Nt(pr[Br]);return Ae({},ct,{rowState:Ae({},ct.rowState,(gr={},gr[Br]=Ke(wr,Cr),gr))})}if(vt.type===me.setCellState){var vr,Sr,Ir,$r,Or,zr=vt.rowId,Dr=vt.columnId,Tr=vt.value,qr=ct.rowState[zr]!==void 0?ct.rowState[zr]:Nt(pr[zr]),Nr=(qr==null||(vr=qr.cellState)==null?void 0:vr[Dr])!==void 0?qr.cellState[Dr]:cr((Sr=pr[zr])==null||(Ir=Sr.cells)==null?void 0:Ir.find(function(jr){return jr.column.id===Dr}));return Ae({},ct,{rowState:Ae({},ct.rowState,(Or={},Or[zr]=Ae({},qr,{cellState:Ae({},qr.cellState||{},($r={},$r[Dr]=Ke(Tr,Nr),$r))}),Or))})}}function Bi(ct){var vt=ct.autoResetRowState,Et=vt===void 0||vt,_t=ct.data,Ut=ct.dispatch,Nt=oe.useCallback(function(pr,gr){return Ut({type:me.setRowState,rowId:pr,value:gr})},[Ut]),Qt=oe.useCallback(function(pr,gr,Br){return Ut({type:me.setCellState,rowId:pr,columnId:gr,value:Br})},[Ut]),cr=Ye(Et);Xe(function(){cr()&&Ut({type:me.resetRowState})},[_t]),Object.assign(ct,{setRowState:Nt,setCellState:Qt})}function Ti(ct,vt){var Et=vt.instance,_t=Et.initialRowStateAccessor,Ut=_t===void 0?oi:_t,Nt=Et.initialCellStateAccessor,Qt=Nt===void 0?li:Nt,cr=Et.state.rowState;ct&&(ct.state=cr[ct.id]!==void 0?cr[ct.id]:Ut(ct),ct.setState=function(pr){return Et.setRowState(ct.id,pr)},ct.cells.forEach(function(pr){ct.state.cellState||(ct.state.cellState={}),pr.state=ct.state.cellState[pr.column.id]!==void 0?ct.state.cellState[pr.column.id]:Qt(pr),pr.setState=function(gr){return Et.setCellState(ct.id,pr.column.id,gr)}}))}ci.pluginName="useRowState",me.resetColumnOrder="resetColumnOrder",me.setColumnOrder="setColumnOrder";var ei=function(ct){ct.stateReducers.push(Ri),ct.visibleColumnsDeps.push(function(vt,Et){var _t=Et.instance;return[].concat(vt,[_t.state.columnOrder])}),ct.visibleColumns.push(Ii),ct.useInstance.push($i)};function Ri(ct,vt,Et,_t){return vt.type===me.init?Ae({columnOrder:[]},ct):vt.type===me.resetColumnOrder?Ae({},ct,{columnOrder:_t.initialState.columnOrder||[]}):vt.type===me.setColumnOrder?Ae({},ct,{columnOrder:Ke(vt.columnOrder,ct.columnOrder)}):void 0}function Ii(ct,vt){var Et=vt.instance.state.columnOrder;if(!Et||!Et.length)return ct;for(var _t=[].concat(Et),Ut=[].concat(ct),Nt=[],Qt=function(){var cr=_t.shift(),pr=Ut.findIndex(function(gr){return gr.id===cr});pr>-1&&Nt.push(Ut.splice(pr,1)[0])};Ut.length&&_t.length;)Qt();return[].concat(Nt,Ut)}function $i(ct){var vt=ct.dispatch;ct.setColumnOrder=oe.useCallback(function(Et){return vt({type:me.setColumnOrder,columnOrder:Et})},[vt])}ei.pluginName="useColumnOrder",Se.canResize=!0,me.columnStartResizing="columnStartResizing",me.columnResizing="columnResizing",me.columnDoneResizing="columnDoneResizing",me.resetResize="resetResize";var ui=function(ct){ct.getResizerProps=[Mi],ct.getHeaderProps.push({style:{position:"relative"}}),ct.stateReducers.push(Ni),ct.useInstance.push(Oi),ct.useInstanceBeforeDimensions.push(Di)},Mi=function(ct,vt){var Et=vt.instance,_t=vt.header,Ut=Et.dispatch,Nt=function(Qt,cr){var pr=!1;if(Qt.type==="touchstart"){if(Qt.touches&&Qt.touches.length>1)return;pr=!0}var gr,Br,wr=function(Dr){var Tr=[];return function qr(Nr){Nr.columns&&Nr.columns.length&&Nr.columns.map(qr),Tr.push(Nr)}(Dr),Tr}(cr).map(function(Dr){return[Dr.id,Dr.totalWidth]}),Cr=pr?Math.round(Qt.touches[0].clientX):Qt.clientX,vr=function(){window.cancelAnimationFrame(gr),gr=null,Ut({type:me.columnDoneResizing})},Sr=function(){window.cancelAnimationFrame(gr),gr=null,Ut({type:me.columnResizing,clientX:Br})},Ir=function(Dr){Br=Dr,gr||(gr=window.requestAnimationFrame(Sr))},$r={mouse:{moveEvent:"mousemove",moveHandler:function(Dr){return Ir(Dr.clientX)},upEvent:"mouseup",upHandler:function(Dr){document.removeEventListener("mousemove",$r.mouse.moveHandler),document.removeEventListener("mouseup",$r.mouse.upHandler),vr()}},touch:{moveEvent:"touchmove",moveHandler:function(Dr){return Dr.cancelable&&(Dr.preventDefault(),Dr.stopPropagation()),Ir(Dr.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(Dr){document.removeEventListener($r.touch.moveEvent,$r.touch.moveHandler),document.removeEventListener($r.touch.upEvent,$r.touch.moveHandler),vr()}}},Or=pr?$r.touch:$r.mouse,zr=!!function(){if(typeof Qe=="boolean")return Qe;var Dr=!1;try{var Tr={get passive(){return Dr=!0,!1}};window.addEventListener("test",null,Tr),window.removeEventListener("test",null,Tr)}catch{Dr=!1}return Qe=Dr}()&&{passive:!1};document.addEventListener(Or.moveEvent,Or.moveHandler,zr),document.addEventListener(Or.upEvent,Or.upHandler,zr),Ut({type:me.columnStartResizing,columnId:cr.id,columnWidth:cr.totalWidth,headerIdWidths:wr,clientX:Cr})};return[ct,{onMouseDown:function(Qt){return Qt.persist()||Nt(Qt,_t)},onTouchStart:function(Qt){return Qt.persist()||Nt(Qt,_t)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function Ni(ct,vt){if(vt.type===me.init)return Ae({columnResizing:{columnWidths:{}}},ct);if(vt.type===me.resetResize)return Ae({},ct,{columnResizing:{columnWidths:{}}});if(vt.type===me.columnStartResizing){var Et=vt.clientX,_t=vt.columnId,Ut=vt.columnWidth,Nt=vt.headerIdWidths;return Ae({},ct,{columnResizing:Ae({},ct.columnResizing,{startX:Et,headerIdWidths:Nt,columnWidth:Ut,isResizingColumn:_t})})}if(vt.type===me.columnResizing){var Qt=vt.clientX,cr=ct.columnResizing,pr=cr.startX,gr=cr.columnWidth,Br=cr.headerIdWidths,wr=(Qt-pr)/gr,Cr={};return(Br===void 0?[]:Br).forEach(function(vr){var Sr=vr[0],Ir=vr[1];Cr[Sr]=Math.max(Ir+Ir*wr,0)}),Ae({},ct,{columnResizing:Ae({},ct.columnResizing,{columnWidths:Ae({},ct.columnResizing.columnWidths,{},Cr)})})}return vt.type===me.columnDoneResizing?Ae({},ct,{columnResizing:Ae({},ct.columnResizing,{startX:null,isResizingColumn:null})}):void 0}ui.pluginName="useResizeColumns";var Di=function(ct){var vt=ct.flatHeaders,Et=ct.disableResizing,_t=ct.getHooks,Ut=ct.state.columnResizing,Nt=Ye(ct);vt.forEach(function(Qt){var cr=Re(Qt.disableResizing!==!0&&void 0,Et!==!0&&void 0,!0);Qt.canResize=cr,Qt.width=Ut.columnWidths[Qt.id]||Qt.originalWidth||Qt.width,Qt.isResizing=Ut.isResizingColumn===Qt.id,cr&&(Qt.getResizerProps=Ne(_t().getResizerProps,{instance:Nt(),header:Qt}))})};function Oi(ct){var vt=ct.plugins,Et=ct.dispatch,_t=ct.autoResetResize,Ut=_t===void 0||_t,Nt=ct.columns;je(vt,["useAbsoluteLayout"],"useResizeColumns");var Qt=Ye(Ut);Xe(function(){Qt()&&Et({type:me.resetResize})},[Nt]);var cr=oe.useCallback(function(){return Et({type:me.resetResize})},[Et]);Object.assign(ct,{resetResizing:cr})}var ti={position:"absolute",top:0},ri=function(ct){ct.getTableBodyProps.push(Zn),ct.getRowProps.push(Zn),ct.getHeaderGroupProps.push(Zn),ct.getFooterGroupProps.push(Zn),ct.getHeaderProps.push(function(vt,Et){var _t=Et.column;return[vt,{style:Ae({},ti,{left:_t.totalLeft+"px",width:_t.totalWidth+"px"})}]}),ct.getCellProps.push(function(vt,Et){var _t=Et.cell;return[vt,{style:Ae({},ti,{left:_t.column.totalLeft+"px",width:_t.column.totalWidth+"px"})}]}),ct.getFooterProps.push(function(vt,Et){var _t=Et.column;return[vt,{style:Ae({},ti,{left:_t.totalLeft+"px",width:_t.totalWidth+"px"})}]})};ri.pluginName="useAbsoluteLayout";var Zn=function(ct,vt){return[ct,{style:{position:"relative",width:vt.instance.totalColumnsWidth+"px"}}]},ni={display:"inline-block",boxSizing:"border-box"},ii=function(ct,vt){return[ct,{style:{display:"flex",width:vt.instance.totalColumnsWidth+"px"}}]},fi=function(ct){ct.getRowProps.push(ii),ct.getHeaderGroupProps.push(ii),ct.getFooterGroupProps.push(ii),ct.getHeaderProps.push(function(vt,Et){var _t=Et.column;return[vt,{style:Ae({},ni,{width:_t.totalWidth+"px"})}]}),ct.getCellProps.push(function(vt,Et){var _t=Et.cell;return[vt,{style:Ae({},ni,{width:_t.column.totalWidth+"px"})}]}),ct.getFooterProps.push(function(vt,Et){var _t=Et.column;return[vt,{style:Ae({},ni,{width:_t.totalWidth+"px"})}]})};function di(ct){ct.getTableProps.push(Er),ct.getRowProps.push(Sn),ct.getHeaderGroupProps.push(Sn),ct.getFooterGroupProps.push(Sn),ct.getHeaderProps.push(Bn),ct.getCellProps.push($n),ct.getFooterProps.push(Un)}fi.pluginName="useBlockLayout",di.pluginName="useFlexLayout";var Er=function(ct,vt){return[ct,{style:{minWidth:vt.instance.totalColumnsMinWidth+"px"}}]},Sn=function(ct,vt){return[ct,{style:{display:"flex",flex:"1 0 auto",minWidth:vt.instance.totalColumnsMinWidth+"px"}}]},Bn=function(ct,vt){var Et=vt.column;return[ct,{style:{boxSizing:"border-box",flex:Et.totalFlexWidth?Et.totalFlexWidth+" 0 auto":void 0,minWidth:Et.totalMinWidth+"px",width:Et.totalWidth+"px"}}]},$n=function(ct,vt){var Et=vt.cell;return[ct,{style:{boxSizing:"border-box",flex:Et.column.totalFlexWidth+" 0 auto",minWidth:Et.column.totalMinWidth+"px",width:Et.column.totalWidth+"px"}}]},Un=function(ct,vt){var Et=vt.column;return[ct,{style:{boxSizing:"border-box",flex:Et.totalFlexWidth?Et.totalFlexWidth+" 0 auto":void 0,minWidth:Et.totalMinWidth+"px",width:Et.totalWidth+"px"}}]};function Fn(ct){ct.stateReducers.push(Yn),ct.getTableProps.push(Pn),ct.getHeaderProps.push(Gn),ct.getRowProps.push(qn)}me.columnStartResizing="columnStartResizing",me.columnResizing="columnResizing",me.columnDoneResizing="columnDoneResizing",me.resetResize="resetResize",Fn.pluginName="useGridLayout";var Pn=function(ct,vt){var Et=vt.instance;return[ct,{style:{display:"grid",gridTemplateColumns:Et.visibleColumns.map(function(_t){var Ut;return Et.state.gridLayout.columnWidths[_t.id]?Et.state.gridLayout.columnWidths[_t.id]+"px":(Ut=Et.state.columnResizing)!=null&&Ut.isResizingColumn?Et.state.gridLayout.startWidths[_t.id]+"px":typeof _t.width=="number"?_t.width+"px":_t.width}).join(" ")}}]},Gn=function(ct,vt){var Et=vt.column;return[ct,{id:"header-cell-"+Et.id,style:{position:"sticky",gridColumn:"span "+Et.totalVisibleHeaderCount}}]},qn=function(ct,vt){var Et=vt.row;return Et.isExpanded?[ct,{style:{gridColumn:"1 / "+(Et.cells.length+1)}}]:[ct,{}]};function Yn(ct,vt,Et,_t){if(vt.type===me.init)return Ae({gridLayout:{columnWidths:{}}},ct);if(vt.type===me.resetResize)return Ae({},ct,{gridLayout:{columnWidths:{}}});if(vt.type===me.columnStartResizing){var Ut=vt.columnId,Nt=vt.headerIdWidths,Qt=Qn(Ut);if(Qt!==void 0){var cr=_t.visibleColumns.reduce(function(Tr,qr){var Nr;return Ae({},Tr,((Nr={})[qr.id]=Qn(qr.id),Nr))},{}),pr=_t.visibleColumns.reduce(function(Tr,qr){var Nr;return Ae({},Tr,((Nr={})[qr.id]=qr.minWidth,Nr))},{}),gr=_t.visibleColumns.reduce(function(Tr,qr){var Nr;return Ae({},Tr,((Nr={})[qr.id]=qr.maxWidth,Nr))},{}),Br=Nt.map(function(Tr){var qr=Tr[0];return[qr,Qn(qr)]});return Ae({},ct,{gridLayout:Ae({},ct.gridLayout,{startWidths:cr,minWidths:pr,maxWidths:gr,headerIdGridWidths:Br,columnWidth:Qt})})}return ct}if(vt.type===me.columnResizing){var wr=vt.clientX,Cr=ct.columnResizing.startX,vr=ct.gridLayout,Sr=vr.columnWidth,Ir=vr.minWidths,$r=vr.maxWidths,Or=vr.headerIdGridWidths,zr=(wr-Cr)/Sr,Dr={};return(Or===void 0?[]:Or).forEach(function(Tr){var qr=Tr[0],Nr=Tr[1];Dr[qr]=Math.min(Math.max(Ir[qr],Nr+Nr*zr),$r[qr])}),Ae({},ct,{gridLayout:Ae({},ct.gridLayout,{columnWidths:Ae({},ct.gridLayout.columnWidths,{},Dr)})})}return vt.type===me.columnDoneResizing?Ae({},ct,{gridLayout:Ae({},ct.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function Qn(ct){var vt,Et=(vt=document.getElementById("header-cell-"+ct))==null?void 0:vt.offsetWidth;if(Et!==void 0)return Et}ne._UNSTABLE_usePivotColumns=dn,ne.actions=me,ne.defaultColumn=Se,ne.defaultGroupByFn=Lr,ne.defaultOrderByFn=pn,ne.defaultRenderer=ge,ne.emptyRenderer=ye,ne.ensurePluginOrder=je,ne.flexRender=rt,ne.functionalUpdate=Ke,ne.loopHooks=ke,ne.makePropGetter=Ne,ne.makeRenderer=Je,ne.reduceHooks=$e,ne.safeUseLayoutEffect=ze,ne.useAbsoluteLayout=ri,ne.useAsyncDebounce=function(ct,vt){vt===void 0&&(vt=0);var Et=oe.useRef({}),_t=Ye(ct),Ut=Ye(vt);return oe.useCallback(function(){var Nt=ue(regeneratorRuntime.mark(function Qt(){var cr,pr,gr,Br=arguments;return regeneratorRuntime.wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:for(cr=Br.length,pr=new Array(cr),gr=0;gr<cr;gr++)pr[gr]=Br[gr];return Et.current.promise||(Et.current.promise=new Promise(function(Cr,vr){Et.current.resolve=Cr,Et.current.reject=vr})),Et.current.timeout&&clearTimeout(Et.current.timeout),Et.current.timeout=setTimeout(ue(regeneratorRuntime.mark(function Cr(){return regeneratorRuntime.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return delete Et.current.timeout,vr.prev=1,vr.t0=Et.current,vr.next=5,_t().apply(void 0,pr);case 5:vr.t1=vr.sent,vr.t0.resolve.call(vr.t0,vr.t1),vr.next=12;break;case 9:vr.prev=9,vr.t2=vr.catch(1),Et.current.reject(vr.t2);case 12:return vr.prev=12,delete Et.current.promise,vr.finish(12);case 15:case"end":return vr.stop()}},Cr,null,[[1,9,12,15]])})),Ut()),wr.abrupt("return",Et.current.promise);case 5:case"end":return wr.stop()}},Qt)}));return function(){return Nt.apply(this,arguments)}}(),[_t,Ut])},ne.useBlockLayout=fi,ne.useColumnOrder=ei,ne.useExpanded=Tt,ne.useFilters=Yt,ne.useFlexLayout=di,ne.useGetLatest=Ye,ne.useGlobalFilter=zt,ne.useGridLayout=Fn,ne.useGroupBy=fr,ne.useMountedLayoutEffect=Xe,ne.usePagination=Xr,ne.useResizeColumns=ui,ne.useRowSelect=ai,ne.useRowState=ci,ne.useSortBy=Gr,ne.useTable=function(ct){for(var vt=arguments.length,Et=new Array(vt>1?vt-1:0),_t=1;_t<vt;_t++)Et[_t-1]=arguments[_t];ct=Rt(ct),Et=[mt].concat(Et);var Ut=oe.useRef({}),Nt=Ye(Ut.current);Object.assign(Nt(),Ae({},ct,{plugins:Et,hooks:pt()})),Et.filter(Boolean).forEach(function(Ur){Ur(Nt().hooks)});var Qt=Ye(Nt().hooks);Nt().getHooks=Qt,delete Nt().hooks,Object.assign(Nt(),$e(Qt().useOptions,Rt(ct)));var cr=Nt(),pr=cr.data,gr=cr.columns,Br=cr.initialState,wr=cr.defaultColumn,Cr=cr.getSubRows,vr=cr.getRowId,Sr=cr.stateReducer,Ir=cr.useControlledState,$r=Ye(Sr),Or=oe.useCallback(function(Ur,Mn){if(!Mn.type)throw console.info({action:Mn}),new Error("Unknown Action ");return[].concat(Qt().stateReducers,Array.isArray($r())?$r():[$r()]).reduce(function(Dn,jn){return jn(Dn,Mn,Ur,Nt())||Dn},Ur)},[Qt,$r,Nt]),zr=oe.useReducer(Or,void 0,function(){return Or(Br,{type:me.init})}),Dr=zr[0],Tr=zr[1],qr=$e([].concat(Qt().useControlledState,[Ir]),Dr,{instance:Nt()});Object.assign(Nt(),{state:qr,dispatch:Tr});var Nr=oe.useMemo(function(){return Ze($e(Qt().columns,gr,{instance:Nt()}))},[Qt,Nt,gr].concat($e(Qt().columnsDeps,[],{instance:Nt()})));Nt().columns=Nr;var jr=oe.useMemo(function(){return $e(Qt().allColumns,et(Nr),{instance:Nt()}).map(nt)},[Nr,Qt,Nt].concat($e(Qt().allColumnsDeps,[],{instance:Nt()})));Nt().allColumns=jr;var An=oe.useMemo(function(){for(var Ur=[],Mn=[],Dn={},jn=[].concat(jr);jn.length;){var Ln=jn.shift();Dt({data:pr,rows:Ur,flatRows:Mn,rowsById:Dn,column:Ln,getRowId:vr,getSubRows:Cr,accessValueHooks:Qt().accessValue,getInstance:Nt})}return[Ur,Mn,Dn]},[jr,pr,vr,Cr,Qt,Nt]),kr=An[0],Hr=An[1],Tn=An[2];Object.assign(Nt(),{rows:kr,initialRows:[].concat(kr),flatRows:Hr,rowsById:Tn}),ke(Qt().useInstanceAfterData,Nt());var Vr=oe.useMemo(function(){return $e(Qt().visibleColumns,jr,{instance:Nt()}).map(function(Ur){return Ge(Ur,wr)})},[Qt,jr,Nt,wr].concat($e(Qt().visibleColumnsDeps,[],{instance:Nt()})));jr=oe.useMemo(function(){var Ur=[].concat(Vr);return jr.forEach(function(Mn){Ur.find(function(Dn){return Dn.id===Mn.id})||Ur.push(Mn)}),Ur},[jr,Vr]),Nt().allColumns=jr;var _n=oe.useMemo(function(){return $e(Qt().headerGroups,ve(Vr,wr),Nt())},[Qt,Vr,wr,Nt].concat($e(Qt().headerGroupsDeps,[],{instance:Nt()})));Nt().headerGroups=_n;var En=oe.useMemo(function(){return _n.length?_n[0].headers:[]},[_n]);Nt().headers=En,Nt().flatHeaders=_n.reduce(function(Ur,Mn){return[].concat(Ur,Mn.headers)},[]),ke(Qt().useInstanceBeforeDimensions,Nt());var In=Vr.filter(function(Ur){return Ur.isVisible}).map(function(Ur){return Ur.id}).sort().join("_");Vr=oe.useMemo(function(){return Vr.filter(function(Ur){return Ur.isVisible})},[Vr,In]),Nt().visibleColumns=Vr;var Fr=dr(En),mn=Fr[0],Nn=Fr[1],Hn=Fr[2];return Nt().totalColumnsMinWidth=mn,Nt().totalColumnsWidth=Nn,Nt().totalColumnsMaxWidth=Hn,ke(Qt().useInstance,Nt()),[].concat(Nt().flatHeaders,Nt().allColumns).forEach(function(Ur){Ur.render=Je(Nt(),Ur),Ur.getHeaderProps=Ne(Qt().getHeaderProps,{instance:Nt(),column:Ur}),Ur.getFooterProps=Ne(Qt().getFooterProps,{instance:Nt(),column:Ur})}),Nt().headerGroups=oe.useMemo(function(){return _n.filter(function(Ur,Mn){return Ur.headers=Ur.headers.filter(function(Dn){return Dn.headers?function jn(Ln){return Ln.filter(function(Wn){return Wn.headers?jn(Wn.headers):Wn.isVisible}).length}(Dn.headers):Dn.isVisible}),!!Ur.headers.length&&(Ur.getHeaderGroupProps=Ne(Qt().getHeaderGroupProps,{instance:Nt(),headerGroup:Ur,index:Mn}),Ur.getFooterGroupProps=Ne(Qt().getFooterGroupProps,{instance:Nt(),headerGroup:Ur,index:Mn}),!0)})},[_n,Nt,Qt]),Nt().footerGroups=[].concat(Nt().headerGroups).reverse(),Nt().prepareRow=oe.useCallback(function(Ur){Ur.getRowProps=Ne(Qt().getRowProps,{instance:Nt(),row:Ur}),Ur.allCells=jr.map(function(Mn){var Dn=Ur.values[Mn.id],jn={column:Mn,row:Ur,value:Dn};return jn.getCellProps=Ne(Qt().getCellProps,{instance:Nt(),cell:jn}),jn.render=Je(Nt(),Mn,{row:Ur,cell:jn,value:Dn}),jn}),Ur.cells=Vr.map(function(Mn){return Ur.allCells.find(function(Dn){return Dn.column.id===Mn.id})}),ke(Qt().prepareRow,Ur,{instance:Nt()})},[Qt,Nt,jr,Vr]),Nt().getTableProps=Ne(Qt().getTableProps,{instance:Nt()}),Nt().getTableBodyProps=Ne(Qt().getTableBodyProps,{instance:Nt()}),ke(Qt().useFinalInstance,Nt()),Nt()},Object.defineProperty(ne,"__esModule",{value:!0})})})(reactTable_production_min,reactTable_production_min.exports);var reactTable_production_minExports=reactTable_production_min.exports;reactTable.exports=reactTable_production_minExports;var reactTableExports=reactTable.exports;const runLocalSearch$1=(K,J)=>K.filter(ne=>searchByName(ne.Header,J)),FilterDropdown=({handleClose:K,columns:J})=>{const{t:ne}=useTranslation(),[oe,ce]=reactExports.useState([]),[ue,Ae]=reactExports.useState(""),[pe,xe]=reactExports.useState([]),[me,ge]=reactExports.useState(!1),ye=reactExports.useMemo(()=>J.filter(Xe=>!Xe.suppressHideColumn),[J]),Se=reactExports.useMemo(()=>ye.filter(Xe=>!Xe.isVisible).map(Xe=>Xe.id),[ye]);reactExports.useEffect(()=>(ce(ye),xe(Se),()=>xe([])),[Se]),reactExports.useEffect(()=>{pe.length===ye.length?ge(!1):ge(!0)},[pe,ye]);const Te=reactExports.useCallback(Xe=>{Xe.code===KeyboardCode.Escape&&K()},[K]);reactExports.useEffect(()=>(document.addEventListener("keydown",Te),()=>{document.removeEventListener("keydown",Te)}),[Te]);const Ne=(Xe="")=>{if(!Xe)return;let Je=[...pe];Je.includes(Xe)?Je=Je.filter(rt=>rt!==Xe):Je=[...Je,Xe],Je.length>0?ge(!1):ge(!0),xe(Je)},$e=Xe=>{const Je=runLocalSearch$1(ye,Xe);Ae(Xe),ce(Je)},ke=()=>{Ae(""),ce(ye)},je=()=>{xe(Se),K()},Ke=()=>{ye.forEach(Xe=>{const Je=pe.includes(Xe.id);Xe.toggleHidden(Je)}),K()},Ye=Xe=>!pe.includes(Xe),ze=()=>{switch(!0){case me:xe(ye.map(Xe=>Xe.id)),ge(!1);break;default:xe([]),ge(!0)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"filterDropdown",children:[jsxRuntimeExports.jsx(Ml,{variant:"outlined",placeholder:ne("grid.columnFilter.filterPlaceholder")||"",value:ue,onChange:$e,prefix:jsxRuntimeExports.jsx(gf$1,{}),suffix:ue?jsxRuntimeExports.jsx(Pp,{onClick:ke}):null}),jsxRuntimeExports.jsx(pF,{intermediate:!!pe.length&&pe.length!==ye.length,value:me,onChange:ze,children:ne("checkboxLabex.label")})]}),jsxRuntimeExports.jsx("div",{className:"filterDropdown__dropdownList",children:oe.map(Xe=>jsxRuntimeExports.jsx(pF,{value:Ye(Xe.id),onChange:()=>Ne(Xe.id),children:Xe.render("Header")},Xe.id))}),jsxRuntimeExports.jsxs("div",{className:"filterDropdown__buttonsContainer",children:[jsxRuntimeExports.jsx(rl,{onClick:Ke,children:ne("buttons.apply")}),jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:je,children:ne("buttons.cancel")})]})]})},container$D="_container_k0rhm_1",styles$1o={container:container$D},FilterCell=({columns:K})=>{const[J,ne]=reactExports.useState(!1),oe=reactExports.useCallback(()=>ne(!1),[]);return jsxRuntimeExports.jsx("div",{className:styles$1o.container,children:jsxRuntimeExports.jsx(X_,{open:J,onOpenChange:()=>ne(ce=>!ce),dropdownRender:()=>jsxRuntimeExports.jsx(FilterDropdown,{columns:K,handleClose:oe}),children:jsxRuntimeExports.jsx(rl,{size:"sm",variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(zB,{})})})})},FilterInput=({column:K,updateTypeState:J})=>{const{t:ne}=useTranslation(),{filterValue:oe,setFilter:ce,filteredValueMask:ue}=K,[Ae,pe]=ue||[],xe=Se=>{if(K.columnType===ValueTypesEnum$1.Bool){switch(Se.toLowerCase()){case BooleanColumnInputValueEnum.y:ce("true");break;case BooleanColumnInputValueEnum.n:ce("false");break;case"":ce("");break;default:ce(" ")}pe==null||pe(Se)}else ce(Se);ge({fn:()=>J==null?void 0:J(K,Se),value:""})},me=()=>K.columnType===ValueTypesEnum$1.Bool?Ae==null?void 0:Ae.current:oe,{debounce:ge}=useDebounce(400),ye=()=>{ce(""),K.columnType===ValueTypesEnum$1.Bool&&(pe==null||pe("")),J==null||J(K,"")};return reactExports.useEffect(()=>{if(K.columnType===ValueTypesEnum$1.Bool&&oe!==void 0){const Se=String(oe).toLowerCase();switch(Se){case"y":ce("true");break;case"n":ce("false");break;case"":ce("");break;default:ce(" ")}pe==null||pe(Se)}else ce(oe)},[]),jsxRuntimeExports.jsx("div",{className:"table-filter-input",children:jsxRuntimeExports.jsx(Ml,{placeholder:ne("shared.filterInputPlaceholder")||"",value:me()||"",onChange:xe,suffix:oe?jsxRuntimeExports.jsx(Pp,{className:"table-filter-input__cancel-icon",onClick:ye}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),className:oe?"":"table-filter-input__empty"})})},getSelectedRangeCells=(K,J,ne,oe)=>{const{cellIdSplitBy:ce,includeHeaders:ue=!1}=oe,Ae=K.filter(ye=>!ye.suppressHideColumn),pe=Object.keys(ne).map(ye=>ye.split(ce)[0]).filter((ye,Se,Te)=>Te.indexOf(ye)===Se),me=Ae.filter(ye=>ye.id&&pe.includes(ye.id)).reduce((ye,Se)=>ye.concat(toString$2(Se.Header),"	"),""),ge=J.map(ye=>Ae.filter(Se=>Se.id&&ne[`${Se.id}_${ye.index}`]).reduce((Se,Te)=>{if(Te.id&&Te.id in ye.values){const Ne=ye.values[Te.id];return Se.concat(toString$2(Ne),"	")}return Se},"")).join(`
`).trim();return ue?`${me}
${ge}`:ge},CheckboxSelectionAll=({rows:K,selectedRows:J,onSelectedCheckboxChange:ne})=>{const oe=K.every(ue=>J[ue.index]),ce=ue=>{if(ue){const Ae=K.reduce((pe,xe)=>({...pe,[xe.index]:ue}),{});return ne==null?void 0:ne(Ae)}return ne==null?void 0:ne({})};return K.length>0?jsxRuntimeExports.jsx("div",{className:"checkboxSelectionAll",children:jsxRuntimeExports.jsx(pF,{value:oe,onChange:ce})}):null},CheckboxSelection=({row:K,selectedRows:J,onSelectedCheckboxChange:ne})=>{const oe=ce=>{ce?J[K.index]=!0:delete J[K.index],ne==null||ne(J)};return jsxRuntimeExports.jsx(pF,{value:J[K.index],onChange:oe})};reactTableExports.actions.singleCellSelection="singleCellSelection";reactTableExports.actions.cellRangeSelectionStart="cellRangeSelectionStart";reactTableExports.actions.cellRangeSelecting="cellRangeSelecting";reactTableExports.actions.cellRangeSelectionEnd="cellRangeSelectionEnd";reactTableExports.actions.setSelectedCellIds="setSelectedCellIds";reactTableExports.actions.setCurrentSelectedCellIds="setCurrentSelectedCellIds";reactTableExports.actions.singleFilterCellSelection="singleFilterCellSelection";reactTableExports.actions.deselectCells="deselectCells";reactTableExports.actions.selectCellsArr="selectCellsArr";reactTableExports.actions.filterCellRangeSelecting="filterCellRangeSelecting";reactTableExports.actions.clearState="clearState";reactTableExports.actions.selectAllRowsAllCells="selectAllRowsAllCells";reactTableExports.actions.saveLeaveFilterCellsIds="saveLeaveFilterCellsIds";reactTableExports.actions.selectProvidedRowsCells="selectProvidedRowsCells";reactTableExports.actions.clearSelection="clearSelection";const defaultgetCellRangeSelectionProps=(K,{instance:J,cell:ne,row:oe})=>{var Ke,Ye;const{state:{isSelectingCells:ce},dispatch:ue}=J,{allCells:Ae}=oe,pe=Ae.findIndex(ze=>ze.column.id===ColumnNameType.FILTER),xe=(Ke=Ae[pe!==-1?pe+1:0])==null?void 0:Ke.id,me=((Ye=Ae.at(-1))==null?void 0:Ye.id)||xe,ge=(ze,Xe)=>ue({type:reactTableExports.actions.singleCellSelection,singleCell:ze,event:Xe}),ye=(ze,Xe,Je)=>ue({type:reactTableExports.actions.cellRangeSelectionStart,startCell:ze,event:Xe,rowFirstCell:Je}),Se=(ze,Xe)=>ue({type:reactTableExports.actions.cellRangeSelecting,selectingEndCell:ze,event:Xe}),Te=(ze,Xe)=>ue({type:reactTableExports.actions.cellRangeSelectionEnd,endCell:ze,event:Xe}),Ne=(ze,Xe,Je,rt)=>ue({type:reactTableExports.actions.singleFilterCellSelection,startCell:ze,endCell:Xe,row:Je,event:rt}),$e=(ze,Xe,Je)=>ue({type:reactTableExports.actions.deselectCells,startCell:ze,endCell:Xe,event:Je}),ke=(ze,Xe,Je)=>ue({type:reactTableExports.actions.filterCellRangeSelecting,endCell:ze,row:Xe,event:Je}),je=(ze,Xe)=>ue({type:reactTableExports.actions.saveLeaveFilterCellsIds,startCell:ze,endCell:Xe});return[K,{onMouseDown:ze=>{if(ze.persist(),ze.button===ButtonCode.SECONDARY){ge(ne.id,ze);return}ne.column.id===ColumnNameType.FILTER?Ne(xe,me,ne.row,ze):ye(ne.id,ze,xe)},onMouseUp:ze=>{ze.persist(),Te(ne.id,ze)},onMouseEnter:ze=>{ce&&(ze.persist(),ne.column.id===ColumnNameType.FILTER?ke(me,ne.row,ze):Se(ne.id,ze))},onMouseLeave:ze=>{ce&&(ze.persist(),ne.column.id===ColumnNameType.FILTER&&je(xe,me))},onClick:ze=>{ze.persist(),(ne.column.id===ColumnNameType.FILTER||ze.ctrlKey)&&$e(xe,me,ze)}}]},getInit=(K,J)=>{var ne;return{...K,selectedCellIds:{...(ne=J.initialState)==null?void 0:ne.selectedCellIds},isSelectingCells:!1,startCellSelection:null,endCellSelection:null,currentSelectedCellIds:{},activeRowStartCell:null,filterSelectedCellIds:{},leaveFilterRowCellsIds:{},startRowFirstCell:null,currentFilterRowCellsSelectedIds:{},cellRangeSelecting:{},freezedSelectedCellIds:{},selectedRowsIds:{},enteredFilterCellRowId:null}},getSingleCellSelection=(K,J)=>Object.keys(K.selectedCellIds).length>0&&K.selectedCellIds[J]?K:{...K,selectedCellIds:{[J]:!0},isSelectingCells:!1},getCellRangeSelectionStart=(K,J)=>{const{startCell:ne,event:oe,rowFirstCell:ce}=J;let ue=Object.assign(K.selectedCellIds,{});const Ae={...ue};return oe.ctrlKey||(ue={[ne]:!0}),{...K,selectedCellIds:{...ue},isSelectingCells:!0,startCellSelection:ne,currentSelectedCellIds:ue,startRowFirstCell:ce,freezedSelectedCellIds:Ae,selectedRowsIds:{}}},getCellRangeSelecting=(K,J,ne,oe)=>{const{selectingEndCell:ce,event:ue}=J,{state:{startCellSelection:Ae},getCellsBetweenId:pe}=ne,xe=pe(Ae,ce),me=Object.assign(K.freezedSelectedCellIds,{});let ge={...K.selectedCellIds};const ye=Object.keys(K.leaveFilterRowCellsIds),Se=()=>{ge={...ge,...xe}},Te=Ne=>{for(const $e of Ne)me[$e]||delete ge[$e]};return ye.length?ue.ctrlKey?(Te(Object.keys(K.currentFilterRowCellsSelectedIds)),Se()):ge=xe:ue.ctrlKey?(Te(Object.keys(oe.cellRangeSelecting)),Se()):ge=xe,{...K,endCellSelection:ce,currentSelectedCellIds:xe,selectedCellIds:ge,leaveFilterRowCellsIds:{},currentFilterRowCellsSelectedIds:{},cellRangeSelecting:xe,selectedRowsIds:{}}},getCellRangeSelectionEnd=(K,J)=>{const{state:{selectedCellIds:ne,currentSelectedCellIds:oe}}=J;return{...K,selectedCellIds:{...ne,...oe},isSelectingCells:!1,currentSelectedCellIds:{},startCellSelection:null,endCellSelection:null,filterSelectedCellIds:{},leaveFilterRowCellsIds:{},currentFilterRowCellsSelectedIds:{},cellRangeSelecting:{},freezedSelectedCellIds:{}}},getSelectedCellIds=(K,J)=>{const ne=reactTableExports.functionalUpdate(J.selectedCellIds,K.selectedCellIds);return{...K,selectedCellIds:ne}},getSingleFilterCellSelection=(K,J,ne)=>{const{startCell:oe,endCell:ce,row:ue,event:Ae}=J,{getCellsBetweenId:pe,getRowsBetweenId:xe,state:{currentSelectedCellIds:me,selectedRowsIds:ge},saveSelectedRow:ye}=ne;let Se=pe(oe,ce),Te=xe(oe,ce),Ne=Object.assign(K.selectedCellIds,{});const $e=Object.assign(K.selectedRowsIds,{}),ke={...Ne},je=(ze,Xe)=>{for(const Je of Xe)ze[Je]=!ze[Je],ze[Je]||delete ze[Je]};Ae.ctrlKey===!0&&(ge[ue.id]?delete $e[ue.id]:$e[ue.id]=ye(ue),Ne={...me,...Ne},je(Ne,Object.keys(Se))),Ae.shiftKey===!0&&K.activeRowStartCell&&(Se=pe(K.activeRowStartCell,ce),Te=xe(K.activeRowStartCell,ce),je(Ne,Object.keys(Se)));const Ke=Ae.ctrlKey?Ne:Se,Ye=Ae.ctrlKey?{...$e,...Te}:{[ue.id]:ye(ue),...Te};return{...K,selectedCellIds:Ke,currentSelectedCellIds:Ke,isSelectingCells:!0,startCellSelection:oe,startRowFirstCell:oe,currentFilterRowCellsSelectedIds:Se,freezedSelectedCellIds:ke,selectedRowsIds:Ye}},filterCellRangeSelecting=(K,J,ne,oe)=>{const{endCell:ce,row:ue,event:Ae}=J,{getCellsBetweenId:pe,getRowsBetweenId:xe,state:{selectedCellIds:me,selectedRowsIds:ge},saveSelectedRow:ye}=oe;ge[ue.id]&&ne.enteredFilterCellRowId&&ue.id!==ne.enteredFilterCellRowId&&delete ge[ne.enteredFilterCellRowId];const Se=pe(K.startRowFirstCell||K.startCellSelection,ce),Te=xe(K.startRowFirstCell||K.startCellSelection,ce);let Ne={...Se};const $e=Object.assign(K.freezedSelectedCellIds,{});if(Ae.ctrlKey===!0){const ke={...me};let je=Object.keys(ne.currentFilterRowCellsSelectedIds);je.length===0&&(je=Object.keys(K.cellRangeSelecting));for(const Ke of je)!Se[Ke]&&!$e[Ke]&&delete ke[Ke];Ne={...ke,...Se}}return{...K,selectedCellIds:Ne,currentSelectedCellIds:Ne,endCellSelection:ce,filterSelectedCellIds:Se,currentFilterRowCellsSelectedIds:{...K.currentFilterRowCellsSelectedIds,...Se},enteredFilterCellRowId:ue.id,selectedRowsIds:{[ue.id]:ye(ue),...Te}}},saveLeaveFilterCellsIds=(K,J,ne)=>{const{startCell:oe,endCell:ce}=J,{getCellsBetweenId:ue}=ne,Ae=ue(oe,ce);return{...K,leaveFilterRowCellsIds:Ae}},deselectCells=(K,J,ne)=>{const{startCell:oe,endCell:ce,event:ue}=J,{getCellsBetweenId:Ae}=ne,pe=Ae(oe,ce),xe=Object.assign(K.selectedCellIds,{});if(ue.target.tagName==="INPUT"){const me=Object.keys(pe);for(const ge of me)ue.target.checked?xe[ge]=!0:delete xe[ge]}return{...K,selectedCellIds:xe,isSelectingCells:!1,currentSelectedCellIds:{},startCellSelection:null,endCellSelection:null}},selectCellsArr=(K,J,ne)=>{const{startCell:oe,endCell:ce}=J,{getCellsBetweenId:ue}=ne,Ae=ue(oe,ce);return{...K,selectedCellIds:Ae,isSelectingCells:!1,currentSelectedCellIds:Ae,startCellSelection:oe,endCellSelection:ce}},clearState=K=>({...K,selectedCellIds:{},isSelectingCells:!1,currentSelectedCellIds:{},startCellSelection:null,endCellSelection:null,currentFilterRowCellsSelectedIds:{},cellRangeSelecting:{},freezedSelectedCellIds:{}}),selectAllRowsAllCells=(K,J)=>{var pe,xe;const{getCellsBetweenId:ne,preSortedFlatRows:oe=[]}=J,ce=oe[0].allCells[1].id,ue=((xe=(pe=oe.at(-1))==null?void 0:pe.allCells.at(-1))==null?void 0:xe.id)||ce,Ae=ne(ce,ue);return{...K,selectedCellIds:Ae,isSelectingCells:!1,currentSelectedCellIds:{},startCellSelection:null,endCellSelection:null}},setCurrentSelectedCellIds=(K,J)=>({...K,currentSelectedCellIds:J}),selectProvidedRowsCells=(K,J)=>({...K,selectedCellIds:J,isSelectingCells:!1,currentSelectedCellIds:J}),getClearedSelection=K=>({...K,selectedCellIds:{}});function reducer$4(K,J,ne,oe){switch(J.type){case reactTableExports.actions.init:return getInit(K,oe);case reactTableExports.actions.singleCellSelection:return getSingleCellSelection(K,J.singleCell);case reactTableExports.actions.cellRangeSelectionStart:return getCellRangeSelectionStart(K,J);case reactTableExports.actions.cellRangeSelecting:return getCellRangeSelecting(K,J,oe,ne);case reactTableExports.actions.cellRangeSelectionEnd:return getCellRangeSelectionEnd(K,oe);case reactTableExports.actions.setSelectedCellIds:return getSelectedCellIds(K,J);case reactTableExports.actions.singleFilterCellSelection:return getSingleFilterCellSelection(K,J,oe);case reactTableExports.actions.filterCellRangeSelecting:return filterCellRangeSelecting(K,J,ne,oe);case reactTableExports.actions.saveLeaveFilterCellsIds:return saveLeaveFilterCellsIds(K,J,oe);case reactTableExports.actions.deselectCells:return deselectCells(K,J,oe);case reactTableExports.actions.selectCellsArr:return selectCellsArr(K,J,oe);case reactTableExports.actions.clearState:return clearState(K);case reactTableExports.actions.selectAllRowsAllCells:return selectAllRowsAllCells(K,oe);case reactTableExports.actions.setCurrentSelectedCellIds:return setCurrentSelectedCellIds(K,J.selectedCellIds);case reactTableExports.actions.selectProvidedRowsCells:return selectProvidedRowsCells(K,J.selectedCellIds);case reactTableExports.actions.clearSelection:return getClearedSelection(K);default:return}}function useInstance$2(K){const{dispatch:J,allColumns:ne,rows:oe,state:ce}=K,ue=reactExports.useMemo(()=>({}),[]),pe=K.cellIdSplitBy||"_";Object.assign(K,{cellIdSplitBy:pe});const xe=reactExports.useCallback(ze=>J({type:reactTableExports.actions.setSelectedCellIds,selectedCellIds:ze}),[J]),me=reactExports.useCallback(ze=>J({type:reactTableExports.actions.setCurrentSelectedCellIds,selectedCellIds:ze}),[J]),ge=reactExports.useCallback((ze,Xe)=>{if(!ue[ze]||!ue[Xe])return null;const Je=[ue[ze].row.index,ue[Xe].row.index],rt=[];ne.forEach((Ge,ve)=>{(Ge.id===ue[ze].column.id||Ge.id===ue[Xe].column.id)&&rt.push(ve)});const Ze=[],et=[];for(let Ge=Math.min(...rt);Ge<=Math.max(...rt);Ge+=1)Ze.push(ne[Ge].id);for(let Ge=Math.min(...Je);Ge<=Math.max(...Je);Ge+=1)et.push(oe[Ge].index);const nt={};if(et.length&&Ze.length)for(const Ge of et)for(const ve of Ze){const Be=`${ve}${pe}${Ge}`,Re=ue[Be];nt[Re.id]=!0}return nt},[ne,ue,pe,oe]),ye=ze=>({_key:ze.original._key,_t:ze.original._t,allCells:ze.allCells.map(Xe=>Xe.id).filter(Xe=>!Xe.includes("filter"))}),Se=reactExports.useCallback((ze,Xe)=>{if(!ue[ze]||!ue[Xe])return null;const Je=[ue[ze].row.index,ue[Xe].row.index],rt=[];ne.forEach((Ge,ve)=>{(Ge.id===ue[ze].column.id||Ge.id===ue[Xe].column.id)&&rt.push(ve)});const Ze=[],et=[];for(let Ge=Math.min(...rt);Ge<=Math.max(...rt);Ge+=1)Ze.push(ne[Ge].id);for(let Ge=Math.min(...Je);Ge<=Math.max(...Je);Ge+=1)et.push(oe[Ge].index);const nt={};if(et.length&&Ze.length)for(const Ge of et)for(const ve of Ze){const Be=`${ve}${pe}${Ge}`,Re=ue[Be];nt[Re.row.id]=ye(Re.row)}return nt},[ne,ue,pe,oe]);Object.assign(K,{getCellsBetweenId:ge,getRowsBetweenId:Se,cellsById:ue,setSelectedCellIds:xe,setCurrentSelectedCellIds:me,rewriteActiveRowStartCell:ze=>{ce.activeRowStartCell=ze},selectNewCellsArr:(ze,Xe)=>{J({type:reactTableExports.actions.selectCellsArr,startCell:ze,endCell:Xe})},clearCellSelectionState:()=>{J({type:reactTableExports.actions.clearState})},selectAllRowsAllCells:()=>{J({type:reactTableExports.actions.selectAllRowsAllCells})},saveSelectedRow:ye,changeSelectedCell:ze=>{ce.selectedCellIds=ze},selectProvidedRowsCells:ze=>{const Xe=ze.reduce((Je,rt)=>(rt.allCells.forEach(Ze=>{Ze.id.includes(ColumnNameType.FILTER)||(Je[Ze.id]=!0)}),Je),{});J({type:reactTableExports.actions.selectProvidedRowsCells,selectedCellIds:Xe})},clearSelection:()=>{J({type:reactTableExports.actions.clearSelection})}})}function prepareRow(K,{instance:{cellsById:J,cellIdSplitBy:ne},instance:oe}){K.allCells.forEach(ce=>{Object.assign(ce,{id:`${ce.column.id}${ne}${K.index}`,getCellRangeSelectionProps:reactTableExports.makePropGetter(oe.getHooks().getCellRangeSelectionProps,{instance:oe,row:K,cell:ce})}),Object.assign(J,{[ce.id]:ce})})}const useCellRangeSelection=K=>{Object.assign(K,{getCellRangeSelectionProps:[defaultgetCellRangeSelectionProps]}),K.stateReducers.push(reducer$4),K.useInstance.push(useInstance$2),K.prepareRow.push(prepareRow)};useCellRangeSelection.pluginName="useCellRangeSelection";reactTableExports.actions.updateSelectedRowsPerPageState="updateSelectedRowsPerPageState";reactTableExports.actions.deletePreviousKey="deletePreviousKey";function reducer$3(K,J){if(J.type===reactTableExports.actions.init)return{...K,selectedRowsPerPageState:{}};if(J.type===reactTableExports.actions.updateSelectedRowsPerPageState){const{newState:ne}=J;return{...K,selectedRowsPerPageState:ne}}if(J.type===reactTableExports.actions.deletePreviousKey){const{oldKey:ne}=J,{selectedRowsPerPageState:oe}=K,ce=structuredClone(oe);return delete ce[ne],{...K,selectedRowsPerPageState:ce}}}function useInstance$1(K){const{dispatch:J}=K;Object.assign(K,{updateSelectedRowsPerPageState:ce=>{J({type:reactTableExports.actions.updateSelectedRowsPerPageState,newState:ce})},deletePrevSelectedCheckbox:ce=>{J({type:reactTableExports.actions.deletePreviousKey,oldKey:ce})}})}const useFilterColumnCheckBox=K=>{K.stateReducers.push(reducer$3),K.useInstance.push(useInstance$1)};useFilterColumnCheckBox.pluginName="useFilterColumnCheckBox";function areInputsEqual$1(K,J){if(K.length!==J.length)return!1;for(var ne=0;ne<K.length;ne++)if(K[ne]!==J[ne])return!1;return!0}function useMemoOne(K,J){var ne=reactExports.useState(function(){return{inputs:J,result:K()}})[0],oe=reactExports.useRef(!0),ce=reactExports.useRef(ne),ue=oe.current||!!(J&&ce.current.inputs&&areInputsEqual$1(J,ce.current.inputs)),Ae=ue?ce.current:{inputs:J,result:K()};return reactExports.useEffect(function(){oe.current=!1,ce.current=Ae},[Ae]),Ae.result}function useCallbackOne(K,J){return useMemoOne(function(){return K},J)}var useMemo=useMemoOne,useCallback=useCallbackOne,getRect=function(J){var ne=J.top,oe=J.right,ce=J.bottom,ue=J.left,Ae=oe-ue,pe=ce-ne,xe={top:ne,right:oe,bottom:ce,left:ue,width:Ae,height:pe,x:ue,y:ne,center:{x:(oe+ue)/2,y:(ce+ne)/2}};return xe},expand=function(J,ne){return{top:J.top-ne.top,left:J.left-ne.left,bottom:J.bottom+ne.bottom,right:J.right+ne.right}},shrink=function(J,ne){return{top:J.top+ne.top,left:J.left+ne.left,bottom:J.bottom-ne.bottom,right:J.right-ne.right}},shift=function(J,ne){return{top:J.top+ne.y,left:J.left+ne.x,bottom:J.bottom+ne.y,right:J.right+ne.x}},noSpacing$1={top:0,right:0,bottom:0,left:0},createBox=function(J){var ne=J.borderBox,oe=J.margin,ce=oe===void 0?noSpacing$1:oe,ue=J.border,Ae=ue===void 0?noSpacing$1:ue,pe=J.padding,xe=pe===void 0?noSpacing$1:pe,me=getRect(expand(ne,ce)),ge=getRect(shrink(ne,Ae)),ye=getRect(shrink(ge,xe));return{marginBox:me,borderBox:getRect(ne),paddingBox:ge,contentBox:ye,margin:ce,border:Ae,padding:xe}},parse$1=function(J){var ne=J.slice(0,-2),oe=J.slice(-2);if(oe!=="px")return 0;var ce=Number(ne);return isNaN(ce)&&invariant$1(!1),ce},getWindowScroll$1=function(){return{x:window.pageXOffset,y:window.pageYOffset}},offset=function(J,ne){var oe=J.borderBox,ce=J.border,ue=J.margin,Ae=J.padding,pe=shift(oe,ne);return createBox({borderBox:pe,border:ce,margin:ue,padding:Ae})},withScroll=function(J,ne){return ne===void 0&&(ne=getWindowScroll$1()),offset(J,ne)},calculateBox=function(J,ne){var oe={top:parse$1(ne.marginTop),right:parse$1(ne.marginRight),bottom:parse$1(ne.marginBottom),left:parse$1(ne.marginLeft)},ce={top:parse$1(ne.paddingTop),right:parse$1(ne.paddingRight),bottom:parse$1(ne.paddingBottom),left:parse$1(ne.paddingLeft)},ue={top:parse$1(ne.borderTopWidth),right:parse$1(ne.borderRightWidth),bottom:parse$1(ne.borderBottomWidth),left:parse$1(ne.borderLeftWidth)};return createBox({borderBox:J,margin:oe,padding:ce,border:ue})},getBox=function(J){var ne=J.getBoundingClientRect(),oe=window.getComputedStyle(J);return calculateBox(ne,oe)},safeIsNaN=Number.isNaN||function(J){return typeof J=="number"&&J!==J};function isEqual$3(K,J){return!!(K===J||safeIsNaN(K)&&safeIsNaN(J))}function areInputsEqual(K,J){if(K.length!==J.length)return!1;for(var ne=0;ne<K.length;ne++)if(!isEqual$3(K[ne],J[ne]))return!1;return!0}function memoizeOne(K,J){J===void 0&&(J=areInputsEqual);var ne=null;function oe(){for(var ce=[],ue=0;ue<arguments.length;ue++)ce[ue]=arguments[ue];if(ne&&ne.lastThis===this&&J(ce,ne.lastArgs))return ne.lastResult;var Ae=K.apply(this,ce);return ne={lastResult:Ae,lastArgs:ce,lastThis:this},Ae}return oe.clear=function(){ne=null},oe}var rafSchd=function(J){var ne=[],oe=null,ce=function(){for(var Ae=arguments.length,pe=new Array(Ae),xe=0;xe<Ae;xe++)pe[xe]=arguments[xe];ne=pe,!oe&&(oe=requestAnimationFrame(function(){oe=null,J.apply(void 0,ne)}))};return ce.cancel=function(){oe&&(cancelAnimationFrame(oe),oe=null)},ce};function log(K,J){}log.bind(null,"warn");log.bind(null,"error");function noop$2$1(){}function getOptions(K,J){return{...K,...J}}function bindEvents(K,J,ne){const oe=J.map(ce=>{const ue=getOptions(ne,ce.options);return K.addEventListener(ce.eventName,ce.fn,ue),function(){K.removeEventListener(ce.eventName,ce.fn,ue)}});return function(){oe.forEach(ue=>{ue()})}}const prefix$1="Invariant failed";class RbdInvariant extends Error{}RbdInvariant.prototype.toString=function(){return this.message};function invariant(K,J){throw new RbdInvariant(prefix$1)}class ErrorBoundary extends Wt.Component{constructor(...J){super(...J),this.callbacks=null,this.unbind=noop$2$1,this.onWindowError=ne=>{const oe=this.getCallbacks();oe.isDragging()&&oe.tryAbort(),ne.error instanceof RbdInvariant&&ne.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=ne=>{this.callbacks=ne}}componentDidMount(){this.unbind=bindEvents(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(J){if(J instanceof RbdInvariant){this.setState({});return}throw J}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const dragHandleUsageInstructions=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,position$1=K=>K+1,onDragStart=K=>`
  You have lifted an item in position ${position$1(K.source.index)}
`,withLocation=(K,J)=>{const ne=K.droppableId===J.droppableId,oe=position$1(K.index),ce=position$1(J.index);return ne?`
      You have moved the item from position ${oe}
      to position ${ce}
    `:`
    You have moved the item from position ${oe}
    in list ${K.droppableId}
    to list ${J.droppableId}
    in position ${ce}
  `},withCombine=(K,J,ne)=>J.droppableId===ne.droppableId?`
      The item ${K}
      has been combined with ${ne.draggableId}`:`
      The item ${K}
      in list ${J.droppableId}
      has been combined with ${ne.draggableId}
      in list ${ne.droppableId}
    `,onDragUpdate=K=>{const J=K.destination;if(J)return withLocation(K.source,J);const ne=K.combine;return ne?withCombine(K.draggableId,K.source,ne):"You are over an area that cannot be dropped on"},returnedToStart=K=>`
  The item has returned to its starting position
  of ${position$1(K.index)}
`,onDragEnd=K=>{if(K.reason==="CANCEL")return`
      Movement cancelled.
      ${returnedToStart(K.source)}
    `;const J=K.destination,ne=K.combine;return J?`
      You have dropped the item.
      ${withLocation(K.source,J)}
    `:ne?`
      You have dropped the item.
      ${withCombine(K.draggableId,K.source,ne)}
    `:`
    The item has been dropped while not over a drop area.
    ${returnedToStart(K.source)}
  `},preset={dragHandleUsageInstructions,onDragStart,onDragUpdate,onDragEnd};var preset$1=preset;const origin={x:0,y:0},add$1=(K,J)=>({x:K.x+J.x,y:K.y+J.y}),subtract=(K,J)=>({x:K.x-J.x,y:K.y-J.y}),isEqual$1=(K,J)=>K.x===J.x&&K.y===J.y,negate=K=>({x:K.x!==0?-K.x:0,y:K.y!==0?-K.y:0}),patch=(K,J,ne=0)=>K==="x"?{x:J,y:ne}:{x:ne,y:J},distance$2=(K,J)=>Math.sqrt((J.x-K.x)**2+(J.y-K.y)**2),closest$1=(K,J)=>Math.min(...J.map(ne=>distance$2(K,ne))),apply=K=>J=>({x:K(J.x),y:K(J.y)});var executeClip=(K,J)=>{const ne=getRect({top:Math.max(J.top,K.top),right:Math.min(J.right,K.right),bottom:Math.min(J.bottom,K.bottom),left:Math.max(J.left,K.left)});return ne.width<=0||ne.height<=0?null:ne};const offsetByPosition=(K,J)=>({top:K.top+J.y,left:K.left+J.x,bottom:K.bottom+J.y,right:K.right+J.x}),getCorners=K=>[{x:K.left,y:K.top},{x:K.right,y:K.top},{x:K.left,y:K.bottom},{x:K.right,y:K.bottom}],noSpacing={top:0,right:0,bottom:0,left:0},scroll$1=(K,J)=>J?offsetByPosition(K,J.scroll.diff.displacement):K,increase=(K,J,ne)=>ne&&ne.increasedBy?{...K,[J.end]:K[J.end]+ne.increasedBy[J.line]}:K,clip=(K,J)=>J&&J.shouldClipSubject?executeClip(J.pageMarginBox,K):getRect(K);var getSubject=({page:K,withPlaceholder:J,axis:ne,frame:oe})=>{const ce=scroll$1(K.marginBox,oe),ue=increase(ce,ne,J),Ae=clip(ue,oe);return{page:K,withPlaceholder:J,active:Ae}},scrollDroppable=(K,J)=>{K.frame||invariant();const ne=K.frame,oe=subtract(J,ne.scroll.initial),ce=negate(oe),ue={...ne,scroll:{initial:ne.scroll.initial,current:J,diff:{value:oe,displacement:ce},max:ne.scroll.max}},Ae=getSubject({page:K.subject.page,withPlaceholder:K.subject.withPlaceholder,axis:K.axis,frame:ue});return{...K,frame:ue,subject:Ae}};const toDroppableMap=memoizeOne(K=>K.reduce((J,ne)=>(J[ne.descriptor.id]=ne,J),{})),toDraggableMap=memoizeOne(K=>K.reduce((J,ne)=>(J[ne.descriptor.id]=ne,J),{})),toDroppableList=memoizeOne(K=>Object.values(K)),toDraggableList=memoizeOne(K=>Object.values(K));var getDraggablesInsideDroppable=memoizeOne((K,J)=>toDraggableList(J).filter(oe=>K===oe.descriptor.droppableId).sort((oe,ce)=>oe.descriptor.index-ce.descriptor.index));function tryGetDestination(K){return K.at&&K.at.type==="REORDER"?K.at.destination:null}function tryGetCombine(K){return K.at&&K.at.type==="COMBINE"?K.at.combine:null}var removeDraggableFromList=memoizeOne((K,J)=>J.filter(ne=>ne.descriptor.id!==K.descriptor.id)),moveToNextCombine=({isMovingForward:K,draggable:J,destination:ne,insideDestination:oe,previousImpact:ce})=>{if(!ne.isCombineEnabled||!tryGetDestination(ce))return null;function Ae(Te){const Ne={type:"COMBINE",combine:{draggableId:Te,droppableId:ne.descriptor.id}};return{...ce,at:Ne}}const pe=ce.displaced.all,xe=pe.length?pe[0]:null;if(K)return xe?Ae(xe):null;const me=removeDraggableFromList(J,oe);if(!xe){if(!me.length)return null;const Te=me[me.length-1];return Ae(Te.descriptor.id)}const ge=me.findIndex(Te=>Te.descriptor.id===xe);ge===-1&&invariant();const ye=ge-1;if(ye<0)return null;const Se=me[ye];return Ae(Se.descriptor.id)},isHomeOf=(K,J)=>K.descriptor.droppableId===J.descriptor.id;const noDisplacedBy={point:origin,value:0},emptyGroups={invisible:{},visible:{},all:[]},noImpact={displaced:emptyGroups,displacedBy:noDisplacedBy,at:null};var noImpact$1=noImpact,isWithin=(K,J)=>ne=>K<=ne&&ne<=J,isPartiallyVisibleThroughFrame=K=>{const J=isWithin(K.top,K.bottom),ne=isWithin(K.left,K.right);return oe=>{if(J(oe.top)&&J(oe.bottom)&&ne(oe.left)&&ne(oe.right))return!0;const ue=J(oe.top)||J(oe.bottom),Ae=ne(oe.left)||ne(oe.right);if(ue&&Ae)return!0;const xe=oe.top<K.top&&oe.bottom>K.bottom,me=oe.left<K.left&&oe.right>K.right;return xe&&me?!0:xe&&Ae||me&&ue}},isTotallyVisibleThroughFrame=K=>{const J=isWithin(K.top,K.bottom),ne=isWithin(K.left,K.right);return oe=>J(oe.top)&&J(oe.bottom)&&ne(oe.left)&&ne(oe.right)};const vertical={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},horizontal={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var isTotallyVisibleThroughFrameOnAxis=K=>J=>{const ne=isWithin(J.top,J.bottom),oe=isWithin(J.left,J.right);return ce=>K===vertical?ne(ce.top)&&ne(ce.bottom):oe(ce.left)&&oe(ce.right)};const getDroppableDisplaced=(K,J)=>{const ne=J.frame?J.frame.scroll.diff.displacement:origin;return offsetByPosition(K,ne)},isVisibleInDroppable=(K,J,ne)=>J.subject.active?ne(J.subject.active)(K):!1,isVisibleInViewport=(K,J,ne)=>ne(J)(K),isVisible$1=({target:K,destination:J,viewport:ne,withDroppableDisplacement:oe,isVisibleThroughFrameFn:ce})=>{const ue=oe?getDroppableDisplaced(K,J):K;return isVisibleInDroppable(ue,J,ce)&&isVisibleInViewport(ue,ne,ce)},isPartiallyVisible=K=>isVisible$1({...K,isVisibleThroughFrameFn:isPartiallyVisibleThroughFrame}),isTotallyVisible=K=>isVisible$1({...K,isVisibleThroughFrameFn:isTotallyVisibleThroughFrame}),isTotallyVisibleOnAxis=K=>isVisible$1({...K,isVisibleThroughFrameFn:isTotallyVisibleThroughFrameOnAxis(K.destination.axis)}),getShouldAnimate=(K,J,ne)=>{if(typeof ne=="boolean")return ne;if(!J)return!0;const{invisible:oe,visible:ce}=J;if(oe[K])return!1;const ue=ce[K];return ue?ue.shouldAnimate:!0};function getTarget(K,J){const ne=K.page.marginBox,oe={top:J.point.y,right:0,bottom:0,left:J.point.x};return getRect(expand(ne,oe))}function getDisplacementGroups({afterDragging:K,destination:J,displacedBy:ne,viewport:oe,forceShouldAnimate:ce,last:ue}){return K.reduce(function(pe,xe){const me=getTarget(xe,ne),ge=xe.descriptor.id;if(pe.all.push(ge),!isPartiallyVisible({target:me,destination:J,viewport:oe,withDroppableDisplacement:!0}))return pe.invisible[xe.descriptor.id]=!0,pe;const Se=getShouldAnimate(ge,ue,ce),Te={draggableId:ge,shouldAnimate:Se};return pe.visible[ge]=Te,pe},{all:[],visible:{},invisible:{}})}function getIndexOfLastItem(K,J){if(!K.length)return 0;const ne=K[K.length-1].descriptor.index;return J.inHomeList?ne:ne+1}function goAtEnd({insideDestination:K,inHomeList:J,displacedBy:ne,destination:oe}){const ce=getIndexOfLastItem(K,{inHomeList:J});return{displaced:emptyGroups,displacedBy:ne,at:{type:"REORDER",destination:{droppableId:oe.descriptor.id,index:ce}}}}function calculateReorderImpact({draggable:K,insideDestination:J,destination:ne,viewport:oe,displacedBy:ce,last:ue,index:Ae,forceShouldAnimate:pe}){const xe=isHomeOf(K,ne);if(Ae==null)return goAtEnd({insideDestination:J,inHomeList:xe,displacedBy:ce,destination:ne});const me=J.find(Ne=>Ne.descriptor.index===Ae);if(!me)return goAtEnd({insideDestination:J,inHomeList:xe,displacedBy:ce,destination:ne});const ge=removeDraggableFromList(K,J),ye=J.indexOf(me),Se=ge.slice(ye);return{displaced:getDisplacementGroups({afterDragging:Se,destination:ne,displacedBy:ce,last:ue,viewport:oe.frame,forceShouldAnimate:pe}),displacedBy:ce,at:{type:"REORDER",destination:{droppableId:ne.descriptor.id,index:Ae}}}}function didStartAfterCritical(K,J){return!!J.effected[K]}var fromCombine=({isMovingForward:K,destination:J,draggables:ne,combine:oe,afterCritical:ce})=>{if(!J.isCombineEnabled)return null;const ue=oe.draggableId,pe=ne[ue].descriptor.index;return didStartAfterCritical(ue,ce)?K?pe:pe-1:K?pe+1:pe},fromReorder=({isMovingForward:K,isInHomeList:J,insideDestination:ne,location:oe})=>{if(!ne.length)return null;const ce=oe.index,ue=K?ce+1:ce-1,Ae=ne[0].descriptor.index,pe=ne[ne.length-1].descriptor.index,xe=J?pe:pe+1;return ue<Ae||ue>xe?null:ue},moveToNextIndex=({isMovingForward:K,isInHomeList:J,draggable:ne,draggables:oe,destination:ce,insideDestination:ue,previousImpact:Ae,viewport:pe,afterCritical:xe})=>{const me=Ae.at;if(me||invariant(),me.type==="REORDER"){const ye=fromReorder({isMovingForward:K,isInHomeList:J,location:me.destination,insideDestination:ue});return ye==null?null:calculateReorderImpact({draggable:ne,insideDestination:ue,destination:ce,viewport:pe,last:Ae.displaced,displacedBy:Ae.displacedBy,index:ye})}const ge=fromCombine({isMovingForward:K,destination:ce,displaced:Ae.displaced,draggables:oe,combine:me.combine,afterCritical:xe});return ge==null?null:calculateReorderImpact({draggable:ne,insideDestination:ue,destination:ce,viewport:pe,last:Ae.displaced,displacedBy:Ae.displacedBy,index:ge})},getCombinedItemDisplacement=({displaced:K,afterCritical:J,combineWith:ne,displacedBy:oe})=>{const ce=!!(K.visible[ne]||K.invisible[ne]);return didStartAfterCritical(ne,J)?ce?origin:negate(oe.point):ce?oe.point:origin},whenCombining=({afterCritical:K,impact:J,draggables:ne})=>{const oe=tryGetCombine(J);oe||invariant();const ce=oe.draggableId,ue=ne[ce].page.borderBox.center,Ae=getCombinedItemDisplacement({displaced:J.displaced,afterCritical:K,combineWith:ce,displacedBy:J.displacedBy});return add$1(ue,Ae)};const distanceFromStartToBorderBoxCenter=(K,J)=>J.margin[K.start]+J.borderBox[K.size]/2,distanceFromEndToBorderBoxCenter=(K,J)=>J.margin[K.end]+J.borderBox[K.size]/2,getCrossAxisBorderBoxCenter=(K,J,ne)=>J[K.crossAxisStart]+ne.margin[K.crossAxisStart]+ne.borderBox[K.crossAxisSize]/2,goAfter=({axis:K,moveRelativeTo:J,isMoving:ne})=>patch(K.line,J.marginBox[K.end]+distanceFromStartToBorderBoxCenter(K,ne),getCrossAxisBorderBoxCenter(K,J.marginBox,ne)),goBefore=({axis:K,moveRelativeTo:J,isMoving:ne})=>patch(K.line,J.marginBox[K.start]-distanceFromEndToBorderBoxCenter(K,ne),getCrossAxisBorderBoxCenter(K,J.marginBox,ne)),goIntoStart=({axis:K,moveInto:J,isMoving:ne})=>patch(K.line,J.contentBox[K.start]+distanceFromStartToBorderBoxCenter(K,ne),getCrossAxisBorderBoxCenter(K,J.contentBox,ne));var whenReordering=({impact:K,draggable:J,draggables:ne,droppable:oe,afterCritical:ce})=>{const ue=getDraggablesInsideDroppable(oe.descriptor.id,ne),Ae=J.page,pe=oe.axis;if(!ue.length)return goIntoStart({axis:pe,moveInto:oe.page,isMoving:Ae});const{displaced:xe,displacedBy:me}=K,ge=xe.all[0];if(ge){const Se=ne[ge];if(didStartAfterCritical(ge,ce))return goBefore({axis:pe,moveRelativeTo:Se.page,isMoving:Ae});const Te=offset(Se.page,me.point);return goBefore({axis:pe,moveRelativeTo:Te,isMoving:Ae})}const ye=ue[ue.length-1];if(ye.descriptor.id===J.descriptor.id)return Ae.borderBox.center;if(didStartAfterCritical(ye.descriptor.id,ce)){const Se=offset(ye.page,negate(ce.displacedBy.point));return goAfter({axis:pe,moveRelativeTo:Se,isMoving:Ae})}return goAfter({axis:pe,moveRelativeTo:ye.page,isMoving:Ae})},withDroppableDisplacement=(K,J)=>{const ne=K.frame;return ne?add$1(J,ne.scroll.diff.displacement):J};const getResultWithoutDroppableDisplacement=({impact:K,draggable:J,droppable:ne,draggables:oe,afterCritical:ce})=>{const ue=J.page.borderBox.center,Ae=K.at;return!ne||!Ae?ue:Ae.type==="REORDER"?whenReordering({impact:K,draggable:J,draggables:oe,droppable:ne,afterCritical:ce}):whenCombining({impact:K,draggables:oe,afterCritical:ce})};var getPageBorderBoxCenterFromImpact=K=>{const J=getResultWithoutDroppableDisplacement(K),ne=K.droppable;return ne?withDroppableDisplacement(ne,J):J},scrollViewport=(K,J)=>{const ne=subtract(J,K.scroll.initial),oe=negate(ne);return{frame:getRect({top:J.y,bottom:J.y+K.frame.height,left:J.x,right:J.x+K.frame.width}),scroll:{initial:K.scroll.initial,max:K.scroll.max,current:J,diff:{value:ne,displacement:oe}}}};function getDraggables$1(K,J){return K.map(ne=>J[ne])}function tryGetVisible(K,J){for(let ne=0;ne<J.length;ne++){const oe=J[ne].visible[K];if(oe)return oe}return null}var speculativelyIncrease=({impact:K,viewport:J,destination:ne,draggables:oe,maxScrollChange:ce})=>{const ue=scrollViewport(J,add$1(J.scroll.current,ce)),Ae=ne.frame?scrollDroppable(ne,add$1(ne.frame.scroll.current,ce)):ne,pe=K.displaced,xe=getDisplacementGroups({afterDragging:getDraggables$1(pe.all,oe),destination:ne,displacedBy:K.displacedBy,viewport:ue.frame,last:pe,forceShouldAnimate:!1}),me=getDisplacementGroups({afterDragging:getDraggables$1(pe.all,oe),destination:Ae,displacedBy:K.displacedBy,viewport:J.frame,last:pe,forceShouldAnimate:!1}),ge={},ye={},Se=[pe,xe,me];return pe.all.forEach(Ne=>{const $e=tryGetVisible(Ne,Se);if($e){ye[Ne]=$e;return}ge[Ne]=!0}),{...K,displaced:{all:pe.all,invisible:ge,visible:ye}}},withViewportDisplacement=(K,J)=>add$1(K.scroll.diff.displacement,J),getClientFromPageBorderBoxCenter=({pageBorderBoxCenter:K,draggable:J,viewport:ne})=>{const oe=withViewportDisplacement(ne,K),ce=subtract(oe,J.page.borderBox.center);return add$1(J.client.borderBox.center,ce)},isTotallyVisibleInNewLocation=({draggable:K,destination:J,newPageBorderBoxCenter:ne,viewport:oe,withDroppableDisplacement:ce,onlyOnMainAxis:ue=!1})=>{const Ae=subtract(ne,K.page.borderBox.center),xe={target:offsetByPosition(K.page.borderBox,Ae),destination:J,withDroppableDisplacement:ce,viewport:oe};return ue?isTotallyVisibleOnAxis(xe):isTotallyVisible(xe)},moveToNextPlace=({isMovingForward:K,draggable:J,destination:ne,draggables:oe,previousImpact:ce,viewport:ue,previousPageBorderBoxCenter:Ae,previousClientSelection:pe,afterCritical:xe})=>{if(!ne.isEnabled)return null;const me=getDraggablesInsideDroppable(ne.descriptor.id,oe),ge=isHomeOf(J,ne),ye=moveToNextCombine({isMovingForward:K,draggable:J,destination:ne,insideDestination:me,previousImpact:ce})||moveToNextIndex({isMovingForward:K,isInHomeList:ge,draggable:J,draggables:oe,destination:ne,insideDestination:me,previousImpact:ce,viewport:ue,afterCritical:xe});if(!ye)return null;const Se=getPageBorderBoxCenterFromImpact({impact:ye,draggable:J,droppable:ne,draggables:oe,afterCritical:xe});if(isTotallyVisibleInNewLocation({draggable:J,destination:ne,newPageBorderBoxCenter:Se,viewport:ue.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:getClientFromPageBorderBoxCenter({pageBorderBoxCenter:Se,draggable:J,viewport:ue}),impact:ye,scrollJumpRequest:null};const Ne=subtract(Se,Ae),$e=speculativelyIncrease({impact:ye,viewport:ue,destination:ne,draggables:oe,maxScrollChange:Ne});return{clientSelection:pe,impact:$e,scrollJumpRequest:Ne}};const getKnownActive=K=>{const J=K.subject.active;return J||invariant(),J};var getBestCrossAxisDroppable=({isMovingForward:K,pageBorderBoxCenter:J,source:ne,droppables:oe,viewport:ce})=>{const ue=ne.subject.active;if(!ue)return null;const Ae=ne.axis,pe=isWithin(ue[Ae.start],ue[Ae.end]),xe=toDroppableList(oe).filter(ge=>ge!==ne).filter(ge=>ge.isEnabled).filter(ge=>!!ge.subject.active).filter(ge=>isPartiallyVisibleThroughFrame(ce.frame)(getKnownActive(ge))).filter(ge=>{const ye=getKnownActive(ge);return K?ue[Ae.crossAxisEnd]<ye[Ae.crossAxisEnd]:ye[Ae.crossAxisStart]<ue[Ae.crossAxisStart]}).filter(ge=>{const ye=getKnownActive(ge),Se=isWithin(ye[Ae.start],ye[Ae.end]);return pe(ye[Ae.start])||pe(ye[Ae.end])||Se(ue[Ae.start])||Se(ue[Ae.end])}).sort((ge,ye)=>{const Se=getKnownActive(ge)[Ae.crossAxisStart],Te=getKnownActive(ye)[Ae.crossAxisStart];return K?Se-Te:Te-Se}).filter((ge,ye,Se)=>getKnownActive(ge)[Ae.crossAxisStart]===getKnownActive(Se[0])[Ae.crossAxisStart]);if(!xe.length)return null;if(xe.length===1)return xe[0];const me=xe.filter(ge=>isWithin(getKnownActive(ge)[Ae.start],getKnownActive(ge)[Ae.end])(J[Ae.line]));return me.length===1?me[0]:me.length>1?me.sort((ge,ye)=>getKnownActive(ge)[Ae.start]-getKnownActive(ye)[Ae.start])[0]:xe.sort((ge,ye)=>{const Se=closest$1(J,getCorners(getKnownActive(ge))),Te=closest$1(J,getCorners(getKnownActive(ye)));return Se!==Te?Se-Te:getKnownActive(ge)[Ae.start]-getKnownActive(ye)[Ae.start]})[0]};const getCurrentPageBorderBoxCenter=(K,J)=>{const ne=K.page.borderBox.center;return didStartAfterCritical(K.descriptor.id,J)?subtract(ne,J.displacedBy.point):ne},getCurrentPageBorderBox=(K,J)=>{const ne=K.page.borderBox;return didStartAfterCritical(K.descriptor.id,J)?offsetByPosition(ne,negate(J.displacedBy.point)):ne};var getClosestDraggable=({pageBorderBoxCenter:K,viewport:J,destination:ne,insideDestination:oe,afterCritical:ce})=>oe.filter(Ae=>isTotallyVisible({target:getCurrentPageBorderBox(Ae,ce),destination:ne,viewport:J.frame,withDroppableDisplacement:!0})).sort((Ae,pe)=>{const xe=distance$2(K,withDroppableDisplacement(ne,getCurrentPageBorderBoxCenter(Ae,ce))),me=distance$2(K,withDroppableDisplacement(ne,getCurrentPageBorderBoxCenter(pe,ce)));return xe<me?-1:me<xe?1:Ae.descriptor.index-pe.descriptor.index})[0]||null,getDisplacedBy=memoizeOne(function(J,ne){const oe=ne[J.line];return{value:oe,point:patch(J.line,oe)}});const getRequiredGrowthForPlaceholder=(K,J,ne)=>{const oe=K.axis;if(K.descriptor.mode==="virtual")return patch(oe.line,J[oe.line]);const ce=K.subject.page.contentBox[oe.size],xe=getDraggablesInsideDroppable(K.descriptor.id,ne).reduce((me,ge)=>me+ge.client.marginBox[oe.size],0)+J[oe.line]-ce;return xe<=0?null:patch(oe.line,xe)},withMaxScroll=(K,J)=>({...K,scroll:{...K.scroll,max:J}}),addPlaceholder=(K,J,ne)=>{const oe=K.frame;isHomeOf(J,K)&&invariant(),K.subject.withPlaceholder&&invariant();const ce=getDisplacedBy(K.axis,J.displaceBy).point,ue=getRequiredGrowthForPlaceholder(K,ce,ne),Ae={placeholderSize:ce,increasedBy:ue,oldFrameMaxScroll:K.frame?K.frame.scroll.max:null};if(!oe){const ge=getSubject({page:K.subject.page,withPlaceholder:Ae,axis:K.axis,frame:K.frame});return{...K,subject:ge}}const pe=ue?add$1(oe.scroll.max,ue):oe.scroll.max,xe=withMaxScroll(oe,pe),me=getSubject({page:K.subject.page,withPlaceholder:Ae,axis:K.axis,frame:xe});return{...K,subject:me,frame:xe}},removePlaceholder=K=>{const J=K.subject.withPlaceholder;J||invariant();const ne=K.frame;if(!ne){const Ae=getSubject({page:K.subject.page,axis:K.axis,frame:null,withPlaceholder:null});return{...K,subject:Ae}}const oe=J.oldFrameMaxScroll;oe||invariant();const ce=withMaxScroll(ne,oe),ue=getSubject({page:K.subject.page,axis:K.axis,frame:ce,withPlaceholder:null});return{...K,subject:ue,frame:ce}};var moveToNewDroppable=({previousPageBorderBoxCenter:K,moveRelativeTo:J,insideDestination:ne,draggable:oe,draggables:ce,destination:ue,viewport:Ae,afterCritical:pe})=>{if(!J){if(ne.length)return null;const ye={displaced:emptyGroups,displacedBy:noDisplacedBy,at:{type:"REORDER",destination:{droppableId:ue.descriptor.id,index:0}}},Se=getPageBorderBoxCenterFromImpact({impact:ye,draggable:oe,droppable:ue,draggables:ce,afterCritical:pe}),Te=isHomeOf(oe,ue)?ue:addPlaceholder(ue,oe,ce);return isTotallyVisibleInNewLocation({draggable:oe,destination:Te,newPageBorderBoxCenter:Se,viewport:Ae.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?ye:null}const xe=K[ue.axis.line]<=J.page.borderBox.center[ue.axis.line],me=(()=>{const ye=J.descriptor.index;return J.descriptor.id===oe.descriptor.id||xe?ye:ye+1})(),ge=getDisplacedBy(ue.axis,oe.displaceBy);return calculateReorderImpact({draggable:oe,insideDestination:ne,destination:ue,viewport:Ae,displacedBy:ge,last:emptyGroups,index:me})},moveCrossAxis=({isMovingForward:K,previousPageBorderBoxCenter:J,draggable:ne,isOver:oe,draggables:ce,droppables:ue,viewport:Ae,afterCritical:pe})=>{const xe=getBestCrossAxisDroppable({isMovingForward:K,pageBorderBoxCenter:J,source:oe,droppables:ue,viewport:Ae});if(!xe)return null;const me=getDraggablesInsideDroppable(xe.descriptor.id,ce),ge=getClosestDraggable({pageBorderBoxCenter:J,viewport:Ae,destination:xe,insideDestination:me,afterCritical:pe}),ye=moveToNewDroppable({previousPageBorderBoxCenter:J,destination:xe,draggable:ne,draggables:ce,moveRelativeTo:ge,insideDestination:me,viewport:Ae,afterCritical:pe});if(!ye)return null;const Se=getPageBorderBoxCenterFromImpact({impact:ye,draggable:ne,droppable:xe,draggables:ce,afterCritical:pe});return{clientSelection:getClientFromPageBorderBoxCenter({pageBorderBoxCenter:Se,draggable:ne,viewport:Ae}),impact:ye,scrollJumpRequest:null}},whatIsDraggedOver=K=>{const J=K.at;return J?J.type==="REORDER"?J.destination.droppableId:J.combine.droppableId:null};const getDroppableOver$1=(K,J)=>{const ne=whatIsDraggedOver(K);return ne?J[ne]:null};var moveInDirection=({state:K,type:J})=>{const ne=getDroppableOver$1(K.impact,K.dimensions.droppables),oe=!!ne,ce=K.dimensions.droppables[K.critical.droppable.id],ue=ne||ce,Ae=ue.axis.direction,pe=Ae==="vertical"&&(J==="MOVE_UP"||J==="MOVE_DOWN")||Ae==="horizontal"&&(J==="MOVE_LEFT"||J==="MOVE_RIGHT");if(pe&&!oe)return null;const xe=J==="MOVE_DOWN"||J==="MOVE_RIGHT",me=K.dimensions.draggables[K.critical.draggable.id],ge=K.current.page.borderBoxCenter,{draggables:ye,droppables:Se}=K.dimensions;return pe?moveToNextPlace({isMovingForward:xe,previousPageBorderBoxCenter:ge,draggable:me,destination:ue,draggables:ye,viewport:K.viewport,previousClientSelection:K.current.client.selection,previousImpact:K.impact,afterCritical:K.afterCritical}):moveCrossAxis({isMovingForward:xe,previousPageBorderBoxCenter:ge,draggable:me,isOver:ue,draggables:ye,droppables:Se,viewport:K.viewport,afterCritical:K.afterCritical})};function isMovementAllowed(K){return K.phase==="DRAGGING"||K.phase==="COLLECTING"}function isPositionInFrame(K){const J=isWithin(K.top,K.bottom),ne=isWithin(K.left,K.right);return function(ce){return J(ce.y)&&ne(ce.x)}}function getHasOverlap(K,J){return K.left<J.right&&K.right>J.left&&K.top<J.bottom&&K.bottom>J.top}function getFurthestAway({pageBorderBox:K,draggable:J,candidates:ne}){const oe=J.page.borderBox.center,ce=ne.map(ue=>{const Ae=ue.axis,pe=patch(ue.axis.line,K.center[Ae.line],ue.page.borderBox.center[Ae.crossAxisLine]);return{id:ue.descriptor.id,distance:distance$2(oe,pe)}}).sort((ue,Ae)=>Ae.distance-ue.distance);return ce[0]?ce[0].id:null}function getDroppableOver({pageBorderBox:K,draggable:J,droppables:ne}){const oe=toDroppableList(ne).filter(ce=>{if(!ce.isEnabled)return!1;const ue=ce.subject.active;if(!ue||!getHasOverlap(K,ue))return!1;if(isPositionInFrame(ue)(K.center))return!0;const Ae=ce.axis,pe=ue.center[Ae.crossAxisLine],xe=K[Ae.crossAxisStart],me=K[Ae.crossAxisEnd],ge=isWithin(ue[Ae.crossAxisStart],ue[Ae.crossAxisEnd]),ye=ge(xe),Se=ge(me);return!ye&&!Se?!0:ye?xe<pe:me>pe});return oe.length?oe.length===1?oe[0].descriptor.id:getFurthestAway({pageBorderBox:K,draggable:J,candidates:oe}):null}const offsetRectByPosition=(K,J)=>getRect(offsetByPosition(K,J));var withDroppableScroll=(K,J)=>{const ne=K.frame;return ne?offsetRectByPosition(J,ne.scroll.diff.value):J};function getIsDisplaced({displaced:K,id:J}){return!!(K.visible[J]||K.invisible[J])}function atIndex({draggable:K,closest:J,inHomeList:ne}){return J?ne&&J.descriptor.index>K.descriptor.index?J.descriptor.index-1:J.descriptor.index:null}var getReorderImpact=({pageBorderBoxWithDroppableScroll:K,draggable:J,destination:ne,insideDestination:oe,last:ce,viewport:ue,afterCritical:Ae})=>{const pe=ne.axis,xe=getDisplacedBy(ne.axis,J.displaceBy),me=xe.value,ge=K[pe.start],ye=K[pe.end],Te=removeDraggableFromList(J,oe).find($e=>{const ke=$e.descriptor.id,je=$e.page.borderBox.center[pe.line],Ke=didStartAfterCritical(ke,Ae),Ye=getIsDisplaced({displaced:ce,id:ke});return Ke?Ye?ye<=je:ge<je-me:Ye?ye<=je+me:ge<je})||null,Ne=atIndex({draggable:J,closest:Te,inHomeList:isHomeOf(J,ne)});return calculateReorderImpact({draggable:J,insideDestination:oe,destination:ne,viewport:ue,last:ce,displacedBy:xe,index:Ne})};const combineThresholdDivisor=4;var getCombineImpact=({draggable:K,pageBorderBoxWithDroppableScroll:J,previousImpact:ne,destination:oe,insideDestination:ce,afterCritical:ue})=>{if(!oe.isCombineEnabled)return null;const Ae=oe.axis,pe=getDisplacedBy(oe.axis,K.displaceBy),xe=pe.value,me=J[Ae.start],ge=J[Ae.end],Se=removeDraggableFromList(K,ce).find(Ne=>{const $e=Ne.descriptor.id,ke=Ne.page.borderBox,Ke=ke[Ae.size]/combineThresholdDivisor,Ye=didStartAfterCritical($e,ue),ze=getIsDisplaced({displaced:ne.displaced,id:$e});return Ye?ze?ge>ke[Ae.start]+Ke&&ge<ke[Ae.end]-Ke:me>ke[Ae.start]-xe+Ke&&me<ke[Ae.end]-xe-Ke:ze?ge>ke[Ae.start]+xe+Ke&&ge<ke[Ae.end]+xe-Ke:me>ke[Ae.start]+Ke&&me<ke[Ae.end]-Ke});return Se?{displacedBy:pe,displaced:ne.displaced,at:{type:"COMBINE",combine:{draggableId:Se.descriptor.id,droppableId:oe.descriptor.id}}}:null},getDragImpact=({pageOffset:K,draggable:J,draggables:ne,droppables:oe,previousImpact:ce,viewport:ue,afterCritical:Ae})=>{const pe=offsetRectByPosition(J.page.borderBox,K),xe=getDroppableOver({pageBorderBox:pe,draggable:J,droppables:oe});if(!xe)return noImpact$1;const me=oe[xe],ge=getDraggablesInsideDroppable(me.descriptor.id,ne),ye=withDroppableScroll(me,pe);return getCombineImpact({pageBorderBoxWithDroppableScroll:ye,draggable:J,previousImpact:ce,destination:me,insideDestination:ge,afterCritical:Ae})||getReorderImpact({pageBorderBoxWithDroppableScroll:ye,draggable:J,destination:me,insideDestination:ge,last:ce.displaced,viewport:ue,afterCritical:Ae})},patchDroppableMap=(K,J)=>({...K,[J.descriptor.id]:J});const clearUnusedPlaceholder=({previousImpact:K,impact:J,droppables:ne})=>{const oe=whatIsDraggedOver(K),ce=whatIsDraggedOver(J);if(!oe||oe===ce)return ne;const ue=ne[oe];if(!ue.subject.withPlaceholder)return ne;const Ae=removePlaceholder(ue);return patchDroppableMap(ne,Ae)};var recomputePlaceholders=({draggable:K,draggables:J,droppables:ne,previousImpact:oe,impact:ce})=>{const ue=clearUnusedPlaceholder({previousImpact:oe,impact:ce,droppables:ne}),Ae=whatIsDraggedOver(ce);if(!Ae)return ue;const pe=ne[Ae];if(isHomeOf(K,pe)||pe.subject.withPlaceholder)return ue;const xe=addPlaceholder(pe,K,J);return patchDroppableMap(ue,xe)},update=({state:K,clientSelection:J,dimensions:ne,viewport:oe,impact:ce,scrollJumpRequest:ue})=>{const Ae=oe||K.viewport,pe=ne||K.dimensions,xe=J||K.current.client.selection,me=subtract(xe,K.initial.client.selection),ge={offset:me,selection:xe,borderBoxCenter:add$1(K.initial.client.borderBoxCenter,me)},ye={selection:add$1(ge.selection,Ae.scroll.current),borderBoxCenter:add$1(ge.borderBoxCenter,Ae.scroll.current),offset:add$1(ge.offset,Ae.scroll.diff.value)},Se={client:ge,page:ye};if(K.phase==="COLLECTING")return{...K,dimensions:pe,viewport:Ae,current:Se};const Te=pe.draggables[K.critical.draggable.id],Ne=ce||getDragImpact({pageOffset:ye.offset,draggable:Te,draggables:pe.draggables,droppables:pe.droppables,previousImpact:K.impact,viewport:Ae,afterCritical:K.afterCritical}),$e=recomputePlaceholders({draggable:Te,impact:Ne,previousImpact:K.impact,draggables:pe.draggables,droppables:pe.droppables});return{...K,current:Se,dimensions:{draggables:pe.draggables,droppables:$e},impact:Ne,viewport:Ae,scrollJumpRequest:ue||null,forceShouldAnimate:ue?!1:null}};function getDraggables(K,J){return K.map(ne=>J[ne])}var recompute=({impact:K,viewport:J,draggables:ne,destination:oe,forceShouldAnimate:ce})=>{const ue=K.displaced,Ae=getDraggables(ue.all,ne),pe=getDisplacementGroups({afterDragging:Ae,destination:oe,displacedBy:K.displacedBy,viewport:J.frame,forceShouldAnimate:ce,last:ue});return{...K,displaced:pe}},getClientBorderBoxCenter=({impact:K,draggable:J,droppable:ne,draggables:oe,viewport:ce,afterCritical:ue})=>{const Ae=getPageBorderBoxCenterFromImpact({impact:K,draggable:J,draggables:oe,droppable:ne,afterCritical:ue});return getClientFromPageBorderBoxCenter({pageBorderBoxCenter:Ae,draggable:J,viewport:ce})},refreshSnap=({state:K,dimensions:J,viewport:ne})=>{K.movementMode!=="SNAP"&&invariant();const oe=K.impact,ce=ne||K.viewport,ue=J||K.dimensions,{draggables:Ae,droppables:pe}=ue,xe=Ae[K.critical.draggable.id],me=whatIsDraggedOver(oe);me||invariant();const ge=pe[me],ye=recompute({impact:oe,viewport:ce,destination:ge,draggables:Ae}),Se=getClientBorderBoxCenter({impact:ye,draggable:xe,droppable:ge,draggables:Ae,viewport:ce,afterCritical:K.afterCritical});return update({impact:ye,clientSelection:Se,state:K,dimensions:ue,viewport:ce})},getHomeLocation=K=>({index:K.index,droppableId:K.droppableId}),getLiftEffect=({draggable:K,home:J,draggables:ne,viewport:oe})=>{const ce=getDisplacedBy(J.axis,K.displaceBy),ue=getDraggablesInsideDroppable(J.descriptor.id,ne),Ae=ue.indexOf(K);Ae===-1&&invariant();const pe=ue.slice(Ae+1),xe=pe.reduce((Se,Te)=>(Se[Te.descriptor.id]=!0,Se),{}),me={inVirtualList:J.descriptor.mode==="virtual",displacedBy:ce,effected:xe};return{impact:{displaced:getDisplacementGroups({afterDragging:pe,destination:J,displacedBy:ce,last:null,viewport:oe.frame,forceShouldAnimate:!1}),displacedBy:ce,at:{type:"REORDER",destination:getHomeLocation(K.descriptor)}},afterCritical:me}},patchDimensionMap=(K,J)=>({draggables:K.draggables,droppables:patchDroppableMap(K.droppables,J)}),offsetDraggable=({draggable:K,offset:J,initialWindowScroll:ne})=>{const oe=offset(K.client,J),ce=withScroll(oe,ne);return{...K,placeholder:{...K.placeholder,client:oe},client:oe,page:ce}},getFrame=K=>{const J=K.frame;return J||invariant(),J},adjustAdditionsForScrollChanges=({additions:K,updatedDroppables:J,viewport:ne})=>{const oe=ne.scroll.diff.value;return K.map(ce=>{const ue=ce.descriptor.droppableId,Ae=J[ue],xe=getFrame(Ae).scroll.diff.value,me=add$1(oe,xe);return offsetDraggable({draggable:ce,offset:me,initialWindowScroll:ne.scroll.initial})})},publishWhileDraggingInVirtual=({state:K,published:J})=>{const ne=J.modified.map(je=>{const Ke=K.dimensions.droppables[je.droppableId];return scrollDroppable(Ke,je.scroll)}),oe={...K.dimensions.droppables,...toDroppableMap(ne)},ce=toDraggableMap(adjustAdditionsForScrollChanges({additions:J.additions,updatedDroppables:oe,viewport:K.viewport})),ue={...K.dimensions.draggables,...ce};J.removals.forEach(je=>{delete ue[je]});const Ae={droppables:oe,draggables:ue},pe=whatIsDraggedOver(K.impact),xe=pe?Ae.droppables[pe]:null,me=Ae.draggables[K.critical.draggable.id],ge=Ae.droppables[K.critical.droppable.id],{impact:ye,afterCritical:Se}=getLiftEffect({draggable:me,home:ge,draggables:ue,viewport:K.viewport}),Te=xe&&xe.isCombineEnabled?K.impact:ye,Ne=getDragImpact({pageOffset:K.current.page.offset,draggable:Ae.draggables[K.critical.draggable.id],draggables:Ae.draggables,droppables:Ae.droppables,previousImpact:Te,viewport:K.viewport,afterCritical:Se}),$e={...K,phase:"DRAGGING",impact:Ne,onLiftImpact:ye,dimensions:Ae,afterCritical:Se,forceShouldAnimate:!1};return K.phase==="COLLECTING"?$e:{...$e,phase:"DROP_PENDING",reason:K.reason,isWaiting:!1}};const isSnapping=K=>K.movementMode==="SNAP",postDroppableChange=(K,J,ne)=>{const oe=patchDimensionMap(K.dimensions,J);return!isSnapping(K)||ne?update({state:K,dimensions:oe}):refreshSnap({state:K,dimensions:oe})};function removeScrollJumpRequest(K){return K.isDragging&&K.movementMode==="SNAP"?{...K,scrollJumpRequest:null}:K}const idle$2={phase:"IDLE",completed:null,shouldFlush:!1};var reducer$2=(K=idle$2,J)=>{if(J.type==="FLUSH")return{...idle$2,shouldFlush:!0};if(J.type==="INITIAL_PUBLISH"){K.phase!=="IDLE"&&invariant();const{critical:ne,clientSelection:oe,viewport:ce,dimensions:ue,movementMode:Ae}=J.payload,pe=ue.draggables[ne.draggable.id],xe=ue.droppables[ne.droppable.id],me={selection:oe,borderBoxCenter:pe.client.borderBox.center,offset:origin},ge={client:me,page:{selection:add$1(me.selection,ce.scroll.initial),borderBoxCenter:add$1(me.selection,ce.scroll.initial),offset:add$1(me.selection,ce.scroll.diff.value)}},ye=toDroppableList(ue.droppables).every($e=>!$e.isFixedOnPage),{impact:Se,afterCritical:Te}=getLiftEffect({draggable:pe,home:xe,draggables:ue.draggables,viewport:ce});return{phase:"DRAGGING",isDragging:!0,critical:ne,movementMode:Ae,dimensions:ue,initial:ge,current:ge,isWindowScrollAllowed:ye,impact:Se,afterCritical:Te,onLiftImpact:Se,viewport:ce,scrollJumpRequest:null,forceShouldAnimate:null}}if(J.type==="COLLECTION_STARTING")return K.phase==="COLLECTING"||K.phase==="DROP_PENDING"?K:(K.phase!=="DRAGGING"&&invariant(),{...K,phase:"COLLECTING"});if(J.type==="PUBLISH_WHILE_DRAGGING")return K.phase==="COLLECTING"||K.phase==="DROP_PENDING"||invariant(),publishWhileDraggingInVirtual({state:K,published:J.payload});if(J.type==="MOVE"){if(K.phase==="DROP_PENDING")return K;isMovementAllowed(K)||invariant();const{client:ne}=J.payload;return isEqual$1(ne,K.current.client.selection)?K:update({state:K,clientSelection:ne,impact:isSnapping(K)?K.impact:null})}if(J.type==="UPDATE_DROPPABLE_SCROLL"){if(K.phase==="DROP_PENDING"||K.phase==="COLLECTING")return removeScrollJumpRequest(K);isMovementAllowed(K)||invariant();const{id:ne,newScroll:oe}=J.payload,ce=K.dimensions.droppables[ne];if(!ce)return K;const ue=scrollDroppable(ce,oe);return postDroppableChange(K,ue,!1)}if(J.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(K.phase==="DROP_PENDING")return K;isMovementAllowed(K)||invariant();const{id:ne,isEnabled:oe}=J.payload,ce=K.dimensions.droppables[ne];ce||invariant(),ce.isEnabled===oe&&invariant();const ue={...ce,isEnabled:oe};return postDroppableChange(K,ue,!0)}if(J.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(K.phase==="DROP_PENDING")return K;isMovementAllowed(K)||invariant();const{id:ne,isCombineEnabled:oe}=J.payload,ce=K.dimensions.droppables[ne];ce||invariant(),ce.isCombineEnabled===oe&&invariant();const ue={...ce,isCombineEnabled:oe};return postDroppableChange(K,ue,!0)}if(J.type==="MOVE_BY_WINDOW_SCROLL"){if(K.phase==="DROP_PENDING"||K.phase==="DROP_ANIMATING")return K;isMovementAllowed(K)||invariant(),K.isWindowScrollAllowed||invariant();const ne=J.payload.newScroll;if(isEqual$1(K.viewport.scroll.current,ne))return removeScrollJumpRequest(K);const oe=scrollViewport(K.viewport,ne);return isSnapping(K)?refreshSnap({state:K,viewport:oe}):update({state:K,viewport:oe})}if(J.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!isMovementAllowed(K))return K;const ne=J.payload.maxScroll;if(isEqual$1(ne,K.viewport.scroll.max))return K;const oe={...K.viewport,scroll:{...K.viewport.scroll,max:ne}};return{...K,viewport:oe}}if(J.type==="MOVE_UP"||J.type==="MOVE_DOWN"||J.type==="MOVE_LEFT"||J.type==="MOVE_RIGHT"){if(K.phase==="COLLECTING"||K.phase==="DROP_PENDING")return K;K.phase!=="DRAGGING"&&invariant();const ne=moveInDirection({state:K,type:J.type});return ne?update({state:K,impact:ne.impact,clientSelection:ne.clientSelection,scrollJumpRequest:ne.scrollJumpRequest}):K}if(J.type==="DROP_PENDING"){const ne=J.payload.reason;return K.phase!=="COLLECTING"&&invariant(),{...K,phase:"DROP_PENDING",isWaiting:!0,reason:ne}}if(J.type==="DROP_ANIMATE"){const{completed:ne,dropDuration:oe,newHomeClientOffset:ce}=J.payload;return K.phase==="DRAGGING"||K.phase==="DROP_PENDING"||invariant(),{phase:"DROP_ANIMATING",completed:ne,dropDuration:oe,newHomeClientOffset:ce,dimensions:K.dimensions}}if(J.type==="DROP_COMPLETE"){const{completed:ne}=J.payload;return{phase:"IDLE",completed:ne,shouldFlush:!1}}return K};const beforeInitialCapture=K=>({type:"BEFORE_INITIAL_CAPTURE",payload:K}),lift$1=K=>({type:"LIFT",payload:K}),initialPublish=K=>({type:"INITIAL_PUBLISH",payload:K}),publishWhileDragging=K=>({type:"PUBLISH_WHILE_DRAGGING",payload:K}),collectionStarting=()=>({type:"COLLECTION_STARTING",payload:null}),updateDroppableScroll=K=>({type:"UPDATE_DROPPABLE_SCROLL",payload:K}),updateDroppableIsEnabled=K=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:K}),updateDroppableIsCombineEnabled=K=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:K}),move=K=>({type:"MOVE",payload:K}),moveByWindowScroll=K=>({type:"MOVE_BY_WINDOW_SCROLL",payload:K}),updateViewportMaxScroll=K=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:K}),moveUp=()=>({type:"MOVE_UP",payload:null}),moveDown=()=>({type:"MOVE_DOWN",payload:null}),moveRight=()=>({type:"MOVE_RIGHT",payload:null}),moveLeft=()=>({type:"MOVE_LEFT",payload:null}),flush=()=>({type:"FLUSH",payload:null}),animateDrop=K=>({type:"DROP_ANIMATE",payload:K}),completeDrop=K=>({type:"DROP_COMPLETE",payload:K}),drop$1=K=>({type:"DROP",payload:K}),dropPending=K=>({type:"DROP_PENDING",payload:K}),dropAnimationFinished=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var lift=K=>({getState:J,dispatch:ne})=>oe=>ce=>{if(ce.type!=="LIFT"){oe(ce);return}const{id:ue,clientSelection:Ae,movementMode:pe}=ce.payload,xe=J();xe.phase==="DROP_ANIMATING"&&ne(completeDrop({completed:xe.completed})),J().phase!=="IDLE"&&invariant(),ne(flush()),ne(beforeInitialCapture({draggableId:ue,movementMode:pe}));const ge={draggableId:ue,scrollOptions:{shouldPublishImmediately:pe==="SNAP"}},{critical:ye,dimensions:Se,viewport:Te}=K.startPublishing(ge);ne(initialPublish({critical:ye,dimensions:Se,clientSelection:Ae,movementMode:pe,viewport:Te}))},style$1=K=>()=>J=>ne=>{ne.type==="INITIAL_PUBLISH"&&K.dragging(),ne.type==="DROP_ANIMATE"&&K.dropping(ne.payload.completed.result.reason),(ne.type==="FLUSH"||ne.type==="DROP_COMPLETE")&&K.resting(),J(ne)};const curves$1={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},combine={opacity:{drop:0,combining:.7},scale:{drop:.75}},timings={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},outOfTheWayTiming=`${timings.outOfTheWay}s ${curves$1.outOfTheWay}`,transitions={fluid:`opacity ${outOfTheWayTiming}`,snap:`transform ${outOfTheWayTiming}, opacity ${outOfTheWayTiming}`,drop:K=>{const J=`${K}s ${curves$1.drop}`;return`transform ${J}, opacity ${J}`},outOfTheWay:`transform ${outOfTheWayTiming}`,placeholder:`height ${outOfTheWayTiming}, width ${outOfTheWayTiming}, margin ${outOfTheWayTiming}`},moveTo=K=>isEqual$1(K,origin)?void 0:`translate(${K.x}px, ${K.y}px)`,transforms={moveTo,drop:(K,J)=>{const ne=moveTo(K);if(ne)return J?`${ne} scale(${combine.scale.drop})`:ne}},{minDropTime,maxDropTime}=timings,dropTimeRange=maxDropTime-minDropTime,maxDropTimeAtDistance=1500,cancelDropModifier=.6;var getDropDuration=({current:K,destination:J,reason:ne})=>{const oe=distance$2(K,J);if(oe<=0)return minDropTime;if(oe>=maxDropTimeAtDistance)return maxDropTime;const ce=oe/maxDropTimeAtDistance,ue=minDropTime+dropTimeRange*ce,Ae=ne==="CANCEL"?ue*cancelDropModifier:ue;return Number(Ae.toFixed(2))},getNewHomeClientOffset=({impact:K,draggable:J,dimensions:ne,viewport:oe,afterCritical:ce})=>{const{draggables:ue,droppables:Ae}=ne,pe=whatIsDraggedOver(K),xe=pe?Ae[pe]:null,me=Ae[J.descriptor.droppableId],ge=getClientBorderBoxCenter({impact:K,draggable:J,draggables:ue,afterCritical:ce,droppable:xe||me,viewport:oe});return subtract(ge,J.client.borderBox.center)},getDropImpact=({draggables:K,reason:J,lastImpact:ne,home:oe,viewport:ce,onLiftImpact:ue})=>!ne.at||J!=="DROP"?{impact:recompute({draggables:K,impact:ue,destination:oe,viewport:ce,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:ne.at.type==="REORDER"?{impact:ne,didDropInsideDroppable:!0}:{impact:{...ne,displaced:emptyGroups},didDropInsideDroppable:!0};const dropMiddleware=({getState:K,dispatch:J})=>ne=>oe=>{if(oe.type!=="DROP"){ne(oe);return}const ce=K(),ue=oe.payload.reason;if(ce.phase==="COLLECTING"){J(dropPending({reason:ue}));return}if(ce.phase==="IDLE")return;ce.phase==="DROP_PENDING"&&ce.isWaiting&&invariant(),ce.phase==="DRAGGING"||ce.phase==="DROP_PENDING"||invariant();const pe=ce.critical,xe=ce.dimensions,me=xe.draggables[ce.critical.draggable.id],{impact:ge,didDropInsideDroppable:ye}=getDropImpact({reason:ue,lastImpact:ce.impact,afterCritical:ce.afterCritical,onLiftImpact:ce.onLiftImpact,home:ce.dimensions.droppables[ce.critical.droppable.id],viewport:ce.viewport,draggables:ce.dimensions.draggables}),Se=ye?tryGetDestination(ge):null,Te=ye?tryGetCombine(ge):null,Ne={index:pe.draggable.index,droppableId:pe.droppable.id},$e={draggableId:me.descriptor.id,type:me.descriptor.type,source:Ne,reason:ue,mode:ce.movementMode,destination:Se,combine:Te},ke=getNewHomeClientOffset({impact:ge,draggable:me,dimensions:xe,viewport:ce.viewport,afterCritical:ce.afterCritical}),je={critical:ce.critical,afterCritical:ce.afterCritical,result:$e,impact:ge};if(!(!isEqual$1(ce.current.client.offset,ke)||!!$e.combine)){J(completeDrop({completed:je}));return}const Ye=getDropDuration({current:ce.current.client.offset,destination:ke,reason:ue});J(animateDrop({newHomeClientOffset:ke,dropDuration:Ye,completed:je}))};var drop=dropMiddleware,getWindowScroll=()=>({x:window.pageXOffset,y:window.pageYOffset});function getWindowScrollBinding(K){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:J=>{J.target!==window&&J.target!==window.document||K()}}}function getScrollListener({onWindowScroll:K}){function J(){K(getWindowScroll())}const ne=rafSchd(J),oe=getWindowScrollBinding(ne);let ce=noop$2$1;function ue(){return ce!==noop$2$1}function Ae(){ue()&&invariant(),ce=bindEvents(window,[oe])}function pe(){ue()||invariant(),ne.cancel(),ce(),ce=noop$2$1}return{start:Ae,stop:pe,isActive:ue}}const shouldEnd=K=>K.type==="DROP_COMPLETE"||K.type==="DROP_ANIMATE"||K.type==="FLUSH",scrollListener=K=>{const J=getScrollListener({onWindowScroll:ne=>{K.dispatch(moveByWindowScroll({newScroll:ne}))}});return ne=>oe=>{!J.isActive()&&oe.type==="INITIAL_PUBLISH"&&J.start(),J.isActive()&&shouldEnd(oe)&&J.stop(),ne(oe)}};var scrollListener$1=scrollListener,getExpiringAnnounce=K=>{let J=!1,ne=!1;const oe=setTimeout(()=>{ne=!0}),ce=ue=>{J||ne||(J=!0,K(ue),clearTimeout(oe))};return ce.wasCalled=()=>J,ce},getAsyncMarshal=()=>{const K=[],J=ce=>{const ue=K.findIndex(pe=>pe.timerId===ce);ue===-1&&invariant();const[Ae]=K.splice(ue,1);Ae.callback()};return{add:ce=>{const ue=setTimeout(()=>J(ue)),Ae={timerId:ue,callback:ce};K.push(Ae)},flush:()=>{if(!K.length)return;const ce=[...K];K.length=0,ce.forEach(ue=>{clearTimeout(ue.timerId),ue.callback()})}}};const areLocationsEqual=(K,J)=>K==null&&J==null?!0:K==null||J==null?!1:K.droppableId===J.droppableId&&K.index===J.index,isCombineEqual=(K,J)=>K==null&&J==null?!0:K==null||J==null?!1:K.draggableId===J.draggableId&&K.droppableId===J.droppableId,isCriticalEqual=(K,J)=>{if(K===J)return!0;const ne=K.draggable.id===J.draggable.id&&K.draggable.droppableId===J.draggable.droppableId&&K.draggable.type===J.draggable.type&&K.draggable.index===J.draggable.index,oe=K.droppable.id===J.droppable.id&&K.droppable.type===J.droppable.type;return ne&&oe},withTimings=(K,J)=>{J()},getDragStart=(K,J)=>({draggableId:K.draggable.id,type:K.droppable.type,source:{droppableId:K.droppable.id,index:K.draggable.index},mode:J});function execute(K,J,ne,oe){if(!K){ne(oe(J));return}const ce=getExpiringAnnounce(ne);K(J,{announce:ce}),ce.wasCalled()||ne(oe(J))}var getPublisher=(K,J)=>{const ne=getAsyncMarshal();let oe=null;const ce=(ye,Se)=>{oe&&invariant(),withTimings("onBeforeCapture",()=>{const Te=K().onBeforeCapture;Te&&Te({draggableId:ye,mode:Se})})},ue=(ye,Se)=>{oe&&invariant(),withTimings("onBeforeDragStart",()=>{const Te=K().onBeforeDragStart;Te&&Te(getDragStart(ye,Se))})},Ae=(ye,Se)=>{oe&&invariant();const Te=getDragStart(ye,Se);oe={mode:Se,lastCritical:ye,lastLocation:Te.source,lastCombine:null},ne.add(()=>{withTimings("onDragStart",()=>execute(K().onDragStart,Te,J,preset$1.onDragStart))})},pe=(ye,Se)=>{const Te=tryGetDestination(Se),Ne=tryGetCombine(Se);oe||invariant();const $e=!isCriticalEqual(ye,oe.lastCritical);$e&&(oe.lastCritical=ye);const ke=!areLocationsEqual(oe.lastLocation,Te);ke&&(oe.lastLocation=Te);const je=!isCombineEqual(oe.lastCombine,Ne);if(je&&(oe.lastCombine=Ne),!$e&&!ke&&!je)return;const Ke={...getDragStart(ye,oe.mode),combine:Ne,destination:Te};ne.add(()=>{withTimings("onDragUpdate",()=>execute(K().onDragUpdate,Ke,J,preset$1.onDragUpdate))})},xe=()=>{oe||invariant(),ne.flush()},me=ye=>{oe||invariant(),oe=null,withTimings("onDragEnd",()=>execute(K().onDragEnd,ye,J,preset$1.onDragEnd))};return{beforeCapture:ce,beforeStart:ue,start:Ae,update:pe,flush:xe,drop:me,abort:()=>{if(!oe)return;const ye={...getDragStart(oe.lastCritical,oe.mode),combine:null,destination:null,reason:"CANCEL"};me(ye)}}},responders=(K,J)=>{const ne=getPublisher(K,J);return oe=>ce=>ue=>{if(ue.type==="BEFORE_INITIAL_CAPTURE"){ne.beforeCapture(ue.payload.draggableId,ue.payload.movementMode);return}if(ue.type==="INITIAL_PUBLISH"){const pe=ue.payload.critical;ne.beforeStart(pe,ue.payload.movementMode),ce(ue),ne.start(pe,ue.payload.movementMode);return}if(ue.type==="DROP_COMPLETE"){const pe=ue.payload.completed.result;ne.flush(),ce(ue),ne.drop(pe);return}if(ce(ue),ue.type==="FLUSH"){ne.abort();return}const Ae=oe.getState();Ae.phase==="DRAGGING"&&ne.update(Ae.critical,Ae.impact)}};const dropAnimationFinishMiddleware=K=>J=>ne=>{if(ne.type!=="DROP_ANIMATION_FINISHED"){J(ne);return}const oe=K.getState();oe.phase!=="DROP_ANIMATING"&&invariant(),K.dispatch(completeDrop({completed:oe.completed}))};var dropAnimationFinish=dropAnimationFinishMiddleware;const dropAnimationFlushOnScrollMiddleware=K=>{let J=null,ne=null;function oe(){ne&&(cancelAnimationFrame(ne),ne=null),J&&(J(),J=null)}return ce=>ue=>{if((ue.type==="FLUSH"||ue.type==="DROP_COMPLETE"||ue.type==="DROP_ANIMATION_FINISHED")&&oe(),ce(ue),ue.type!=="DROP_ANIMATE")return;const Ae={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){K.getState().phase==="DROP_ANIMATING"&&K.dispatch(dropAnimationFinished())}};ne=requestAnimationFrame(()=>{ne=null,J=bindEvents(window,[Ae])})}};var dropAnimationFlushOnScroll=dropAnimationFlushOnScrollMiddleware,dimensionMarshalStopper=K=>()=>J=>ne=>{(ne.type==="DROP_COMPLETE"||ne.type==="FLUSH"||ne.type==="DROP_ANIMATE")&&K.stopPublishing(),J(ne)},focus=K=>{let J=!1;return()=>ne=>oe=>{if(oe.type==="INITIAL_PUBLISH"){J=!0,K.tryRecordFocus(oe.payload.critical.draggable.id),ne(oe),K.tryRestoreFocusRecorded();return}if(ne(oe),!!J){if(oe.type==="FLUSH"){J=!1,K.tryRestoreFocusRecorded();return}if(oe.type==="DROP_COMPLETE"){J=!1;const ce=oe.payload.completed.result;ce.combine&&K.tryShiftRecord(ce.draggableId,ce.combine.draggableId),K.tryRestoreFocusRecorded()}}}};const shouldStop=K=>K.type==="DROP_COMPLETE"||K.type==="DROP_ANIMATE"||K.type==="FLUSH";var autoScroll=K=>J=>ne=>oe=>{if(shouldStop(oe)){K.stop(),ne(oe);return}if(oe.type==="INITIAL_PUBLISH"){ne(oe);const ce=J.getState();ce.phase!=="DRAGGING"&&invariant(),K.start(ce);return}ne(oe),K.scroll(J.getState())};const pendingDrop=K=>J=>ne=>{if(J(ne),ne.type!=="PUBLISH_WHILE_DRAGGING")return;const oe=K.getState();oe.phase==="DROP_PENDING"&&(oe.isWaiting||K.dispatch(drop$1({reason:oe.reason})))};var pendingDrop$1=pendingDrop;const composeEnhancers=compose$2;var createStore$1=({dimensionMarshal:K,focusMarshal:J,styleMarshal:ne,getResponders:oe,announce:ce,autoScroller:ue})=>createStore$2(reducer$2,composeEnhancers(applyMiddleware(style$1(ne),dimensionMarshalStopper(K),lift(K),drop,dropAnimationFinish,dropAnimationFlushOnScroll,pendingDrop$1,autoScroll(ue),scrollListener$1,focus(J),responders(oe,ce))));const clean$1=()=>({additions:{},removals:{},modified:{}});function createPublisher({registry:K,callbacks:J}){let ne=clean$1(),oe=null;const ce=()=>{oe||(J.collectionStarting(),oe=requestAnimationFrame(()=>{oe=null;const{additions:xe,removals:me,modified:ge}=ne,ye=Object.keys(xe).map(Ne=>K.draggable.getById(Ne).getDimension(origin)).sort((Ne,$e)=>Ne.descriptor.index-$e.descriptor.index),Se=Object.keys(ge).map(Ne=>{const ke=K.droppable.getById(Ne).callbacks.getScrollWhileDragging();return{droppableId:Ne,scroll:ke}}),Te={additions:ye,removals:Object.keys(me),modified:Se};ne=clean$1(),J.publish(Te)}))};return{add:xe=>{const me=xe.descriptor.id;ne.additions[me]=xe,ne.modified[xe.descriptor.droppableId]=!0,ne.removals[me]&&delete ne.removals[me],ce()},remove:xe=>{const me=xe.descriptor;ne.removals[me.id]=!0,ne.modified[me.droppableId]=!0,ne.additions[me.id]&&delete ne.additions[me.id],ce()},stop:()=>{oe&&(cancelAnimationFrame(oe),oe=null,ne=clean$1())}}}var getMaxScroll=({scrollHeight:K,scrollWidth:J,height:ne,width:oe})=>{const ce=subtract({x:J,y:K},{x:oe,y:ne});return{x:Math.max(0,ce.x),y:Math.max(0,ce.y)}},getDocumentElement=()=>{const K=document.documentElement;return K||invariant(),K},getMaxWindowScroll=()=>{const K=getDocumentElement();return getMaxScroll({scrollHeight:K.scrollHeight,scrollWidth:K.scrollWidth,width:K.clientWidth,height:K.clientHeight})},getViewport=()=>{const K=getWindowScroll(),J=getMaxWindowScroll(),ne=K.y,oe=K.x,ce=getDocumentElement(),ue=ce.clientWidth,Ae=ce.clientHeight,pe=oe+ue,xe=ne+Ae;return{frame:getRect({top:ne,left:oe,right:pe,bottom:xe}),scroll:{initial:K,current:K,max:J,diff:{value:origin,displacement:origin}}}},getInitialPublish=({critical:K,scrollOptions:J,registry:ne})=>{const oe=getViewport(),ce=oe.scroll.current,ue=K.droppable,Ae=ne.droppable.getAllByType(ue.type).map(ge=>ge.callbacks.getDimensionAndWatchScroll(ce,J)),pe=ne.draggable.getAllByType(K.draggable.type).map(ge=>ge.getDimension(ce));return{dimensions:{draggables:toDraggableMap(pe),droppables:toDroppableMap(Ae)},critical:K,viewport:oe}};function shouldPublishUpdate(K,J,ne){return!(ne.descriptor.id===J.id||ne.descriptor.type!==J.type||K.droppable.getById(ne.descriptor.droppableId).descriptor.mode!=="virtual")}var createDimensionMarshal=(K,J)=>{let ne=null;const oe=createPublisher({callbacks:{publish:J.publishWhileDragging,collectionStarting:J.collectionStarting},registry:K}),ce=(Se,Te)=>{K.droppable.exists(Se)||invariant(),ne&&J.updateDroppableIsEnabled({id:Se,isEnabled:Te})},ue=(Se,Te)=>{ne&&(K.droppable.exists(Se)||invariant(),J.updateDroppableIsCombineEnabled({id:Se,isCombineEnabled:Te}))},Ae=(Se,Te)=>{ne&&(K.droppable.exists(Se)||invariant(),J.updateDroppableScroll({id:Se,newScroll:Te}))},pe=(Se,Te)=>{ne&&K.droppable.getById(Se).callbacks.scroll(Te)},xe=()=>{if(!ne)return;oe.stop();const Se=ne.critical.droppable;K.droppable.getAllByType(Se.type).forEach(Te=>Te.callbacks.dragStopped()),ne.unsubscribe(),ne=null},me=Se=>{ne||invariant();const Te=ne.critical.draggable;Se.type==="ADDITION"&&shouldPublishUpdate(K,Te,Se.value)&&oe.add(Se.value),Se.type==="REMOVAL"&&shouldPublishUpdate(K,Te,Se.value)&&oe.remove(Se.value)};return{updateDroppableIsEnabled:ce,updateDroppableIsCombineEnabled:ue,scrollDroppable:pe,updateDroppableScroll:Ae,startPublishing:Se=>{ne&&invariant();const Te=K.draggable.getById(Se.draggableId),Ne=K.droppable.getById(Te.descriptor.droppableId),$e={draggable:Te.descriptor,droppable:Ne.descriptor},ke=K.subscribe(me);return ne={critical:$e,unsubscribe:ke},getInitialPublish({critical:$e,registry:K,scrollOptions:Se.scrollOptions})},stopPublishing:xe}},canStartDrag=(K,J)=>K.phase==="IDLE"?!0:K.phase!=="DROP_ANIMATING"||K.completed.result.draggableId===J?!1:K.completed.result.reason==="DROP",scrollWindow=K=>{window.scrollBy(K.x,K.y)};const getScrollableDroppables=memoizeOne(K=>toDroppableList(K).filter(J=>!(!J.isEnabled||!J.frame))),getScrollableDroppableOver=(K,J)=>getScrollableDroppables(J).find(oe=>(oe.frame||invariant(),isPositionInFrame(oe.frame.pageMarginBox)(K)))||null;var getBestScrollableDroppable=({center:K,destination:J,droppables:ne})=>{if(J){const ce=ne[J];return ce.frame?ce:null}return getScrollableDroppableOver(K,ne)};const defaultAutoScrollerOptions={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:K=>K**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var getDistanceThresholds=(K,J,ne=()=>defaultAutoScrollerOptions)=>{const oe=ne(),ce=K[J.size]*oe.startFromPercentage,ue=K[J.size]*oe.maxScrollAtPercentage;return{startScrollingFrom:ce,maxScrollValueAt:ue}},getPercentage=({startOfRange:K,endOfRange:J,current:ne})=>{const oe=J-K;return oe===0?0:(ne-K)/oe},minScroll=1,getValueFromDistance=(K,J,ne=()=>defaultAutoScrollerOptions)=>{const oe=ne();if(K>J.startScrollingFrom)return 0;if(K<=J.maxScrollValueAt)return oe.maxPixelScroll;if(K===J.startScrollingFrom)return minScroll;const ue=1-getPercentage({startOfRange:J.maxScrollValueAt,endOfRange:J.startScrollingFrom,current:K}),Ae=oe.maxPixelScroll*oe.ease(ue);return Math.ceil(Ae)},dampenValueByTime=(K,J,ne)=>{const oe=ne(),ce=oe.durationDampening.accelerateAt,ue=oe.durationDampening.stopDampeningAt,Ae=J,pe=ue,me=Date.now()-Ae;if(me>=ue)return K;if(me<ce)return minScroll;const ge=getPercentage({startOfRange:ce,endOfRange:pe,current:me}),ye=K*oe.ease(ge);return Math.ceil(ye)},getValue$2=({distanceToEdge:K,thresholds:J,dragStartTime:ne,shouldUseTimeDampening:oe,getAutoScrollerOptions:ce})=>{const ue=getValueFromDistance(K,J,ce);return ue===0?0:oe?Math.max(dampenValueByTime(ue,ne,ce),minScroll):ue},getScrollOnAxis=({container:K,distanceToEdges:J,dragStartTime:ne,axis:oe,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue})=>{const Ae=getDistanceThresholds(K,oe,ue);return J[oe.end]<J[oe.start]?getValue$2({distanceToEdge:J[oe.end],thresholds:Ae,dragStartTime:ne,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue}):-1*getValue$2({distanceToEdge:J[oe.start],thresholds:Ae,dragStartTime:ne,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue})},adjustForSizeLimits=({container:K,subject:J,proposedScroll:ne})=>{const oe=J.height>K.height,ce=J.width>K.width;return!ce&&!oe?ne:ce&&oe?null:{x:ce?0:ne.x,y:oe?0:ne.y}};const clean=apply(K=>K===0?0:K);var getScroll$1=({dragStartTime:K,container:J,subject:ne,center:oe,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue})=>{const Ae={top:oe.y-J.top,right:J.right-oe.x,bottom:J.bottom-oe.y,left:oe.x-J.left},pe=getScrollOnAxis({container:J,distanceToEdges:Ae,dragStartTime:K,axis:vertical,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue}),xe=getScrollOnAxis({container:J,distanceToEdges:Ae,dragStartTime:K,axis:horizontal,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue}),me=clean({x:xe,y:pe});if(isEqual$1(me,origin))return null;const ge=adjustForSizeLimits({container:J,subject:ne,proposedScroll:me});return ge?isEqual$1(ge,origin)?null:ge:null};const smallestSigned=apply(K=>K===0?0:K>0?1:-1),getOverlap=(()=>{const K=(J,ne)=>J<0?J:J>ne?J-ne:0;return({current:J,max:ne,change:oe})=>{const ce=add$1(J,oe),ue={x:K(ce.x,ne.x),y:K(ce.y,ne.y)};return isEqual$1(ue,origin)?null:ue}})(),canPartiallyScroll=({max:K,current:J,change:ne})=>{const oe={x:Math.max(J.x,K.x),y:Math.max(J.y,K.y)},ce=smallestSigned(ne),ue=getOverlap({max:oe,current:J,change:ce});return!ue||ce.x!==0&&ue.x===0||ce.y!==0&&ue.y===0},canScrollWindow=(K,J)=>canPartiallyScroll({current:K.scroll.current,max:K.scroll.max,change:J}),getWindowOverlap=(K,J)=>{if(!canScrollWindow(K,J))return null;const ne=K.scroll.max,oe=K.scroll.current;return getOverlap({current:oe,max:ne,change:J})},canScrollDroppable=(K,J)=>{const ne=K.frame;return ne?canPartiallyScroll({current:ne.scroll.current,max:ne.scroll.max,change:J}):!1},getDroppableOverlap=(K,J)=>{const ne=K.frame;return!ne||!canScrollDroppable(K,J)?null:getOverlap({current:ne.scroll.current,max:ne.scroll.max,change:J})};var getWindowScrollChange=({viewport:K,subject:J,center:ne,dragStartTime:oe,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue})=>{const Ae=getScroll$1({dragStartTime:oe,container:K.frame,subject:J,center:ne,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue});return Ae&&canScrollWindow(K,Ae)?Ae:null},getDroppableScrollChange=({droppable:K,subject:J,center:ne,dragStartTime:oe,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue})=>{const Ae=K.frame;if(!Ae)return null;const pe=getScroll$1({dragStartTime:oe,container:Ae.pageMarginBox,subject:J,center:ne,shouldUseTimeDampening:ce,getAutoScrollerOptions:ue});return pe&&canScrollDroppable(K,pe)?pe:null},scroll=({state:K,dragStartTime:J,shouldUseTimeDampening:ne,scrollWindow:oe,scrollDroppable:ce,getAutoScrollerOptions:ue})=>{const Ae=K.current.page.borderBoxCenter,xe=K.dimensions.draggables[K.critical.draggable.id].page.marginBox;if(K.isWindowScrollAllowed){const ye=K.viewport,Se=getWindowScrollChange({dragStartTime:J,viewport:ye,subject:xe,center:Ae,shouldUseTimeDampening:ne,getAutoScrollerOptions:ue});if(Se){oe(Se);return}}const me=getBestScrollableDroppable({center:Ae,destination:whatIsDraggedOver(K.impact),droppables:K.dimensions.droppables});if(!me)return;const ge=getDroppableScrollChange({dragStartTime:J,droppable:me,subject:xe,center:Ae,shouldUseTimeDampening:ne,getAutoScrollerOptions:ue});ge&&ce(me.descriptor.id,ge)},createFluidScroller=({scrollWindow:K,scrollDroppable:J,getAutoScrollerOptions:ne=()=>defaultAutoScrollerOptions})=>{const oe=rafSchd(K),ce=rafSchd(J);let ue=null;const Ae=me=>{ue||invariant();const{shouldUseTimeDampening:ge,dragStartTime:ye}=ue;scroll({state:me,scrollWindow:oe,scrollDroppable:ce,dragStartTime:ye,shouldUseTimeDampening:ge,getAutoScrollerOptions:ne})};return{start:me=>{ue&&invariant();const ge=Date.now();let ye=!1;const Se=()=>{ye=!0};scroll({state:me,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:Se,scrollDroppable:Se,getAutoScrollerOptions:ne}),ue={dragStartTime:ge,shouldUseTimeDampening:ye},ye&&Ae(me)},stop:()=>{ue&&(oe.cancel(),ce.cancel(),ue=null)},scroll:Ae}},createJumpScroller=({move:K,scrollDroppable:J,scrollWindow:ne})=>{const oe=(pe,xe)=>{const me=add$1(pe.current.client.selection,xe);K({client:me})},ce=(pe,xe)=>{if(!canScrollDroppable(pe,xe))return xe;const me=getDroppableOverlap(pe,xe);if(!me)return J(pe.descriptor.id,xe),null;const ge=subtract(xe,me);return J(pe.descriptor.id,ge),subtract(xe,ge)},ue=(pe,xe,me)=>{if(!pe||!canScrollWindow(xe,me))return me;const ge=getWindowOverlap(xe,me);if(!ge)return ne(me),null;const ye=subtract(me,ge);return ne(ye),subtract(me,ye)};return pe=>{const xe=pe.scrollJumpRequest;if(!xe)return;const me=whatIsDraggedOver(pe.impact);me||invariant();const ge=ce(pe.dimensions.droppables[me],xe);if(!ge)return;const ye=pe.viewport,Se=ue(pe.isWindowScrollAllowed,ye,ge);Se&&oe(pe,Se)}},createAutoScroller=({scrollDroppable:K,scrollWindow:J,move:ne,getAutoScrollerOptions:oe})=>{const ce=createFluidScroller({scrollWindow:J,scrollDroppable:K,getAutoScrollerOptions:oe}),ue=createJumpScroller({move:ne,scrollWindow:J,scrollDroppable:K});return{scroll:xe=>{if(!(oe().disabled||xe.phase!=="DRAGGING")){if(xe.movementMode==="FLUID"){ce.scroll(xe);return}xe.scrollJumpRequest&&ue(xe)}},start:ce.start,stop:ce.stop}};const prefix="data-rfd",dragHandle=(()=>{const K=`${prefix}-drag-handle`;return{base:K,draggableId:`${K}-draggable-id`,contextId:`${K}-context-id`}})(),draggable=(()=>{const K=`${prefix}-draggable`;return{base:K,contextId:`${K}-context-id`,id:`${K}-id`}})(),droppable=(()=>{const K=`${prefix}-droppable`;return{base:K,contextId:`${K}-context-id`,id:`${K}-id`}})(),scrollContainer={contextId:`${prefix}-scroll-container-context-id`},makeGetSelector=K=>J=>`[${J}="${K}"]`,getStyles=(K,J)=>K.map(ne=>{const oe=ne.styles[J];return oe?`${ne.selector} { ${oe} }`:""}).join(" "),noPointerEvents="pointer-events: none;";var getStyles$1=K=>{const J=makeGetSelector(K),ne=(()=>{const pe=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:J(dragHandle.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:pe,dragging:noPointerEvents,dropAnimating:pe}}})(),oe=(()=>{const pe=`
      transition: ${transitions.outOfTheWay};
    `;return{selector:J(draggable.contextId),styles:{dragging:pe,dropAnimating:pe,userCancel:pe}}})(),ce={selector:J(droppable.contextId),styles:{always:"overflow-anchor: none;"}},Ae=[oe,ne,ce,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:getStyles(Ae,"always"),resting:getStyles(Ae,"resting"),dragging:getStyles(Ae,"dragging"),dropAnimating:getStyles(Ae,"dropAnimating"),userCancel:getStyles(Ae,"userCancel")}};const useIsomorphicLayoutEffect=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports.useLayoutEffect:reactExports.useEffect;var useLayoutEffect=useIsomorphicLayoutEffect;const getHead=()=>{const K=document.querySelector("head");return K||invariant(),K},createStyleEl=K=>{const J=document.createElement("style");return K&&J.setAttribute("nonce",K),J.type="text/css",J};function useStyleMarshal(K,J){const ne=useMemo(()=>getStyles$1(K),[K]),oe=reactExports.useRef(null),ce=reactExports.useRef(null),ue=useCallback(memoizeOne(ye=>{const Se=ce.current;Se||invariant(),Se.textContent=ye}),[]),Ae=useCallback(ye=>{const Se=oe.current;Se||invariant(),Se.textContent=ye},[]);useLayoutEffect(()=>{!oe.current&&!ce.current||invariant();const ye=createStyleEl(J),Se=createStyleEl(J);return oe.current=ye,ce.current=Se,ye.setAttribute(`${prefix}-always`,K),Se.setAttribute(`${prefix}-dynamic`,K),getHead().appendChild(ye),getHead().appendChild(Se),Ae(ne.always),ue(ne.resting),()=>{const Te=Ne=>{const $e=Ne.current;$e||invariant(),getHead().removeChild($e),Ne.current=null};Te(oe),Te(ce)}},[J,Ae,ue,ne.always,ne.resting,K]);const pe=useCallback(()=>ue(ne.dragging),[ue,ne.dragging]),xe=useCallback(ye=>{if(ye==="DROP"){ue(ne.dropAnimating);return}ue(ne.userCancel)},[ue,ne.dropAnimating,ne.userCancel]),me=useCallback(()=>{ce.current&&ue(ne.resting)},[ue,ne.resting]);return useMemo(()=>({dragging:pe,dropping:xe,resting:me}),[pe,xe,me])}function querySelectorAll(K,J){return Array.from(K.querySelectorAll(J))}var getWindowFromEl=K=>K&&K.ownerDocument&&K.ownerDocument.defaultView?K.ownerDocument.defaultView:window;function isHtmlElement(K){return K instanceof getWindowFromEl(K).HTMLElement}function findDragHandle(K,J){const ne=`[${dragHandle.contextId}="${K}"]`,oe=querySelectorAll(document,ne);if(!oe.length)return null;const ce=oe.find(ue=>ue.getAttribute(dragHandle.draggableId)===J);return!ce||!isHtmlElement(ce)?null:ce}function useFocusMarshal(K){const J=reactExports.useRef({}),ne=reactExports.useRef(null),oe=reactExports.useRef(null),ce=reactExports.useRef(!1),ue=useCallback(function(Se,Te){const Ne={id:Se,focus:Te};return J.current[Se]=Ne,function(){const ke=J.current;ke[Se]!==Ne&&delete ke[Se]}},[]),Ae=useCallback(function(Se){const Te=findDragHandle(K,Se);Te&&Te!==document.activeElement&&Te.focus()},[K]),pe=useCallback(function(Se,Te){ne.current===Se&&(ne.current=Te)},[]),xe=useCallback(function(){oe.current||ce.current&&(oe.current=requestAnimationFrame(()=>{oe.current=null;const Se=ne.current;Se&&Ae(Se)}))},[Ae]),me=useCallback(function(Se){ne.current=null;const Te=document.activeElement;Te&&Te.getAttribute(dragHandle.draggableId)===Se&&(ne.current=Se)},[]);return useLayoutEffect(()=>(ce.current=!0,function(){ce.current=!1;const Se=oe.current;Se&&cancelAnimationFrame(Se)}),[]),useMemo(()=>({register:ue,tryRecordFocus:me,tryRestoreFocusRecorded:xe,tryShiftRecord:pe}),[ue,me,xe,pe])}function createRegistry(){const K={draggables:{},droppables:{}},J=[];function ne(ye){return J.push(ye),function(){const Te=J.indexOf(ye);Te!==-1&&J.splice(Te,1)}}function oe(ye){J.length&&J.forEach(Se=>Se(ye))}function ce(ye){return K.draggables[ye]||null}function ue(ye){const Se=ce(ye);return Se||invariant(),Se}const Ae={register:ye=>{K.draggables[ye.descriptor.id]=ye,oe({type:"ADDITION",value:ye})},update:(ye,Se)=>{const Te=K.draggables[Se.descriptor.id];Te&&Te.uniqueId===ye.uniqueId&&(delete K.draggables[Se.descriptor.id],K.draggables[ye.descriptor.id]=ye)},unregister:ye=>{const Se=ye.descriptor.id,Te=ce(Se);Te&&ye.uniqueId===Te.uniqueId&&(delete K.draggables[Se],K.droppables[ye.descriptor.droppableId]&&oe({type:"REMOVAL",value:ye}))},getById:ue,findById:ce,exists:ye=>!!ce(ye),getAllByType:ye=>Object.values(K.draggables).filter(Se=>Se.descriptor.type===ye)};function pe(ye){return K.droppables[ye]||null}function xe(ye){const Se=pe(ye);return Se||invariant(),Se}const me={register:ye=>{K.droppables[ye.descriptor.id]=ye},unregister:ye=>{const Se=pe(ye.descriptor.id);Se&&ye.uniqueId===Se.uniqueId&&delete K.droppables[ye.descriptor.id]},getById:xe,findById:pe,exists:ye=>!!pe(ye),getAllByType:ye=>Object.values(K.droppables).filter(Se=>Se.descriptor.type===ye)};function ge(){K.draggables={},K.droppables={},J.length=0}return{draggable:Ae,droppable:me,subscribe:ne,clean:ge}}function useRegistry(){const K=useMemo(createRegistry,[]);return reactExports.useEffect(()=>function(){Wt.version.startsWith("16")||Wt.version.startsWith("17")?requestAnimationFrame(K.clean):K.clean()},[K]),K}var StoreContext$1=Wt.createContext(null),getBodyElement=()=>{const K=document.body;return K||invariant(),K};const visuallyHidden={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var visuallyHidden$1=visuallyHidden;const getId=K=>`rfd-announcement-${K}`;function useAnnouncer(K){const J=useMemo(()=>getId(K),[K]),ne=reactExports.useRef(null);return reactExports.useEffect(function(){const ue=document.createElement("div");return ne.current=ue,ue.id=J,ue.setAttribute("aria-live","assertive"),ue.setAttribute("aria-atomic","true"),_extends(ue.style,visuallyHidden$1),getBodyElement().appendChild(ue),function(){setTimeout(function(){const xe=getBodyElement();xe.contains(ue)&&xe.removeChild(ue),ue===ne.current&&(ne.current=null)})}},[J]),useCallback(ce=>{const ue=ne.current;if(ue){ue.textContent=ce;return}},[])}let count$1=0;const defaults={separator:"::"};function useDeprecatedUniqueId(K,J=defaults){return useMemo(()=>`${K}${J.separator}${count$1++}`,[J.separator,K])}function useUniqueId(K,J=defaults){const ne=Wt.useId();return useMemo(()=>`${K}${J.separator}${ne}`,[J.separator,K,ne])}var useUniqueId$1="useId"in Wt?useUniqueId:useDeprecatedUniqueId;function getElementId({contextId:K,uniqueId:J}){return`rfd-hidden-text-${K}-${J}`}function useHiddenTextElement({contextId:K,text:J}){const ne=useUniqueId$1("hidden-text",{separator:"-"}),oe=useMemo(()=>getElementId({contextId:K,uniqueId:ne}),[ne,K]);return reactExports.useEffect(function(){const ue=document.createElement("div");return ue.id=oe,ue.textContent=J,ue.style.display="none",getBodyElement().appendChild(ue),function(){const pe=getBodyElement();pe.contains(ue)&&pe.removeChild(ue)}},[oe,J]),oe}var AppContext=Wt.createContext(null);function usePrevious(K){const J=reactExports.useRef(K);return reactExports.useEffect(()=>{J.current=K}),J}function create$2(){let K=null;function J(){return!!K}function ne(Ae){return Ae===K}function oe(Ae){K&&invariant();const pe={abandon:Ae};return K=pe,pe}function ce(){K||invariant(),K=null}function ue(){K&&(K.abandon(),ce())}return{isClaimed:J,isActive:ne,claim:oe,release:ce,tryAbandon:ue}}function isDragging(K){return K.phase==="IDLE"||K.phase==="DROP_ANIMATING"?!1:K.isDragging}const tab=9,enter=13,escape$1=27,space=32,pageUp=33,pageDown=34,end=35,home=36,arrowLeft=37,arrowUp=38,arrowRight=39,arrowDown=40,preventedKeys={[enter]:!0,[tab]:!0};var preventStandardKeyEvents=K=>{preventedKeys[K.keyCode]&&K.preventDefault()};const supportedEventName=(()=>{const K="visibilitychange";return typeof document>"u"?K:[K,`ms${K}`,`webkit${K}`,`moz${K}`,`o${K}`].find(oe=>`on${oe}`in document)||K})();var supportedPageVisibilityEventName=supportedEventName;const primaryButton=0,sloppyClickThreshold=5;function isSloppyClickThresholdExceeded(K,J){return Math.abs(J.x-K.x)>=sloppyClickThreshold||Math.abs(J.y-K.y)>=sloppyClickThreshold}const idle$1={type:"IDLE"};function getCaptureBindings({cancel:K,completed:J,getPhase:ne,setPhase:oe}){return[{eventName:"mousemove",fn:ce=>{const{button:ue,clientX:Ae,clientY:pe}=ce;if(ue!==primaryButton)return;const xe={x:Ae,y:pe},me=ne();if(me.type==="DRAGGING"){ce.preventDefault(),me.actions.move(xe);return}me.type!=="PENDING"&&invariant();const ge=me.point;if(!isSloppyClickThresholdExceeded(ge,xe))return;ce.preventDefault();const ye=me.actions.fluidLift(xe);oe({type:"DRAGGING",actions:ye})}},{eventName:"mouseup",fn:ce=>{const ue=ne();if(ue.type!=="DRAGGING"){K();return}ce.preventDefault(),ue.actions.drop({shouldBlockNextClick:!0}),J()}},{eventName:"mousedown",fn:ce=>{ne().type==="DRAGGING"&&ce.preventDefault(),K()}},{eventName:"keydown",fn:ce=>{if(ne().type==="PENDING"){K();return}if(ce.keyCode===escape$1){ce.preventDefault(),K();return}preventStandardKeyEvents(ce)}},{eventName:"resize",fn:K},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{ne().type==="PENDING"&&K()}},{eventName:"webkitmouseforcedown",fn:ce=>{const ue=ne();if(ue.type==="IDLE"&&invariant(),ue.actions.shouldRespectForcePress()){K();return}ce.preventDefault()}},{eventName:supportedPageVisibilityEventName,fn:K}]}function useMouseSensor(K){const J=reactExports.useRef(idle$1),ne=reactExports.useRef(noop$2$1),oe=useMemo(()=>({eventName:"mousedown",fn:function(ye){if(ye.defaultPrevented||ye.button!==primaryButton||ye.ctrlKey||ye.metaKey||ye.shiftKey||ye.altKey)return;const Se=K.findClosestDraggableId(ye);if(!Se)return;const Te=K.tryGetLock(Se,Ae,{sourceEvent:ye});if(!Te)return;ye.preventDefault();const Ne={x:ye.clientX,y:ye.clientY};ne.current(),me(Te,Ne)}}),[K]),ce=useMemo(()=>({eventName:"webkitmouseforcewillbegin",fn:ge=>{if(ge.defaultPrevented)return;const ye=K.findClosestDraggableId(ge);if(!ye)return;const Se=K.findOptionsForDraggable(ye);Se&&(Se.shouldRespectForcePress||K.canGetLock(ye)&&ge.preventDefault())}}),[K]),ue=useCallback(function(){const ye={passive:!1,capture:!0};ne.current=bindEvents(window,[ce,oe],ye)},[ce,oe]),Ae=useCallback(()=>{J.current.type!=="IDLE"&&(J.current=idle$1,ne.current(),ue())},[ue]),pe=useCallback(()=>{const ge=J.current;Ae(),ge.type==="DRAGGING"&&ge.actions.cancel({shouldBlockNextClick:!0}),ge.type==="PENDING"&&ge.actions.abort()},[Ae]),xe=useCallback(function(){const ye={capture:!0,passive:!1},Se=getCaptureBindings({cancel:pe,completed:Ae,getPhase:()=>J.current,setPhase:Te=>{J.current=Te}});ne.current=bindEvents(window,Se,ye)},[pe,Ae]),me=useCallback(function(ye,Se){J.current.type!=="IDLE"&&invariant(),J.current={type:"PENDING",point:Se,actions:ye},xe()},[xe]);useLayoutEffect(function(){return ue(),function(){ne.current()}},[ue])}function noop$1$1(){}const scrollJumpKeys={[pageDown]:!0,[pageUp]:!0,[home]:!0,[end]:!0};function getDraggingBindings(K,J){function ne(){J(),K.cancel()}function oe(){J(),K.drop()}return[{eventName:"keydown",fn:ce=>{if(ce.keyCode===escape$1){ce.preventDefault(),ne();return}if(ce.keyCode===space){ce.preventDefault(),oe();return}if(ce.keyCode===arrowDown){ce.preventDefault(),K.moveDown();return}if(ce.keyCode===arrowUp){ce.preventDefault(),K.moveUp();return}if(ce.keyCode===arrowRight){ce.preventDefault(),K.moveRight();return}if(ce.keyCode===arrowLeft){ce.preventDefault(),K.moveLeft();return}if(scrollJumpKeys[ce.keyCode]){ce.preventDefault();return}preventStandardKeyEvents(ce)}},{eventName:"mousedown",fn:ne},{eventName:"mouseup",fn:ne},{eventName:"click",fn:ne},{eventName:"touchstart",fn:ne},{eventName:"resize",fn:ne},{eventName:"wheel",fn:ne,options:{passive:!0}},{eventName:supportedPageVisibilityEventName,fn:ne}]}function useKeyboardSensor(K){const J=reactExports.useRef(noop$1$1),ne=useMemo(()=>({eventName:"keydown",fn:function(ue){if(ue.defaultPrevented||ue.keyCode!==space)return;const Ae=K.findClosestDraggableId(ue);if(!Ae)return;const pe=K.tryGetLock(Ae,ge,{sourceEvent:ue});if(!pe)return;ue.preventDefault();let xe=!0;const me=pe.snapLift();J.current();function ge(){xe||invariant(),xe=!1,J.current(),oe()}J.current=bindEvents(window,getDraggingBindings(me,ge),{capture:!0,passive:!1})}}),[K]),oe=useCallback(function(){const ue={passive:!1,capture:!0};J.current=bindEvents(window,[ne],ue)},[ne]);useLayoutEffect(function(){return oe(),function(){J.current()}},[oe])}const idle={type:"IDLE"},timeForLongPress=120,forcePressThreshold=.15;function getWindowBindings({cancel:K,getPhase:J}){return[{eventName:"orientationchange",fn:K},{eventName:"resize",fn:K},{eventName:"contextmenu",fn:ne=>{ne.preventDefault()}},{eventName:"keydown",fn:ne=>{if(J().type!=="DRAGGING"){K();return}ne.keyCode===escape$1&&ne.preventDefault(),K()}},{eventName:supportedPageVisibilityEventName,fn:K}]}function getHandleBindings({cancel:K,completed:J,getPhase:ne}){return[{eventName:"touchmove",options:{capture:!1},fn:oe=>{const ce=ne();if(ce.type!=="DRAGGING"){K();return}ce.hasMoved=!0;const{clientX:ue,clientY:Ae}=oe.touches[0],pe={x:ue,y:Ae};oe.preventDefault(),ce.actions.move(pe)}},{eventName:"touchend",fn:oe=>{const ce=ne();if(ce.type!=="DRAGGING"){K();return}oe.preventDefault(),ce.actions.drop({shouldBlockNextClick:!0}),J()}},{eventName:"touchcancel",fn:oe=>{if(ne().type!=="DRAGGING"){K();return}oe.preventDefault(),K()}},{eventName:"touchforcechange",fn:oe=>{const ce=ne();ce.type==="IDLE"&&invariant();const ue=oe.touches[0];if(!ue||!(ue.force>=forcePressThreshold))return;const pe=ce.actions.shouldRespectForcePress();if(ce.type==="PENDING"){pe&&K();return}if(pe){if(ce.hasMoved){oe.preventDefault();return}K();return}oe.preventDefault()}},{eventName:supportedPageVisibilityEventName,fn:K}]}function useTouchSensor(K){const J=reactExports.useRef(idle),ne=reactExports.useRef(noop$2$1),oe=useCallback(function(){return J.current},[]),ce=useCallback(function(Te){J.current=Te},[]),ue=useMemo(()=>({eventName:"touchstart",fn:function(Te){if(Te.defaultPrevented)return;const Ne=K.findClosestDraggableId(Te);if(!Ne)return;const $e=K.tryGetLock(Ne,pe,{sourceEvent:Te});if(!$e)return;const ke=Te.touches[0],{clientX:je,clientY:Ke}=ke,Ye={x:je,y:Ke};ne.current(),ye($e,Ye)}}),[K]),Ae=useCallback(function(){const Te={capture:!0,passive:!1};ne.current=bindEvents(window,[ue],Te)},[ue]),pe=useCallback(()=>{const Se=J.current;Se.type!=="IDLE"&&(Se.type==="PENDING"&&clearTimeout(Se.longPressTimerId),ce(idle),ne.current(),Ae())},[Ae,ce]),xe=useCallback(()=>{const Se=J.current;pe(),Se.type==="DRAGGING"&&Se.actions.cancel({shouldBlockNextClick:!0}),Se.type==="PENDING"&&Se.actions.abort()},[pe]),me=useCallback(function(){const Te={capture:!0,passive:!1},Ne={cancel:xe,completed:pe,getPhase:oe},$e=bindEvents(window,getHandleBindings(Ne),Te),ke=bindEvents(window,getWindowBindings(Ne),Te);ne.current=function(){$e(),ke()}},[xe,oe,pe]),ge=useCallback(function(){const Te=oe();Te.type!=="PENDING"&&invariant();const Ne=Te.actions.fluidLift(Te.point);ce({type:"DRAGGING",actions:Ne,hasMoved:!1})},[oe,ce]),ye=useCallback(function(Te,Ne){oe().type!=="IDLE"&&invariant();const $e=setTimeout(ge,timeForLongPress);ce({type:"PENDING",point:Ne,actions:Te,longPressTimerId:$e}),me()},[me,oe,ce,ge]);useLayoutEffect(function(){return Ae(),function(){ne.current();const Ne=oe();Ne.type==="PENDING"&&(clearTimeout(Ne.longPressTimerId),ce(idle))}},[oe,Ae,ce]),useLayoutEffect(function(){return bindEvents(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const interactiveTagNames=["input","button","textarea","select","option","optgroup","video","audio"];function isAnInteractiveElement(K,J){if(J==null)return!1;if(interactiveTagNames.includes(J.tagName.toLowerCase()))return!0;const oe=J.getAttribute("contenteditable");return oe==="true"||oe===""?!0:J===K?!1:isAnInteractiveElement(K,J.parentElement)}function isEventInInteractiveElement(K,J){const ne=J.target;return isHtmlElement(ne)?isAnInteractiveElement(K,ne):!1}var getBorderBoxCenterPosition=K=>getRect(K.getBoundingClientRect()).center;function isElement(K){return K instanceof getWindowFromEl(K).Element}const supportedMatchesName=(()=>{const K="matches";return typeof document>"u"?K:[K,"msMatchesSelector","webkitMatchesSelector"].find(oe=>oe in Element.prototype)||K})();function closestPonyfill(K,J){return K==null?null:K[supportedMatchesName](J)?K:closestPonyfill(K.parentElement,J)}function closest(K,J){return K.closest?K.closest(J):closestPonyfill(K,J)}function getSelector$1(K){return`[${dragHandle.contextId}="${K}"]`}function findClosestDragHandleFromEvent(K,J){const ne=J.target;if(!isElement(ne))return null;const oe=getSelector$1(K),ce=closest(ne,oe);return!ce||!isHtmlElement(ce)?null:ce}function tryGetClosestDraggableIdFromEvent(K,J){const ne=findClosestDragHandleFromEvent(K,J);return ne?ne.getAttribute(dragHandle.draggableId):null}function findDraggable(K,J){const ne=`[${draggable.contextId}="${K}"]`,ce=querySelectorAll(document,ne).find(ue=>ue.getAttribute(draggable.id)===J);return!ce||!isHtmlElement(ce)?null:ce}function preventDefault(K){K.preventDefault()}function isActive({expected:K,phase:J,isLockActive:ne,shouldWarn:oe}){return!(!ne()||K!==J)}function canStart({lockAPI:K,store:J,registry:ne,draggableId:oe}){if(K.isClaimed())return!1;const ce=ne.draggable.findById(oe);return!(!ce||!ce.options.isEnabled||!canStartDrag(J.getState(),oe))}function tryStart({lockAPI:K,contextId:J,store:ne,registry:oe,draggableId:ce,forceSensorStop:ue,sourceEvent:Ae}){if(!canStart({lockAPI:K,store:ne,registry:oe,draggableId:ce}))return null;const xe=oe.draggable.getById(ce),me=findDraggable(J,xe.descriptor.id);if(!me||Ae&&!xe.options.canDragInteractiveElements&&isEventInInteractiveElement(me,Ae))return null;const ge=K.claim(ue||noop$2$1);let ye="PRE_DRAG";function Se(){return xe.options.shouldRespectForcePress}function Te(){return K.isActive(ge)}function Ne(Xe,Je){isActive({expected:Xe,phase:ye,isLockActive:Te,shouldWarn:!0})&&ne.dispatch(Je())}const $e=Ne.bind(null,"DRAGGING");function ke(Xe){function Je(){K.release(),ye="COMPLETED"}ye!=="PRE_DRAG"&&(Je(),invariant()),ne.dispatch(lift$1(Xe.liftActionArgs)),ye="DRAGGING";function rt(Ze,et={shouldBlockNextClick:!1}){if(Xe.cleanup(),et.shouldBlockNextClick){const nt=bindEvents(window,[{eventName:"click",fn:preventDefault,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(nt)}Je(),ne.dispatch(drop$1({reason:Ze}))}return{isActive:()=>isActive({expected:"DRAGGING",phase:ye,isLockActive:Te,shouldWarn:!1}),shouldRespectForcePress:Se,drop:Ze=>rt("DROP",Ze),cancel:Ze=>rt("CANCEL",Ze),...Xe.actions}}function je(Xe){const Je=rafSchd(Ze=>{$e(()=>move({client:Ze}))});return{...ke({liftActionArgs:{id:ce,clientSelection:Xe,movementMode:"FLUID"},cleanup:()=>Je.cancel(),actions:{move:Je}}),move:Je}}function Ke(){const Xe={moveUp:()=>$e(moveUp),moveRight:()=>$e(moveRight),moveDown:()=>$e(moveDown),moveLeft:()=>$e(moveLeft)};return ke({liftActionArgs:{id:ce,clientSelection:getBorderBoxCenterPosition(me),movementMode:"SNAP"},cleanup:noop$2$1,actions:Xe})}function Ye(){isActive({expected:"PRE_DRAG",phase:ye,isLockActive:Te,shouldWarn:!0})&&K.release()}return{isActive:()=>isActive({expected:"PRE_DRAG",phase:ye,isLockActive:Te,shouldWarn:!1}),shouldRespectForcePress:Se,fluidLift:je,snapLift:Ke,abort:Ye}}const defaultSensors=[useMouseSensor,useKeyboardSensor,useTouchSensor];function useSensorMarshal({contextId:K,store:J,registry:ne,customSensors:oe,enableDefaultSensors:ce}){const ue=[...ce?defaultSensors:[],...oe||[]],Ae=reactExports.useState(()=>create$2())[0],pe=useCallback(function(ke,je){isDragging(ke)&&!isDragging(je)&&Ae.tryAbandon()},[Ae]);useLayoutEffect(function(){let ke=J.getState();return J.subscribe(()=>{const Ke=J.getState();pe(ke,Ke),ke=Ke})},[Ae,J,pe]),useLayoutEffect(()=>Ae.tryAbandon,[Ae.tryAbandon]);const xe=useCallback($e=>canStart({lockAPI:Ae,registry:ne,store:J,draggableId:$e}),[Ae,ne,J]),me=useCallback(($e,ke,je)=>tryStart({lockAPI:Ae,registry:ne,contextId:K,store:J,draggableId:$e,forceSensorStop:ke||null,sourceEvent:je&&je.sourceEvent?je.sourceEvent:null}),[K,Ae,ne,J]),ge=useCallback($e=>tryGetClosestDraggableIdFromEvent(K,$e),[K]),ye=useCallback($e=>{const ke=ne.draggable.findById($e);return ke?ke.options:null},[ne.draggable]),Se=useCallback(function(){Ae.isClaimed()&&(Ae.tryAbandon(),J.getState().phase!=="IDLE"&&J.dispatch(flush()))},[Ae,J]),Te=useCallback(()=>Ae.isClaimed(),[Ae]),Ne=useMemo(()=>({canGetLock:xe,tryGetLock:me,findClosestDraggableId:ge,findOptionsForDraggable:ye,tryReleaseLock:Se,isLockClaimed:Te}),[xe,me,ge,ye,Se,Te]);for(let $e=0;$e<ue.length;$e++)ue[$e](Ne)}const createResponders=K=>({onBeforeCapture:J=>{const ne=()=>{K.onBeforeCapture&&K.onBeforeCapture(J)};Wt.version.startsWith("16")||Wt.version.startsWith("17")?ne():reactDomExports.flushSync(ne)},onBeforeDragStart:K.onBeforeDragStart,onDragStart:K.onDragStart,onDragEnd:K.onDragEnd,onDragUpdate:K.onDragUpdate}),createAutoScrollerOptions=K=>({...defaultAutoScrollerOptions,...K.autoScrollerOptions,durationDampening:{...defaultAutoScrollerOptions.durationDampening,...K.autoScrollerOptions}});function getStore(K){return K.current||invariant(),K.current}function App(K){const{contextId:J,setCallbacks:ne,sensors:oe,nonce:ce,dragHandleUsageInstructions:ue}=K,Ae=reactExports.useRef(null),pe=usePrevious(K),xe=useCallback(()=>createResponders(pe.current),[pe]),me=useCallback(()=>createAutoScrollerOptions(pe.current),[pe]),ge=useAnnouncer(J),ye=useHiddenTextElement({contextId:J,text:ue}),Se=useStyleMarshal(J,ce),Te=useCallback(nt=>{getStore(Ae).dispatch(nt)},[]),Ne=useMemo(()=>bindActionCreators({publishWhileDragging,updateDroppableScroll,updateDroppableIsEnabled,updateDroppableIsCombineEnabled,collectionStarting},Te),[Te]),$e=useRegistry(),ke=useMemo(()=>createDimensionMarshal($e,Ne),[$e,Ne]),je=useMemo(()=>createAutoScroller({scrollWindow,scrollDroppable:ke.scrollDroppable,getAutoScrollerOptions:me,...bindActionCreators({move},Te)}),[ke.scrollDroppable,Te,me]),Ke=useFocusMarshal(J),Ye=useMemo(()=>createStore$1({announce:ge,autoScroller:je,dimensionMarshal:ke,focusMarshal:Ke,getResponders:xe,styleMarshal:Se}),[ge,je,ke,Ke,xe,Se]);Ae.current=Ye;const ze=useCallback(()=>{const nt=getStore(Ae);nt.getState().phase!=="IDLE"&&nt.dispatch(flush())},[]),Xe=useCallback(()=>{const nt=getStore(Ae).getState();return nt.phase==="DROP_ANIMATING"?!0:nt.phase==="IDLE"?!1:nt.isDragging},[]),Je=useMemo(()=>({isDragging:Xe,tryAbort:ze}),[Xe,ze]);ne(Je);const rt=useCallback(nt=>canStartDrag(getStore(Ae).getState(),nt),[]),Ze=useCallback(()=>isMovementAllowed(getStore(Ae).getState()),[]),et=useMemo(()=>({marshal:ke,focus:Ke,contextId:J,canLift:rt,isMovementAllowed:Ze,dragHandleUsageInstructionsId:ye,registry:$e}),[J,ke,ye,Ke,rt,Ze,$e]);return useSensorMarshal({contextId:J,store:Ye,registry:$e,customSensors:oe||null,enableDefaultSensors:K.enableDefaultSensors!==!1}),reactExports.useEffect(()=>ze,[ze]),Wt.createElement(AppContext.Provider,{value:et},Wt.createElement(Provider$2,{context:StoreContext$1,store:Ye},K.children))}let count=0;function useDeprecatedUniqueContextId(){return useMemo(()=>`${count++}`,[])}function useUniqueContextId(){return Wt.useId()}var useUniqueContextId$1="useId"in Wt?useUniqueContextId:useDeprecatedUniqueContextId;function DragDropContext(K){const J=useUniqueContextId$1(),ne=K.dragHandleUsageInstructions||preset$1.dragHandleUsageInstructions;return Wt.createElement(ErrorBoundary,null,oe=>Wt.createElement(App,{nonce:K.nonce,contextId:J,setCallbacks:oe,dragHandleUsageInstructions:ne,enableDefaultSensors:K.enableDefaultSensors,sensors:K.sensors,onBeforeCapture:K.onBeforeCapture,onBeforeDragStart:K.onBeforeDragStart,onDragStart:K.onDragStart,onDragUpdate:K.onDragUpdate,onDragEnd:K.onDragEnd,autoScrollerOptions:K.autoScrollerOptions},K.children))}const zIndexOptions={dragging:5e3,dropAnimating:4500},getDraggingTransition=(K,J)=>J?transitions.drop(J.duration):K?transitions.snap:transitions.fluid,getDraggingOpacity=(K,J)=>{if(K)return J?combine.opacity.drop:combine.opacity.combining},getShouldDraggingAnimate=K=>K.forceShouldAnimate!=null?K.forceShouldAnimate:K.mode==="SNAP";function getDraggingStyle(K){const ne=K.dimension.client,{offset:oe,combineWith:ce,dropping:ue}=K,Ae=!!ce,pe=getShouldDraggingAnimate(K),xe=!!ue,me=xe?transforms.drop(oe,Ae):transforms.moveTo(oe);return{position:"fixed",top:ne.marginBox.top,left:ne.marginBox.left,boxSizing:"border-box",width:ne.borderBox.width,height:ne.borderBox.height,transition:getDraggingTransition(pe,ue),transform:me,opacity:getDraggingOpacity(Ae,xe),zIndex:xe?zIndexOptions.dropAnimating:zIndexOptions.dragging,pointerEvents:"none"}}function getSecondaryStyle(K){return{transform:transforms.moveTo(K.offset),transition:K.shouldAnimateDisplacement?void 0:"none"}}function getStyle$1(K){return K.type==="DRAGGING"?getDraggingStyle(K):getSecondaryStyle(K)}function getDimension$1(K,J,ne=origin){const oe=window.getComputedStyle(J),ce=J.getBoundingClientRect(),ue=calculateBox(ce,oe),Ae=withScroll(ue,ne),pe={client:ue,tagName:J.tagName.toLowerCase(),display:oe.display},xe={x:ue.marginBox.width,y:ue.marginBox.height};return{descriptor:K,placeholder:pe,displaceBy:xe,client:ue,page:Ae}}function useDraggablePublisher(K){const J=useUniqueId$1("draggable"),{descriptor:ne,registry:oe,getDraggableRef:ce,canDragInteractiveElements:ue,shouldRespectForcePress:Ae,isEnabled:pe}=K,xe=useMemo(()=>({canDragInteractiveElements:ue,shouldRespectForcePress:Ae,isEnabled:pe}),[ue,pe,Ae]),me=useCallback(Te=>{const Ne=ce();return Ne||invariant(),getDimension$1(ne,Ne,Te)},[ne,ce]),ge=useMemo(()=>({uniqueId:J,descriptor:ne,options:xe,getDimension:me}),[ne,me,xe,J]),ye=reactExports.useRef(ge),Se=reactExports.useRef(!0);useLayoutEffect(()=>(oe.draggable.register(ye.current),()=>oe.draggable.unregister(ye.current)),[oe.draggable]),useLayoutEffect(()=>{if(Se.current){Se.current=!1;return}const Te=ye.current;ye.current=ge,oe.draggable.update(ge,Te)},[ge,oe.draggable])}var DroppableContext=Wt.createContext(null);function useRequiredContext(K){const J=reactExports.useContext(K);return J||invariant(),J}function preventHtml5Dnd(K){K.preventDefault()}const Draggable=K=>{const J=reactExports.useRef(null),ne=useCallback((Je=null)=>{J.current=Je},[]),oe=useCallback(()=>J.current,[]),{contextId:ce,dragHandleUsageInstructionsId:ue,registry:Ae}=useRequiredContext(AppContext),{type:pe,droppableId:xe}=useRequiredContext(DroppableContext),me=useMemo(()=>({id:K.draggableId,index:K.index,type:pe,droppableId:xe}),[K.draggableId,K.index,pe,xe]),{children:ge,draggableId:ye,isEnabled:Se,shouldRespectForcePress:Te,canDragInteractiveElements:Ne,isClone:$e,mapped:ke,dropAnimationFinished:je}=K;if(!$e){const Je=useMemo(()=>({descriptor:me,registry:Ae,getDraggableRef:oe,canDragInteractiveElements:Ne,shouldRespectForcePress:Te,isEnabled:Se}),[me,Ae,oe,Ne,Te,Se]);useDraggablePublisher(Je)}const Ke=useMemo(()=>Se?{tabIndex:0,role:"button","aria-describedby":ue,"data-rfd-drag-handle-draggable-id":ye,"data-rfd-drag-handle-context-id":ce,draggable:!1,onDragStart:preventHtml5Dnd}:null,[ce,ue,ye,Se]),Ye=useCallback(Je=>{ke.type==="DRAGGING"&&ke.dropping&&Je.propertyName==="transform"&&(Wt.version.startsWith("16")||Wt.version.startsWith("17")?je():reactDomExports.flushSync(je))},[je,ke]),ze=useMemo(()=>{const Je=getStyle$1(ke),rt=ke.type==="DRAGGING"&&ke.dropping?Ye:void 0;return{innerRef:ne,draggableProps:{"data-rfd-draggable-context-id":ce,"data-rfd-draggable-id":ye,style:Je,onTransitionEnd:rt},dragHandleProps:Ke}},[ce,Ke,ye,ke,Ye,ne]),Xe=useMemo(()=>({draggableId:me.id,type:me.type,source:{index:me.index,droppableId:me.droppableId}}),[me.droppableId,me.id,me.index,me.type]);return Wt.createElement(Wt.Fragment,null,ge(ze,ke.snapshot,Xe))};var Draggable$1=Draggable,isStrictEqual=(K,J)=>K===J,whatIsDraggedOverFromResult=K=>{const{combine:J,destination:ne}=K;return ne?ne.droppableId:J?J.droppableId:null};const getCombineWithFromResult=K=>K.combine?K.combine.draggableId:null,getCombineWithFromImpact=K=>K.at&&K.at.type==="COMBINE"?K.at.combine.draggableId:null;function getDraggableSelector(){const K=memoizeOne((ce,ue)=>({x:ce,y:ue})),J=memoizeOne((ce,ue,Ae=null,pe=null,xe=null)=>({isDragging:!0,isClone:ue,isDropAnimating:!!xe,dropAnimation:xe,mode:ce,draggingOver:Ae,combineWith:pe,combineTargetFor:null})),ne=memoizeOne((ce,ue,Ae,pe,xe=null,me=null,ge=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:xe,combineWith:me,mode:ue,offset:ce,dimension:Ae,forceShouldAnimate:ge,snapshot:J(ue,pe,xe,me,null)}}));return(ce,ue)=>{if(isDragging(ce)){if(ce.critical.draggable.id!==ue.draggableId)return null;const Ae=ce.current.client.offset,pe=ce.dimensions.draggables[ue.draggableId],xe=whatIsDraggedOver(ce.impact),me=getCombineWithFromImpact(ce.impact),ge=ce.forceShouldAnimate;return ne(K(Ae.x,Ae.y),ce.movementMode,pe,ue.isClone,xe,me,ge)}if(ce.phase==="DROP_ANIMATING"){const Ae=ce.completed;if(Ae.result.draggableId!==ue.draggableId)return null;const pe=ue.isClone,xe=ce.dimensions.draggables[ue.draggableId],me=Ae.result,ge=me.mode,ye=whatIsDraggedOverFromResult(me),Se=getCombineWithFromResult(me),Ne={duration:ce.dropDuration,curve:curves$1.drop,moveTo:ce.newHomeClientOffset,opacity:Se?combine.opacity.drop:null,scale:Se?combine.scale.drop:null};return{mapped:{type:"DRAGGING",offset:ce.newHomeClientOffset,dimension:xe,dropping:Ne,draggingOver:ye,combineWith:Se,mode:ge,forceShouldAnimate:null,snapshot:J(ge,pe,ye,Se,Ne)}}}return null}}function getSecondarySnapshot(K=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:K,combineWith:null}}const atRest={mapped:{type:"SECONDARY",offset:origin,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:getSecondarySnapshot(null)}};function getSecondarySelector(){const K=memoizeOne((Ae,pe)=>({x:Ae,y:pe})),J=memoizeOne(getSecondarySnapshot),ne=memoizeOne((Ae,pe=null,xe)=>({mapped:{type:"SECONDARY",offset:Ae,combineTargetFor:pe,shouldAnimateDisplacement:xe,snapshot:J(pe)}})),oe=Ae=>Ae?ne(origin,Ae,!0):null,ce=(Ae,pe,xe,me)=>{const ge=xe.displaced.visible[Ae],ye=!!(me.inVirtualList&&me.effected[Ae]),Se=tryGetCombine(xe),Te=Se&&Se.draggableId===Ae?pe:null;if(!ge){if(!ye)return oe(Te);if(xe.displaced.invisible[Ae])return null;const ke=negate(me.displacedBy.point),je=K(ke.x,ke.y);return ne(je,Te,!0)}if(ye)return oe(Te);const Ne=xe.displacedBy.point,$e=K(Ne.x,Ne.y);return ne($e,Te,ge.shouldAnimate)};return(Ae,pe)=>{if(isDragging(Ae))return Ae.critical.draggable.id===pe.draggableId?null:ce(pe.draggableId,Ae.critical.draggable.id,Ae.impact,Ae.afterCritical);if(Ae.phase==="DROP_ANIMATING"){const xe=Ae.completed;return xe.result.draggableId===pe.draggableId?null:ce(pe.draggableId,xe.result.draggableId,xe.impact,xe.afterCritical)}return null}}const makeMapStateToProps$1=()=>{const K=getDraggableSelector(),J=getSecondarySelector();return(oe,ce)=>K(oe,ce)||J(oe,ce)||atRest},mapDispatchToProps$1={dropAnimationFinished},ConnectedDraggable=connect(makeMapStateToProps$1,mapDispatchToProps$1,null,{context:StoreContext$1,areStatePropsEqual:isStrictEqual})(Draggable$1);var ConnectedDraggable$1=ConnectedDraggable;function PrivateDraggable(K){return useRequiredContext(DroppableContext).isUsingCloneFor===K.draggableId&&!K.isClone?null:Wt.createElement(ConnectedDraggable$1,K)}function PublicDraggable(K){const J=typeof K.isDragDisabled=="boolean"?!K.isDragDisabled:!0,ne=!!K.disableInteractiveElementBlocking,oe=!!K.shouldRespectForcePress;return Wt.createElement(PrivateDraggable,_extends({},K,{isClone:!1,isEnabled:J,canDragInteractiveElements:ne,shouldRespectForcePress:oe}))}const isEqual$2=K=>J=>K===J,isScroll=isEqual$2("scroll"),isAuto$1=isEqual$2("auto"),isEither=(K,J)=>J(K.overflowX)||J(K.overflowY),isElementScrollable=K=>{const J=window.getComputedStyle(K),ne={overflowX:J.overflowX,overflowY:J.overflowY};return isEither(ne,isScroll)||isEither(ne,isAuto$1)},isBodyScrollable=()=>!1,getClosestScrollable=K=>K==null?null:K===document.body?isBodyScrollable()?K:null:K===document.documentElement?null:isElementScrollable(K)?K:getClosestScrollable(K.parentElement);var getScroll=K=>({x:K.scrollLeft,y:K.scrollTop});const getIsFixed=K=>K?window.getComputedStyle(K).position==="fixed"?!0:getIsFixed(K.parentElement):!1;var getEnv=K=>{const J=getClosestScrollable(K),ne=getIsFixed(K);return{closestScrollable:J,isFixedOnPage:ne}},getDroppableDimension=({descriptor:K,isEnabled:J,isCombineEnabled:ne,isFixedOnPage:oe,direction:ce,client:ue,page:Ae,closest:pe})=>{const xe=(()=>{if(!pe)return null;const{scrollSize:Se,client:Te}=pe,Ne=getMaxScroll({scrollHeight:Se.scrollHeight,scrollWidth:Se.scrollWidth,height:Te.paddingBox.height,width:Te.paddingBox.width});return{pageMarginBox:pe.page.marginBox,frameClient:Te,scrollSize:Se,shouldClipSubject:pe.shouldClipSubject,scroll:{initial:pe.scroll,current:pe.scroll,max:Ne,diff:{value:origin,displacement:origin}}}})(),me=ce==="vertical"?vertical:horizontal,ge=getSubject({page:Ae,withPlaceholder:null,axis:me,frame:xe});return{descriptor:K,isCombineEnabled:ne,isFixedOnPage:oe,axis:me,isEnabled:J,client:ue,page:Ae,frame:xe,subject:ge}};const getClient=(K,J)=>{const ne=getBox(K);if(!J||K!==J)return ne;const oe=ne.paddingBox.top-J.scrollTop,ce=ne.paddingBox.left-J.scrollLeft,ue=oe+J.scrollHeight,Ae=ce+J.scrollWidth,xe=expand({top:oe,right:Ae,bottom:ue,left:ce},ne.border);return createBox({borderBox:xe,margin:ne.margin,border:ne.border,padding:ne.padding})};var getDimension=({ref:K,descriptor:J,env:ne,windowScroll:oe,direction:ce,isDropDisabled:ue,isCombineEnabled:Ae,shouldClipSubject:pe})=>{const xe=ne.closestScrollable,me=getClient(K,xe),ge=withScroll(me,oe),ye=(()=>{if(!xe)return null;const Te=getBox(xe),Ne={scrollHeight:xe.scrollHeight,scrollWidth:xe.scrollWidth};return{client:Te,page:withScroll(Te,oe),scroll:getScroll(xe),scrollSize:Ne,shouldClipSubject:pe}})();return getDroppableDimension({descriptor:J,isEnabled:!ue,isCombineEnabled:Ae,isFixedOnPage:ne.isFixedOnPage,direction:ce,client:me,page:ge,closest:ye})};const immediate={passive:!1},delayed={passive:!0};var getListenerOptions=K=>K.shouldPublishImmediately?immediate:delayed;const getClosestScrollableFromDrag=K=>K&&K.env.closestScrollable||null;function useDroppablePublisher(K){const J=reactExports.useRef(null),ne=useRequiredContext(AppContext),oe=useUniqueId$1("droppable"),{registry:ce,marshal:ue}=ne,Ae=usePrevious(K),pe=useMemo(()=>({id:K.droppableId,type:K.type,mode:K.mode}),[K.droppableId,K.mode,K.type]),xe=reactExports.useRef(pe),me=useMemo(()=>memoizeOne((ze,Xe)=>{J.current||invariant();const Je={x:ze,y:Xe};ue.updateDroppableScroll(pe.id,Je)}),[pe.id,ue]),ge=useCallback(()=>{const ze=J.current;return!ze||!ze.env.closestScrollable?origin:getScroll(ze.env.closestScrollable)},[]),ye=useCallback(()=>{const ze=ge();me(ze.x,ze.y)},[ge,me]),Se=useMemo(()=>rafSchd(ye),[ye]),Te=useCallback(()=>{const ze=J.current,Xe=getClosestScrollableFromDrag(ze);if(ze&&Xe||invariant(),ze.scrollOptions.shouldPublishImmediately){ye();return}Se()},[Se,ye]),Ne=useCallback((ze,Xe)=>{J.current&&invariant();const Je=Ae.current,rt=Je.getDroppableRef();rt||invariant();const Ze=getEnv(rt),et={ref:rt,descriptor:pe,env:Ze,scrollOptions:Xe};J.current=et;const nt=getDimension({ref:rt,descriptor:pe,env:Ze,windowScroll:ze,direction:Je.direction,isDropDisabled:Je.isDropDisabled,isCombineEnabled:Je.isCombineEnabled,shouldClipSubject:!Je.ignoreContainerClipping}),Ge=Ze.closestScrollable;return Ge&&(Ge.setAttribute(scrollContainer.contextId,ne.contextId),Ge.addEventListener("scroll",Te,getListenerOptions(et.scrollOptions))),nt},[ne.contextId,pe,Te,Ae]),$e=useCallback(()=>{const ze=J.current,Xe=getClosestScrollableFromDrag(ze);return ze&&Xe||invariant(),getScroll(Xe)},[]),ke=useCallback(()=>{const ze=J.current;ze||invariant();const Xe=getClosestScrollableFromDrag(ze);J.current=null,Xe&&(Se.cancel(),Xe.removeAttribute(scrollContainer.contextId),Xe.removeEventListener("scroll",Te,getListenerOptions(ze.scrollOptions)))},[Te,Se]),je=useCallback(ze=>{const Xe=J.current;Xe||invariant();const Je=getClosestScrollableFromDrag(Xe);Je||invariant(),Je.scrollTop+=ze.y,Je.scrollLeft+=ze.x},[]),Ke=useMemo(()=>({getDimensionAndWatchScroll:Ne,getScrollWhileDragging:$e,dragStopped:ke,scroll:je}),[ke,Ne,$e,je]),Ye=useMemo(()=>({uniqueId:oe,descriptor:pe,callbacks:Ke}),[Ke,pe,oe]);useLayoutEffect(()=>(xe.current=Ye.descriptor,ce.droppable.register(Ye),()=>{J.current&&ke(),ce.droppable.unregister(Ye)}),[Ke,pe,ke,Ye,ue,ce.droppable]),useLayoutEffect(()=>{J.current&&ue.updateDroppableIsEnabled(xe.current.id,!K.isDropDisabled)},[K.isDropDisabled,ue]),useLayoutEffect(()=>{J.current&&ue.updateDroppableIsCombineEnabled(xe.current.id,K.isCombineEnabled)},[K.isCombineEnabled,ue])}function noop$3(){}const empty$2={width:0,height:0,margin:noSpacing},getSize=({isAnimatingOpenOnMount:K,placeholder:J,animate:ne})=>K||ne==="close"?empty$2:{height:J.client.borderBox.height,width:J.client.borderBox.width,margin:J.client.margin},getStyle=({isAnimatingOpenOnMount:K,placeholder:J,animate:ne})=>{const oe=getSize({isAnimatingOpenOnMount:K,placeholder:J,animate:ne});return{display:J.display,boxSizing:"border-box",width:oe.width,height:oe.height,marginTop:oe.margin.top,marginRight:oe.margin.right,marginBottom:oe.margin.bottom,marginLeft:oe.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:ne!=="none"?transitions.placeholder:null}},Placeholder=K=>{const J=reactExports.useRef(null),ne=useCallback(()=>{J.current&&(clearTimeout(J.current),J.current=null)},[]),{animate:oe,onTransitionEnd:ce,onClose:ue,contextId:Ae}=K,[pe,xe]=reactExports.useState(K.animate==="open");reactExports.useEffect(()=>pe?oe!=="open"?(ne(),xe(!1),noop$3):J.current?noop$3:(J.current=setTimeout(()=>{J.current=null,xe(!1)}),ne):noop$3,[oe,pe,ne]);const me=useCallback(ye=>{ye.propertyName==="height"&&(ce(),oe==="close"&&ue())},[oe,ue,ce]),ge=getStyle({isAnimatingOpenOnMount:pe,animate:K.animate,placeholder:K.placeholder});return Wt.createElement(K.placeholder.tagName,{style:ge,"data-rfd-placeholder-context-id":Ae,onTransitionEnd:me,ref:K.innerRef})};var Placeholder$1=Wt.memo(Placeholder);class AnimateInOut extends Wt.PureComponent{constructor(...J){super(...J),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(J,ne){return J.shouldAnimate?J.on?{isVisible:!0,data:J.on,animate:"open"}:ne.isVisible?{isVisible:!0,data:ne.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!J.on,data:J.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const J={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(J)}}const Droppable=K=>{const J=reactExports.useContext(AppContext);J||invariant();const{contextId:ne,isMovementAllowed:oe}=J,ce=reactExports.useRef(null),ue=reactExports.useRef(null),{children:Ae,droppableId:pe,type:xe,mode:me,direction:ge,ignoreContainerClipping:ye,isDropDisabled:Se,isCombineEnabled:Te,snapshot:Ne,useClone:$e,updateViewportMaxScroll:ke,getContainerForClone:je}=K,Ke=useCallback(()=>ce.current,[]),Ye=useCallback((Ge=null)=>{ce.current=Ge},[]);useCallback(()=>ue.current,[]);const ze=useCallback((Ge=null)=>{ue.current=Ge},[]),Xe=useCallback(()=>{oe()&&ke({maxScroll:getMaxWindowScroll()})},[oe,ke]);useDroppablePublisher({droppableId:pe,type:xe,mode:me,direction:ge,isDropDisabled:Se,isCombineEnabled:Te,ignoreContainerClipping:ye,getDroppableRef:Ke});const Je=useMemo(()=>Wt.createElement(AnimateInOut,{on:K.placeholder,shouldAnimate:K.shouldAnimatePlaceholder},({onClose:Ge,data:ve,animate:Be})=>Wt.createElement(Placeholder$1,{placeholder:ve,onClose:Ge,innerRef:ze,animate:Be,contextId:ne,onTransitionEnd:Xe})),[ne,Xe,K.placeholder,K.shouldAnimatePlaceholder,ze]),rt=useMemo(()=>({innerRef:Ye,placeholder:Je,droppableProps:{"data-rfd-droppable-id":pe,"data-rfd-droppable-context-id":ne}}),[ne,pe,Je,Ye]),Ze=$e?$e.dragging.draggableId:null,et=useMemo(()=>({droppableId:pe,type:xe,isUsingCloneFor:Ze}),[pe,Ze,xe]);function nt(){if(!$e)return null;const{dragging:Ge,render:ve}=$e,Be=Wt.createElement(PrivateDraggable,{draggableId:Ge.draggableId,index:Ge.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(Re,Ie)=>ve(Re,Ie,Ge));return ReactDOM.createPortal(Be,je())}return Wt.createElement(DroppableContext.Provider,{value:et},Ae(rt,Ne),nt())};var Droppable$1=Droppable;function getBody(){return document.body||invariant(),document.body}const defaultProps$1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:getBody},attachDefaultPropsToOwnProps=K=>{let J={...K},ne;for(ne in defaultProps$1)K[ne]===void 0&&(J={...J,[ne]:defaultProps$1[ne]});return J},isMatchingType=(K,J)=>K===J.droppable.type,getDraggable=(K,J)=>J.draggables[K.draggable.id],makeMapStateToProps=()=>{const K={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},J={...K,shouldAnimatePlaceholder:!1},ne=memoizeOne(ue=>({draggableId:ue.id,type:ue.type,source:{index:ue.index,droppableId:ue.droppableId}})),oe=memoizeOne((ue,Ae,pe,xe,me,ge)=>{const ye=me.descriptor.id;if(me.descriptor.droppableId===ue){const Ne=ge?{render:ge,dragging:ne(me.descriptor)}:null,$e={isDraggingOver:pe,draggingOverWith:pe?ye:null,draggingFromThisWith:ye,isUsingPlaceholder:!0};return{placeholder:me.placeholder,shouldAnimatePlaceholder:!1,snapshot:$e,useClone:Ne}}if(!Ae)return J;if(!xe)return K;const Te={isDraggingOver:pe,draggingOverWith:ye,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:me.placeholder,shouldAnimatePlaceholder:!0,snapshot:Te,useClone:null}});return(ue,Ae)=>{const pe=attachDefaultPropsToOwnProps(Ae),xe=pe.droppableId,me=pe.type,ge=!pe.isDropDisabled,ye=pe.renderClone;if(isDragging(ue)){const Se=ue.critical;if(!isMatchingType(me,Se))return J;const Te=getDraggable(Se,ue.dimensions),Ne=whatIsDraggedOver(ue.impact)===xe;return oe(xe,ge,Ne,Ne,Te,ye)}if(ue.phase==="DROP_ANIMATING"){const Se=ue.completed;if(!isMatchingType(me,Se.critical))return J;const Te=getDraggable(Se.critical,ue.dimensions);return oe(xe,ge,whatIsDraggedOverFromResult(Se.result)===xe,whatIsDraggedOver(Se.impact)===xe,Te,ye)}if(ue.phase==="IDLE"&&ue.completed&&!ue.shouldFlush){const Se=ue.completed;if(!isMatchingType(me,Se.critical))return J;const Te=whatIsDraggedOver(Se.impact)===xe,Ne=!!(Se.impact.at&&Se.impact.at.type==="COMBINE"),$e=Se.critical.droppable.id===xe;return Te?Ne?K:J:$e?K:J}return J}},mapDispatchToProps={updateViewportMaxScroll},ConnectedDroppable=connect(makeMapStateToProps,mapDispatchToProps,(K,J,ne)=>({...attachDefaultPropsToOwnProps(ne),...K,...J}),{context:StoreContext$1,areStatePropsEqual:isStrictEqual})(Droppable$1);var ConnectedDroppable$1=ConnectedDroppable;const GridContext=reactExports.createContext({}),ScrollCorner=()=>jsxRuntimeExports.jsxs("div",{className:"scrollCorner",children:[jsxRuntimeExports.jsx("div",{className:"scrollCorner__separator"}),jsxRuntimeExports.jsx("div",{})]}),container$C="_container_z0b29_1",columnResizer="_columnResizer_z0b29_8",columnResizerLast="_columnResizerLast_z0b29_21",item="_item_z0b29_34",isResizing="_isResizing_z0b29_39",styles$1n={container:container$C,columnResizer,columnResizerLast,item,isResizing},ColumnResizer=({isResizing:K,lastEl:J=!1,...ne})=>jsxRuntimeExports.jsx("div",{className:cx(styles$1n.container,J?styles$1n.columnResizerLast:styles$1n.columnResizer),...ne,children:jsxRuntimeExports.jsx("div",{className:cx(styles$1n.item,{[styles$1n.isResizing]:K})})}),HeaderWrapperCell=({className:K,isDragOccurring:J,column:ne,snapshot:oe,provided:ce,children:ue,lastEl:Ae=!1})=>{var Te;const pe=reactExports.useRef(null),{key:xe,...me}=ne.getHeaderProps(),ge=reactExports.useCallback(()=>pe.current?pe.current.getBoundingClientRect().width:0,[]),ye=reactExports.useMemo(()=>{if(J){const{isDragging:Ne}=oe;return{...ce.draggableProps.style,...!Ne&&{width:ge()}}}return{...ne.applyMaxWidth&&{maxWidth:ne.maxWidth}}},[J,ne.applyMaxWidth,ne.maxWidth,oe,ce.draggableProps.style,ge]),Se=reactExports.useCallback(Ne=>{ce.innerRef(Ne),pe.current=Ne},[ce]);return jsxRuntimeExports.jsxs("div",{...me,children:[jsxRuntimeExports.jsx("div",{className:K,ref:Se,...ce.draggableProps,...ce.dragHandleProps,style:ye,children:ue}),!J&&jsxRuntimeExports.jsx(ColumnResizer,{...(Te=ne.getResizerProps)==null?void 0:Te.call(ne),isResizing:ne.isResizing,lastEl:Ae})]},xe)};var SortOrderEnum=(K=>(K.ASC="asc",K.DESC="desc",K.NONE="none",K))(SortOrderEnum||{});const sortDropdownItems=[{label:"Sort Asc",value:SortOrderEnum.ASC,icon:jsxRuntimeExports.jsx(nB,{})},{label:"Sort Desc",value:SortOrderEnum.DESC,icon:jsxRuntimeExports.jsx(rB,{})},{label:"No Sort",value:SortOrderEnum.NONE,icon:jsxRuntimeExports.jsx(oB,{})}],dropdownItem$1="_dropdownItem_1haqw_1",dropdownItem__active="_dropdownItem__active_1haqw_15",styles$1m={dropdownItem:dropdownItem$1,dropdownItem__active},SortDropdown=({gridRef:K,handleChangeSorting:J,sorting:ne})=>{const[oe,{set:ce}]=useBoolean(!1),ue=(pe,xe)=>{pe.stopPropagation(),J(xe),ce(!1)},Ae=pe=>{switch(pe){case!1:return SortOrderEnum.ASC;case!0:return SortOrderEnum.DESC;default:return SortOrderEnum.NONE}};return jsxRuntimeExports.jsx(X_,{open:oe,onOpenChange:ce,dropdownRender:()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:sortDropdownItems.map(({value:pe,label:xe,icon:me})=>jsxRuntimeExports.jsxs("div",{onClick:ge=>ue(ge,pe),className:cx(styles$1m.dropdownItem,{[styles$1m.dropdownItem__active]:Ae(ne)===pe}),children:[me,jsxRuntimeExports.jsx("span",{children:xe})]},pe))}),onClick:pe=>pe.stopPropagation(),children:jsxRuntimeExports.jsx(oa,{testid:"table-header-sort-dropdown-icon",children:jsxRuntimeExports.jsx(rA,{})})})},sorting="_sorting_z6g7c_1",sortingTitleBlock="_sortingTitleBlock_z6g7c_11",headerCell="_headerCell_z6g7c_32",titleBlock="_titleBlock_z6g7c_45",container$B="_container_z6g7c_55",header$3="_header_z6g7c_32",requiredIcon="_requiredIcon_z6g7c_67",title$2="_title_z6g7c_45",titleContent="_titleContent_z6g7c_75",sortingTitleBlockReadOnly="_sortingTitleBlockReadOnly_z6g7c_84",styles$1l={sorting,sortingTitleBlock,headerCell,titleBlock,container:container$B,header:header$3,requiredIcon,title:title$2,titleContent,sortingTitleBlockReadOnly},HeaderCell=({gridRef:K,column:J,sortByProps:ne,gridMode:oe,onSortByChanged:ce})=>{const{state:ue}=useDndContext(),Ae=reactExports.useCallback(xe=>{if(J.canSort)if(xe===SortOrderEnum.NONE)J.clearSortBy(),ce([]);else{const me=xe===SortOrderEnum.DESC;J.toggleSortBy(me),ce([{id:J.id,desc:me}])}},[J]),pe=()=>J.customHeader?jsxRuntimeExports.jsx("div",{className:styles$1l.titleBlock,children:J.render("Header")}):J.canSort?jsxRuntimeExports.jsxs("div",{className:cx(styles$1l.sortingTitleBlock,{[styles$1l.sortingTitleBlockReadOnly]:ue.isTypeReadOnly}),style:ne.style,onClick:ne.onClick,children:[jsxRuntimeExports.jsxs("div",{className:styles$1l.container,children:[jsxRuntimeExports.jsx("div",{className:styles$1l.header,children:J.render("Header")}),jsxRuntimeExports.jsx("span",{className:styles$1l.requiredIcon,children:oe===GridModeEnum.EDITOR&&J.isRequired&&jsxRuntimeExports.jsx(LF$2,{})})]}),jsxRuntimeExports.jsx("div",{className:styles$1l.sorting,children:jsxRuntimeExports.jsx(SortDropdown,{gridRef:K,handleChangeSorting:Ae,sorting:J.isSortedDesc})})]}):jsxRuntimeExports.jsx("div",{className:cx(styles$1l.headerCell,styles$1l.titleBlock),children:jsxRuntimeExports.jsxs("div",{className:styles$1l.titleContent,children:[oe===GridModeEnum.EDITOR&&J.isRequired&&jsxRuntimeExports.jsx(LF$2,{}),jsxRuntimeExports.jsx("div",{className:styles$1l.title,children:J.render("Header")})]})});return jsxRuntimeExports.jsx(mf,{title:J.id===columnIdEnum.filter||J.id===columnIdEnum.handlerStatus?"":J.render("Header"),children:pe()})},row$4="_row_ns2py_1",container$A="_container_ns2py_8",headerGroup="_headerGroup_ns2py_12",cell$1="_cell_ns2py_16",filterContainer="_filterContainer_ns2py_23",headerWrapper="_headerWrapper_ns2py_28",filter$2="_filter_ns2py_23",scrollCorner="_scrollCorner_ns2py_37",styles$1k={row:row$4,container:container$A,headerGroup,cell:cell$1,filterContainer,headerWrapper,filter:filter$2,scrollCorner},TableHeader=({isTableBodyVerticallyScrollable:K,gridRef:J,isShowCorner:ne,headerGroups:oe,gridMode:ce,onSortByChanged:ue})=>{const{headerRef:Ae,changeOrderColumns:pe}=reactExports.useContext(GridContext),[xe,me]=reactExports.useState(!1),ge=()=>{me(!0)},ye=Te=>{me(!1);const{source:Ne,destination:$e}=Te;if(!$e)return;const ke=$e.index===0,je=$e.index+1;pe(Ne.index,ke?je:$e.index)},Se=(Te,Ne,$e)=>{const ke=Te.getSortByToggleProps();return jsxRuntimeExports.jsx("div",{className:styles$1k.headerWrapper,children:jsxRuntimeExports.jsx(PublicDraggable,{isDragDisabled:Te.suppressDrag,draggableId:Te.id,index:Ne,children:(je,Ke)=>jsxRuntimeExports.jsx(HeaderWrapperCell,{isDragOccurring:xe,snapshot:Ke,provided:je,column:Te,className:styles$1k.cell,lastEl:$e.length-1===Ne,children:jsxRuntimeExports.jsx(HeaderCell,{gridRef:J,column:Te,sortByProps:ke,gridMode:ce,onSortByChanged:ue})})},Te.id)},Te.id)};return jsxRuntimeExports.jsxs("div",{ref:Ae,className:styles$1k.row,children:[oe.map((Te,Ne)=>{const{key:$e,...ke}=Te.getHeaderGroupProps();return jsxRuntimeExports.jsx(DragDropContext,{onBeforeCapture:ge,onDragEnd:ye,children:jsxRuntimeExports.jsx(ConnectedDroppable$1,{droppableId:"droppable",direction:"horizontal",renderClone:(je,Ke,Ye)=>{const ze=oe[Ne].headers[Ye.source.index],Xe=ze.getSortByToggleProps();return jsxRuntimeExports.jsx(HeaderWrapperCell,{isDragOccurring:xe,snapshot:Ke,provided:je,column:ze,className:styles$1k.cell,children:jsxRuntimeExports.jsx(HeaderCell,{gridRef:J,column:ze,sortByProps:Xe,gridMode:ce,onSortByChanged:ue})})},children:je=>jsxRuntimeExports.jsxs("div",{...ke,ref:je.innerRef,className:styles$1k.container,children:[jsxRuntimeExports.jsxs("div",{className:styles$1k.headerGroup,children:[Te.headers.map(Se),je.placeholder,K&&jsxRuntimeExports.jsx("div",{className:styles$1k.scrollCorner})]}),jsxRuntimeExports.jsx("div",{className:styles$1k.filter,children:Te.headers.map(Ke=>jsxRuntimeExports.jsx("div",{className:styles$1k.headerWrapper,style:{width:Ke==null?void 0:Ke.totalWidth},children:Ke.canFilter?jsxRuntimeExports.jsx("div",{className:cx({[styles$1k.filterContainer]:ce!==GridModeEnum.EDITOR}),style:{width:Ke==null?void 0:Ke.totalWidth},children:Ke.render("Filter")}):null},Ke==null?void 0:Ke.id))})]})})},$e)}),ne&&jsxRuntimeExports.jsx(ScrollCorner,{})]})},ContextMenu=reactExports.createContext({handleOpenContextMenu:()=>{}}),HIDE_EVENT_NAMES=["resize","contextmenu","scroll","blur"],contextMenu="_contextMenu_1d3qn_1",contextMenuItem="_contextMenuItem_1d3qn_13",styles$1j={contextMenu,contextMenuItem},ContextMenuProvider=({children:K})=>{const J=reactExports.useId(),ne=reactExports.useRef(null),[oe,ce]=reactExports.useState(),ue=reactExports.useCallback(ge=>{if(!ge)return;const{items:ye,e:Se}=ge,{clientX:Te,clientY:Ne}=Se,Ke=Math.max(document.documentElement.clientWidth,window.innerWidth)-170-15;ce({isOpen:!0,position:[Math.min(Te,Ke),Ne],items:ye})},[]),Ae=reactExports.useCallback(ge=>{if(!ge)return;const{e:ye,items:Se}=ge;ye.stopPropagation(),eventManager.emit("[Context menu] hide all").emit(J,{items:Se,e:ye})},[]),pe=reactExports.useCallback(()=>{ce({isOpen:!1,position:[],items:[]})},[]),xe=reactExports.useCallback(ge=>{ge(),pe()},[pe]),me=reactExports.useCallback(ge=>{ne.current&&ne.current.contains(ge.target)||pe()},[pe]);return reactExports.useEffect(()=>(eventManager.subscribe(J,ue).subscribe("[Context menu] hide all",pe),()=>{eventManager.unsubscribe(J,ue).unsubscribe("[Context menu] hide all",pe)}),[J]),reactExports.useEffect(()=>(oe!=null&&oe.isOpen&&(HIDE_EVENT_NAMES.forEach(ge=>window.addEventListener(ge,pe)),window.addEventListener("click",me,!0)),()=>{HIDE_EVENT_NAMES.forEach(ge=>window.removeEventListener(ge,pe)),window.removeEventListener("click",me,!0)}),[pe,oe==null?void 0:oe.isOpen]),jsxRuntimeExports.jsxs(ContextMenu.Provider,{value:{handleOpenContextMenu:Ae},children:[(oe==null?void 0:oe.isOpen)&&reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{ref:ne,className:styles$1j.contextMenu,style:{left:oe.position[0],top:oe.position[1]},children:oe.items.map(({title:ge,icon:ye,onClick:Se})=>jsxRuntimeExports.jsxs("div",{onMouseDown:Te=>handleMouseDown(Te,{[ButtonCode.MAIN]:()=>xe(Se)}),className:styles$1j.contextMenuItem,children:[ye,jsxRuntimeExports.jsx("div",{children:ge})]},ge))}),document.body),K]})},useContextMenu=()=>reactExports.useContext(ContextMenu),lineBreakSymbol="_lineBreakSymbol_1b0ap_1",bodyCell="_bodyCell_1b0ap_6",editorCell="_editorCell_1b0ap_18",cellSelected="_cellSelected_1b0ap_22",activelySelected="_activelySelected_1b0ap_26",wordWrapCell="_wordWrapCell_1b0ap_33",rowBorder="_rowBorder_1b0ap_39",dangerCell="_dangerCell_1b0ap_43",numberCell="_numberCell_1b0ap_47",editorBodyCell="_editorBodyCell_1b0ap_51",styles$1i={lineBreakSymbol,bodyCell,editorCell,cellSelected,activelySelected,wordWrapCell,rowBorder,dangerCell,numberCell,editorBodyCell},TableBodyCell$1=reactExports.memo(({cell:K,selectedRangeCells:J,gridMode:ne,isCellActivelySelected:oe,cellRowsCount:ce,isLineBreakSymbol:ue=!1,passedRowClass:Ae})=>{const pe=reactExports.useMemo(()=>K.getCellProps(),[K]),xe=reactExports.useRef(null),me=reactExports.useMemo(()=>({...pe.style,...K.column.applyMaxWidth&&{maxWidth:K.column.maxWidth},...ne===GridModeEnum.EDITOR&&{backgroundColor:"var(--bs-gray-500)"}}),[K.column.applyMaxWidth,K.column.maxWidth,pe.style,ne]),ge=reactExports.useMemo(()=>J[K.id],[K.id,J]),ye=isString$2(K.value)&&isStringifiedTimeStamp(K.value),Se=reactExports.useMemo(()=>{if(ye)return jsxRuntimeExports.jsx("span",{children:K.value.replace(/-7[a-z0-9]+$/,"")});if(ue&&isString$2(K.value)){const je=K.value.split(`
`).map((Ke,Ye,ze)=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[Ke,Ye<ze.length-1&&jsxRuntimeExports.jsx("span",{className:styles$1i.lineBreakSymbol,children:""})]},Ye));return jsxRuntimeExports.jsx("span",{children:je})}return K.render("Cell")},[K.value]),{key:Te,...Ne}=pe,$e=ce&&ce===1&&ne===GridModeEnum.MAIN?!1:isDefined$1(ce),ke=ye?K.value:Se;return jsxRuntimeExports.jsx(mf,{title:K.column.id===columnIdEnum.filter||K.column.id===columnIdEnum.handlerStatus||isNullable(K.value)||isEmptyString(K.value)||isObject$9(K.value)?"":ke,status:"info",children:reactExports.createElement("div",{...Ne,...K.getCellRangeSelectionProps(),key:Te,ref:xe,style:{...me,WebkitLineClamp:ce||CellRowsCount.ONE},className:cx(Ae,styles$1i.bodyCell,{[styles$1i.editorCell]:ne===GridModeEnum.EDITOR,[styles$1i.cellSelected]:ge&&ne!==GridModeEnum.EDITOR,[styles$1i.activelySelected]:oe,[styles$1i.dangerCell]:K.column.columnType!=="String"&&isNegativeNumber(K.value),[styles$1i.numberCell]:isNumberType(K.column.columnType),[styles$1i.editorBodyCell]:ne===GridModeEnum.EDITOR&&K.column.id!==ColumnNameType.FILTER,[styles$1i.wordWrapCell]:$e,[styles$1i.rowBorder]:externalStorage.getIsRowBorder()})},Se)})});TableBodyCell$1.displayName="TableBodyCell";const tableRow="_tableRow_1ip4v_1",active$1="_active_1ip4v_18",activeRow$1="_activeRow_1ip4v_22",selectedRow="_selectedRow_1ip4v_26",styles$1h={tableRow,active:active$1,activeRow:activeRow$1,selectedRow},TableRow=reactExports.memo(({style:K,rowIndex:J,row:ne,markedIndex:oe,selectedRangeCells:ce,gridMode:ue,onClick:Ae,onDoubleClick:pe,selectedRowId:xe,selectedRowsRange:me,measureElement:ge,virtualRowIndex:ye,cellRowsCount:Se,isLineBreakSymbol:Te,rowHeight:Ne})=>{const $e=reactExports.useCallback(ze=>ze===xe,[xe]),ke=reactExports.useMemo(()=>$e(ne.id)?styles$1h.activeRow:ue!==GridModeEnum.EDITOR&&J===oe&&Object.keys(me).length===0?styles$1h.selectedRow:"",[ue,oe,ne.id,J,xe,$e]),{key:je,...Ke}=ne.getRowProps({style:K}),Ye=isDefined$1(Se)?Number(Se):Se;return reactExports.createElement("div",{...Ke,key:je,ref:ge,"data-index":ye,className:cx(styles$1h.tableRow,{[styles$1h.active]:$e(ne.id)}),style:{minHeight:`${Ne}px`},"data-row-id":ne.id,"data-row-index":J,onClick:Ae,onDoubleClick:pe},ne.cells.map(ze=>{const Xe=ze.getCellProps();return jsxRuntimeExports.jsx(TableBodyCell$1,{cell:ze,selectedRangeCells:ce,gridMode:ue,isCellActivelySelected:$e(ne.id)&&ue!==GridModeEnum.EDITOR&&ce[ze.id],cellRowsCount:Ye,isLineBreakSymbol:Te,passedRowClass:ke},Xe.key)}))});TableRow.displayName="TableRow";const body="_body_14cep_1",container$z="_container_14cep_9",content$b="_content_14cep_14",styles$1g={body,container:container$z,content:content$b},TableBody=({isHiddenVerticalScroll:K,setHiddenVerticalScroll:J,isDefaultMarkedIndex:ne,markedIndex:oe,columns:ce,getTableBodyProps:ue,prepareRow:Ae,rows:pe,preFilteredRows:xe,selectedCellIds:me,selectedRangeCells:ge,selectedRowsRange:ye,selectedRowsIds:Se,onSelectedRowsRangeChanged:Te,gridMode:Ne,rowHeight:$e=Ne===GridModeEnum.EDITOR?25:28,handleCopySelectedRangeCells:ke,onRowDoubleClicked:je,selectedRowId:Ke,onSelectRowId:Ye,navigationKeyDownHandler:ze,rewriteActiveRowStartCell:Xe,selectNewCellsArr:Je,selectProvidedRowsCells:rt,selectedRowsPerPage:Ze,setSelectedRowsPerPage:et,updateSelectedRowsPerPageState:nt,isSelectAllRecordsBtnClicked:Ge,setIsSelectAllRecordsBtnClicked:ve,setSelectedCellIds:Be,changeSelectedCell:Re,cellRowsCount:Ie,isLineBreakSymbol:Fe,isRowFocus:qe,onChangeIsRowFocus:We,calculateElementHiehgt:Ue,handleTableBodyScroll:_e,defaultScroll:Qe,setCurrentSelectedCellIds:tt})=>{var ur;const it=reactExports.useRef(null),{bodyRef:at}=reactExports.useContext(GridContext),{t:ot}=useTranslation(),{handleOpenContextMenu:lt}=useContextMenu(),st=reactExports.useRef(0),ut=Object.keys(Se),[ft,dt]=reactExports.useState(0),{debounce:Bt}=useDebounce(100),[pt,mt]=reactExports.useState(0),[bt,xt]=reactExports.useState([]),yt=reactExports.useMemo(()=>ce.filter($t=>!$t.suppressHideColumn).length>0,[ce]);reactExports.useLayoutEffect(()=>{if(!ne&&Ne===GridModeEnum.MAIN&&it.current){if(it.current.focus(),Ze){const $t={};Object.keys(Ze).forEach(jt=>{const nr=pe.find(Ot=>Ot.id===jt);if(nr){const Ot=nr.allCells.map(Lt=>Lt.id).filter(Lt=>Lt.includes("filter")?!1:($t[Lt]=!0,!0));Se[nr.id]={_key:nr.original._key,_t:nr.original._t,allCells:Ot}}}),Be($t)}ut.length&&Ze&&!Object.keys(Ze).length&&ut.forEach($t=>{delete Se[$t]})}},[]);const It=useVirtualizer({count:pe.length,getScrollElement:()=>at.current,estimateSize:reactExports.useCallback(()=>$e,[$e]),measureElement:isDefined$1(Ie)?$t=>Math.round((Ue==null?void 0:Ue($e,$t))||$t.scrollHeight||$e):reactExports.useCallback(()=>$e,[$e]),paddingEnd:1}),ht=reactExports.useMemo(()=>pe.reduce(($t,jt,nr)=>($t[jt.id]=nr,$t),{}),[pe]);reactExports.useEffect(()=>{if(Ke&&(qe||isDefined$1(externalStorage.getSelectedRow()))){const $t=ht[Ke];It.scrollToIndex($t),We&&We(!1)}},[qe,Ke,externalStorage.getSelectedRow()]);const gt=It.getTotalSize(),Pt=$t=>{let jt=structuredClone(ye);const nr=structuredClone(Ze||{}),Ot={...me};$t.forEach(Lt=>{const lr=xe[Lt];jt[lr.id]?(delete jt[lr.id],delete nr[lr.id],Se[lr.id]&&ut.forEach(Ht=>{const qt=Se[Ht].allCells;for(let tr=0;tr<qt.length;tr++)delete Ot[qt[tr]];delete Se[Ht],delete jt[Ht],delete nr[Ht]})):(jt[lr.id]={_key:lr.original._key,_t:lr.original._t},nr[lr.id]={_key:lr.original._key,_t:lr.original._t},Se[lr.id]&&(jt={...jt,...Se},Object.assign(nr,Se)))}),Ge&&(jt=structuredClone(nr),ve==null||ve(!1)),Be(Ot),tt(Ot),Te(jt),nt(nr),et&&et(nr)},wt=($t,jt)=>{const[nr,Ot]=[$t,jt].sort((Lt,lr)=>Lt-lr);return Array.from({length:Ot-nr+1},(Lt,lr)=>lr+nr)},St=$t=>{const jt={};$t.forEach(nr=>{jt[pe[nr].id]={_key:pe[nr].original._key,_t:pe[nr].original._t}}),Te(jt)},Zt=$t=>{xt([$t.index]),Ke!==$t.id&&Ye($t.id)},Ct=($t,jt,nr)=>{const Ot=jt.allCells.findIndex(Ht=>Ht.column.id===ColumnNameType.FILTER),Lt=$t.target instanceof HTMLInputElement&&$t.target.type==="checkbox",lr=jt.allCells[Ot!==-1?Ot+1:0].id;if($t.shiftKey){const Ht=wt(pt,nr);St(Ht),rt(Ht.map(qt=>pe[qt])),xt(Ht);return}if(Lt||$t.ctrlKey){Pt([jt.index]),mt(nr),Xe(lr);return}mt(nr),Zt(jt),Xe(lr),st.current===0&&(st.current=1)},Rt=$t=>{Re($t);const jt=[];Object.keys($t).forEach(nr=>{const Ot=parseInt(nr.split("_")[1],10);!isNaN$1(Ot)&&!jt.includes(Ot)&&jt.push(Ot)}),mt(jt[0]),xt(jt)},dr=$t=>{var jt;if($t.code==="Space"&&bt.length&&Pt(bt),$t.ctrlKey&&$t.code===KeyboardCode.KeyA){$t.preventDefault();const nr=pe.sort((Lt,lr)=>Lt.index-lr.index),Ot=((jt=nr[nr.length-1])==null?void 0:jt.allCells)||[];Je(nr[0].allCells[1].id,Ot[Ot.length-1].id)}$t.ctrlKey&&$t.code===KeyboardCode.KeyC&&ke(),ze($t,{selectedCells:ge,updateFn:Rt})},Dt=reactExports.useMemo(()=>[{title:ot("shared.copy"),icon:jsxRuntimeExports.jsx(jk,{}),onClick:ke}],[ke,ot]),Tt=reactExports.useCallback($t=>{$t.preventDefault(),lt({items:Dt,e:$t})},[Dt,lt]),or=$t=>{const jt=$t.deltaY;It.scrollToOffset(Number(It.scrollOffset)+jt)},Mt=()=>{if(at.current&&at.current.scrollTop!==ft){dt(at.current.scrollTop);const $t=at.current.scrollTop/at.current.scrollHeight*100;_e($t)}},kt=()=>{at.current&&(at.current.scrollTop=at.current.scrollHeight*((Qe??0)/100))};return reactExports.useEffect(()=>{at.current&&Bt({fn:kt})},[at.current]),jsxRuntimeExports.jsxs("div",{tabIndex:-1,onContextMenu:Tt,onKeyDown:dr,className:styles$1g.body,...ue(),ref:it,children:[jsxRuntimeExports.jsx("div",{ref:at,className:styles$1g.container,onWheel:or,onScroll:Mt,children:jsxRuntimeExports.jsx("div",{className:styles$1g.content,style:{height:Math.round(gt+4)},children:jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${Math.round(((ur=It.getVirtualItems()[0])==null?void 0:ur.start)??0)-It.options.scrollMargin}px)`},children:yt&&It.getVirtualItems().map($t=>{const jt=pe[$t.index];return Ae(jt),jsxRuntimeExports.jsx(TableRow,{virtualRowIndex:$t.index,measureElement:nr=>It.measureElement(nr),selectedRowId:Ke,markedIndex:oe,rowIndex:$t.index,row:jt,selectedRangeCells:ge,gridMode:Ne,onClick:nr=>Ct(nr,jt,$t.index),onDoubleClick:()=>je(jt),selectedRowsRange:ye,cellRowsCount:Ie,isLineBreakSymbol:Fe,rowHeight:$e},$t.key)})})})}),jsxRuntimeExports.jsx(VerticalScroll,{isHidden:K,setHidden:J,scrollOffset:Number(It.scrollOffset),totalHeight:gt,scrollToOffset:It.scrollToOffset})]})};class ValueFormatterService{static simpleValueFormatter(J,ne,oe,ce){if(!(isSimpleViewType(J)||BigNumber.isBigNumber(J)))return"";switch(!0){case ne===ValueTypesEnum$1.String:return typeof J>"u"?J:toString$2(J);case isNumberType(ne):return formatNumberValue(J,oe,ne,ce);case ne===ValueTypesEnum$1.Bool:return isBool(J)?J:void 0;case ne===ValueTypesEnum$1.Date:return J?DateFormatUtility.create(String(J)).format(DateFormatEnum.DATE):void 0;case ne===ValueTypesEnum$1.DateTime:return J?DateFormatUtility.create(String(J)).format(DateFormatEnum.DATE_TIME):void 0;case ne===ValueTypesEnum$1.Time:return J?DateFormatUtility.create(String(J),DateFormatEnum.TIME_MS).format(DateFormatEnum.TIME):void 0;default:return typeof J>"u"?J:toString$2(J)}}static flatValueFormat(J){const ne=Object.keys(J).map(oe=>{const ce=J[oe];return isArray$6(ce)?this.arrayValueToString(ce):isObject$9(ce)?this.objectValueToString(ce):ce});return this.getShortValue(ne)}static arrayValueToString(J){const ne=J.map(ue=>isObject$9(ue)?Object.values(ue)[0]:ue),oe=J.slice(1).length;if(isObject$9(ne[0]))return this.objectValueToString(ne[0]);const ce=ne[0]?`${ne[0]}...`:"";return oe>0?`${ne[0]}... + ${oe} more`:`${ce}`}static objectValueToString(J){const ne=Object.values(J)[0],oe=ne?`${ne}...`:"";return isObject$9(ne)?this.flatValueFormat(ne):`${oe}`}static getShortValue(J,ne=4){return J.filter(oe=>oe).map((oe,ce)=>isObject$9(oe)||ce<ne?oe:"...").join("; ")}}const getColumnProps$1=(K,J)=>{var ge,ye,Se,Te,Ne;const{Name:ne,Label:oe,Value:ce,Format:ue,Optional:Ae,ReadOnly:pe}=K,xe=(ge=J==null?void 0:J.gridColumns)==null?void 0:ge.find($e=>$e.Header===ne),me=()=>{const $e={current:""};function ke(je){const Ke=typeof je=="function"?je($e.current):je;$e.current=Ke}return[$e,ke]};return{width:((ye=J==null?void 0:J.columnState)==null?void 0:ye.SizeInPercent)||(xe==null?void 0:xe.width)||GridColumWidth.MIN_WIDTH,maxWidth:((Se=J==null?void 0:J.columnState)==null?void 0:Se.MaxSizeInPixels)||Number.MAX_SAFE_INTEGER,minWidth:((Te=J==null?void 0:J.columnState)==null?void 0:Te.MinSizeInPixels)||GridColumWidth.MIN_WIDTH,disableResizing:((Ne=J==null?void 0:J.columnState)==null?void 0:Ne.SizeFixed)||!1,id:J==null?void 0:J.columnId,Header:oe||ne,accessor:$e=>$e[ne],columnType:ce==null?void 0:ce.Type,isRequired:!Ae,isReadOnly:pe,sortType:getSortTypeByValueType(ce==null?void 0:ce.Type),...(J==null?void 0:J.isColumnFormatter)&&{valueFormatter:($e,ke)=>ValueFormatterService.simpleValueFormatter($e,ce==null?void 0:ce.Type,ue,ke)},Filter:$e=>FilterInput({...$e,updateTypeState:J==null?void 0:J.updateTypeState}),filter:($e,ke,je)=>je===""?$e:$e.filter(Ke=>ke.some(Ye=>{const ze=ValueFormatterService.simpleValueFormatter(Ke.values[Ye],ce==null?void 0:ce.Type,ue);return String(ze).toLowerCase().includes(String(je).toLowerCase())})),filteredValueMask:me()}},getFormattedValue=K=>{const J=isObject$9(K.Value)?Object.values(K.Value)[0]:void 0,ne=isObject$9(K.Value)?Object.keys(K.Value)[0]:void 0;return ValueFormatterService.simpleValueFormatter(J,ne)},getHandlerParams=K=>{var J;if(isObject$9(K)&&isArray$6(K.Extensions)&&K.Extensions[0]){const ne=K.Extensions[0];return{table:(J=ne.TargetTypeName.split(".").at(-1))==null?void 0:J.replace(/Data$/,""),method:ne.HandlerName}}return null},DataHandlerCell=({value:K})=>{const J=useSelector$1(selectActiveDataset$1),ne=useSelector$1(selectUser),{isLoading:oe,fetch:ce}=useRequest(handlerApi.handlerRun),ue=getFormattedValue(K),Ae=()=>{const pe=getHandlerParams(K);pe&&ce({Keys:[],Type:pe.table||"",Method:pe.method,Dataset:J,userName:ne==null?void 0:ne.username})};return jsxRuntimeExports.jsx(rl,{disabled:oe,onClick:Ae,iconBefore:jsxRuntimeExports.jsx(tD,{}),children:ue})},isHandlerExtension=K=>isObject$9(K)&&Object.hasOwn(K,"HandlerName")&&Object.hasOwn(K,"TargetTypeName"),isHandlerData=K=>isObject$9(K)&&isArray$6(K.Extensions)&&isHandlerExtension(K.Extensions[0]),DataCell=K=>isHandlerData(K.value)?jsxRuntimeExports.jsx(DataHandlerCell,{...K}):null;var ValueTypesEnum=(K=>(K.Data="Data",K.Bool="Bool",K.Double="Double",K.Long="Long",K.Int="Int",K.String="String",K.Date="Date",K.Time="Time",K.DateTime="DateTime",K.Key="Key",K.TimeElement="TimeElement",K.DateTimeElement="DateTimeElement",K.Mixed="Mixed",K))(ValueTypesEnum||{});const simpleValueTypes=["String","Bool","Int","Double","Long","Date","Time","DateTime","TimeElement","DateTimeElement","Mixed"],firstLetterToUppercase=K=>K.charAt(0).toUpperCase()+K.slice(1),isSimpleValueType=K=>isDefined$1(K)?simpleValueTypes.some(J=>J===K):!1,isDataValueType=K=>K==="Data",getColumnProps=(K,J,ne,oe)=>{const{Name:ce,Value:ue,Format:Ae,Optional:pe}=K,xe=(ue==null?void 0:ue.Type)&&firstLetterToUppercase(ue.Type);return{id:ce,Header:ce,accessor:ce,columnType:xe,isRequired:!pe,sortType:getSortTypeByValueType(xe),valueFormatter:me=>ValueFormatterService.simpleValueFormatter(me,xe,Ae),...oe&&{columns:oe,disableSortBy:!0,disableFilters:!0},Filter:me=>jsxRuntimeExports.jsx(FilterInput,{...me,...J}),filter:(me,ge,ye)=>ye===""?me:me.filter(Se=>ge.some(Te=>{const Ne=ValueFormatterService.simpleValueFormatter(Se.values[Te],ue==null?void 0:ue.Type,Ae);return String(Ne).toLowerCase().includes(String(ye).toLowerCase())}))}},configSubColumnsArr=(K,J)=>{const ne=[];function oe(ce,ue,Ae,pe,xe){const me={Header:pe,accessor:pe,disableSortBy:!xe,disableFilters:!xe};for(let ge=0;ge<ce.length;ge++){const{Header:ye,columns:Se}=ce[ge];if(ye===Ae){if(Se!=null&&Se.length){if(Se!=null&&Se.find(Te=>Te.Header===pe))return;Se==null||Se.push(me);return}ce[ge].columns=[me]}Se!=null&&Se.length&&oe(Se,ue,Ae,pe,xe)}}return K.forEach(ce=>{const ue=ce.Name.split(J);ue==null||ue.forEach((Ae,pe)=>{const xe=pe===ue.length-1;!ne.length||pe===0&&!ne.find(me=>me.Header===Ae)?ne.push({Header:Ae,accessor:Ae}):oe(ne,ue[0],ue[pe-1],Ae,xe)})}),ne},mapMetadataToGridColumnsHelper$1=(K,J,ne)=>{const oe=Ae=>Ae.split(ne)[0],ce=K.filter(({Value:Ae,Vector:pe,Key:xe})=>(Ae==null?void 0:Ae.Type)&&(isSimpleValueType(Ae.Type)||xe||isDataValueType(Ae.Type))&&!pe);return(()=>{if(ne){const Ae=[];return ce.forEach(pe=>{Ae.find(xe=>oe(xe.Name)===oe(pe.Name))||Ae.push(pe)}),Ae}return ce})().map((Ae,pe)=>{var me;let xe;if(ne){const ge=configSubColumnsArr(ce,ne);Ae.Name=oe(Ae.Name),xe=(me=ge.find(ye=>ye.Header===Ae.Name))==null?void 0:me.columns}return{...getColumnProps(Ae,J,!0,xe),Cell:ge=>{var Se;if(isDataValueType((Se=Ae.Value)==null?void 0:Se.Type))return jsxRuntimeExports.jsx(DataCell,{...ge});const ye=ge.column.valueFormatter?ge.column.valueFormatter(ge.value):ge.value;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ye})}}})},renderCell=K=>{const J=K.column.valueFormatter?K.column.valueFormatter(K.value):K.value;if(K.column.columnType==="Double"){const ne=[];K.column.filteredRows.forEach(ue=>{const Ae=ue.cells.find(pe=>{var xe,me;return((xe=pe.column)==null?void 0:xe.id)===((me=K.column)==null?void 0:me.id)});ne.push(Ae==null?void 0:Ae.value)});const oe=Math.max(...ne.map(ue=>Math.abs(ue))),ce=K.column.valueFormatter?K.column.valueFormatter(K.value,oe):K.value;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ce})}return isBool(J)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:J?BoolEnum.YES:BoolEnum.NO}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:J})},mapMetadataToGridColumnsHelper=(K,J,ne,oe)=>K.filter(({Value:ce,Vector:ue,Key:Ae,Enum:pe,Hidden:xe})=>(isSimpleValueType$1(ce==null?void 0:ce.Type)||Ae||pe)&&!ue&&!xe).map(ce=>{const ue=J==null?void 0:J.find(Ae=>Ae.Id===ce.Name);return{...getColumnProps$1(ce,{columnId:ce.Name,isColumnFormatter:!0,columnState:ue,gridColumns:ne,updateTypeState:oe}),Cell:renderCell}}),getCSVTableTextHelper=(K,J,ne)=>{const oe=K.filter(Ae=>!Ae.suppressHideColumn),ce=oe.map(Ae=>Ae.Header).join(ne),ue=J.map(Ae=>oe.reduce((pe,xe)=>{if(xe.id in Ae.values){const me=Ae.values[xe.id],ge=xe.valueFormatter?xe.valueFormatter(me):me;return pe.concat(toString$2(ge),`"${ne}"`)}return pe},"")).join(`"
"`);return`${ce}
"${ue}"`},exportToCSV=(K,J)=>{const ne=document.createElement("a"),oe=new Date;ne.href=`data:text/plain;charset=utf-8,${encodeURIComponent(K)}`,ne.download=`${J}-${oe.toLocaleDateString()}.csv`,ne.click()},downloadGridCSVHelper=(K,J,ne="Table")=>{const oe=getCSVTableTextHelper(K,J,",");exportToCSV(oe,ne)},defaultGetRowId=(K,J,ne)=>ne?[ne.id,J].join("."):J.toString(),getColumnTypeByCells=(K,J,ne,oe=ValueTypesEnum.String)=>{const ce=[];for(let Ae=K;Ae<ne.length;Ae+=J){const pe=ne[Ae];isObject$9(pe)&&ce.push(pe)}const ue=ce.length!==0&&Object.keys(ce[0]).at(0);return ue?ce.every(Ae=>Object.keys(Ae).at(0)===ue)?ue:ValueTypesEnum.Mixed:oe},borderCellColor="000000",headerCellBgColor="ADD8E6";var ExcelCellType=(K=>(K.STRING="s",K.NUMBER="n",K.ERROR="e",K.DATE="d",K.STUB="z",K))(ExcelCellType||{});const getSheetName=(K,J="...")=>{if(!K)return"Sheet 1";const ne=31;return K.length<=ne?K:K.slice(0,ne-J.length).concat(J)},formatExcelDate=K=>{const J={month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};return K.toLocaleString(void 0,J)},generateHeaderCell=(K,J="s",ne=getDefaultHeaderCellStyles())=>({v:K,t:J,s:ne}),generateCell=(K,J="s",ne=getDefaultCellStyles())=>({v:K,t:J,s:ne}),generateAdditionalInfoCell=(K,J="s",ne=getAdditinalInfoCellStyles())=>({v:K,t:J,s:ne}),getDefaultHeaderCellStyles=()=>({fill:{fgColor:{rgb:headerCellBgColor}},border:{top:{style:"thin",color:{rgb:borderCellColor}},right:{style:"thin",color:{rgb:borderCellColor}},bottom:{style:"thin",color:{rgb:borderCellColor}},left:{style:"thin",color:{rgb:borderCellColor}}}}),getDefaultCellStyles=()=>({border:{top:{style:"thin",color:{rgb:borderCellColor}},right:{style:"thin",color:{rgb:borderCellColor}},bottom:{style:"thin",color:{rgb:borderCellColor}},left:{style:"thin",color:{rgb:borderCellColor}}}}),getAdditinalInfoCellStyles=()=>({font:{color:{rgb:"800080"},italic:!0}}),getColumnWidth=K=>({wch:K}),MAX_CELL_LENGTH=32767,splitLongCells=K=>{const J=[];for(const ne of K){const oe=[[]];for(let ce=0;ce<ne.length;ce++){const ue=ne[ce],Ae=ue==null?void 0:ue.v;if(typeof Ae=="string"&&Ae.length>MAX_CELL_LENGTH){const pe=[];for(let xe=0;xe<Ae.length;xe+=MAX_CELL_LENGTH)pe.push(Ae.slice(xe,xe+MAX_CELL_LENGTH));pe.forEach((xe,me)=>{oe[me]||(oe[me]=Array(ce).fill(null)),oe[me][ce]={...ue,v:xe}})}else oe.forEach((pe,xe)=>{pe[ce]=xe===0?ue:{...ue,v:"",t:"s"}})}J.push(...oe)}return J},exportToExcelFile=({fileName:K,sheetName:J,columnWidths:ne,body:oe})=>{const ce=xlsx_minExports.utils.book_new(),ue=splitLongCells(oe),Ae=xlsx_minExports.utils.aoa_to_sheet(ue),pe=getSheetName(J);Ae["!cols"]=ne,xlsx_minExports.utils.book_append_sheet(ce,Ae,pe),xlsx_minExports.writeFile(ce,K||"Excel_default.xlsx")},generateExcelHeader=K=>K.map(J=>generateHeaderCell(J.Header)),generateExcelBody=(K,J)=>J.map(ne=>K.reduce((oe,ce)=>{if(ce.id in ne.values){const ue=isNumberType(ce.columnType),Ae=ne.values[ce.id],pe=ce.valueFormatter?ce.valueFormatter(Ae):Ae,xe=generateCell((ue?Ae:pe)??"",ue?ExcelCellType.NUMBER:ExcelCellType.STRING);oe.push(xe)}return oe},[])),getExcelAdditionalInfoData=K=>{const J=[];return K.forEach(({name:ne,value:oe})=>{J.push([generateAdditionalInfoCell(ne),generateAdditionalInfoCell(oe)])}),J},downloadGridExcelHelper=(K,J,{sheetName:ne,additionalCells:oe,selectedRowKeys:ce})=>{const ue=K.filter(Ne=>!Ne.suppressHideColumn),Ae=generateExcelHeader(ue),pe=[];J.forEach(Ne=>{ce.includes(Ne.id)&&pe.push(Ne)});const xe=generateExcelBody(ue,pe),me=oe?getExcelAdditionalInfoData(oe):[],ye=`Report_${DateFormatUtility.create().format(DateFormatEnum.DATE)}.xlsx`,Se=Ae.map(()=>getColumnWidth(20)),Te=[...me,Ae,...xe];exportToExcelFile({fileName:ye,sheetName:ne,body:Te,columnWidths:Se})},container$y="_container_1wz1h_1",hidden$1="_hidden_1wz1h_8",corner="_corner_1wz1h_14",scrollbarBackgroundColor="_scrollbarBackgroundColor_1wz1h_19",styles$1f={container:container$y,hidden:hidden$1,corner,scrollbarBackgroundColor},HorizontalScroll=reactExports.memo(({totalColumnsWidth:K,isShowCorner:J,isHidden:ne,setHidden:oe,scrollBodyTo:ce,scrollHeaderTo:ue})=>{const{ref:Ae,width:pe=0}=useResizeObserver();reactExports.useEffect(()=>{oe(K<pe)},[pe,K]);const xe=me=>{const ge=me.currentTarget.scrollLeft;ue({left:ge}),ce({left:ge})};return jsxRuntimeExports.jsxs("div",{ref:Ae,className:cx(styles$1f.container,{[styles$1f.hidden]:ne}),children:[jsxRuntimeExports.jsx("div",{className:cx(styles$1f.scrollbarBackgroundColor),onScroll:xe,children:jsxRuntimeExports.jsx("div",{style:{width:K},className:styles$1f.container})}),J&&jsxRuntimeExports.jsx("div",{className:cx(styles$1f.corner,styles$1f.scrollbarBackgroundColor)})]})});HorizontalScroll.displayName="HorizontalScroll";const DEFAULT_MARKED_INDEX=-1;function useNavigation({selectedRowId:K,onChangeSelectedRowId:J}){const[ne,oe]=reactExports.useState([]),[ce,ue]=reactExports.useState(DEFAULT_MARKED_INDEX),Ae=()=>ne.findIndex($e=>$e.id===K),pe=($e,ke,je)=>{if(!je)return;const Ye=Object.keys(je.selectedCells).filter(Xe=>Xe.includes(String($e))).map(Xe=>{const Je=Xe.split("_");return Je[1]=String(ke),Je.join("_")}),ze={};Ye.forEach(Xe=>{ze[Xe]=!0}),je==null||je.updateFn(ze)},xe=$e=>{const je=ce===DEFAULT_MARKED_INDEX?Ae():ce,Ke=je===0?0:je-1;ue(()=>Ke),pe(ce,Ke,$e);const Ye=ne.at(Ke);Ye&&J(Ye.id)},me=$e=>{const ke=ce===DEFAULT_MARKED_INDEX,je=ne.length-1,Ke=ke?Ae():ce,Ye=Ke===je?je:Ke+1;ue(()=>Ye),pe(ce,Ye,$e);const ze=ne.at(Ye);ze&&J(ze.id)},ge=()=>ue(DEFAULT_MARKED_INDEX),ye=()=>{const $e=ne.at(ce);$e&&J($e.id)};return{isDefaultMarkedIndex:ce===DEFAULT_MARKED_INDEX,markedIndex:ce,prevMarkedRow:xe,nextMarkedRow:me,resetMarkedRow:ge,onKeyDown:($e,ke)=>{switch($e.key){case KeyboardCode.ArrowUp:xe(ke);break;case KeyboardCode.ArrowDown:me(ke);break;case KeyboardCode.Enter:case KeyboardCode.NumpadEnter:ye();break}},attachRows:$e=>{oe($e)},updateMarkedIndexOnRowChange:$e=>{const ke=ne.findIndex(je=>je.id===$e);ue(ke)}}}const container$x="_container_6f8yp_1",styles$1e={container:container$x},SelectedRowsCounter=reactExports.memo(({areAllRecordsSelected:K,selectedRowsCount:J})=>J===0?null:jsxRuntimeExports.jsx("div",{className:styles$1e.container,children:K?instance.t("selectedRowsCounter.all"):instance.t("selectedRowsCounter.selectedRows",{selectedRowsCount:J})}));SelectedRowsCounter.displayName="SelectedRowsCounter";const spinnerIcon="_spinnerIcon_1fvo4_6",spin$1="_spin_1fvo4_6",successIcon="_successIcon_1fvo4_11",errorIcon="_errorIcon_1fvo4_15",handlerStatusContainer="_handlerStatusContainer_1fvo4_19",styles$1d={spinnerIcon,spin:spin$1,successIcon,errorIcon,handlerStatusContainer},HandlerRecordStatus=reactExports.memo(({row:K})=>{const{state:J}=useDndContext();if(!J.recordStatuses[K.id])return;const{statusCode:ne,message:oe}=J.recordStatuses[K.id],ce=(Ae,pe)=>{switch(Ae){case RunHandlerStatusCodeEnum.Completed:return pe||t$5("grid.successHandler");case RunHandlerStatusCodeEnum.Cancelled:case RunHandlerStatusCodeEnum.Failed:return pe||t$5("grid.errorHandler");default:return pe}},ue=Ae=>{switch(Ae){case RunHandlerStatusCodeEnum.Submitted:case RunHandlerStatusCodeEnum.Running:return jsxRuntimeExports.jsx(j_,{className:styles$1d.spinnerIcon});case RunHandlerStatusCodeEnum.Completed:return jsxRuntimeExports.jsx(__$1,{className:styles$1d.successIcon});case RunHandlerStatusCodeEnum.Cancelled:case RunHandlerStatusCodeEnum.Failed:return jsxRuntimeExports.jsx(PA,{className:styles$1d.errorIcon});default:return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}};return jsxRuntimeExports.jsx(mf,{title:ce(ne,oe),children:jsxRuntimeExports.jsx("div",{className:styles$1d.handlerStatusContainer,children:ue(ne)})})});HandlerRecordStatus.displayName="HandlerRecordStatus";reactTableExports.actions.resetLayout="resetLayout";reactTableExports.actions.clearState="clearState";reactTableExports.actions.setFilter="setFilter";reactTableExports.actions.setSelectedCellIds="setSelectedCellIds";const CELL_BOTH_SIDES_PADDING_PX=16,HEADER_CELL_MARGINX_X=8,TABLE_BODY_FONT_SIZE="13px",canvas=document.createElement("canvas"),context=canvas.getContext("2d");context&&(context.font=`${TABLE_BODY_FONT_SIZE} ${getComputedStyle(document.body).fontFamily}`);function reducer$1(K,J,ne,oe,ce){if(J.type===reactTableExports.actions.init){const{data:ue=[],columns:Ae=[]}=ce||{},pe={};return ne.length===0?ue.forEach(xe=>{Ae.forEach(me=>{const ge=Number(me.width),ye=xe[String(me.Header).replace(/\s/g,"")]||"",Se=String(me.Header),Te=(context==null?void 0:context.measureText(String(ye)).width)||0,Ne=(context==null?void 0:context.measureText(String(Se)).width)||0;let $e=Math.ceil(Number(Te)+CELL_BOTH_SIDES_PADDING_PX),ke=Math.ceil(Ne+CELL_BOTH_SIDES_PADDING_PX+HEADER_CELL_MARGINX_X);$e>GridColumWidth.MAX_WIDTH&&($e=GridColumWidth.MAX_WIDTH),ke>GridColumWidth.MAX_WIDTH&&(ke=GridColumWidth.MAX_WIDTH),Object.hasOwn(pe,String(me.Header))?$e>ke&&$e>pe[String(me.Header)]?pe[String(me.Header)]=$e:ke>$e&&ke>pe[String(me.Header)]&&(pe[String(me.Header)]=ke):$e>ke?pe[String(me.Header)]=$e:ke>$e&&(pe[String(me.Header)]=ke),$e>ge&&$e>ke?me.width=$e:ke>ge&&ke>$e&&(me.width=ke)})}):Ae.forEach(xe=>{var ge;const me=(ge=ne.find(ye=>ye.Id===xe.id))==null?void 0:ge.SizeInPercent;me&&(pe[String(xe.Header)]=me)}),{...K,columnsWidths:pe,initialColumnsOrder:Ae.map(xe=>xe.id)}}if(J.type===reactTableExports.actions.resetLayout){const{flatHeaders:ue=[],allColumns:Ae=[],setColumnOrder:pe}=ce||{},{columnsWidths:xe,initialColumnsOrder:me}=K;ue.forEach(ye=>{ye.width=xe[String(ye.Header)]||ye.width});const ge=Ae.filter(ye=>!me.find(Se=>Se===ye.id)).map(ye=>ye.id);return pe==null||pe([...ge,...me]),Ae.forEach(ye=>{var Se,Te;(Se=ye.clearSortBy)==null||Se.call(ye),(Te=ye.setFilter)==null||Te.call(ye,"")}),{...K,columnResizing:{columnWidths:{}},selectedRowsIds:{},selectedCellIds:{},isSelectingCells:!1,currentSelectedCellIds:{},startCellSelection:null,endCellSelection:null,currentFilterRowCellsSelectedIds:{},cellRangeSelecting:{},freezedSelectedCellIds:{},selectedRowsPerPageState:{}}}return K}function useInstance(K){const{dispatch:J}=K;Object.assign(K,{resetLayout:()=>{J({type:reactTableExports.actions.resetLayout})}})}const useRestoreLayout=(K,J)=>{K.stateReducers.push((ne,oe,ce,ue)=>reducer$1(ne,oe,J,ce,ue)),K.useInstance.push(useInstance)};useRestoreLayout.plaginName="useRestoreLayout";const loaderMask="_loaderMask_1jnrn_1",mainGridCell="_mainGridCell_1jnrn_6",container$w="_container_1jnrn_11",cell="_cell_1jnrn_20",containerReadOnly$1="_containerReadOnly_1jnrn_27",wrapper$1="_wrapper_1jnrn_35",noData$2="_noData_1jnrn_47",primaryBG="_primaryBG_1jnrn_51",secondaryBG="_secondaryBG_1jnrn_55",styles$1c={loaderMask,mainGridCell,container:container$w,cell,containerReadOnly:containerReadOnly$1,wrapper:wrapper$1,noData:noData$2,primaryBG,secondaryBG},Grid=reactExports.forwardRef(({initialFilters:K=[],initialSortBy:J=[],className:ne,columns:oe,initiallyHiddenColumns:ce=[],initiallyHideEmptyColumns:ue=!1,data:Ae,variant:pe="primary",isColumnFilter:xe=!0,useCheckboxes:me=!1,isCountRowCellExist:ge,gridName:ye,status:Se=LoadingStatusesEnum.SUCCESS,gridMode:Te=GridModeEnum.DEFAULT,selectedRowsRange:Ne={},getRowId:$e,selectedRowId:ke,onChangeSelectedRowId:je,onSelectedCheckboxChange:Ke,onSelectedRowsRangeChanged:Ye=()=>{},onRowDoubleClicked:ze=()=>{},onSortingChanged:Xe=()=>{},shouldClearCellsSelection:Je,customFilterCell:rt,selectedCheckbox:Ze={},selectedRowsPerPage:et,setSelectedRowsPerPage:nt,isSelectAllRecordsBtnClicked:Ge,isDeselectAllRecordsBtnClicked:ve,setIsSelectAllRecordsBtnClicked:Be,isRunHandlers:Re=!1,cellRowsCount:Ie,onChangeGridRowsData:Fe,isLineBreakSymbol:qe=!1,isRowFocus:We,onChangeIsRowFocus:Ue,updateSelectedGridRowKey:_e,calculateElementHiehgt:Qe,isReadOnly:tt=!1,columnsState:it=[],getPaginationBlock:at,defaultScroll:ot,onChangeScroll:lt,setSavedFilters:st,setSavedSortings:ut,registerService:ft},dt)=>{const Bt=reactExports.useRef(null),pt=reactExports.useRef(null),mt=reactExports.useRef(null),bt=reactExports.useRef(!0),xt=reactExports.useRef(!1),yt=reactExports.useRef(!1),[It,ht]=reactExports.useState(!1),[gt,Pt]=reactExports.useState(!1),[wt,St]=reactExports.useState(""),Zt=ke??wt,Ct=je??St,Rt=!It,dr=reactExports.useCallback((Rr,Rn,gn)=>$e?$e(Rr,Rn,gn):defaultGetRowId(Rr,Rn,gn),[$e]);reactExports.useEffect(()=>{bt.current?bt.current=!1:Je&&Vt()},[Je]);const{isDefaultMarkedIndex:Dt,markedIndex:Tt,resetMarkedRow:or,onKeyDown:Mt,attachRows:kt,updateMarkedIndexOnRowChange:ur}=useNavigation({selectedRowId:Zt,onChangeSelectedRowId:Ct}),$t=()=>jsxRuntimeExports.jsx("div",{className:cx(styles$1c.container,{[styles$1c.containerReadOnly]:tt})}),{clearSelection:jt,resetLayout:nr,setCurrentSelectedCellIds:Ot,setSelectedCellIds:Lt,changeSelectedCell:lr,updateSelectedRowsPerPageState:Ht,deletePrevSelectedCheckbox:qt,selectAllRowsAllCells:tr,clearCellSelectionState:Vt,selectNewCellsArr:Gt,selectProvidedRowsCells:br,rewriteActiveRowStartCell:Yt,totalColumnsWidth:Kt,getTableProps:yr,getTableBodyProps:zt,headerGroups:Jt,rows:xr,preFilteredRows:Xt,prepareRow:ir,setColumnOrder:Mr,visibleColumns:er,cellIdSplitBy:fr,headers:Qr,columns:sr,state:{selectedCellIds:Ar,currentSelectedCellIds:Kr,selectedRowsIds:ar,sortBy:hr,filters:Lr,columnsWidths:Pr,hiddenColumns:Yr}}=reactTableExports.useTable({autoResetResize:!1,autoResetFilters:!1,autoResetSortBy:!1,columns:oe,data:Ae,getRowId:dr,defaultColumn:{applyMaxWidth:!0,Filter:FilterInput},initialState:{filters:K,sortBy:J,hiddenColumns:ce},stateReducer:(Rr,Rn)=>((Rn.type===reactTableExports.actions.toggleSortBy||Rn.type===reactTableExports.actions.setSortBy)&&or(),Rr)},useCellRangeSelection,useFilterColumnCheckBox,Rr=>useRestoreLayout(Rr,it),reactTableExports.useFilters,reactTableExports.useSortBy,reactTableExports.useExpanded,reactTableExports.useColumnOrder,reactTableExports.useResizeColumns,reactTableExports.useBlockLayout,Rr=>{xe&&Rr.allColumns.push(Rn=>[{id:"filter",customHeader:!0,suppressDrag:!0,suppressHideColumn:!0,suppressHeaderTooltip:!0,applyMaxWidth:!0,minWidth:45,width:45,maxWidth:45,disableResizing:!0,Header:gn=>{const{isSelectAllRecordsBtnClicked:kn,isDeselectAllRecordsBtnClicked:Kn,selectedCheckbox:Jn}=reactExports.useContext(GridContext);return rt?(xt.current=!!kn,yt.current=!!Kn,rt({passedColumns:gn.allColumns,gridMode:Te,rows:gn.rows,onSelectedRowsRangeChanged:Ye,clearCellSelectionState:Vt,selectAllRowsAllCells:tr,updateSelectedRowsPerPageState:gn.updateSelectedRowsPerPageState,passedSelectedRowsPerPage:gn.state.selectedRowsPerPageState,isSelectAllRecordsBtnClicked:kn,isDeselectAllRecordsBtnClicked:Kn})):(ue&&env.hideEmptyColumns==="true"&&gn.allColumns.forEach(Wr),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FilterCell,{columns:gn.allColumns}),me&&jsxRuntimeExports.jsx(CheckboxSelectionAll,{rows:gn.rows,selectedRows:Jn,onSelectedCheckboxChange:Ke})]}))},Cell:({row:gn})=>{const{selectedRowsRange:kn,selectedCheckbox:Kn}=reactExports.useContext(GridContext);return Te===GridModeEnum.READ_ONLY?null:jsxRuntimeExports.jsxs("div",{className:cx(styles$1c.cell,{[styles$1c.mainGridCell]:Te===GridModeEnum.MAIN}),children:[ge?gn.index+1:null,Te===GridModeEnum.MAIN&&Zr(kn,gn),me&&jsxRuntimeExports.jsx(CheckboxSelection,{row:gn,selectedRows:Kn,onSelectedCheckboxChange:Ke})]})}},...Rn]),Re&&Rr.allColumns.push(Rn=>[{id:"handlerStatus",customHeader:!0,suppressDrag:!0,suppressHideColumn:!0,suppressHeaderTooltip:!0,applyMaxWidth:!0,minWidth:30,width:30,maxWidth:30,Header:$t,Cell:HandlerRecordStatus},...Rn])});reactExports.useEffect(()=>{ft==null||ft(jt)},[]);const Wr=Rr=>{const Rn=Rr.preFilteredRows.some(gn=>{var kn;return isDefined$1((kn=gn.original)==null?void 0:kn[Rr.id])});!Rr.suppressHideColumn&&!Rn&&(Rr.isVisible=!1)},Zr=(Rr,Rn)=>jsxRuntimeExports.jsx(pF,{value:xt.current&&!yt.current||!!Object.values(Rr).find(gn=>gn._key===Rn.original._key),onMouseDown:gn=>gn.stopPropagation()}),Jr=()=>{if(xr.forEach(Rr=>{ir(Rr)}),Fe){const Rr=xr.map(({id:Rn,index:gn})=>({id:Rn,index:gn}));kt(xr),Fe(Rr)}};reactExports.useEffect(()=>{hr.length||Lr.some(Rr=>Rr.value)||Jr()},[xr,hr,Lr]),reactExports.useEffect(()=>{Jr(),st==null||st(Lr),ut==null||ut(hr)},[hr,Lr]),reactExports.useEffect(()=>{var gn;if(_e==null||_e(Zt),Zt||xr.length===0)return;const Rr=xr[0];if(Ct(Rr.id),!(Rr!=null&&Rr.allCells)||Rr.allCells.length===0)return;const Rn=Rr.allCells.findIndex(kn=>kn.column.id===ColumnNameType.FILTER);Rn&&Yt(((gn=Rr.allCells[Rn!==-1?Rn+1:0])==null?void 0:gn.id)||"")},[xr]);const Gr=reactExports.useMemo(()=>({...Kr,...Ar}),[Kr,Ar]),sn=()=>{je==null||je(xr[0].id),Vt()},ln=Rr=>{xr.length>0&&(Xe(xr.length>0?Rr:[]),sn())},hn=reactExports.useMemo(()=>({toExcel:Rr=>downloadGridExcelHelper(er,xr,Rr),toCSV:()=>downloadGridCSVHelper(er,xr,ye)}),[ye,er,xr]),pn=Rr=>{qt(Rr)},Xr=reactExports.useCallback(()=>{const Rr=getSelectedRangeCells(oe,xr,Gr,{cellIdSplitBy:fr});addDataToClickboard(Rr)},[fr,oe,xr,Gr]);reactExports.useImperativeHandle(dt,()=>({exportGridOptions:hn,deleteOldSelectedRowKey:pn,headers:Qr,updateMarkedIndexOnRowChange:ur,resetLayout:nr,gridColumns:sr,columnsWidths:Pr,hiddenColumns:Yr}));const yn=reactExports.useCallback((Rr,Rn)=>{const gn=er.map(Kn=>Kn.id),[kn]=gn.splice(Rr,1);kn&&(gn.splice(Rn,0,kn),Mr(gn))},[Mr,er]),xn=reactExports.useCallback(Rr=>{pt.current&&pt.current.scrollTo({behavior:"smooth",...Rr})},[]),dn=reactExports.useCallback(Rr=>{mt.current&&mt.current.scrollTo({behavior:"smooth",...Rr})},[]),cn=reactExports.useMemo(()=>({headerRef:pt,bodyRef:mt,changeOrderColumns:yn,selectedRowsRange:Ne,isSelectAllRecordsBtnClicked:Ge,isDeselectAllRecordsBtnClicked:ve,setIsSelectAllRecordsBtnClicked:Be,selectedCheckbox:Ze,handleSortByChanged:ln}),[pt,mt,yn,Ne,Ge,ve,Be,Ze,ln]),wn=reactExports.useCallback(()=>yr({style:{...yr().style,minWidth:"auto"}}),[yr]),Cn=Rr=>{lt==null||lt(Rr)};return jsxRuntimeExports.jsx(PF,{loading:Se===LoadingStatusesEnum.INITIAL||Se===LoadingStatusesEnum.LOADING,children:jsxRuntimeExports.jsx(GridContext.Provider,{value:cn,children:jsxRuntimeExports.jsxs("div",{ref:Bt,...wn(),className:cx({[styles$1c.primaryBG]:pe==="primary",[styles$1c.secondaryBG]:pe==="secondary"},styles$1c.wrapper,ne),children:[jsxRuntimeExports.jsx(TableHeader,{isTableBodyVerticallyScrollable:!It,gridRef:Bt,isShowCorner:Rt,headerGroups:Jt,gridMode:Te,onSortByChanged:ln}),jsxRuntimeExports.jsxs(ContextMenuProvider,{children:[(xr==null?void 0:xr.length)>0?jsxRuntimeExports.jsx(TableBody,{isHiddenVerticalScroll:It,setHiddenVerticalScroll:ht,isDefaultMarkedIndex:Dt,markedIndex:Tt,columns:er,getTableBodyProps:zt,prepareRow:ir,rows:xr,preFilteredRows:Xt,isInfoCellExist:xe,isCountRowCellExist:ge,selectedCellIds:Ar,selectedRangeCells:Gr,selectedRowsRange:Ne,selectedRowsIds:ar,onSelectedRowsRangeChanged:Ye,handleCopySelectedRangeCells:Xr,gridMode:Te,onRowDoubleClicked:ze,selectedRowId:Zt,onSelectRowId:Ct,navigationKeyDownHandler:Mt,rewriteActiveRowStartCell:Yt,selectNewCellsArr:Gt,selectProvidedRowsCells:br,selectedRowsPerPage:et,setSelectedRowsPerPage:nt,updateSelectedRowsPerPageState:Ht,isSelectAllRecordsBtnClicked:cn.isSelectAllRecordsBtnClicked,setIsSelectAllRecordsBtnClicked:cn.setIsSelectAllRecordsBtnClicked,setSelectedCellIds:Lt,setCurrentSelectedCellIds:Ot,changeSelectedCell:lr,cellRowsCount:Ie||+env.gridMaxLines,isLineBreakSymbol:qe,isRowFocus:We,onChangeIsRowFocus:Ue,calculateElementHiehgt:Qe,handleTableBodyScroll:Cn,defaultScroll:ot}):jsxRuntimeExports.jsx("div",{className:styles$1c.noData}),jsxRuntimeExports.jsx(SelectedRowsCounter,{areAllRecordsSelected:xt.current,selectedRowsCount:Object.keys(Ne).length}),at==null?void 0:at()]}),jsxRuntimeExports.jsx(HorizontalScroll,{isShowCorner:Rt,totalColumnsWidth:Kt,isHidden:gt,setHidden:Pt,scrollBodyTo:dn,scrollHeaderTo:xn})]})})})});Grid.displayName="Grid";const getColumns$1=(K,J,ne)=>{const oe=K.length,ce=K.map((ue,Ae)=>{const pe=getColumnTypeByCells(Ae,oe,J);return{Name:ue,Value:{Type:pe}}});return mapMetadataToGridColumnsHelper$1(ce,void 0,ne)},isDataType=K=>isObject$9(K)&&Object.hasOwn(K,ValueTypesEnum$1.Data),getRows$1=(K,J)=>{const ne=K.length,oe=[];for(let ce=0;ce<J.length;ce+=ne){const ue=J.slice(ce,ce+ne),Ae=K.reduce((pe,xe,me)=>{const ge=ue[me];if(isDataType(ge))return{...pe,[xe]:ge.Data};const ye=isObject$9(ge)?Object.values(ge).at(0):null;return{...pe,[xe]:ye}},{});oe.push(Ae)}return oe},container$v="_container_i0pii_1",styles$1b={container:container$v},TableViewer=({ColHeaders:K,ValuesContainer:J,MultiHeaderSeparator:ne})=>{const{columns:oe,rows:ce}=reactExports.useMemo(()=>{if(isArrayOfStrings(K)&&isObject$9(J)&&isArray$6(J.Array)){const ue=ne?K.map(Ae=>Ae.split(ne).pop()):K;return{columns:getColumns$1(K,J.Array,ne),rows:getRows$1(ue,J.Array)}}return{columns:[],rows:[]}},[K,J]);return jsxRuntimeExports.jsx("div",{className:styles$1b.container,children:jsxRuntimeExports.jsx(Grid,{columns:oe,data:ce})})},CompositeView=({ColsCount:K,RowsCount:J,Views:ne,onTransition:oe})=>{if(!K||!J||!(ne!=null&&ne.length))return null;const ce=K>1?Array.from({length:J},(ue,Ae)=>ne.slice(Ae*K,(Ae+1)*K)):ne;return jsxRuntimeExports.jsx(PanelGroup,{direction:"vertical",children:ce.map((ue,Ae)=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Panel$1,{onResize:resizePlotly,children:isArray$6(ue)&&ue.length>0?jsxRuntimeExports.jsx(PanelGroup,{direction:"horizontal",children:ue.map((pe,xe)=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Panel$1,{onResize:resizePlotly,children:jsxRuntimeExports.jsx(Viewers,{activeViewerType:pe._t,data:pe,onTransition:oe})}),xe!==K-1&&jsxRuntimeExports.jsx(PanelResizeHandle,{className:"verticalPanelResizer"})]},xe))}):jsxRuntimeExports.jsx(Viewers,{activeViewerType:ne[Ae]._t,data:ne[Ae],onTransition:oe})}),Ae!==J-1&&jsxRuntimeExports.jsx(PanelResizeHandle,{className:"horizontalPanelResizer"})]},Ae))})},container$u="_container_i0pii_1",styles$1a={container:container$u},FormattedVariantTable=({ColHeaders:K,ValuesContainer:J,MultiHeaderSeparator:ne})=>{const{columns:oe,rows:ce}=reactExports.useMemo(()=>{if(isArrayOfStrings(K)&&isObject$9(J)&&isArray$6(J.Array)){const ue=ne?K.map(Ae=>Ae.split(ne).pop()):K;return{columns:getColumns$1(K,J.Array,ne),rows:getRows$1(ue,J.Array)}}return{columns:[],rows:[]}},[K,J]);return jsxRuntimeExports.jsx("div",{className:styles$1a.container,children:jsxRuntimeExports.jsx(Grid,{columns:oe,data:ce})})};function _defineProperty$3(K,J,ne){return J in K?Object.defineProperty(K,J,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[J]=ne,K}function ownKeys$3(K,J){var ne=Object.keys(K);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(K);J&&(oe=oe.filter(function(ce){return Object.getOwnPropertyDescriptor(K,ce).enumerable})),ne.push.apply(ne,oe)}return ne}function _objectSpread2$1(K){for(var J=1;J<arguments.length;J++){var ne=arguments[J]!=null?arguments[J]:{};J%2?ownKeys$3(Object(ne),!0).forEach(function(oe){_defineProperty$3(K,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ne)):ownKeys$3(Object(ne)).forEach(function(oe){Object.defineProperty(K,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return K}function _objectWithoutPropertiesLoose$1(K,J){if(K==null)return{};var ne={},oe=Object.keys(K),ce,ue;for(ue=0;ue<oe.length;ue++)ce=oe[ue],!(J.indexOf(ce)>=0)&&(ne[ce]=K[ce]);return ne}function _objectWithoutProperties$1(K,J){if(K==null)return{};var ne=_objectWithoutPropertiesLoose$1(K,J),oe,ce;if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(K);for(ce=0;ce<ue.length;ce++)oe=ue[ce],!(J.indexOf(oe)>=0)&&Object.prototype.propertyIsEnumerable.call(K,oe)&&(ne[oe]=K[oe])}return ne}function _slicedToArray$2(K,J){return _arrayWithHoles$2(K)||_iterableToArrayLimit$2(K,J)||_unsupportedIterableToArray$2(K,J)||_nonIterableRest$2()}function _arrayWithHoles$2(K){if(Array.isArray(K))return K}function _iterableToArrayLimit$2(K,J){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(K)))){var ne=[],oe=!0,ce=!1,ue=void 0;try{for(var Ae=K[Symbol.iterator](),pe;!(oe=(pe=Ae.next()).done)&&(ne.push(pe.value),!(J&&ne.length===J));oe=!0);}catch(xe){ce=!0,ue=xe}finally{try{!oe&&Ae.return!=null&&Ae.return()}finally{if(ce)throw ue}}return ne}}function _unsupportedIterableToArray$2(K,J){if(K){if(typeof K=="string")return _arrayLikeToArray$2(K,J);var ne=Object.prototype.toString.call(K).slice(8,-1);if(ne==="Object"&&K.constructor&&(ne=K.constructor.name),ne==="Map"||ne==="Set")return Array.from(K);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return _arrayLikeToArray$2(K,J)}}function _arrayLikeToArray$2(K,J){(J==null||J>K.length)&&(J=K.length);for(var ne=0,oe=new Array(J);ne<J;ne++)oe[ne]=K[ne];return oe}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _defineProperty$2(K,J,ne){return J in K?Object.defineProperty(K,J,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[J]=ne,K}function ownKeys$2(K,J){var ne=Object.keys(K);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(K);J&&(oe=oe.filter(function(ce){return Object.getOwnPropertyDescriptor(K,ce).enumerable})),ne.push.apply(ne,oe)}return ne}function _objectSpread2(K){for(var J=1;J<arguments.length;J++){var ne=arguments[J]!=null?arguments[J]:{};J%2?ownKeys$2(Object(ne),!0).forEach(function(oe){_defineProperty$2(K,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ne)):ownKeys$2(Object(ne)).forEach(function(oe){Object.defineProperty(K,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return K}function compose$1(){for(var K=arguments.length,J=new Array(K),ne=0;ne<K;ne++)J[ne]=arguments[ne];return function(oe){return J.reduceRight(function(ce,ue){return ue(ce)},oe)}}function curry$1(K){return function J(){for(var ne=this,oe=arguments.length,ce=new Array(oe),ue=0;ue<oe;ue++)ce[ue]=arguments[ue];return ce.length>=K.length?K.apply(this,ce):function(){for(var Ae=arguments.length,pe=new Array(Ae),xe=0;xe<Ae;xe++)pe[xe]=arguments[xe];return J.apply(ne,[].concat(ce,pe))}}}function isObject$5(K){return{}.toString.call(K).includes("Object")}function isEmpty(K){return!Object.keys(K).length}function isFunction$3(K){return typeof K=="function"}function hasOwnProperty$9(K,J){return Object.prototype.hasOwnProperty.call(K,J)}function validateChanges(K,J){return isObject$5(J)||errorHandler$1("changeType"),Object.keys(J).some(function(ne){return!hasOwnProperty$9(K,ne)})&&errorHandler$1("changeField"),J}function validateSelector(K){isFunction$3(K)||errorHandler$1("selectorType")}function validateHandler(K){isFunction$3(K)||isObject$5(K)||errorHandler$1("handlerType"),isObject$5(K)&&Object.values(K).some(function(J){return!isFunction$3(J)})&&errorHandler$1("handlersType")}function validateInitial(K){K||errorHandler$1("initialIsRequired"),isObject$5(K)||errorHandler$1("initialType"),isEmpty(K)&&errorHandler$1("initialContent")}function throwError$1(K,J){throw new Error(K[J]||K.default)}var errorMessages$2={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},errorHandler$1=curry$1(throwError$1)(errorMessages$2),validators$1={changes:validateChanges,selector:validateSelector,handler:validateHandler,initial:validateInitial};function create$1(K){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};validators$1.initial(K),validators$1.handler(J);var ne={current:K},oe=curry$1(didStateUpdate)(ne,J),ce=curry$1(updateState)(ne),ue=curry$1(validators$1.changes)(K),Ae=curry$1(extractChanges)(ne);function pe(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(ge){return ge};return validators$1.selector(me),me(ne.current)}function xe(me){compose$1(oe,ce,ue,Ae)(me)}return[pe,xe]}function extractChanges(K,J){return isFunction$3(J)?J(K.current):J}function updateState(K,J){return K.current=_objectSpread2(_objectSpread2({},K.current),J),J}function didStateUpdate(K,J,ne){return isFunction$3(J)?J(K.current):Object.keys(ne).forEach(function(oe){var ce;return(ce=J[oe])===null||ce===void 0?void 0:ce.call(J,K.current[oe])}),ne}var index$1={create:create$1},config$1={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function curry(K){return function J(){for(var ne=this,oe=arguments.length,ce=new Array(oe),ue=0;ue<oe;ue++)ce[ue]=arguments[ue];return ce.length>=K.length?K.apply(this,ce):function(){for(var Ae=arguments.length,pe=new Array(Ae),xe=0;xe<Ae;xe++)pe[xe]=arguments[xe];return J.apply(ne,[].concat(ce,pe))}}}function isObject$4(K){return{}.toString.call(K).includes("Object")}function validateConfig(K){return K||errorHandler("configIsRequired"),isObject$4(K)||errorHandler("configType"),K.urls?(informAboutDeprecation(),{paths:{vs:K.urls.monacoBase}}):K}function informAboutDeprecation(){console.warn(errorMessages$1.deprecation)}function throwError(K,J){throw new Error(K[J]||K.default)}var errorMessages$1={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},errorHandler=curry(throwError)(errorMessages$1),validators={config:validateConfig},compose=function(){for(var J=arguments.length,ne=new Array(J),oe=0;oe<J;oe++)ne[oe]=arguments[oe];return function(ce){return ne.reduceRight(function(ue,Ae){return Ae(ue)},ce)}};function merge(K,J){return Object.keys(J).forEach(function(ne){J[ne]instanceof Object&&K[ne]&&Object.assign(J[ne],merge(K[ne],J[ne]))}),_objectSpread2$1(_objectSpread2$1({},K),J)}var CANCELATION_MESSAGE={type:"cancelation",msg:"operation is manually canceled"};function makeCancelable(K){var J=!1,ne=new Promise(function(oe,ce){K.then(function(ue){return J?ce(CANCELATION_MESSAGE):oe(ue)}),K.catch(ce)});return ne.cancel=function(){return J=!0},ne}var _state$create=index$1.create({config:config$1,isInitialized:!1,resolve:null,reject:null,monaco:null}),_state$create2=_slicedToArray$2(_state$create,2),getState=_state$create2[0],setState=_state$create2[1];function config(K){var J=validators.config(K),ne=J.monaco,oe=_objectWithoutProperties$1(J,["monaco"]);setState(function(ce){return{config:merge(ce.config,oe),monaco:ne}})}function init$2(){var K=getState(function(J){var ne=J.monaco,oe=J.isInitialized,ce=J.resolve;return{monaco:ne,isInitialized:oe,resolve:ce}});if(!K.isInitialized){if(setState({isInitialized:!0}),K.monaco)return K.resolve(K.monaco),makeCancelable(wrapperPromise);if(window.monaco&&window.monaco.editor)return storeMonacoInstance(window.monaco),K.resolve(window.monaco),makeCancelable(wrapperPromise);compose(injectScripts,getMonacoLoaderScript)(configureLoader)}return makeCancelable(wrapperPromise)}function injectScripts(K){return document.body.appendChild(K)}function createScript(K){var J=document.createElement("script");return K&&(J.src=K),J}function getMonacoLoaderScript(K){var J=getState(function(oe){var ce=oe.config,ue=oe.reject;return{config:ce,reject:ue}}),ne=createScript("".concat(J.config.paths.vs,"/loader.js"));return ne.onload=function(){return K()},ne.onerror=J.reject,ne}function configureLoader(){var K=getState(function(ne){var oe=ne.config,ce=ne.resolve,ue=ne.reject;return{config:oe,resolve:ce,reject:ue}}),J=window.require;J.config(K.config),J(["vs/editor/editor.main"],function(ne){storeMonacoInstance(ne),K.resolve(ne)},function(ne){K.reject(ne)})}function storeMonacoInstance(K){getState().monaco||setState({monaco:K})}function __getMonacoInstance(){return getState(function(K){var J=K.monaco;return J})}var wrapperPromise=new Promise(function(K,J){return setState({resolve:K,reject:J})}),loader$1={config,init:init$2,__getMonacoInstance},le={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},v=le,ae={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Y$1=ae;function Me({children:K}){return Wt.createElement("div",{style:Y$1.container},K)}var Z$2=Me,$=Z$2;function Ee({width:K,height:J,isEditorReady:ne,loading:oe,_ref:ce,className:ue,wrapperProps:Ae}){return Wt.createElement("section",{style:{...v.wrapper,width:K,height:J},...Ae},!ne&&Wt.createElement($,null,oe),Wt.createElement("div",{ref:ce,style:{...v.fullWidth,...!ne&&v.hide},className:ue}))}var ee=Ee,H=reactExports.memo(ee);function Ce(K){reactExports.useEffect(K,[])}var k=Ce;function he(K,J,ne=!0){let oe=reactExports.useRef(!0);reactExports.useEffect(oe.current||!ne?()=>{oe.current=!1}:K,J)}var l=he;function D$1(){}function h(K,J,ne,oe){return De(K,oe)||be(K,J,ne,oe)}function De(K,J){return K.editor.getModel(te(K,J))}function be(K,J,ne,oe){return K.editor.createModel(J,ne,oe?te(K,oe):void 0)}function te(K,J){return K.Uri.parse(J)}function Oe({original:K,modified:J,language:ne,originalLanguage:oe,modifiedLanguage:ce,originalModelPath:ue,modifiedModelPath:Ae,keepCurrentOriginalModel:pe=!1,keepCurrentModifiedModel:xe=!1,theme:me="light",loading:ge="Loading...",options:ye={},height:Se="100%",width:Te="100%",className:Ne,wrapperProps:$e={},beforeMount:ke=D$1,onMount:je=D$1}){let[Ke,Ye]=reactExports.useState(!1),[ze,Xe]=reactExports.useState(!0),Je=reactExports.useRef(null),rt=reactExports.useRef(null),Ze=reactExports.useRef(null),et=reactExports.useRef(je),nt=reactExports.useRef(ke),Ge=reactExports.useRef(!1);k(()=>{let Ie=loader$1.init();return Ie.then(Fe=>(rt.current=Fe)&&Xe(!1)).catch(Fe=>(Fe==null?void 0:Fe.type)!=="cancelation"&&console.error("Monaco initialization: error:",Fe)),()=>Je.current?Re():Ie.cancel()}),l(()=>{if(Je.current&&rt.current){let Ie=Je.current.getOriginalEditor(),Fe=h(rt.current,K||"",oe||ne||"text",ue||"");Fe!==Ie.getModel()&&Ie.setModel(Fe)}},[ue],Ke),l(()=>{if(Je.current&&rt.current){let Ie=Je.current.getModifiedEditor(),Fe=h(rt.current,J||"",ce||ne||"text",Ae||"");Fe!==Ie.getModel()&&Ie.setModel(Fe)}},[Ae],Ke),l(()=>{let Ie=Je.current.getModifiedEditor();Ie.getOption(rt.current.editor.EditorOption.readOnly)?Ie.setValue(J||""):J!==Ie.getValue()&&(Ie.executeEdits("",[{range:Ie.getModel().getFullModelRange(),text:J||"",forceMoveMarkers:!0}]),Ie.pushUndoStop())},[J],Ke),l(()=>{var Ie,Fe;(Fe=(Ie=Je.current)==null?void 0:Ie.getModel())==null||Fe.original.setValue(K||"")},[K],Ke),l(()=>{let{original:Ie,modified:Fe}=Je.current.getModel();rt.current.editor.setModelLanguage(Ie,oe||ne||"text"),rt.current.editor.setModelLanguage(Fe,ce||ne||"text")},[ne,oe,ce],Ke),l(()=>{var Ie;(Ie=rt.current)==null||Ie.editor.setTheme(me)},[me],Ke),l(()=>{var Ie;(Ie=Je.current)==null||Ie.updateOptions(ye)},[ye],Ke);let ve=reactExports.useCallback(()=>{var qe;if(!rt.current)return;nt.current(rt.current);let Ie=h(rt.current,K||"",oe||ne||"text",ue||""),Fe=h(rt.current,J||"",ce||ne||"text",Ae||"");(qe=Je.current)==null||qe.setModel({original:Ie,modified:Fe})},[ne,J,ce,K,oe,ue,Ae]),Be=reactExports.useCallback(()=>{var Ie;!Ge.current&&Ze.current&&(Je.current=rt.current.editor.createDiffEditor(Ze.current,{automaticLayout:!0,...ye}),ve(),(Ie=rt.current)==null||Ie.editor.setTheme(me),Ye(!0),Ge.current=!0)},[ye,me,ve]);reactExports.useEffect(()=>{Ke&&et.current(Je.current,rt.current)},[Ke]),reactExports.useEffect(()=>{!ze&&!Ke&&Be()},[ze,Ke,Be]);function Re(){var Fe,qe,We,Ue;let Ie=(Fe=Je.current)==null?void 0:Fe.getModel();pe||((qe=Ie==null?void 0:Ie.original)==null||qe.dispose()),xe||((We=Ie==null?void 0:Ie.modified)==null||We.dispose()),(Ue=Je.current)==null||Ue.dispose()}return Wt.createElement(H,{width:Te,height:Se,isEditorReady:Ke,loading:ge,_ref:Ze,className:Ne,wrapperProps:$e})}var ie=Oe,we=reactExports.memo(ie);function Pe(){let[K,J]=reactExports.useState(loader$1.__getMonacoInstance());return k(()=>{let ne;return K||(ne=loader$1.init(),ne.then(oe=>{J(oe)})),()=>ne==null?void 0:ne.cancel()}),K}var Le=Pe;function He(K){let J=reactExports.useRef();return reactExports.useEffect(()=>{J.current=K},[K]),J.current}var se=He,_=new Map;function Ve({defaultValue:K,defaultLanguage:J,defaultPath:ne,value:oe,language:ce,path:ue,theme:Ae="light",line:pe,loading:xe="Loading...",options:me={},overrideServices:ge={},saveViewState:ye=!0,keepCurrentModel:Se=!1,width:Te="100%",height:Ne="100%",className:$e,wrapperProps:ke={},beforeMount:je=D$1,onMount:Ke=D$1,onChange:Ye,onValidate:ze=D$1}){let[Xe,Je]=reactExports.useState(!1),[rt,Ze]=reactExports.useState(!0),et=reactExports.useRef(null),nt=reactExports.useRef(null),Ge=reactExports.useRef(null),ve=reactExports.useRef(Ke),Be=reactExports.useRef(je),Re=reactExports.useRef(),Ie=reactExports.useRef(oe),Fe=se(ue),qe=reactExports.useRef(!1),We=reactExports.useRef(!1);k(()=>{let Qe=loader$1.init();return Qe.then(tt=>(et.current=tt)&&Ze(!1)).catch(tt=>(tt==null?void 0:tt.type)!=="cancelation"&&console.error("Monaco initialization: error:",tt)),()=>nt.current?_e():Qe.cancel()}),l(()=>{var tt,it,at,ot;let Qe=h(et.current,K||oe||"",J||ce||"",ue||ne||"");Qe!==((tt=nt.current)==null?void 0:tt.getModel())&&(ye&&_.set(Fe,(it=nt.current)==null?void 0:it.saveViewState()),(at=nt.current)==null||at.setModel(Qe),ye&&((ot=nt.current)==null||ot.restoreViewState(_.get(ue))))},[ue],Xe),l(()=>{var Qe;(Qe=nt.current)==null||Qe.updateOptions(me)},[me],Xe),l(()=>{!nt.current||oe===void 0||(nt.current.getOption(et.current.editor.EditorOption.readOnly)?nt.current.setValue(oe):oe!==nt.current.getValue()&&(We.current=!0,nt.current.executeEdits("",[{range:nt.current.getModel().getFullModelRange(),text:oe,forceMoveMarkers:!0}]),nt.current.pushUndoStop(),We.current=!1))},[oe],Xe),l(()=>{var tt,it;let Qe=(tt=nt.current)==null?void 0:tt.getModel();Qe&&ce&&((it=et.current)==null||it.editor.setModelLanguage(Qe,ce))},[ce],Xe),l(()=>{var Qe;pe!==void 0&&((Qe=nt.current)==null||Qe.revealLine(pe))},[pe],Xe),l(()=>{var Qe;(Qe=et.current)==null||Qe.editor.setTheme(Ae)},[Ae],Xe);let Ue=reactExports.useCallback(()=>{var Qe;if(!(!Ge.current||!et.current)&&!qe.current){Be.current(et.current);let tt=ue||ne,it=h(et.current,oe||K||"",J||ce||"",tt||"");nt.current=(Qe=et.current)==null?void 0:Qe.editor.create(Ge.current,{model:it,automaticLayout:!0,...me},ge),ye&&nt.current.restoreViewState(_.get(tt)),et.current.editor.setTheme(Ae),pe!==void 0&&nt.current.revealLine(pe),Je(!0),qe.current=!0}},[K,J,ne,oe,ce,ue,me,ge,ye,Ae,pe]);reactExports.useEffect(()=>{Xe&&ve.current(nt.current,et.current)},[Xe]),reactExports.useEffect(()=>{!rt&&!Xe&&Ue()},[rt,Xe,Ue]),Ie.current=oe,reactExports.useEffect(()=>{var Qe,tt;Xe&&Ye&&((Qe=Re.current)==null||Qe.dispose(),Re.current=(tt=nt.current)==null?void 0:tt.onDidChangeModelContent(it=>{We.current||Ye(nt.current.getValue(),it)}))},[Xe,Ye]),reactExports.useEffect(()=>{if(Xe){let Qe=et.current.editor.onDidChangeMarkers(tt=>{var at;let it=(at=nt.current.getModel())==null?void 0:at.uri;if(it&&tt.find(ot=>ot.path===it.path)){let ot=et.current.editor.getModelMarkers({resource:it});ze==null||ze(ot)}});return()=>{Qe==null||Qe.dispose()}}return()=>{}},[Xe,ze]);function _e(){var Qe,tt;(Qe=Re.current)==null||Qe.dispose(),Se?ye&&_.set(ue,nt.current.saveViewState()):(tt=nt.current.getModel())==null||tt.dispose(),nt.current.dispose()}return Wt.createElement(H,{width:Te,height:Ne,isEditorReady:Xe,loading:xe,_ref:Ge,className:$e,wrapperProps:ke})}var fe=Ve,de=reactExports.memo(fe),Ft=de;const index=Object.freeze(Object.defineProperty({__proto__:null,DiffEditor:we,Editor:de,default:Ft,loader:loader$1,useMonaco:Le},Symbol.toStringTag,{value:"Module"})),LazyEditor=reactExports.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>index),void 0).then(K=>({default:K.Editor}))),CodeEditor=({isReadonly:K=!1,code:J,language:ne,onChange:oe,onValidate:ce,wordWrap:ue,isAutoFocus:Ae=!1,cursorPosition:pe,onChangeCursorPosition:xe})=>{loader$1.config({monaco});const me=reactExports.useRef(null),ge=useSelector$1(selectApplicationTheme),{debounce:ye}=useDebounce(),[Se,Te]=reactExports.useState("");reactExports.useEffect(()=>{me.current&&pe&&Se!==J&&(me.current.setPosition(new Position$1(pe.lineNumber,pe.column)),Te(J||""))},[J,pe,Se]);const Ne=ge===THEME_KEYS.dark?"vs-dark":THEME_KEYS[ge.toLocaleLowerCase()];if(ne===LanguageEnum.Markdown)return jsxRuntimeExports.jsx("div",{className:"markdown-viewer",children:jsxRuntimeExports.jsx(Markdown,{children:J})});const $e=je=>{Ae&&je.focus(),me.current=je,je.onDidChangeCursorPosition(ke)},ke=je=>{const{lineNumber:Ke,column:Ye}=je.position;xe==null||xe(new Position$1(Ke,Ye))};return jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(PF,{loading:!0}),children:jsxRuntimeExports.jsx(LazyEditor,{loading:null,className:"code-editor",language:ne==null?void 0:ne.toLowerCase(),defaultValue:"",value:J,theme:Ne,width:"100%",height:"100%",onMount:$e,onChange:je=>{oe&&ye({fn:()=>oe(je),value:je})},onValidate:ce,options:{scrollBeyondLastLine:!1,readOnly:K,wordWrap:ue?"on":"off",minimap:{enabled:!1},scrollbar:{verticalScrollbarSize:12,horizontalScrollbarSize:12}}})})},container$t="_container_i0pii_1",styles$19={container:container$t},ScriptViewer=({data:K})=>{const{Body:J,Language:ne,WordWrap:oe}=K,[ce,ue]=reactExports.useState("");reactExports.useEffect(()=>{J&&ue(J.join(`
`))},[J]);const Ae=pe=>{pe&&ue(pe)};return ce?jsxRuntimeExports.jsx("div",{className:styles$19.container,children:jsxRuntimeExports.jsx(CodeEditor,{isReadonly:!0,code:ce,language:ne,wordWrap:oe,onChange:Ae})}):null},ROW_COLUMN_NAME="Row Col",generateRowColumn=K=>{const J=K.find(isObject$9),ne=J?Object.keys(J)[0]:"String";return{Name:ROW_COLUMN_NAME,Value:{Type:ne}}},getColumns=(K,J,ne)=>{const oe=K.length,ce=K.map((ue,Ae)=>{const pe=getColumnTypeByCells(Ae,oe,ne),xe=Object.values(ue)[0];return{Name:toString$2(xe),Value:{Type:pe}}});return mapMetadataToGridColumnsHelper$1([generateRowColumn(J),...ce])},getRows=(K,J,ne)=>{const oe=[],ce=K.length;for(let ue=0;ue<J.length;ue+=1){const Ae=J[ue],pe=isObject$9(Ae)?Object.values(Ae).at(0):null,xe={[ROW_COLUMN_NAME]:pe},me=ue*ce,ye=ne.slice(me,me+ce).reduce((Se,Te,Ne)=>{const $e=K[Ne].String,ke=isObject$9(Te)?Object.values(Te).at(0):null;return{...Se,[$e]:ke}},{});oe.push({...xe,...ye})}return oe},container$s="_container_i0pii_1",styles$18={container:container$s},MatrixViewer=({ColHeaders:K,ValuesContainer:J,RowHeadersContainer:ne})=>{const{columns:oe,rows:ce}=reactExports.useMemo(()=>isArrayOfObjects(K)&&isObject$9(J)&&isArray$6(J.Array)&&isObject$9(ne)&&isArray$6(ne.Array)?{columns:getColumns(K,ne.Array,J.Array),rows:getRows(K,ne.Array,J.Array)}:{columns:[],rows:[]},[K,ne,J]);return jsxRuntimeExports.jsx("div",{className:styles$18.container,children:jsxRuntimeExports.jsx(Grid,{columns:oe,data:ce})})},deepClone=K=>{if(K===null)return null;const ne=(oe=>BigNumber.isBigNumber(oe)?new BigNumber(oe.toString()):{...oe})(K);return Object.keys(ne).forEach(oe=>ne[oe]=typeof K[oe]=="object"?deepClone(K[oe]):K[oe]),Array.isArray(K)&&K.length?(ne.length=K.length)&&Array.from(ne):Array.isArray(K)?Array.from(K):ne},getPropByPath=(K,J=[])=>J.length===0?K:J.reduce((ne,oe)=>{if(!oe)return ne;const ce=ne==null?void 0:ne[oe];return isDefined$1(ce)?ce:null},K),dataToString=(K,J=5)=>{if(isObject$9(K)){const ne=objectToStringArray(K,J);return trimArray(ne,J-1)}if(isArray$6(K)){const ne=arrayToStringArray(K,J);return trimArray(ne,J-1)}return toString$2(K)},excludeKeyList=["_t"],objectToStringArray=(K,J=4,ne=excludeKeyList)=>{var ce;const oe=(ce=Object.entries(K))==null?void 0:ce.reduce((ue,[Ae,pe])=>(ne.includes(Ae)||ue.push(pe),ue),[]);return arrayToStringArray(oe,J)},arrayToStringArray=(K,J=4)=>[...K].reduce((ne,oe,ce,ue)=>ne.length>=J?(ue.splice(1),ne):isObject$9(oe)?[...ne,...objectToStringArray(oe,J-ne.length)]:isArray$6(oe)?[...ne,...arrayToStringArray(oe,J-ne.length)]:(isDefined$1(oe)&&ne.push(toString$2(oe)),ne),[]),trimArray=(K,J=4)=>{const ne=K.slice(0,J);return K.length>J&&ne.push("..."),ne.join("; ")};var ErrorTypesEnum=(K=>(K.REQUIRED="required",K.VALIDATE="validate",K))(ErrorTypesEnum||{});const useValidation=({isRequired:K,type:J})=>{const{t:ne}=useTranslation(),[oe,ce]=reactExports.useState();return{validate:reactExports.useCallback(Ae=>{const xe=(()=>{switch(!0){case((!isDefined$1(Ae)||isEmptyString(Ae))&&K):return{type:ErrorTypesEnum.REQUIRED,message:ne("validationMessage.fieldRequired")};case(J===ValueTypesEnum$1.Bool&&!isStringBool(Ae)&&!isNullable(Ae)):return{type:ErrorTypesEnum.VALIDATE,message:ne("validationMessage.boolValue")};case(J===ValueTypesEnum$1.Int&&!isInt(Ae)&&toString$2(Ae).length>0):return{type:ErrorTypesEnum.VALIDATE,message:ne("validationMessage.intValue")};case(J===ValueTypesEnum$1.Date&&isString$2(Ae)&&!DateFormatUtility.create(Ae).isValid()):return{type:ErrorTypesEnum.VALIDATE,message:ne("validationMessage.dateValue")};case(J===ValueTypesEnum$1.Time&&isString$2(Ae)&&!DateFormatUtility.create(Ae,DateFormatEnum.TIME_MS).isValid()):return{type:ErrorTypesEnum.VALIDATE,message:ne("validationMessage.timeValue")};case(J===ValueTypesEnum$1.DateTime&&isString$2(Ae)&&!DateFormatUtility.create(Ae).isValid()):return{type:ErrorTypesEnum.VALIDATE,message:ne("validationMessage.dateTimeValue")};default:return}})();return ce(xe),xe},[K,ne,J]),validateError:oe}};var VariantType=(K=>(K.Missing="Missing",K.Int="Int",K.Double="Double",K.Time="Time",K.Date="Date",K.DateTime="DateTime",K.String="String",K.Bool="Bool",K.Key="Key",K))(VariantType||{});const VariantSelectList=({children:K})=>jsxRuntimeExports.jsx("div",{className:"variant-select-list",children:K}),VariantSelectListItem=({title:K,children:J})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"variant-select-list__item-title",children:K}),jsxRuntimeExports.jsx("div",{className:"variant-select-list__item-value",children:J})]}),select$4="_select_1bjy5_1",styles$17={select:select$4},BooleanValue=({value:K,isRequired:J,isDisable:ne,onChange:oe,testId:ce})=>{const ue=reactExports.useMemo(()=>[...J?[]:[{label:"(none)",value:"null"}],{label:"Y",value:"true"},{label:"N",value:"false"}],[J]),Ae=()=>isBool(K)?K?"true":"false":isNullable(K)?"(none)":"",pe=me=>me==="null"?null:me==="true",xe=me=>{oe(pe(me))};return jsxRuntimeExports.jsx(xF,{testid:ce,className:styles$17.select,variant:"borderless",disabled:ne,value:Ae(),options:ue,onChange:xe})},useEditorState=()=>{const K=reactExports.useContext(EditorContextWrapper);return{event:(K==null?void 0:K.event)||{},state:(K==null?void 0:K.state)||{},action:(K==null?void 0:K.action)||{},fetch:(K==null?void 0:K.fetch)||{},request:(K==null?void 0:K.request)||{},i18n:(K==null?void 0:K.i18n)||{},isHandler:(K==null?void 0:K.isHandler)||!1}};var SchemaType=(K=>(K.Enum="Enum",K.GenericKey="GenericKey",K.GenericKeyList="GenericKeyList",K.GenericData="GenericData",K.GenericDataList="GenericDataList",K.SimpleKey="SimpleKey",K.SimpleKeyList="SimpleKeyList",K.Variant="Variant",K.VariantList="VariantList",K.Successor="Successor",K.Dict="Dict",K.BinaryContent="FileData",K.Data="Data",K.Key="Key",K.NdFloatVector="NdFloatVector",K.NdFloatMatrix="NdFloatMatrix",K))(SchemaType||{});const fileDataModuleName="cl.runtime.file.file_data.FileData",fileDataModuleNameR2="cl.FileData",fileDataModuleNameR1="Cl.Runtime.View.FileData",getCellProps=({schemaElement:K,path:J=[],keys:ne})=>{var Ae,pe,xe,me,ge,ye,Se,Te,Ne,$e,ke;const oe=!!K.Vector,ce=isNullable(K.Key)&&isObject$9(K)&&!oe&&((Ae=K.Data)==null?void 0:Ae.Name)||void 0,ue=getSchemaType(K);return{key:K.Name,label:K.Label||K.Name,isVector:oe,schemaType:ue,elementKey:K.Name,valueType:(pe=K.Value)==null?void 0:pe.Type,description:K.Comment,isRequired:!K.Optional,successor:ce,isKey:!!(ne!=null&&ne.includes(K.Name)),isFlat:(ue==="GenericData"||!!K.Data)&&!oe,moduleName:(xe=K.Data)==null?void 0:xe.Name,keyName:(me=K.Key)==null?void 0:me.Name,keyModuleName:(ge=K.Key)==null?void 0:ge.Module.ModuleName,path:[...J,K.Name],enumSelector:getSelector((Se=(ye=K==null?void 0:K.Enum)==null?void 0:ye.Module)==null?void 0:Se.ModuleName,(Te=K==null?void 0:K.Enum)==null?void 0:Te.Name),selector:getSelector(($e=(Ne=K==null?void 0:K.Data)==null?void 0:Ne.Module)==null?void 0:$e.ModuleName,(ke=K==null?void 0:K.Data)==null?void 0:ke.Name),isReadOnly:!!K.ReadOnly}},getSchemaType=K=>{var ue,Ae,pe,xe,me;const J=!!K.Key,ne=!!K.Vector,oe=isNullable(K.Key)&&isObject$9(K)&&!ne&&((ue=K.Data)==null?void 0:ue.Name)||void 0,ce=getSelector((pe=(Ae=K==null?void 0:K.Data)==null?void 0:Ae.Module)==null?void 0:pe.ModuleName,(xe=K==null?void 0:K.Data)==null?void 0:xe.Name)||"";if([fileDataModuleName,fileDataModuleNameR1,fileDataModuleNameR2].includes(ce))return"FileData";if(oe)return"Successor";if(K!=null&&K.Enum)return"Enum";if(J)return ne?"SimpleKeyList":"SimpleKey";switch((me=K.Value)==null?void 0:me.Type){case"Data":return ne?"GenericDataList":"GenericData";case"Key":return ne?"GenericKeyList":"GenericKey";case"Variant":return ne?"VariantList":"Variant";case"Dict":return"Dict";case"NdFloatVector":return"NdFloatVector";case"NdFloatMatrix":return"NdFloatMatrix";default:return null}},getSelector=(K,J)=>K&&J?`${K}.${J}`:void 0,removeLastPart=K=>{const J=K.lastIndexOf(".");return J===-1?K:K.substring(0,J)},getBreadcrumbProps=({schemaElement:K,path:J,editorData:ne,editorSchema:oe})=>{var pe,xe,me,ge,ye,Se,Te,Ne;if(!K)return null;const ce=!!K.Vector,ue=getSchemaType(K);return{path:J,schemaType:ue,selector:(()=>{var $e,ke,je,Ke,Ye,ze;if(ue===SchemaType.Successor){const Xe=getPropByPath(ne,J),Je=(Xe==null?void 0:Xe._t)??(($e=K==null?void 0:K.Data)==null?void 0:$e.Name)??"",rt=Object.keys(oe??{}).find(Ze=>cleanTypeHelper(Ze)===Je)??"";return getSelector(removeLastPart(rt)??((je=(ke=K==null?void 0:K.Data)==null?void 0:ke.Module)==null?void 0:je.ModuleName),cleanTypeHelper(rt)??Je)??""}if(ue===SchemaType.GenericData&&oe){const Xe=getPropByPath(ne,J);return getFullSchemaByName(oe,Xe==null?void 0:Xe._t)}return getSelector((Ye=(Ke=K==null?void 0:K.Data)==null?void 0:Ke.Module)==null?void 0:Ye.ModuleName,(ze=K==null?void 0:K.Data)==null?void 0:ze.Name)||""})(),title:K.Label||K.Name,valueType:(pe=K.Value)==null?void 0:pe.Type,moduleName:(xe=K.Data)==null?void 0:xe.Name,keyName:(me=K.Key)==null?void 0:me.Name,keyModuleName:(ge=K.Key)==null?void 0:ge.Module.ModuleName,enumSelector:getSelector((Se=(ye=K==null?void 0:K.Enum)==null?void 0:ye.Module)==null?void 0:Se.ModuleName,(Te=K==null?void 0:K.Enum)==null?void 0:Te.Name),isVector:ce,isFlat:(((Ne=K.Value)==null?void 0:Ne.Type)==="Data"||!!K.Data)&&!ce,isRequired:!K.Optional,isReadOnly:!!(K!=null&&K.ReadOnly)}},getFullSchemaByName=(K,J)=>{var ne;return!K||!J?"":((ne=Object.keys(K))==null?void 0:ne.find(oe=>{var ce;return((ce=oe.split("."))==null?void 0:ce.at(-1))===J}))||""},getSchemaNameByType=(K,J)=>{var ne;return!K||!J?"":((ne=Object.keys(K))==null?void 0:ne.find(oe=>{var ce;return((ce=oe.split("."))==null?void 0:ce.at(-1))===J}))||""},parseValueFromCode=K=>K==null?void 0:K.replaceAll(/\r?\n|\n\r?/g,`
`),valueEditorViewString="_valueEditorViewString_bb54d_1",styles$16={valueEditorViewString},ValueEditorViewString=({value:K,isReadonly:J,onChange:ne})=>{const[oe,ce]=reactExports.useState(new Position$1(1,1)),ue=pe=>{ne(parseValueFromCode(pe))},Ae=pe=>{ce(pe)};return jsxRuntimeExports.jsx("div",{className:styles$16.valueEditorViewString,children:jsxRuntimeExports.jsx(CodeEditor,{code:K,isReadonly:J,onChange:ue,language:LanguageEnum.Plaintext,wordWrap:!0,cursorPosition:oe,onChangeCursorPosition:Ae})})},valueEditorViewCollection=["String"],ValueEditorView=({isReadOnly:K,value:J})=>{const{action:ne}=useEditorState(),{state:oe}=useEditorTabState(),{path:ce,valueType:ue}=oe.tab,Ae=pe=>ce&&ne.updateEditorData({path:ce,updateValue:pe});return ue==="String"?jsxRuntimeExports.jsx(ValueEditorViewString,{value:J,isReadonly:K,onChange:Ae}):null},getTabParamsByPath=({path:K,rootSchema:J,editorSchema:ne,editorData:oe})=>{const ce={title:"Not found",path:[],selector:""},ue={title:"Root",path:[],isFlat:!0,selector:J};return(K==null?void 0:K.reduce((Ae,pe,xe)=>{var Se;if(!Ae)return null;const me=[...K].splice(0,xe+1),ge=ne==null?void 0:ne[Ae==null?void 0:Ae.selector],ye=(Se=ge==null?void 0:ge.Elements)==null?void 0:Se.find(Te=>(Te==null?void 0:Te.Name)===pe);if(ye)return getBreadcrumbProps({schemaElement:ye,editorData:oe,path:me,editorSchema:ne});if(Ae!=null&&Ae.valueType&&valueEditorViewCollection.includes(Ae.valueType))return{...Ae,isVector:!1,path:me};if((Ae==null?void 0:Ae.valueType)==="Dict"){const Te=getPropByPath(oe,me);if(isArray$6(Te))return{path:me,schemaType:SchemaType.VariantList,selector:"",title:`${me}`,isVector:!0,isFlat:!1,valueType:"Dict"}}if((Ae==null?void 0:Ae.schemaType)===SchemaType.GenericDataList){const Te=getPropByPath(oe,me);if(Te!=null&&Te._t&&ne)return{path:me,schemaType:SchemaType.GenericData,selector:getSchemaNameByType(ne,Te._t),title:`${me}`,isFlat:!0,isVector:!1}}return Ae},ue))||ce},EditorTabContextWrapper=reactExports.createContext(null),EditorTabContext=({children:K})=>{var ge;const{state:J}=useEditorState(),{breadcrumbsData:ne,editorData:oe,editorSchema:ce,rootSchema:ue}=J,Ae=(ge=ne==null?void 0:ne.breadcrumbs[ne.activeIndex])==null?void 0:ge.path,pe=reactExports.useMemo(()=>getTabParamsByPath({path:Ae,rootSchema:ue,editorData:oe,editorSchema:ce}),[oe,Ae]),xe=ye=>{pe.selector=ye},me={state:{isActive:!0,tabIndex:ne.activeIndex,tab:pe,breadcrumbPath:Ae},setSelector:xe};return jsxRuntimeExports.jsx(EditorTabContextWrapper.Provider,{value:me,children:K})},useEditorTabState=()=>{const K=reactExports.useContext(EditorTabContextWrapper);return{state:(K==null?void 0:K.state)||{},setSelector:K==null?void 0:K.setSelector}},regExLineBreak=/[\r\n]/,isMultiLineText=K=>regExLineBreak.test(K),getFirstLine=K=>K.split(regExLineBreak)[0].trim().concat("...")||"",StringValue=({path:K=[],useTabEditor:J=!1,elementName:ne,value:oe,onChange:ce,readOnly:ue,testId:Ae,...pe})=>{const{action:xe}=useEditorState(),{state:me}=useEditorTabState(),{t:ge}=useTranslation(),[ye,Se]=reactExports.useState(),[Te,Ne]=reactExports.useState(!1),[$e,ke]=reactExports.useState(!1),[je,Ke]=reactExports.useState(!1),Ye=()=>{ce==null||ce(ye||""),Ne(!1)},ze=()=>je?oe:isMultiLineText(oe)?getFirstLine(oe):oe,Xe=()=>{if(!ue){if(J){xe.openEditorTabAction({path:K},me.tabIndex);return}Se(oe),Ne(!0)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Ml,{...pe,variant:"borderless",readOnly:ue,testId:Ae,value:ze(),onChange:ce,onFocus:()=>Ke(!0),onBlur:()=>Ke(!1),suffix:jsxRuntimeExports.jsx(oa,{testid:"edit-icon",onClick:Xe,children:jsxRuntimeExports.jsx(EA,{})})}),jsxRuntimeExports.jsxs(Ho,{title:ge("editor.edit"),open:Te,onClose:()=>Ne(!1),children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(CodeEditor,{code:ye,isReadonly:ue,onChange:Se,onValidate:Je=>ke(!!Je.length),language:LanguageEnum.Plaintext})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"string-value",onCancel:()=>Ne(!1),okText:ge("buttons.save"),cancelText:ge("buttons.cancel"),onOk:Ye,okProps:{disabled:$e||ue}})]})]})},VariantSelectValue__notSupport="_VariantSelectValue__notSupport_19lus_1",styles$15={VariantSelectValue__notSupport},getViewFormatByType=K=>({Date:"YYYY-MM-DD",Time:"HH:mm:ss",DateTime:"YYYY-MM-DD HH:mm:ss"})[K]||"YYYY-MM-DD",getBluredFormatByType=K=>({Date:"YYYY-MM-DD",Time:"HH:mm:ss.SSS",DateTime:"YYYY-MM-DDTHH:mm:ss.SSS[Z]"})[K]||"YYYY-MM-DD",getReturnDateFormat=(K,J)=>({Date:J.format("YYYY-MM-DD"),Time:J.format("HH:mm:ss.SSS"),DateTime:J.format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")})[K]||J.format("YYYY-MM-DD");var DateValueFormat=(K=>(K.Date="YYYY-MM-DD",K.DateTime="YYYY-MM-DD HH:mm:ss",K.DateTimeISO="YYYY-MM-DDTHH:mm:ss.SSS[Z]",K.Time="HH:mm:ss",K.TimeMs="HH:mm:ss.SSS",K))(DateValueFormat||{});const DateValue=({readOnly:K,value:J,valueType:ne,status:oe,onChange:ce,testId:ue})=>{const Ae=getViewFormatByType(ne),pe=reactExports.useMemo(()=>J?dayjs(J,Ae):null,[J]),xe=ge=>{const ye=ge?getReturnDateFormat(ne,ge):null;ce==null||ce(ye)},me=ge=>{const Se=ge.target.value,Te=dayjs(Se,Ae);Te.isValid()&&(ce==null||ce(Te.format(getBluredFormatByType(ne))))};return jsxRuntimeExports.jsx(bF,{testid:ue,variant:"borderless",format:{format:Ae,type:K?void 0:"mask"},status:oe,showTime:ne==="DateTime",picker:ne==="Time"?"time":"date",readOnly:K,value:pe,onChange:xe,onBlur:me})},ParseGenericValue={toDomainType:K=>isString$2(K)?K.split(";")[0].replace(/Key$/,""):"",toDomainRecord:K=>isString$2(K)?K.split(";").slice(1).join(";"):"",toDtoValue:(K,J)=>`${K};${J}`,toDtoType:K=>isString$2(K)?`${K}Key`:""},GenericTableCell=({children:K,ellipsis:J=!0,title:ne,onDoubleClick:oe,onClick:ce})=>{const ue=()=>isString$2(ne)?ne:"";return jsxRuntimeExports.jsx("div",{title:ue(),className:"generic-table-cell",onDoubleClick:oe,onClick:ce,children:jsxRuntimeExports.jsx("div",{className:cx({"generic-table-cell_ellipsis":J}),children:K})})},GenericTableType=({height:K=250,type:J,colWidth:ne=200,onChange:oe,updateLoadingStatus:ce})=>{const ue=reactExports.useRef(null),{request:Ae}=useEditorState(),{state:pe,isLoading:xe,hasInitFetch:me,isInitiated:ge}=useRequest(Ae.getTypes,{onError:toast.error,onSuccess:Ne=>{var $e;return!J&&oe(($e=Ne==null?void 0:Ne[0])==null?void 0:$e.Name)},autorun:!0}),ye=reactExports.useMemo(()=>pe==null?void 0:pe.findIndex(Ne=>Ne.Name===J),[pe,J]);reactExports.useEffect(()=>{var Ne;ye&&((Ne=ue==null?void 0:ue.current)==null||Ne.scrollTo({index:ye}))},[me]);const Se=reactExports.useMemo(()=>[{key:"Name",dataIndex:"Name",title:"Types",width:ne,render:Ne=>jsxRuntimeExports.jsx(GenericTableCell,{title:Ne,children:Ne})}],[]),Te=reactExports.useMemo(()=>pe||void 0,[pe]);return reactExports.useEffect(()=>{!xe&&!ge&&(Se!=null&&Se.length)&&(Te!=null&&Te.length)&&setTimeout(()=>{ce==null||ce(!1)},100)},[xe,ge,Se,Te]),jsxRuntimeExports.jsx(SF,{tableRef:ue,useSearch:!0,virtual:!0,loading:xe,rowKey:"Name",scroll:{x:ne,y:K},dataSource:Te,columns:Se,selectedRowIndex:ye,onChangeSelectedRowIndex:(Ne,$e)=>oe($e.Name)})},GenericRecordsContext=reactExports.createContext(void 0),GenericRecordsProvider=({children:K})=>{const{request:J}=useEditorState(),{state:ne,fetch:oe,isLoading:ce,hasInitFetch:ue,isInitiated:Ae}=useRequest(J.getSelectRecords,{onError:toast.error}),pe=reactExports.useMemo(()=>({state:ne,fetch:oe,isLoading:ce,hasInitFetch:ue,isInitiated:Ae}),[ne,oe,ce,ue,Ae]);return jsxRuntimeExports.jsx(GenericRecordsContext.Provider,{value:pe,children:K})},useGenericRecordsContext=()=>{const K=reactExports.useContext(GenericRecordsContext);if(!K)throw new Error("useGenericRecordsContext must be used within a GenericRecordsProvider");return K},GenericTableRecord=({tableHeight:K=250,colWidth:J=150,recordKey:ne,onChange:oe,onSelect:ce,cellHeight:ue=1,updateLoadingStatus:Ae})=>{const pe=reactExports.useRef(null),{state:xe,isLoading:me,hasInitFetch:ge,isInitiated:ye}=useGenericRecordsContext(),Se=reactExports.useMemo(()=>{var je;return(je=xe==null?void 0:xe.data)==null?void 0:je.findIndex(Ke=>Ke._key===ne)},[xe,ne]);reactExports.useEffect(()=>{var je;Se&&((je=pe==null?void 0:pe.current)==null||je.scrollTo({index:Se}))},[ge]);const Te=(je,Ke,Ye)=>jsxRuntimeExports.jsx(GenericTableCell,{title:je,onDoubleClick:()=>Ye(Ke==null?void 0:Ke._key),children:je}),Ne=je=>{var Ke;return(Ke=je==null?void 0:je.Elements)==null?void 0:Ke.reduce((Ye,ze)=>{const{Value:Xe,Key:Je,Enum:rt,Hidden:Ze,Vector:et,Name:nt}=ze;return(isSimpleValueType$1(Xe==null?void 0:Xe.Type)||Je||rt)&&!et&&!Ze&&Ye.push({key:nt,dataIndex:nt,title:nt,minWidth:J,render:(Ge,ve)=>Te(Ge,ve,ce)}),Ye},[])},$e=reactExports.useMemo(()=>{var Ke,Ye,ze;if(!((Ke=xe==null?void 0:xe.schema)!=null&&Ke.rootType))return;const je=(ze=(Ye=xe==null?void 0:xe.schema)==null?void 0:Ye.typeList)==null?void 0:ze[xe.schema.rootType];return Ne(je)},[xe]),ke=()=>$e!=null&&$e.length?($e==null?void 0:$e.length)*J:J;return reactExports.useEffect(()=>{!me&&!ye&&($e!=null&&$e.length)&&(xe!=null&&xe.data.length)&&setTimeout(()=>{Ae==null||Ae(!1)},100)},[me,ye,$e,xe]),jsxRuntimeExports.jsx(SF,{tableRef:pe,useSearch:!0,virtual:!0,loading:me,scroll:{x:ke(),y:K},dataSource:xe==null?void 0:xe.data,rowKey:"_key",columns:$e,selectedRowIndex:Se,onChangeSelectedRowIndex:(je,Ke)=>oe(Ke._key),cellHeight:ue})},limit=1e3,skip=0,GenericKeyModal=({isOpen:K,initialGenericType:J,initialGenericRecordKey:ne,onSubmit:oe,onClose:ce})=>{var Ge;const{t:ue}=useTranslation(),Ae=reactExports.useRef(null),[pe,xe]=reactExports.useState(J),[me,ge]=reactExports.useState(200),[ye,Se]=reactExports.useState(ne),[Te,Ne]=reactExports.useState(1),$e=reactExports.useRef(null),[ke,je]=reactExports.useState(!0),[Ke,Ye]=reactExports.useState(!0),{state:ze,isLoading:Xe,fetch:Je}=useGenericRecordsContext(),rt=!(ze!=null&&ze.data.length)&&!Xe;reactExports.useEffect(()=>{pe&&Je({params:{type:pe,skip,limit,table_format:!0}})},[pe]),reactExports.useEffect(()=>{if(!Ae.current)return;const ve=new ResizeObserver(()=>{var Ie;const Re=(Ie=Ae==null?void 0:Ae.current)==null?void 0:Ie.clientHeight;Re&&ge(Re-24)});return ve.observe(Ae.current),()=>ve==null?void 0:ve.disconnect()},[]);const Ze=ve=>{xe(ve),Se(void 0)},et=ve=>{!pe||!ve||(oe({type:pe,recordKey:ve}),ce())},nt=()=>{!pe||!ye||(oe({type:pe,recordKey:ye}),ce())};return jsxRuntimeExports.jsxs(Ho,{open:K,size:"lg",defaultHeight:400,title:ue("editor.modalHeader"),onClose:ce,children:[jsxRuntimeExports.jsxs(Ho.Body,{children:[ke&&Ke&&jsxRuntimeExports.jsx(HF,{className:"generic-key-modal__loader"}),jsxRuntimeExports.jsx("div",{ref:Ae,className:cx("generic-key-modal",{invisible:ke&&Ke}),children:jsxRuntimeExports.jsxs(Lj,{direction:"horizontal",children:[jsxRuntimeExports.jsx(Ij,{className:"generic-key-modal__panel",defaultSize:40,order:1,children:jsxRuntimeExports.jsx(GenericTableType,{height:me,type:pe,onChange:Ze,updateLoadingStatus:ve=>je(ve)})}),jsxRuntimeExports.jsx($F,{}),jsxRuntimeExports.jsx(Ij,{className:"generic-key-modal__panel",defaultSize:60,order:2,children:jsxRuntimeExports.jsx("div",{className:"generic-key-modal__right-side",children:rt?jsxRuntimeExports.jsx(NoGridData,{content:jsxRuntimeExports.jsx("span",{className:"generic-key-modal__no-data-content",children:ue("noData.noData")}),icon:jsxRuntimeExports.jsx(Pp,{size:"XL"})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{ref:$e,className:"generic-key-modal__cell-height-container",children:[ue("grid.cellHeight"),jsxRuntimeExports.jsx(xF,{className:"generic-key-modal__select",value:Te,options:rowsCountArr,onChange:ve=>Ne(ve)})]}),pe&&jsxRuntimeExports.jsx(GenericTableRecord,{tableHeight:me-(((Ge=$e.current)==null?void 0:Ge.clientHeight)??0),recordType:pe,recordKey:ye,onChange:Se,onSelect:et,cellHeight:Te,updateLoadingStatus:ve=>Ye(ve)})]})})})]})})]}),!ke&&!Ke&&jsxRuntimeExports.jsx(Ho.Footer,{testId:"generic-key",okText:ue("buttons.apply"),cancelText:ue("buttons.cancel"),onCancel:ce,onOk:nt,okProps:{disabled:!ye||!pe}})]})},GenericKeySelect=({value:K,isReadOnly:J,error:ne,prefixElement:oe,testId:ce,onChange:ue})=>{const[Ae,pe]=reactExports.useState(!1),{initialGenericType:xe,initialGenericRecordKey:me}=reactExports.useMemo(()=>({initialGenericType:ParseGenericValue.toDomainType(K),initialGenericRecordKey:ParseGenericValue.toDomainRecord(K)}),[K]),ge=()=>{pe(!0)},ye=Se=>{const Te=ParseGenericValue.toDtoType(Se.type),Ne=ParseGenericValue.toDtoValue(Te,Se.recordKey);ue(Ne)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Ml,{readOnly:!0,testId:ce,variant:"borderless",status:ne?"error":"default",value:K,suffix:jsxRuntimeExports.jsx(oa,{testid:"edit-icon",onClick:ge,disabled:J,children:jsxRuntimeExports.jsx(EA,{})}),prefix:oe}),Ae&&jsxRuntimeExports.jsx(GenericRecordsProvider,{children:jsxRuntimeExports.jsx(GenericKeyModal,{initialGenericType:xe,initialGenericRecordKey:me,isOpen:Ae,onClose:()=>pe(!1),onSubmit:ye})})]})},VariantSelectValue=({isError:K,type:J,value:ne,onChange:oe})=>(()=>{const ue=K?"error":void 0;switch(J){case VariantType.String:return jsxRuntimeExports.jsx(StringValue,{elementName:J,value:ne||"",onChange:oe});case VariantType.Bool:return jsxRuntimeExports.jsx(BooleanValue,{value:ne,onChange:oe});case VariantType.Int:return jsxRuntimeExports.jsx(CF,{variant:"borderless",status:ue,value:ne,onChange:oe});case VariantType.Double:return jsxRuntimeExports.jsx(CF,{variant:"borderless",status:ue,value:ne,onChange:oe});case VariantType.Date:return jsxRuntimeExports.jsx(DateValue,{valueType:"Date",status:ue,value:ne,onChange:oe});case VariantType.Time:return jsxRuntimeExports.jsx(DateValue,{valueType:"Time",status:ue,value:ne,onChange:oe});case VariantType.DateTime:return jsxRuntimeExports.jsx(DateValue,{valueType:"DateTime",status:ue,value:ne,onChange:oe});case VariantType.Key:return jsxRuntimeExports.jsx(GenericKeySelect,{error:K,value:ne||"",onChange:oe});default:return jsxRuntimeExports.jsx("div",{className:styles$15.VariantSelectValue__notSupport,children:"Type not supported"})}})(),VariantSelectContent=({variantType:K,value:J,isError:ne,onChangeValue:oe,onChangeType:ce})=>{const ue=reactExports.useMemo(()=>Object.keys(VariantType).map(pe=>({value:pe,label:pe})),[]),Ae=pe=>{ce(pe??VariantType.Missing)};return jsxRuntimeExports.jsxs(VariantSelectList,{children:[jsxRuntimeExports.jsx(VariantSelectListItem,{title:"Type",children:jsxRuntimeExports.jsx(xF,{variant:"borderless",value:K,options:ue,onChange:Ae})}),K&&K!==VariantType.Missing&&jsxRuntimeExports.jsx(VariantSelectListItem,{title:"Value",children:jsxRuntimeExports.jsx(VariantSelectValue,{value:J,type:K,isError:ne,onChange:oe})})]})},VariantSelectModal=({variantType:K,value:J,isRequiredValue:ne,isOpen:oe,onClose:ce,onSubmit:ue})=>{const{t:Ae}=useTranslation();return jsxRuntimeExports.jsx(Ho,{size:"md",title:Ae("confirmationModal.variantSelect.title"),open:oe,onClose:ce,children:jsxRuntimeExports.jsx(VariantSelectModalContent,{value:J,variantType:K,isRequiredValue:ne,onClose:ce,onSubmit:ue})})},VariantSelectModalContent=({variantType:K,value:J,isRequiredValue:ne,onClose:oe,onSubmit:ce})=>{const{t:ue}=useTranslation(),[Ae,pe]=reactExports.useState(!1),[xe,me]=reactExports.useState(K),[ge,ye]=reactExports.useState(J),{validate:Se}=useValidation({type:xe===VariantType.Missing?void 0:xe,isRequired:ne}),Te=()=>{if(!xe)return;const ke=xe===VariantType.Missing?null:{[xe]:ge};ce(ke)},Ne=ke=>{ye(ke),pe(!!Se(ke))},$e=ke=>{me(ke),pe(!1),ye(null)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(VariantSelectContent,{isError:Ae,variantType:xe,value:ge,onChangeType:$e,onChangeValue:Ne})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"variant",okText:ue("buttons.save"),cancelText:ue("buttons.cancel"),onCancel:oe,onOk:Te,okProps:{disabled:Ae}})]})},doubleNumberRegExp=/^[+-]?\d+(\.\d+)?$/,intNumberRegExp=/^\d+$/,dateNumberRegExp=/(\d{4})-(\d{2})-(\d{2})/,VariantSelect=({variantType:K,value:J,isRequiredValue:ne=!1,isReadOnly:oe,selectOnFocus:ce,onChange:ue,testId:Ae="variant-select"})=>{const[pe,xe]=reactExports.useState(!1),me=()=>!oe&&xe(!0),ge=()=>xe(!1),ye=Ne=>{ue(Ne),ge()},Se=()=>{switch(K){case VariantType.Time:return isString$2(J)?DateFormatUtility.create(J,DateFormatEnum.TIME_MS).format(DateFormatEnum.TIME):"";case VariantType.Bool:return isNullable(J)?"(none)":J?"Y":"N";case VariantType.DateTime:return isString$2(J)?DateFormatUtility.create(J).format(DateFormatEnum.DATE_TIME):"";default:return dataToString(J)}},Te=Ne=>{ue({[(ke=>intNumberRegExp.test(ke)?VariantType.Int:doubleNumberRegExp.test(ke)?VariantType.Double:dateNumberRegExp.test(ke)?VariantType.Date:ke?VariantType.String:VariantType.Missing)(Ne)]:Ne})};return jsxRuntimeExports.jsxs("div",{className:"variant-select",children:[jsxRuntimeExports.jsx(Ml,{testId:Ae,variant:"borderless",value:Se(),onChange:Te,readOnly:oe,selectOnFocus:ce}),jsxRuntimeExports.jsxs("div",{"data-tid":`${Ae}-edit-button`,"aria-hidden":"true",className:"variant-select__variant",onClick:me,children:[jsxRuntimeExports.jsx("div",{"aria-hidden":"true",className:"variant-select__variant-name",children:K??VariantType.Missing}),jsxRuntimeExports.jsx(oa,{children:jsxRuntimeExports.jsx(EA,{})})]}),jsxRuntimeExports.jsx(VariantSelectModal,{value:J,variantType:K??VariantType.Missing,isRequiredValue:ne,isOpen:pe,onClose:ge,onSubmit:ye})]})};var DictionaryViewType=(K=>(K.Flat="Flat",K.List="List",K))(DictionaryViewType||{});const DictionaryViewValueCell=({isReadonly:K=!1,value:J,path:ne})=>{var xe,me;const{action:oe}=useEditorState(),{state:ce}=useEditorTabState(),ue=isArray$6(J)?"List":"Flat",Ae=ge=>{oe.updateEditorData({path:ne,updateValue:ge})};if(ue==="Flat"){const ge=J,ye=ge&&((xe=Object.keys(ge))==null?void 0:xe[0])||"",Se=(ge&&((me=Object.values(ge))==null?void 0:me[0]))??"";return jsxRuntimeExports.jsx(VariantSelect,{isReadOnly:K,selectOnFocus:!0,variantType:ye,value:Se,onChange:Ae})}const pe=()=>oe.openEditorTabAction({path:ne},ce.tabIndex);return ue==="List"?jsxRuntimeExports.jsx(Ml,{selectOnFocus:!0,prefix:jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",onClick:pe,iconAfter:jsxRuntimeExports.jsx(uT,{})}),readOnly:!0,variant:"borderless",value:dataToString(J)}):null};var EditorValidationType=(K=>(K.IsRequired="isRequired",K))(EditorValidationType||{});const isRequiredValidation=K=>isArray$6(K)?K.length>0:isBool(K)?!0:isString$2(K)?!!K.trim():isDefined$1(K),isRequiredSchema=K=>K.Optional?null:EditorValidationType.IsRequired,validationRules=()=>({[EditorValidationType.IsRequired]:{validate:isRequiredValidation,schemaRule:isRequiredSchema,message:instance.t("validationMessage.fieldRequired")}}),getValidationRulesBySchema=K=>Object.values(validationRules()).reduce((J,ne)=>{const oe=ne.schemaRule(K);return oe&&J.push(oe),J},[]),validateValueBySchema=(K,J)=>{var ce;const ne=validationRules(),oe=(ce=K.rules)==null?void 0:ce.find(ue=>{var Ae;return!((Ae=ne[ue])!=null&&Ae.validate(J))});return oe?{rule:oe,path:K.path,message:ne[oe].message}:null},getValidationSchemaByPath=({schema:K,rootSchema:J,editorData:ne,path:oe})=>{if(!K||!J||!oe)return null;const ce=(Ae,pe)=>({rules:getValidationRulesBySchema(Ae),path:pe}),ue=(Ae,pe)=>{var Ke,Ye,ze,Xe,Je,rt,Ze,et,nt,Ge;const xe=K[Ae];if(!xe)return null;const me=(Ke=xe==null?void 0:xe.Elements)==null?void 0:Ke.find(ve=>ve.Name===oe[pe]),ge=oe.slice(0,pe+1),ye=oe.slice(0,pe+2),Se=pe+1===oe.length;if(!me)return{rules:[],path:ge};if(Se)return ce(me,ge);const Te=`${(ze=(Ye=me==null?void 0:me.Data)==null?void 0:Ye.Module)==null?void 0:ze.ModuleName}.${(Xe=me==null?void 0:me.Data)==null?void 0:Xe.Name}`===fileDataModuleName,Ne=!!me.Vector,$e=!Te&&Ne&&((rt=(Je=me==null?void 0:me.Data)==null?void 0:Je.Module)==null?void 0:rt.ModuleName),ke=Ne&&((et=(Ze=me==null?void 0:me.Key)==null?void 0:Ze.Module)==null?void 0:et.ModuleName),je=!Ne&&((Ge=(nt=me==null?void 0:me.Data)==null?void 0:nt.Module)==null?void 0:Ge.ModuleName);if(Te)return ce(me,ge);if($e){const ve=pe+2,Be=`${me.Data.Module.ModuleName}.${me.Data.Name}`;return ue(Be,ve)}return je?ue((()=>{var Re;const Be=(Re=getPropByPath(ne,ge))==null?void 0:Re._t;if(Be){const Ie=`${me.Data.Module.ModuleName}.${Be}`;if(K[Ie])return Ie}return`${me.Data.Module.ModuleName}.${me.Data.Name}`})(),pe+1):ke||Ne?ce(me,ye):ce(me,ge)};return ue(J,0)},validate=({schema:K,rootSchema:J,editorData:ne,path:oe,value:ce})=>{const ue=getValidationSchemaByPath({schema:K,path:oe,rootSchema:J,editorData:ne});return ue!=null&&ue.rules?validateValueBySchema(ue,ce):null},isExistError=({data:K,schema:J,rootSchemaName:ne})=>{const oe=(ce,ue)=>{const Ae=()=>!!validate({schema:J,path:ue,rootSchema:ne,editorData:K,value:ce});return isArray$6(ce)?ce.length?ce.some((pe,xe)=>oe(pe,[...ue,xe.toString()])):Ae():isObject$9(ce)?Object.entries(ce).some(([pe,xe])=>oe(xe,[...ue,pe])):Ae()};return oe(K,[])},validateEditorData=({data:K,rootSchemaName:J,schema:ne})=>{const oe={},ce=(ue,Ae)=>{const pe=()=>{const xe=validate({schema:ne,path:Ae,rootSchema:J,editorData:K,value:ue});xe&&(oe[xe.path.toString()]=xe)};if(isArray$6(ue)){if(!ue.length){pe();return}ue.forEach((xe,me)=>{ce(xe,[...Ae,me.toString()])});return}if(isObject$9(ue)){Object.entries(ue).forEach(([xe,me])=>{ce(me,[...Ae,xe])});return}pe()};return ce(K,[]),oe},defaultEditorI18n={submitBtnText:"Submit",cancelBtnText:"Discard",copyBtnText:"Save & Next"};var SetValueByPathType=(K=>(K.AddToArray="addToArray",K.SetValue="setValue",K))(SetValueByPathType||{});const setValueByPath=({object:K,value:J,pathList:ne,withCreate:oe=!0,addType:ce="setValue",addedIndex:ue,currentSchema:Ae,editorSchema:pe})=>{var Se,Te,Ne,$e;if(!(isObject$9(K)||isArray$6(K))||!ne)return null;const xe=deepClone(K),me=[...ne];let ge=xe;for(;me.length>1;){const ke=me.shift();if(!ke||!(isObject$9(xe)||isArray$6(xe)))return null;const je=(Ne=(Te=(Se=Ae==null?void 0:Ae.Elements)==null?void 0:Se.find(ze=>ze.Name===ne[ne.indexOf(ke??"")]))==null?void 0:Te.Data)==null?void 0:Ne.Name,Ke=pe?Object.keys(pe).find(ze=>cleanTypeHelper(ze)===je):void 0,Ye=Ke?($e=pe==null?void 0:pe[Ke].Elements)==null?void 0:$e.map(ze=>({Name:ze.Name})):[];!ge[ke]&&oe&&(ge[ke]=je&&Ye?{_t:je,...Object.fromEntries(Ye.map(({Name:ze})=>[ze,null]))}:{}),ge=ge[ke]}const ye=me[me.length-1];if(!ye||!(isObject$9(ge)||isArray$6(ge)))return null;if(ce==="setValue")return ge[ye]=J,xe;if(ce==="addToArray"){const ke=ge[ye]??(ge[ye]=[]);return isArray$6(ke)?(isDefined$1(ue)?ke.splice(ue,0,J):ke.push(J),xe):null}return null},createEmptyDataBySchema=(K,J)=>!K||!J?null:(oe=>{var ue;const ce=K[oe];return ce&&((ue=ce==null?void 0:ce.Elements)==null?void 0:ue.reduce((Ae,pe)=>(Ae[pe.Name]=null,Ae),{}))||null})(J),EditorContextWrapper=reactExports.createContext(null),initState={isReadOnly:!1,isDisableKeyFields:!1,editorSchema:null,editorData:null,rootSchema:"",originalEditorData:null,breadcrumbsData:{breadcrumbs:[],activeIndex:0},allTypes:null,editorToolbarRef:null,validationError:{}},EditorContext=({isReadOnly:K=initState.isReadOnly,isDisableKeyFields:J=initState.isDisableKeyFields,requestConfig:ne,event:oe,i18n:ce,children:ue,dataset:Ae,isHandler:pe=!1})=>{const[xe,me]=reactExports.useState(initState.editorToolbarRef),[ge,ye]=reactExports.useState(initState.editorSchema),[Se,Te]=reactExports.useState(initState.editorData),[Ne,$e]=reactExports.useState(initState.rootSchema),[ke,je]=reactExports.useState(initState.originalEditorData),[Ke,Ye]=reactExports.useState(initState.breadcrumbsData),[ze,Xe]=reactExports.useState(initState.allTypes),[Je,rt]=reactExports.useState(initState.validationError),Ze=reactExports.useMemo(()=>ne,[ne]),et=reactExports.useMemo(()=>oe,[oe]),nt=reactExports.useMemo(()=>ce?{...defaultEditorI18n,...ce}:defaultEditorI18n,[ce]),Ge=reactExports.useRef({}),ve=reactExports.useRef({}),Be=({rootSchemaName:bt,schema:xt,data:yt,breadcrumbs:It})=>{const ht=yt||createEmptyDataBySchema(xt,bt);return Te(ht),je(ht),ye(xt),$e(bt),rt({}),Ie({initBreadcrumb:It,editorData:ht}),{data:ht,schema:xt,rootSchemaName:bt}},Re=bt=>{var xt;Ye(bt),(xt=et==null?void 0:et.onChangeBreadcrumbs)==null||xt.call(et,bt)},Ie=({initBreadcrumb:bt,editorData:xt})=>{const yt={breadcrumbs:[{path:[]}],activeIndex:0};Re((()=>{var gt;if(!(bt!=null&&bt.breadcrumbs))return yt;const ht=(gt=bt==null?void 0:bt.breadcrumbs)==null?void 0:gt.findIndex(Pt=>!getPropByPath(xt,Pt.path));return ht>0?{breadcrumbs:bt.breadcrumbs.slice(0,ht),activeIndex:ht-1}:bt})())},Fe=reactExports.useCallback(async bt=>{if(!bt)return[];if(Ge.current[bt])return Ge.current[bt];let xt=[];if(ve.current[bt])xt=await ve.current[bt];else{const It=Ze.getTypeHierarchy({name:bt});ve.current[bt]=It,xt=await It}const yt=(xt==null?void 0:xt.map(({Label:It,Name:ht})=>({label:It,value:ht})))||[];return Ge.current[bt]=yt,delete ve.current[bt],yt},[Ze]),qe=bt=>{Xe(bt)},We=(bt,xt)=>{if(!ge)return;const yt=validate({schema:ge,path:bt,rootSchema:Ne,editorData:Se,value:xt});yt?(Je[bt.toString()]=yt,rt(structuredClone(Je))):Je!=null&&Je[bt.toString()]&&(delete Je[bt.toString()],rt(structuredClone(Je)))},Ue=()=>{if(!ge)return!1;const bt=validateEditorData({data:Se,schema:ge,rootSchemaName:Ne});return rt(bt),Object.keys(bt).length>0},_e=bt=>{rt(xt=>{const yt=bt.toString();return Object.keys(xt).forEach(It=>{It.startsWith(yt)&&delete Je[It]}),xt})},Qe=bt=>Te(bt),tt=({path:bt,updateValue:xt})=>{if(getPropByPath(Se,bt)===xt||!ge)return;isObject$9(xt)&&"_t"in xt&&_e(bt);const yt=setValueByPath({object:Se,value:xt,pathList:bt,addType:SetValueByPathType.SetValue,currentSchema:ge[Ne],editorSchema:ge});yt&&(We(bt,xt),Te(yt))},it=bt=>{Re({...Ke,activeIndex:bt})},at=bt=>{const{breadcrumbs:xt,activeIndex:yt}=Ke,It=xt.slice(0,bt),ht=yt>=It.length?It.length-1:yt;Re({breadcrumbs:It,activeIndex:ht})},ot=(bt,xt)=>{const{breadcrumbs:yt}=Ke,It=xt+1;Ke.breadcrumbs.splice(It,yt.length-It,{...bt}),Re({breadcrumbs:[...Ke.breadcrumbs],activeIndex:It})},lt=({path:bt,selector:xt,index:yt})=>{const It=ge&&xt?{...createEmptyDataBySchema(ge,xt),_t:cleanTypeHelper(xt)}:null,ht=setValueByPath({object:Se,pathList:bt,value:It,addType:SetValueByPathType.AddToArray,addedIndex:yt});ht&&(_e(bt),Te(ht))},st=()=>{var It;const{activeIndex:bt,breadcrumbs:xt}=Ke,yt=bt+1;(It=xt==null?void 0:xt[yt])!=null&&It.path&&(getPropByPath(Se,xt[yt].path)||at(yt))},ut=({path:bt,index:xt})=>{const yt=getPropByPath(Se,bt);if(isArray$6(yt)&&yt.length){st();const It=yt==null?void 0:yt.filter((gt,Pt)=>!xt.includes(Pt)),ht=setValueByPath({object:Se,value:It,pathList:bt,addType:SetValueByPathType.SetValue});_e(bt),Te(ht)}},ft=({path:bt,from:xt,to:yt})=>{const It=getPropByPath(Se,bt);if(!isArray$6(It)||!It.length||!isDefined$1(xt)||!isDefined$1(yt))return!1;st();const ht=It[xt];return It.splice(xt,1),It.splice(yt,0,ht),_e(bt),Te(deepClone(Se)),!0},dt=({path:bt,type:xt,index:yt})=>{const It={key:"",value:xt===DictionaryViewType.Flat?{}:[]},ht=setValueByPath({object:Se,pathList:bt,value:It,addType:SetValueByPathType.AddToArray,addedIndex:yt});ht&&(_e(bt),Te(ht))},Bt=async({type:bt})=>{try{const xt=await Ze.getSchema({name:bt});return ye(yt=>({...yt,...xt.typeList})),xt}catch(xt){toast.error(xt)}return null},mt={state:{isReadOnly:K,isDisableKeyFields:J,rootSchema:Ne,editorData:Se,editorSchema:ge,originalEditorData:ke,breadcrumbsData:Ke,allTypes:ze,editorToolbarRef:xe,validationError:Je},action:{initEditor:Be,setEditorDataAction:Qe,updateEditorData:tt,switchTabAction:it,closeTabAction:at,openEditorTabAction:ot,addListElementAction:lt,addDictElementAction:dt,removeListElementAction:ut,moveListElementAction:ft,setAllTypesAction:qe,setEditorToolbarRef:me,validateEditor:Ue},fetch:{getAdditionalSchema:Bt,getFlatWithTypeDataFetch:async({type:bt})=>{const xt=await Bt({type:bt});if(xt){const yt=createEmptyDataBySchema(xt.typeList,xt.rootType);if(isObject$9(yt))return{...yt,_t:bt}}return null},getModuleSuccessorOptions:Fe},event:et,request:Ze,i18n:nt,dataset:Ae,isHandler:pe};return jsxRuntimeExports.jsx(EditorContextWrapper.Provider,{value:mt,children:ue})},footer$2="_footer_1epqs_1",actions$1="_actions_1epqs_13",buttons="_buttons_1epqs_17",styles$14={footer:footer$2,actions:actions$1,buttons},EditorFooter=({isSubmitDisabled:K=!1,isCancelDisabled:J=!1,onSubmit:ne,onCancel:oe,isCopyBtn:ce,onCopy:ue,footerActions:Ae})=>{const{state:pe,i18n:xe}=useEditorState();if(pe.isReadOnly)return null;const me=ge=>ge.replaceAll(" ","-").toLocaleLowerCase();return jsxRuntimeExports.jsxs("div",{className:styles$14.footer,children:[jsxRuntimeExports.jsx("div",{className:styles$14.actions,children:Ae}),jsxRuntimeExports.jsxs("div",{className:styles$14.buttons,children:[jsxRuntimeExports.jsx(rl,{onClick:ne,disabled:K,testid:`${me(xe==null?void 0:xe.submitBtnText)}-button`,children:xe==null?void 0:xe.submitBtnText}),ce&&jsxRuntimeExports.jsx(rl,{onClick:ue,testid:`${me(xe==null?void 0:xe.copyBtnText)}-button`,children:xe==null?void 0:xe.copyBtnText}),oe&&jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:oe,disabled:J,testid:`${me(xe==null?void 0:xe.cancelBtnText)}-button`,children:xe==null?void 0:xe.cancelBtnText})]})]})},TableToolbar$1="_TableToolbar_1w4k8_1",TableToolbar__item="_TableToolbar__item_1w4k8_4",styles$13={TableToolbar:TableToolbar$1,TableToolbar__item},TableToolbar=({items:K})=>jsxRuntimeExports.jsx("div",{className:styles$13.TableToolbar,children:K==null?void 0:K.map(J=>jsxRuntimeExports.jsxs("div",{className:cx(styles$13.TableToolbar__item),onClick:()=>{var ne;return!(J!=null&&J.isDisabled)&&((ne=J.onClick)==null?void 0:ne.call(J))},children:[(J==null?void 0:J.menu)&&jsxRuntimeExports.jsx(X_,{menu:J.menu,children:jsxRuntimeExports.jsx(mf,{title:J.tooltipContent,children:jsxRuntimeExports.jsx(rl,{iconAfter:J.icon,"data-tid":J.testId,variant:"ghost",type:"secondary",disabled:J.isDisabled})})}),!(J!=null&&J.menu)&&jsxRuntimeExports.jsx(mf,{title:J.tooltipContent,children:jsxRuntimeExports.jsx(rl,{iconAfter:J.icon,"data-tid":J.testId,variant:"ghost",type:"secondary",disabled:J.isDisabled})})]},J.key))}),BreadcrumbToolbar=({itemKey:K,parentPathLength:J,currentBreadcrumb:ne})=>{const{t:oe}=useTranslation(),{state:ce,action:ue}=useEditorState(),Ae=(ce==null?void 0:ce.editorData)[ne.path[0]],pe=Array.isArray(Ae)&&Ae.length>K+1,xe=[...ne.path],me=[{key:"moveUp",icon:jsxRuntimeExports.jsx(aF,{}),tooltipContent:oe("editor.breadcrumbs.moveUp"),isDisabled:Number(K)<=0,onClick:()=>{const ge=xe.length-2;xe[ge]=(K-1).toString(),ue.closeTabAction(J+1),ue.openEditorTabAction({path:xe},1)}},{key:"moveDown",icon:jsxRuntimeExports.jsx(iF,{}),tooltipContent:oe("editor.breadcrumbs.moveDown"),isDisabled:!pe,onClick:()=>{const ge=xe.length-J;xe[ge]=(K+1).toString(),ue.closeTabAction(J+1),ue.openEditorTabAction({path:xe},1)}}];return jsxRuntimeExports.jsx(TableToolbar,{items:me})},getFullSchema=(K,J)=>{if(K.editorSchema)return Object.keys(K.editorSchema).find(ne=>cleanTypeHelper(ne)===J)},getMultiplySchemas=(K,J)=>{if(!K||!J.editorSchema)return null;const ne=Array.isArray(K)?K:[K],oe=new Set(ne.filter(Ae=>Ae).map(Ae=>Ae._t)),ce=[];if(oe.forEach(Ae=>{const pe=getFullSchema(J,Ae);if(pe&&J.editorSchema){const xe=J.editorSchema[pe];ce.push(xe)}}),ce.length<=1)return null;const ue={Elements:[],Module:{ModuleName:""},Name:"",Label:"",Comment:"",DisplayKind:SchemaDisplayKind.Basic};return ce.forEach(Ae=>{var pe;(pe=Ae.Elements)==null||pe.forEach(xe=>{var me,ge;(me=ue.Elements)!=null&&me.some(ye=>ye.Name===xe.Name)||(ge=ue.Elements)==null||ge.push(xe)})}),ue},EditorBreadcrumbs=()=>{const{state:K,action:J}=useEditorState(),{editorData:ne}=K,{activeIndex:oe,breadcrumbs:ce}=K.breadcrumbsData,ue=ce[ce.length-1],Ae=ue.path.length-ue.path.findIndex(ke=>!isNaN$1(Number(ke))),pe=ne==null?void 0:ne[ue.path[0]],xe=getPropByPath(K.editorData,[...ue.path.slice(0,oe)]),me=!!getMultiplySchemas(ne==null?void 0:ne[ue.path[0]],K),ge=isArray$6(pe),ye=ce.length>2&&!isArray$6(xe)&&!me&&ge&&isDefined$1(xe)&&ue.path[0]!=="AbstractDataList",{t:Se}=useTranslation(),Te=(ke,je=2)=>{if(!(ke!=null&&ke.length))return"Root";if(ke.length>je){const Ke=ke.slice(-je);return isNumericString(Ke[0])?Ke.toReversed().join("[")+"]":Ke.join(".")}return ke.join(".")},Ne={testId:`editor-breadcrumbs-${oe+1}`,label:jsxRuntimeExports.jsx(oF,{}),itemKey:oe>=0?[...[...Array(ce.length).keys()].filter(ke=>ke!==0)]:"",isClosable:!1,toolTipBreadcrumb:Se("editor.breadcrumbs.closeAll")},$e=reactExports.useMemo(()=>ce==null?void 0:ce.map((ke,je)=>({testId:`editor-breadcrumbs-${je}`,label:Te(ke.path),itemKey:je.toString()})),[K.breadcrumbsData]);return jsxRuntimeExports.jsxs("div",{className:"editor-breadcrumb",children:[jsxRuntimeExports.jsx(gF,{activeKey:oe.toString(),items:ce.length>1?[...$e,Ne]:[],onClick:ke=>isArray$6(ke)?ke.toReversed().forEach(je=>J.closeTabAction(je)):J.switchTabAction(parseInt(ke)),onClose:ke=>J.closeTabAction(parseInt(ke))}),ye&&jsxRuntimeExports.jsx("div",{className:"breadcrumbs_arrows",children:jsxRuntimeExports.jsx(BreadcrumbToolbar,{itemKey:parseInt(ue.path[ue.path.length-Ae]),parentPathLength:Ae,currentBreadcrumb:ue})})]})},CodeEditorModal=({data:K,isReadOnly:J=!1,isOpen:ne=!1,onClose:oe,onSave:ce})=>{const{t:ue}=useTranslation(),[Ae,pe]=reactExports.useState(""),[xe,me]=reactExports.useState(!0);reactExports.useEffect(()=>{K&&ne&&(pe(serialize(K,void 0,2)),me(!0))},[K,ne]);const ge=Te=>{Te&&pe(Te),me(!1)},ye=Te=>{Te.length>0&&me(!0)},Se=()=>{Ae&&(ce==null||ce(deserialize(Ae)))};return jsxRuntimeExports.jsxs(Ho,{size:"lg",title:ue("editor.openJSONEditor"),open:ne,onClose:oe,defaultHeight:600,children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(CodeEditor,{isReadonly:J,code:Ae,language:LanguageEnum.Json,onChange:ge,onValidate:ye,isAutoFocus:!0})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"code-editor",onCancel:oe,okText:!J&&ue("buttons.save"),cancelText:ue("buttons.cancel"),onOk:Se,okProps:{disabled:xe}})]})},EditorActionJson=()=>{const{t:K}=useTranslation(),{state:J,event:ne}=useEditorState(),[oe,ce]=reactExports.useState(!1),ue=Ae=>{var pe;return(pe=ne==null?void 0:ne.onSubmit)==null?void 0:pe.call(ne,{data:Ae})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(mf,{title:K("editorToolbar.json"),children:jsxRuntimeExports.jsx(rl,{testid:"editor-action-json",iconAfter:jsxRuntimeExports.jsx(BD,{}),variant:"ghost",type:"secondary",onClick:()=>ce(!0)})}),jsxRuntimeExports.jsx(CodeEditorModal,{isReadOnly:J.isReadOnly,data:J.editorData,isOpen:oe,onClose:()=>ce(!1),onSave:ue})]})},EditorErrorTooltip=({errors:K,errorLimit:J=3,children:ne})=>{const oe=()=>jsxRuntimeExports.jsx("div",{className:"editor-error-tooltip",children:K==null?void 0:K.slice(0,J).map((ce,ue)=>jsxRuntimeExports.jsx("div",{className:"editor-error-tooltip__error-item",children:ce},ue))});return jsxRuntimeExports.jsx(mf,{title:K.length?oe():"",children:ne})},EditorActionError=()=>{const{t:K}=useTranslation(),{state:J}=useEditorState(),ne=Object.keys(J.validationError),oe=`${K("editor.validation.containErrors")} [${ne.length}]`;return jsxRuntimeExports.jsx(EditorErrorTooltip,{errors:[oe],children:jsxRuntimeExports.jsx(rl,{iconAfter:jsxRuntimeExports.jsx(M_,{}),variant:"ghost",type:"danger"})})},EditorToolbar=({children:K})=>jsxRuntimeExports.jsx("div",{className:"editor-toolbar",children:K});EditorToolbar.Group=({children:K,isRight:J=!1})=>jsxRuntimeExports.jsx("div",{className:cx("editor-toolbar__group",{"editor-toolbar":J}),children:K});EditorToolbar.Group.displayName="ToolbarGroup";EditorToolbar.Divider=()=>jsxRuntimeExports.jsx("div",{className:"editor-toolbar__divider"});EditorToolbar.Divider.displayName="ToolbarDivider";const EditorActionToolbarContainer=()=>{const{action:K}=useEditorState();return jsxRuntimeExports.jsx("div",{ref:K.setEditorToolbarRef})},EditorActionRefresh=()=>{const{t:K}=useTranslation(),{event:J}=useEditorState();return jsxRuntimeExports.jsx(mf,{title:K("editorToolbar.refresh"),children:jsxRuntimeExports.jsx(rl,{iconAfter:jsxRuntimeExports.jsx(Pk,{}),variant:"ghost",type:"secondary",onClick:J==null?void 0:J.onRefresh})})},EditorHeaderAction=({clearIcon:K})=>{var Ae;const{event:J,state:ne,action:oe}=useEditorState(),ce=!!((Ae=Object.keys(ne.validationError))!=null&&Ae.length),ue=[{view:jsxRuntimeExports.jsx(EditorActionToolbarContainer,{}),isShow:!!oe.setEditorToolbarRef,dividedAfter:!0},{view:jsxRuntimeExports.jsx(EditorActionRefresh,{}),isShow:!!(J!=null&&J.onRefresh)},{view:jsxRuntimeExports.jsx(EditorActionJson,{}),isShow:!1},{view:jsxRuntimeExports.jsx(EditorActionError,{}),isShow:ce}];return jsxRuntimeExports.jsxs(EditorToolbar,{children:[ue==null?void 0:ue.map((pe,xe)=>pe.isShow&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[pe.dividedBefore&&jsxRuntimeExports.jsx(EditorToolbar.Divider,{}),jsxRuntimeExports.jsx(EditorToolbar.Group,{children:pe.view},xe),pe.dividedAfter&&jsxRuntimeExports.jsx(EditorToolbar.Divider,{})]},xe)),K]})},EditorHeader=({clearIcon:K})=>jsxRuntimeExports.jsxs("div",{className:"editor-header",children:[jsxRuntimeExports.jsx("div",{className:"editor-header__left",children:jsxRuntimeExports.jsx(EditorBreadcrumbs,{})}),jsxRuntimeExports.jsx("div",{className:"editor-header__right",children:jsxRuntimeExports.jsx(EditorHeaderAction,{clearIcon:K})})]}),EditorFlatTable=({children:K})=>jsxRuntimeExports.jsxs("table",{className:"editor-flat-table",children:[jsxRuntimeExports.jsxs("colgroup",{children:[jsxRuntimeExports.jsx("col",{className:"editor-flat-table__label-column-size"}),jsxRuntimeExports.jsx("col",{className:"editor-flat-table__value-column-size"})]}),jsxRuntimeExports.jsx("tbody",{children:K})]});EditorFlatTable.Row=({children:K,isSelected:J})=>jsxRuntimeExports.jsx("tr",{tabIndex:-1,className:cx("editor-flat-table__tr",{"editor-flat-table__tr_selected":J}),children:K});EditorFlatTable.Row.displayName="EditorFlatTableRow";EditorFlatTable.Cell=({children:K})=>jsxRuntimeExports.jsx("td",{className:"editor-flat-table__td",children:K});EditorFlatTable.Cell.displayName="EditorFlatTableCell";const TransitionIcon=({data:K,testid:J})=>{const{event:ne}=useEditorState(),oe=reactExports.useMemo(()=>({type:ParseGenericValue.toDomainType(K),key:ParseGenericValue.toDomainRecord(K)}),[K]),ce=()=>{var ue;(ue=ne==null?void 0:ne.onTransition)==null||ue.call(ne,oe)};return!(oe!=null&&oe.key)||!(oe!=null&&oe.type)||!(ne!=null&&ne.onTransition)?null:jsxRuntimeExports.jsx(oa,{testid:J,onClick:ce,children:jsxRuntimeExports.jsx(gT$1,{})})},useValidationError=({path:K})=>{const{state:J}=useEditorState(),ne=()=>{var Ae;if(K)return(Ae=J.validationError)==null?void 0:Ae[K.toString()]},oe=()=>{if(!(J!=null&&J.validationError)||!K)return[];const Ae=Object.values(J.validationError);return K.length?Ae.filter(pe=>K.every((xe,me)=>xe===pe.path[me])):Ae},ce=reactExports.useMemo(()=>{var Ae;return(Ae=oe())==null?void 0:Ae.map(pe=>`${pe.path.join(".")} - ${pe.message}`)},[J.validationError,K]),ue=reactExports.useMemo(()=>{const Ae=ne();return Ae?[Ae.message]:ce},[J.validationError,K]);return{nestedErrorList:ce,errorList:ue}},EditorDrillIcon=({isDisable:K,testid:J,onClick:ne})=>jsxRuntimeExports.jsx(oa,{testid:J,disabled:K,onClick:ne,children:jsxRuntimeExports.jsx(uT,{})}),EditorKeyCell=({row:K})=>{const{isFlat:J,isVector:ne,description:oe,isRequired:ce,isKey:ue,value:Ae,path:pe,valueType:xe,keyName:me,schemaType:ge,label:ye}=K.original,{theme:Se}=uF(),{action:Te,event:Ne,isHandler:$e}=useEditorState(),{state:ke}=useEditorTabState(),{errorList:je}=useValidationError({path:pe}),Ke=()=>{Te.openEditorTabAction({path:pe},ke.tabIndex)},Ye=()=>{var Je;me&&isString$2(Ae)&&((Je=Ne==null?void 0:Ne.onTransition)==null||Je.call(Ne,{type:me,key:Ae}))},ze=()=>{const Je=ge===SchemaType.GenericData||ge===SchemaType.Successor||ge===SchemaType.GenericDataList,rt=ge===SchemaType.GenericKey&&isString$2(Ae),Ze=ge===SchemaType.SimpleKey&&Ae&&(Ne==null?void 0:Ne.onTransition),et=xe===ValueTypesEnum$1.Dict,nt=ge!==SchemaType.BinaryContent&&!Je&&!rt&&(J||ne||et)||ge===SchemaType.NdFloatMatrix||ge===SchemaType.NdFloatVector,Ge=!$e&&(!Ae||!(Ae!=null&&Ae._t))&&ue||(ge===SchemaType.GenericData||ge===SchemaType.GenericDataList)&&!Ae;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Ze&&jsxRuntimeExports.jsx(oa,{testid:"transition",onClick:Ye,children:jsxRuntimeExports.jsx(gT$1,{})}),rt&&jsxRuntimeExports.jsx(TransitionIcon,{data:Ae,testid:"transition"}),nt&&jsxRuntimeExports.jsx(EditorDrillIcon,{testid:"drill-down",onClick:Ke}),Je&&jsxRuntimeExports.jsx(EditorDrillIcon,{testid:"drill-down",isDisable:Ge,onClick:Ke})]})},Xe=()=>(je==null?void 0:je.length)>0&&jsxRuntimeExports.jsx(EditorErrorTooltip,{errors:je,children:jsxRuntimeExports.jsx(rl,{size:"sm",iconAfter:jsxRuntimeExports.jsx(M_,{}),variant:"ghost",type:"danger"})});return jsxRuntimeExports.jsxs("div",{title:oe,className:"editor-key-cell",children:[jsxRuntimeExports.jsxs("div",{className:"editor-key-cell__info",children:[jsxRuntimeExports.jsx("div",{"data-tid":`editor-key-${ye}`,className:"editor-key-cell__label",children:ye}),ce&&jsxRuntimeExports.jsx(LF$2,{}),ue&&jsxRuntimeExports.jsx("span",{"data-tid":`editor-key-${ye}`,children:jsxRuntimeExports.jsx(nA,{color:Se.palette.orange.a700,size:"XS"})})]}),jsxRuntimeExports.jsxs("div",{className:"editor-key-cell__actions",children:[Xe(),ze()]})]})},EditorNewRecord=({recordType:K,editorData:J,onSubmit:ne,onClose:oe})=>{const{request:ce,i18n:ue,dataset:Ae}=useEditorState(),pe=useRequest(ce.getSchema,{autorun:!0,args:{name:K}}),xe=useRequest(ce.saveRecord);if(pe.isLoading)return jsxRuntimeExports.jsx(PF,{loading:!0});if(!pe.state)return jsxRuntimeExports.jsx(RF,{});const me=({data:ge})=>{xe.fetch({dataset:Ae,data:[{_t:K,...ge}]}).then(ye=>{ne==null||ne(ye[0].Key)}).catch(toast.error)};return jsxRuntimeExports.jsx(Editor,{dataset:Ae,data:J,schema:pe.state.typeList,rootSchemaName:pe.state.rootType,onCancel:oe,onSubmit:me,requestConfig:ce,i18n:ue,isCancelDisabled:!1})},KeySelectCreateModal=({isOpen:K,onClose:J,schemaName:ne,onSubmit:oe})=>{const{t:ce}=useTranslation();return jsxRuntimeExports.jsx(Ho,{open:K,defaultHeight:450,title:ce("editor.entityModalHeader"),onClose:J,children:jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(EditorNewRecord,{recordType:ne,onClose:J,onSubmit:oe})})})},KeySelectCopyModal=({isOpen:K,onClose:J,schemaName:ne,data:oe,onSubmit:ce})=>{const{t:ue}=useTranslation();return jsxRuntimeExports.jsx(Ho,{open:K,defaultHeight:450,title:ue("editor.copyEntity"),onClose:J,children:jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(EditorNewRecord,{recordType:ne,editorData:oe,onClose:J,onSubmit:ce})})})},KeySelectToolbar=({schemaName:K,data:J,onSubmit:ne})=>{const{t:oe}=useTranslation(),[ce,ue]=reactExports.useState(!1),[Ae,pe]=reactExports.useState(!1),xe=[{key:"createRecord",icon:jsxRuntimeExports.jsx(Dk,{}),tooltipContent:oe("editor.createEntity"),onClick:()=>ue(!0)},{key:"createCopyRecord",icon:jsxRuntimeExports.jsx(jk,{}),tooltipContent:oe("editor.copyEntity"),isDisabled:!J,onClick:()=>pe(!0)}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TableToolbar,{items:xe}),jsxRuntimeExports.jsx(KeySelectCreateModal,{schemaName:K,isOpen:ce,onClose:()=>ue(!1),onSubmit:ne}),jsxRuntimeExports.jsx(KeySelectCopyModal,{schemaName:K,data:J,isOpen:Ae,onClose:()=>pe(!1),onSubmit:ne})]})},LIMIT$1=1e3,SKIP$1=0,KeySelectModal=({schemaName:K,defaultKey:J,isOpen:ne,onClose:oe,onSubmit:ce})=>{const{t:ue}=useTranslation(),{request:Ae,dataset:pe}=useEditorState(),[xe,me]=reactExports.useState(),{state:ge}=useRequest(Ae.getSelectRecords,{autorun:!0,args:{params:{type:K,skip:SKIP$1,limit:LIMIT$1,table_format:!0,dataset:pe}},onError:toast.error});reactExports.useEffect(()=>{var je;const ke=(je=ge==null?void 0:ge.data)==null?void 0:je.findIndex(Ke=>(Ke==null?void 0:Ke._key)===J);ke&&ke>=0&&me(ke)},[ge,J]);const ye=reactExports.useMemo(()=>{var je;const ke=(je=ge==null?void 0:ge.schema.typeList[ge.schema.rootType])==null?void 0:je.Elements;return ke==null?void 0:ke.map(Ke=>({key:Ke==null?void 0:Ke.Name,dataIndex:Ke==null?void 0:Ke.Name,title:Ke==null?void 0:Ke.Name,minWidth:200,render:(Ye,ze)=>jsxRuntimeExports.jsx("div",{className:"key-select-modal__table-cell",onDoubleClick:()=>$e(ze==null?void 0:ze._key),children:Ye})}))},[ge]),Se=reactExports.useMemo(()=>{const ke=ge==null?void 0:ge.data;return ke?ke.map(je=>({key:je._key,...je})):[]},[ge]),Te=reactExports.useMemo(()=>{var Ke;if(!isNumber$2(xe))return;const ke=["_key","_t"],je=structuredClone((Ke=ge==null?void 0:ge.data)==null?void 0:Ke[xe]);return je&&ke.forEach(Ye=>delete je[Ye]),je},[xe,ge]),Ne=()=>{var je;if(!(ge!=null&&ge.data)||!isNumber$2(xe))return;const ke=(je=ge.data[xe])==null?void 0:je._key;ke&&ce(ke)},$e=ke=>ke&&ce(ke);return jsxRuntimeExports.jsxs(Ho,{open:ne,defaultHeight:450,title:ue("editor.modalHeader"),onClose:oe,children:[jsxRuntimeExports.jsx("div",{className:"key-select-modal__toolbar",children:jsxRuntimeExports.jsx(KeySelectToolbar,{schemaName:K,data:Te,onSubmit:ce})}),jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(SF,{useSearch:!0,dataSource:Se,columns:ye,selectedRowIndex:xe,onChangeSelectedRowIndex:me})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"key-select",onCancel:oe,onOk:Ne,cancelText:ue("buttons.cancel"),okText:ue("buttons.apply")})]})},LIMIT=1e3,SKIP=0,KeySelect=({value:K,isReadOnly:J,isVector:ne,schemaModuleName:oe,schemaName:ce,onChange:ue,testId:Ae})=>{const{event:pe,dataset:xe}=useEditorState(),[me,ge]=reactExports.useState(!1),{request:ye}=useEditorState(),{state:Se,fetch:Te,isLoading:Ne}=useRequest(ye.getSelectRecords),$e=()=>{!ce||Se||Te({params:{type:ce,skip:SKIP,limit:LIMIT,table_format:!0,dataset:xe}}).catch(toast.error)},ke=reactExports.useMemo(()=>{var ze;return(ze=Se==null?void 0:Se.data)!=null&&ze.length?Se.data.map(Xe=>({label:Xe._key,value:Xe._key})):[]},[Se]),je=ze=>ue==null?void 0:ue(ze||null),Ke=ze=>{je(ze),ge(!1)},Ye=()=>{if(ne&&ce&&K&&(pe!=null&&pe.onTransition))return jsxRuntimeExports.jsx(oa,{testid:"arrow-icon",onClick:()=>{var ze;return(ze=pe.onTransition)==null?void 0:ze.call(pe,{type:ce,key:K})},children:jsxRuntimeExports.jsx(gT$1,{})})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(hF,{testId:`${Ae}-input`,selectOnFocus:!0,deselectOnEsc:!0,variant:"borderless",readOnly:J,isLoading:Ne,value:K,options:ke,prefix:Ye(),onChange:je,onOpen:$e,suffix:jsxRuntimeExports.jsx(oa,{testid:"navigate-button",disabled:J,onClick:()=>ge(!0),children:jsxRuntimeExports.jsx(PB,{})})}),me&&oe&&ce&&jsxRuntimeExports.jsx(KeySelectModal,{schemaModuleName:oe,schemaName:ce,defaultKey:K,isOpen:me,onClose:()=>ge(!1),onSubmit:Ke})]})},GenericDataValue=({value:K,isReadOnly:J,type:ne,path:oe,onChange:ce,testId:ue})=>{const{action:Ae,state:pe,fetch:xe,request:me}=useEditorState(),{state:ge}=useEditorTabState(),{fetch:ye}=useRequest(me.getTypes);reactExports.useEffect(()=>{pe.allTypes||ye().then(Ae.setAllTypesAction).catch(toast.error),ne&&xe.getAdditionalSchema({type:ne})},[]);const Se=reactExports.useMemo(()=>dataToString(K),[K]),Te=reactExports.useMemo(()=>pe.allTypes?pe.allTypes.map(ke=>({value:ke.Name,label:ke.Label,module:ke.Module})):null,[pe.allTypes]),Ne=ke=>{ke&&xe.getFlatWithTypeDataFetch({type:ke}).then(je=>je&&(ce==null?void 0:ce(je)))},$e=()=>{if(!(!oe||!ne))return jsxRuntimeExports.jsx(EditorDrillIcon,{testid:`${ue}-drill-icon`,onClick:()=>Ae.openEditorTabAction({path:oe},ge.tabIndex)})};return jsxRuntimeExports.jsxs("div",{className:"generic-data-value",children:[jsxRuntimeExports.jsx(Ml,{testId:`${ue}-input`,selectOnFocus:!0,readOnly:!0,variant:"borderless",value:Se,prefix:$e()}),Te&&jsxRuntimeExports.jsx(xF,{testid:`${ue}-select`,variant:"borderless",disabled:J,value:ne,options:Te,onChange:Ne})]})},SuccessorValue=({value:K,currentSuccessor:J,schemaSuccessor:ne,isReadOnly:oe,onChange:ce,testId:ue,moduleName:Ae,successorIndex:pe})=>{const{fetch:xe,request:me}=useEditorState(),ge=useRequest(me.getTypeHierarchy),[ye,Se]=reactExports.useState([]),{state:Te}=useEditorState(),{state:Ne}=useEditorTabState(),$e=Ne.breadcrumbPath,{editorData:ke}=Te,[je,Ke]=reactExports.useState(J),Ye=reactExports.useMemo(()=>ke&&getPropByPath(ke,$e),[ke,$e]);reactExports.useEffect(()=>{Ke(J)},[J]),reactExports.useEffect(()=>{ne&&ge.fetch({name:ne}),Ae&&xe.getModuleSuccessorOptions(Ae).then(Xe=>{Se(Xe),!Xe.find(Je=>Je.value===J)&&cleanTypeHelper(Ne.tab.selector)===Ae&&(Ke(Xe[0].value),ze(Xe[0].value))}),je&&xe.getAdditionalSchema({type:je})},[je,ye,Ae]);const ze=async Xe=>{if(!(!Xe||Xe===je)){if(isArray$6(Ye)){const Je=await Promise.all(Ye.map(async(rt,Ze)=>Ze===pe?await xe.getFlatWithTypeDataFetch({type:Xe}):rt));ce==null||ce(Je)}else{const Je=await xe.getFlatWithTypeDataFetch({type:Xe});ce==null||ce(Je)}Ke(Xe)}};return jsxRuntimeExports.jsxs("div",{className:"editor-successor-value",children:[jsxRuntimeExports.jsx(Ml,{readOnly:!0,selectOnFocus:!0,testId:`${ue}-input`,value:K,variant:"borderless"}),ye&&jsxRuntimeExports.jsx(xF,{testid:`${ue}-select-module`,className:"editor-successor-value__select",variant:"borderless",disabled:oe,value:je,options:ye,onChange:ze})]})},EnumValue=({enumSelector:K,value:J="",isDisable:ne,onChange:oe,testId:ce})=>{const{state:ue}=useEditorState(),Ae=reactExports.useMemo(()=>{var xe,me;const pe=K&&((me=(xe=ue.editorSchema)==null?void 0:xe[K])==null?void 0:me.Items)||[];return[{label:"(none)",value:""},...pe.map(ge=>({label:ge.Label||ge.Name,value:ge.Name}))]},[K,ue.editorSchema]);return jsxRuntimeExports.jsx(xF,{testid:ce,variant:"borderless",disabled:ne,value:J,options:Ae,onChange:pe=>oe(pe||null)})},BinaryValue=({value:K,isReadOnly:J,isMultiply:ne=!1,onChange:oe,testId:ce})=>{const ue=async pe=>{oe(await convertFilesToBinaryData(pe,ne))},Ae=reactExports.useMemo(()=>isArray$6(K)?dataToString(K==null?void 0:K.map(pe=>pe.Name)):(K==null?void 0:K.Name)||"",[K]);return jsxRuntimeExports.jsx(yF,{variant:"borderless",value:Ae,onChange:ue,multiply:ne,readOnly:J,testId:ce})},convertFilesToBinaryData=async(K,J)=>{if(!K)return null;const ne=K==null?void 0:K.map(ue=>ue.name),oe=K==null?void 0:K.map(fileToBase64$1),ce=await Promise.all(oe);return J?ce==null?void 0:ce.map((ue,Ae)=>({Name:ne[Ae],FileBytes:ue,_t:"FileData"})):{Name:ne[0],FileBytes:ce[0],_t:"FileData"}},handleNumberChangeHelper=(K,J,ne,oe,ce)=>{if(J)return;const ue=String(K??"");ne(ue),oe({fn:()=>ce(ue===""?null:Number(ue))})},handleStringChangeHelper=(K,J,ne,oe,ce)=>{J||(ne(K),oe({fn:()=>ce(K)}))},TableBodyCell=({path:K,schemaType:J,keyModuleName:ne,keyName:oe,elementName:ce,originalValue:ue,successor:Ae,valueType:pe,isVector:xe,isViewOnly:me,isRequired:ge,isReadOnly:ye,isReadOnlyHint:Se,prefixElement:Te,suffixElement:Ne,enumSelector:$e,successorIndex:ke,onChange:je})=>{const{t:Ke}=useTranslation(),{debounce:Ye}=useDebounce(500),{errorList:ze}=useValidationError({path:K}),[Xe,Je]=reactExports.useState(String(ue??"")),{state:rt}=useEditorTabState(),Ze=!!ye||!!me,et=ze.length>0;reactExports.useEffect(()=>{Je(String(ue??""))},[ue]);const nt=qe=>{handleNumberChangeHelper(qe,Ze,Je,Ye,je)},Ge=qe=>{handleStringChangeHelper(qe,Ze,Je,Ye,je)},ve=()=>jsxRuntimeExports.jsx(BinaryValue,{value:ue,isMultiply:xe,isReadOnly:ye,onChange:je,testId:"editor-binary-value"}),Be=()=>{const qe=ue,We=cleanTypeHelper(qe==null?void 0:qe._t);return jsxRuntimeExports.jsx(SuccessorValue,{testId:"editor-successor-value",schemaSuccessor:Ae||"",isReadOnly:Ze,value:dataToString(ue),currentSuccessor:We,onChange:je,moduleName:rt.tab.moduleName,successorIndex:ke})},Re=()=>jsxRuntimeExports.jsx(KeySelect,{testId:"editor-key-select-value",isReadOnly:Ze,isVector:xe,schemaName:oe,schemaModuleName:ne,value:Xe,onChange:je}),Ie=()=>{const qe=ue,We=cleanTypeHelper(qe==null?void 0:qe._t);return jsxRuntimeExports.jsx(GenericDataValue,{testId:"editor-generic-data-value",isReadOnly:Ze,path:xe?K:void 0,type:We,value:qe,onChange:je})},Fe=()=>{var qe,We;switch(!0){case J===SchemaType.BinaryContent:return ve();case(rt.tab.moduleName&&rt.tabIndex>0&&ce==="Type"):return Be();case J===SchemaType.SimpleKey:return Re();case(pe===ValueTypesEnum$1.Dict&&J!==SchemaType.Variant):return jsxRuntimeExports.jsx(Ml,{testId:"editor-dict-value",variant:"borderless",selectOnFocus:!0,value:dataToString(ue),suffix:Ne});case J===SchemaType.GenericData:return Ie();case J===SchemaType.GenericKey:return jsxRuntimeExports.jsx(GenericKeySelect,{testId:"editor-generic-key-value",isReadOnly:Ze,prefixElement:Te,value:ue||"",onChange:je});case J===SchemaType.Variant:const Ue=isObject$9(ue)?(qe=Object.keys(ue))==null?void 0:qe[0]:null,_e=Ue?ue==null?void 0:ue[Ue]:null;return jsxRuntimeExports.jsx(VariantSelect,{testId:"editor-variant-value",selectOnFocus:!0,isReadOnly:ye,variantType:Ue,value:_e,onChange:je});case(pe===ValueTypesEnum$1.String&&!xe):return jsxRuntimeExports.jsx(StringValue,{deselectOnEsc:!0,blurOnEnter:!0,useTabEditor:!0,path:K,elementName:ce,value:Xe,onChange:Ge,readOnly:Ze,testId:"editor-string-value"});case(pe===ValueTypesEnum$1.Bool&&!xe):return jsxRuntimeExports.jsx(BooleanValue,{testId:"editor-boolean-value",value:ue,onChange:je,isDisable:Ze,isRequired:ge});case(J===SchemaType.Enum&&!xe):return jsxRuntimeExports.jsx(EnumValue,{testId:"editor-enum-value",value:ue,onChange:je,isDisable:Ze,enumSelector:$e});case(isDateType(pe)&&!me):return jsxRuntimeExports.jsx(DateValue,{readOnly:Ze,value:ue,valueType:pe,onChange:je,testId:`editor-${(We=pe||"date")==null?void 0:We.toLowerCase()}-value`});case((pe===ValueTypesEnum$1.Int||pe===VariantType.Double)&&!me):return jsxRuntimeExports.jsx(CF,{testid:"editor-number-value",variant:"borderless",useHighlightNegative:!0,selectOnFocus:!0,deselectOnEsc:!0,blurOnEnter:!0,value:Xe,readOnly:Ze,prefix:Te,onChange:nt});case me:return jsxRuntimeExports.jsx(Ml,{testId:"editor-view-only-value",selectOnFocus:!0,value:dataToString(ue),variant:"borderless",readOnly:Ze,prefix:Te,suffix:Ne});case(J===SchemaType.NdFloatVector||J===SchemaType.NdFloatMatrix):return jsxRuntimeExports.jsx(Ml,{testId:"editor-ndfloatvector-value",variant:"borderless",readOnly:!0,value:dataToString(ue.values)});default:return jsxRuntimeExports.jsx(Ml,{testId:"editor-tempValue",selectOnFocus:!0,deselectOnEsc:!0,blurOnEnter:!0,value:Xe,variant:"borderless",readOnly:Ze,prefix:Te,suffix:Ne,onChange:Ge})}};return Se?jsxRuntimeExports.jsx(mf,{title:Ke("editor.readonlyHint"),children:jsxRuntimeExports.jsx("div",{className:"table-body-cell",children:Fe()})}):jsxRuntimeExports.jsx(EditorErrorTooltip,{errors:ze,children:jsxRuntimeExports.jsx("div",{className:cx("table-body-cell",{"table-body-cell__error":et}),children:Fe()})})},useComplexCell=({value:K,isKey:J,isFlat:ne,isVector:oe,isReadOnly:ce})=>{const{state:ue}=useEditorState();return{checkViewOnly:()=>oe||ne,checkReadOnly:()=>J&&ue.isDisableKeyFields||ue.isReadOnly||ce}},EditorLengthIcon=({length:K})=>K?jsxRuntimeExports.jsx("div",{"data-tid":"editor-length-icon",className:"editor-length-icon",children:`[${K}]`}):null,FlatCell=({value:K,row:J})=>{const{action:ne}=useEditorState(),{path:oe}=J.original,{checkViewOnly:ce,checkReadOnly:ue}=useComplexCell({...J.original,value:K}),Ae=xe=>{ne.updateEditorData({path:oe,updateValue:xe})},pe=xe=>isArray$6(xe)?xe.map(me=>isString$2(me)?dayjs(me,DateValueFormat.Time).format(DateValueFormat.Time):me):xe;return jsxRuntimeExports.jsx(TableBodyCell,{path:oe,enumSelector:J.original.enumSelector,elementName:J.original.elementKey,originalValue:J.original.valueType===ValueTypesEnum$1.Time?pe(K):K,keyName:J.original.keyName,keyModuleName:J.original.keyModuleName,schemaType:J.original.schemaType,successor:J.original.successor,valueType:J.original.valueType,isVector:J.original.isVector,isRequired:J.original.isRequired,isViewOnly:ce(),isReadOnly:ue(),isReadOnlyHint:J.original.isReadOnly,isFlatCell:!0,suffixElement:isArray$6(K)&&jsxRuntimeExports.jsx(EditorLengthIcon,{length:K.length}),successorIndex:J.original.successorIndex,onChange:Ae},oe.toString())},FlatTableView=({data:K,successorIndex:J})=>{var Ne,$e;const{state:ne}=useEditorTabState(),{state:oe,fetch:ce}=useEditorState(),ue=($e=(Ne=oe.breadcrumbsData.breadcrumbs)==null?void 0:Ne[ne.tabIndex+1])==null?void 0:$e.path,[Ae,pe]=reactExports.useState(!0),[xe,me]=reactExports.useState([]),ge=!!ne.tabIndex&&!ne.tab.isReadOnly&&(xe==null?void 0:xe.length)>1&&!(ne.tabIndex>1&&!xe.includes(cleanTypeHelper(ne.tab.selector)));reactExports.useEffect(()=>{ne.tab.moduleName&&ce.getModuleSuccessorOptions(ne.tab.moduleName).then(me)},[ne.tab.moduleName]),reactExports.useEffect(()=>{pe(!K||K.length===0)},[K]);const ye={value:{_t:cleanTypeHelper(ne.tab.selector)},key:"Type",label:"Type",isVector:!1,schemaType:null,elementKey:"Type",valueType:ValueTypesEnum.String,description:"ID String element",isRequired:!1,isKey:!1,isFlat:!1,path:ne.tab.path,moduleName:ne.tab.moduleName,selector:ne.tab.selector,isReadOnly:!1,successorIndex:J},{rows:Se,prepareRow:Te}=reactTableExports.useTable({columns:columns$1,data:ge?[ye,...K]:K},ke=>{ke.prepareRow.push(je=>{var Ke;Object.assign(je,{isRowExpanded:((Ke=je.original.path)==null?void 0:Ke.toString())===(ue==null?void 0:ue.toString())})})});return jsxRuntimeExports.jsx(EditorFlatTable,{children:Se.map(ke=>(Te(ke),jsxRuntimeExports.jsx(PF,{loading:Ae,children:jsxRuntimeExports.jsx(EditorFlatTable.Row,{isSelected:ke.isRowExpanded,children:ke.cells.map(je=>jsxRuntimeExports.jsx(EditorFlatTable.Cell,{children:je.render("Cell")},je.getCellProps().key))},ke.id)},ke.id)))})},columns$1=[{id:"key",accessor:"key",Cell:EditorKeyCell},{id:"value",accessor:"value",Cell:FlatCell}],ComplexView=({data:K={},schema:J})=>{const{state:ne}=useEditorTabState(),oe=ne.breadcrumbPath,ce=reactExports.useMemo(()=>{var ue;return(ue=J==null?void 0:J.Elements)==null?void 0:ue.reduce((Ae,pe)=>(pe.Hidden||Ae.push({value:K==null?void 0:K[pe.Name],...getCellProps({schemaElement:pe,keys:J.Keys,path:oe})}),Ae),[])},[K,J,oe]);return J?ce?jsxRuntimeExports.jsx(FlatTableView,{data:ce}):jsxRuntimeExports.jsx(RF,{title:"Empty view data"}):jsxRuntimeExports.jsx(RF,{title:"Empty view schema"})},SimpleCell=({rowIndex:K,value:J})=>{const{action:ne,state:oe}=useEditorState(),{state:ce}=useEditorTabState(),{keyName:ue,keyModuleName:Ae,valueType:pe,title:xe,schemaType:me,enumSelector:ge,isReadOnly:ye,isRequired:Se}=ce.tab,Te=reactExports.useMemo(()=>[...ce.breadcrumbPath,K.toString()],[ce.breadcrumbPath]),Ne=$e=>{ne.updateEditorData({path:Te,updateValue:$e})};return jsxRuntimeExports.jsx("div",{title:dataToString(J),className:"simple-cell",children:jsxRuntimeExports.jsx(TableBodyCell,{path:Te,keyName:ue,keyModuleName:Ae,enumSelector:ge,isRequired:Se,isReadOnly:oe.isReadOnly||ye,schemaType:convertSchemaType(me),elementName:xe,originalValue:J,valueType:pe,prefixElement:jsxRuntimeExports.jsx(TransitionIcon,{data:J}),onChange:Ne},Te.toString())})},convertSchemaType=K=>{switch(K){case SchemaType.VariantList:return SchemaType.Variant;case SchemaType.GenericDataList:return SchemaType.GenericData;case SchemaType.GenericKeyList:return SchemaType.GenericKey;case SchemaType.SimpleKeyList:return SchemaType.SimpleKey;default:return K}},getSpecificElementFromSchema=(K,J,ne)=>{var oe;if(!(!K.editorSchema||!J||!ne))return(oe=J==null?void 0:J.Elements)==null?void 0:oe.find(ce=>ce.Name===ne)},ArrayToolbar=({arrayLength:K,selectedIndex:J,selectedGroup:ne,onSelectedIndexChange:oe,onSelectedGroupChange:ce,isAbstractData:ue,isGridView:Ae,handleChangeView:pe,pathAdd:xe})=>{var tt,it,at,ot,lt;const{action:me,fetch:ge,state:ye}=useEditorState(),{state:Se}=useEditorTabState(),{t:Te}=useTranslation(),{path:Ne,selector:$e}=Se.tab,[ke,je]=reactExports.useState([]),[Ke,Ye]=reactExports.useState(null),ze=isArray$6(J)?J:[J],Xe=ze.length>1,Je=isNullable(J),rt=!K,Ze=reactExports.useRef(Se.tab.selector),et=Se.breadcrumbPath[Se.tabIndex],nt=getFullSchema(ye,cleanTypeHelper(Ze.current)),Ge=(tt=ye==null?void 0:ye.editorSchema)==null?void 0:tt[nt??""],ve=getSpecificElementFromSchema(ye,Ge,et),Be=((lt=(ot=(at=(it=ye.breadcrumbsData)==null?void 0:it.breadcrumbs)==null?void 0:at[ye.breadcrumbsData.activeIndex+1])==null?void 0:ot.path)==null?void 0:lt[Se.tabIndex])??"";reactExports.useEffect(()=>{Ze.current!==(ve==null?void 0:ve._t)&&Se.tabIndex>1&&(Ze.current=(ve==null?void 0:ve._t)??""),!(Ze.current!==Se.tab.selector&&Se.tabIndex>=2)&&(Ze.current=Se.tab.selector)},[Se.tabIndex,Se.tab.selector,Se.breadcrumbPath]),reactExports.useEffect(()=>{!isArray$6(J)&&J+1>K&&K>0&&oe(K-1)},[K]),reactExports.useEffect(()=>{Se.tab.moduleName&&ge.getModuleSuccessorOptions(cleanTypeHelper(ue?Se.tab.moduleName:Ze.current)).then(je)},[Se.breadcrumbPath,Se.tabIndex]),reactExports.useEffect(()=>{if(!Ke)return;const st=getFullSchema(ye,Ke);st&&(me.addListElementAction({path:Ne,selector:st}),Ye(null))},[ye,Ke]);const Re=()=>ne.length&&!Xe&&!isArray$6(J)&&!Ae?ne:ze,Ie=()=>ce==null?void 0:ce([]),Fe=()=>{me.addListElementAction({path:xe??Ne,selector:ue?Se.tab.moduleName:Ze.current})},qe=()=>{me.addListElementAction({path:Ne,index:ze[0],selector:$e})},We=()=>{const st=ze[0]-1;me.moveListElementAction({path:Ne,from:ze[0],to:st})&&oe(st)},Ue=()=>{const st=ze[0]+1;me.moveListElementAction({path:Ne,from:ze[0],to:st})&&oe(st)},_e=()=>{me.removeListElementAction({path:Se.breadcrumbPath,index:Re()}),Re().includes(Number.parseInt(Be))&&me.closeTabAction(Se.tabIndex+1),oe([]),Ie()},Qe=[...ue?[{key:"Switch",icon:Ae?jsxRuntimeExports.jsx(tF,{}):jsxRuntimeExports.jsx(nF,{}),tooltipContent:Te(Ae?"editor.listToolbar.grid":"editor.listToolbar.list"),isDisabled:!1,onClick:pe}]:[],{key:"addElement",icon:jsxRuntimeExports.jsx(Dk,{}),tooltipContent:Te("editor.listToolbar.add"),onClick:ue?void 0:Fe,menu:ke.length>1?{items:ke.map(st=>({key:(st==null?void 0:st.value)??"",label:st.label??""})),onClick:({key:st})=>{ge.getAdditionalSchema({type:st}),Ye(st)}}:void 0,testId:"toolbar-add-element-button"},{key:"insertRow",icon:jsxRuntimeExports.jsx(DA,{}),tooltipContent:Te("editor.listToolbar.insertRow"),isDisabled:Je||rt,onClick:qe,testId:"toolbar-insert-row-button"},{key:"moveUp",icon:jsxRuntimeExports.jsx(TA,{}),tooltipContent:Te("editor.listToolbar.moveRowUp"),isDisabled:Je||rt||ze[0]===0||Xe,onClick:We,testId:"toolbar-move-up-button"},{key:"moveDown",icon:jsxRuntimeExports.jsx(kA,{}),tooltipContent:Te("editor.listToolbar.moveRowDown"),isDisabled:Je||rt||ze[0]+1===K||Xe,onClick:Ue,testId:"toolbar-move-down-button"},{key:"deleteElement",icon:jsxRuntimeExports.jsx(Tk,{}),tooltipContent:Te("editor.listToolbar.remove"),isDisabled:Je||rt,onClick:_e,testId:"toolbar-delete-element-button"}];return(ue||!Ae)&&jsxRuntimeExports.jsx(TableToolbar,{items:Qe})},NoData="_NoData_1mq8p_1",NoDataIcon="_NoDataIcon_1mq8p_10",NoDataMessage="_NoDataMessage_1mq8p_15",styles$12={NoData,NoDataIcon,NoDataMessage},EmptyAbstractData=()=>jsxRuntimeExports.jsxs("div",{className:styles$12.NoData,children:[jsxRuntimeExports.jsx("div",{className:styles$12.NoDataIcon,children:jsxRuntimeExports.jsx(lF,{width:"48px",height:"48px"})}),jsxRuntimeExports.jsx("span",{className:styles$12.NoDataMessage,children:"No Data"})]}),componentsRender=K=>isNullable(K)?{body:{wrapper:()=>null},header:{wrapper:()=>null}}:K.length?{}:{header:{wrapper:()=>null}},abstractObjectTable="_abstractObjectTable_pi8eo_1",abstractObjectHeader="_abstractObjectHeader_pi8eo_9",toggleButton="_toggleButton_pi8eo_15",icon="_icon_pi8eo_22",NoDataWrapper$1="_NoDataWrapper_pi8eo_26",styles$11={abstractObjectTable,abstractObjectHeader,toggleButton,icon,NoDataWrapper:NoDataWrapper$1},ComplexVectorSimpleList=({data:K})=>{const{state:J}=useEditorState(),{state:ne}=useEditorTabState(),{tab:oe,isActive:ce,breadcrumbPath:ue}=ne,[Ae,pe]=reactExports.useState(0),[xe,me]=reactExports.useState([]),ge=!(K!=null&&K.length),{memoColumnsUikit:ye,memoDataUikit:Se}=reactExports.useMemo(()=>{const Ne=[{key:oe.title,dataIndex:oe.title,title:`${oe.title} ${oe!=null&&oe.isRequired?"*":""}`,render:(ke,je,Ke)=>jsxRuntimeExports.jsx(SimpleCell,{value:ke,rowIndex:Ke}),minWidth:200}],$e=(K==null?void 0:K.map((ke,je)=>({key:je,[oe.title]:ke})))||[];return{memoColumnsUikit:Ne,memoDataUikit:$e}},[K,ue]),Te=()=>!J.editorToolbarRef||!ce||J.isReadOnly?null:reactDomExports.createPortal(jsxRuntimeExports.jsx(ArrayToolbar,{arrayLength:Se.length,selectedIndex:Ae,selectedGroup:xe,onSelectedGroupChange:me,onSelectedIndexChange:pe}),J.editorToolbarRef);return jsxRuntimeExports.jsxs("div",{className:ge?styles$11.NoDataWrapper:void 0,children:[Te(),jsxRuntimeExports.jsx(SF,{dataSource:Se,columns:ye,selectedRowIndex:Ae,onChangeSelectedRowIndex:pe,components:componentsRender(K),locale:{emptyText:jsxRuntimeExports.jsx(EmptyAbstractData,{})},rowSelection:{type:"checkbox",selectedRowKeys:xe,onChange:Ne=>me(Ne)},className:ge?"no-data":void 0})]})},DictionaryViewToolbar=({isReadonly:K,path:J,selectedIndex:ne,arrayLength:oe,selectedGroup:ce,onSelectedIndexChange:ue,onSelectedGroupChange:Ae})=>{const{t:pe}=useTranslation(),{action:xe}=useEditorState(),me=isNullable(ne),ge=!oe;reactExports.useEffect(()=>{ne+1>oe&&oe>0&&ue(oe-1)},[oe]);const ye=()=>ce!=null&&ce.length?ce:[ne],Se=()=>Ae==null?void 0:Ae([]),Te=()=>{const je=ne-1;xe.moveListElementAction({path:J,from:ne,to:je})&&ue(je)},Ne=()=>{const je=ne+1;xe.moveListElementAction({path:J,from:ne,to:je})&&ue(je)},$e=()=>{xe.removeListElementAction({path:J,index:ye()}),Se()},ke=[{key:"addElement",icon:jsxRuntimeExports.jsx(Dk,{}),isDisabled:K,tooltipContent:pe("editor.listToolbar.add"),menu:{items:[{key:"addDictElement",label:pe("editor.listToolbar.addValue"),onClick:()=>xe.addDictElementAction({path:J,type:DictionaryViewType.Flat})},{key:"addVectorDictElement",label:pe("editor.listToolbar.addVector"),onClick:()=>xe.addDictElementAction({path:J,type:DictionaryViewType.List})}]}},{key:"insertRow",icon:jsxRuntimeExports.jsx(DA,{}),tooltipContent:pe("editor.listToolbar.insertRow"),isDisabled:me||ge,menu:{items:[{key:"addDictElement",label:pe("editor.listToolbar.insertValue"),onClick:()=>xe.addDictElementAction({path:J,type:DictionaryViewType.Flat,index:ne})},{key:"addVectorDictElement",label:pe("editor.listToolbar.insertVector"),onClick:()=>xe.addDictElementAction({path:J,type:DictionaryViewType.List,index:ne})}]}},{key:"moveUp",icon:jsxRuntimeExports.jsx(TA,{}),tooltipContent:pe("editor.listToolbar.moveRowUp"),isDisabled:me||ge||ne===0,onClick:Te},{key:"moveDown",icon:jsxRuntimeExports.jsx(kA,{}),tooltipContent:pe("editor.listToolbar.moveRowDown"),isDisabled:me||ge||ne+1===oe,onClick:Ne},{key:"deleteElement",icon:jsxRuntimeExports.jsx(Tk,{}),isDisabled:K||me||ge,tooltipContent:pe("editor.listToolbar.remove"),onClick:$e}];return jsxRuntimeExports.jsx(TableToolbar,{items:ke})},DictionaryViewKeyCell=({isReadonly:K=!1,dictKey:J,path:ne})=>{const{action:oe}=useEditorState(),ce=ue=>{oe.updateEditorData({path:ne,updateValue:ue})};return jsxRuntimeExports.jsx(StringValue,{readOnly:K,selectOnFocus:!0,elementName:J,value:J,onChange:ce})},NoDataWrapper="_NoDataWrapper_1gg1j_1",styles$10={NoDataWrapper},DictionaryView=({isReadonly:K=!1,data:J})=>{const{state:ne}=useEditorState(),{state:oe}=useEditorTabState(),[ce,ue]=reactExports.useState(0),[Ae,pe]=reactExports.useState([]),xe=oe.breadcrumbPath,me=!(J!=null&&J.length),ge=reactExports.useMemo(()=>(J==null?void 0:J.map((Ne,$e)=>({key:$e,dictKey:(Ne==null?void 0:Ne.key)||"",dictValue:Ne!=null&&Ne.value?Ne.value:null})))||[],[J]),ye=reactExports.useMemo(()=>[{key:"key",dataIndex:"key",width:200,title:"Key",render:(Ne,$e,ke)=>jsxRuntimeExports.jsx(DictionaryViewKeyCell,{isReadonly:K,dictKey:$e.dictKey,path:Se(ke,DictionaryDataPath.Key)})},{key:"value",dataIndex:"value",minWidth:400,title:"Value",render:(Ne,$e,ke)=>jsxRuntimeExports.jsx(DictionaryViewValueCell,{isReadonly:K,value:$e.dictValue,path:Se(ke,DictionaryDataPath.Value)})}],[xe]),Se=(Ne,$e)=>[...xe,Ne.toString(),$e],Te=()=>!ne.editorToolbarRef||!oe.isActive?null:reactDomExports.createPortal(jsxRuntimeExports.jsx(DictionaryViewToolbar,{path:xe,isReadonly:K,arrayLength:ge.length,selectedIndex:ce,selectedGroup:Ae,onSelectedGroupChange:pe,onSelectedIndexChange:ue}),ne.editorToolbarRef);return jsxRuntimeExports.jsxs("div",{className:me?styles$10.NoDataWrapper:void 0,children:[!K&&Te(),jsxRuntimeExports.jsx(SF,{dataSource:ge,columns:me?[]:ye,selectedRowIndex:ce,onChangeSelectedRowIndex:ue,components:componentsRender(J),locale:{emptyText:jsxRuntimeExports.jsx(EmptyAbstractData,{})},rowSelection:{type:"checkbox",selectedRowKeys:Ae,onChange:Ne=>pe(Ne)},className:me?"no-data":void 0})]})},ComplexVectorCell=({path:K,cellProps:J,currentTabIndex:ne,rowIndex:oe,elementName:ce,isRequired:ue,value:Ae})=>{const{action:pe}=useEditorState(),xe=((J==null?void 0:J.isVector)||(J==null?void 0:J.isFlat)&&!(J!=null&&J.isReadOnly))&&isDefined$1(oe),{checkReadOnly:me,checkViewOnly:ge}=useComplexCell({value:Ae,isKey:J.isKey,isFlat:J.isFlat,isVector:J.isVector,isReadOnly:J.isReadOnly}),ye=Te=>{pe.updateEditorData({path:K,updateValue:Te})},Se=()=>pe.openEditorTabAction({path:K},ne);return jsxRuntimeExports.jsx(TableBodyCell,{isVector:J==null?void 0:J.isVector,keyName:J==null?void 0:J.keyName,keyModuleName:J==null?void 0:J.keyModuleName,path:K,elementName:ce,originalValue:Ae,schemaType:J==null?void 0:J.schemaType,enumSelector:J==null?void 0:J.enumSelector,valueType:J==null?void 0:J.valueType,isRequired:ue,isReadOnly:me(),isViewOnly:ge(),isReadOnlyHint:J.isReadOnly,suffixElement:isArray$6(Ae)&&jsxRuntimeExports.jsx(EditorLengthIcon,{length:Ae.length}),prefixElement:xe&&jsxRuntimeExports.jsx(EditorDrillIcon,{onClick:Se}),onChange:ye},K.toString())},ComplexVectorViewGrid=({data:K,schema:J})=>{const{state:ne}=useEditorState(),{state:oe}=useEditorTabState(),[ce,ue]=reactExports.useState(0),[Ae,pe]=reactExports.useState([]),xe=oe.breadcrumbPath,me=reactExports.useMemo(()=>getMultiplySchemas(K,ne)??J,[K]),ge=!(K!=null&&K.length),ye=($e,ke,je,Ke)=>{const Ye={...getCellProps({schemaElement:$e,path:xe,keys:J.Keys}),isReadOnly:!Object.keys(je).some(Xe=>Xe===$e.Name)},ze=[...xe,Ke.toString(),$e.Name];return jsxRuntimeExports.jsx(ComplexVectorCell,{cellProps:Ye,path:ze,currentTabIndex:oe.tabIndex,rowIndex:Ke,value:ke,isRequired:!!($e!=null&&$e.Optional),elementName:$e.Name})},Se=reactExports.useMemo(()=>{var $e;return($e=me==null?void 0:me.Elements)==null?void 0:$e.reduce((ke,je)=>(je.Hidden||ke.push({key:je.Name,dataIndex:je.Name,title:`${je.Name} ${je!=null&&je.Optional?"":"*"}`,minWidth:150,render:(Ke,Ye,ze)=>ye(je,Ke,Ye,ze)}),ke),[])},[J,me,xe]),Te=reactExports.useMemo(()=>isArray$6(K)?K.reduce(($e,ke,je)=>($e.push({key:je,...ke}),$e),[]):[],[K]),Ne=()=>!ne.editorToolbarRef||!oe.isActive||ne.isReadOnly?null:reactDomExports.createPortal(jsxRuntimeExports.jsx(ArrayToolbar,{arrayLength:Te.length,selectedIndex:ce,selectedGroup:Ae,onSelectedGroupChange:pe,onSelectedIndexChange:ue}),ne.editorToolbarRef);return jsxRuntimeExports.jsxs("div",{className:ge?styles$11.NoDataWrapper:void 0,children:[Ne(),jsxRuntimeExports.jsx(SF,{dataSource:Te,columns:Se,selectedRowIndex:ce,onChangeSelectedRowIndex:ue,components:componentsRender(isArray$6(K)?K:[]),locale:{emptyText:jsxRuntimeExports.jsx(EmptyAbstractData,{})},rowSelection:{type:"checkbox",selectedRowKeys:Ae,onChange:$e=>pe($e)},className:ge?"no-data":void 0})]})},createCellProps=(K,J,ne)=>getCellProps({schemaElement:{...{Name:K,Value:{Type:K}},_t:J._t,Comment:""},path:ne}),HeaderAbstractWrapper=({isOpen:K,setIsOpen:J,children:ne,...oe})=>jsxRuntimeExports.jsxs("thead",{...oe,className:styles$11.abstractObjectHeader,children:[ne,jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx(rl,{onClick:()=>J(ce=>!ce),variant:"ghost",className:styles$11.toggleButton,size:"sm",children:K?jsxRuntimeExports.jsx(dk,{className:styles$11.icon}):jsxRuntimeExports.jsx(Zj,{className:styles$11.icon})})})]}),HeaderWrapper=({isOpen:K,setIsOpen:J,children:ne,...oe})=>jsxRuntimeExports.jsx(HeaderAbstractWrapper,{...oe,isOpen:K,setIsOpen:J,children:ne}),useHandleObjectOrPrimitive=()=>{const{state:K}=useEditorState(),{state:J}=useEditorTabState(),{editorSchema:ne}=K;return(oe,ce,ue)=>{var ge,ye;const Ae=oe.split("Element")[0];let pe=null;const xe=ne?ne[getFullSchema(K,ce._t)]:null;pe=(ge=xe==null?void 0:xe.Elements)==null?void 0:ge.find(Se=>Se.Name===oe);const me=isObject$9(ce[oe]);return{...ue,value:ce[oe],valueType:Ae,moduleName:cleanTypeHelper(J.tab.selector)===ce._t?oe:ce._t,isFlat:oe.includes("Data")||me,selector:oe,successor:oe,schemaType:pe?getCellProps({schemaElement:pe,path:J.breadcrumbPath,keys:xe==null?void 0:xe.Keys}).schemaType:Ae,enumSelector:(pe==null?void 0:pe._t)??"",keyModuleName:((ye=pe==null?void 0:pe.Key)==null?void 0:ye.Module.ModuleName)??"",keyName:cleanTypeHelper(pe==null?void 0:pe._t)??"",isRequired:!(pe!=null&&pe.Optional)}}},ComplexVectorAbstractViewGrid=({data:K,schema:J,indexTable:ne,setSelectedIndex:oe,isGridView:ce=[!1],setIsGridView:ue,isPrevViewAbstract:Ae,gridTrigger:pe,selectedCheckbox:xe,setSelectedCheckbox:me})=>{var ve,Be,Re;const{state:ge}=useEditorState(),{breadcrumbsData:ye}=ge,{state:Se,setSelector:Te}=useEditorTabState(),[Ne,$e]=reactExports.useState(!0),ke=Se.breadcrumbPath,je=reactExports.useRef(),Ke=ce[Se.tabIndex],Ye=useHandleObjectOrPrimitive(),ze=Ie=>Se.tabIndex<=1&&Ke?jsxRuntimeExports.jsx(HeaderWrapper,{...Ie,isOpen:Ne,setIsOpen:$e}):null,Xe=Ie=>({key:Ie._t,dataIndex:Ie._t,title:`${Ie._t} ${Ie!=null&&Ie.isRequired?"*":""}`,render:Ke?void 0:(Fe,qe,We)=>jsxRuntimeExports.jsx(ComplexVectorCell,{cellProps:{...Ie,isReadOnly:!Object.keys(qe).includes(Ie.elementKey)&&Se.breadcrumbPath.length<=2},path:ke[ke.length-1].includes("List")?[...ke,We.toString(),Ie.elementKey]:[...ke,Ie.elementKey],currentTabIndex:Se.tabIndex,rowIndex:We,value:Fe,isRequired:!!(Ie!=null&&Ie.isRequired),elementName:Ie.elementKey}),minWidth:150}),Je=(Ie,Fe,qe)=>Ie?{...qe,value:Ie,moduleName:Fe._t??Ie,isFlat:!0,path:[...qe.path]}:{},rt=((Re=(ve=ye==null?void 0:ye.breadcrumbs)==null?void 0:ve[ye.activeIndex])==null?void 0:Re.path[((Be=ye==null?void 0:ye.breadcrumbs)==null?void 0:Be[ye.activeIndex].path.length)-1])==="DataList";reactExports.useEffect(()=>{pe&&(je.current=!0),ue==null||ue(Ie=>{const Fe=[...Ie],qe=Se.tabIndex;return rt&&Ke&&ye.activeIndex>1?(Fe[qe]=!1,Fe):!pe&&!Ke&&ye.activeIndex===1&&!je.current||!rt&&!Ke&&ye.activeIndex>1?(Fe[qe]=Ae,Fe):Ie})},[ye.activeIndex,rt,Ke]);const Ze=(Ie,Fe)=>Ie?Object.keys(Ie).flatMap(qe=>{if(qe==="_t"||qe==="uuid")return[];const We=createCellProps(qe,Ie,Fe.length>2&&Fe.includes("DataList")?[...Fe,"0"]:Fe);return isArray$6(Ie[qe])?Je(Ie[qe],Ie[qe][0]??{_t:Ie._t},We):[Ye(qe,Ie,We)]}):[],et=reactExports.useMemo(()=>{if(!K||!K[0])return;const Ie=isArray$6(K)?K:[K];if(Ke)return Ie.reduce((qe,We)=>(qe.push(Xe(We)),qe),[]);const Fe=ke.length>2&&!isArray$6(K)?ke:[...ke,ne.toString()];return Ie.flatMap(qe=>Ze(qe,Fe)).reduce((qe,We)=>(qe.some(Ue=>Ue.key===We.key)||qe.push(Xe({...We,_t:We.elementKey})),qe),[])},[K,J,ke,ne]),nt=Ie=>{const Fe=Ie;me==null||me(Fe),oe(qe=>{const We=isArray$6(qe)?qe:[qe];return Ke?Fe.length>0?We.includes(ne)?We:[...We,ne]:We.filter(Ue=>Ue!==ne):Fe})},Ge=reactExports.useMemo(()=>{if(!K||!K[0])return;if(Ke){const Fe=ke.length>2&&isArray$6(K)?ke:[...ke,ne.toString()];return K.flatMap(qe=>Ze(qe,Fe))}return(isArray$6(K)?K:[K]).map((Fe,qe)=>({key:qe,...Fe}))},[K,ke,ne,ce]);return!Ke&&Te&&(Ge==null||Ge.forEach(Ie=>{const{_t:Fe}=Ie;Te(Fe?`Cl.Platform.Samples.Schema.DataClasses.${Fe}`:"")})),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:Ke&&!isNullable(et)?"abstract-wrapper":styles$11.NoDataWrapper,children:[jsxRuntimeExports.jsxs("div",{className:Ke&&isArray$6(K)&&!isNullable(K[0])?styles$11.abstractObjectTable:void 0,children:[Ke&&(et==null?void 0:et.map(Ie=>(Te&&Te(Ie.key?`Cl.Platform.Samples.Schema.DataClasses.${Ie.key.toString()}`:""),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(SF,{dataSource:et??[],columns:[Ie],pagination:!1,locale:{emptyText:jsxRuntimeExports.jsx(EmptyAbstractData,{})},components:{body:{wrapper:()=>null},header:{wrapper:ze}},rowSelection:{type:"checkbox",onChange:nt}}),Ke&&Ne&&jsxRuntimeExports.jsx(FlatTableView,{data:Ge,successorIndex:ne})]},Ie.key)))),!Ke&&jsxRuntimeExports.jsx(SF,{dataSource:Ge??[],columns:et,pagination:!1,components:componentsRender(Ge),locale:{emptyText:jsxRuntimeExports.jsx(EmptyAbstractData,{})},rowSelection:isNullable(et)?{type:"radio"}:{type:"checkbox",selectedRowKeys:xe,onChange:nt}})]}),isNullable(Ge)&&jsxRuntimeExports.jsx(SF,{dataSource:[],components:{header:{wrapper:()=>null}},locale:{emptyText:jsxRuntimeExports.jsx(EmptyAbstractData,{})},columns:[],className:"no-data"})]})})},NdArrayView=({data:K})=>{const{shape:J,values:ne}=K,oe=J[0],ce=J.length===1?1:J[1],{state:ue}=useEditorTabState(),Ae=ue.breadcrumbPath,pe=Array.from({length:oe},(me,ge)=>{const ye={key:ge};for(let Se=0;Se<ce;Se++){const Te=ge*ce+Se;ye[`col${Se}`]=ne[Te]}return ye}),xe=Array.from({length:ce},(me,ge)=>{const ye=createCellProps(ge.toString(),{_t:ue.tab.schemaType,DataList:[]},Ae);return{dataIndex:`col${ge}`,key:`col${ge}`,render:(Se,Te,Ne)=>{const $e=Ne*ce+ge;return jsxRuntimeExports.jsx(ComplexVectorCell,{cellProps:{...ye,valueType:"Int"},path:[...Ae,"values",$e.toString()],currentTabIndex:ue.tabIndex,rowIndex:Ne,value:Se,isRequired:!!ge,elementName:ge.toString()})}}});return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(SF,{dataSource:pe,columns:xe,pagination:!1,components:{header:{wrapper:()=>null}}})})},EditorView=()=>{const{t:K}=useTranslation(),{state:J,action:ne}=useEditorState(),{state:oe}=useEditorTabState(),{editorData:ce,editorSchema:ue,isReadOnly:Ae}=J,{tab:pe}=oe,xe=oe.breadcrumbPath,me=ue==null?void 0:ue[pe.selector],[ge,ye]=reactExports.useState([]),[Se,Te]=reactExports.useState([!0]),Ne=pe.valueType&&!pe.isVector&&valueEditorViewCollection.includes(pe.valueType),$e=pe.schemaType===SchemaType.Dict,ke=pe.isFlat&&me,je=(pe==null?void 0:pe.isVector)&&me,Ke=(pe==null?void 0:pe.isVector)&&!me,Ye=reactExports.useRef(Se[oe.tabIndex]),[ze,Xe]=reactExports.useState(!1),Je=(pe==null?void 0:pe.schemaType)===SchemaType.NdFloatMatrix||(pe==null?void 0:pe.schemaType)===SchemaType.NdFloatVector,[rt,Ze]=reactExports.useState([]),et=reactExports.useMemo(()=>{if(ce){const Be=getPropByPath(ce,xe);return Array.isArray(Be)&&oe.tab.title==="AbstractDataList"&&Se[oe.tabIndex]?Be.map(Re=>({...Re,uuid:v4()})):Be}},[ce,xe,oe.tabIndex,ze,Ye]),nt=()=>{Te(Be=>{const Re=[...Be],Ie=oe.tabIndex;return Re[Ie]=!Re[Ie],Re}),Xe(!ze)},Ge=()=>{if(Ne)return jsxRuntimeExports.jsx(ValueEditorView,{isReadOnly:Ae,value:et});if(ke)return jsxRuntimeExports.jsx(ComplexView,{data:et,schema:me});if($e)return jsxRuntimeExports.jsx(DictionaryView,{data:et,isReadonly:Ae});if(je&&oe.tab.title!=="AbstractDataList")return jsxRuntimeExports.jsx(ComplexVectorViewGrid,{data:et,schema:me});if(je&&oe.tab.title==="AbstractDataList"){if(Se[oe.tabIndex]){let Be=Array.isArray(et)?et:[et];return Be=oe.breadcrumbPath[oe.tabIndex-1]!=="AbstractDataList"?Be.map(Re=>{var Ie,Fe,qe;if(!Re){if(!ce||!(J!=null&&J.editorSchema))return Re;const We=(qe=(Fe=ce==null?void 0:ce[pe.title])==null?void 0:Fe[(Ie=oe.breadcrumbPath)==null?void 0:Ie[oe.tabIndex-1]])==null?void 0:qe._t;if(!We)return Re;const Ue=J.editorSchema[getFullSchema(J,We.toString())];if(!Ue.Elements)return Re;const _e=Ue.Elements.find(at=>at.Name===xe[xe.length-1]);if(!_e)return Re;const Qe=J.editorSchema[getFullSchema(J,cleanTypeHelper(_e._t)??"")];if(!Qe.Elements)return Re;const tt=Qe==null?void 0:Qe.Elements.reduce((at,ot)=>(at[ot.Name]="",at),{}),it=oe.breadcrumbPath[oe.breadcrumbPath.length-1].split("Data")[1]==="List"?[]:{...tt,_t:cleanTypeHelper(_e._t)};return ne.updateEditorData({path:xe,updateValue:it}),it}return Re}):Be,Be=Be.length?Be:[null],jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ve(),Be.map((Re,Ie)=>{const Fe=(Re==null?void 0:Re.uuid)??Ie,qe=Re?{...Re}:null;return jsxRuntimeExports.jsx(ComplexVectorAbstractViewGrid,{data:qe?[qe]:null,schema:me,indexTable:Ie,selectedIndex:ge,setSelectedIndex:ye,isGridView:Se,setIsGridView:Te,isPrevViewAbstract:Ye.current,gridTrigger:ze,setGridTrigger:Xe,selectedCheckbox:rt,setSelectedCheckbox:Ze},Fe??Ie)})]})}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ve(),jsxRuntimeExports.jsx(ComplexVectorAbstractViewGrid,{data:et,schema:me,indexTable:0,selectedIndex:ge,setSelectedIndex:ye,isGridView:Se,setIsGridView:Te,isPrevViewAbstract:Ye.current,gridTrigger:ze,setGridTrigger:Xe,selectedCheckbox:rt,setSelectedCheckbox:Ze})]})}return Ke?jsxRuntimeExports.jsx(ComplexVectorSimpleList,{data:et}):Je?jsxRuntimeExports.jsx(NdArrayView,{data:et}):jsxRuntimeExports.jsx(RF,{title:K("shared.somethingWentWrong")})},ve=()=>!J.editorToolbarRef||!oe.isActive||J.isReadOnly?null:reactDomExports.createPortal(jsxRuntimeExports.jsx(ArrayToolbar,{arrayLength:(Array.isArray(et)?et:[et]).length,selectedIndex:ge,selectedGroup:[],onSelectedGroupChange:Ze,onSelectedIndexChange:ye,isAbstractData:oe.breadcrumbPath.length<2&&oe.breadcrumbPath[oe.tabIndex-1]==="AbstractDataList",isGridView:Se[oe.tabIndex],handleChangeView:nt,pathAdd:[...xe]}),J.editorToolbarRef);return Ge()},editorViewScroll="_editorViewScroll_2d93f_1",editorViewScroll__content="_editorViewScroll__content_2d93f_6",editorViewScroll__goDown="_editorViewScroll__goDown_2d93f_12",editorViewScroll__goUp="_editorViewScroll__goUp_2d93f_12",editorViewScroll__goDown_allowed="_editorViewScroll__goDown_allowed_2d93f_24",editorViewScroll__goUp_allowed="_editorViewScroll__goUp_allowed_2d93f_24",children$2="_children_2d93f_33",noIcon="_noIcon_2d93f_38",styles$$={editorViewScroll,editorViewScroll__content,editorViewScroll__goDown,editorViewScroll__goUp,editorViewScroll__goDown_allowed,editorViewScroll__goUp_allowed,children:children$2,noIcon},SCROLL_BOTTOM_OFFSET=5,EditorViewScroll=({children:K,minGoDownHeight:J=100,noIcon:ne=!1})=>{const oe=reactExports.useRef(null),[ce,ue]=reactExports.useState(!1),[Ae,pe]=reactExports.useState(!1),xe=ye=>{ue(ye.scrollHeight>ye.clientHeight&&ye.clientHeight>J)};reactExports.useEffect(()=>{const ye=new ResizeObserver(Se=>{const Te=Se[0].target;xe(Te)});return oe.current&&ye.observe(oe.current),()=>{oe.current&&ye.unobserve(oe.current)}},[]);const me=ye=>{const Se=ye.currentTarget;if(Se){const Te=Se.scrollTop+Se.clientHeight;xe(Se),pe(Te>=Se.scrollHeight-SCROLL_BOTTOM_OFFSET&&Te<=Se.scrollHeight+SCROLL_BOTTOM_OFFSET)}},ge=()=>{oe.current&&oe.current.scrollTo({top:Ae?0:oe.current.scrollHeight,behavior:"smooth"})};return ne?jsxRuntimeExports.jsx("div",{className:styles$$.noIcon,children:K}):jsxRuntimeExports.jsxs("div",{className:styles$$.editorViewScroll,children:[jsxRuntimeExports.jsx("div",{ref:oe,onScroll:me,className:styles$$.editorViewScroll__content,children:jsxRuntimeExports.jsx("div",{className:styles$$.children,children:K})}),jsxRuntimeExports.jsx(oa,{className:cx({[styles$$.editorViewScroll__goDown]:!Ae,[styles$$.editorViewScroll__goUp]:Ae,[styles$$.editorViewScroll__goDown_allowed]:ce}),onClick:ge,children:jsxRuntimeExports.jsx(RA,{size:"M"})})]})},EditorContent$1=()=>jsxRuntimeExports.jsx("div",{className:"editor-content",children:jsxRuntimeExports.jsx(EditorTabContext,{children:jsxRuntimeExports.jsx(EditorViewScroll,{children:jsxRuntimeExports.jsx(EditorView,{})})})}),editor$1="_editor_15kja_1",styles$_={editor:editor$1},EditorComponent=({data:K,schema:J,breadcrumbs:ne,rootSchemaName:oe,isCancelDisabled:ce,isSubmitDisabled:ue,isCopyBtn:Ae,clearIcon:pe,className:xe,footerActions:me})=>{const{state:ge,action:ye,event:Se}=useEditorState(),{action:Te}=useAppContext(),{editorData:Ne,editorSchema:$e,originalEditorData:ke}=ge,je=Object.keys(ge.validationError).length>0,Ke=ke!==Ne,Ye=ce===!1?ce:!Ke,ze=ue===!1?ue:!Ke||je;reactExports.useEffect(()=>{var Ze;(Ze=Se==null?void 0:Se.onChangeData)==null||Ze.call(Se,Ke),Te.setChangedDataEditorAction(ge.editorData)},[Ke]),reactExports.useEffect(()=>{var Ze;if(J&&oe){const et=ye.initEditor({schema:J,data:K,rootSchemaName:oe,breadcrumbs:ne});isExistError(et)||(Ze=Se==null?void 0:Se.onInit)==null||Ze.call(Se,{data:et.data})}},[K,J,oe]);const Xe=()=>{var Ze;return ye.validateEditor()||((Ze=Se==null?void 0:Se.onSubmit)==null?void 0:Ze.call(Se,{data:ge.editorData}))},Je=()=>{var Ze;return ye.validateEditor()||((Ze=Se==null?void 0:Se.onCopy)==null?void 0:Ze.call(Se,{data:ge.editorData}))},rt=Ze=>{(Ze.ctrlKey||Ze.metaKey)&&Ze.code===KeyboardCode.KeyS&&(Ze.preventDefault(),Xe())};return!Ne||!$e?null:jsxRuntimeExports.jsxs("div",{className:cx(styles$_.editor,xe),onKeyDown:rt,"aria-hidden":"true",children:[jsxRuntimeExports.jsx(EditorHeader,{clearIcon:pe}),jsxRuntimeExports.jsx(EditorContent$1,{}),jsxRuntimeExports.jsx(EditorFooter,{isCancelDisabled:Ye,isSubmitDisabled:ze,onSubmit:Xe,onCancel:Se==null?void 0:Se.onCancel,isCopyBtn:Ae,onCopy:Je,footerActions:me})]})},Editor=({dataset:K,readOnly:J=initState.isReadOnly,isDisableKeyFields:ne=initState.isDisableKeyFields,requestConfig:oe,i18n:ce,onTransition:ue,onInit:Ae,onCancel:pe,onSubmit:xe,onChangeData:me,onRefresh:ge,onChangeBreadcrumbs:ye,onCopy:Se,isHandler:Te=!1,...Ne})=>jsxRuntimeExports.jsx(EditorContext,{isDisableKeyFields:ne,isReadOnly:J,requestConfig:oe,i18n:ce,event:{onCancel:pe,onSubmit:xe,onChangeData:me,onRefresh:ge,onInit:Ae,onTransition:ue,onChangeBreadcrumbs:ye,onCopy:Se},dataset:K,isHandler:Te,children:jsxRuntimeExports.jsx(EditorComponent,{...Ne})}),EditorInstance=K=>{const{t:J}=useTranslation();return jsxRuntimeExports.jsx(Editor,{requestConfig:{getSchema:schemaApi.getType,getTypes:schemaApi.getTypes,getTypeHierarchy:schemaApi.getTypeHierarchy,getSelectRecords:storageApi.select,saveRecord:storageApi.saveEntity},i18n:{submitBtnText:J("buttons.save"),cancelBtnText:J("buttons.discard"),copyBtnText:J("buttons.saveAndNext")},dataset:K.dataset,...K})},EditorViewer=({recordType:K,editorData:J,onTransition:ne})=>{const{getSchema:oe}=useEditorRequest();return reactExports.useEffect(()=>{K&&oe.fetch({name:K})},[K]),oe.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):!oe.state||!J?jsxRuntimeExports.jsx(RF,{}):jsxRuntimeExports.jsx(EditorInstance,{readOnly:!0,data:J,schema:oe.state.typeList,rootSchemaName:oe.state.rootType,onTransition:ne})},getTypeOfFirstElementHelper=K=>{const J=K.at(0);if(J){const{_t:ne}=J;return ne}return null},container$r="_container_i0pii_1",styles$Z={container:container$r},InstanceListViewer=({data:K})=>{const{status:J,fetch:ne,state:oe}=useRequest(schemaApi.getType),ce=()=>{const Ae=getTypeOfFirstElementHelper(K);Ae&&ne({name:Ae}).catch(toast.error)};reactExports.useEffect(ce,[K]);const ue=reactExports.useMemo(()=>{if(!oe)return[];const Ae=oe.typeList[oe.rootType];return isArray$6(Ae==null?void 0:Ae.Elements)?mapMetadataToGridColumnsHelper(Ae.Elements):[]},[oe]);return jsxRuntimeExports.jsx(PF,{loading:isLoading([J]),children:jsxRuntimeExports.jsx("div",{className:styles$Z.container,children:jsxRuntimeExports.jsx(Grid,{columns:ue,data:K})})})},wrapper="_wrapper_1inu1_1",viewerItem="_viewerItem_1inu1_7",active="_active_1inu1_21",styles$Y={wrapper,viewerItem,active},ViewersList=({viewersList:K,activeViewerName:J,handleActiveViewer:ne})=>{const oe=reactExports.useRef(null),ce=pe=>{pe.code===KeyboardCode.Tab&&(pe.preventDefault(),oe.current&&oe.current.focus())};reactExports.useEffect(()=>(window.addEventListener("keydown",ce),()=>{window.removeEventListener("keydown",ce)}),[]);const ue=pe=>{const xe=K.findIndex(ge=>{var ye;return((ye=ge.Name)==null?void 0:ye.String)===J});let me;xe!==-1&&(pe.code===KeyboardCode.ArrowDown&&(me=K[xe+1]),pe.code===KeyboardCode.ArrowUp&&(me=K[xe-1]),me&&ne(me))},Ae=pe=>pe.Name&&Object.hasOwn(pe.Name,"String")&&J===pe.Name.String||J===pe.Name;return jsxRuntimeExports.jsx("div",{className:styles$Y.wrapper,tabIndex:0,onKeyDown:ue,ref:oe,children:K.map(pe=>{var xe;return jsxRuntimeExports.jsx("div",{className:cx(styles$Y.viewerItem,{[styles$Y.active]:Ae(pe)}),onClick:()=>ne(pe),children:((xe=pe.Name)==null?void 0:xe.String)||pe.ViewName||String(pe.Name)||""},v4())})})},listPanel="_listPanel_1ejsm_1",viewersPanel="_viewersPanel_1ejsm_12",styles$X={listPanel,viewersPanel},filterViewersHelper=(K,J)=>K.filter(ne=>{var oe;return searchByName((oe=ne.Name)==null?void 0:oe.String,J)}),ElementListViewer=({viewerKey:K,viewerType:J,data:ne,onTransition:oe})=>{const{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(ne),[pe,xe]=reactExports.useState(ne[0]),[me,ge]=reactExports.useState(""),ye=Ne=>{const $e=filterViewersHelper(ne,Ne);ge(Ne),Ae($e)},Se=Ne=>{xe(Ne)},Te=()=>pe.Name&&Object.hasOwn(pe.Name,"String")&&pe.Name.String||pe.Name&&String(pe.Name)||"";return jsxRuntimeExports.jsxs(PanelGroup,{direction:"horizontal",children:[jsxRuntimeExports.jsxs(Panel$1,{defaultSize:25,minSize:25,className:styles$X.listPanel,onResize:resizePlotly,children:[jsxRuntimeExports.jsx(Ml,{variant:"outlined",prefix:jsxRuntimeExports.jsx(gf$1,{}),placeholder:ce("grid.columnFilter.filterPlaceholder")||"",value:me,onChange:ye}),jsxRuntimeExports.jsx(ViewersList,{viewersList:ue,activeViewerName:Te(),handleActiveViewer:Se})]}),jsxRuntimeExports.jsx(PanelResizeHandle,{className:"verticalPanelResizer"}),jsxRuntimeExports.jsx(Panel$1,{className:styles$X.viewersPanel,minSize:50,onResize:resizePlotly,children:jsxRuntimeExports.jsx(Viewers,{panelKey:K,panelType:J,activeViewerType:pe==null?void 0:pe._t,data:pe,onTransition:oe})})]})},checkSimpleTypesHelper=K=>{const J=Object.values(ViewerTypesEnum),ne=new Map;return K.every(oe=>{const{_t:ce}=oe;if(ne.has(ce))return ne.get(ce);const ue=cleanTypeHelper(ce),Ae=J.indexOf(ue)===-1;return ne.set(ce,Ae),Ae})},ListContentContainer=({viewerKey:K,viewerType:J,data:ne,onTransition:oe})=>checkSimpleTypesHelper(ne)?jsxRuntimeExports.jsx(InstanceListViewer,{data:ne}):jsxRuntimeExports.jsx(ElementListViewer,{viewerKey:K,viewerType:J,data:ne,onTransition:oe}),divider$3="_divider_1hqrl_1",styles$W={divider:divider$3},DefaultViewer=({viewerKey:K,viewerType:J,data:ne,onTransition:oe})=>{if(isArrayViewOfType(ne))return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$W.divider}),jsxRuntimeExports.jsx(ListContentContainer,{viewerKey:K,viewerType:J,data:ne,onTransition:oe})]});const ce=cleanTypeHelper(ne==null?void 0:ne._t);return ce?jsxRuntimeExports.jsx(EditorViewer,{editorData:ne,recordType:ce,onTransition:oe}):null},useTabParams=()=>{const K=useSelector$1(selectOpenedTabs),J=useSelector$1(selectActiveTab);return{activeTab:reactExports.useMemo(()=>{const ce=K.find(ue=>ue.id===J);if(ce)return{id:ce.id,key:ce.key,label:ce.label,dynamicType:ce.dynamicType,tableKey:ce.tableKey}},[J,K]),setActiveTab:ce=>{dispatch$1(setActiveTab({id:ce}))}}},EditorViewerWithParams=({editorData:K,partSchemaName:J,isReadOnly:ne,recordType:oe,onSubmit:ce})=>{const{t:ue}=useTranslation(),{getSchema:Ae}=useEditorRequest(),[pe,xe]=reactExports.useState(null);reactExports.useEffect(()=>{oe&&J&&Ae.fetch({name:oe}).then(Se=>{var Te;xe({data:K,schema:Se.typeList,rootSchemaName:((Te=Object.keys(Se.typeList))==null?void 0:Te.find(Ne=>Ne.endsWith(J)))||""})})},[oe,J,K]);const me=({data:Se})=>!K&&(ce==null?void 0:ce(Se)),ge=({data:Se})=>ce==null?void 0:ce(Se),ye=reactExports.useMemo(()=>{var Se,Te;return(Te=(Se=pe==null?void 0:pe.schema)==null?void 0:Se[pe.rootSchemaName].Elements)==null?void 0:Te.every(Ne=>Ne.Optional)},[pe==null?void 0:pe.schema,pe==null?void 0:pe.rootSchemaName]);return Ae.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):pe?jsxRuntimeExports.jsx(EditorInstance,{...pe,readOnly:ne,i18n:{submitBtnText:ue("buttons.apply")},onInit:me,onSubmit:ge,isSubmitDisabled:!ye}):jsxRuntimeExports.jsx(RF,{})},editorViewer="_editorViewer_deg0n_1",viewerData="_viewerData_deg0n_8",styles$V={editorViewer,viewerData},ParamsViewer=reactExports.memo(({activeTab:K,panelKey:J,panelWithParamsName:ne})=>{var Je;const oe=reactExports.useRef(null),ce=useSelector$1(selectDataset),{eventsBatch:ue}=useSSEContext(),Ae=useSelector$1(selectUser),{activeTab:pe}=useTabParams(),{state:xe}=useDndContext(),ge=useSelector$1(selectIsReadonly)||xe.isTypeReadOnly,ye=reactExports.useMemo(()=>JSON.parse(JSON.stringify(ue)),[ue]),Se=`${J}${ne}`,[Te,Ne]=reactExports.useState(!1),[$e,ke]=reactExports.useState(externalStorage.getParamsViewers()),[je,Ke]=reactExports.useState(null);reactExports.useEffect(()=>{oe.current&&oe.current.setLayout([50,50])},[K]),reactExports.useEffect(()=>{Ne(!1)},[ne]),reactExports.useEffect(()=>{ye.length!==0&&ye.forEach(rt=>{if(SSE_EVENT_TASKS_TYPES.includes(rt.EventKind)&&je&&je.taskRunId===rt.TaskRunId){const{Status:Ze,TaskRunId:et}=rt;Ze===RunHandlerStatusCodeEnum.Completed?Ye(et,je==null?void 0:je.data):(Ze===RunHandlerStatusCodeEnum.Failed||Ze===RunHandlerStatusCodeEnum.Cancelled)&&(Ne(!1),externalStorage.removeParamsViewer(Se))}})},[ye]);const Ye=(rt,Ze)=>{const et={dataset:ce.activeDatasetName,taskRunIds:[rt]};handlerApi.runTasksResult(et).then(nt=>{nt.length&&(externalStorage.setParamsViewers(Se,{editorData:Ze,viewerData:nt[0].Result}),Ne(!1))}).finally(()=>Ne(!1))},ze=rt=>{const Ze={dataset:ce.activeDatasetName,type:(pe==null?void 0:pe.id)||"",keys:J?[J]:[],method:ne||"",args:rt,userName:Ae==null?void 0:Ae.username};handlerApi.runTasks(Ze).then(et=>{et[0].TaskRunId&&(Ne(!0),Ke({taskRunId:et[0].TaskRunId,data:rt}),ke({...$e,[Se]:{editorData:rt,viewerData:null}}))}).catch(()=>{Ne(!1)})};if(!(pe!=null&&pe.id))return null;const Xe=()=>{var Ze;if(Te)return jsxRuntimeExports.jsx(PF,{loading:!0});const rt=(Ze=externalStorage.getParamsViewers()[Se])==null?void 0:Ze.viewerData;return jsxRuntimeExports.jsx(Viewers,{activeViewerType:rt==null?void 0:rt._t,data:rt})};return jsxRuntimeExports.jsxs(PanelGroup,{direction:"horizontal",ref:oe,children:[jsxRuntimeExports.jsx(Panel$1,{className:styles$V.editorViewer,onResize:resizePlotly,minSize:25,defaultSize:25,children:jsxRuntimeExports.jsx(EditorViewerWithParams,{isReadOnly:ge,recordType:pe.id,partSchemaName:`${ne}Args`,editorData:(Je=$e==null?void 0:$e[Se])==null?void 0:Je.editorData,onSubmit:ze})}),jsxRuntimeExports.jsx(PanelResizeHandle,{className:"verticalPanelResizer"}),jsxRuntimeExports.jsx(Panel$1,{className:styles$V.viewerData,minSize:25,defaultSize:75,children:Xe()})]})});ParamsViewer.displayName="ParamsViewer";const ViewHandlerActionWrapper=({Action:K,viewerKey:J,viewerType:ne,dataset:oe,children:ce})=>{var pe;const ue=useSelector$1(selectUser),Ae=useRequest(handlerApi.handlerRun);return reactExports.useEffect(()=>{Ae.fetch({Keys:[J],Type:ne,Method:K==null?void 0:K.Handler,Arguments:K==null?void 0:K.Arguments,Dataset:oe,userName:ue==null?void 0:ue.username})},[K,J,ne]),ce({status:Ae.status,data:(pe=Ae.state)==null?void 0:pe[0].Result})},ViewHandlerAction=reactExports.memo(({Action:K,viewerKey:J,viewerType:ne,dataset:oe,onTransition:ce})=>!K||!ne||!J||isNullable(oe)?null:jsxRuntimeExports.jsx(ViewHandlerActionWrapper,{Action:K,viewerType:ne,viewerKey:J,dataset:oe,children:({status:ue,data:Ae})=>{if(isLoading([ue]))return jsxRuntimeExports.jsx(PF,{loading:!0});if(isNullable(Ae))return null;const xe=isArray$6(Ae)?void 0:Ae._t;return jsxRuntimeExports.jsx(Viewers,{activeViewerType:xe,panelKey:J,panelType:ne,data:Ae,onTransition:ce})}}));ViewHandlerAction.displayName="ViewHandlerAction";function cc(K){if(typeof K=="string"||typeof K=="number")return""+K;let J="";if(Array.isArray(K))for(let ne=0,oe;ne<K.length;ne++)(oe=cc(K[ne]))!==""&&(J+=(J&&" ")+oe);else for(let ne in K)K[ne]&&(J+=(J&&" ")+ne);return J}const __vite_import_meta_env__={BASE_URL:"/",CL_API_HOST:"",CL_API_PORT:"",CL_API_PROTOCOL:"",CL_API_URL:"",CL_APP_NAME:"UI React",CL_APP_TITLE:"CompatibL UI",CL_BASENAME:"/app",CL_BUILD_ENV:"C:\\CL.Build.Utilities\\bin",CL_CHAT_ABOUT_ON:"true",CL_DEFAULT_THEME:"Blue",CL_FEEDBACK_EMAIL:"andriik@compatibl.com",CL_FRONTEND_VERSION:"Default version",CL_FULL_SCREEN_HANDLERS:"true",CL_FULL_SCREEN_NAVIGATION:"true",CL_GOOGLE_TAG_MANAGER_ID:"",CL_GRID_MAX_LINES:"1",CL_HIDE_EMPTY_COLUMNS:"true",CL_REFRESH_ON_ALL_HANDLERS:"false",CL_SCHEMA_VERSION:"1.9.0",CL_SIMPLIFIED_BUILD:"true",DEV:!1,MODE:"prod",PROD:!0,SSR:!1},createStoreImpl=K=>{let J;const ne=new Set,oe=(ge,ye)=>{const Se=typeof ge=="function"?ge(J):ge;if(!Object.is(Se,J)){const Te=J;J=ye??(typeof Se!="object"||Se===null)?Se:Object.assign({},J,Se),ne.forEach(Ne=>Ne(J,Te))}},ce=()=>J,xe={setState:oe,getState:ce,getInitialState:()=>me,subscribe:ge=>(ne.add(ge),()=>ne.delete(ge)),destroy:()=>{(__vite_import_meta_env__?"prod":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),ne.clear()}},me=J=K(oe,ce,xe);return xe},createStore=K=>K?createStoreImpl(K):createStoreImpl,{useDebugValue}=Wt,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity$2=K=>K;function useStoreWithEqualityFn(K,J=identity$2,ne){const oe=useSyncExternalStoreWithSelector(K.subscribe,K.getState,K.getServerState||K.getInitialState,J,ne);return useDebugValue(oe),oe}const createWithEqualityFnImpl=(K,J)=>{const ne=createStore(K),oe=(ce,ue=J)=>useStoreWithEqualityFn(ne,ce,ue);return Object.assign(oe,ne),oe},createWithEqualityFn=(K,J)=>K?createWithEqualityFnImpl(K,J):createWithEqualityFnImpl;function shallow$1(K,J){if(Object.is(K,J))return!0;if(typeof K!="object"||K===null||typeof J!="object"||J===null)return!1;if(K instanceof Map&&J instanceof Map){if(K.size!==J.size)return!1;for(const[oe,ce]of K)if(!Object.is(ce,J.get(oe)))return!1;return!0}if(K instanceof Set&&J instanceof Set){if(K.size!==J.size)return!1;for(const oe of K)if(!J.has(oe))return!1;return!0}const ne=Object.keys(K);if(ne.length!==Object.keys(J).length)return!1;for(const oe of ne)if(!Object.prototype.hasOwnProperty.call(J,oe)||!Object.is(K[oe],J[oe]))return!1;return!0}var noop$2={value:()=>{}};function dispatch(){for(var K=0,J=arguments.length,ne={},oe;K<J;++K){if(!(oe=arguments[K]+"")||oe in ne||/[\s.]/.test(oe))throw new Error("illegal type: "+oe);ne[oe]=[]}return new Dispatch(ne)}function Dispatch(K){this._=K}function parseTypenames$1(K,J){return K.trim().split(/^|\s+/).map(function(ne){var oe="",ce=ne.indexOf(".");if(ce>=0&&(oe=ne.slice(ce+1),ne=ne.slice(0,ce)),ne&&!J.hasOwnProperty(ne))throw new Error("unknown type: "+ne);return{type:ne,name:oe}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(K,J){var ne=this._,oe=parseTypenames$1(K+"",ne),ce,ue=-1,Ae=oe.length;if(arguments.length<2){for(;++ue<Ae;)if((ce=(K=oe[ue]).type)&&(ce=get$1(ne[ce],K.name)))return ce;return}if(J!=null&&typeof J!="function")throw new Error("invalid callback: "+J);for(;++ue<Ae;)if(ce=(K=oe[ue]).type)ne[ce]=set$1(ne[ce],K.name,J);else if(J==null)for(ce in ne)ne[ce]=set$1(ne[ce],K.name,null);return this},copy:function(){var K={},J=this._;for(var ne in J)K[ne]=J[ne].slice();return new Dispatch(K)},call:function(K,J){if((ce=arguments.length-2)>0)for(var ne=new Array(ce),oe=0,ce,ue;oe<ce;++oe)ne[oe]=arguments[oe+2];if(!this._.hasOwnProperty(K))throw new Error("unknown type: "+K);for(ue=this._[K],oe=0,ce=ue.length;oe<ce;++oe)ue[oe].value.apply(J,ne)},apply:function(K,J,ne){if(!this._.hasOwnProperty(K))throw new Error("unknown type: "+K);for(var oe=this._[K],ce=0,ue=oe.length;ce<ue;++ce)oe[ce].value.apply(J,ne)}};function get$1(K,J){for(var ne=0,oe=K.length,ce;ne<oe;++ne)if((ce=K[ne]).name===J)return ce.value}function set$1(K,J,ne){for(var oe=0,ce=K.length;oe<ce;++oe)if(K[oe].name===J){K[oe]=noop$2,K=K.slice(0,oe).concat(K.slice(oe+1));break}return ne!=null&&K.push({name:J,value:ne}),K}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(K){var J=K+="",ne=J.indexOf(":");return ne>=0&&(J=K.slice(0,ne))!=="xmlns"&&(K=K.slice(ne+1)),namespaces.hasOwnProperty(J)?{space:namespaces[J],local:K}:K}function creatorInherit(K){return function(){var J=this.ownerDocument,ne=this.namespaceURI;return ne===xhtml&&J.documentElement.namespaceURI===xhtml?J.createElement(K):J.createElementNS(ne,K)}}function creatorFixed(K){return function(){return this.ownerDocument.createElementNS(K.space,K.local)}}function creator(K){var J=namespace(K);return(J.local?creatorFixed:creatorInherit)(J)}function none(){}function selector(K){return K==null?none:function(){return this.querySelector(K)}}function selection_select(K){typeof K!="function"&&(K=selector(K));for(var J=this._groups,ne=J.length,oe=new Array(ne),ce=0;ce<ne;++ce)for(var ue=J[ce],Ae=ue.length,pe=oe[ce]=new Array(Ae),xe,me,ge=0;ge<Ae;++ge)(xe=ue[ge])&&(me=K.call(xe,xe.__data__,ge,ue))&&("__data__"in xe&&(me.__data__=xe.__data__),pe[ge]=me);return new Selection$1(oe,this._parents)}function array(K){return K==null?[]:Array.isArray(K)?K:Array.from(K)}function empty$1(){return[]}function selectorAll(K){return K==null?empty$1:function(){return this.querySelectorAll(K)}}function arrayAll(K){return function(){return array(K.apply(this,arguments))}}function selection_selectAll(K){typeof K=="function"?K=arrayAll(K):K=selectorAll(K);for(var J=this._groups,ne=J.length,oe=[],ce=[],ue=0;ue<ne;++ue)for(var Ae=J[ue],pe=Ae.length,xe,me=0;me<pe;++me)(xe=Ae[me])&&(oe.push(K.call(xe,xe.__data__,me,Ae)),ce.push(xe));return new Selection$1(oe,ce)}function matcher(K){return function(){return this.matches(K)}}function childMatcher(K){return function(J){return J.matches(K)}}var find=Array.prototype.find;function childFind(K){return function(){return find.call(this.children,K)}}function childFirst(){return this.firstElementChild}function selection_selectChild(K){return this.select(K==null?childFirst:childFind(typeof K=="function"?K:childMatcher(K)))}var filter$1=Array.prototype.filter;function children$1(){return Array.from(this.children)}function childrenFilter(K){return function(){return filter$1.call(this.children,K)}}function selection_selectChildren(K){return this.selectAll(K==null?children$1:childrenFilter(typeof K=="function"?K:childMatcher(K)))}function selection_filter(K){typeof K!="function"&&(K=matcher(K));for(var J=this._groups,ne=J.length,oe=new Array(ne),ce=0;ce<ne;++ce)for(var ue=J[ce],Ae=ue.length,pe=oe[ce]=[],xe,me=0;me<Ae;++me)(xe=ue[me])&&K.call(xe,xe.__data__,me,ue)&&pe.push(xe);return new Selection$1(oe,this._parents)}function sparse(K){return new Array(K.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(K,J){this.ownerDocument=K.ownerDocument,this.namespaceURI=K.namespaceURI,this._next=null,this._parent=K,this.__data__=J}EnterNode.prototype={constructor:EnterNode,appendChild:function(K){return this._parent.insertBefore(K,this._next)},insertBefore:function(K,J){return this._parent.insertBefore(K,J)},querySelector:function(K){return this._parent.querySelector(K)},querySelectorAll:function(K){return this._parent.querySelectorAll(K)}};function constant$3(K){return function(){return K}}function bindIndex(K,J,ne,oe,ce,ue){for(var Ae=0,pe,xe=J.length,me=ue.length;Ae<me;++Ae)(pe=J[Ae])?(pe.__data__=ue[Ae],oe[Ae]=pe):ne[Ae]=new EnterNode(K,ue[Ae]);for(;Ae<xe;++Ae)(pe=J[Ae])&&(ce[Ae]=pe)}function bindKey(K,J,ne,oe,ce,ue,Ae){var pe,xe,me=new Map,ge=J.length,ye=ue.length,Se=new Array(ge),Te;for(pe=0;pe<ge;++pe)(xe=J[pe])&&(Se[pe]=Te=Ae.call(xe,xe.__data__,pe,J)+"",me.has(Te)?ce[pe]=xe:me.set(Te,xe));for(pe=0;pe<ye;++pe)Te=Ae.call(K,ue[pe],pe,ue)+"",(xe=me.get(Te))?(oe[pe]=xe,xe.__data__=ue[pe],me.delete(Te)):ne[pe]=new EnterNode(K,ue[pe]);for(pe=0;pe<ge;++pe)(xe=J[pe])&&me.get(Se[pe])===xe&&(ce[pe]=xe)}function datum(K){return K.__data__}function selection_data(K,J){if(!arguments.length)return Array.from(this,datum);var ne=J?bindKey:bindIndex,oe=this._parents,ce=this._groups;typeof K!="function"&&(K=constant$3(K));for(var ue=ce.length,Ae=new Array(ue),pe=new Array(ue),xe=new Array(ue),me=0;me<ue;++me){var ge=oe[me],ye=ce[me],Se=ye.length,Te=arraylike(K.call(ge,ge&&ge.__data__,me,oe)),Ne=Te.length,$e=pe[me]=new Array(Ne),ke=Ae[me]=new Array(Ne),je=xe[me]=new Array(Se);ne(ge,ye,$e,ke,je,Te,J);for(var Ke=0,Ye=0,ze,Xe;Ke<Ne;++Ke)if(ze=$e[Ke]){for(Ke>=Ye&&(Ye=Ke+1);!(Xe=ke[Ye])&&++Ye<Ne;);ze._next=Xe||null}}return Ae=new Selection$1(Ae,oe),Ae._enter=pe,Ae._exit=xe,Ae}function arraylike(K){return typeof K=="object"&&"length"in K?K:Array.from(K)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(K,J,ne){var oe=this.enter(),ce=this,ue=this.exit();return typeof K=="function"?(oe=K(oe),oe&&(oe=oe.selection())):oe=oe.append(K+""),J!=null&&(ce=J(ce),ce&&(ce=ce.selection())),ne==null?ue.remove():ne(ue),oe&&ce?oe.merge(ce).order():ce}function selection_merge(K){for(var J=K.selection?K.selection():K,ne=this._groups,oe=J._groups,ce=ne.length,ue=oe.length,Ae=Math.min(ce,ue),pe=new Array(ce),xe=0;xe<Ae;++xe)for(var me=ne[xe],ge=oe[xe],ye=me.length,Se=pe[xe]=new Array(ye),Te,Ne=0;Ne<ye;++Ne)(Te=me[Ne]||ge[Ne])&&(Se[Ne]=Te);for(;xe<ce;++xe)pe[xe]=ne[xe];return new Selection$1(pe,this._parents)}function selection_order(){for(var K=this._groups,J=-1,ne=K.length;++J<ne;)for(var oe=K[J],ce=oe.length-1,ue=oe[ce],Ae;--ce>=0;)(Ae=oe[ce])&&(ue&&Ae.compareDocumentPosition(ue)^4&&ue.parentNode.insertBefore(Ae,ue),ue=Ae);return this}function selection_sort(K){K||(K=ascending);function J(ye,Se){return ye&&Se?K(ye.__data__,Se.__data__):!ye-!Se}for(var ne=this._groups,oe=ne.length,ce=new Array(oe),ue=0;ue<oe;++ue){for(var Ae=ne[ue],pe=Ae.length,xe=ce[ue]=new Array(pe),me,ge=0;ge<pe;++ge)(me=Ae[ge])&&(xe[ge]=me);xe.sort(J)}return new Selection$1(ce,this._parents).order()}function ascending(K,J){return K<J?-1:K>J?1:K>=J?0:NaN}function selection_call(){var K=arguments[0];return arguments[0]=this,K.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var K=this._groups,J=0,ne=K.length;J<ne;++J)for(var oe=K[J],ce=0,ue=oe.length;ce<ue;++ce){var Ae=oe[ce];if(Ae)return Ae}return null}function selection_size(){let K=0;for(const J of this)++K;return K}function selection_empty(){return!this.node()}function selection_each(K){for(var J=this._groups,ne=0,oe=J.length;ne<oe;++ne)for(var ce=J[ne],ue=0,Ae=ce.length,pe;ue<Ae;++ue)(pe=ce[ue])&&K.call(pe,pe.__data__,ue,ce);return this}function attrRemove$1(K){return function(){this.removeAttribute(K)}}function attrRemoveNS$1(K){return function(){this.removeAttributeNS(K.space,K.local)}}function attrConstant$1(K,J){return function(){this.setAttribute(K,J)}}function attrConstantNS$1(K,J){return function(){this.setAttributeNS(K.space,K.local,J)}}function attrFunction$1(K,J){return function(){var ne=J.apply(this,arguments);ne==null?this.removeAttribute(K):this.setAttribute(K,ne)}}function attrFunctionNS$1(K,J){return function(){var ne=J.apply(this,arguments);ne==null?this.removeAttributeNS(K.space,K.local):this.setAttributeNS(K.space,K.local,ne)}}function selection_attr(K,J){var ne=namespace(K);if(arguments.length<2){var oe=this.node();return ne.local?oe.getAttributeNS(ne.space,ne.local):oe.getAttribute(ne)}return this.each((J==null?ne.local?attrRemoveNS$1:attrRemove$1:typeof J=="function"?ne.local?attrFunctionNS$1:attrFunction$1:ne.local?attrConstantNS$1:attrConstant$1)(ne,J))}function defaultView(K){return K.ownerDocument&&K.ownerDocument.defaultView||K.document&&K||K.defaultView}function styleRemove$1(K){return function(){this.style.removeProperty(K)}}function styleConstant$1(K,J,ne){return function(){this.style.setProperty(K,J,ne)}}function styleFunction$1(K,J,ne){return function(){var oe=J.apply(this,arguments);oe==null?this.style.removeProperty(K):this.style.setProperty(K,oe,ne)}}function selection_style(K,J,ne){return arguments.length>1?this.each((J==null?styleRemove$1:typeof J=="function"?styleFunction$1:styleConstant$1)(K,J,ne??"")):styleValue(this.node(),K)}function styleValue(K,J){return K.style.getPropertyValue(J)||defaultView(K).getComputedStyle(K,null).getPropertyValue(J)}function propertyRemove(K){return function(){delete this[K]}}function propertyConstant(K,J){return function(){this[K]=J}}function propertyFunction(K,J){return function(){var ne=J.apply(this,arguments);ne==null?delete this[K]:this[K]=ne}}function selection_property(K,J){return arguments.length>1?this.each((J==null?propertyRemove:typeof J=="function"?propertyFunction:propertyConstant)(K,J)):this.node()[K]}function classArray(K){return K.trim().split(/^|\s+/)}function classList(K){return K.classList||new ClassList(K)}function ClassList(K){this._node=K,this._names=classArray(K.getAttribute("class")||"")}ClassList.prototype={add:function(K){var J=this._names.indexOf(K);J<0&&(this._names.push(K),this._node.setAttribute("class",this._names.join(" ")))},remove:function(K){var J=this._names.indexOf(K);J>=0&&(this._names.splice(J,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(K){return this._names.indexOf(K)>=0}};function classedAdd(K,J){for(var ne=classList(K),oe=-1,ce=J.length;++oe<ce;)ne.add(J[oe])}function classedRemove(K,J){for(var ne=classList(K),oe=-1,ce=J.length;++oe<ce;)ne.remove(J[oe])}function classedTrue(K){return function(){classedAdd(this,K)}}function classedFalse(K){return function(){classedRemove(this,K)}}function classedFunction(K,J){return function(){(J.apply(this,arguments)?classedAdd:classedRemove)(this,K)}}function selection_classed(K,J){var ne=classArray(K+"");if(arguments.length<2){for(var oe=classList(this.node()),ce=-1,ue=ne.length;++ce<ue;)if(!oe.contains(ne[ce]))return!1;return!0}return this.each((typeof J=="function"?classedFunction:J?classedTrue:classedFalse)(ne,J))}function textRemove(){this.textContent=""}function textConstant$1(K){return function(){this.textContent=K}}function textFunction$1(K){return function(){var J=K.apply(this,arguments);this.textContent=J??""}}function selection_text(K){return arguments.length?this.each(K==null?textRemove:(typeof K=="function"?textFunction$1:textConstant$1)(K)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(K){return function(){this.innerHTML=K}}function htmlFunction(K){return function(){var J=K.apply(this,arguments);this.innerHTML=J??""}}function selection_html(K){return arguments.length?this.each(K==null?htmlRemove:(typeof K=="function"?htmlFunction:htmlConstant)(K)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(K){var J=typeof K=="function"?K:creator(K);return this.select(function(){return this.appendChild(J.apply(this,arguments))})}function constantNull(){return null}function selection_insert(K,J){var ne=typeof K=="function"?K:creator(K),oe=J==null?constantNull:typeof J=="function"?J:selector(J);return this.select(function(){return this.insertBefore(ne.apply(this,arguments),oe.apply(this,arguments)||null)})}function remove(){var K=this.parentNode;K&&K.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var K=this.cloneNode(!1),J=this.parentNode;return J?J.insertBefore(K,this.nextSibling):K}function selection_cloneDeep(){var K=this.cloneNode(!0),J=this.parentNode;return J?J.insertBefore(K,this.nextSibling):K}function selection_clone(K){return this.select(K?selection_cloneDeep:selection_cloneShallow)}function selection_datum(K){return arguments.length?this.property("__data__",K):this.node().__data__}function contextListener(K){return function(J){K.call(this,J,this.__data__)}}function parseTypenames(K){return K.trim().split(/^|\s+/).map(function(J){var ne="",oe=J.indexOf(".");return oe>=0&&(ne=J.slice(oe+1),J=J.slice(0,oe)),{type:J,name:ne}})}function onRemove(K){return function(){var J=this.__on;if(J){for(var ne=0,oe=-1,ce=J.length,ue;ne<ce;++ne)ue=J[ne],(!K.type||ue.type===K.type)&&ue.name===K.name?this.removeEventListener(ue.type,ue.listener,ue.options):J[++oe]=ue;++oe?J.length=oe:delete this.__on}}}function onAdd(K,J,ne){return function(){var oe=this.__on,ce,ue=contextListener(J);if(oe){for(var Ae=0,pe=oe.length;Ae<pe;++Ae)if((ce=oe[Ae]).type===K.type&&ce.name===K.name){this.removeEventListener(ce.type,ce.listener,ce.options),this.addEventListener(ce.type,ce.listener=ue,ce.options=ne),ce.value=J;return}}this.addEventListener(K.type,ue,ne),ce={type:K.type,name:K.name,value:J,listener:ue,options:ne},oe?oe.push(ce):this.__on=[ce]}}function selection_on(K,J,ne){var oe=parseTypenames(K+""),ce,ue=oe.length,Ae;if(arguments.length<2){var pe=this.node().__on;if(pe){for(var xe=0,me=pe.length,ge;xe<me;++xe)for(ce=0,ge=pe[xe];ce<ue;++ce)if((Ae=oe[ce]).type===ge.type&&Ae.name===ge.name)return ge.value}return}for(pe=J?onAdd:onRemove,ce=0;ce<ue;++ce)this.each(pe(oe[ce],J,ne));return this}function dispatchEvent(K,J,ne){var oe=defaultView(K),ce=oe.CustomEvent;typeof ce=="function"?ce=new ce(J,ne):(ce=oe.document.createEvent("Event"),ne?(ce.initEvent(J,ne.bubbles,ne.cancelable),ce.detail=ne.detail):ce.initEvent(J,!1,!1)),K.dispatchEvent(ce)}function dispatchConstant(K,J){return function(){return dispatchEvent(this,K,J)}}function dispatchFunction(K,J){return function(){return dispatchEvent(this,K,J.apply(this,arguments))}}function selection_dispatch(K,J){return this.each((typeof J=="function"?dispatchFunction:dispatchConstant)(K,J))}function*selection_iterator(){for(var K=this._groups,J=0,ne=K.length;J<ne;++J)for(var oe=K[J],ce=0,ue=oe.length,Ae;ce<ue;++ce)(Ae=oe[ce])&&(yield Ae)}var root$a=[null];function Selection$1(K,J){this._groups=K,this._parents=J}function selection(){return new Selection$1([[document.documentElement]],root$a)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select$3(K){return typeof K=="string"?new Selection$1([[document.querySelector(K)]],[document.documentElement]):new Selection$1([[K]],root$a)}function sourceEvent(K){let J;for(;J=K.sourceEvent;)K=J;return K}function pointer(K,J){if(K=sourceEvent(K),J===void 0&&(J=K.currentTarget),J){var ne=J.ownerSVGElement||J;if(ne.createSVGPoint){var oe=ne.createSVGPoint();return oe.x=K.clientX,oe.y=K.clientY,oe=oe.matrixTransform(J.getScreenCTM().inverse()),[oe.x,oe.y]}if(J.getBoundingClientRect){var ce=J.getBoundingClientRect();return[K.clientX-ce.left-J.clientLeft,K.clientY-ce.top-J.clientTop]}}return[K.pageX,K.pageY]}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$1(K){K.stopImmediatePropagation()}function noevent$1(K){K.preventDefault(),K.stopImmediatePropagation()}function dragDisable(K){var J=K.document.documentElement,ne=select$3(K).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in J?ne.on("selectstart.drag",noevent$1,nonpassivecapture):(J.__noselect=J.style.MozUserSelect,J.style.MozUserSelect="none")}function yesdrag(K,J){var ne=K.document.documentElement,oe=select$3(K).on("dragstart.drag",null);J&&(oe.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){oe.on("click.drag",null)},0)),"onselectstart"in ne?oe.on("selectstart.drag",null):(ne.style.MozUserSelect=ne.__noselect,delete ne.__noselect)}const constant$2=K=>()=>K;function DragEvent(K,{sourceEvent:J,subject:ne,target:oe,identifier:ce,active:ue,x:Ae,y:pe,dx:xe,dy:me,dispatch:ge}){Object.defineProperties(this,{type:{value:K,enumerable:!0,configurable:!0},sourceEvent:{value:J,enumerable:!0,configurable:!0},subject:{value:ne,enumerable:!0,configurable:!0},target:{value:oe,enumerable:!0,configurable:!0},identifier:{value:ce,enumerable:!0,configurable:!0},active:{value:ue,enumerable:!0,configurable:!0},x:{value:Ae,enumerable:!0,configurable:!0},y:{value:pe,enumerable:!0,configurable:!0},dx:{value:xe,enumerable:!0,configurable:!0},dy:{value:me,enumerable:!0,configurable:!0},_:{value:ge}})}DragEvent.prototype.on=function(){var K=this._.on.apply(this._,arguments);return K===this._?this:K};function defaultFilter$1(K){return!K.ctrlKey&&!K.button}function defaultContainer(){return this.parentNode}function defaultSubject(K,J){return J??{x:K.x,y:K.y}}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var K=defaultFilter$1,J=defaultContainer,ne=defaultSubject,oe=defaultTouchable$1,ce={},ue=dispatch("start","drag","end"),Ae=0,pe,xe,me,ge,ye=0;function Se(ze){ze.on("mousedown.drag",Te).filter(oe).on("touchstart.drag",ke).on("touchmove.drag",je,nonpassive).on("touchend.drag touchcancel.drag",Ke).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function Te(ze,Xe){if(!(ge||!K.call(this,ze,Xe))){var Je=Ye(this,J.call(this,ze,Xe),ze,Xe,"mouse");Je&&(select$3(ze.view).on("mousemove.drag",Ne,nonpassivecapture).on("mouseup.drag",$e,nonpassivecapture),dragDisable(ze.view),nopropagation$1(ze),me=!1,pe=ze.clientX,xe=ze.clientY,Je("start",ze))}}function Ne(ze){if(noevent$1(ze),!me){var Xe=ze.clientX-pe,Je=ze.clientY-xe;me=Xe*Xe+Je*Je>ye}ce.mouse("drag",ze)}function $e(ze){select$3(ze.view).on("mousemove.drag mouseup.drag",null),yesdrag(ze.view,me),noevent$1(ze),ce.mouse("end",ze)}function ke(ze,Xe){if(K.call(this,ze,Xe)){var Je=ze.changedTouches,rt=J.call(this,ze,Xe),Ze=Je.length,et,nt;for(et=0;et<Ze;++et)(nt=Ye(this,rt,ze,Xe,Je[et].identifier,Je[et]))&&(nopropagation$1(ze),nt("start",ze,Je[et]))}}function je(ze){var Xe=ze.changedTouches,Je=Xe.length,rt,Ze;for(rt=0;rt<Je;++rt)(Ze=ce[Xe[rt].identifier])&&(noevent$1(ze),Ze("drag",ze,Xe[rt]))}function Ke(ze){var Xe=ze.changedTouches,Je=Xe.length,rt,Ze;for(ge&&clearTimeout(ge),ge=setTimeout(function(){ge=null},500),rt=0;rt<Je;++rt)(Ze=ce[Xe[rt].identifier])&&(nopropagation$1(ze),Ze("end",ze,Xe[rt]))}function Ye(ze,Xe,Je,rt,Ze,et){var nt=ue.copy(),Ge=pointer(et||Je,Xe),ve,Be,Re;if((Re=ne.call(ze,new DragEvent("beforestart",{sourceEvent:Je,target:Se,identifier:Ze,active:Ae,x:Ge[0],y:Ge[1],dx:0,dy:0,dispatch:nt}),rt))!=null)return ve=Re.x-Ge[0]||0,Be=Re.y-Ge[1]||0,function Ie(Fe,qe,We){var Ue=Ge,_e;switch(Fe){case"start":ce[Ze]=Ie,_e=Ae++;break;case"end":delete ce[Ze],--Ae;case"drag":Ge=pointer(We||qe,Xe),_e=Ae;break}nt.call(Fe,ze,new DragEvent(Fe,{sourceEvent:qe,subject:Re,target:Se,identifier:Ze,active:_e,x:Ge[0]+ve,y:Ge[1]+Be,dx:Ge[0]-Ue[0],dy:Ge[1]-Ue[1],dispatch:nt}),rt)}}return Se.filter=function(ze){return arguments.length?(K=typeof ze=="function"?ze:constant$2(!!ze),Se):K},Se.container=function(ze){return arguments.length?(J=typeof ze=="function"?ze:constant$2(ze),Se):J},Se.subject=function(ze){return arguments.length?(ne=typeof ze=="function"?ze:constant$2(ze),Se):ne},Se.touchable=function(ze){return arguments.length?(oe=typeof ze=="function"?ze:constant$2(!!ze),Se):oe},Se.on=function(){var ze=ue.on.apply(ue,arguments);return ze===ue?Se:ze},Se.clickDistance=function(ze){return arguments.length?(ye=(ze=+ze)*ze,Se):Math.sqrt(ye)},Se}function define(K,J,ne){K.prototype=J.prototype=ne,ne.constructor=K}function extend(K,J){var ne=Object.create(K.prototype);for(var oe in J)ne[oe]=J[oe];return ne}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color$2,{copy(K){return Object.assign(new this.constructor,this,K)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$2(K){var J,ne;return K=(K+"").trim().toLowerCase(),(J=reHex.exec(K))?(ne=J[1].length,J=parseInt(J[1],16),ne===6?rgbn(J):ne===3?new Rgb(J>>8&15|J>>4&240,J>>4&15|J&240,(J&15)<<4|J&15,1):ne===8?rgba(J>>24&255,J>>16&255,J>>8&255,(J&255)/255):ne===4?rgba(J>>12&15|J>>8&240,J>>8&15|J>>4&240,J>>4&15|J&240,((J&15)<<4|J&15)/255):null):(J=reRgbInteger.exec(K))?new Rgb(J[1],J[2],J[3],1):(J=reRgbPercent.exec(K))?new Rgb(J[1]*255/100,J[2]*255/100,J[3]*255/100,1):(J=reRgbaInteger.exec(K))?rgba(J[1],J[2],J[3],J[4]):(J=reRgbaPercent.exec(K))?rgba(J[1]*255/100,J[2]*255/100,J[3]*255/100,J[4]):(J=reHslPercent.exec(K))?hsla(J[1],J[2]/100,J[3]/100,1):(J=reHslaPercent.exec(K))?hsla(J[1],J[2]/100,J[3]/100,J[4]):named.hasOwnProperty(K)?rgbn(named[K]):K==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(K){return new Rgb(K>>16&255,K>>8&255,K&255,1)}function rgba(K,J,ne,oe){return oe<=0&&(K=J=ne=NaN),new Rgb(K,J,ne,oe)}function rgbConvert(K){return K instanceof Color||(K=color$2(K)),K?(K=K.rgb(),new Rgb(K.r,K.g,K.b,K.opacity)):new Rgb}function rgb$1(K,J,ne,oe){return arguments.length===1?rgbConvert(K):new Rgb(K,J,ne,oe??1)}function Rgb(K,J,ne,oe){this.r=+K,this.g=+J,this.b=+ne,this.opacity=+oe}define(Rgb,rgb$1,extend(Color,{brighter(K){return K=K==null?brighter:Math.pow(brighter,K),new Rgb(this.r*K,this.g*K,this.b*K,this.opacity)},darker(K){return K=K==null?darker:Math.pow(darker,K),new Rgb(this.r*K,this.g*K,this.b*K,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const K=clampa(this.opacity);return`${K===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${K===1?")":`, ${K})`}`}function clampa(K){return isNaN(K)?1:Math.max(0,Math.min(1,K))}function clampi(K){return Math.max(0,Math.min(255,Math.round(K)||0))}function hex(K){return K=clampi(K),(K<16?"0":"")+K.toString(16)}function hsla(K,J,ne,oe){return oe<=0?K=J=ne=NaN:ne<=0||ne>=1?K=J=NaN:J<=0&&(K=NaN),new Hsl(K,J,ne,oe)}function hslConvert(K){if(K instanceof Hsl)return new Hsl(K.h,K.s,K.l,K.opacity);if(K instanceof Color||(K=color$2(K)),!K)return new Hsl;if(K instanceof Hsl)return K;K=K.rgb();var J=K.r/255,ne=K.g/255,oe=K.b/255,ce=Math.min(J,ne,oe),ue=Math.max(J,ne,oe),Ae=NaN,pe=ue-ce,xe=(ue+ce)/2;return pe?(J===ue?Ae=(ne-oe)/pe+(ne<oe)*6:ne===ue?Ae=(oe-J)/pe+2:Ae=(J-ne)/pe+4,pe/=xe<.5?ue+ce:2-ue-ce,Ae*=60):pe=xe>0&&xe<1?0:Ae,new Hsl(Ae,pe,xe,K.opacity)}function hsl$1(K,J,ne,oe){return arguments.length===1?hslConvert(K):new Hsl(K,J,ne,oe??1)}function Hsl(K,J,ne,oe){this.h=+K,this.s=+J,this.l=+ne,this.opacity=+oe}define(Hsl,hsl$1,extend(Color,{brighter(K){return K=K==null?brighter:Math.pow(brighter,K),new Hsl(this.h,this.s,this.l*K,this.opacity)},darker(K){return K=K==null?darker:Math.pow(darker,K),new Hsl(this.h,this.s,this.l*K,this.opacity)},rgb(){var K=this.h%360+(this.h<0)*360,J=isNaN(K)||isNaN(this.s)?0:this.s,ne=this.l,oe=ne+(ne<.5?ne:1-ne)*J,ce=2*ne-oe;return new Rgb(hsl2rgb(K>=240?K-240:K+120,ce,oe),hsl2rgb(K,ce,oe),hsl2rgb(K<120?K+240:K-120,ce,oe),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const K=clampa(this.opacity);return`${K===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${K===1?")":`, ${K})`}`}}));function clamph(K){return K=(K||0)%360,K<0?K+360:K}function clampt(K){return Math.max(0,Math.min(1,K||0))}function hsl2rgb(K,J,ne){return(K<60?J+(ne-J)*K/60:K<180?ne:K<240?J+(ne-J)*(240-K)/60:J)*255}const constant$1=K=>()=>K;function linear(K,J){return function(ne){return K+ne*J}}function exponential(K,J,ne){return K=Math.pow(K,ne),J=Math.pow(J,ne)-K,ne=1/ne,function(oe){return Math.pow(K+oe*J,ne)}}function gamma(K){return(K=+K)==1?nogamma:function(J,ne){return ne-J?exponential(J,ne,K):constant$1(isNaN(J)?ne:J)}}function nogamma(K,J){var ne=J-K;return ne?linear(K,ne):constant$1(isNaN(K)?J:K)}const interpolateRgb=function K(J){var ne=gamma(J);function oe(ce,ue){var Ae=ne((ce=rgb$1(ce)).r,(ue=rgb$1(ue)).r),pe=ne(ce.g,ue.g),xe=ne(ce.b,ue.b),me=nogamma(ce.opacity,ue.opacity);return function(ge){return ce.r=Ae(ge),ce.g=pe(ge),ce.b=xe(ge),ce.opacity=me(ge),ce+""}}return oe.gamma=K,oe}(1);function interpolateNumber(K,J){return K=+K,J=+J,function(ne){return K*(1-ne)+J*ne}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(K){return function(){return K}}function one(K){return function(J){return K(J)+""}}function interpolateString(K,J){var ne=reA.lastIndex=reB.lastIndex=0,oe,ce,ue,Ae=-1,pe=[],xe=[];for(K=K+"",J=J+"";(oe=reA.exec(K))&&(ce=reB.exec(J));)(ue=ce.index)>ne&&(ue=J.slice(ne,ue),pe[Ae]?pe[Ae]+=ue:pe[++Ae]=ue),(oe=oe[0])===(ce=ce[0])?pe[Ae]?pe[Ae]+=ce:pe[++Ae]=ce:(pe[++Ae]=null,xe.push({i:Ae,x:interpolateNumber(oe,ce)})),ne=reB.lastIndex;return ne<J.length&&(ue=J.slice(ne),pe[Ae]?pe[Ae]+=ue:pe[++Ae]=ue),pe.length<2?xe[0]?one(xe[0].x):zero(J):(J=xe.length,function(me){for(var ge=0,ye;ge<J;++ge)pe[(ye=xe[ge]).i]=ye.x(me);return pe.join("")})}var degrees=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(K,J,ne,oe,ce,ue){var Ae,pe,xe;return(Ae=Math.sqrt(K*K+J*J))&&(K/=Ae,J/=Ae),(xe=K*ne+J*oe)&&(ne-=K*xe,oe-=J*xe),(pe=Math.sqrt(ne*ne+oe*oe))&&(ne/=pe,oe/=pe,xe/=pe),K*oe<J*ne&&(K=-K,J=-J,xe=-xe,Ae=-Ae),{translateX:ce,translateY:ue,rotate:Math.atan2(J,K)*degrees,skewX:Math.atan(xe)*degrees,scaleX:Ae,scaleY:pe}}var svgNode;function parseCss(K){const J=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(K+"");return J.isIdentity?identity$1:decompose(J.a,J.b,J.c,J.d,J.e,J.f)}function parseSvg(K){return K==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",K),!(K=svgNode.transform.baseVal.consolidate()))?identity$1:(K=K.matrix,decompose(K.a,K.b,K.c,K.d,K.e,K.f))}function interpolateTransform(K,J,ne,oe){function ce(me){return me.length?me.pop()+" ":""}function ue(me,ge,ye,Se,Te,Ne){if(me!==ye||ge!==Se){var $e=Te.push("translate(",null,J,null,ne);Ne.push({i:$e-4,x:interpolateNumber(me,ye)},{i:$e-2,x:interpolateNumber(ge,Se)})}else(ye||Se)&&Te.push("translate("+ye+J+Se+ne)}function Ae(me,ge,ye,Se){me!==ge?(me-ge>180?ge+=360:ge-me>180&&(me+=360),Se.push({i:ye.push(ce(ye)+"rotate(",null,oe)-2,x:interpolateNumber(me,ge)})):ge&&ye.push(ce(ye)+"rotate("+ge+oe)}function pe(me,ge,ye,Se){me!==ge?Se.push({i:ye.push(ce(ye)+"skewX(",null,oe)-2,x:interpolateNumber(me,ge)}):ge&&ye.push(ce(ye)+"skewX("+ge+oe)}function xe(me,ge,ye,Se,Te,Ne){if(me!==ye||ge!==Se){var $e=Te.push(ce(Te)+"scale(",null,",",null,")");Ne.push({i:$e-4,x:interpolateNumber(me,ye)},{i:$e-2,x:interpolateNumber(ge,Se)})}else(ye!==1||Se!==1)&&Te.push(ce(Te)+"scale("+ye+","+Se+")")}return function(me,ge){var ye=[],Se=[];return me=K(me),ge=K(ge),ue(me.translateX,me.translateY,ge.translateX,ge.translateY,ye,Se),Ae(me.rotate,ge.rotate,ye,Se),pe(me.skewX,ge.skewX,ye,Se),xe(me.scaleX,me.scaleY,ge.scaleX,ge.scaleY,ye,Se),me=ge=null,function(Te){for(var Ne=-1,$e=Se.length,ke;++Ne<$e;)ye[(ke=Se[Ne]).i]=ke.x(Te);return ye.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2=1e-12;function cosh(K){return((K=Math.exp(K))+1/K)/2}function sinh(K){return((K=Math.exp(K))-1/K)/2}function tanh(K){return((K=Math.exp(2*K))-1)/(K+1)}const interpolateZoom=function K(J,ne,oe){function ce(ue,Ae){var pe=ue[0],xe=ue[1],me=ue[2],ge=Ae[0],ye=Ae[1],Se=Ae[2],Te=ge-pe,Ne=ye-xe,$e=Te*Te+Ne*Ne,ke,je;if($e<epsilon2)je=Math.log(Se/me)/J,ke=function(rt){return[pe+rt*Te,xe+rt*Ne,me*Math.exp(J*rt*je)]};else{var Ke=Math.sqrt($e),Ye=(Se*Se-me*me+oe*$e)/(2*me*ne*Ke),ze=(Se*Se-me*me-oe*$e)/(2*Se*ne*Ke),Xe=Math.log(Math.sqrt(Ye*Ye+1)-Ye),Je=Math.log(Math.sqrt(ze*ze+1)-ze);je=(Je-Xe)/J,ke=function(rt){var Ze=rt*je,et=cosh(Xe),nt=me/(ne*Ke)*(et*tanh(J*Ze+Xe)-sinh(Xe));return[pe+nt*Te,xe+nt*Ne,me*et/cosh(J*Ze+Xe)]}}return ke.duration=je*1e3*J/Math.SQRT2,ke}return ce.rho=function(ue){var Ae=Math.max(.001,+ue),pe=Ae*Ae,xe=pe*pe;return K(Ae,pe,xe)},ce}(Math.SQRT2,2,4);var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(K){setTimeout(K,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(K,J,ne){if(typeof K!="function")throw new TypeError("callback is not a function");ne=(ne==null?now():+ne)+(J==null?0:+J),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=K,this._time=ne,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(K,J,ne){var oe=new Timer;return oe.restart(K,J,ne),oe}function timerFlush(){now(),++frame;for(var K=taskHead,J;K;)(J=clockNow-K._time)>=0&&K._call.call(void 0,J),K=K._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var K=clock.now(),J=K-clockLast;J>pokeDelay&&(clockSkew-=J,clockLast=K)}function nap(){for(var K,J=taskHead,ne,oe=1/0;J;)J._call?(oe>J._time&&(oe=J._time),K=J,J=J._next):(ne=J._next,J._next=null,J=K?K._next=ne:taskHead=ne);taskTail=K,sleep(oe)}function sleep(K){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var J=K-clockNow;J>24?(K<1/0&&(timeout$1=setTimeout(wake,K-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(K,J,ne){var oe=new Timer;return J=J==null?0:+J,oe.restart(ce=>{oe.stop(),K(ce+J)},J,ne),oe}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(K,J,ne,oe,ce,ue){var Ae=K.__transition;if(!Ae)K.__transition={};else if(ne in Ae)return;create(K,ne,{name:J,index:oe,group:ce,on:emptyOn,tween:emptyTween,time:ue.time,delay:ue.delay,duration:ue.duration,ease:ue.ease,timer:null,state:CREATED})}function init$1(K,J){var ne=get(K,J);if(ne.state>CREATED)throw new Error("too late; already scheduled");return ne}function set(K,J){var ne=get(K,J);if(ne.state>STARTED)throw new Error("too late; already running");return ne}function get(K,J){var ne=K.__transition;if(!ne||!(ne=ne[J]))throw new Error("transition not found");return ne}function create(K,J,ne){var oe=K.__transition,ce;oe[J]=ne,ne.timer=timer(ue,0,ne.time);function ue(me){ne.state=SCHEDULED,ne.timer.restart(Ae,ne.delay,ne.time),ne.delay<=me&&Ae(me-ne.delay)}function Ae(me){var ge,ye,Se,Te;if(ne.state!==SCHEDULED)return xe();for(ge in oe)if(Te=oe[ge],Te.name===ne.name){if(Te.state===STARTED)return timeout(Ae);Te.state===RUNNING?(Te.state=ENDED,Te.timer.stop(),Te.on.call("interrupt",K,K.__data__,Te.index,Te.group),delete oe[ge]):+ge<J&&(Te.state=ENDED,Te.timer.stop(),Te.on.call("cancel",K,K.__data__,Te.index,Te.group),delete oe[ge])}if(timeout(function(){ne.state===STARTED&&(ne.state=RUNNING,ne.timer.restart(pe,ne.delay,ne.time),pe(me))}),ne.state=STARTING,ne.on.call("start",K,K.__data__,ne.index,ne.group),ne.state===STARTING){for(ne.state=STARTED,ce=new Array(Se=ne.tween.length),ge=0,ye=-1;ge<Se;++ge)(Te=ne.tween[ge].value.call(K,K.__data__,ne.index,ne.group))&&(ce[++ye]=Te);ce.length=ye+1}}function pe(me){for(var ge=me<ne.duration?ne.ease.call(null,me/ne.duration):(ne.timer.restart(xe),ne.state=ENDING,1),ye=-1,Se=ce.length;++ye<Se;)ce[ye].call(K,ge);ne.state===ENDING&&(ne.on.call("end",K,K.__data__,ne.index,ne.group),xe())}function xe(){ne.state=ENDED,ne.timer.stop(),delete oe[J];for(var me in oe)return;delete K.__transition}}function interrupt(K,J){var ne=K.__transition,oe,ce,ue=!0,Ae;if(ne){J=J==null?null:J+"";for(Ae in ne){if((oe=ne[Ae]).name!==J){ue=!1;continue}ce=oe.state>STARTING&&oe.state<ENDING,oe.state=ENDED,oe.timer.stop(),oe.on.call(ce?"interrupt":"cancel",K,K.__data__,oe.index,oe.group),delete ne[Ae]}ue&&delete K.__transition}}function selection_interrupt(K){return this.each(function(){interrupt(this,K)})}function tweenRemove(K,J){var ne,oe;return function(){var ce=set(this,K),ue=ce.tween;if(ue!==ne){oe=ne=ue;for(var Ae=0,pe=oe.length;Ae<pe;++Ae)if(oe[Ae].name===J){oe=oe.slice(),oe.splice(Ae,1);break}}ce.tween=oe}}function tweenFunction(K,J,ne){var oe,ce;if(typeof ne!="function")throw new Error;return function(){var ue=set(this,K),Ae=ue.tween;if(Ae!==oe){ce=(oe=Ae).slice();for(var pe={name:J,value:ne},xe=0,me=ce.length;xe<me;++xe)if(ce[xe].name===J){ce[xe]=pe;break}xe===me&&ce.push(pe)}ue.tween=ce}}function transition_tween(K,J){var ne=this._id;if(K+="",arguments.length<2){for(var oe=get(this.node(),ne).tween,ce=0,ue=oe.length,Ae;ce<ue;++ce)if((Ae=oe[ce]).name===K)return Ae.value;return null}return this.each((J==null?tweenRemove:tweenFunction)(ne,K,J))}function tweenValue(K,J,ne){var oe=K._id;return K.each(function(){var ce=set(this,oe);(ce.value||(ce.value={}))[J]=ne.apply(this,arguments)}),function(ce){return get(ce,oe).value[J]}}function interpolate(K,J){var ne;return(typeof J=="number"?interpolateNumber:J instanceof color$2?interpolateRgb:(ne=color$2(J))?(J=ne,interpolateRgb):interpolateString)(K,J)}function attrRemove(K){return function(){this.removeAttribute(K)}}function attrRemoveNS(K){return function(){this.removeAttributeNS(K.space,K.local)}}function attrConstant(K,J,ne){var oe,ce=ne+"",ue;return function(){var Ae=this.getAttribute(K);return Ae===ce?null:Ae===oe?ue:ue=J(oe=Ae,ne)}}function attrConstantNS(K,J,ne){var oe,ce=ne+"",ue;return function(){var Ae=this.getAttributeNS(K.space,K.local);return Ae===ce?null:Ae===oe?ue:ue=J(oe=Ae,ne)}}function attrFunction(K,J,ne){var oe,ce,ue;return function(){var Ae,pe=ne(this),xe;return pe==null?void this.removeAttribute(K):(Ae=this.getAttribute(K),xe=pe+"",Ae===xe?null:Ae===oe&&xe===ce?ue:(ce=xe,ue=J(oe=Ae,pe)))}}function attrFunctionNS(K,J,ne){var oe,ce,ue;return function(){var Ae,pe=ne(this),xe;return pe==null?void this.removeAttributeNS(K.space,K.local):(Ae=this.getAttributeNS(K.space,K.local),xe=pe+"",Ae===xe?null:Ae===oe&&xe===ce?ue:(ce=xe,ue=J(oe=Ae,pe)))}}function transition_attr(K,J){var ne=namespace(K),oe=ne==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(K,typeof J=="function"?(ne.local?attrFunctionNS:attrFunction)(ne,oe,tweenValue(this,"attr."+K,J)):J==null?(ne.local?attrRemoveNS:attrRemove)(ne):(ne.local?attrConstantNS:attrConstant)(ne,oe,J))}function attrInterpolate(K,J){return function(ne){this.setAttribute(K,J.call(this,ne))}}function attrInterpolateNS(K,J){return function(ne){this.setAttributeNS(K.space,K.local,J.call(this,ne))}}function attrTweenNS(K,J){var ne,oe;function ce(){var ue=J.apply(this,arguments);return ue!==oe&&(ne=(oe=ue)&&attrInterpolateNS(K,ue)),ne}return ce._value=J,ce}function attrTween(K,J){var ne,oe;function ce(){var ue=J.apply(this,arguments);return ue!==oe&&(ne=(oe=ue)&&attrInterpolate(K,ue)),ne}return ce._value=J,ce}function transition_attrTween(K,J){var ne="attr."+K;if(arguments.length<2)return(ne=this.tween(ne))&&ne._value;if(J==null)return this.tween(ne,null);if(typeof J!="function")throw new Error;var oe=namespace(K);return this.tween(ne,(oe.local?attrTweenNS:attrTween)(oe,J))}function delayFunction(K,J){return function(){init$1(this,K).delay=+J.apply(this,arguments)}}function delayConstant(K,J){return J=+J,function(){init$1(this,K).delay=J}}function transition_delay(K){var J=this._id;return arguments.length?this.each((typeof K=="function"?delayFunction:delayConstant)(J,K)):get(this.node(),J).delay}function durationFunction(K,J){return function(){set(this,K).duration=+J.apply(this,arguments)}}function durationConstant(K,J){return J=+J,function(){set(this,K).duration=J}}function transition_duration(K){var J=this._id;return arguments.length?this.each((typeof K=="function"?durationFunction:durationConstant)(J,K)):get(this.node(),J).duration}function easeConstant(K,J){if(typeof J!="function")throw new Error;return function(){set(this,K).ease=J}}function transition_ease(K){var J=this._id;return arguments.length?this.each(easeConstant(J,K)):get(this.node(),J).ease}function easeVarying(K,J){return function(){var ne=J.apply(this,arguments);if(typeof ne!="function")throw new Error;set(this,K).ease=ne}}function transition_easeVarying(K){if(typeof K!="function")throw new Error;return this.each(easeVarying(this._id,K))}function transition_filter(K){typeof K!="function"&&(K=matcher(K));for(var J=this._groups,ne=J.length,oe=new Array(ne),ce=0;ce<ne;++ce)for(var ue=J[ce],Ae=ue.length,pe=oe[ce]=[],xe,me=0;me<Ae;++me)(xe=ue[me])&&K.call(xe,xe.__data__,me,ue)&&pe.push(xe);return new Transition(oe,this._parents,this._name,this._id)}function transition_merge(K){if(K._id!==this._id)throw new Error;for(var J=this._groups,ne=K._groups,oe=J.length,ce=ne.length,ue=Math.min(oe,ce),Ae=new Array(oe),pe=0;pe<ue;++pe)for(var xe=J[pe],me=ne[pe],ge=xe.length,ye=Ae[pe]=new Array(ge),Se,Te=0;Te<ge;++Te)(Se=xe[Te]||me[Te])&&(ye[Te]=Se);for(;pe<oe;++pe)Ae[pe]=J[pe];return new Transition(Ae,this._parents,this._name,this._id)}function start(K){return(K+"").trim().split(/^|\s+/).every(function(J){var ne=J.indexOf(".");return ne>=0&&(J=J.slice(0,ne)),!J||J==="start"})}function onFunction(K,J,ne){var oe,ce,ue=start(J)?init$1:set;return function(){var Ae=ue(this,K),pe=Ae.on;pe!==oe&&(ce=(oe=pe).copy()).on(J,ne),Ae.on=ce}}function transition_on(K,J){var ne=this._id;return arguments.length<2?get(this.node(),ne).on.on(K):this.each(onFunction(ne,K,J))}function removeFunction(K){return function(){var J=this.parentNode;for(var ne in this.__transition)if(+ne!==K)return;J&&J.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(K){var J=this._name,ne=this._id;typeof K!="function"&&(K=selector(K));for(var oe=this._groups,ce=oe.length,ue=new Array(ce),Ae=0;Ae<ce;++Ae)for(var pe=oe[Ae],xe=pe.length,me=ue[Ae]=new Array(xe),ge,ye,Se=0;Se<xe;++Se)(ge=pe[Se])&&(ye=K.call(ge,ge.__data__,Se,pe))&&("__data__"in ge&&(ye.__data__=ge.__data__),me[Se]=ye,schedule(me[Se],J,ne,Se,me,get(ge,ne)));return new Transition(ue,this._parents,J,ne)}function transition_selectAll(K){var J=this._name,ne=this._id;typeof K!="function"&&(K=selectorAll(K));for(var oe=this._groups,ce=oe.length,ue=[],Ae=[],pe=0;pe<ce;++pe)for(var xe=oe[pe],me=xe.length,ge,ye=0;ye<me;++ye)if(ge=xe[ye]){for(var Se=K.call(ge,ge.__data__,ye,xe),Te,Ne=get(ge,ne),$e=0,ke=Se.length;$e<ke;++$e)(Te=Se[$e])&&schedule(Te,J,ne,$e,Se,Ne);ue.push(Se),Ae.push(ge)}return new Transition(ue,Ae,J,ne)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(K,J){var ne,oe,ce;return function(){var ue=styleValue(this,K),Ae=(this.style.removeProperty(K),styleValue(this,K));return ue===Ae?null:ue===ne&&Ae===oe?ce:ce=J(ne=ue,oe=Ae)}}function styleRemove(K){return function(){this.style.removeProperty(K)}}function styleConstant(K,J,ne){var oe,ce=ne+"",ue;return function(){var Ae=styleValue(this,K);return Ae===ce?null:Ae===oe?ue:ue=J(oe=Ae,ne)}}function styleFunction(K,J,ne){var oe,ce,ue;return function(){var Ae=styleValue(this,K),pe=ne(this),xe=pe+"";return pe==null&&(xe=pe=(this.style.removeProperty(K),styleValue(this,K))),Ae===xe?null:Ae===oe&&xe===ce?ue:(ce=xe,ue=J(oe=Ae,pe))}}function styleMaybeRemove(K,J){var ne,oe,ce,ue="style."+J,Ae="end."+ue,pe;return function(){var xe=set(this,K),me=xe.on,ge=xe.value[ue]==null?pe||(pe=styleRemove(J)):void 0;(me!==ne||ce!==ge)&&(oe=(ne=me).copy()).on(Ae,ce=ge),xe.on=oe}}function transition_style(K,J,ne){var oe=(K+="")=="transform"?interpolateTransformCss:interpolate;return J==null?this.styleTween(K,styleNull(K,oe)).on("end.style."+K,styleRemove(K)):typeof J=="function"?this.styleTween(K,styleFunction(K,oe,tweenValue(this,"style."+K,J))).each(styleMaybeRemove(this._id,K)):this.styleTween(K,styleConstant(K,oe,J),ne).on("end.style."+K,null)}function styleInterpolate(K,J,ne){return function(oe){this.style.setProperty(K,J.call(this,oe),ne)}}function styleTween(K,J,ne){var oe,ce;function ue(){var Ae=J.apply(this,arguments);return Ae!==ce&&(oe=(ce=Ae)&&styleInterpolate(K,Ae,ne)),oe}return ue._value=J,ue}function transition_styleTween(K,J,ne){var oe="style."+(K+="");if(arguments.length<2)return(oe=this.tween(oe))&&oe._value;if(J==null)return this.tween(oe,null);if(typeof J!="function")throw new Error;return this.tween(oe,styleTween(K,J,ne??""))}function textConstant(K){return function(){this.textContent=K}}function textFunction(K){return function(){var J=K(this);this.textContent=J??""}}function transition_text(K){return this.tween("text",typeof K=="function"?textFunction(tweenValue(this,"text",K)):textConstant(K==null?"":K+""))}function textInterpolate(K){return function(J){this.textContent=K.call(this,J)}}function textTween(K){var J,ne;function oe(){var ce=K.apply(this,arguments);return ce!==ne&&(J=(ne=ce)&&textInterpolate(ce)),J}return oe._value=K,oe}function transition_textTween(K){var J="text";if(arguments.length<1)return(J=this.tween(J))&&J._value;if(K==null)return this.tween(J,null);if(typeof K!="function")throw new Error;return this.tween(J,textTween(K))}function transition_transition(){for(var K=this._name,J=this._id,ne=newId(),oe=this._groups,ce=oe.length,ue=0;ue<ce;++ue)for(var Ae=oe[ue],pe=Ae.length,xe,me=0;me<pe;++me)if(xe=Ae[me]){var ge=get(xe,J);schedule(xe,K,ne,me,Ae,{time:ge.time+ge.delay+ge.duration,delay:0,duration:ge.duration,ease:ge.ease})}return new Transition(oe,this._parents,K,ne)}function transition_end(){var K,J,ne=this,oe=ne._id,ce=ne.size();return new Promise(function(ue,Ae){var pe={value:Ae},xe={value:function(){--ce===0&&ue()}};ne.each(function(){var me=set(this,oe),ge=me.on;ge!==K&&(J=(K=ge).copy(),J._.cancel.push(pe),J._.interrupt.push(pe),J._.end.push(xe)),me.on=J}),ce===0&&ue()})}var id=0;function Transition(K,J,ne,oe){this._groups=K,this._parents=J,this._name=ne,this._id=oe}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(K){return((K*=2)<=1?K*K*K:(K-=2)*K*K+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(K,J){for(var ne;!(ne=K.__transition)||!(ne=ne[J]);)if(!(K=K.parentNode))throw new Error(`transition ${J} not found`);return ne}function selection_transition(K){var J,ne;K instanceof Transition?(J=K._id,K=K._name):(J=newId(),(ne=defaultTiming).time=now(),K=K==null?null:K+"");for(var oe=this._groups,ce=oe.length,ue=0;ue<ce;++ue)for(var Ae=oe[ue],pe=Ae.length,xe,me=0;me<pe;++me)(xe=Ae[me])&&schedule(xe,K,J,me,Ae,ne||inherit(xe,J));return new Transition(oe,this._parents,K,J)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const constant=K=>()=>K;function ZoomEvent(K,{sourceEvent:J,target:ne,transform:oe,dispatch:ce}){Object.defineProperties(this,{type:{value:K,enumerable:!0,configurable:!0},sourceEvent:{value:J,enumerable:!0,configurable:!0},target:{value:ne,enumerable:!0,configurable:!0},transform:{value:oe,enumerable:!0,configurable:!0},_:{value:ce}})}function Transform(K,J,ne){this.k=K,this.x=J,this.y=ne}Transform.prototype={constructor:Transform,scale:function(K){return K===1?this:new Transform(this.k*K,this.x,this.y)},translate:function(K,J){return K===0&J===0?this:new Transform(this.k,this.x+this.k*K,this.y+this.k*J)},apply:function(K){return[K[0]*this.k+this.x,K[1]*this.k+this.y]},applyX:function(K){return K*this.k+this.x},applyY:function(K){return K*this.k+this.y},invert:function(K){return[(K[0]-this.x)/this.k,(K[1]-this.y)/this.k]},invertX:function(K){return(K-this.x)/this.k},invertY:function(K){return(K-this.y)/this.k},rescaleX:function(K){return K.copy().domain(K.range().map(this.invertX,this).map(K.invert,K))},rescaleY:function(K){return K.copy().domain(K.range().map(this.invertY,this).map(K.invert,K))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);Transform.prototype;function nopropagation(K){K.stopImmediatePropagation()}function noevent(K){K.preventDefault(),K.stopImmediatePropagation()}function defaultFilter(K){return(!K.ctrlKey||K.type==="wheel")&&!K.button}function defaultExtent(){var K=this;return K instanceof SVGElement?(K=K.ownerSVGElement||K,K.hasAttribute("viewBox")?(K=K.viewBox.baseVal,[[K.x,K.y],[K.x+K.width,K.y+K.height]]):[[0,0],[K.width.baseVal.value,K.height.baseVal.value]]):[[0,0],[K.clientWidth,K.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(K){return-K.deltaY*(K.deltaMode===1?.05:K.deltaMode?1:.002)*(K.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(K,J,ne){var oe=K.invertX(J[0][0])-ne[0][0],ce=K.invertX(J[1][0])-ne[1][0],ue=K.invertY(J[0][1])-ne[0][1],Ae=K.invertY(J[1][1])-ne[1][1];return K.translate(ce>oe?(oe+ce)/2:Math.min(0,oe)||Math.max(0,ce),Ae>ue?(ue+Ae)/2:Math.min(0,ue)||Math.max(0,Ae))}function zoom(){var K=defaultFilter,J=defaultExtent,ne=defaultConstrain,oe=defaultWheelDelta,ce=defaultTouchable,ue=[0,1/0],Ae=[[-1/0,-1/0],[1/0,1/0]],pe=250,xe=interpolateZoom,me=dispatch("start","zoom","end"),ge,ye,Se,Te=500,Ne=150,$e=0,ke=10;function je(Re){Re.property("__zoom",defaultTransform).on("wheel.zoom",Ze,{passive:!1}).on("mousedown.zoom",et).on("dblclick.zoom",nt).filter(ce).on("touchstart.zoom",Ge).on("touchmove.zoom",ve).on("touchend.zoom touchcancel.zoom",Be).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}je.transform=function(Re,Ie,Fe,qe){var We=Re.selection?Re.selection():Re;We.property("__zoom",defaultTransform),Re!==We?Xe(Re,Ie,Fe,qe):We.interrupt().each(function(){Je(this,arguments).event(qe).start().zoom(null,typeof Ie=="function"?Ie.apply(this,arguments):Ie).end()})},je.scaleBy=function(Re,Ie,Fe,qe){je.scaleTo(Re,function(){var We=this.__zoom.k,Ue=typeof Ie=="function"?Ie.apply(this,arguments):Ie;return We*Ue},Fe,qe)},je.scaleTo=function(Re,Ie,Fe,qe){je.transform(Re,function(){var We=J.apply(this,arguments),Ue=this.__zoom,_e=Fe==null?ze(We):typeof Fe=="function"?Fe.apply(this,arguments):Fe,Qe=Ue.invert(_e),tt=typeof Ie=="function"?Ie.apply(this,arguments):Ie;return ne(Ye(Ke(Ue,tt),_e,Qe),We,Ae)},Fe,qe)},je.translateBy=function(Re,Ie,Fe,qe){je.transform(Re,function(){return ne(this.__zoom.translate(typeof Ie=="function"?Ie.apply(this,arguments):Ie,typeof Fe=="function"?Fe.apply(this,arguments):Fe),J.apply(this,arguments),Ae)},null,qe)},je.translateTo=function(Re,Ie,Fe,qe,We){je.transform(Re,function(){var Ue=J.apply(this,arguments),_e=this.__zoom,Qe=qe==null?ze(Ue):typeof qe=="function"?qe.apply(this,arguments):qe;return ne(identity.translate(Qe[0],Qe[1]).scale(_e.k).translate(typeof Ie=="function"?-Ie.apply(this,arguments):-Ie,typeof Fe=="function"?-Fe.apply(this,arguments):-Fe),Ue,Ae)},qe,We)};function Ke(Re,Ie){return Ie=Math.max(ue[0],Math.min(ue[1],Ie)),Ie===Re.k?Re:new Transform(Ie,Re.x,Re.y)}function Ye(Re,Ie,Fe){var qe=Ie[0]-Fe[0]*Re.k,We=Ie[1]-Fe[1]*Re.k;return qe===Re.x&&We===Re.y?Re:new Transform(Re.k,qe,We)}function ze(Re){return[(+Re[0][0]+ +Re[1][0])/2,(+Re[0][1]+ +Re[1][1])/2]}function Xe(Re,Ie,Fe,qe){Re.on("start.zoom",function(){Je(this,arguments).event(qe).start()}).on("interrupt.zoom end.zoom",function(){Je(this,arguments).event(qe).end()}).tween("zoom",function(){var We=this,Ue=arguments,_e=Je(We,Ue).event(qe),Qe=J.apply(We,Ue),tt=Fe==null?ze(Qe):typeof Fe=="function"?Fe.apply(We,Ue):Fe,it=Math.max(Qe[1][0]-Qe[0][0],Qe[1][1]-Qe[0][1]),at=We.__zoom,ot=typeof Ie=="function"?Ie.apply(We,Ue):Ie,lt=xe(at.invert(tt).concat(it/at.k),ot.invert(tt).concat(it/ot.k));return function(st){if(st===1)st=ot;else{var ut=lt(st),ft=it/ut[2];st=new Transform(ft,tt[0]-ut[0]*ft,tt[1]-ut[1]*ft)}_e.zoom(null,st)}})}function Je(Re,Ie,Fe){return!Fe&&Re.__zooming||new rt(Re,Ie)}function rt(Re,Ie){this.that=Re,this.args=Ie,this.active=0,this.sourceEvent=null,this.extent=J.apply(Re,Ie),this.taps=0}rt.prototype={event:function(Re){return Re&&(this.sourceEvent=Re),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Re,Ie){return this.mouse&&Re!=="mouse"&&(this.mouse[1]=Ie.invert(this.mouse[0])),this.touch0&&Re!=="touch"&&(this.touch0[1]=Ie.invert(this.touch0[0])),this.touch1&&Re!=="touch"&&(this.touch1[1]=Ie.invert(this.touch1[0])),this.that.__zoom=Ie,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Re){var Ie=select$3(this.that).datum();me.call(Re,this.that,new ZoomEvent(Re,{sourceEvent:this.sourceEvent,target:je,type:Re,transform:this.that.__zoom,dispatch:me}),Ie)}};function Ze(Re,...Ie){if(!K.apply(this,arguments))return;var Fe=Je(this,Ie).event(Re),qe=this.__zoom,We=Math.max(ue[0],Math.min(ue[1],qe.k*Math.pow(2,oe.apply(this,arguments)))),Ue=pointer(Re);if(Fe.wheel)(Fe.mouse[0][0]!==Ue[0]||Fe.mouse[0][1]!==Ue[1])&&(Fe.mouse[1]=qe.invert(Fe.mouse[0]=Ue)),clearTimeout(Fe.wheel);else{if(qe.k===We)return;Fe.mouse=[Ue,qe.invert(Ue)],interrupt(this),Fe.start()}noevent(Re),Fe.wheel=setTimeout(_e,Ne),Fe.zoom("mouse",ne(Ye(Ke(qe,We),Fe.mouse[0],Fe.mouse[1]),Fe.extent,Ae));function _e(){Fe.wheel=null,Fe.end()}}function et(Re,...Ie){if(Se||!K.apply(this,arguments))return;var Fe=Re.currentTarget,qe=Je(this,Ie,!0).event(Re),We=select$3(Re.view).on("mousemove.zoom",tt,!0).on("mouseup.zoom",it,!0),Ue=pointer(Re,Fe),_e=Re.clientX,Qe=Re.clientY;dragDisable(Re.view),nopropagation(Re),qe.mouse=[Ue,this.__zoom.invert(Ue)],interrupt(this),qe.start();function tt(at){if(noevent(at),!qe.moved){var ot=at.clientX-_e,lt=at.clientY-Qe;qe.moved=ot*ot+lt*lt>$e}qe.event(at).zoom("mouse",ne(Ye(qe.that.__zoom,qe.mouse[0]=pointer(at,Fe),qe.mouse[1]),qe.extent,Ae))}function it(at){We.on("mousemove.zoom mouseup.zoom",null),yesdrag(at.view,qe.moved),noevent(at),qe.event(at).end()}}function nt(Re,...Ie){if(K.apply(this,arguments)){var Fe=this.__zoom,qe=pointer(Re.changedTouches?Re.changedTouches[0]:Re,this),We=Fe.invert(qe),Ue=Fe.k*(Re.shiftKey?.5:2),_e=ne(Ye(Ke(Fe,Ue),qe,We),J.apply(this,Ie),Ae);noevent(Re),pe>0?select$3(this).transition().duration(pe).call(Xe,_e,qe,Re):select$3(this).call(je.transform,_e,qe,Re)}}function Ge(Re,...Ie){if(K.apply(this,arguments)){var Fe=Re.touches,qe=Fe.length,We=Je(this,Ie,Re.changedTouches.length===qe).event(Re),Ue,_e,Qe,tt;for(nopropagation(Re),_e=0;_e<qe;++_e)Qe=Fe[_e],tt=pointer(Qe,this),tt=[tt,this.__zoom.invert(tt),Qe.identifier],We.touch0?!We.touch1&&We.touch0[2]!==tt[2]&&(We.touch1=tt,We.taps=0):(We.touch0=tt,Ue=!0,We.taps=1+!!ge);ge&&(ge=clearTimeout(ge)),Ue&&(We.taps<2&&(ye=tt[0],ge=setTimeout(function(){ge=null},Te)),interrupt(this),We.start())}}function ve(Re,...Ie){if(this.__zooming){var Fe=Je(this,Ie).event(Re),qe=Re.changedTouches,We=qe.length,Ue,_e,Qe,tt;for(noevent(Re),Ue=0;Ue<We;++Ue)_e=qe[Ue],Qe=pointer(_e,this),Fe.touch0&&Fe.touch0[2]===_e.identifier?Fe.touch0[0]=Qe:Fe.touch1&&Fe.touch1[2]===_e.identifier&&(Fe.touch1[0]=Qe);if(_e=Fe.that.__zoom,Fe.touch1){var it=Fe.touch0[0],at=Fe.touch0[1],ot=Fe.touch1[0],lt=Fe.touch1[1],st=(st=ot[0]-it[0])*st+(st=ot[1]-it[1])*st,ut=(ut=lt[0]-at[0])*ut+(ut=lt[1]-at[1])*ut;_e=Ke(_e,Math.sqrt(st/ut)),Qe=[(it[0]+ot[0])/2,(it[1]+ot[1])/2],tt=[(at[0]+lt[0])/2,(at[1]+lt[1])/2]}else if(Fe.touch0)Qe=Fe.touch0[0],tt=Fe.touch0[1];else return;Fe.zoom("touch",ne(Ye(_e,Qe,tt),Fe.extent,Ae))}}function Be(Re,...Ie){if(this.__zooming){var Fe=Je(this,Ie).event(Re),qe=Re.changedTouches,We=qe.length,Ue,_e;for(nopropagation(Re),Se&&clearTimeout(Se),Se=setTimeout(function(){Se=null},Te),Ue=0;Ue<We;++Ue)_e=qe[Ue],Fe.touch0&&Fe.touch0[2]===_e.identifier?delete Fe.touch0:Fe.touch1&&Fe.touch1[2]===_e.identifier&&delete Fe.touch1;if(Fe.touch1&&!Fe.touch0&&(Fe.touch0=Fe.touch1,delete Fe.touch1),Fe.touch0)Fe.touch0[1]=this.__zoom.invert(Fe.touch0[0]);else if(Fe.end(),Fe.taps===2&&(_e=pointer(_e,this),Math.hypot(ye[0]-_e[0],ye[1]-_e[1])<ke)){var Qe=select$3(this).on("dblclick.zoom");Qe&&Qe.apply(this,arguments)}}}return je.wheelDelta=function(Re){return arguments.length?(oe=typeof Re=="function"?Re:constant(+Re),je):oe},je.filter=function(Re){return arguments.length?(K=typeof Re=="function"?Re:constant(!!Re),je):K},je.touchable=function(Re){return arguments.length?(ce=typeof Re=="function"?Re:constant(!!Re),je):ce},je.extent=function(Re){return arguments.length?(J=typeof Re=="function"?Re:constant([[+Re[0][0],+Re[0][1]],[+Re[1][0],+Re[1][1]]]),je):J},je.scaleExtent=function(Re){return arguments.length?(ue[0]=+Re[0],ue[1]=+Re[1],je):[ue[0],ue[1]]},je.translateExtent=function(Re){return arguments.length?(Ae[0][0]=+Re[0][0],Ae[1][0]=+Re[1][0],Ae[0][1]=+Re[0][1],Ae[1][1]=+Re[1][1],je):[[Ae[0][0],Ae[0][1]],[Ae[1][0],Ae[1][1]]]},je.constrain=function(Re){return arguments.length?(ne=Re,je):ne},je.duration=function(Re){return arguments.length?(pe=+Re,je):pe},je.interpolate=function(Re){return arguments.length?(xe=Re,je):xe},je.on=function(){var Re=me.on.apply(me,arguments);return Re===me?je:Re},je.clickDistance=function(Re){return arguments.length?($e=(Re=+Re)*Re,je):Math.sqrt($e)},je.tapDistance=function(Re){return arguments.length?(ke=+Re,je):ke},je}const StoreContext=reactExports.createContext(null),Provider$1=StoreContext.Provider,errorMessages={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:K=>`Node type "${K}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:K=>`The old edge with id=${K} does not exist.`,error009:K=>`Marker type "${K}" doesn't exist.`,error008:(K,J)=>`Couldn't create edge for ${K?"target":"source"} handle id: "${K?J.targetHandle:J.sourceHandle}", edge id: ${J.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:K=>`Edge type "${K}" not found. Using fallback type "default".`,error012:K=>`Node with id "${K}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},zustandErrorMessage=errorMessages.error001();function useStore(K,J){const ne=reactExports.useContext(StoreContext);if(ne===null)throw new Error(zustandErrorMessage);return useStoreWithEqualityFn(ne,K,J)}const useStoreApi=()=>{const K=reactExports.useContext(StoreContext);if(K===null)throw new Error(zustandErrorMessage);return reactExports.useMemo(()=>({getState:K.getState,setState:K.setState,subscribe:K.subscribe,destroy:K.destroy}),[K])},selector$g=K=>K.userSelectionActive?"none":"all";function Panel({position:K,children:J,className:ne,style:oe,...ce}){const ue=useStore(selector$g),Ae=`${K}`.split("-");return Wt.createElement("div",{className:cc(["react-flow__panel",ne,...Ae]),style:{...oe,pointerEvents:ue},...ce},J)}function Attribution({proOptions:K,position:J="bottom-right"}){return K!=null&&K.hideAttribution?null:Wt.createElement(Panel,{position:J,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},Wt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const EdgeText=({x:K,y:J,label:ne,labelStyle:oe={},labelShowBg:ce=!0,labelBgStyle:ue={},labelBgPadding:Ae=[2,4],labelBgBorderRadius:pe=2,children:xe,className:me,...ge})=>{const ye=reactExports.useRef(null),[Se,Te]=reactExports.useState({x:0,y:0,width:0,height:0}),Ne=cc(["react-flow__edge-textwrapper",me]);return reactExports.useEffect(()=>{if(ye.current){const $e=ye.current.getBBox();Te({x:$e.x,y:$e.y,width:$e.width,height:$e.height})}},[ne]),typeof ne>"u"||!ne?null:Wt.createElement("g",{transform:`translate(${K-Se.width/2} ${J-Se.height/2})`,className:Ne,visibility:Se.width?"visible":"hidden",...ge},ce&&Wt.createElement("rect",{width:Se.width+2*Ae[0],x:-Ae[0],y:-Ae[1],height:Se.height+2*Ae[1],className:"react-flow__edge-textbg",style:ue,rx:pe,ry:pe}),Wt.createElement("text",{className:"react-flow__edge-text",y:Se.height/2,dy:"0.3em",ref:ye,style:oe},ne),xe)};var EdgeText$1=reactExports.memo(EdgeText);const getDimensions=K=>({width:K.offsetWidth,height:K.offsetHeight}),clamp=(K,J=0,ne=1)=>Math.min(Math.max(K,J),ne),clampPosition=(K={x:0,y:0},J)=>({x:clamp(K.x,J[0][0],J[1][0]),y:clamp(K.y,J[0][1],J[1][1])}),calcAutoPanVelocity=(K,J,ne)=>K<J?clamp(Math.abs(K-J),1,50)/50:K>ne?-clamp(Math.abs(K-ne),1,50)/50:0,calcAutoPan=(K,J)=>{const ne=calcAutoPanVelocity(K.x,35,J.width-35)*20,oe=calcAutoPanVelocity(K.y,35,J.height-35)*20;return[ne,oe]},getHostForElement=K=>{var J;return((J=K.getRootNode)==null?void 0:J.call(K))||(window==null?void 0:window.document)},getBoundsOfBoxes=(K,J)=>({x:Math.min(K.x,J.x),y:Math.min(K.y,J.y),x2:Math.max(K.x2,J.x2),y2:Math.max(K.y2,J.y2)}),rectToBox=({x:K,y:J,width:ne,height:oe})=>({x:K,y:J,x2:K+ne,y2:J+oe}),boxToRect=({x:K,y:J,x2:ne,y2:oe})=>({x:K,y:J,width:ne-K,height:oe-J}),nodeToRect=K=>({...K.positionAbsolute||{x:0,y:0},width:K.width||0,height:K.height||0}),getOverlappingArea=(K,J)=>{const ne=Math.max(0,Math.min(K.x+K.width,J.x+J.width)-Math.max(K.x,J.x)),oe=Math.max(0,Math.min(K.y+K.height,J.y+J.height)-Math.max(K.y,J.y));return Math.ceil(ne*oe)},isRectObject=K=>isNumeric(K.width)&&isNumeric(K.height)&&isNumeric(K.x)&&isNumeric(K.y),isNumeric=K=>!isNaN(K)&&isFinite(K),internalsSymbol=Symbol.for("internals"),elementSelectionKeys=["Enter"," ","Escape"],devWarn=(K,J)=>{},isReactKeyboardEvent=K=>"nativeEvent"in K;function isInputDOMNode(K){var ce,ue;const J=isReactKeyboardEvent(K)?K.nativeEvent:K,ne=((ue=(ce=J.composedPath)==null?void 0:ce.call(J))==null?void 0:ue[0])||K.target;return["INPUT","SELECT","TEXTAREA"].includes(ne==null?void 0:ne.nodeName)||(ne==null?void 0:ne.hasAttribute("contenteditable"))||!!(ne!=null&&ne.closest(".nokey"))}const isMouseEvent=K=>"clientX"in K,getEventPosition=(K,J)=>{var ue,Ae;const ne=isMouseEvent(K),oe=ne?K.clientX:(ue=K.touches)==null?void 0:ue[0].clientX,ce=ne?K.clientY:(Ae=K.touches)==null?void 0:Ae[0].clientY;return{x:oe-((J==null?void 0:J.left)??0),y:ce-((J==null?void 0:J.top)??0)}},isMacOs=()=>{var K;return typeof navigator<"u"&&((K=navigator==null?void 0:navigator.userAgent)==null?void 0:K.indexOf("Mac"))>=0},BaseEdge=({id:K,path:J,labelX:ne,labelY:oe,label:ce,labelStyle:ue,labelShowBg:Ae,labelBgStyle:pe,labelBgPadding:xe,labelBgBorderRadius:me,style:ge,markerEnd:ye,markerStart:Se,interactionWidth:Te=20})=>Wt.createElement(Wt.Fragment,null,Wt.createElement("path",{id:K,style:ge,d:J,fill:"none",className:"react-flow__edge-path",markerEnd:ye,markerStart:Se}),Te&&Wt.createElement("path",{d:J,fill:"none",strokeOpacity:0,strokeWidth:Te,className:"react-flow__edge-interaction"}),ce&&isNumeric(ne)&&isNumeric(oe)?Wt.createElement(EdgeText$1,{x:ne,y:oe,label:ce,labelStyle:ue,labelShowBg:Ae,labelBgStyle:pe,labelBgPadding:xe,labelBgBorderRadius:me}):null);BaseEdge.displayName="BaseEdge";function getMouseHandler$1(K,J,ne){return ne===void 0?ne:oe=>{const ce=J().edges.find(ue=>ue.id===K);ce&&ne(oe,{...ce})}}function getEdgeCenter({sourceX:K,sourceY:J,targetX:ne,targetY:oe}){const ce=Math.abs(ne-K)/2,ue=ne<K?ne+ce:ne-ce,Ae=Math.abs(oe-J)/2,pe=oe<J?oe+Ae:oe-Ae;return[ue,pe,ce,Ae]}function getBezierEdgeCenter({sourceX:K,sourceY:J,targetX:ne,targetY:oe,sourceControlX:ce,sourceControlY:ue,targetControlX:Ae,targetControlY:pe}){const xe=K*.125+ce*.375+Ae*.375+ne*.125,me=J*.125+ue*.375+pe*.375+oe*.125,ge=Math.abs(xe-K),ye=Math.abs(me-J);return[xe,me,ge,ye]}var ConnectionMode;(function(K){K.Strict="strict",K.Loose="loose"})(ConnectionMode||(ConnectionMode={}));var PanOnScrollMode;(function(K){K.Free="free",K.Vertical="vertical",K.Horizontal="horizontal"})(PanOnScrollMode||(PanOnScrollMode={}));var SelectionMode;(function(K){K.Partial="partial",K.Full="full"})(SelectionMode||(SelectionMode={}));var ConnectionLineType;(function(K){K.Bezier="default",K.Straight="straight",K.Step="step",K.SmoothStep="smoothstep",K.SimpleBezier="simplebezier"})(ConnectionLineType||(ConnectionLineType={}));var MarkerType;(function(K){K.Arrow="arrow",K.ArrowClosed="arrowclosed"})(MarkerType||(MarkerType={}));var Position;(function(K){K.Left="left",K.Top="top",K.Right="right",K.Bottom="bottom"})(Position||(Position={}));function getControl({pos:K,x1:J,y1:ne,x2:oe,y2:ce}){return K===Position.Left||K===Position.Right?[.5*(J+oe),ne]:[J,.5*(ne+ce)]}function getSimpleBezierPath({sourceX:K,sourceY:J,sourcePosition:ne=Position.Bottom,targetX:oe,targetY:ce,targetPosition:ue=Position.Top}){const[Ae,pe]=getControl({pos:ne,x1:K,y1:J,x2:oe,y2:ce}),[xe,me]=getControl({pos:ue,x1:oe,y1:ce,x2:K,y2:J}),[ge,ye,Se,Te]=getBezierEdgeCenter({sourceX:K,sourceY:J,targetX:oe,targetY:ce,sourceControlX:Ae,sourceControlY:pe,targetControlX:xe,targetControlY:me});return[`M${K},${J} C${Ae},${pe} ${xe},${me} ${oe},${ce}`,ge,ye,Se,Te]}const SimpleBezierEdge=reactExports.memo(({sourceX:K,sourceY:J,targetX:ne,targetY:oe,sourcePosition:ce=Position.Bottom,targetPosition:ue=Position.Top,label:Ae,labelStyle:pe,labelShowBg:xe,labelBgStyle:me,labelBgPadding:ge,labelBgBorderRadius:ye,style:Se,markerEnd:Te,markerStart:Ne,interactionWidth:$e})=>{const[ke,je,Ke]=getSimpleBezierPath({sourceX:K,sourceY:J,sourcePosition:ce,targetX:ne,targetY:oe,targetPosition:ue});return Wt.createElement(BaseEdge,{path:ke,labelX:je,labelY:Ke,label:Ae,labelStyle:pe,labelShowBg:xe,labelBgStyle:me,labelBgPadding:ge,labelBgBorderRadius:ye,style:Se,markerEnd:Te,markerStart:Ne,interactionWidth:$e})});SimpleBezierEdge.displayName="SimpleBezierEdge";const handleDirections={[Position.Left]:{x:-1,y:0},[Position.Right]:{x:1,y:0},[Position.Top]:{x:0,y:-1},[Position.Bottom]:{x:0,y:1}},getDirection=({source:K,sourcePosition:J=Position.Bottom,target:ne})=>J===Position.Left||J===Position.Right?K.x<ne.x?{x:1,y:0}:{x:-1,y:0}:K.y<ne.y?{x:0,y:1}:{x:0,y:-1},distance$1=(K,J)=>Math.sqrt(Math.pow(J.x-K.x,2)+Math.pow(J.y-K.y,2));function getPoints({source:K,sourcePosition:J=Position.Bottom,target:ne,targetPosition:oe=Position.Top,center:ce,offset:ue}){const Ae=handleDirections[J],pe=handleDirections[oe],xe={x:K.x+Ae.x*ue,y:K.y+Ae.y*ue},me={x:ne.x+pe.x*ue,y:ne.y+pe.y*ue},ge=getDirection({source:xe,sourcePosition:J,target:me}),ye=ge.x!==0?"x":"y",Se=ge[ye];let Te=[],Ne,$e;const ke={x:0,y:0},je={x:0,y:0},[Ke,Ye,ze,Xe]=getEdgeCenter({sourceX:K.x,sourceY:K.y,targetX:ne.x,targetY:ne.y});if(Ae[ye]*pe[ye]===-1){Ne=ce.x??Ke,$e=ce.y??Ye;const rt=[{x:Ne,y:xe.y},{x:Ne,y:me.y}],Ze=[{x:xe.x,y:$e},{x:me.x,y:$e}];Ae[ye]===Se?Te=ye==="x"?rt:Ze:Te=ye==="x"?Ze:rt}else{const rt=[{x:xe.x,y:me.y}],Ze=[{x:me.x,y:xe.y}];if(ye==="x"?Te=Ae.x===Se?Ze:rt:Te=Ae.y===Se?rt:Ze,J===oe){const Be=Math.abs(K[ye]-ne[ye]);if(Be<=ue){const Re=Math.min(ue-1,ue-Be);Ae[ye]===Se?ke[ye]=(xe[ye]>K[ye]?-1:1)*Re:je[ye]=(me[ye]>ne[ye]?-1:1)*Re}}if(J!==oe){const Be=ye==="x"?"y":"x",Re=Ae[ye]===pe[Be],Ie=xe[Be]>me[Be],Fe=xe[Be]<me[Be];(Ae[ye]===1&&(!Re&&Ie||Re&&Fe)||Ae[ye]!==1&&(!Re&&Fe||Re&&Ie))&&(Te=ye==="x"?rt:Ze)}const et={x:xe.x+ke.x,y:xe.y+ke.y},nt={x:me.x+je.x,y:me.y+je.y},Ge=Math.max(Math.abs(et.x-Te[0].x),Math.abs(nt.x-Te[0].x)),ve=Math.max(Math.abs(et.y-Te[0].y),Math.abs(nt.y-Te[0].y));Ge>=ve?(Ne=(et.x+nt.x)/2,$e=Te[0].y):(Ne=Te[0].x,$e=(et.y+nt.y)/2)}return[[K,{x:xe.x+ke.x,y:xe.y+ke.y},...Te,{x:me.x+je.x,y:me.y+je.y},ne],Ne,$e,ze,Xe]}function getBend(K,J,ne,oe){const ce=Math.min(distance$1(K,J)/2,distance$1(J,ne)/2,oe),{x:ue,y:Ae}=J;if(K.x===ue&&ue===ne.x||K.y===Ae&&Ae===ne.y)return`L${ue} ${Ae}`;if(K.y===Ae){const me=K.x<ne.x?-1:1,ge=K.y<ne.y?1:-1;return`L ${ue+ce*me},${Ae}Q ${ue},${Ae} ${ue},${Ae+ce*ge}`}const pe=K.x<ne.x?1:-1,xe=K.y<ne.y?-1:1;return`L ${ue},${Ae+ce*xe}Q ${ue},${Ae} ${ue+ce*pe},${Ae}`}function getSmoothStepPath({sourceX:K,sourceY:J,sourcePosition:ne=Position.Bottom,targetX:oe,targetY:ce,targetPosition:ue=Position.Top,borderRadius:Ae=5,centerX:pe,centerY:xe,offset:me=20}){const[ge,ye,Se,Te,Ne]=getPoints({source:{x:K,y:J},sourcePosition:ne,target:{x:oe,y:ce},targetPosition:ue,center:{x:pe,y:xe},offset:me});return[ge.reduce((ke,je,Ke)=>{let Ye="";return Ke>0&&Ke<ge.length-1?Ye=getBend(ge[Ke-1],je,ge[Ke+1],Ae):Ye=`${Ke===0?"M":"L"}${je.x} ${je.y}`,ke+=Ye,ke},""),ye,Se,Te,Ne]}const SmoothStepEdge=reactExports.memo(({sourceX:K,sourceY:J,targetX:ne,targetY:oe,label:ce,labelStyle:ue,labelShowBg:Ae,labelBgStyle:pe,labelBgPadding:xe,labelBgBorderRadius:me,style:ge,sourcePosition:ye=Position.Bottom,targetPosition:Se=Position.Top,markerEnd:Te,markerStart:Ne,pathOptions:$e,interactionWidth:ke})=>{const[je,Ke,Ye]=getSmoothStepPath({sourceX:K,sourceY:J,sourcePosition:ye,targetX:ne,targetY:oe,targetPosition:Se,borderRadius:$e==null?void 0:$e.borderRadius,offset:$e==null?void 0:$e.offset});return Wt.createElement(BaseEdge,{path:je,labelX:Ke,labelY:Ye,label:ce,labelStyle:ue,labelShowBg:Ae,labelBgStyle:pe,labelBgPadding:xe,labelBgBorderRadius:me,style:ge,markerEnd:Te,markerStart:Ne,interactionWidth:ke})});SmoothStepEdge.displayName="SmoothStepEdge";const StepEdge=reactExports.memo(K=>{var J;return Wt.createElement(SmoothStepEdge,{...K,pathOptions:reactExports.useMemo(()=>{var ne;return{borderRadius:0,offset:(ne=K.pathOptions)==null?void 0:ne.offset}},[(J=K.pathOptions)==null?void 0:J.offset])})});StepEdge.displayName="StepEdge";function getStraightPath({sourceX:K,sourceY:J,targetX:ne,targetY:oe}){const[ce,ue,Ae,pe]=getEdgeCenter({sourceX:K,sourceY:J,targetX:ne,targetY:oe});return[`M ${K},${J}L ${ne},${oe}`,ce,ue,Ae,pe]}const StraightEdge=reactExports.memo(({sourceX:K,sourceY:J,targetX:ne,targetY:oe,label:ce,labelStyle:ue,labelShowBg:Ae,labelBgStyle:pe,labelBgPadding:xe,labelBgBorderRadius:me,style:ge,markerEnd:ye,markerStart:Se,interactionWidth:Te})=>{const[Ne,$e,ke]=getStraightPath({sourceX:K,sourceY:J,targetX:ne,targetY:oe});return Wt.createElement(BaseEdge,{path:Ne,labelX:$e,labelY:ke,label:ce,labelStyle:ue,labelShowBg:Ae,labelBgStyle:pe,labelBgPadding:xe,labelBgBorderRadius:me,style:ge,markerEnd:ye,markerStart:Se,interactionWidth:Te})});StraightEdge.displayName="StraightEdge";function calculateControlOffset(K,J){return K>=0?.5*K:J*25*Math.sqrt(-K)}function getControlWithCurvature({pos:K,x1:J,y1:ne,x2:oe,y2:ce,c:ue}){switch(K){case Position.Left:return[J-calculateControlOffset(J-oe,ue),ne];case Position.Right:return[J+calculateControlOffset(oe-J,ue),ne];case Position.Top:return[J,ne-calculateControlOffset(ne-ce,ue)];case Position.Bottom:return[J,ne+calculateControlOffset(ce-ne,ue)]}}function getBezierPath({sourceX:K,sourceY:J,sourcePosition:ne=Position.Bottom,targetX:oe,targetY:ce,targetPosition:ue=Position.Top,curvature:Ae=.25}){const[pe,xe]=getControlWithCurvature({pos:ne,x1:K,y1:J,x2:oe,y2:ce,c:Ae}),[me,ge]=getControlWithCurvature({pos:ue,x1:oe,y1:ce,x2:K,y2:J,c:Ae}),[ye,Se,Te,Ne]=getBezierEdgeCenter({sourceX:K,sourceY:J,targetX:oe,targetY:ce,sourceControlX:pe,sourceControlY:xe,targetControlX:me,targetControlY:ge});return[`M${K},${J} C${pe},${xe} ${me},${ge} ${oe},${ce}`,ye,Se,Te,Ne]}const BezierEdge=reactExports.memo(({sourceX:K,sourceY:J,targetX:ne,targetY:oe,sourcePosition:ce=Position.Bottom,targetPosition:ue=Position.Top,label:Ae,labelStyle:pe,labelShowBg:xe,labelBgStyle:me,labelBgPadding:ge,labelBgBorderRadius:ye,style:Se,markerEnd:Te,markerStart:Ne,pathOptions:$e,interactionWidth:ke})=>{const[je,Ke,Ye]=getBezierPath({sourceX:K,sourceY:J,sourcePosition:ce,targetX:ne,targetY:oe,targetPosition:ue,curvature:$e==null?void 0:$e.curvature});return Wt.createElement(BaseEdge,{path:je,labelX:Ke,labelY:Ye,label:Ae,labelStyle:pe,labelShowBg:xe,labelBgStyle:me,labelBgPadding:ge,labelBgBorderRadius:ye,style:Se,markerEnd:Te,markerStart:Ne,interactionWidth:ke})});BezierEdge.displayName="BezierEdge";const NodeIdContext=reactExports.createContext(null),Provider=NodeIdContext.Provider;NodeIdContext.Consumer;const useNodeId=()=>reactExports.useContext(NodeIdContext),isEdge$1=K=>"id"in K&&"source"in K&&"target"in K,getEdgeId=({source:K,sourceHandle:J,target:ne,targetHandle:oe})=>`reactflow__edge-${K}${J||""}-${ne}${oe||""}`,getMarkerId=(K,J)=>typeof K>"u"?"":typeof K=="string"?K:`${J?`${J}__`:""}${Object.keys(K).sort().map(oe=>`${oe}=${K[oe]}`).join("&")}`,connectionExists=(K,J)=>J.some(ne=>ne.source===K.source&&ne.target===K.target&&(ne.sourceHandle===K.sourceHandle||!ne.sourceHandle&&!K.sourceHandle)&&(ne.targetHandle===K.targetHandle||!ne.targetHandle&&!K.targetHandle)),addEdge=(K,J)=>{if(!K.source||!K.target)return J;let ne;return isEdge$1(K)?ne={...K}:ne={...K,id:getEdgeId(K)},connectionExists(ne,J)?J:J.concat(ne)},pointToRendererPoint=({x:K,y:J},[ne,oe,ce],ue,[Ae,pe])=>{const xe={x:(K-ne)/ce,y:(J-oe)/ce};return ue?{x:Ae*Math.round(xe.x/Ae),y:pe*Math.round(xe.y/pe)}:xe},rendererPointToPoint=({x:K,y:J},[ne,oe,ce])=>({x:K*ce+ne,y:J*ce+oe}),getNodePositionWithOrigin=(K,J=[0,0])=>{if(!K)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const ne=(K.width??0)*J[0],oe=(K.height??0)*J[1],ce={x:K.position.x-ne,y:K.position.y-oe};return{...ce,positionAbsolute:K.positionAbsolute?{x:K.positionAbsolute.x-ne,y:K.positionAbsolute.y-oe}:ce}},getNodesBounds=(K,J=[0,0])=>{if(K.length===0)return{x:0,y:0,width:0,height:0};const ne=K.reduce((oe,ce)=>{const{x:ue,y:Ae}=getNodePositionWithOrigin(ce,J).positionAbsolute;return getBoundsOfBoxes(oe,rectToBox({x:ue,y:Ae,width:ce.width||0,height:ce.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return boxToRect(ne)},getNodesInside=(K,J,[ne,oe,ce]=[0,0,1],ue=!1,Ae=!1,pe=[0,0])=>{const xe={x:(J.x-ne)/ce,y:(J.y-oe)/ce,width:J.width/ce,height:J.height/ce},me=[];return K.forEach(ge=>{const{width:ye,height:Se,selectable:Te=!0,hidden:Ne=!1}=ge;if(Ae&&!Te||Ne)return!1;const{positionAbsolute:$e}=getNodePositionWithOrigin(ge,pe),ke={x:$e.x,y:$e.y,width:ye||0,height:Se||0},je=getOverlappingArea(xe,ke),Ke=typeof ye>"u"||typeof Se>"u"||ye===null||Se===null,Ye=ue&&je>0,ze=(ye||0)*(Se||0);(Ke||Ye||je>=ze||ge.dragging)&&me.push(ge)}),me},getConnectedEdges=(K,J)=>{const ne=K.map(oe=>oe.id);return J.filter(oe=>ne.includes(oe.source)||ne.includes(oe.target))},getViewportForBounds=(K,J,ne,oe,ce,ue=.1)=>{const Ae=J/(K.width*(1+ue)),pe=ne/(K.height*(1+ue)),xe=Math.min(Ae,pe),me=clamp(xe,oe,ce),ge=K.x+K.width/2,ye=K.y+K.height/2,Se=J/2-ge*me,Te=ne/2-ye*me;return{x:Se,y:Te,zoom:me}},getD3Transition=(K,J=0)=>K.transition().duration(J);function getHandles(K,J,ne,oe){return(J[ne]||[]).reduce((ce,ue)=>{var Ae,pe;return`${K.id}-${ue.id}-${ne}`!==oe&&ce.push({id:ue.id||null,type:ne,nodeId:K.id,x:(((Ae=K.positionAbsolute)==null?void 0:Ae.x)??0)+ue.x+ue.width/2,y:(((pe=K.positionAbsolute)==null?void 0:pe.y)??0)+ue.y+ue.height/2}),ce},[])}function getClosestHandle(K,J,ne,oe,ce,ue){const{x:Ae,y:pe}=getEventPosition(K),me=J.elementsFromPoint(Ae,pe).find(Ne=>Ne.classList.contains("react-flow__handle"));if(me){const Ne=me.getAttribute("data-nodeid");if(Ne){const $e=getHandleType(void 0,me),ke=me.getAttribute("data-handleid"),je=ue({nodeId:Ne,id:ke,type:$e});if(je){const Ke=ce.find(Ye=>Ye.nodeId===Ne&&Ye.type===$e&&Ye.id===ke);return{handle:{id:ke,type:$e,nodeId:Ne,x:(Ke==null?void 0:Ke.x)||ne.x,y:(Ke==null?void 0:Ke.y)||ne.y},validHandleResult:je}}}}let ge=[],ye=1/0;if(ce.forEach(Ne=>{const $e=Math.sqrt((Ne.x-ne.x)**2+(Ne.y-ne.y)**2);if($e<=oe){const ke=ue(Ne);$e<=ye&&($e<ye?ge=[{handle:Ne,validHandleResult:ke}]:$e===ye&&ge.push({handle:Ne,validHandleResult:ke}),ye=$e)}}),!ge.length)return{handle:null,validHandleResult:defaultResult()};if(ge.length===1)return ge[0];const Se=ge.some(({validHandleResult:Ne})=>Ne.isValid),Te=ge.some(({handle:Ne})=>Ne.type==="target");return ge.find(({handle:Ne,validHandleResult:$e})=>Te?Ne.type==="target":Se?$e.isValid:!0)||ge[0]}const nullConnection={source:null,target:null,sourceHandle:null,targetHandle:null},defaultResult=()=>({handleDomNode:null,isValid:!1,connection:nullConnection,endHandle:null});function isValidHandle(K,J,ne,oe,ce,ue,Ae){const pe=ce==="target",xe=Ae.querySelector(`.react-flow__handle[data-id="${K==null?void 0:K.nodeId}-${K==null?void 0:K.id}-${K==null?void 0:K.type}"]`),me={...defaultResult(),handleDomNode:xe};if(xe){const ge=getHandleType(void 0,xe),ye=xe.getAttribute("data-nodeid"),Se=xe.getAttribute("data-handleid"),Te=xe.classList.contains("connectable"),Ne=xe.classList.contains("connectableend"),$e={source:pe?ye:ne,sourceHandle:pe?Se:oe,target:pe?ne:ye,targetHandle:pe?oe:Se};me.connection=$e,Te&&Ne&&(J===ConnectionMode.Strict?pe&&ge==="source"||!pe&&ge==="target":ye!==ne||Se!==oe)&&(me.endHandle={nodeId:ye,handleId:Se,type:ge},me.isValid=ue($e))}return me}function getHandleLookup({nodes:K,nodeId:J,handleId:ne,handleType:oe}){return K.reduce((ce,ue)=>{if(ue[internalsSymbol]){const{handleBounds:Ae}=ue[internalsSymbol];let pe=[],xe=[];Ae&&(pe=getHandles(ue,Ae,"source",`${J}-${ne}-${oe}`),xe=getHandles(ue,Ae,"target",`${J}-${ne}-${oe}`)),ce.push(...pe,...xe)}return ce},[])}function getHandleType(K,J){return K||(J!=null&&J.classList.contains("target")?"target":J!=null&&J.classList.contains("source")?"source":null)}function resetRecentHandle(K){K==null||K.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function getConnectionStatus(K,J){let ne=null;return J?ne="valid":K&&!J&&(ne="invalid"),ne}function handlePointerDown({event:K,handleId:J,nodeId:ne,onConnect:oe,isTarget:ce,getState:ue,setState:Ae,isValidConnection:pe,edgeUpdaterType:xe,onReconnectEnd:me}){const ge=getHostForElement(K.target),{connectionMode:ye,domNode:Se,autoPanOnConnect:Te,connectionRadius:Ne,onConnectStart:$e,panBy:ke,getNodes:je,cancelConnection:Ke}=ue();let Ye=0,ze;const{x:Xe,y:Je}=getEventPosition(K),rt=ge==null?void 0:ge.elementFromPoint(Xe,Je),Ze=getHandleType(xe,rt),et=Se==null?void 0:Se.getBoundingClientRect();if(!et||!Ze)return;let nt,Ge=getEventPosition(K,et),ve=!1,Be=null,Re=!1,Ie=null;const Fe=getHandleLookup({nodes:je(),nodeId:ne,handleId:J,handleType:Ze}),qe=()=>{if(!Te)return;const[_e,Qe]=calcAutoPan(Ge,et);ke({x:_e,y:Qe}),Ye=requestAnimationFrame(qe)};Ae({connectionPosition:Ge,connectionStatus:null,connectionNodeId:ne,connectionHandleId:J,connectionHandleType:Ze,connectionStartHandle:{nodeId:ne,handleId:J,type:Ze},connectionEndHandle:null}),$e==null||$e(K,{nodeId:ne,handleId:J,handleType:Ze});function We(_e){const{transform:Qe}=ue();Ge=getEventPosition(_e,et);const{handle:tt,validHandleResult:it}=getClosestHandle(_e,ge,pointToRendererPoint(Ge,Qe,!1,[1,1]),Ne,Fe,at=>isValidHandle(at,ye,ne,J,ce?"target":"source",pe,ge));if(ze=tt,ve||(qe(),ve=!0),Ie=it.handleDomNode,Be=it.connection,Re=it.isValid,Ae({connectionPosition:ze&&Re?rendererPointToPoint({x:ze.x,y:ze.y},Qe):Ge,connectionStatus:getConnectionStatus(!!ze,Re),connectionEndHandle:it.endHandle}),!ze&&!Re&&!Ie)return resetRecentHandle(nt);Be.source!==Be.target&&Ie&&(resetRecentHandle(nt),nt=Ie,Ie.classList.add("connecting","react-flow__handle-connecting"),Ie.classList.toggle("valid",Re),Ie.classList.toggle("react-flow__handle-valid",Re))}function Ue(_e){var Qe,tt;(ze||Ie)&&Be&&Re&&(oe==null||oe(Be)),(tt=(Qe=ue()).onConnectEnd)==null||tt.call(Qe,_e),xe&&(me==null||me(_e)),resetRecentHandle(nt),Ke(),cancelAnimationFrame(Ye),ve=!1,Re=!1,Be=null,Ie=null,ge.removeEventListener("mousemove",We),ge.removeEventListener("mouseup",Ue),ge.removeEventListener("touchmove",We),ge.removeEventListener("touchend",Ue)}ge.addEventListener("mousemove",We),ge.addEventListener("mouseup",Ue),ge.addEventListener("touchmove",We),ge.addEventListener("touchend",Ue)}const alwaysValid=()=>!0,selector$f=K=>({connectionStartHandle:K.connectionStartHandle,connectOnClick:K.connectOnClick,noPanClassName:K.noPanClassName}),connectingSelector=(K,J,ne)=>oe=>{const{connectionStartHandle:ce,connectionEndHandle:ue,connectionClickStartHandle:Ae}=oe;return{connecting:(ce==null?void 0:ce.nodeId)===K&&(ce==null?void 0:ce.handleId)===J&&(ce==null?void 0:ce.type)===ne||(ue==null?void 0:ue.nodeId)===K&&(ue==null?void 0:ue.handleId)===J&&(ue==null?void 0:ue.type)===ne,clickConnecting:(Ae==null?void 0:Ae.nodeId)===K&&(Ae==null?void 0:Ae.handleId)===J&&(Ae==null?void 0:Ae.type)===ne}},Handle=reactExports.forwardRef(({type:K="source",position:J=Position.Top,isValidConnection:ne,isConnectable:oe=!0,isConnectableStart:ce=!0,isConnectableEnd:ue=!0,id:Ae,onConnect:pe,children:xe,className:me,onMouseDown:ge,onTouchStart:ye,...Se},Te)=>{var et,nt;const Ne=Ae||null,$e=K==="target",ke=useStoreApi(),je=useNodeId(),{connectOnClick:Ke,noPanClassName:Ye}=useStore(selector$f,shallow$1),{connecting:ze,clickConnecting:Xe}=useStore(connectingSelector(je,Ne,K),shallow$1);je||(nt=(et=ke.getState()).onError)==null||nt.call(et,"010",errorMessages.error010());const Je=Ge=>{const{defaultEdgeOptions:ve,onConnect:Be,hasDefaultEdges:Re}=ke.getState(),Ie={...ve,...Ge};if(Re){const{edges:Fe,setEdges:qe}=ke.getState();qe(addEdge(Ie,Fe))}Be==null||Be(Ie),pe==null||pe(Ie)},rt=Ge=>{if(!je)return;const ve=isMouseEvent(Ge);ce&&(ve&&Ge.button===0||!ve)&&handlePointerDown({event:Ge,handleId:Ne,nodeId:je,onConnect:Je,isTarget:$e,getState:ke.getState,setState:ke.setState,isValidConnection:ne||ke.getState().isValidConnection||alwaysValid}),ve?ge==null||ge(Ge):ye==null||ye(Ge)},Ze=Ge=>{const{onClickConnectStart:ve,onClickConnectEnd:Be,connectionClickStartHandle:Re,connectionMode:Ie,isValidConnection:Fe}=ke.getState();if(!je||!Re&&!ce)return;if(!Re){ve==null||ve(Ge,{nodeId:je,handleId:Ne,handleType:K}),ke.setState({connectionClickStartHandle:{nodeId:je,type:K,handleId:Ne}});return}const qe=getHostForElement(Ge.target),We=ne||Fe||alwaysValid,{connection:Ue,isValid:_e}=isValidHandle({nodeId:je,id:Ne,type:K},Ie,Re.nodeId,Re.handleId||null,Re.type,We,qe);_e&&Je(Ue),Be==null||Be(Ge),ke.setState({connectionClickStartHandle:null})};return Wt.createElement("div",{"data-handleid":Ne,"data-nodeid":je,"data-handlepos":J,"data-id":`${je}-${Ne}-${K}`,className:cc(["react-flow__handle",`react-flow__handle-${J}`,"nodrag",Ye,me,{source:!$e,target:$e,connectable:oe,connectablestart:ce,connectableend:ue,connecting:Xe,connectionindicator:oe&&(ce&&!ze||ue&&ze)}]),onMouseDown:rt,onTouchStart:rt,onClick:Ke?Ze:void 0,ref:Te,...Se},xe)});Handle.displayName="Handle";var Handle$1=reactExports.memo(Handle);const DefaultNode=({data:K,isConnectable:J,targetPosition:ne=Position.Top,sourcePosition:oe=Position.Bottom})=>Wt.createElement(Wt.Fragment,null,Wt.createElement(Handle$1,{type:"target",position:ne,isConnectable:J}),K==null?void 0:K.label,Wt.createElement(Handle$1,{type:"source",position:oe,isConnectable:J}));DefaultNode.displayName="DefaultNode";var DefaultNode$1=reactExports.memo(DefaultNode);const InputNode=({data:K,isConnectable:J,sourcePosition:ne=Position.Bottom})=>Wt.createElement(Wt.Fragment,null,K==null?void 0:K.label,Wt.createElement(Handle$1,{type:"source",position:ne,isConnectable:J}));InputNode.displayName="InputNode";var InputNode$1=reactExports.memo(InputNode);const OutputNode=({data:K,isConnectable:J,targetPosition:ne=Position.Top})=>Wt.createElement(Wt.Fragment,null,Wt.createElement(Handle$1,{type:"target",position:ne,isConnectable:J}),K==null?void 0:K.label);OutputNode.displayName="OutputNode";var OutputNode$1=reactExports.memo(OutputNode);const GroupNode=()=>null;GroupNode.displayName="GroupNode";const selector$e=K=>({selectedNodes:K.getNodes().filter(J=>J.selected),selectedEdges:K.edges.filter(J=>J.selected).map(J=>({...J}))}),selectId=K=>K.id;function areEqual(K,J){return shallow$1(K.selectedNodes.map(selectId),J.selectedNodes.map(selectId))&&shallow$1(K.selectedEdges.map(selectId),J.selectedEdges.map(selectId))}const SelectionListener=reactExports.memo(({onSelectionChange:K})=>{const J=useStoreApi(),{selectedNodes:ne,selectedEdges:oe}=useStore(selector$e,areEqual);return reactExports.useEffect(()=>{const ce={nodes:ne,edges:oe};K==null||K(ce),J.getState().onSelectionChange.forEach(ue=>ue(ce))},[ne,oe,K]),null});SelectionListener.displayName="SelectionListener";const changeSelector=K=>!!K.onSelectionChange;function Wrapper$1({onSelectionChange:K}){const J=useStore(changeSelector);return K||J?Wt.createElement(SelectionListener,{onSelectionChange:K}):null}const selector$d=K=>({setNodes:K.setNodes,setEdges:K.setEdges,setDefaultNodesAndEdges:K.setDefaultNodesAndEdges,setMinZoom:K.setMinZoom,setMaxZoom:K.setMaxZoom,setTranslateExtent:K.setTranslateExtent,setNodeExtent:K.setNodeExtent,reset:K.reset});function useStoreUpdater(K,J){reactExports.useEffect(()=>{typeof K<"u"&&J(K)},[K])}function useDirectStoreUpdater(K,J,ne){reactExports.useEffect(()=>{typeof J<"u"&&ne({[K]:J})},[J])}const StoreUpdater=({nodes:K,edges:J,defaultNodes:ne,defaultEdges:oe,onConnect:ce,onConnectStart:ue,onConnectEnd:Ae,onClickConnectStart:pe,onClickConnectEnd:xe,nodesDraggable:me,nodesConnectable:ge,nodesFocusable:ye,edgesFocusable:Se,edgesUpdatable:Te,elevateNodesOnSelect:Ne,minZoom:$e,maxZoom:ke,nodeExtent:je,onNodesChange:Ke,onEdgesChange:Ye,elementsSelectable:ze,connectionMode:Xe,snapGrid:Je,snapToGrid:rt,translateExtent:Ze,connectOnClick:et,defaultEdgeOptions:nt,fitView:Ge,fitViewOptions:ve,onNodesDelete:Be,onEdgesDelete:Re,onNodeDrag:Ie,onNodeDragStart:Fe,onNodeDragStop:qe,onSelectionDrag:We,onSelectionDragStart:Ue,onSelectionDragStop:_e,noPanClassName:Qe,nodeOrigin:tt,rfId:it,autoPanOnConnect:at,autoPanOnNodeDrag:ot,onError:lt,connectionRadius:st,isValidConnection:ut,nodeDragThreshold:ft})=>{const{setNodes:dt,setEdges:Bt,setDefaultNodesAndEdges:pt,setMinZoom:mt,setMaxZoom:bt,setTranslateExtent:xt,setNodeExtent:yt,reset:It}=useStore(selector$d,shallow$1),ht=useStoreApi();return reactExports.useEffect(()=>{const gt=oe==null?void 0:oe.map(Pt=>({...Pt,...nt}));return pt(ne,gt),()=>{It()}},[]),useDirectStoreUpdater("defaultEdgeOptions",nt,ht.setState),useDirectStoreUpdater("connectionMode",Xe,ht.setState),useDirectStoreUpdater("onConnect",ce,ht.setState),useDirectStoreUpdater("onConnectStart",ue,ht.setState),useDirectStoreUpdater("onConnectEnd",Ae,ht.setState),useDirectStoreUpdater("onClickConnectStart",pe,ht.setState),useDirectStoreUpdater("onClickConnectEnd",xe,ht.setState),useDirectStoreUpdater("nodesDraggable",me,ht.setState),useDirectStoreUpdater("nodesConnectable",ge,ht.setState),useDirectStoreUpdater("nodesFocusable",ye,ht.setState),useDirectStoreUpdater("edgesFocusable",Se,ht.setState),useDirectStoreUpdater("edgesUpdatable",Te,ht.setState),useDirectStoreUpdater("elementsSelectable",ze,ht.setState),useDirectStoreUpdater("elevateNodesOnSelect",Ne,ht.setState),useDirectStoreUpdater("snapToGrid",rt,ht.setState),useDirectStoreUpdater("snapGrid",Je,ht.setState),useDirectStoreUpdater("onNodesChange",Ke,ht.setState),useDirectStoreUpdater("onEdgesChange",Ye,ht.setState),useDirectStoreUpdater("connectOnClick",et,ht.setState),useDirectStoreUpdater("fitViewOnInit",Ge,ht.setState),useDirectStoreUpdater("fitViewOnInitOptions",ve,ht.setState),useDirectStoreUpdater("onNodesDelete",Be,ht.setState),useDirectStoreUpdater("onEdgesDelete",Re,ht.setState),useDirectStoreUpdater("onNodeDrag",Ie,ht.setState),useDirectStoreUpdater("onNodeDragStart",Fe,ht.setState),useDirectStoreUpdater("onNodeDragStop",qe,ht.setState),useDirectStoreUpdater("onSelectionDrag",We,ht.setState),useDirectStoreUpdater("onSelectionDragStart",Ue,ht.setState),useDirectStoreUpdater("onSelectionDragStop",_e,ht.setState),useDirectStoreUpdater("noPanClassName",Qe,ht.setState),useDirectStoreUpdater("nodeOrigin",tt,ht.setState),useDirectStoreUpdater("rfId",it,ht.setState),useDirectStoreUpdater("autoPanOnConnect",at,ht.setState),useDirectStoreUpdater("autoPanOnNodeDrag",ot,ht.setState),useDirectStoreUpdater("onError",lt,ht.setState),useDirectStoreUpdater("connectionRadius",st,ht.setState),useDirectStoreUpdater("isValidConnection",ut,ht.setState),useDirectStoreUpdater("nodeDragThreshold",ft,ht.setState),useStoreUpdater(K,dt),useStoreUpdater(J,Bt),useStoreUpdater($e,mt),useStoreUpdater(ke,bt),useStoreUpdater(Ze,xt),useStoreUpdater(je,yt),null},style={display:"none"},ariaLiveStyle={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ARIA_NODE_DESC_KEY="react-flow__node-desc",ARIA_EDGE_DESC_KEY="react-flow__edge-desc",ARIA_LIVE_MESSAGE="react-flow__aria-live",selector$c=K=>K.ariaLiveMessage;function AriaLiveMessage({rfId:K}){const J=useStore(selector$c);return Wt.createElement("div",{id:`${ARIA_LIVE_MESSAGE}-${K}`,"aria-live":"assertive","aria-atomic":"true",style:ariaLiveStyle},J)}function A11yDescriptions({rfId:K,disableKeyboardA11y:J}){return Wt.createElement(Wt.Fragment,null,Wt.createElement("div",{id:`${ARIA_NODE_DESC_KEY}-${K}`,style},"Press enter or space to select a node.",!J&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),Wt.createElement("div",{id:`${ARIA_EDGE_DESC_KEY}-${K}`,style},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!J&&Wt.createElement(AriaLiveMessage,{rfId:K}))}var useKeyPress=(K=null,J={actInsideInputWithModifier:!0})=>{const[ne,oe]=reactExports.useState(!1),ce=reactExports.useRef(!1),ue=reactExports.useRef(new Set([])),[Ae,pe]=reactExports.useMemo(()=>{if(K!==null){const me=(Array.isArray(K)?K:[K]).filter(ye=>typeof ye=="string").map(ye=>ye.split("+")),ge=me.reduce((ye,Se)=>ye.concat(...Se),[]);return[me,ge]}return[[],[]]},[K]);return reactExports.useEffect(()=>{const xe=typeof document<"u"?document:null,me=(J==null?void 0:J.target)||xe;if(K!==null){const ge=Te=>{if(ce.current=Te.ctrlKey||Te.metaKey||Te.shiftKey,(!ce.current||ce.current&&!J.actInsideInputWithModifier)&&isInputDOMNode(Te))return!1;const $e=useKeyOrCode(Te.code,pe);ue.current.add(Te[$e]),isMatchingKey(Ae,ue.current,!1)&&(Te.preventDefault(),oe(!0))},ye=Te=>{if((!ce.current||ce.current&&!J.actInsideInputWithModifier)&&isInputDOMNode(Te))return!1;const $e=useKeyOrCode(Te.code,pe);isMatchingKey(Ae,ue.current,!0)?(oe(!1),ue.current.clear()):ue.current.delete(Te[$e]),Te.key==="Meta"&&ue.current.clear(),ce.current=!1},Se=()=>{ue.current.clear(),oe(!1)};return me==null||me.addEventListener("keydown",ge),me==null||me.addEventListener("keyup",ye),window.addEventListener("blur",Se),()=>{me==null||me.removeEventListener("keydown",ge),me==null||me.removeEventListener("keyup",ye),window.removeEventListener("blur",Se)}}},[K,oe]),ne};function isMatchingKey(K,J,ne){return K.filter(oe=>ne||oe.length===J.size).some(oe=>oe.every(ce=>J.has(ce)))}function useKeyOrCode(K,J){return J.includes(K)?"code":"key"}function calculateXYZPosition(K,J,ne,oe){var pe,xe;const ce=K.parentNode||K.parentId;if(!ce)return ne;const ue=J.get(ce),Ae=getNodePositionWithOrigin(ue,oe);return calculateXYZPosition(ue,J,{x:(ne.x??0)+Ae.x,y:(ne.y??0)+Ae.y,z:(((pe=ue[internalsSymbol])==null?void 0:pe.z)??0)>(ne.z??0)?((xe=ue[internalsSymbol])==null?void 0:xe.z)??0:ne.z??0},oe)}function updateAbsoluteNodePositions(K,J,ne){K.forEach(oe=>{var ue;const ce=oe.parentNode||oe.parentId;if(ce&&!K.has(ce))throw new Error(`Parent node ${ce} not found`);if(ce||ne!=null&&ne[oe.id]){const{x:Ae,y:pe,z:xe}=calculateXYZPosition(oe,K,{...oe.position,z:((ue=oe[internalsSymbol])==null?void 0:ue.z)??0},J);oe.positionAbsolute={x:Ae,y:pe},oe[internalsSymbol].z=xe,ne!=null&&ne[oe.id]&&(oe[internalsSymbol].isParent=!0)}})}function createNodeInternals(K,J,ne,oe){const ce=new Map,ue={},Ae=oe?1e3:0;return K.forEach(pe=>{var Te;const xe=(isNumeric(pe.zIndex)?pe.zIndex:0)+(pe.selected?Ae:0),me=J.get(pe.id),ge={...pe,positionAbsolute:{x:pe.position.x,y:pe.position.y}},ye=pe.parentNode||pe.parentId;ye&&(ue[ye]=!0);const Se=(me==null?void 0:me.type)&&(me==null?void 0:me.type)!==pe.type;Object.defineProperty(ge,internalsSymbol,{enumerable:!1,value:{handleBounds:Se||(Te=me==null?void 0:me[internalsSymbol])==null?void 0:Te.handleBounds,z:xe}}),ce.set(pe.id,ge)}),updateAbsoluteNodePositions(ce,ne,ue),ce}function fitView(K,J={}){const{getNodes:ne,width:oe,height:ce,minZoom:ue,maxZoom:Ae,d3Zoom:pe,d3Selection:xe,fitViewOnInitDone:me,fitViewOnInit:ge,nodeOrigin:ye}=K(),Se=J.initial&&!me&&ge;if(pe&&xe&&(Se||!J.initial)){const Ne=ne().filter(ke=>{var Ke;const je=J.includeHiddenNodes?ke.width&&ke.height:!ke.hidden;return(Ke=J.nodes)!=null&&Ke.length?je&&J.nodes.some(Ye=>Ye.id===ke.id):je}),$e=Ne.every(ke=>ke.width&&ke.height);if(Ne.length>0&&$e){const ke=getNodesBounds(Ne,ye),{x:je,y:Ke,zoom:Ye}=getViewportForBounds(ke,oe,ce,J.minZoom??ue,J.maxZoom??Ae,J.padding??.1),ze=identity.translate(je,Ke).scale(Ye);return typeof J.duration=="number"&&J.duration>0?pe.transform(getD3Transition(xe,J.duration),ze):pe.transform(xe,ze),!0}}return!1}function handleControlledNodeSelectionChange(K,J){return K.forEach(ne=>{const oe=J.get(ne.id);oe&&J.set(oe.id,{...oe,[internalsSymbol]:oe[internalsSymbol],selected:ne.selected})}),new Map(J)}function handleControlledEdgeSelectionChange(K,J){return J.map(ne=>{const oe=K.find(ce=>ce.id===ne.id);return oe&&(ne.selected=oe.selected),ne})}function updateNodesAndEdgesSelections({changedNodes:K,changedEdges:J,get:ne,set:oe}){const{nodeInternals:ce,edges:ue,onNodesChange:Ae,onEdgesChange:pe,hasDefaultNodes:xe,hasDefaultEdges:me}=ne();K!=null&&K.length&&(xe&&oe({nodeInternals:handleControlledNodeSelectionChange(K,ce)}),Ae==null||Ae(K)),J!=null&&J.length&&(me&&oe({edges:handleControlledEdgeSelectionChange(J,ue)}),pe==null||pe(J))}const noop$1=()=>{},initialViewportHelper={zoomIn:noop$1,zoomOut:noop$1,zoomTo:noop$1,getZoom:()=>1,setViewport:noop$1,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:noop$1,fitBounds:noop$1,project:K=>K,screenToFlowPosition:K=>K,flowToScreenPosition:K=>K,viewportInitialized:!1},selector$b=K=>({d3Zoom:K.d3Zoom,d3Selection:K.d3Selection}),useViewportHelper=()=>{const K=useStoreApi(),{d3Zoom:J,d3Selection:ne}=useStore(selector$b,shallow$1);return reactExports.useMemo(()=>ne&&J?{zoomIn:ce=>J.scaleBy(getD3Transition(ne,ce==null?void 0:ce.duration),1.2),zoomOut:ce=>J.scaleBy(getD3Transition(ne,ce==null?void 0:ce.duration),1/1.2),zoomTo:(ce,ue)=>J.scaleTo(getD3Transition(ne,ue==null?void 0:ue.duration),ce),getZoom:()=>K.getState().transform[2],setViewport:(ce,ue)=>{const[Ae,pe,xe]=K.getState().transform,me=identity.translate(ce.x??Ae,ce.y??pe).scale(ce.zoom??xe);J.transform(getD3Transition(ne,ue==null?void 0:ue.duration),me)},getViewport:()=>{const[ce,ue,Ae]=K.getState().transform;return{x:ce,y:ue,zoom:Ae}},fitView:ce=>fitView(K.getState,ce),setCenter:(ce,ue,Ae)=>{const{width:pe,height:xe,maxZoom:me}=K.getState(),ge=typeof(Ae==null?void 0:Ae.zoom)<"u"?Ae.zoom:me,ye=pe/2-ce*ge,Se=xe/2-ue*ge,Te=identity.translate(ye,Se).scale(ge);J.transform(getD3Transition(ne,Ae==null?void 0:Ae.duration),Te)},fitBounds:(ce,ue)=>{const{width:Ae,height:pe,minZoom:xe,maxZoom:me}=K.getState(),{x:ge,y:ye,zoom:Se}=getViewportForBounds(ce,Ae,pe,xe,me,(ue==null?void 0:ue.padding)??.1),Te=identity.translate(ge,ye).scale(Se);J.transform(getD3Transition(ne,ue==null?void 0:ue.duration),Te)},project:ce=>{const{transform:ue,snapToGrid:Ae,snapGrid:pe}=K.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),pointToRendererPoint(ce,ue,Ae,pe)},screenToFlowPosition:ce=>{const{transform:ue,snapToGrid:Ae,snapGrid:pe,domNode:xe}=K.getState();if(!xe)return ce;const{x:me,y:ge}=xe.getBoundingClientRect(),ye={x:ce.x-me,y:ce.y-ge};return pointToRendererPoint(ye,ue,Ae,pe)},flowToScreenPosition:ce=>{const{transform:ue,domNode:Ae}=K.getState();if(!Ae)return ce;const{x:pe,y:xe}=Ae.getBoundingClientRect(),me=rendererPointToPoint(ce,ue);return{x:me.x+pe,y:me.y+xe}},viewportInitialized:!0}:initialViewportHelper,[J,ne])};function useReactFlow(){const K=useViewportHelper(),J=useStoreApi(),ne=reactExports.useCallback(()=>J.getState().getNodes().map($e=>({...$e})),[]),oe=reactExports.useCallback($e=>J.getState().nodeInternals.get($e),[]),ce=reactExports.useCallback(()=>{const{edges:$e=[]}=J.getState();return $e.map(ke=>({...ke}))},[]),ue=reactExports.useCallback($e=>{const{edges:ke=[]}=J.getState();return ke.find(je=>je.id===$e)},[]),Ae=reactExports.useCallback($e=>{const{getNodes:ke,setNodes:je,hasDefaultNodes:Ke,onNodesChange:Ye}=J.getState(),ze=ke(),Xe=typeof $e=="function"?$e(ze):$e;if(Ke)je(Xe);else if(Ye){const Je=Xe.length===0?ze.map(rt=>({type:"remove",id:rt.id})):Xe.map(rt=>({item:rt,type:"reset"}));Ye(Je)}},[]),pe=reactExports.useCallback($e=>{const{edges:ke=[],setEdges:je,hasDefaultEdges:Ke,onEdgesChange:Ye}=J.getState(),ze=typeof $e=="function"?$e(ke):$e;if(Ke)je(ze);else if(Ye){const Xe=ze.length===0?ke.map(Je=>({type:"remove",id:Je.id})):ze.map(Je=>({item:Je,type:"reset"}));Ye(Xe)}},[]),xe=reactExports.useCallback($e=>{const ke=Array.isArray($e)?$e:[$e],{getNodes:je,setNodes:Ke,hasDefaultNodes:Ye,onNodesChange:ze}=J.getState();if(Ye){const Je=[...je(),...ke];Ke(Je)}else if(ze){const Xe=ke.map(Je=>({item:Je,type:"add"}));ze(Xe)}},[]),me=reactExports.useCallback($e=>{const ke=Array.isArray($e)?$e:[$e],{edges:je=[],setEdges:Ke,hasDefaultEdges:Ye,onEdgesChange:ze}=J.getState();if(Ye)Ke([...je,...ke]);else if(ze){const Xe=ke.map(Je=>({item:Je,type:"add"}));ze(Xe)}},[]),ge=reactExports.useCallback(()=>{const{getNodes:$e,edges:ke=[],transform:je}=J.getState(),[Ke,Ye,ze]=je;return{nodes:$e().map(Xe=>({...Xe})),edges:ke.map(Xe=>({...Xe})),viewport:{x:Ke,y:Ye,zoom:ze}}},[]),ye=reactExports.useCallback(({nodes:$e,edges:ke})=>{const{nodeInternals:je,getNodes:Ke,edges:Ye,hasDefaultNodes:ze,hasDefaultEdges:Xe,onNodesDelete:Je,onEdgesDelete:rt,onNodesChange:Ze,onEdgesChange:et}=J.getState(),nt=($e||[]).map(Ie=>Ie.id),Ge=(ke||[]).map(Ie=>Ie.id),ve=Ke().reduce((Ie,Fe)=>{const qe=Fe.parentNode||Fe.parentId,We=!nt.includes(Fe.id)&&qe&&Ie.find(_e=>_e.id===qe);return(typeof Fe.deletable=="boolean"?Fe.deletable:!0)&&(nt.includes(Fe.id)||We)&&Ie.push(Fe),Ie},[]),Be=Ye.filter(Ie=>typeof Ie.deletable=="boolean"?Ie.deletable:!0),Re=Be.filter(Ie=>Ge.includes(Ie.id));if(ve||Re){const Ie=getConnectedEdges(ve,Be),Fe=[...Re,...Ie],qe=Fe.reduce((We,Ue)=>(We.includes(Ue.id)||We.push(Ue.id),We),[]);if((Xe||ze)&&(Xe&&J.setState({edges:Ye.filter(We=>!qe.includes(We.id))}),ze&&(ve.forEach(We=>{je.delete(We.id)}),J.setState({nodeInternals:new Map(je)}))),qe.length>0&&(rt==null||rt(Fe),et&&et(qe.map(We=>({id:We,type:"remove"})))),ve.length>0&&(Je==null||Je(ve),Ze)){const We=ve.map(Ue=>({id:Ue.id,type:"remove"}));Ze(We)}}},[]),Se=reactExports.useCallback($e=>{const ke=isRectObject($e),je=ke?null:J.getState().nodeInternals.get($e.id);return!ke&&!je?[null,null,ke]:[ke?$e:nodeToRect(je),je,ke]},[]),Te=reactExports.useCallback(($e,ke=!0,je)=>{const[Ke,Ye,ze]=Se($e);return Ke?(je||J.getState().getNodes()).filter(Xe=>{if(!ze&&(Xe.id===Ye.id||!Xe.positionAbsolute))return!1;const Je=nodeToRect(Xe),rt=getOverlappingArea(Je,Ke);return ke&&rt>0||rt>=Ke.width*Ke.height}):[]},[]),Ne=reactExports.useCallback(($e,ke,je=!0)=>{const[Ke]=Se($e);if(!Ke)return!1;const Ye=getOverlappingArea(Ke,ke);return je&&Ye>0||Ye>=Ke.width*Ke.height},[]);return reactExports.useMemo(()=>({...K,getNodes:ne,getNode:oe,getEdges:ce,getEdge:ue,setNodes:Ae,setEdges:pe,addNodes:xe,addEdges:me,toObject:ge,deleteElements:ye,getIntersectingNodes:Te,isNodeIntersecting:Ne}),[K,ne,oe,ce,ue,Ae,pe,xe,me,ge,ye,Te,Ne])}const deleteKeyOptions={actInsideInputWithModifier:!1};var useGlobalKeyHandler=({deleteKeyCode:K,multiSelectionKeyCode:J})=>{const ne=useStoreApi(),{deleteElements:oe}=useReactFlow(),ce=useKeyPress(K,deleteKeyOptions),ue=useKeyPress(J);reactExports.useEffect(()=>{if(ce){const{edges:Ae,getNodes:pe}=ne.getState(),xe=pe().filter(ge=>ge.selected),me=Ae.filter(ge=>ge.selected);oe({nodes:xe,edges:me}),ne.setState({nodesSelectionActive:!1})}},[ce]),reactExports.useEffect(()=>{ne.setState({multiSelectionActive:ue})},[ue])};function useResizeHandler(K){const J=useStoreApi();reactExports.useEffect(()=>{let ne;const oe=()=>{var ue,Ae;if(!K.current)return;const ce=getDimensions(K.current);(ce.height===0||ce.width===0)&&((Ae=(ue=J.getState()).onError)==null||Ae.call(ue,"004",errorMessages.error004())),J.setState({width:ce.width||500,height:ce.height||500})};return oe(),window.addEventListener("resize",oe),K.current&&(ne=new ResizeObserver(()=>oe()),ne.observe(K.current)),()=>{window.removeEventListener("resize",oe),ne&&K.current&&ne.unobserve(K.current)}},[])}const containerStyle={position:"absolute",width:"100%",height:"100%",top:0,left:0},viewChanged=(K,J)=>K.x!==J.x||K.y!==J.y||K.zoom!==J.k,eventToFlowTransform=K=>({x:K.x,y:K.y,zoom:K.k}),isWrappedWithClass=(K,J)=>K.target.closest(`.${J}`),isRightClickPan=(K,J)=>J===2&&Array.isArray(K)&&K.includes(2),wheelDelta=K=>{const J=K.ctrlKey&&isMacOs()?10:1;return-K.deltaY*(K.deltaMode===1?.05:K.deltaMode?1:.002)*J},selector$a=K=>({d3Zoom:K.d3Zoom,d3Selection:K.d3Selection,d3ZoomHandler:K.d3ZoomHandler,userSelectionActive:K.userSelectionActive}),ZoomPane=({onMove:K,onMoveStart:J,onMoveEnd:ne,onPaneContextMenu:oe,zoomOnScroll:ce=!0,zoomOnPinch:ue=!0,panOnScroll:Ae=!1,panOnScrollSpeed:pe=.5,panOnScrollMode:xe=PanOnScrollMode.Free,zoomOnDoubleClick:me=!0,elementsSelectable:ge,panOnDrag:ye=!0,defaultViewport:Se,translateExtent:Te,minZoom:Ne,maxZoom:$e,zoomActivationKeyCode:ke,preventScrolling:je=!0,children:Ke,noWheelClassName:Ye,noPanClassName:ze})=>{const Xe=reactExports.useRef(),Je=useStoreApi(),rt=reactExports.useRef(!1),Ze=reactExports.useRef(!1),et=reactExports.useRef(null),nt=reactExports.useRef({x:0,y:0,zoom:0}),{d3Zoom:Ge,d3Selection:ve,d3ZoomHandler:Be,userSelectionActive:Re}=useStore(selector$a,shallow$1),Ie=useKeyPress(ke),Fe=reactExports.useRef(0),qe=reactExports.useRef(!1),We=reactExports.useRef();return useResizeHandler(et),reactExports.useEffect(()=>{if(et.current){const Ue=et.current.getBoundingClientRect(),_e=zoom().scaleExtent([Ne,$e]).translateExtent(Te),Qe=select$3(et.current).call(_e),tt=identity.translate(Se.x,Se.y).scale(clamp(Se.zoom,Ne,$e)),it=[[0,0],[Ue.width,Ue.height]],at=_e.constrain()(tt,it,Te);_e.transform(Qe,at),_e.wheelDelta(wheelDelta),Je.setState({d3Zoom:_e,d3Selection:Qe,d3ZoomHandler:Qe.on("wheel.zoom"),transform:[at.x,at.y,at.k],domNode:et.current.closest(".react-flow")})}},[]),reactExports.useEffect(()=>{ve&&Ge&&(Ae&&!Ie&&!Re?ve.on("wheel.zoom",Ue=>{if(isWrappedWithClass(Ue,Ye))return!1;Ue.preventDefault(),Ue.stopImmediatePropagation();const _e=ve.property("__zoom").k||1;if(Ue.ctrlKey&&ue){const ut=pointer(Ue),ft=wheelDelta(Ue),dt=_e*Math.pow(2,ft);Ge.scaleTo(ve,dt,ut,Ue);return}const Qe=Ue.deltaMode===1?20:1;let tt=xe===PanOnScrollMode.Vertical?0:Ue.deltaX*Qe,it=xe===PanOnScrollMode.Horizontal?0:Ue.deltaY*Qe;!isMacOs()&&Ue.shiftKey&&xe!==PanOnScrollMode.Vertical&&(tt=Ue.deltaY*Qe,it=0),Ge.translateBy(ve,-(tt/_e)*pe,-(it/_e)*pe,{internal:!0});const at=eventToFlowTransform(ve.property("__zoom")),{onViewportChangeStart:ot,onViewportChange:lt,onViewportChangeEnd:st}=Je.getState();clearTimeout(We.current),qe.current||(qe.current=!0,J==null||J(Ue,at),ot==null||ot(at)),qe.current&&(K==null||K(Ue,at),lt==null||lt(at),We.current=setTimeout(()=>{ne==null||ne(Ue,at),st==null||st(at),qe.current=!1},150))},{passive:!1}):typeof Be<"u"&&ve.on("wheel.zoom",function(Ue,_e){if(!je&&Ue.type==="wheel"&&!Ue.ctrlKey||isWrappedWithClass(Ue,Ye))return null;Ue.preventDefault(),Be.call(this,Ue,_e)},{passive:!1}))},[Re,Ae,xe,ve,Ge,Be,Ie,ue,je,Ye,J,K,ne]),reactExports.useEffect(()=>{Ge&&Ge.on("start",Ue=>{var tt,it;if(!Ue.sourceEvent||Ue.sourceEvent.internal)return null;Fe.current=(tt=Ue.sourceEvent)==null?void 0:tt.button;const{onViewportChangeStart:_e}=Je.getState(),Qe=eventToFlowTransform(Ue.transform);rt.current=!0,nt.current=Qe,((it=Ue.sourceEvent)==null?void 0:it.type)==="mousedown"&&Je.setState({paneDragging:!0}),_e==null||_e(Qe),J==null||J(Ue.sourceEvent,Qe)})},[Ge,J]),reactExports.useEffect(()=>{Ge&&(Re&&!rt.current?Ge.on("zoom",null):Re||Ge.on("zoom",Ue=>{var Qe;const{onViewportChange:_e}=Je.getState();if(Je.setState({transform:[Ue.transform.x,Ue.transform.y,Ue.transform.k]}),Ze.current=!!(oe&&isRightClickPan(ye,Fe.current??0)),(K||_e)&&!((Qe=Ue.sourceEvent)!=null&&Qe.internal)){const tt=eventToFlowTransform(Ue.transform);_e==null||_e(tt),K==null||K(Ue.sourceEvent,tt)}}))},[Re,Ge,K,ye,oe]),reactExports.useEffect(()=>{Ge&&Ge.on("end",Ue=>{if(!Ue.sourceEvent||Ue.sourceEvent.internal)return null;const{onViewportChangeEnd:_e}=Je.getState();if(rt.current=!1,Je.setState({paneDragging:!1}),oe&&isRightClickPan(ye,Fe.current??0)&&!Ze.current&&oe(Ue.sourceEvent),Ze.current=!1,(ne||_e)&&viewChanged(nt.current,Ue.transform)){const Qe=eventToFlowTransform(Ue.transform);nt.current=Qe,clearTimeout(Xe.current),Xe.current=setTimeout(()=>{_e==null||_e(Qe),ne==null||ne(Ue.sourceEvent,Qe)},Ae?150:0)}})},[Ge,Ae,ye,ne,oe]),reactExports.useEffect(()=>{Ge&&Ge.filter(Ue=>{const _e=Ie||ce,Qe=ue&&Ue.ctrlKey;if((ye===!0||Array.isArray(ye)&&ye.includes(1))&&Ue.button===1&&Ue.type==="mousedown"&&(isWrappedWithClass(Ue,"react-flow__node")||isWrappedWithClass(Ue,"react-flow__edge")))return!0;if(!ye&&!_e&&!Ae&&!me&&!ue||Re||!me&&Ue.type==="dblclick"||isWrappedWithClass(Ue,Ye)&&Ue.type==="wheel"||isWrappedWithClass(Ue,ze)&&(Ue.type!=="wheel"||Ae&&Ue.type==="wheel"&&!Ie)||!ue&&Ue.ctrlKey&&Ue.type==="wheel"||!_e&&!Ae&&!Qe&&Ue.type==="wheel"||!ye&&(Ue.type==="mousedown"||Ue.type==="touchstart")||Array.isArray(ye)&&!ye.includes(Ue.button)&&Ue.type==="mousedown")return!1;const tt=Array.isArray(ye)&&ye.includes(Ue.button)||!Ue.button||Ue.button<=1;return(!Ue.ctrlKey||Ue.type==="wheel")&&tt})},[Re,Ge,ce,ue,Ae,me,ye,ge,Ie]),Wt.createElement("div",{className:"react-flow__renderer",ref:et,style:containerStyle},Ke)},selector$9=K=>({userSelectionActive:K.userSelectionActive,userSelectionRect:K.userSelectionRect});function UserSelection(){const{userSelectionActive:K,userSelectionRect:J}=useStore(selector$9,shallow$1);return K&&J?Wt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:J.width,height:J.height,transform:`translate(${J.x}px, ${J.y}px)`}}):null}function handleParentExpand(K,J){const ne=J.parentNode||J.parentId,oe=K.find(ce=>ce.id===ne);if(oe){const ce=J.position.x+J.width-oe.width,ue=J.position.y+J.height-oe.height;if(ce>0||ue>0||J.position.x<0||J.position.y<0){if(oe.style={...oe.style},oe.style.width=oe.style.width??oe.width,oe.style.height=oe.style.height??oe.height,ce>0&&(oe.style.width+=ce),ue>0&&(oe.style.height+=ue),J.position.x<0){const Ae=Math.abs(J.position.x);oe.position.x=oe.position.x-Ae,oe.style.width+=Ae,J.position.x=0}if(J.position.y<0){const Ae=Math.abs(J.position.y);oe.position.y=oe.position.y-Ae,oe.style.height+=Ae,J.position.y=0}oe.width=oe.style.width,oe.height=oe.style.height}}}function applyChanges(K,J){if(K.some(oe=>oe.type==="reset"))return K.filter(oe=>oe.type==="reset").map(oe=>oe.item);const ne=K.filter(oe=>oe.type==="add").map(oe=>oe.item);return J.reduce((oe,ce)=>{const ue=K.filter(pe=>pe.id===ce.id);if(ue.length===0)return oe.push(ce),oe;const Ae={...ce};for(const pe of ue)if(pe)switch(pe.type){case"select":{Ae.selected=pe.selected;break}case"position":{typeof pe.position<"u"&&(Ae.position=pe.position),typeof pe.positionAbsolute<"u"&&(Ae.positionAbsolute=pe.positionAbsolute),typeof pe.dragging<"u"&&(Ae.dragging=pe.dragging),Ae.expandParent&&handleParentExpand(oe,Ae);break}case"dimensions":{typeof pe.dimensions<"u"&&(Ae.width=pe.dimensions.width,Ae.height=pe.dimensions.height),typeof pe.updateStyle<"u"&&(Ae.style={...Ae.style||{},...pe.dimensions}),typeof pe.resizing=="boolean"&&(Ae.resizing=pe.resizing),Ae.expandParent&&handleParentExpand(oe,Ae);break}case"remove":return oe}return oe.push(Ae),oe},ne)}function applyNodeChanges(K,J){return applyChanges(K,J)}function applyEdgeChanges(K,J){return applyChanges(K,J)}const createSelectionChange=(K,J)=>({id:K,type:"select",selected:J});function getSelectionChanges(K,J){return K.reduce((ne,oe)=>{const ce=J.includes(oe.id);return!oe.selected&&ce?(oe.selected=!0,ne.push(createSelectionChange(oe.id,!0))):oe.selected&&!ce&&(oe.selected=!1,ne.push(createSelectionChange(oe.id,!1))),ne},[])}const wrapHandler=(K,J)=>ne=>{ne.target===J.current&&(K==null||K(ne))},selector$8=K=>({userSelectionActive:K.userSelectionActive,elementsSelectable:K.elementsSelectable,dragging:K.paneDragging}),Pane=reactExports.memo(({isSelecting:K,selectionMode:J=SelectionMode.Full,panOnDrag:ne,onSelectionStart:oe,onSelectionEnd:ce,onPaneClick:ue,onPaneContextMenu:Ae,onPaneScroll:pe,onPaneMouseEnter:xe,onPaneMouseMove:me,onPaneMouseLeave:ge,children:ye})=>{const Se=reactExports.useRef(null),Te=useStoreApi(),Ne=reactExports.useRef(0),$e=reactExports.useRef(0),ke=reactExports.useRef(),{userSelectionActive:je,elementsSelectable:Ke,dragging:Ye}=useStore(selector$8,shallow$1),ze=()=>{Te.setState({userSelectionActive:!1,userSelectionRect:null}),Ne.current=0,$e.current=0},Xe=Be=>{ue==null||ue(Be),Te.getState().resetSelectedElements(),Te.setState({nodesSelectionActive:!1})},Je=Be=>{if(Array.isArray(ne)&&(ne!=null&&ne.includes(2))){Be.preventDefault();return}Ae==null||Ae(Be)},rt=pe?Be=>pe(Be):void 0,Ze=Be=>{const{resetSelectedElements:Re,domNode:Ie}=Te.getState();if(ke.current=Ie==null?void 0:Ie.getBoundingClientRect(),!Ke||!K||Be.button!==0||Be.target!==Se.current||!ke.current)return;const{x:Fe,y:qe}=getEventPosition(Be,ke.current);Re(),Te.setState({userSelectionRect:{width:0,height:0,startX:Fe,startY:qe,x:Fe,y:qe}}),oe==null||oe(Be)},et=Be=>{const{userSelectionRect:Re,nodeInternals:Ie,edges:Fe,transform:qe,onNodesChange:We,onEdgesChange:Ue,nodeOrigin:_e,getNodes:Qe}=Te.getState();if(!K||!ke.current||!Re)return;Te.setState({userSelectionActive:!0,nodesSelectionActive:!1});const tt=getEventPosition(Be,ke.current),it=Re.startX??0,at=Re.startY??0,ot={...Re,x:tt.x<it?tt.x:it,y:tt.y<at?tt.y:at,width:Math.abs(tt.x-it),height:Math.abs(tt.y-at)},lt=Qe(),st=getNodesInside(Ie,ot,qe,J===SelectionMode.Partial,!0,_e),ut=getConnectedEdges(st,Fe).map(dt=>dt.id),ft=st.map(dt=>dt.id);if(Ne.current!==ft.length){Ne.current=ft.length;const dt=getSelectionChanges(lt,ft);dt.length&&(We==null||We(dt))}if($e.current!==ut.length){$e.current=ut.length;const dt=getSelectionChanges(Fe,ut);dt.length&&(Ue==null||Ue(dt))}Te.setState({userSelectionRect:ot})},nt=Be=>{if(Be.button!==0)return;const{userSelectionRect:Re}=Te.getState();!je&&Re&&Be.target===Se.current&&(Xe==null||Xe(Be)),Te.setState({nodesSelectionActive:Ne.current>0}),ze(),ce==null||ce(Be)},Ge=Be=>{je&&(Te.setState({nodesSelectionActive:Ne.current>0}),ce==null||ce(Be)),ze()},ve=Ke&&(K||je);return Wt.createElement("div",{className:cc(["react-flow__pane",{dragging:Ye,selection:K}]),onClick:ve?void 0:wrapHandler(Xe,Se),onContextMenu:wrapHandler(Je,Se),onWheel:wrapHandler(rt,Se),onMouseEnter:ve?void 0:xe,onMouseDown:ve?Ze:void 0,onMouseMove:ve?et:me,onMouseUp:ve?nt:void 0,onMouseLeave:ve?Ge:ge,ref:Se,style:containerStyle},ye,Wt.createElement(UserSelection,null))});Pane.displayName="Pane";function isParentSelected(K,J){const ne=K.parentNode||K.parentId;if(!ne)return!1;const oe=J.get(ne);return oe?oe.selected?!0:isParentSelected(oe,J):!1}function hasSelector(K,J,ne){let oe=K;do{if(oe!=null&&oe.matches(J))return!0;if(oe===ne.current)return!1;oe=oe.parentElement}while(oe);return!1}function getDragItems(K,J,ne,oe){return Array.from(K.values()).filter(ce=>(ce.selected||ce.id===oe)&&(!ce.parentNode||ce.parentId||!isParentSelected(ce,K))&&(ce.draggable||J&&typeof ce.draggable>"u")).map(ce=>{var ue,Ae;return{id:ce.id,position:ce.position||{x:0,y:0},positionAbsolute:ce.positionAbsolute||{x:0,y:0},distance:{x:ne.x-(((ue=ce.positionAbsolute)==null?void 0:ue.x)??0),y:ne.y-(((Ae=ce.positionAbsolute)==null?void 0:Ae.y)??0)},delta:{x:0,y:0},extent:ce.extent,parentNode:ce.parentNode||ce.parentId,parentId:ce.parentNode||ce.parentId,width:ce.width,height:ce.height,expandParent:ce.expandParent}})}function clampNodeExtent(K,J){return!J||J==="parent"?J:[J[0],[J[1][0]-(K.width||0),J[1][1]-(K.height||0)]]}function calcNextPosition(K,J,ne,oe,ce=[0,0],ue){const Ae=clampNodeExtent(K,K.extent||oe);let pe=Ae;const xe=K.parentNode||K.parentId;if(K.extent==="parent"&&!K.expandParent)if(xe&&K.width&&K.height){const ye=ne.get(xe),{x:Se,y:Te}=getNodePositionWithOrigin(ye,ce).positionAbsolute;pe=ye&&isNumeric(Se)&&isNumeric(Te)&&isNumeric(ye.width)&&isNumeric(ye.height)?[[Se+K.width*ce[0],Te+K.height*ce[1]],[Se+ye.width-K.width+K.width*ce[0],Te+ye.height-K.height+K.height*ce[1]]]:pe}else ue==null||ue("005",errorMessages.error005()),pe=Ae;else if(K.extent&&xe&&K.extent!=="parent"){const ye=ne.get(xe),{x:Se,y:Te}=getNodePositionWithOrigin(ye,ce).positionAbsolute;pe=[[K.extent[0][0]+Se,K.extent[0][1]+Te],[K.extent[1][0]+Se,K.extent[1][1]+Te]]}let me={x:0,y:0};if(xe){const ye=ne.get(xe);me=getNodePositionWithOrigin(ye,ce).positionAbsolute}const ge=pe&&pe!=="parent"?clampPosition(J,pe):J;return{position:{x:ge.x-me.x,y:ge.y-me.y},positionAbsolute:ge}}function getEventHandlerParams({nodeId:K,dragItems:J,nodeInternals:ne}){const oe=J.map(ce=>({...ne.get(ce.id),position:ce.position,positionAbsolute:ce.positionAbsolute}));return[K?oe.find(ce=>ce.id===K):oe[0],oe]}const getHandleBounds=(K,J,ne,oe)=>{const ce=J.querySelectorAll(K);if(!ce||!ce.length)return null;const ue=Array.from(ce),Ae=J.getBoundingClientRect(),pe={x:Ae.width*oe[0],y:Ae.height*oe[1]};return ue.map(xe=>{const me=xe.getBoundingClientRect();return{id:xe.getAttribute("data-handleid"),position:xe.getAttribute("data-handlepos"),x:(me.left-Ae.left-pe.x)/ne,y:(me.top-Ae.top-pe.y)/ne,...getDimensions(xe)}})};function getMouseHandler(K,J,ne){return ne===void 0?ne:oe=>{const ce=J().nodeInternals.get(K);ce&&ne(oe,{...ce})}}function handleNodeClick({id:K,store:J,unselect:ne=!1,nodeRef:oe}){const{addSelectedNodes:ce,unselectNodesAndEdges:ue,multiSelectionActive:Ae,nodeInternals:pe,onError:xe}=J.getState(),me=pe.get(K);if(!me){xe==null||xe("012",errorMessages.error012(K));return}J.setState({nodesSelectionActive:!1}),me.selected?(ne||me.selected&&Ae)&&(ue({nodes:[me],edges:[]}),requestAnimationFrame(()=>{var ge;return(ge=oe==null?void 0:oe.current)==null?void 0:ge.blur()})):ce([K])}function useGetPointerPosition(){const K=useStoreApi();return reactExports.useCallback(({sourceEvent:ne})=>{const{transform:oe,snapGrid:ce,snapToGrid:ue}=K.getState(),Ae=ne.touches?ne.touches[0].clientX:ne.clientX,pe=ne.touches?ne.touches[0].clientY:ne.clientY,xe={x:(Ae-oe[0])/oe[2],y:(pe-oe[1])/oe[2]};return{xSnapped:ue?ce[0]*Math.round(xe.x/ce[0]):xe.x,ySnapped:ue?ce[1]*Math.round(xe.y/ce[1]):xe.y,...xe}},[])}function wrapSelectionDragFunc(K){return(J,ne,oe)=>K==null?void 0:K(J,oe)}function useDrag({nodeRef:K,disabled:J=!1,noDragClassName:ne,handleSelector:oe,nodeId:ce,isSelectable:ue,selectNodesOnDrag:Ae}){const pe=useStoreApi(),[xe,me]=reactExports.useState(!1),ge=reactExports.useRef([]),ye=reactExports.useRef({x:null,y:null}),Se=reactExports.useRef(0),Te=reactExports.useRef(null),Ne=reactExports.useRef({x:0,y:0}),$e=reactExports.useRef(null),ke=reactExports.useRef(!1),je=reactExports.useRef(!1),Ke=reactExports.useRef(!1),Ye=useGetPointerPosition();return reactExports.useEffect(()=>{if(K!=null&&K.current){const ze=select$3(K.current),Xe=({x:Ze,y:et})=>{const{nodeInternals:nt,onNodeDrag:Ge,onSelectionDrag:ve,updateNodePositions:Be,nodeExtent:Re,snapGrid:Ie,snapToGrid:Fe,nodeOrigin:qe,onError:We}=pe.getState();ye.current={x:Ze,y:et};let Ue=!1,_e={x:0,y:0,x2:0,y2:0};if(ge.current.length>1&&Re){const tt=getNodesBounds(ge.current,qe);_e=rectToBox(tt)}if(ge.current=ge.current.map(tt=>{const it={x:Ze-tt.distance.x,y:et-tt.distance.y};Fe&&(it.x=Ie[0]*Math.round(it.x/Ie[0]),it.y=Ie[1]*Math.round(it.y/Ie[1]));const at=[[Re[0][0],Re[0][1]],[Re[1][0],Re[1][1]]];ge.current.length>1&&Re&&!tt.extent&&(at[0][0]=tt.positionAbsolute.x-_e.x+Re[0][0],at[1][0]=tt.positionAbsolute.x+(tt.width??0)-_e.x2+Re[1][0],at[0][1]=tt.positionAbsolute.y-_e.y+Re[0][1],at[1][1]=tt.positionAbsolute.y+(tt.height??0)-_e.y2+Re[1][1]);const ot=calcNextPosition(tt,it,nt,at,qe,We);return Ue=Ue||tt.position.x!==ot.position.x||tt.position.y!==ot.position.y,tt.position=ot.position,tt.positionAbsolute=ot.positionAbsolute,tt}),!Ue)return;Be(ge.current,!0,!0),me(!0);const Qe=ce?Ge:wrapSelectionDragFunc(ve);if(Qe&&$e.current){const[tt,it]=getEventHandlerParams({nodeId:ce,dragItems:ge.current,nodeInternals:nt});Qe($e.current,tt,it)}},Je=()=>{if(!Te.current)return;const[Ze,et]=calcAutoPan(Ne.current,Te.current);if(Ze!==0||et!==0){const{transform:nt,panBy:Ge}=pe.getState();ye.current.x=(ye.current.x??0)-Ze/nt[2],ye.current.y=(ye.current.y??0)-et/nt[2],Ge({x:Ze,y:et})&&Xe(ye.current)}Se.current=requestAnimationFrame(Je)},rt=Ze=>{var qe;const{nodeInternals:et,multiSelectionActive:nt,nodesDraggable:Ge,unselectNodesAndEdges:ve,onNodeDragStart:Be,onSelectionDragStart:Re}=pe.getState();je.current=!0;const Ie=ce?Be:wrapSelectionDragFunc(Re);(!Ae||!ue)&&!nt&&ce&&((qe=et.get(ce))!=null&&qe.selected||ve()),ce&&ue&&Ae&&handleNodeClick({id:ce,store:pe,nodeRef:K});const Fe=Ye(Ze);if(ye.current=Fe,ge.current=getDragItems(et,Ge,Fe,ce),Ie&&ge.current){const[We,Ue]=getEventHandlerParams({nodeId:ce,dragItems:ge.current,nodeInternals:et});Ie(Ze.sourceEvent,We,Ue)}};if(J)ze.on(".drag",null);else{const Ze=drag().on("start",et=>{const{domNode:nt,nodeDragThreshold:Ge}=pe.getState();Ge===0&&rt(et),Ke.current=!1;const ve=Ye(et);ye.current=ve,Te.current=(nt==null?void 0:nt.getBoundingClientRect())||null,Ne.current=getEventPosition(et.sourceEvent,Te.current)}).on("drag",et=>{var Be,Re;const nt=Ye(et),{autoPanOnNodeDrag:Ge,nodeDragThreshold:ve}=pe.getState();if(et.sourceEvent.type==="touchmove"&&et.sourceEvent.touches.length>1&&(Ke.current=!0),!Ke.current){if(!ke.current&&je.current&&Ge&&(ke.current=!0,Je()),!je.current){const Ie=nt.xSnapped-(((Be=ye==null?void 0:ye.current)==null?void 0:Be.x)??0),Fe=nt.ySnapped-(((Re=ye==null?void 0:ye.current)==null?void 0:Re.y)??0);Math.sqrt(Ie*Ie+Fe*Fe)>ve&&rt(et)}(ye.current.x!==nt.xSnapped||ye.current.y!==nt.ySnapped)&&ge.current&&je.current&&($e.current=et.sourceEvent,Ne.current=getEventPosition(et.sourceEvent,Te.current),Xe(nt))}}).on("end",et=>{if(!(!je.current||Ke.current)&&(me(!1),ke.current=!1,je.current=!1,cancelAnimationFrame(Se.current),ge.current)){const{updateNodePositions:nt,nodeInternals:Ge,onNodeDragStop:ve,onSelectionDragStop:Be}=pe.getState(),Re=ce?ve:wrapSelectionDragFunc(Be);if(nt(ge.current,!1,!1),Re){const[Ie,Fe]=getEventHandlerParams({nodeId:ce,dragItems:ge.current,nodeInternals:Ge});Re(et.sourceEvent,Ie,Fe)}}}).filter(et=>{const nt=et.target;return!et.button&&(!ne||!hasSelector(nt,`.${ne}`,K))&&(!oe||hasSelector(nt,oe,K))});return ze.call(Ze),()=>{ze.on(".drag",null)}}}},[K,J,ne,oe,ue,pe,ce,Ae,Ye]),xe}function useUpdateNodePositions(){const K=useStoreApi();return reactExports.useCallback(ne=>{const{nodeInternals:oe,nodeExtent:ce,updateNodePositions:ue,getNodes:Ae,snapToGrid:pe,snapGrid:xe,onError:me,nodesDraggable:ge}=K.getState(),ye=Ae().filter(Ke=>Ke.selected&&(Ke.draggable||ge&&typeof Ke.draggable>"u")),Se=pe?xe[0]:5,Te=pe?xe[1]:5,Ne=ne.isShiftPressed?4:1,$e=ne.x*Se*Ne,ke=ne.y*Te*Ne,je=ye.map(Ke=>{if(Ke.positionAbsolute){const Ye={x:Ke.positionAbsolute.x+$e,y:Ke.positionAbsolute.y+ke};pe&&(Ye.x=xe[0]*Math.round(Ye.x/xe[0]),Ye.y=xe[1]*Math.round(Ye.y/xe[1]));const{positionAbsolute:ze,position:Xe}=calcNextPosition(Ke,Ye,oe,ce,void 0,me);Ke.position=Xe,Ke.positionAbsolute=ze}return Ke});ue(je,!0,!1)},[])}const arrowKeyDiffs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var wrapNode=K=>{const J=({id:ne,type:oe,data:ce,xPos:ue,yPos:Ae,xPosOrigin:pe,yPosOrigin:xe,selected:me,onClick:ge,onMouseEnter:ye,onMouseMove:Se,onMouseLeave:Te,onContextMenu:Ne,onDoubleClick:$e,style:ke,className:je,isDraggable:Ke,isSelectable:Ye,isConnectable:ze,isFocusable:Xe,selectNodesOnDrag:Je,sourcePosition:rt,targetPosition:Ze,hidden:et,resizeObserver:nt,dragHandle:Ge,zIndex:ve,isParent:Be,noDragClassName:Re,noPanClassName:Ie,initialized:Fe,disableKeyboardA11y:qe,ariaLabel:We,rfId:Ue,hasHandleBounds:_e})=>{const Qe=useStoreApi(),tt=reactExports.useRef(null),it=reactExports.useRef(null),at=reactExports.useRef(rt),ot=reactExports.useRef(Ze),lt=reactExports.useRef(oe),st=Ye||Ke||ge||ye||Se||Te,ut=useUpdateNodePositions(),ft=getMouseHandler(ne,Qe.getState,ye),dt=getMouseHandler(ne,Qe.getState,Se),Bt=getMouseHandler(ne,Qe.getState,Te),pt=getMouseHandler(ne,Qe.getState,Ne),mt=getMouseHandler(ne,Qe.getState,$e),bt=It=>{const{nodeDragThreshold:ht}=Qe.getState();if(Ye&&(!Je||!Ke||ht>0)&&handleNodeClick({id:ne,store:Qe,nodeRef:tt}),ge){const gt=Qe.getState().nodeInternals.get(ne);gt&&ge(It,{...gt})}},xt=It=>{if(!isInputDOMNode(It)&&!qe)if(elementSelectionKeys.includes(It.key)&&Ye){const ht=It.key==="Escape";handleNodeClick({id:ne,store:Qe,unselect:ht,nodeRef:tt})}else Ke&&me&&Object.prototype.hasOwnProperty.call(arrowKeyDiffs,It.key)&&(Qe.setState({ariaLiveMessage:`Moved selected node ${It.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~ue}, y: ${~~Ae}`}),ut({x:arrowKeyDiffs[It.key].x,y:arrowKeyDiffs[It.key].y,isShiftPressed:It.shiftKey}))};reactExports.useEffect(()=>()=>{it.current&&(nt==null||nt.unobserve(it.current),it.current=null)},[]),reactExports.useEffect(()=>{if(tt.current&&!et){const It=tt.current;(!Fe||!_e||it.current!==It)&&(it.current&&(nt==null||nt.unobserve(it.current)),nt==null||nt.observe(It),it.current=It)}},[et,Fe,_e]),reactExports.useEffect(()=>{const It=lt.current!==oe,ht=at.current!==rt,gt=ot.current!==Ze;tt.current&&(It||ht||gt)&&(It&&(lt.current=oe),ht&&(at.current=rt),gt&&(ot.current=Ze),Qe.getState().updateNodeDimensions([{id:ne,nodeElement:tt.current,forceUpdate:!0}]))},[ne,oe,rt,Ze]);const yt=useDrag({nodeRef:tt,disabled:et||!Ke,noDragClassName:Re,handleSelector:Ge,nodeId:ne,isSelectable:Ye,selectNodesOnDrag:Je});return et?null:Wt.createElement("div",{className:cc(["react-flow__node",`react-flow__node-${oe}`,{[Ie]:Ke},je,{selected:me,selectable:Ye,parent:Be,dragging:yt}]),ref:tt,style:{zIndex:ve,transform:`translate(${pe}px,${xe}px)`,pointerEvents:st?"all":"none",visibility:Fe?"visible":"hidden",...ke},"data-id":ne,"data-testid":`rf__node-${ne}`,onMouseEnter:ft,onMouseMove:dt,onMouseLeave:Bt,onContextMenu:pt,onClick:bt,onDoubleClick:mt,onKeyDown:Xe?xt:void 0,tabIndex:Xe?0:void 0,role:Xe?"button":void 0,"aria-describedby":qe?void 0:`${ARIA_NODE_DESC_KEY}-${Ue}`,"aria-label":We},Wt.createElement(Provider,{value:ne},Wt.createElement(K,{id:ne,data:ce,type:oe,xPos:ue,yPos:Ae,selected:me,isConnectable:ze,sourcePosition:rt,targetPosition:Ze,dragging:yt,dragHandle:Ge,zIndex:ve})))};return J.displayName="NodeWrapper",reactExports.memo(J)};const selector$7=K=>{const J=K.getNodes().filter(ne=>ne.selected);return{...getNodesBounds(J,K.nodeOrigin),transformString:`translate(${K.transform[0]}px,${K.transform[1]}px) scale(${K.transform[2]})`,userSelectionActive:K.userSelectionActive}};function NodesSelection({onSelectionContextMenu:K,noPanClassName:J,disableKeyboardA11y:ne}){const oe=useStoreApi(),{width:ce,height:ue,x:Ae,y:pe,transformString:xe,userSelectionActive:me}=useStore(selector$7,shallow$1),ge=useUpdateNodePositions(),ye=reactExports.useRef(null);if(reactExports.useEffect(()=>{var Ne;ne||(Ne=ye.current)==null||Ne.focus({preventScroll:!0})},[ne]),useDrag({nodeRef:ye}),me||!ce||!ue)return null;const Se=K?Ne=>{const $e=oe.getState().getNodes().filter(ke=>ke.selected);K(Ne,$e)}:void 0,Te=Ne=>{Object.prototype.hasOwnProperty.call(arrowKeyDiffs,Ne.key)&&ge({x:arrowKeyDiffs[Ne.key].x,y:arrowKeyDiffs[Ne.key].y,isShiftPressed:Ne.shiftKey})};return Wt.createElement("div",{className:cc(["react-flow__nodesselection","react-flow__container",J]),style:{transform:xe}},Wt.createElement("div",{ref:ye,className:"react-flow__nodesselection-rect",onContextMenu:Se,tabIndex:ne?void 0:-1,onKeyDown:ne?void 0:Te,style:{width:ce,height:ue,top:pe,left:Ae}}))}var NodesSelection$1=reactExports.memo(NodesSelection);const selector$6=K=>K.nodesSelectionActive,FlowRenderer=({children:K,onPaneClick:J,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:ce,onPaneContextMenu:ue,onPaneScroll:Ae,deleteKeyCode:pe,onMove:xe,onMoveStart:me,onMoveEnd:ge,selectionKeyCode:ye,selectionOnDrag:Se,selectionMode:Te,onSelectionStart:Ne,onSelectionEnd:$e,multiSelectionKeyCode:ke,panActivationKeyCode:je,zoomActivationKeyCode:Ke,elementsSelectable:Ye,zoomOnScroll:ze,zoomOnPinch:Xe,panOnScroll:Je,panOnScrollSpeed:rt,panOnScrollMode:Ze,zoomOnDoubleClick:et,panOnDrag:nt,defaultViewport:Ge,translateExtent:ve,minZoom:Be,maxZoom:Re,preventScrolling:Ie,onSelectionContextMenu:Fe,noWheelClassName:qe,noPanClassName:We,disableKeyboardA11y:Ue})=>{const _e=useStore(selector$6),Qe=useKeyPress(ye),tt=useKeyPress(je),it=tt||nt,at=tt||Je,ot=Qe||Se&&it!==!0;return useGlobalKeyHandler({deleteKeyCode:pe,multiSelectionKeyCode:ke}),Wt.createElement(ZoomPane,{onMove:xe,onMoveStart:me,onMoveEnd:ge,onPaneContextMenu:ue,elementsSelectable:Ye,zoomOnScroll:ze,zoomOnPinch:Xe,panOnScroll:at,panOnScrollSpeed:rt,panOnScrollMode:Ze,zoomOnDoubleClick:et,panOnDrag:!Qe&&it,defaultViewport:Ge,translateExtent:ve,minZoom:Be,maxZoom:Re,zoomActivationKeyCode:Ke,preventScrolling:Ie,noWheelClassName:qe,noPanClassName:We},Wt.createElement(Pane,{onSelectionStart:Ne,onSelectionEnd:$e,onPaneClick:J,onPaneMouseEnter:ne,onPaneMouseMove:oe,onPaneMouseLeave:ce,onPaneContextMenu:ue,onPaneScroll:Ae,panOnDrag:it,isSelecting:!!ot,selectionMode:Te},K,_e&&Wt.createElement(NodesSelection$1,{onSelectionContextMenu:Fe,noPanClassName:We,disableKeyboardA11y:Ue})))};FlowRenderer.displayName="FlowRenderer";var FlowRenderer$1=reactExports.memo(FlowRenderer);function useVisibleNodes(K){return useStore(reactExports.useCallback(ne=>K?getNodesInside(ne.nodeInternals,{x:0,y:0,width:ne.width,height:ne.height},ne.transform,!0):ne.getNodes(),[K]))}function createNodeTypes(K){const J={input:wrapNode(K.input||InputNode$1),default:wrapNode(K.default||DefaultNode$1),output:wrapNode(K.output||OutputNode$1),group:wrapNode(K.group||GroupNode)},ne={},oe=Object.keys(K).filter(ce=>!["input","default","output","group"].includes(ce)).reduce((ce,ue)=>(ce[ue]=wrapNode(K[ue]||DefaultNode$1),ce),ne);return{...J,...oe}}const getPositionWithOrigin=({x:K,y:J,width:ne,height:oe,origin:ce})=>!ne||!oe?{x:K,y:J}:ce[0]<0||ce[1]<0||ce[0]>1||ce[1]>1?{x:K,y:J}:{x:K-ne*ce[0],y:J-oe*ce[1]},selector$5=K=>({nodesDraggable:K.nodesDraggable,nodesConnectable:K.nodesConnectable,nodesFocusable:K.nodesFocusable,elementsSelectable:K.elementsSelectable,updateNodeDimensions:K.updateNodeDimensions,onError:K.onError}),NodeRenderer=K=>{const{nodesDraggable:J,nodesConnectable:ne,nodesFocusable:oe,elementsSelectable:ce,updateNodeDimensions:ue,onError:Ae}=useStore(selector$5,shallow$1),pe=useVisibleNodes(K.onlyRenderVisibleElements),xe=reactExports.useRef(),me=reactExports.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const ge=new ResizeObserver(ye=>{const Se=ye.map(Te=>({id:Te.target.getAttribute("data-id"),nodeElement:Te.target,forceUpdate:!0}));ue(Se)});return xe.current=ge,ge},[]);return reactExports.useEffect(()=>()=>{var ge;(ge=xe==null?void 0:xe.current)==null||ge.disconnect()},[]),Wt.createElement("div",{className:"react-flow__nodes",style:containerStyle},pe.map(ge=>{var Xe,Je,rt;let ye=ge.type||"default";K.nodeTypes[ye]||(Ae==null||Ae("003",errorMessages.error003(ye)),ye="default");const Se=K.nodeTypes[ye]||K.nodeTypes.default,Te=!!(ge.draggable||J&&typeof ge.draggable>"u"),Ne=!!(ge.selectable||ce&&typeof ge.selectable>"u"),$e=!!(ge.connectable||ne&&typeof ge.connectable>"u"),ke=!!(ge.focusable||oe&&typeof ge.focusable>"u"),je=K.nodeExtent?clampPosition(ge.positionAbsolute,K.nodeExtent):ge.positionAbsolute,Ke=(je==null?void 0:je.x)??0,Ye=(je==null?void 0:je.y)??0,ze=getPositionWithOrigin({x:Ke,y:Ye,width:ge.width??0,height:ge.height??0,origin:K.nodeOrigin});return Wt.createElement(Se,{key:ge.id,id:ge.id,className:ge.className,style:ge.style,type:ye,data:ge.data,sourcePosition:ge.sourcePosition||Position.Bottom,targetPosition:ge.targetPosition||Position.Top,hidden:ge.hidden,xPos:Ke,yPos:Ye,xPosOrigin:ze.x,yPosOrigin:ze.y,selectNodesOnDrag:K.selectNodesOnDrag,onClick:K.onNodeClick,onMouseEnter:K.onNodeMouseEnter,onMouseMove:K.onNodeMouseMove,onMouseLeave:K.onNodeMouseLeave,onContextMenu:K.onNodeContextMenu,onDoubleClick:K.onNodeDoubleClick,selected:!!ge.selected,isDraggable:Te,isSelectable:Ne,isConnectable:$e,isFocusable:ke,resizeObserver:me,dragHandle:ge.dragHandle,zIndex:((Xe=ge[internalsSymbol])==null?void 0:Xe.z)??0,isParent:!!((Je=ge[internalsSymbol])!=null&&Je.isParent),noDragClassName:K.noDragClassName,noPanClassName:K.noPanClassName,initialized:!!ge.width&&!!ge.height,rfId:K.rfId,disableKeyboardA11y:K.disableKeyboardA11y,ariaLabel:ge.ariaLabel,hasHandleBounds:!!((rt=ge[internalsSymbol])!=null&&rt.handleBounds)})}))};NodeRenderer.displayName="NodeRenderer";var NodeRenderer$1=reactExports.memo(NodeRenderer);const shiftX=(K,J,ne)=>ne===Position.Left?K-J:ne===Position.Right?K+J:K,shiftY=(K,J,ne)=>ne===Position.Top?K-J:ne===Position.Bottom?K+J:K,EdgeUpdaterClassName="react-flow__edgeupdater",EdgeAnchor=({position:K,centerX:J,centerY:ne,radius:oe=10,onMouseDown:ce,onMouseEnter:ue,onMouseOut:Ae,type:pe})=>Wt.createElement("circle",{onMouseDown:ce,onMouseEnter:ue,onMouseOut:Ae,className:cc([EdgeUpdaterClassName,`${EdgeUpdaterClassName}-${pe}`]),cx:shiftX(J,oe,K),cy:shiftY(ne,oe,K),r:oe,stroke:"transparent",fill:"transparent"}),alwaysValidConnection=()=>!0;var wrapEdge=K=>{const J=({id:ne,className:oe,type:ce,data:ue,onClick:Ae,onEdgeDoubleClick:pe,selected:xe,animated:me,label:ge,labelStyle:ye,labelShowBg:Se,labelBgStyle:Te,labelBgPadding:Ne,labelBgBorderRadius:$e,style:ke,source:je,target:Ke,sourceX:Ye,sourceY:ze,targetX:Xe,targetY:Je,sourcePosition:rt,targetPosition:Ze,elementsSelectable:et,hidden:nt,sourceHandleId:Ge,targetHandleId:ve,onContextMenu:Be,onMouseEnter:Re,onMouseMove:Ie,onMouseLeave:Fe,reconnectRadius:qe,onReconnect:We,onReconnectStart:Ue,onReconnectEnd:_e,markerEnd:Qe,markerStart:tt,rfId:it,ariaLabel:at,isFocusable:ot,isReconnectable:lt,pathOptions:st,interactionWidth:ut,disableKeyboardA11y:ft})=>{const dt=reactExports.useRef(null),[Bt,pt]=reactExports.useState(!1),[mt,bt]=reactExports.useState(!1),xt=useStoreApi(),yt=reactExports.useMemo(()=>`url('#${getMarkerId(tt,it)}')`,[tt,it]),It=reactExports.useMemo(()=>`url('#${getMarkerId(Qe,it)}')`,[Qe,it]);if(nt)return null;const ht=kt=>{var Lt;const{edges:ur,addSelectedEdges:$t,unselectNodesAndEdges:jt,multiSelectionActive:nr}=xt.getState(),Ot=ur.find(lr=>lr.id===ne);Ot&&(et&&(xt.setState({nodesSelectionActive:!1}),Ot.selected&&nr?(jt({nodes:[],edges:[Ot]}),(Lt=dt.current)==null||Lt.blur()):$t([ne])),Ae&&Ae(kt,Ot))},gt=getMouseHandler$1(ne,xt.getState,pe),Pt=getMouseHandler$1(ne,xt.getState,Be),wt=getMouseHandler$1(ne,xt.getState,Re),St=getMouseHandler$1(ne,xt.getState,Ie),Zt=getMouseHandler$1(ne,xt.getState,Fe),Ct=(kt,ur)=>{if(kt.button!==0)return;const{edges:$t,isValidConnection:jt}=xt.getState(),nr=ur?Ke:je,Ot=(ur?ve:Ge)||null,Lt=ur?"target":"source",lr=jt||alwaysValidConnection,Ht=ur,qt=$t.find(Gt=>Gt.id===ne);bt(!0),Ue==null||Ue(kt,qt,Lt);const tr=Gt=>{bt(!1),_e==null||_e(Gt,qt,Lt)};handlePointerDown({event:kt,handleId:Ot,nodeId:nr,onConnect:Gt=>We==null?void 0:We(qt,Gt),isTarget:Ht,getState:xt.getState,setState:xt.setState,isValidConnection:lr,edgeUpdaterType:Lt,onReconnectEnd:tr})},Rt=kt=>Ct(kt,!0),dr=kt=>Ct(kt,!1),Dt=()=>pt(!0),Tt=()=>pt(!1),or=!et&&!Ae,Mt=kt=>{var ur;if(!ft&&elementSelectionKeys.includes(kt.key)&&et){const{unselectNodesAndEdges:$t,addSelectedEdges:jt,edges:nr}=xt.getState();kt.key==="Escape"?((ur=dt.current)==null||ur.blur(),$t({edges:[nr.find(Lt=>Lt.id===ne)]})):jt([ne])}};return Wt.createElement("g",{className:cc(["react-flow__edge",`react-flow__edge-${ce}`,oe,{selected:xe,animated:me,inactive:or,updating:Bt}]),onClick:ht,onDoubleClick:gt,onContextMenu:Pt,onMouseEnter:wt,onMouseMove:St,onMouseLeave:Zt,onKeyDown:ot?Mt:void 0,tabIndex:ot?0:void 0,role:ot?"button":"img","data-testid":`rf__edge-${ne}`,"aria-label":at===null?void 0:at||`Edge from ${je} to ${Ke}`,"aria-describedby":ot?`${ARIA_EDGE_DESC_KEY}-${it}`:void 0,ref:dt},!mt&&Wt.createElement(K,{id:ne,source:je,target:Ke,selected:xe,animated:me,label:ge,labelStyle:ye,labelShowBg:Se,labelBgStyle:Te,labelBgPadding:Ne,labelBgBorderRadius:$e,data:ue,style:ke,sourceX:Ye,sourceY:ze,targetX:Xe,targetY:Je,sourcePosition:rt,targetPosition:Ze,sourceHandleId:Ge,targetHandleId:ve,markerStart:yt,markerEnd:It,pathOptions:st,interactionWidth:ut}),lt&&Wt.createElement(Wt.Fragment,null,(lt==="source"||lt===!0)&&Wt.createElement(EdgeAnchor,{position:rt,centerX:Ye,centerY:ze,radius:qe,onMouseDown:Rt,onMouseEnter:Dt,onMouseOut:Tt,type:"source"}),(lt==="target"||lt===!0)&&Wt.createElement(EdgeAnchor,{position:Ze,centerX:Xe,centerY:Je,radius:qe,onMouseDown:dr,onMouseEnter:Dt,onMouseOut:Tt,type:"target"})))};return J.displayName="EdgeWrapper",reactExports.memo(J)};function createEdgeTypes(K){const J={default:wrapEdge(K.default||BezierEdge),straight:wrapEdge(K.bezier||StraightEdge),step:wrapEdge(K.step||StepEdge),smoothstep:wrapEdge(K.step||SmoothStepEdge),simplebezier:wrapEdge(K.simplebezier||SimpleBezierEdge)},ne={},oe=Object.keys(K).filter(ce=>!["default","bezier"].includes(ce)).reduce((ce,ue)=>(ce[ue]=wrapEdge(K[ue]||BezierEdge),ce),ne);return{...J,...oe}}function getHandlePosition(K,J,ne=null){const oe=((ne==null?void 0:ne.x)||0)+J.x,ce=((ne==null?void 0:ne.y)||0)+J.y,ue=(ne==null?void 0:ne.width)||J.width,Ae=(ne==null?void 0:ne.height)||J.height;switch(K){case Position.Top:return{x:oe+ue/2,y:ce};case Position.Right:return{x:oe+ue,y:ce+Ae/2};case Position.Bottom:return{x:oe+ue/2,y:ce+Ae};case Position.Left:return{x:oe,y:ce+Ae/2}}}function getHandle(K,J){return K?K.length===1||!J?K[0]:J&&K.find(ne=>ne.id===J)||null:null}const getEdgePositions=(K,J,ne,oe,ce,ue)=>{const Ae=getHandlePosition(ne,K,J),pe=getHandlePosition(ue,oe,ce);return{sourceX:Ae.x,sourceY:Ae.y,targetX:pe.x,targetY:pe.y}};function isEdgeVisible({sourcePos:K,targetPos:J,sourceWidth:ne,sourceHeight:oe,targetWidth:ce,targetHeight:ue,width:Ae,height:pe,transform:xe}){const me={x:Math.min(K.x,J.x),y:Math.min(K.y,J.y),x2:Math.max(K.x+ne,J.x+ce),y2:Math.max(K.y+oe,J.y+ue)};me.x===me.x2&&(me.x2+=1),me.y===me.y2&&(me.y2+=1);const ge=rectToBox({x:(0-xe[0])/xe[2],y:(0-xe[1])/xe[2],width:Ae/xe[2],height:pe/xe[2]}),ye=Math.max(0,Math.min(ge.x2,me.x2)-Math.max(ge.x,me.x)),Se=Math.max(0,Math.min(ge.y2,me.y2)-Math.max(ge.y,me.y));return Math.ceil(ye*Se)>0}function getNodeData(K){var oe,ce,ue,Ae,pe;const J=((oe=K==null?void 0:K[internalsSymbol])==null?void 0:oe.handleBounds)||null,ne=J&&(K==null?void 0:K.width)&&(K==null?void 0:K.height)&&typeof((ce=K==null?void 0:K.positionAbsolute)==null?void 0:ce.x)<"u"&&typeof((ue=K==null?void 0:K.positionAbsolute)==null?void 0:ue.y)<"u";return[{x:((Ae=K==null?void 0:K.positionAbsolute)==null?void 0:Ae.x)||0,y:((pe=K==null?void 0:K.positionAbsolute)==null?void 0:pe.y)||0,width:(K==null?void 0:K.width)||0,height:(K==null?void 0:K.height)||0},J,!!ne]}const defaultEdgeTree=[{level:0,isMaxLevel:!0,edges:[]}];function groupEdgesByZLevel(K,J,ne=!1){let oe=-1;const ce=K.reduce((Ae,pe)=>{var ge,ye;const xe=isNumeric(pe.zIndex);let me=xe?pe.zIndex:0;if(ne){const Se=J.get(pe.target),Te=J.get(pe.source),Ne=pe.selected||(Se==null?void 0:Se.selected)||(Te==null?void 0:Te.selected),$e=Math.max(((ge=Te==null?void 0:Te[internalsSymbol])==null?void 0:ge.z)||0,((ye=Se==null?void 0:Se[internalsSymbol])==null?void 0:ye.z)||0,1e3);me=(xe?pe.zIndex:0)+(Ne?$e:0)}return Ae[me]?Ae[me].push(pe):Ae[me]=[pe],oe=me>oe?me:oe,Ae},{}),ue=Object.entries(ce).map(([Ae,pe])=>{const xe=+Ae;return{edges:pe,level:xe,isMaxLevel:xe===oe}});return ue.length===0?defaultEdgeTree:ue}function useVisibleEdges(K,J,ne){const oe=useStore(reactExports.useCallback(ce=>K?ce.edges.filter(ue=>{const Ae=J.get(ue.source),pe=J.get(ue.target);return(Ae==null?void 0:Ae.width)&&(Ae==null?void 0:Ae.height)&&(pe==null?void 0:pe.width)&&(pe==null?void 0:pe.height)&&isEdgeVisible({sourcePos:Ae.positionAbsolute||{x:0,y:0},targetPos:pe.positionAbsolute||{x:0,y:0},sourceWidth:Ae.width,sourceHeight:Ae.height,targetWidth:pe.width,targetHeight:pe.height,width:ce.width,height:ce.height,transform:ce.transform})}):ce.edges,[K,J]));return groupEdgesByZLevel(oe,J,ne)}const ArrowSymbol=({color:K="none",strokeWidth:J=1})=>Wt.createElement("polyline",{style:{stroke:K,strokeWidth:J},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ArrowClosedSymbol=({color:K="none",strokeWidth:J=1})=>Wt.createElement("polyline",{style:{stroke:K,fill:K,strokeWidth:J},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),MarkerSymbols={[MarkerType.Arrow]:ArrowSymbol,[MarkerType.ArrowClosed]:ArrowClosedSymbol};function useMarkerSymbol(K){const J=useStoreApi();return reactExports.useMemo(()=>{var ce,ue;return Object.prototype.hasOwnProperty.call(MarkerSymbols,K)?MarkerSymbols[K]:((ue=(ce=J.getState()).onError)==null||ue.call(ce,"009",errorMessages.error009(K)),null)},[K])}const Marker=({id:K,type:J,color:ne,width:oe=12.5,height:ce=12.5,markerUnits:ue="strokeWidth",strokeWidth:Ae,orient:pe="auto-start-reverse"})=>{const xe=useMarkerSymbol(J);return xe?Wt.createElement("marker",{className:"react-flow__arrowhead",id:K,markerWidth:`${oe}`,markerHeight:`${ce}`,viewBox:"-10 -10 20 20",markerUnits:ue,orient:pe,refX:"0",refY:"0"},Wt.createElement(xe,{color:ne,strokeWidth:Ae})):null},markerSelector=({defaultColor:K,rfId:J})=>ne=>{const oe=[];return ne.edges.reduce((ce,ue)=>([ue.markerStart,ue.markerEnd].forEach(Ae=>{if(Ae&&typeof Ae=="object"){const pe=getMarkerId(Ae,J);oe.includes(pe)||(ce.push({id:pe,color:Ae.color||K,...Ae}),oe.push(pe))}}),ce),[]).sort((ce,ue)=>ce.id.localeCompare(ue.id))},MarkerDefinitions=({defaultColor:K,rfId:J})=>{const ne=useStore(reactExports.useCallback(markerSelector({defaultColor:K,rfId:J}),[K,J]),(oe,ce)=>!(oe.length!==ce.length||oe.some((ue,Ae)=>ue.id!==ce[Ae].id)));return Wt.createElement("defs",null,ne.map(oe=>Wt.createElement(Marker,{id:oe.id,key:oe.id,type:oe.type,color:oe.color,width:oe.width,height:oe.height,markerUnits:oe.markerUnits,strokeWidth:oe.strokeWidth,orient:oe.orient})))};MarkerDefinitions.displayName="MarkerDefinitions";var MarkerDefinitions$1=reactExports.memo(MarkerDefinitions);const selector$4=K=>({nodesConnectable:K.nodesConnectable,edgesFocusable:K.edgesFocusable,edgesUpdatable:K.edgesUpdatable,elementsSelectable:K.elementsSelectable,width:K.width,height:K.height,connectionMode:K.connectionMode,nodeInternals:K.nodeInternals,onError:K.onError}),EdgeRenderer=({defaultMarkerColor:K,onlyRenderVisibleElements:J,elevateEdgesOnSelect:ne,rfId:oe,edgeTypes:ce,noPanClassName:ue,onEdgeContextMenu:Ae,onEdgeMouseEnter:pe,onEdgeMouseMove:xe,onEdgeMouseLeave:me,onEdgeClick:ge,onEdgeDoubleClick:ye,onReconnect:Se,onReconnectStart:Te,onReconnectEnd:Ne,reconnectRadius:$e,children:ke,disableKeyboardA11y:je})=>{const{edgesFocusable:Ke,edgesUpdatable:Ye,elementsSelectable:ze,width:Xe,height:Je,connectionMode:rt,nodeInternals:Ze,onError:et}=useStore(selector$4,shallow$1),nt=useVisibleEdges(J,Ze,ne);return Xe?Wt.createElement(Wt.Fragment,null,nt.map(({level:Ge,edges:ve,isMaxLevel:Be})=>Wt.createElement("svg",{key:Ge,style:{zIndex:Ge},width:Xe,height:Je,className:"react-flow__edges react-flow__container"},Be&&Wt.createElement(MarkerDefinitions$1,{defaultColor:K,rfId:oe}),Wt.createElement("g",null,ve.map(Re=>{const[Ie,Fe,qe]=getNodeData(Ze.get(Re.source)),[We,Ue,_e]=getNodeData(Ze.get(Re.target));if(!qe||!_e)return null;let Qe=Re.type||"default";ce[Qe]||(et==null||et("011",errorMessages.error011(Qe)),Qe="default");const tt=ce[Qe]||ce.default,it=rt===ConnectionMode.Strict?Ue.target:(Ue.target??[]).concat(Ue.source??[]),at=getHandle(Fe.source,Re.sourceHandle),ot=getHandle(it,Re.targetHandle),lt=(at==null?void 0:at.position)||Position.Bottom,st=(ot==null?void 0:ot.position)||Position.Top,ut=!!(Re.focusable||Ke&&typeof Re.focusable>"u"),ft=Re.reconnectable||Re.updatable,dt=typeof Se<"u"&&(ft||Ye&&typeof ft>"u");if(!at||!ot)return et==null||et("008",errorMessages.error008(at,Re)),null;const{sourceX:Bt,sourceY:pt,targetX:mt,targetY:bt}=getEdgePositions(Ie,at,lt,We,ot,st);return Wt.createElement(tt,{key:Re.id,id:Re.id,className:cc([Re.className,ue]),type:Qe,data:Re.data,selected:!!Re.selected,animated:!!Re.animated,hidden:!!Re.hidden,label:Re.label,labelStyle:Re.labelStyle,labelShowBg:Re.labelShowBg,labelBgStyle:Re.labelBgStyle,labelBgPadding:Re.labelBgPadding,labelBgBorderRadius:Re.labelBgBorderRadius,style:Re.style,source:Re.source,target:Re.target,sourceHandleId:Re.sourceHandle,targetHandleId:Re.targetHandle,markerEnd:Re.markerEnd,markerStart:Re.markerStart,sourceX:Bt,sourceY:pt,targetX:mt,targetY:bt,sourcePosition:lt,targetPosition:st,elementsSelectable:ze,onContextMenu:Ae,onMouseEnter:pe,onMouseMove:xe,onMouseLeave:me,onClick:ge,onEdgeDoubleClick:ye,onReconnect:Se,onReconnectStart:Te,onReconnectEnd:Ne,reconnectRadius:$e,rfId:oe,ariaLabel:Re.ariaLabel,isFocusable:ut,isReconnectable:dt,pathOptions:"pathOptions"in Re?Re.pathOptions:void 0,interactionWidth:Re.interactionWidth,disableKeyboardA11y:je})})))),ke):null};EdgeRenderer.displayName="EdgeRenderer";var EdgeRenderer$1=reactExports.memo(EdgeRenderer);const selector$3=K=>`translate(${K.transform[0]}px,${K.transform[1]}px) scale(${K.transform[2]})`;function Viewport({children:K}){const J=useStore(selector$3);return Wt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:J}},K)}function useOnInitHandler(K){const J=useReactFlow(),ne=reactExports.useRef(!1);reactExports.useEffect(()=>{!ne.current&&J.viewportInitialized&&K&&(setTimeout(()=>K(J),1),ne.current=!0)},[K,J.viewportInitialized])}const oppositePosition={[Position.Left]:Position.Right,[Position.Right]:Position.Left,[Position.Top]:Position.Bottom,[Position.Bottom]:Position.Top},ConnectionLine=({nodeId:K,handleType:J,style:ne,type:oe=ConnectionLineType.Bezier,CustomComponent:ce,connectionStatus:ue})=>{var Je,rt,Ze;const{fromNode:Ae,handleId:pe,toX:xe,toY:me,connectionMode:ge}=useStore(reactExports.useCallback(et=>({fromNode:et.nodeInternals.get(K),handleId:et.connectionHandleId,toX:(et.connectionPosition.x-et.transform[0])/et.transform[2],toY:(et.connectionPosition.y-et.transform[1])/et.transform[2],connectionMode:et.connectionMode}),[K]),shallow$1),ye=(Je=Ae==null?void 0:Ae[internalsSymbol])==null?void 0:Je.handleBounds;let Se=ye==null?void 0:ye[J];if(ge===ConnectionMode.Loose&&(Se=Se||(ye==null?void 0:ye[J==="source"?"target":"source"])),!Ae||!Se)return null;const Te=pe?Se.find(et=>et.id===pe):Se[0],Ne=Te?Te.x+Te.width/2:(Ae.width??0)/2,$e=Te?Te.y+Te.height/2:Ae.height??0,ke=(((rt=Ae.positionAbsolute)==null?void 0:rt.x)??0)+Ne,je=(((Ze=Ae.positionAbsolute)==null?void 0:Ze.y)??0)+$e,Ke=Te==null?void 0:Te.position,Ye=Ke?oppositePosition[Ke]:null;if(!Ke||!Ye)return null;if(ce)return Wt.createElement(ce,{connectionLineType:oe,connectionLineStyle:ne,fromNode:Ae,fromHandle:Te,fromX:ke,fromY:je,toX:xe,toY:me,fromPosition:Ke,toPosition:Ye,connectionStatus:ue});let ze="";const Xe={sourceX:ke,sourceY:je,sourcePosition:Ke,targetX:xe,targetY:me,targetPosition:Ye};return oe===ConnectionLineType.Bezier?[ze]=getBezierPath(Xe):oe===ConnectionLineType.Step?[ze]=getSmoothStepPath({...Xe,borderRadius:0}):oe===ConnectionLineType.SmoothStep?[ze]=getSmoothStepPath(Xe):oe===ConnectionLineType.SimpleBezier?[ze]=getSimpleBezierPath(Xe):ze=`M${ke},${je} ${xe},${me}`,Wt.createElement("path",{d:ze,fill:"none",className:"react-flow__connection-path",style:ne})};ConnectionLine.displayName="ConnectionLine";const selector$2=K=>({nodeId:K.connectionNodeId,handleType:K.connectionHandleType,nodesConnectable:K.nodesConnectable,connectionStatus:K.connectionStatus,width:K.width,height:K.height});function ConnectionLineWrapper({containerStyle:K,style:J,type:ne,component:oe}){const{nodeId:ce,handleType:ue,nodesConnectable:Ae,width:pe,height:xe,connectionStatus:me}=useStore(selector$2,shallow$1);return!(ce&&ue&&pe&&Ae)?null:Wt.createElement("svg",{style:K,width:pe,height:xe,className:"react-flow__edges react-flow__connectionline react-flow__container"},Wt.createElement("g",{className:cc(["react-flow__connection",me])},Wt.createElement(ConnectionLine,{nodeId:ce,handleType:ue,style:J,type:ne,CustomComponent:oe,connectionStatus:me})))}function useNodeOrEdgeTypes(K,J){return reactExports.useRef(null),useStoreApi(),reactExports.useMemo(()=>J(K),[K])}const GraphView=({nodeTypes:K,edgeTypes:J,onMove:ne,onMoveStart:oe,onMoveEnd:ce,onInit:ue,onNodeClick:Ae,onEdgeClick:pe,onNodeDoubleClick:xe,onEdgeDoubleClick:me,onNodeMouseEnter:ge,onNodeMouseMove:ye,onNodeMouseLeave:Se,onNodeContextMenu:Te,onSelectionContextMenu:Ne,onSelectionStart:$e,onSelectionEnd:ke,connectionLineType:je,connectionLineStyle:Ke,connectionLineComponent:Ye,connectionLineContainerStyle:ze,selectionKeyCode:Xe,selectionOnDrag:Je,selectionMode:rt,multiSelectionKeyCode:Ze,panActivationKeyCode:et,zoomActivationKeyCode:nt,deleteKeyCode:Ge,onlyRenderVisibleElements:ve,elementsSelectable:Be,selectNodesOnDrag:Re,defaultViewport:Ie,translateExtent:Fe,minZoom:qe,maxZoom:We,preventScrolling:Ue,defaultMarkerColor:_e,zoomOnScroll:Qe,zoomOnPinch:tt,panOnScroll:it,panOnScrollSpeed:at,panOnScrollMode:ot,zoomOnDoubleClick:lt,panOnDrag:st,onPaneClick:ut,onPaneMouseEnter:ft,onPaneMouseMove:dt,onPaneMouseLeave:Bt,onPaneScroll:pt,onPaneContextMenu:mt,onEdgeContextMenu:bt,onEdgeMouseEnter:xt,onEdgeMouseMove:yt,onEdgeMouseLeave:It,onReconnect:ht,onReconnectStart:gt,onReconnectEnd:Pt,reconnectRadius:wt,noDragClassName:St,noWheelClassName:Zt,noPanClassName:Ct,elevateEdgesOnSelect:Rt,disableKeyboardA11y:dr,nodeOrigin:Dt,nodeExtent:Tt,rfId:or})=>{const Mt=useNodeOrEdgeTypes(K,createNodeTypes),kt=useNodeOrEdgeTypes(J,createEdgeTypes);return useOnInitHandler(ue),Wt.createElement(FlowRenderer$1,{onPaneClick:ut,onPaneMouseEnter:ft,onPaneMouseMove:dt,onPaneMouseLeave:Bt,onPaneContextMenu:mt,onPaneScroll:pt,deleteKeyCode:Ge,selectionKeyCode:Xe,selectionOnDrag:Je,selectionMode:rt,onSelectionStart:$e,onSelectionEnd:ke,multiSelectionKeyCode:Ze,panActivationKeyCode:et,zoomActivationKeyCode:nt,elementsSelectable:Be,onMove:ne,onMoveStart:oe,onMoveEnd:ce,zoomOnScroll:Qe,zoomOnPinch:tt,zoomOnDoubleClick:lt,panOnScroll:it,panOnScrollSpeed:at,panOnScrollMode:ot,panOnDrag:st,defaultViewport:Ie,translateExtent:Fe,minZoom:qe,maxZoom:We,onSelectionContextMenu:Ne,preventScrolling:Ue,noDragClassName:St,noWheelClassName:Zt,noPanClassName:Ct,disableKeyboardA11y:dr},Wt.createElement(Viewport,null,Wt.createElement(EdgeRenderer$1,{edgeTypes:kt,onEdgeClick:pe,onEdgeDoubleClick:me,onlyRenderVisibleElements:ve,onEdgeContextMenu:bt,onEdgeMouseEnter:xt,onEdgeMouseMove:yt,onEdgeMouseLeave:It,onReconnect:ht,onReconnectStart:gt,onReconnectEnd:Pt,reconnectRadius:wt,defaultMarkerColor:_e,noPanClassName:Ct,elevateEdgesOnSelect:!!Rt,disableKeyboardA11y:dr,rfId:or},Wt.createElement(ConnectionLineWrapper,{style:Ke,type:je,component:Ye,containerStyle:ze})),Wt.createElement("div",{className:"react-flow__edgelabel-renderer"}),Wt.createElement(NodeRenderer$1,{nodeTypes:Mt,onNodeClick:Ae,onNodeDoubleClick:xe,onNodeMouseEnter:ge,onNodeMouseMove:ye,onNodeMouseLeave:Se,onNodeContextMenu:Te,selectNodesOnDrag:Re,onlyRenderVisibleElements:ve,noPanClassName:Ct,noDragClassName:St,disableKeyboardA11y:dr,nodeOrigin:Dt,nodeExtent:Tt,rfId:or})))};GraphView.displayName="GraphView";var GraphView$1=reactExports.memo(GraphView);const infiniteExtent=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],initialState$1={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:infiniteExtent,nodeExtent:infiniteExtent,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ConnectionMode.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:devWarn,isValidConnection:void 0},createRFStore=()=>createWithEqualityFn((K,J)=>({...initialState$1,setNodes:ne=>{const{nodeInternals:oe,nodeOrigin:ce,elevateNodesOnSelect:ue}=J();K({nodeInternals:createNodeInternals(ne,oe,ce,ue)})},getNodes:()=>Array.from(J().nodeInternals.values()),setEdges:ne=>{const{defaultEdgeOptions:oe={}}=J();K({edges:ne.map(ce=>({...oe,...ce}))})},setDefaultNodesAndEdges:(ne,oe)=>{const ce=typeof ne<"u",ue=typeof oe<"u",Ae=ce?createNodeInternals(ne,new Map,J().nodeOrigin,J().elevateNodesOnSelect):new Map;K({nodeInternals:Ae,edges:ue?oe:[],hasDefaultNodes:ce,hasDefaultEdges:ue})},updateNodeDimensions:ne=>{const{onNodesChange:oe,nodeInternals:ce,fitViewOnInit:ue,fitViewOnInitDone:Ae,fitViewOnInitOptions:pe,domNode:xe,nodeOrigin:me}=J(),ge=xe==null?void 0:xe.querySelector(".react-flow__viewport");if(!ge)return;const ye=window.getComputedStyle(ge),{m22:Se}=new window.DOMMatrixReadOnly(ye.transform),Te=ne.reduce(($e,ke)=>{const je=ce.get(ke.id);if(je!=null&&je.hidden)ce.set(je.id,{...je,[internalsSymbol]:{...je[internalsSymbol],handleBounds:void 0}});else if(je){const Ke=getDimensions(ke.nodeElement);!!(Ke.width&&Ke.height&&(je.width!==Ke.width||je.height!==Ke.height||ke.forceUpdate))&&(ce.set(je.id,{...je,[internalsSymbol]:{...je[internalsSymbol],handleBounds:{source:getHandleBounds(".source",ke.nodeElement,Se,me),target:getHandleBounds(".target",ke.nodeElement,Se,me)}},...Ke}),$e.push({id:je.id,type:"dimensions",dimensions:Ke}))}return $e},[]);updateAbsoluteNodePositions(ce,me);const Ne=Ae||ue&&!Ae&&fitView(J,{initial:!0,...pe});K({nodeInternals:new Map(ce),fitViewOnInitDone:Ne}),(Te==null?void 0:Te.length)>0&&(oe==null||oe(Te))},updateNodePositions:(ne,oe=!0,ce=!1)=>{const{triggerNodeChanges:ue}=J(),Ae=ne.map(pe=>{const xe={id:pe.id,type:"position",dragging:ce};return oe&&(xe.positionAbsolute=pe.positionAbsolute,xe.position=pe.position),xe});ue(Ae)},triggerNodeChanges:ne=>{const{onNodesChange:oe,nodeInternals:ce,hasDefaultNodes:ue,nodeOrigin:Ae,getNodes:pe,elevateNodesOnSelect:xe}=J();if(ne!=null&&ne.length){if(ue){const me=applyNodeChanges(ne,pe()),ge=createNodeInternals(me,ce,Ae,xe);K({nodeInternals:ge})}oe==null||oe(ne)}},addSelectedNodes:ne=>{const{multiSelectionActive:oe,edges:ce,getNodes:ue}=J();let Ae,pe=null;oe?Ae=ne.map(xe=>createSelectionChange(xe,!0)):(Ae=getSelectionChanges(ue(),ne),pe=getSelectionChanges(ce,[])),updateNodesAndEdgesSelections({changedNodes:Ae,changedEdges:pe,get:J,set:K})},addSelectedEdges:ne=>{const{multiSelectionActive:oe,edges:ce,getNodes:ue}=J();let Ae,pe=null;oe?Ae=ne.map(xe=>createSelectionChange(xe,!0)):(Ae=getSelectionChanges(ce,ne),pe=getSelectionChanges(ue(),[])),updateNodesAndEdgesSelections({changedNodes:pe,changedEdges:Ae,get:J,set:K})},unselectNodesAndEdges:({nodes:ne,edges:oe}={})=>{const{edges:ce,getNodes:ue}=J(),Ae=ne||ue(),pe=oe||ce,xe=Ae.map(ge=>(ge.selected=!1,createSelectionChange(ge.id,!1))),me=pe.map(ge=>createSelectionChange(ge.id,!1));updateNodesAndEdgesSelections({changedNodes:xe,changedEdges:me,get:J,set:K})},setMinZoom:ne=>{const{d3Zoom:oe,maxZoom:ce}=J();oe==null||oe.scaleExtent([ne,ce]),K({minZoom:ne})},setMaxZoom:ne=>{const{d3Zoom:oe,minZoom:ce}=J();oe==null||oe.scaleExtent([ce,ne]),K({maxZoom:ne})},setTranslateExtent:ne=>{var oe;(oe=J().d3Zoom)==null||oe.translateExtent(ne),K({translateExtent:ne})},resetSelectedElements:()=>{const{edges:ne,getNodes:oe}=J(),ue=oe().filter(pe=>pe.selected).map(pe=>createSelectionChange(pe.id,!1)),Ae=ne.filter(pe=>pe.selected).map(pe=>createSelectionChange(pe.id,!1));updateNodesAndEdgesSelections({changedNodes:ue,changedEdges:Ae,get:J,set:K})},setNodeExtent:ne=>{const{nodeInternals:oe}=J();oe.forEach(ce=>{ce.positionAbsolute=clampPosition(ce.position,ne)}),K({nodeExtent:ne,nodeInternals:new Map(oe)})},panBy:ne=>{const{transform:oe,width:ce,height:ue,d3Zoom:Ae,d3Selection:pe,translateExtent:xe}=J();if(!Ae||!pe||!ne.x&&!ne.y)return!1;const me=identity.translate(oe[0]+ne.x,oe[1]+ne.y).scale(oe[2]),ge=[[0,0],[ce,ue]],ye=Ae==null?void 0:Ae.constrain()(me,ge,xe);return Ae.transform(pe,ye),oe[0]!==ye.x||oe[1]!==ye.y||oe[2]!==ye.k},cancelConnection:()=>K({connectionNodeId:initialState$1.connectionNodeId,connectionHandleId:initialState$1.connectionHandleId,connectionHandleType:initialState$1.connectionHandleType,connectionStatus:initialState$1.connectionStatus,connectionStartHandle:initialState$1.connectionStartHandle,connectionEndHandle:initialState$1.connectionEndHandle}),reset:()=>K({...initialState$1})}),Object.is),ReactFlowProvider=({children:K})=>{const J=reactExports.useRef(null);return J.current||(J.current=createRFStore()),Wt.createElement(Provider$1,{value:J.current},K)};ReactFlowProvider.displayName="ReactFlowProvider";const Wrapper=({children:K})=>reactExports.useContext(StoreContext)?Wt.createElement(Wt.Fragment,null,K):Wt.createElement(ReactFlowProvider,null,K);Wrapper.displayName="ReactFlowWrapper";const defaultNodeTypes={input:InputNode$1,default:DefaultNode$1,output:OutputNode$1,group:GroupNode},defaultEdgeTypes={default:BezierEdge,straight:StraightEdge,step:StepEdge,smoothstep:SmoothStepEdge,simplebezier:SimpleBezierEdge},initNodeOrigin=[0,0],initSnapGrid=[15,15],initDefaultViewport={x:0,y:0,zoom:1},wrapperStyle={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ReactFlow=reactExports.forwardRef(({nodes:K,edges:J,defaultNodes:ne,defaultEdges:oe,className:ce,nodeTypes:ue=defaultNodeTypes,edgeTypes:Ae=defaultEdgeTypes,onNodeClick:pe,onEdgeClick:xe,onInit:me,onMove:ge,onMoveStart:ye,onMoveEnd:Se,onConnect:Te,onConnectStart:Ne,onConnectEnd:$e,onClickConnectStart:ke,onClickConnectEnd:je,onNodeMouseEnter:Ke,onNodeMouseMove:Ye,onNodeMouseLeave:ze,onNodeContextMenu:Xe,onNodeDoubleClick:Je,onNodeDragStart:rt,onNodeDrag:Ze,onNodeDragStop:et,onNodesDelete:nt,onEdgesDelete:Ge,onSelectionChange:ve,onSelectionDragStart:Be,onSelectionDrag:Re,onSelectionDragStop:Ie,onSelectionContextMenu:Fe,onSelectionStart:qe,onSelectionEnd:We,connectionMode:Ue=ConnectionMode.Strict,connectionLineType:_e=ConnectionLineType.Bezier,connectionLineStyle:Qe,connectionLineComponent:tt,connectionLineContainerStyle:it,deleteKeyCode:at="Backspace",selectionKeyCode:ot="Shift",selectionOnDrag:lt=!1,selectionMode:st=SelectionMode.Full,panActivationKeyCode:ut="Space",multiSelectionKeyCode:ft=isMacOs()?"Meta":"Control",zoomActivationKeyCode:dt=isMacOs()?"Meta":"Control",snapToGrid:Bt=!1,snapGrid:pt=initSnapGrid,onlyRenderVisibleElements:mt=!1,selectNodesOnDrag:bt=!0,nodesDraggable:xt,nodesConnectable:yt,nodesFocusable:It,nodeOrigin:ht=initNodeOrigin,edgesFocusable:gt,edgesUpdatable:Pt,elementsSelectable:wt,defaultViewport:St=initDefaultViewport,minZoom:Zt=.5,maxZoom:Ct=2,translateExtent:Rt=infiniteExtent,preventScrolling:dr=!0,nodeExtent:Dt,defaultMarkerColor:Tt="#b1b1b7",zoomOnScroll:or=!0,zoomOnPinch:Mt=!0,panOnScroll:kt=!1,panOnScrollSpeed:ur=.5,panOnScrollMode:$t=PanOnScrollMode.Free,zoomOnDoubleClick:jt=!0,panOnDrag:nr=!0,onPaneClick:Ot,onPaneMouseEnter:Lt,onPaneMouseMove:lr,onPaneMouseLeave:Ht,onPaneScroll:qt,onPaneContextMenu:tr,children:Vt,onEdgeContextMenu:Gt,onEdgeDoubleClick:br,onEdgeMouseEnter:Yt,onEdgeMouseMove:Kt,onEdgeMouseLeave:yr,onEdgeUpdate:zt,onEdgeUpdateStart:Jt,onEdgeUpdateEnd:xr,onReconnect:Xt,onReconnectStart:ir,onReconnectEnd:Mr,reconnectRadius:er=10,edgeUpdaterRadius:fr=10,onNodesChange:Qr,onEdgesChange:sr,noDragClassName:Ar="nodrag",noWheelClassName:Kr="nowheel",noPanClassName:ar="nopan",fitView:hr=!1,fitViewOptions:Lr,connectOnClick:Pr=!0,attributionPosition:Yr,proOptions:Wr,defaultEdgeOptions:Zr,elevateNodesOnSelect:Jr=!0,elevateEdgesOnSelect:Gr=!1,disableKeyboardA11y:sn=!1,autoPanOnConnect:ln=!0,autoPanOnNodeDrag:hn=!0,connectionRadius:pn=20,isValidConnection:Xr,onError:yn,style:xn,id:dn,nodeDragThreshold:cn,...wn},Cn)=>{const Rr=dn||"1";return Wt.createElement("div",{...wn,style:{...xn,...wrapperStyle},ref:Cn,className:cc(["react-flow",ce]),"data-testid":"rf__wrapper",id:dn},Wt.createElement(Wrapper,null,Wt.createElement(GraphView$1,{onInit:me,onMove:ge,onMoveStart:ye,onMoveEnd:Se,onNodeClick:pe,onEdgeClick:xe,onNodeMouseEnter:Ke,onNodeMouseMove:Ye,onNodeMouseLeave:ze,onNodeContextMenu:Xe,onNodeDoubleClick:Je,nodeTypes:ue,edgeTypes:Ae,connectionLineType:_e,connectionLineStyle:Qe,connectionLineComponent:tt,connectionLineContainerStyle:it,selectionKeyCode:ot,selectionOnDrag:lt,selectionMode:st,deleteKeyCode:at,multiSelectionKeyCode:ft,panActivationKeyCode:ut,zoomActivationKeyCode:dt,onlyRenderVisibleElements:mt,selectNodesOnDrag:bt,defaultViewport:St,translateExtent:Rt,minZoom:Zt,maxZoom:Ct,preventScrolling:dr,zoomOnScroll:or,zoomOnPinch:Mt,zoomOnDoubleClick:jt,panOnScroll:kt,panOnScrollSpeed:ur,panOnScrollMode:$t,panOnDrag:nr,onPaneClick:Ot,onPaneMouseEnter:Lt,onPaneMouseMove:lr,onPaneMouseLeave:Ht,onPaneScroll:qt,onPaneContextMenu:tr,onSelectionContextMenu:Fe,onSelectionStart:qe,onSelectionEnd:We,onEdgeContextMenu:Gt,onEdgeDoubleClick:br,onEdgeMouseEnter:Yt,onEdgeMouseMove:Kt,onEdgeMouseLeave:yr,onReconnect:Xt??zt,onReconnectStart:ir??Jt,onReconnectEnd:Mr??xr,reconnectRadius:er??fr,defaultMarkerColor:Tt,noDragClassName:Ar,noWheelClassName:Kr,noPanClassName:ar,elevateEdgesOnSelect:Gr,rfId:Rr,disableKeyboardA11y:sn,nodeOrigin:ht,nodeExtent:Dt}),Wt.createElement(StoreUpdater,{nodes:K,edges:J,defaultNodes:ne,defaultEdges:oe,onConnect:Te,onConnectStart:Ne,onConnectEnd:$e,onClickConnectStart:ke,onClickConnectEnd:je,nodesDraggable:xt,nodesConnectable:yt,nodesFocusable:It,edgesFocusable:gt,edgesUpdatable:Pt,elementsSelectable:wt,elevateNodesOnSelect:Jr,minZoom:Zt,maxZoom:Ct,nodeExtent:Dt,onNodesChange:Qr,onEdgesChange:sr,snapToGrid:Bt,snapGrid:pt,connectionMode:Ue,translateExtent:Rt,connectOnClick:Pr,defaultEdgeOptions:Zr,fitView:hr,fitViewOptions:Lr,onNodesDelete:nt,onEdgesDelete:Ge,onNodeDragStart:rt,onNodeDrag:Ze,onNodeDragStop:et,onSelectionDrag:Re,onSelectionDragStart:Be,onSelectionDragStop:Ie,noPanClassName:ar,nodeOrigin:ht,rfId:Rr,autoPanOnConnect:ln,autoPanOnNodeDrag:hn,onError:yn,connectionRadius:pn,isValidConnection:Xr,nodeDragThreshold:cn}),Wt.createElement(Wrapper$1,{onSelectionChange:ve}),Vt,Wt.createElement(Attribution,{proOptions:Wr,position:Yr}),Wt.createElement(A11yDescriptions,{rfId:Rr,disableKeyboardA11y:sn})))});ReactFlow.displayName="ReactFlow";function createUseItemsState(K){return J=>{const[ne,oe]=reactExports.useState(J),ce=reactExports.useCallback(ue=>oe(Ae=>K(ue,Ae)),[]);return[ne,oe,ce]}}const useNodesState=createUseItemsState(applyNodeChanges),useEdgesState=createUseItemsState(applyEdgeChanges),placeholder$1="_placeholder_1hk2d_1",styles$U={placeholder:placeholder$1},DagActionPlaceholder=reactExports.memo(({placeholder:K="Please select a node or line to interact with them."})=>jsxRuntimeExports.jsx("p",{className:styles$U.placeholder,children:K}));DagActionPlaceholder.displayName="DagActionPlaceholder";const EditorDag=({editorData:K,recordType:J,recordKey:ne,onCancel:oe,onUpdate:ce})=>{const{getRecord:ue}=useEditorRequest(),[Ae,pe]=reactExports.useState("");reactExports.useEffect(()=>{J&&ne&&ue.fetch({key:ne,type:J}).then(me=>{var ge;pe(((ge=Object.keys(me.schema.typeList))==null?void 0:ge.find(ye=>ye.endsWith("Node")))||"")})},[J,ne]);const xe=({data:me})=>ce==null?void 0:ce(me);return ue.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):!ue.state||!Ae||!K?jsxRuntimeExports.jsx(RF,{}):jsxRuntimeExports.jsx(EditorInstance,{data:K,schema:ue.state.schema.typeList,rootSchemaName:Ae,onCancel:oe,onSubmit:xe})},EditorNewDag=({recordType:K,onCancel:J,onUpdate:ne})=>{const{getSchema:oe}=useEditorRequest(),[ce,ue]=reactExports.useState("");reactExports.useEffect(()=>{K&&oe.fetch({name:K}).then(pe=>{var xe;ue(((xe=Object.keys(pe.typeList))==null?void 0:xe.find(me=>me.endsWith("Node")))||"")})},[K]);const Ae=({data:pe})=>ne==null?void 0:ne(pe);return oe.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):!oe.state||!ce?jsxRuntimeExports.jsx(RF,{}):jsxRuntimeExports.jsx(EditorInstance,{schema:oe.state.typeList,rootSchemaName:ce,onCancel:J,onSubmit:Ae})};var DagNodeFormVariant=(K=>(K.CREATE="create",K.UPDATE="update",K))(DagNodeFormVariant||{});const DagNodeForm=reactExports.memo(({variant:K,type:J,selectedRowKey:ne,initialValues:oe,onSubmit:ce,onCancel:ue})=>K===DagNodeFormVariant.CREATE?jsxRuntimeExports.jsx(EditorNewDag,{recordType:J,onCancel:ue,onUpdate:pe=>ce(pe)}):jsxRuntimeExports.jsx(EditorDag,{editorData:oe,recordKey:ne,recordType:J,onCancel:ue,onUpdate:pe=>ce(pe)}));DagNodeForm.displayName="DagNodeForm";const DagEdgeForm=reactExports.memo(({type:K,selectedRowKey:J,initialValues:ne,onCancel:oe,onSubmit:ce})=>jsxRuntimeExports.jsx(EditorDag,{editorData:ne,recordKey:J,recordType:K,onCancel:oe,onUpdate:ue=>ce(ue)}));DagEdgeForm.displayName="DagEdgeForm";const mapNodeToDTO=K=>({_t:"DAGNode",Id_:K.id,Position:{X:K.position.x,Y:K.position.y},Data:{Label:K.data.label}}),mapNodesToDTOs=K=>K.map(mapNodeToDTO),mapNodeToDomain=K=>{const{Label:J,...ne}=K.Data;return{id:K.Id_,position:{x:K.Position.X,y:K.Position.Y},data:{label:J,meta:ne}}},mapEdgeToDTO=K=>({Id_:K.id,Source:K.source,Target:K.target,Label:K.label}),mapEdgesToDTOs=K=>K.map(mapEdgeToDTO),mapNodesToDomain=K=>K.map(mapNodeToDomain),mapEdgeToDomain=K=>({id:K.Id_,source:K.Source,target:K.Target,label:K.Label}),mapEdgesToDomain=K=>K.map(mapEdgeToDomain),isNodeRemoveChange=K=>K.type==="remove",DagContext=reactExports.createContext({});function useDagContext(){const K=reactExports.useContext(DagContext);if(K==null)throw new Error("Cannot find Dag context");return K}var ActionMode=(K=>(K[K.NONE=0]="NONE",K[K.ADD_NODE=1]="ADD_NODE",K[K.EDIT_NODE=2]="EDIT_NODE",K[K.EDIT_EDGE=3]="EDIT_EDGE",K))(ActionMode||{});const container$q="_container_f1grn_1",actions="_actions_f1grn_8",styles$T={container:container$q,actions},DagActions=({selectedRowKey:K})=>{const{type:J,actionMode:ne,selected:oe,resetActionMode:ce,addNode:ue,updateSelectedNode:Ae,updateSelectedEdge:pe}=useDagContext(),xe=reactExports.useMemo(()=>{const ye=oe.edges[0];return ye?mapEdgeToDTO(ye):void 0},[oe.edges]),me=reactExports.useMemo(()=>{const ye=oe.nodes[0];return ye?mapNodeToDTO(ye):void 0},[oe.nodes]),ge=ye=>{switch(ye){case ActionMode.ADD_NODE:return jsxRuntimeExports.jsx(DagNodeForm,{variant:DagNodeFormVariant.CREATE,type:J,selectedRowKey:K,onSubmit:ue,onCancel:ce});case ActionMode.EDIT_NODE:return jsxRuntimeExports.jsx(DagNodeForm,{variant:DagNodeFormVariant.UPDATE,selectedRowKey:K,type:J,initialValues:me,onSubmit:Ae,onCancel:ce},me==null?void 0:me.Id_);case ActionMode.EDIT_EDGE:return jsxRuntimeExports.jsx(DagEdgeForm,{type:J,selectedRowKey:K,initialValues:xe,onSubmit:pe,onCancel:ce},xe==null?void 0:xe.Id_);default:return jsxRuntimeExports.jsx(DagActionPlaceholder,{})}};return jsxRuntimeExports.jsxs("div",{className:styles$T.container,children:[jsxRuntimeExports.jsx("h5",{className:styles$T.actions,children:"Actions"}),ge(ne)]})},useDebounceValue=(K,J=500)=>{const[ne,oe]=reactExports.useState(K);return reactExports.useEffect(()=>{const ce=setTimeout(()=>{oe(K)},J);return()=>{clearTimeout(ce)}},[K,J]),ne},DagProvider=({type:K,pointer:J,isReadonly:ne,children:oe})=>{const ce=useSelector$1(selectActiveDataset$1),ue=reactExports.useRef(!0),Ae=reactExports.useRef(),[pe,xe,me]=useNodesState([]),[ge,ye,Se]=useEdgesState([]),[Te,Ne]=reactExports.useState({nodes:[],edges:[]}),[$e,ke]=reactExports.useState(ActionMode.NONE),[je,Ke]=reactExports.useState(!1),Ye=reactExports.useMemo(()=>({nodes:mapNodesToDTOs(pe),edges:mapEdgesToDTOs(ge)}),[pe,ge]),ze=useDebounceValue(Ye),Xe=reactExports.useCallback(Fe=>ye(qe=>addEdge(Fe,qe)),[ye]),Je=reactExports.useCallback(Fe=>{ne||me(Fe)},[ne]),rt=reactExports.useCallback(Fe=>{ne||Se(Fe)},[ne]),Ze=()=>{ue.current=!0,storageApi.getRecord({type:K,key:J,dataset:ce}).then(Fe=>{const qe=Fe.data;Ae.current=qe,xe(mapNodesToDomain(qe.Nodes)),ye(mapEdgesToDomain(qe.Edges))}).finally(()=>{ue.current=!1})},et=reactExports.useCallback(Fe=>{ne||xe(qe=>{const We={id:Fe.Id_,position:{x:Fe.Position.X,y:Fe.Position.Y},data:{label:Fe.Data.Label}};return qe.concat([We])})},[ne]),nt=reactExports.useCallback(Fe=>{ne||xe(qe=>qe.map(We=>We.id===Fe.Id_?{...We,position:{x:Fe.Position.X,y:Fe.Position.Y},data:{label:Fe.Data.Label}}:We))},[ne]),Ge=reactExports.useCallback(Fe=>{ne||ye(qe=>qe.map(We=>We.id===Fe.Id_?{...We,target:Fe.Target,source:Fe.Source,label:Fe.Label}:We))},[ne]),ve=reactExports.useCallback(()=>ke(ActionMode.ADD_NODE),[]),Be=reactExports.useCallback(()=>ke(ActionMode.NONE),[]),Re=reactExports.useCallback(Fe=>{ke(()=>Fe.nodes[0]?ActionMode.EDIT_NODE:Fe.edges[0]?ActionMode.EDIT_EDGE:ActionMode.NONE),Ne(Fe)},[]),Ie=reactExports.useCallback(Fe=>{const qe=Ae.current;if(!qe)throw new Error('Cannot save DAG object because "DAG ref" is empty');Ke(!0),storageApi.saveEntity({dataset:ce,data:[{...qe,Nodes:Fe.nodes,Edges:Fe.edges}]}).finally(()=>Ke(!1))},[J]);return reactExports.useEffect(Ze,[]),reactExports.useEffect(()=>{ue.current||ne||Ie(ze)},[ze,ne]),jsxRuntimeExports.jsx(DagContext.Provider,{value:{isReadonly:ne,isUpdating:je,pointer:J,type:K,actionMode:$e,activateAddNodeMode:ve,resetActionMode:Be,nodes:pe,edges:ge,setNodes:xe,setEdges:ye,onNodesChange:Je,onEdgesChange:rt,addNode:et,updateSelectedNode:nt,updateSelectedEdge:Ge,onConnect:Xe,selected:Te,onSelectionChange:Re},children:oe})},viewer="_viewer_tw82m_1",styles$S={viewer},proOptions={hideAttribution:!0},DagViewer$1=({className:K,nodes:J,edges:ne,onNodesChange:oe,onEdgesChange:ce,onConnect:ue,onSelectionChange:Ae})=>jsxRuntimeExports.jsx(ReactFlow,{className:cx(styles$S.viewer,K),nodes:J,edges:ne,onNodesChange:oe,onEdgesChange:ce,onConnect:ue,onSelectionChange:Ae,proOptions,fitView:!0}),DagContent=({className:K})=>{const{nodes:J,edges:ne,onNodesChange:oe,onEdgesChange:ce,onConnect:ue,onSelectionChange:Ae}=useDagContext();return jsxRuntimeExports.jsx(DagViewer$1,{className:K,nodes:J,edges:ne,onNodesChange:oe,onEdgesChange:ce,onConnect:ue,onSelectionChange:Ae})},buttonContainer="_buttonContainer_i0eks_1",zoomButtons="_zoomButtons_i0eks_8",styles$R={buttonContainer,zoomButtons},DagToolbar=()=>{const{t:K}=useTranslation(),{isUpdating:J,activateAddNodeMode:ne}=useDagContext(),{zoomIn:oe,zoomOut:ce}=useReactFlow(),ue=()=>oe(),Ae=()=>ce();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:styles$R.buttonContainer,children:[jsxRuntimeExports.jsx(rl,{iconBefore:jsxRuntimeExports.jsx(Dk,{}),onClick:ne,children:K("editor.addDagNode")}),jsxRuntimeExports.jsxs("div",{className:styles$R.zoomButtons,children:[jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:ue,iconBefore:jsxRuntimeExports.jsx(BB$1,{})}),jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:Ae,iconBefore:jsxRuntimeExports.jsx(AB,{})})]})]}),J&&jsxRuntimeExports.jsx(PF,{loading:!0})]})},container$p="_container_euh7c_1",content$a="_content_euh7c_7",dagContent="_dagContent_euh7c_14",dagActions="_dagActions_euh7c_18",styles$Q={container:container$p,content:content$a,dagContent,dagActions},Dag=reactExports.memo(({type:K,selectedRowKey:J,isReadonly:ne=!1})=>jsxRuntimeExports.jsx(ReactFlowProvider,{children:jsxRuntimeExports.jsx(DagProvider,{type:K,pointer:J,isReadonly:ne,children:jsxRuntimeExports.jsx("div",{className:styles$Q.container,children:jsxRuntimeExports.jsxs(PanelGroup,{direction:"horizontal",children:[jsxRuntimeExports.jsx(Panel$1,{id:"flow-viewer-content",order:1,defaultSize:60,children:jsxRuntimeExports.jsxs("div",{className:styles$Q.content,children:[!ne&&jsxRuntimeExports.jsx(DagToolbar,{}),jsxRuntimeExports.jsx(DagContent,{className:styles$Q.dagContent})]})}),!ne&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PanelResizeHandle,{className:"verticalPanelResizer"}),jsxRuntimeExports.jsx(Panel$1,{id:"flow-viewer-actions",order:1,minSize:0,maxSize:40,className:styles$Q.dagActions,children:jsxRuntimeExports.jsx(DagActions,{selectedRowKey:J})})]})]})})})}));Dag.displayName="Dag";const DagDictionaryCellFlat=({variantType:K="Missing",value:J})=>{const oe=(()=>{switch(K){case"Time":return isString$2(J)?DateFormatUtility.create(J,DateFormatEnum.TIME_MS).format(DateFormatEnum.TIME):"";case"Bool":return J?"Y":"N";case"DateTime":return isString$2(J)?DateFormatUtility.create(J).format(DateFormatEnum.DATE_TIME):"";default:return dataToString(J)}})();return jsxRuntimeExports.jsxs("div",{className:"dag-dictionary-cell-flat",children:[jsxRuntimeExports.jsx(mf,{title:oe,children:jsxRuntimeExports.jsx(Ml,{readOnly:!0,selectOnFocus:!0,variant:"borderless",value:oe})}),jsxRuntimeExports.jsx(mf,{title:K,children:jsxRuntimeExports.jsx("div",{className:"dag-dictionary-cell-flat__variant",children:jsxRuntimeExports.jsx("div",{className:"dag-dictionary-cell-flat__variant-name",children:K})})})]})},DagDictionaryViewValueCell=({value:K})=>{var ne,oe;const J=isArray$6(K)?"List":"Flat";if(J==="Flat"){const ce=K,ue=ce&&((ne=Object.keys(ce))==null?void 0:ne[0])||"",Ae=(ce&&((oe=Object.values(ce))==null?void 0:oe[0]))??"";return jsxRuntimeExports.jsx(DagDictionaryCellFlat,{variantType:ue,value:Ae})}return J==="List"?jsxRuntimeExports.jsx(Ml,{selectOnFocus:!0,readOnly:!0,variant:"borderless",value:dataToString(K)}):null},dagDictionaryViewKeyCell="_dagDictionaryViewKeyCell_12cik_1",styles$P={dagDictionaryViewKeyCell},DagDictionaryViewKeyCell=({value:K,title:J})=>{const[ne,{setFalse:oe,setTrue:ce}]=useBoolean(!1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(mf,{title:K,children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Ml,{variant:"borderless",selectOnFocus:!0,readOnly:!0,value:K,suffix:jsxRuntimeExports.jsx(EA,{onClick:ce})})})}),jsxRuntimeExports.jsx(Ho,{open:ne,title:J,onClose:oe,children:jsxRuntimeExports.jsx(Ho.Body,{className:styles$P.dagDictionaryViewKeyCell,children:jsxRuntimeExports.jsx(CodeEditor,{isReadonly:!0,code:K,language:LanguageEnum.Plaintext})})})]})},DagDictionaryView=({data:K})=>{const[J,ne]=reactExports.useState(0),[oe,ce]=reactExports.useState({}),ue=reactExports.useMemo(()=>(K==null?void 0:K.map(pe=>({dictKey:(pe==null?void 0:pe.key)||"",dictValue:pe!=null&&pe.value?pe.value:null})))||[],[K]),Ae=reactExports.useMemo(()=>[{id:"key",accessor:pe=>pe,width:200,Header:"Key",Cell:pe=>jsxRuntimeExports.jsx(DagDictionaryViewKeyCell,{title:pe.value.dictKey,value:pe.value.dictKey})},{id:"value",width:400,accessor:pe=>pe,Header:"Value",Cell:pe=>jsxRuntimeExports.jsx(DagDictionaryViewValueCell,{value:pe.value.dictValue})}],[]);return jsxRuntimeExports.jsx(Grid,{gridMode:GridModeEnum.EDITOR,columns:Ae,data:ue,selectedRowId:J.toString(),onChangeSelectedRowId:pe=>ne(+pe),selectedCheckbox:oe,onSelectedCheckboxChange:ce})},DagViewerNodeDetails=({node:K})=>{var ne,oe;const J=(ne=K.data.meta)!=null&&ne.NodeData&&isArray$6((oe=K.data.meta)==null?void 0:oe.NodeData)?K.data.meta.NodeData:[];return jsxRuntimeExports.jsxs("div",{className:"dag-viewer-node-details",children:[jsxRuntimeExports.jsx("div",{className:"dag-viewer-node-details__label",children:K.data.label}),jsxRuntimeExports.jsx("div",{className:"dag-viewer-node-details__dictionary",children:J.length===0?jsxRuntimeExports.jsx(RF,{}):jsxRuntimeExports.jsx(DagDictionaryView,{data:J})})]})},DagViewer=({Nodes:K,Edges:J})=>{const[ne,,oe]=useNodesState(mapNodesToDomain(K)),ce=mapEdgesToDomain(J),[ue,Ae]=reactExports.useState(),pe=reactExports.useCallback(me=>{const ge=me.filter(ye=>!isNodeRemoveChange(ye));oe(ge)},[]),xe=reactExports.useCallback(me=>Ae(me.nodes[0]),[]);return jsxRuntimeExports.jsxs(PanelGroup,{direction:"horizontal",children:[jsxRuntimeExports.jsx(Panel$1,{id:"dag-viewer",order:1,defaultSize:60,children:jsxRuntimeExports.jsx(DagViewer$1,{nodes:ne,edges:ce,onNodesChange:pe,onSelectionChange:xe})}),ue&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PanelResizeHandle,{className:"verticalPanelResizer"}),jsxRuntimeExports.jsx(Panel$1,{id:"dag-viewer-node-details",order:1,minSize:0,maxSize:40,children:jsxRuntimeExports.jsx(DagViewerNodeDetails,{node:ue})})]})]})},divider$2="_divider_5nygh_1",styles$O={divider:divider$2},Viewers=({activeTab:K,activeViewerType:J,data:ne,panelKey:oe,panelWithParamsName:ce,panelType:ue,onTransition:Ae,onRefresh:pe})=>{const xe=useSelector$1(selectActiveDataset$1),me=useSelector$1(selectActiveEnvironment),ge=useSelector$1(selectUser),ye=useSelector$1(selectIsDemoMode),Se=useSelector$1(selectApplicationTheme);return ce?jsxRuntimeExports.jsx(ParamsViewer,{activeTab:K,panelKey:oe,panelWithParamsName:ce}):ne?(Ne=>{const $e=cleanTypeHelper(Ne),ke={[ViewerTypesEnum.VariantTree]:jsxRuntimeExports.jsx("div",{children:"VariantTree"}),[ViewerTypesEnum.VariantTable]:!isArray$6(ne)&&jsxRuntimeExports.jsx(TableViewer,{...ne}),[ViewerTypesEnum.BinaryContent]:!isArray$6(ne)&&jsxRuntimeExports.jsx(BinaryContentContainer,{...ne}),[ViewerTypesEnum.VariantMatrix]:!isArray$6(ne)&&jsxRuntimeExports.jsx(MatrixViewer,{...ne}),[ViewerTypesEnum.ViewContainer]:!isArray$6(ne)&&jsxRuntimeExports.jsx(CompositeView,{...ne,onTransition:Ae}),[ViewerTypesEnum.Script]:!isArray$6(ne)&&jsxRuntimeExports.jsx(ScriptViewer,{data:ne}),[ViewerTypesEnum.FormattedVariantTable]:!isArray$6(ne)&&jsxRuntimeExports.jsx(FormattedVariantTable,{...ne}),[ViewerTypesEnum.DAG]:!isArray$6(ne)&&jsxRuntimeExports.jsx(DagViewer,{...ne}),[ViewerTypesEnum.ViewHandlerAction]:!isArray$6(ne)&&jsxRuntimeExports.jsx(ViewHandlerAction,{dataset:xe,viewerKey:oe,viewerType:ue,...ne,onTransition:Ae}),[ViewerTypesEnum.UIViewer]:!isArray$6(ne)&&jsxRuntimeExports.jsx(k_t,{data:ne,dataset:xe,dataSource:me,panelType:ue,panelKey:oe,activeTab:K,theme:Se,isDemoMode:ye,apiUrl:env.apiUrl,onRefresh:pe,toast,onTransition:Ae,axiosClient:axiosMain,userName:ge==null?void 0:ge.username,userKeys:externalStorage.getSecretKeys((ge==null?void 0:ge.username)??"")}),[ViewerTypesEnum.Dag]:!isArray$6(ne)&&jsxRuntimeExports.jsx(DagViewer,{...ne}),[ViewerTypesEnum.HtmlView]:!isArray$6(ne)&&jsxRuntimeExports.jsx(BinaryContentContainer,{...ne,FileType:"Html"}),[ViewerTypesEnum.PdfView]:!isArray$6(ne)&&jsxRuntimeExports.jsx(BinaryContentContainer,{...ne,FileType:"Pdf"}),[ViewerTypesEnum.PngView]:!isArray$6(ne)&&jsxRuntimeExports.jsx(BinaryContentContainer,{...ne,FileType:"Png"}),[ViewerTypesEnum.CsvView]:!isArray$6(ne)&&jsxRuntimeExports.jsx(BinaryContentContainer,{...ne,FileType:"Csv"}),[ViewerTypesEnum.EmptyView]:null}[$e];return ke?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$O.divider}),ke]}):ke===null?null:jsxRuntimeExports.jsx(DefaultViewer,{viewerType:ue,viewerKey:oe,data:ne,onTransition:Ae})})(J):jsxRuntimeExports.jsx(NoGridData,{content:t$5("noData.noData"),additionalContent:t$5("noData.emptyViewer"),icon:jsxRuntimeExports.jsx(Pp,{size:"Full"})})},selectGridSchema=K=>K.GridTabsDataSliceReducer.tabsData.metaData,ViewerContainer=({activeTab:K,panelKey:J,panelType:ne,onTransition:oe})=>{var Je,rt,Ze;const ce=reactExports.useRef(0),ue=useSelector$1(selectActiveDataset$1),Ae=useSelector$1(selectUser),{state:pe,action:xe}=useDndContext(),{isLoading:me,state:ge,fetch:ye,hasError:Se,isInitiated:Te}=useRequest(handlerApi.handlerRun),{data:Ne}=useSelector$1(selectGridSchema),$e=(Ze=(rt=(Je=Ne.Declare)==null?void 0:Je.Handlers)==null?void 0:rt.find(({Label:et,Type:nt,Params:Ge})=>et===K&&nt===HandlerType.VIEWER&&!!Ge))==null?void 0:Ze.Name,[ke,je]=reactExports.useState(null),Ke=async et=>{const nt=++ce.current;xe.updateIsLayoutBtnsDisabled(!0);const Ge={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"LoadRecordPanel",Keys:[],Arguments:{TypeName:ne,Key:J,PanelId:K},Dataset:ue,userName:Ae==null?void 0:Ae.username};await ye(Ge).then(ve=>{nt===ce.current&&je({activeTab:K,result:ve[0].Result})}).finally(()=>{xe.updateIsLayoutBtnsDisabled(!1),et==null||et()})};reactExports.useEffect(()=>{$e||Ke()},[J,ne,K]);const Ye=et=>{var nt,Ge;return isObject$9(et==null?void 0:et.ViewOf)?(nt=et==null?void 0:et.ViewOf)==null?void 0:nt._t:et&&Object.hasOwn(et,"Record")&&isObject$9(et==null?void 0:et.Record)?(Ge=et==null?void 0:et.Record)==null?void 0:Ge._t:isArray$6(et==null?void 0:et.Records)?et==null?void 0:et._t:(et==null?void 0:et._t)||""},ze=et=>et&&Object.hasOwn(et,"ViewOf")?et==null?void 0:et.ViewOf:et&&Object.hasOwn(et,"Record")?et==null?void 0:et.Record:et&&Object.hasOwn(et,"Records")?et==null?void 0:et.Records:et||void 0;if(Se||(ge==null?void 0:ge[0].StatusCode)===RunHandlerStatusCodeEnum.Failed)return jsxRuntimeExports.jsx(NoGridData,{content:"Data for this view is not yet available - refresh to try again",handleButtonClick:()=>{Ke()},isRefreshButton:!0});const Xe=me||!$e&&(Te||(ke==null?void 0:ke.activeTab)!==K);return jsxRuntimeExports.jsx(PF,{loading:Xe,children:jsxRuntimeExports.jsx(Viewers,{activeTab:K,panelType:ne,panelKey:J,panelWithParamsName:$e,activeViewerType:Ye((ke==null?void 0:ke.result)||null),data:ze((ke==null?void 0:ke.result)||null),onTransition:oe,onRefresh:()=>{var et;Ke((et=pe.headersRef.current)==null?void 0:et.handleEntitiesRefresh)}})})},columns=[{Header:"Type Name",accessor:"typeName",id:"typeName",Filter:FilterInput},{Header:"Package",accessor:"package",id:"package",Filter:FilterInput},{Header:"Module",accessor:"module",id:"module",Filter:FilterInput}],getRowsHelper=K=>K&&K.map(J=>columns.reduce((ne,oe,ce)=>({...ne,[oe.id]:ce===0?J.Label:J.Name}),{})),EditorButtonsGroup=({submitTitle:K,onSubmit:J,onCancel:ne,isCancelDisabled:oe,isSubmitDisabled:ce})=>{const{t:ue}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"editor-buttons-group",children:[jsxRuntimeExports.jsx(rl,{onClick:J,disabled:ce,children:ue(K)}),jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:ne,disabled:oe,children:ue("buttons.cancel")})]})},EditorSelectSuccessor=({type:K,onApplySuccessorType:J})=>{const{action:ne}=useAppContext(),[oe,ce]=reactExports.useState(),[ue,Ae]=reactExports.useState(),pe=useRequest(schemaApi.getTypeHierarchy),xe=async()=>{try{const je=(await pe.fetch({name:K})).filter(Ke=>Ke.Name!==K);ce(je)}catch(ke){toast.error(ke)}};reactExports.useEffect(()=>{xe()},[K]);const me=getRowsHelper(oe),ge=ke=>{if(!ke)return;const{module:je}=ke.original;Ae(je)},ye=ke=>ke.module,Se=ke=>{ne.setActiveEditorTabAction(EditorTabsEnum.NEW_ENTITY),J(ke)},Te=ke=>{if(ke){const{module:je}=ke.original;ge(ke),Se(je)}},Ne=()=>{ue&&Se(ue)},$e=()=>{ne.setActiveEditorTabAction(EditorTabsEnum.EDITOR)};return jsxRuntimeExports.jsx(PF,{loading:pe.isLoading||!me,children:jsxRuntimeExports.jsxs("div",{className:"editor-select-successor",children:[jsxRuntimeExports.jsx(Grid,{columns,data:me||[],isColumnFilter:!1,getRowId:ye,selectedRowId:ue,onChangeSelectedRowId:Ae,onRowDoubleClicked:Te}),jsxRuntimeExports.jsx(EditorButtonsGroup,{submitTitle:"buttons.apply",onSubmit:Ne,onCancel:$e})]})})},EditorEntity=({isDisableKeyFields:K,dataset:J,isReadOnly:ne,recordType:oe,recordKey:ce,breadcrumbs:ue,onUpdate:Ae,onTransition:pe,onChangeBreadcrumbs:xe,isEntityLoading:me,hasInitFetch:ge,entityState:ye,getEditorData:Se})=>{const{action:Te,state:Ne}=useAppContext(),{saveEntity:$e}=useEditorRequest(),{t:ke}=useTranslation();reactExports.useEffect(()=>{ce!==Ne.updatedRecordId&&Te.setSuccessMessage("")},[ce,Ne.updatedRecordId]);const je=()=>{Se(ce)},Ke=({data:Ye})=>{$e.fetch({data:Ye,recordType:oe}).then(ze=>{Ae==null||Ae({oldKey:ce,newKey:ze[0].Key}),Te.setIsEditorDataChangedAction(!1),Te.setSuccessMessage(ke("editor.entitySavedSuccessfully")),Te.setUpdatedRecordId(ce||""),setTimeout(()=>{Te.setSuccessMessage("")},5e3)}).catch(()=>Te.setSuccessMessage(""))};return me||!ge?jsxRuntimeExports.jsx(PF,{loading:!0}):ye?jsxRuntimeExports.jsx(EditorInstance,{dataset:J,breadcrumbs:ue,isDisableKeyFields:K,readOnly:ne,data:ye.data,schema:ye.schema.typeList,rootSchemaName:ye.schema.rootType,onTransition:pe,onCancel:je,onSubmit:Ke,onChangeBreadcrumbs:xe,onChangeData:Te.setIsEditorDataChangedAction,message:Ne.successMessage}):jsxRuntimeExports.jsx(RF,{})},EditorNewEntity=({recordType:K,recordKey:J,onUpdate:ne,onCancel:oe})=>{const ce=useSelector$1(selectGridSchema),{action:ue}=useAppContext(),{getSchema:Ae,saveEntity:pe}=useEditorRequest();reactExports.useEffect(()=>{K&&Ae.fetch({name:K})},[K]);const xe=({data:ge})=>{pe.fetch({data:ge,recordType:K,isInsert:!0}).then(ye=>{ne==null||ne({oldKey:J,newKey:ye[0].Key})})},me=()=>{ue.setActiveEditorTabAction(ce.data.Kind===KindTypeModel.ABSTRACT?EditorTabsEnum.SELECT_TYPE:EditorTabsEnum.EDITOR),oe==null||oe()};return Ae.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):Ae.state?jsxRuntimeExports.jsx(EditorInstance,{schema:Ae.state.typeList,rootSchemaName:Ae.state.rootType,onCancel:me,onSubmit:xe,isCancelDisabled:!1}):jsxRuntimeExports.jsx(RF,{})},EditorSingleton=({recordType:K,dataset:J,isReadOnly:ne,onUpdate:oe})=>{const{getRecord:ce,saveEntity:ue}=useEditorRequest();reactExports.useEffect(()=>{K&&pe()},[K,J]);const Ae=({data:xe})=>{ue.fetch({data:xe,recordType:K}).then(me=>{oe==null||oe({newKey:me[0].Key})})},pe=()=>{ce.fetch({key:"",type:K,dataset:J})};return ce.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):ce.state?jsxRuntimeExports.jsx(EditorInstance,{readOnly:ne,data:ce.state.data,schema:ce.state.schema.typeList,rootSchemaName:ce.state.schema.rootType,onCancel:pe,onSubmit:Ae}):jsxRuntimeExports.jsx(RF,{})},createCopyDataWithoutKeyFieldsBySchema=(K,J)=>{var ce;const ne=K.typeList[K.rootType],oe=deepClone(J);return(ce=ne.Keys)==null||ce.forEach(ue=>{oe[ue]&&(oe[ue]=null)}),oe},EditorCopyEntity=({dataset:K,recordType:J,recordKey:ne,onUpdate:oe,onCancel:ce})=>{const{action:ue}=useAppContext(),{getRecord:Ae,saveEntity:pe}=useEditorRequest();reactExports.useEffect(()=>{J&&ne&&xe()},[J,K,ne]);const xe=Se=>{Ae.fetch({key:ne,type:J,dataset:K})},me=({data:Se})=>{pe.fetch({data:Se,recordType:J,isInsert:!0}).then(Te=>{oe==null||oe({oldKey:ne,newKey:Te[0].Key})})},ge=()=>{ue.setActiveEditorTabAction(EditorTabsEnum.EDITOR),ce==null||ce()},ye=reactExports.useMemo(()=>Ae.state?createCopyDataWithoutKeyFieldsBySchema(Ae.state.schema,Ae.state.data):null,[Ae.state]);return Ae.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):!Ae.state||!ye?jsxRuntimeExports.jsx(RF,{}):jsxRuntimeExports.jsx(EditorInstance,{data:ye,schema:Ae.state.schema.typeList,rootSchemaName:Ae.state.schema.rootType,onCancel:ge,onSubmit:me,isCancelDisabled:!1})},EditorTabContent=({activeTab:K,type:J,transitionTab:ne,selectedGridRow:oe,successorType:ce,breadcrumbs:ue,onChangeBreadcrumbs:Ae,onTransition:pe,onApplySuccessorType:xe,onUpdate:me,isEntityLoading:ge,hasInitFetch:ye,entityState:Se,getEditorData:Te})=>{const{state:Ne,action:$e}=useAppContext(),{state:ke,action:je}=useDndContext(),{activeEditorTab:Ke}=Ne,Ye=useSelector$1(selectMetaData),ze=useSelector$1(selectIsReadonly),Xe=useSelector$1(selectActiveDataset$1),Je=ze||ke.isTypeReadOnly,rt=et=>{me==null||me(et),$e.setActiveEditorTabAction(EditorTabsEnum.EDITOR),ke.maximizedTabId&&je.updateMaximizedTabId(`stack-${EditorTabsEnum.EDITOR}`,!0)},Ze=()=>{ke.maximizedTabId&&je.updateMaximizedTabId("",!0)};return Ye.data.DisplayKind===SchemaDisplayKind.Singleton?jsxRuntimeExports.jsx(EditorSingleton,{dataset:Xe,isReadOnly:Je,recordType:J,onUpdate:rt}):K!=null&&K.includes(EditorTabsEnum.EDITOR_TRANSITION)&&(ne!=null&&ne.type)&&(ne!=null&&ne.key)?jsxRuntimeExports.jsx(EditorEntity,{isDisableKeyFields:!0,isReadOnly:Je,recordType:ne.type,recordKey:ne.key,onTransition:pe,isEntityLoading:ge,hasInitFetch:ye,entityState:Se,getEditorData:Te},K):K===EditorTabsEnum.EDITOR&&K===Ke?jsxRuntimeExports.jsx(EditorEntity,{dataset:Xe,isReadOnly:Je,recordType:J,recordKey:(oe==null?void 0:oe.key)||"",breadcrumbs:ue,onChangeBreadcrumbs:Ae,onUpdate:rt,onTransition:pe,isEntityLoading:ge,hasInitFetch:ye,entityState:Se,getEditorData:Te}):K===EditorTabsEnum.NEW_ENTITY&&K===Ke?jsxRuntimeExports.jsx(EditorNewEntity,{recordType:ce??J,recordKey:oe==null?void 0:oe.key,onUpdate:rt,onCancel:Ze}):K===EditorTabsEnum.COPY_ENTITY&&K===Ke&&(oe!=null&&oe.key)?jsxRuntimeExports.jsx(EditorCopyEntity,{recordType:oe.type??J,recordKey:oe.key,onUpdate:rt,onCancel:Ze}):K===EditorTabsEnum.SELECT_TYPE?jsxRuntimeExports.jsx(EditorSelectSuccessor,{type:J,onApplySuccessorType:xe}):K===EditorTabsEnum.DAG&&(oe!=null&&oe.type)&&oe.key?jsxRuntimeExports.jsx(Dag,{type:oe.type,selectedRowKey:oe.key}):K&&!EDITOR_TABS[K]?jsxRuntimeExports.jsx(ViewerContainer,{panelKey:oe==null?void 0:oe.key,panelType:J,activeTab:K,onTransition:pe}):jsxRuntimeExports.jsx(NoGridData,{content:t$5("noData.inTheReport")})},styleDraggingTab=K=>{const{blockPointer:J,tab:ne,event:oe,originalPositionX:ce,originalPositionY:ue,dropPreview:Ae,tabInitialLeftPosition:pe}=K,xe=oe.clientX-ce,me=oe.clientY-ue,ge=Ae;ne.style.display="flex",ne.style.width=`${ne.offsetWidth}px`,ne.style.height=`${ne.offsetHeight}px`,ne.style.left=`${pe}px`,ne.style.position="fixed",ne.style.top=`${ne.offsetTop}px`,J&&(ne.style.pointerEvents="none"),ne.style.transform=`translate(${xe}px, ${me}px)`,ne.style.zIndex="5000",ge&&!ge.classList.contains("displayNone")&&(ge.style.pointerEvents="none",ge.style.position="fixed",ge.style.top=`${ne.offsetTop||ge.style.top}px`,ge.style.left=`${ne.offsetLeft||ge.style.left}px`,ge.style.transform=`translate(${xe}px, ${me}px)`,ne.style.display="none")},container$o="_container_adjvv_1",sliding="_sliding_adjvv_5",styles$N={container:container$o,sliding},DnDDraggable=({className:K,children:J,index:ne,openedTabs:oe,onCloseTab:ce,stackRef:ue,isActiveTab:Ae=!1})=>{const{state:pe,action:xe}=useDndContext(),{config:me,blockDnd:ge,leftMouseBtnClicked:ye,isDragging:Se,tabsZone:Te,initialTabsZone:Ne,dropZone:$e,targetStackRef:ke,draggingLabel:je,startTabIndex:Ke,endTabIndex:Ye,dropPreview:ze,dropMarker:Xe,draggingTabRef:Je,draggingTabOffsetWidthRef:rt,mouseCoord:Ze,isWithinTabs:et,placeholder:nt,shouldInsertPlaceholder:Ge,mouseUpHandlerRef:ve,isTabExistInStackRef:Be}=pe,{updateConfig:Re,setLeftMouseBtnClicked:Ie,setIsDragging:Fe,setInitialTabsZone:qe,setDraggingLabel:We,setStartTabIndex:Ue,setEndTabIndex:_e,updateMouseCoord:Qe,updateIsWithinTabs:tt,setPlaceholder:it,setShouldInsertPlaceholder:at}=xe,[ot,lt]=reactExports.useState(0),[st,ut]=reactExports.useState(0),[ft,dt]=reactExports.useState(!1),[Bt,pt]=reactExports.useState(!0),[mt,bt]=reactExports.useState(void 0),xt=reactExports.useRef(!0),yt=reactExports.useRef(null),It=reactExports.useRef(0),ht=reactExports.useRef(!0),gt=reactExports.useRef(null),Pt=reactExports.useRef(0),wt=reactExports.useRef(0),St=(Tt,or)=>{var $t,jt;const Mt=(($t=Je.current)==null?void 0:$t.closest(".droppable"))===or,kt=Array.from(((jt=or.querySelector(".ant-tabs-nav-list"))==null?void 0:jt.childNodes)||[]).filter(nr=>nr.dataset.index!==void 0),ur=kt.findIndex(nr=>nr===Je.current);kt.forEach((nr,Ot)=>{var Xt,ir,Mr;const Lt=Ot>ur?rt.current:0,lr=((Xt=nr.closest(".droppable"))==null?void 0:Xt.offsetLeft)-wt.current,Ht=Be.current?0:Number((ir=nr.parentNode.style.left.match(/(-?[0-9\.]+)/g))==null?void 0:ir[0])||0,qt=Math.round(lr+nr.offsetLeft+nr.offsetWidth/(Ot===0?1:2)+Lt-Ze.x),tr=Tt.clientX>lr+nr.offsetLeft+Ht,Vt=Tt.clientX<lr+nr.offsetLeft+nr.offsetWidth/2+Ht,Gt=Tt.clientX>lr+nr.offsetLeft+nr.offsetWidth/2+Ht,br=Tt.clientX<lr+nr.offsetLeft+nr.offsetWidth+Ht,Yt=Tt.clientX>lr+nr.offsetLeft+Je.current.offsetWidth+Ht,Kt=Tt.clientX<nr.offsetLeft+lr+nr.offsetWidth/2+Je.current.offsetWidth+Ht,yr=Tt.clientX>lr+nr.offsetLeft+nr.offsetWidth/2+Je.current.offsetWidth+Ht,zt=Tt.clientX>lr+nr.offsetLeft+Ht,Jt=Tt.clientX<lr+nr.offsetLeft+nr.offsetWidth+Ht,xr=Tt.clientX<lr+nr.offsetLeft+nr.offsetWidth+Je.current.offsetWidth+Ht;if(ur>=0)tr&&Vt&&Ot<ur&&Ot!==0?_e(Ot):Gt&&br&&Ot<ur&&Ot!==0?_e(Ot+1):tr&&br&&Ot===0?_e(Ot):Ot>ur&&Yt&&Kt?_e(Ot-1):(Ot>ur&&yr&&xr||Ot===ur&&zt&&Jt)&&_e(Ot);else{const er=(Mr=nr.getAttribute("style"))!=null&&Mr.includes("transform")?Je.current.offsetWidth:0,fr=Tt.clientX<nr.offsetLeft+nr.offsetWidth/2+er+Ht;Ot===0&&tr&&br?_e(Ot):Ot===0&&tr&&fr?_e(Ot+1):Ot!==0&&tr&&Vt?_e(Ot):Ot!==0&&Gt&&br&&_e(Ot+1)}Tt.clientX-(Ze.x-(ht.current&&Mt?0:Lt)+(Be.current?0:Ht))<=qt?nr.style.transform=`translate(${rt.current}px, 0px)`:nr.style.transform=""})},Zt=(Tt,or)=>{for(;It.current<=0;)St(Tt,or),It.current=It.current+1},Ct=reactExports.useCallback(Tt=>{var Ht,qt,tr,Vt,Gt;if(!gt.current)return;!Se&&(Math.abs(Ze.x-Tt.clientX)>5||Math.abs(Ze.y-Tt.clientY)>5)&&Fe(!0);const or=Tt.target.closest(".tab-wrapper"),Mt=Tt.target.closest(".droppable");if((Mt==null?void 0:Mt.dataset.position)==="tabs"){if(Zt(Tt,Mt),or&&or!==Je.current){const br=Number((Ht=or.parentNode.style.left.match(/(-?[0-9\.]+)/g))==null?void 0:Ht[0])||0;Be.current&&(wt.current=Math.abs(br)),(qt=or==null?void 0:or.getAttribute("style"))!=null&&qt.includes("transform")?Tt.clientX>Math.round(Je.current.offsetWidth+or.offsetLeft+(Number(or==null?void 0:or.dataset.index)===0?0:or.offsetWidth/2)+br)&&(It.current=0,Zt(Tt,Mt)):(Tt.clientX<Math.round(((tr=or.closest(".droppable"))==null?void 0:tr.offsetLeft)+or.offsetLeft+or.offsetWidth/(Number(or==null?void 0:or.dataset.index)===0?1:2))&&(It.current=0,Zt(Tt,Mt)),ht.current===!1&&Tt.clientX>Math.round(((Vt=or.closest(".droppable"))==null?void 0:Vt.offsetLeft)+or.offsetLeft+or.offsetWidth/(Number(or==null?void 0:or.dataset.index)===0?1:2))&&(It.current=0,Zt(Tt,Mt),ht.current=!0))}}else ht.current===!0&&(ht.current=!1);const kt={blockPointer:!0,tab:gt.current,event:Tt,originalPositionX:ot,originalPositionY:st,dropPreview:ze.current,tabInitialLeftPosition:Pt.current};if(styleDraggingTab(kt),!document.elementFromPoint(Tt.clientX,Tt.clientY))return;Mt||(Gt=Xe.current)==null||Gt.classList.add("displayNone");const $t=JSON.parse(JSON.stringify(me)),jt=findParent($t,[je.id]);if(!jt)return;const nr=Ke===jt.content.length-(pe.hideEditor?2:1)?Ke-1:Ke+1,Ot=pe.hideEditor?1:0,Lt=jt.content[Ke+Ot],lr=jt.content[nr+Ot];Lt&&lr&&isGridTabDataType(Lt)&&Lt.isActive&&isGridTabDataType(lr)&&Bt&&(Math.abs(Ze.x-Tt.clientX)>5||Math.abs(Ze.y-Tt.clientY)>5)&&(lr.isActive=!0,Lt.isCurrentlyDragging=!0,Re($t),pt(!1))},[ot,st,gt.current,je,ye,Te,ke,ft,ze,Bt,ge,Ne,mt,Ze,et,Se,xt.current]),Rt=reactExports.useCallback(()=>{var kt,ur,$t;if(document.body.style.cursor="auto",ht.current=!0,It.current=0,tt(!0),Qe({x:0,y:0}),Ie(!1),!gt.current)return;nt&&!Ge&&(nt.remove(),it(null),at(!0),xt.current=!0);let Tt=gt.current,or=Tt;for(;Tt;)Tt.classList.remove("active"),Tt.removeAttribute("style"),Tt=Tt.previousSibling;for(;or;)or.classList.remove("active"),or.removeAttribute("style"),or=or.nextSibling;let Mt=Te==null?void 0:Te.firstChild;for(;Mt;)Mt.removeAttribute("style"),Mt=Mt.nextSibling;if(gt.current.removeAttribute("style"),(kt=document.activeElement)==null||kt.blur(),gt.current=null,(ur=ze.current)==null||ur.classList.add("displayNone"),($t=Xe.current)==null||$t.classList.add("displayNone"),pt(!0),je&&Se){const jt=structuredClone(me),nr=findParent(jt,[je.id]);nr&&(nr.content.forEach(Ot=>{Ot.isCurrentlyDragging=!1,Ot.isActive=Ot.id===je.id}),Re(jt)),Je.current=null,Fe(!1)}},[Se,Ke,Ye,gt.current,$e,je,ye,Te,ke,ze,Bt,Xe,ge,Ne,me,et,nt,Ge,xt.current]),dr=Tt=>{Tt.preventDefault()};reactExports.useEffect(()=>{Ge&&!xt.current&&(xt.current=!0)},[Ge,xt.current]),reactExports.useEffect(()=>{ye&&Te===null&&yt.current&&(yt.current.style.transform="",Je.current&&_e(Number(Je.current.dataset.index)))},[Te]),reactExports.useEffect(()=>(ye&&(document.addEventListener("mousemove",Ct),window.addEventListener("selectstart",dr)),()=>{document.removeEventListener("mousemove",Ct),window.removeEventListener("selectstart",dr)}),[ot,st,Ke,Ye,Ct,Rt,$e,je,ye,ge,et,Se]),reactExports.useEffect(()=>{!ye&&je&&(Fe(!1),dt(!1))},[ye,je]);const Dt=reactExports.useCallback(Tt=>{var nr;if(document.body.style.cursor="grabbing",ge||!yt.current){document.body.style.cursor="auto";return}ve.current=Rt;const or=yt.current.parentNode,Mt=window.getComputedStyle(or).left.match(/(-?[0-9\.]+)/g);if(or.style.left=`${Mt[0]}px`,wt.current=Math.abs(Number(Mt[0])),Qe({x:Tt.clientX,y:Tt.clientY}),Je.current=yt.current,rt.current=yt.current.offsetWidth,Tt.button===ButtonCode.MIDDLE){const Ot=(nr=yt.current)==null?void 0:nr.dataset.index;Ot&&oe[Number(Ot)].isClosable&&handleMouseDown(Tt,{[ButtonCode.MIDDLE]:ce}),document.body.style.cursor="auto";return}if(gt.current=yt.current,!gt.current)return;const kt=gt.current.parentNode,ur=kt==null?void 0:kt.childNodes;bt(ur),qe(kt),Ie(!0),We(oe[+gt.current.dataset.index]),Ue(+gt.current.dataset.index),_e(+gt.current.dataset.index),lt(Tt.pageX),ut(Tt.pageY);const $t=gt.current.getBoundingClientRect();Pt.current=$t.left;const jt={blockPointer:!1,tab:gt.current,event:Tt.nativeEvent,originalPositionX:Tt.pageX,originalPositionY:Tt.pageY,tabInitialLeftPosition:Pt.current};Xe.current&&(Xe.current.style.top=`${jt.tab.offsetTop+jt.tab.offsetHeight}px`),Be.current=!0},[gt.current,Ke,Ye,ot,st,ye,me,Xe,ge,Ne]);return jsxRuntimeExports.jsx("div",{className:cx(styles$N.container,{displayNone:(ue==null?void 0:ue.id.includes("main"))&&ue.content.length===1&&!Se},K,{[styles$N.sliding]:Se&&yt.current!==Je.current}),"data-index":ne,"data-tid":Ae?"draggable-tab-active":"draggable-tab",onMouseDown:Tt=>Dt(Tt),onMouseUp:()=>{rt.current=0},ref:yt,children:J})},EditorTabs=({activeTabs:K,activeTab:J,tabs:ne,onChangeTab:oe,onCloseTab:ce,stackRef:ue})=>{var Be,Re;const{t:Ae}=useTranslation(),{state:pe,action:xe}=useAppContext(),{state:me,action:ge}=useDndContext(),{config:ye,selectedGridRow:Se,leftMouseBtnClicked:Te}=me,{updateConfig:Ne}=ge,{debounce:$e}=useDebounce(200),ke=reactExports.useRef(null),Ke=useSelector$1(selectMetaData).data.DisplayKind===SchemaDisplayKind.Dashboard,Ye=Ie=>{const{label:Fe,id:qe,isClosable:We,key:Ue,disableActions:_e}=Ie;return{isActive:qe===J||(K==null?void 0:K.some(Qe=>Qe===qe))||!1,label:Ae(Fe),isClosable:We,disableActions:_e,role:"tab",isRecordTab:Ue.includes(EditorTabsEnum.EDITOR_TRANSITION),isDashboardTab:Ke,isDnDTab:!0,onClick:()=>{J!==qe&&oe(Ie),J!==qe&&!pe.showLineHider&&xe.setShowLineHiderAction(!0)},onCloseTab:Qe=>{var tt;if(Qe==null||Qe.stopPropagation(),J===qe&&!pe.showLineHider&&xe.setShowLineHiderAction(!0),We!==!1&&(ce==null||ce(Ie)),ue&&Se&&Se.type){const it=structuredClone(ye),at=findParent(it,[Ie.id]),ot=at.content.findIndex(ft=>ft.id===Ie.id),lt=findTarget(at,EditorTabsEnum.EDITOR);lt&&Ie.isActive&&isGridTabDataType(lt)?lt.isActive=!0:at.content.length-1>ot&&Ie.isActive?at.content[ot+1].isActive=!0:at.content.length>1&&at.content.length-1===ot&&Ie.isActive&&(at.content[ot-1].isActive=!0),at.content.splice(ot,1);const st=correctContent(it);st.id=`${st.type}-${(tt=st.content[0])==null?void 0:tt.key.replace(/\s/g,"")}`,st.key=st.id;const ut=getParsedConfig(st,!0);Ne(st),ge.saveUiTypeData({simplifiedConfig:ut})}}}},ze=(Be=ue==null?void 0:ue.content.find(Ie=>Ie.isActive&&!Ie.isCurrentlyDragging))==null?void 0:Be.id,Xe=ne.map(Ie=>({...Ie,...Ye(Ie),closable:Ie.isClosable})),Je=Ie=>{const Fe=Xe.find(qe=>qe.id===Ie);Fe==null||Fe.onClick()},rt=Ie=>{var qe;const Fe=Xe.find(We=>We.id===Ie);(qe=Fe==null?void 0:Fe.onCloseTab)==null||qe.call(Fe)},Ze=reactExports.useRef(null),et=reactExports.useRef(ue&&((Re=me.stacksTabsScrollPosition.current)==null?void 0:Re[ue==null?void 0:ue.id])||0);reactExports.useEffect(()=>{const Ie=ke.current;if(!Ie)return;const Fe=new ResizeObserver(()=>{ze&&$e({fn:()=>ve(ze,!1)})});return Fe.observe(Ie),()=>Fe.disconnect()},[ze]),reactExports.useEffect(()=>{var Ie,Fe;!Ze.current||!me.isLayoutRestored||(((Fe=(Ie=Ze.current)==null?void 0:Ie.firstChild)==null?void 0:Fe.firstChild).style.left="0px",et.current=0,ue&&(me.stacksTabsScrollPosition.current[ue.id]=et.current),ge.setIsLayoutRestored(!1))},[me.isLayoutRestored]),reactExports.useEffect(()=>{var Fe,qe,We,Ue,_e,Qe;const Ie=ue==null?void 0:ue.content.findIndex(tt=>tt.isActive);if(Ie>=0&&Ze.current){const tt=(qe=(Fe=Ze.current.firstChild)==null?void 0:Fe.firstChild)==null?void 0:qe.childNodes[Ie],it=tt.getBoundingClientRect(),at=((We=Ze.current)==null?void 0:We.firstChild).offsetWidth;if(at<it.width||at===0&&it.width===0)return;const ot=at>tt.offsetLeft+it.width,lt=ot?0:at-tt.offsetLeft-it.width,st=!ot&&((Ue=Ze.current.querySelector(".ant-tabs-nav-operations"))==null?void 0:Ue.getBoundingClientRect().width)||0;((Qe=(_e=Ze.current)==null?void 0:_e.firstChild)==null?void 0:Qe.firstChild).style.left=`${lt-st}px`,et.current=lt-st}return()=>{var tt;Ze.current&&(((tt=Ze.current.firstChild)==null?void 0:tt.firstChild).style.left="0px"),ue&&(me.stacksTabsScrollPosition.current[ue.id]=0)}},[]),reactExports.useEffect(()=>{var Fe,qe;const Ie=We=>{var _e,Qe,tt,it,at;const Ue=((Qe=(_e=Ze.current)==null?void 0:_e.firstChild)==null?void 0:Qe.firstChild).offsetWidth-((tt=Ze.current)==null?void 0:tt.firstChild).offsetWidth;et.current>=0&&We.deltaY<0||-et.current>=Ue&&We.deltaY>0||(et.current-=We.deltaY,et.current>0?et.current=0:Ue+et.current<We.deltaY&&We.deltaY>0&&(et.current-=Ue+et.current),((at=(it=Ze.current)==null?void 0:it.firstChild)==null?void 0:at.firstChild).style.left=`${et.current}px`)};return(qe=(Fe=Ze.current)==null?void 0:Fe.firstChild)==null||qe.addEventListener("wheel",Ie),()=>{var We,Ue;(Ue=(We=Ze.current)==null?void 0:We.firstChild)==null||Ue.removeEventListener("wheel",Ie)}},[Ze.current,et.current]),reactExports.useEffect(()=>{var Ie,Fe;((Fe=(Ie=Ze.current)==null?void 0:Ie.firstChild)==null?void 0:Fe.firstChild).style.left=`${et.current}px`},[Ze.current]);const nt=Ie=>{var qe,We,Ue;const Fe=Xe.findIndex(_e=>_e.id===Ie);return(Ue=(We=(qe=Ze.current)==null?void 0:qe.firstChild)==null?void 0:We.firstChild)==null?void 0:Ue.children[Fe]},Ge=(Ie,Fe)=>{var Ue;const qe=((Ue=Ze.current)==null?void 0:Ue.firstChild).offsetWidth;return qe>Ie.offsetLeft+Fe.width?0:qe-Ie.offsetLeft-Fe.width},ve=(Ie,Fe)=>{var _e,Qe;const qe=nt(Ie);if(!qe)return;const We=qe.getBoundingClientRect();Fe&&Je(Ie);const Ue=Ge(qe,We);((Qe=(_e=Ze.current)==null?void 0:_e.firstChild)==null?void 0:Qe.firstChild).style.left=`${Ue}px`,et.current=Ue,ue&&(me.stacksTabsScrollPosition.current[ue.id]=et.current)};return jsxRuntimeExports.jsx("div",{ref:ke,children:jsxRuntimeExports.jsx(DropBox,{position:DropBoxEnum.TOP,stackRef:ue,className:"drop-box-editor",children:jsxRuntimeExports.jsx(wF,{testId:"editor-tabs",className:cx("non-scrollable",{draggable:Te}),variant:"card",items:Xe,activeKey:ze,onClose:rt,renderTabBar:(Ie,Fe)=>{const qe={...Ie,ref:Ze};return qe.onTabClick=We=>ve(We,!0),jsxRuntimeExports.jsx(Fe,{...qe,children:We=>{const Ue=Xe.findIndex(_e=>_e.id===We.key);return jsxRuntimeExports.jsx(DnDDraggable,{index:Ue,openedTabs:ne,onCloseTab:Xe[Ue].onCloseTab,stackRef:ue,className:"drop-box-editor__tab",isActiveTab:Xe[Ue].isActive,children:We},We.key)}})}})})})};var RecordEvent=(K=>(K.UpdateRecord="Update",K))(RecordEvent||{});const recordEventManager=createEventManager(),container$n="_container_1xmi4_1",content$9="_content_1xmi4_10",styles$M={container:container$n,content:content$9},useAppSelector=useSelector$1,useAppDispatch=()=>useDispatch$1(),button="_button_larhw_1",styles$L={button},CancelButton=()=>{const{t:K}=useTranslation(),J=useSelector$1(selectActiveDataset$1),{action:ne}=useDndContext(),oe=ce=>{ce.stopPropagation(),handlerApi.cancelAll(J).then(ue=>{if(!ue.length)return;const Ae=ue.map(pe=>pe.TaskRunId);ne.setAllCanceledHandlerIds(Ae),ne.setAllTasksStatuses(ue),ne.changeRecordStatuses(ue)}).catch(toast.error)};return jsxRuntimeExports.jsx(mf,{title:K("header.cancelButton.tooltip"),children:jsxRuntimeExports.jsx(rl,{onClick:oe,type:"danger",variant:"ghost",testid:"cancel-all-handlers-btn",className:styles$L.button,children:K("gridToolbar.stopAll")})})},text="_text_89kl0_1",styles$K={text},HighlightTextMatch=({text:K,searchText:J,isTypesSearch:ne=!1})=>{const oe=new RegExp(`(${escapeStringRegexp(J)})`,"gi"),ce=me=>me.replaceAll(" ","").toLowerCase(),ue=ce(J),Ae=(me,ge)=>jsxRuntimeExports.jsx("span",{className:styles$K.text,children:me},ge);if(!J)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:K});const pe=K.split(" ").map(me=>me.charAt(0)).join("").toLowerCase(),xe=()=>{const me=[];let ge=J;return K.split(" ").forEach((ye,Se)=>{var Te;ye[0].toLowerCase()===((Te=ge[0])==null?void 0:Te.toLowerCase())?(ge=ge.substring(1),me.push(Ae(ye[0],Se),`${ye.substring(1)} `)):me.push(`${ye} `)}),me};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ne&&pe.includes(J.toLowerCase())?xe().map(me=>me):K.split(oe).map((me,ge)=>ce(me)===ue?Ae(me,ge):me)})},getHandlerIcon=(K,J)=>{const ne=J?jsxRuntimeExports.jsx(LA,{}):jsxRuntimeExports.jsx(tD,{});switch(K){case LoadingStatusesEnum.LOADING:return jsxRuntimeExports.jsx(j_,{className:"handler-loading-icon"});case LoadingStatusesEnum.SUCCESS:return jsxRuntimeExports.jsx(__$1,{className:"handler-success-icon"});case LoadingStatusesEnum.ERROR:return jsxRuntimeExports.jsx(PA,{className:"handler-error-icon"});default:return ne}},cancelIcon="_cancelIcon_1dwig_1",title$1="_title_1dwig_9",loadingStatus="_loadingStatus_1dwig_14",successStatus="_successStatus_1dwig_18",errorStatus="_errorStatus_1dwig_22",dropdownMenu="_dropdownMenu_1dwig_26",itemsList="_itemsList_1dwig_32",dropdownItem="_dropdownItem_1dwig_38",styles$J={cancelIcon,title:title$1,loadingStatus,successStatus,errorStatus,dropdownMenu,itemsList,dropdownItem},HandlersDropdown=({handlers:K,onPinHandler:J,onHandlerClick:ne,onCancelHandler:oe,isReadOnly:ce=!1,isSearch:ue,searchText:Ae="",children:pe,isOpenMenu:xe,setIsOpenMenu:me,setSearch:ge})=>{const{t:ye}=useTranslation(),{state:Se}=useDndContext(),Te=($e,ke)=>{oe($e,ke)},Ne=$e=>$e.map(ke=>{var nt;const{isStatic:je,key:Ke,id:Ye,name:ze,isDisable:Xe,comment:Je,isPinned:rt}=ke,Ze=(nt=Se.executedHandlersInfoByRecord[Ke])==null?void 0:nt.status,et=Ze===LoadingStatusesEnum.LOADING;return{key:Ye,prefix:getHandlerIcon(Ze,je),suffix:et?jsxRuntimeExports.jsx(Pp,{className:styles$J.cancelIcon,onClick:()=>Te(Ye,je)}):void 0,title:ue?jsxRuntimeExports.jsx(HighlightTextMatch,{text:ze,searchText:Ae}):ze,titleClassName:cx(styles$J.title,{[styles$J.loadingStatus]:et,[styles$J.successStatus]:Ze===LoadingStatusesEnum.SUCCESS,[styles$J.errorStatus]:Ze===LoadingStatusesEnum.ERROR}),description:Je||"",isDisabled:Xe||ce,onClick:()=>{!et&&!Xe&&!ce&&(ne(ke),ge==null||ge(""),xe&&me(!1))},actions:jsxRuntimeExports.jsx(rl,{variant:"ghost",iconAfter:rt?jsxRuntimeExports.jsx(fB,{}):jsxRuntimeExports.jsx(vB,{}),type:rt?"primary":"secondary",onClick:()=>J(ke),disabled:ce}),className:styles$J.dropdownItem}});return jsxRuntimeExports.jsx(X_,{open:xe,onOpenChange:me,dropdownRender:()=>jsxRuntimeExports.jsx("div",{className:styles$J.dropdownMenu,children:K!=null&&K.length?jsxRuntimeExports.jsx(EF,{items:Ne(K),maxCharacters:80,className:styles$J.itemsList}):ye("typeToolbar.emptyRunHanlers")}),children:pe})};var HandlersTypeEnum=(K=>(K.MainGrid="MainGrid",K.Editor="Editor",K))(HandlersTypeEnum||{}),HandlerContentTypeEnum=(K=>(K.BinaryContent="FileData",K.UiNavigationLink="UiNavigationLink",K.ExternalLink="ExternalLink",K))(HandlerContentTypeEnum||{});const handlerContainer="_handlerContainer_19ams_1",handlerInput="_handlerInput_19ams_6",styles$I={handlerContainer,handlerInput},RunHandlers=({handlers:K=[],onPinHandler:J,onHandlerClick:ne,onCancelHandler:oe,isReadOnly:ce=!1,lastHandlerStatus:ue,selectedRowKey:Ae,handlersType:pe})=>{const{t:xe}=useTranslation(),[me,ge]=reactExports.useState(""),[ye,Se]=reactExports.useState(!1),Te=ke=>{ye||Se(!0),ge(ke)},Ne=K.filter(ke=>ke.name.toLocaleLowerCase().includes(me.toLocaleLowerCase())),$e=()=>!ue||isEmpty$2(ue)?jsxRuntimeExports.jsx(gf$1,{}):isString$2(ue)?getHandlerIcon(ue):ue.hasOwnProperty(Ae)?getHandlerIcon(ue[Ae]):getHandlerIcon(ue.static);return jsxRuntimeExports.jsx(HandlersDropdown,{handlers:Ne,onPinHandler:J,onHandlerClick:ne,onCancelHandler:oe,isReadOnly:ce,isSearch:!0,searchText:me,isOpenMenu:ye,setIsOpenMenu:Se,setSearch:ge,children:jsxRuntimeExports.jsx("div",{className:styles$I.handlerContainer,"data-tid":"run-handlers-dropdown",children:jsxRuntimeExports.jsx(Ml,{variant:"outlined",status:"default",prefix:$e(),suffix:ye?jsxRuntimeExports.jsx(hk,{}):jsxRuntimeExports.jsx(Rp,{}),placeholder:xe(pe===HandlersTypeEnum.MainGrid?"gridToolbar.commonTasks":"gridToolbar.recordTasks")||"",className:styles$I.handlerInput,value:me,onChange:Te,testId:"run-handlers-dropdown-input"})})})},defaultRenderName=K=>K,Handler=({handler:K,onCancelHandler:J,handlerExecutionInfo:ne,onRunHandler:oe,readOnly:ce,renderName:ue=defaultRenderName})=>{const Ae=ne==null?void 0:ne.status,pe=Ae===LoadingStatusesEnum.LOADING,xe=me=>{me.stopPropagation(),J(K.id,K.isStatic)};return jsxRuntimeExports.jsxs("div",{onClick:()=>!pe&&!K.isDisable&&!ce&&oe(),className:cx("pinned-handler",{"pinned-handler__loading":pe,"pinned-handler__disabled":K.isDisable||ce,"pinned-handler__success":Ae===LoadingStatusesEnum.SUCCESS,"pinned-handler__error":Ae===LoadingStatusesEnum.ERROR}),children:[jsxRuntimeExports.jsx(mf,{title:K.name||K.comment,children:jsxRuntimeExports.jsxs("div",{className:"pinned-handler__content",children:[getHandlerIcon(ne==null?void 0:ne.status,K.isStatic),jsxRuntimeExports.jsx("span",{className:cx(pe?"pinned-handler__content-name-loading":"pinned-handler__content-name"),children:ue(K.name)})]})}),pe&&jsxRuntimeExports.jsx("div",{className:"pinned-handler__cancel-icon",onClick:xe,children:jsxRuntimeExports.jsx(Pp,{})})]})},container$m="_container_z0tyt_1",hiddenHandlers="_hiddenHandlers_z0tyt_8",visibleElements="_visibleElements_z0tyt_15",visibleButton="_visibleButton_z0tyt_22",styles$H={container:container$m,hiddenHandlers,visibleElements,visibleButton},PinnedHandlers=({pinnedHandlers:K,onHandlerClick:J,onCancelHandler:ne,onPinHandler:oe,isReadOnly:ce=!1})=>{const{state:ue}=useDndContext(),{elementsRef:Ae,visibleElements:pe,hiddenElements:xe,isDropdownButtonVisible:me,dropdownRef:ge,measurementRef:ye}=useElementsDimension({elements:K,elementWidth:ElementWidth.HANDLERS,elementGap:10}),[Se,Te]=reactExports.useState(!1),Ne=$e=>({handler:$e,handlerExecutionInfo:ue.executedHandlersInfoByRecord[$e.key],onRunHandler:()=>J($e),onCancelHandler:ne});return jsxRuntimeExports.jsxs("div",{className:styles$H.container,children:[jsxRuntimeExports.jsx("div",{ref:ye,className:styles$H.hiddenHandlers,children:K.map($e=>reactExports.createElement(Handler,{...Ne($e),key:$e.id,readOnly:ce}))}),jsxRuntimeExports.jsx("div",{ref:Ae,className:styles$H.visibleElements,children:pe.map($e=>reactExports.createElement(Handler,{...Ne($e),key:$e.id,readOnly:ce}))}),me&&jsxRuntimeExports.jsx("div",{ref:ge,className:styles$H.visibleButton,children:jsxRuntimeExports.jsx(HandlersDropdown,{handlers:xe,onPinHandler:oe,onHandlerClick:J,onCancelHandler:ne,isReadOnly:ce,isOpenMenu:Se,setIsOpenMenu:Te,children:jsxRuntimeExports.jsx(rl,{type:"secondary",variant:"ghost",iconAfter:jsxRuntimeExports.jsx(R_,{})})})})]})},container$l="_container_1cshp_1",hidden="_hidden_1cshp_10",styles$G={container:container$l,hidden},HandlersContainer=({handlers:K,onPinHandler:J,onHandlerClick:ne,onCancelHandler:oe,isReadOnly:ce=!1,lastHandlerStatus:ue,runningHandlerRunIds:Ae,selectedRowKey:pe,pinnedHandlers:xe,handlersType:me})=>{const ge=xe.map(ye=>K==null?void 0:K.find(Se=>Se.id===ye)).filter(ye=>isDefined$1(ye));return jsxRuntimeExports.jsxs("div",{className:styles$G.container,children:[jsxRuntimeExports.jsx(RunHandlers,{handlers:K,onPinHandler:J,onHandlerClick:ne,onCancelHandler:oe,isReadOnly:ce,lastHandlerStatus:ue,selectedRowKey:pe,handlersType:me}),xe&&jsxRuntimeExports.jsx(PinnedHandlers,{pinnedHandlers:ge,onPinHandler:J,onHandlerClick:ne,onCancelHandler:oe,isReadOnly:ce}),Ae.length!==0&&jsxRuntimeExports.jsx(CancelButton,{})]})},EditorHandler=({partSchemaName:K,schemaType:J,selectedRecordType:ne,onSubmit:oe,onCancel:ce})=>{var ye;const{t:ue}=useTranslation(),{getSchema:Ae}=useEditorRequest(),[pe,xe]=reactExports.useState(null),me=(ye=pe==null?void 0:pe.schema[pe==null?void 0:pe.rootSchemaName].Elements)==null?void 0:ye.every(Se=>Se.Optional);reactExports.useEffect(()=>{(ne||J)&&K&&Ae.fetch({name:ne||J}).then(Se=>{var Te;xe({schema:Se.typeList,rootSchemaName:((Te=Object.keys(Se.typeList))==null?void 0:Te.find(Ne=>Ne.endsWith(K)))||"",isHandler:!0})})},[J,K]);const ge=({data:Se})=>oe==null?void 0:oe(Se);return Ae.isLoading?jsxRuntimeExports.jsx(PF,{loading:!0}):pe?jsxRuntimeExports.jsx(EditorInstance,{...pe,i18n:{submitBtnText:ue("buttons.execute")},onCancel:ce,onSubmit:ge,isSubmitDisabled:!me,isCancelDisabled:!1}):jsxRuntimeExports.jsx(RF,{})},HandlerWithParamsModal=({schemaType:K,selectedRowType:J,selectedHandlerWithParams:ne,onExecuteHandler:oe,onClose:ce})=>{const ue=Ae=>{oe(ne,Ae),ce()};return jsxRuntimeExports.jsx(Ho,{open:!0,size:"lg",defaultHeight:285,title:ne.name,onClose:ce,children:jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(EditorHandler,{schemaType:K,selectedRecordType:J,partSchemaName:`${ne.id}Args`,onCancel:ce,onSubmit:ue})})})},getRunHandlerKey=(K,J,ne,oe)=>`${K}-${ne?"static":oe}-${J}`,getRunHandlersBySchema=(K,J,ne,oe=[],ce)=>{var pe,xe;const ue=((xe=(pe=K.Declare)==null?void 0:pe.Handlers)==null?void 0:xe.filter(me=>(ce||!me.Hidden)&&me.Type===HandlerType.JOB).map(me=>({name:me.Label,id:me.Name,type:me.Type,isStatic:me.Static,hasParams:!!me.Params,key:getRunHandlerKey(me.Name,J,me.Static,ne),isPinned:!!(oe!=null&&oe.includes(me.Name)),isDisable:me.Static?!1:!ne,executedInfo:void 0,return:me.Return,comment:me.Comment})))||[],Ae=ue==null?void 0:ue.filter(me=>me.isStatic);return ne!==void 0?ue:Ae},downloadDecodedData=(K,J)=>{const ne=atob(K);if(!ne)return;const oe=new Array(ne.length);for(let pe=0;pe<ne.length;pe++)oe[pe]=ne.charCodeAt(pe);const ce=new Uint8Array(oe),ue=new Blob([ce],{type:"application/octet-stream"}),Ae=document.createElement("a");Ae.href=URL.createObjectURL(ue),Ae.download=J,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae)},downloadJsonObject=(K,J)=>{const ne=JSON.stringify(K,null,2),oe=new Blob([ne],{type:"application/json"}),ce=document.createElement("a");ce.href=URL.createObjectURL(oe),ce.download=J,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},keysPicker=(K,...J)=>{const ne=[];return J.forEach(oe=>{K[oe]&&ne.push(K[oe])}),ne.find(oe=>oe!=null)},HandlersBlock=({selectedRow:K,selectedRangeRows:J,activeTypeTab:ne,handlersType:oe,schema:ce,pinnedHandlers:ue})=>{var ft;const{state:Ae,action:pe}=useDndContext(),xe=useSelector$1(selectActiveDataset$1),{action:me,state:ge}=useAppContext(),ye=useSelector$1(selectUser),Se=useSelector$1(selectIsReadonly),Te=useSelector$1(selectFullScreenMode),{eventsBatch:Ne}=useSSEContext(),$e=useAppDispatch(),{t:ke}=useTranslation(),{fetch:je}=useRequest(schemaApi.getType),{setActiveTab:Ke}=useTabParams(),{schemaTypes:Ye}=useSelector$1(selectSchemaTypes),[ze,Xe]=reactExports.useState(),[Je,rt]=reactExports.useState(),[Ze,et]=reactExports.useState([]),nt=!!(ze!=null&&ze.length),Ge=((ft=Object.keys(J||{}))==null?void 0:ft.length)>1,ve=Se||Ae.isTypeReadOnly,Be=reactExports.useMemo(()=>JSON.parse(JSON.stringify(Ne)),[Ne]),Re=ye==null?void 0:ye.roles.includes(UserRole.Developer);reactExports.useEffect(()=>{ce&&Xe(getRunHandlersBySchema(ce,oe,K.key,ue,Re))},[K.key,ue,oe,ce,Re]),reactExports.useEffect(()=>{var pt;if(!Be.length)return;const dt=[];let Bt={...Ae.newRunHandlers};pe.setExecutedHandlersInfoByRecord(mt=>{let bt={...mt};return Be.forEach(xt=>{var yt,It,ht;if(SSE_EVENT_TASKS_TYPES.includes(xt.EventKind)&&((yt=Bt[oe])!=null&&yt[xt.TaskRunId])){const{TaskRunId:gt,RecordKey:Pt,Status:wt}=xt,St=Bt[oe][gt].executableHandler,Zt=wt??RunHandlerStatusCodeEnum.Running;if(bt={...bt,[getRunHandlerKey(St.id,oe,St.isStatic,Pt)]:{data:{},status:qe(Zt),error:""}},pe.changeRecordStatuses([{Key:Pt,StatusCode:Zt,TaskRunId:gt}]),Bt={...Bt,[oe]:{...Bt[oe],[gt]:{...((It=Bt[oe])==null?void 0:It[gt])??{},statusCode:Zt}}},xt.EventKind==SSEEventKindEnum.TASK_FINISHED&&dt.push(xt.TaskRunId),(Zt===RunHandlerStatusCodeEnum.Completed||Zt===RunHandlerStatusCodeEnum.Cancelled)&&isDefined$1(St.return)){const Ct=St.return;if(((ht=Ct==null?void 0:Ct.Data)==null?void 0:ht.Name)===HandlerContentTypeEnum.UiNavigationLink)return xt.RecordTypeName===ne&&tt(gt,St),bt;We(gt,St.name)}}}),bt}),pe.setNewRunHandlers(mt=>({...mt,...Bt})),et(mt=>mt.filter(bt=>!dt.includes(bt)));for(let mt=Be.length-1;mt>=0;mt--){const bt=Be[mt];if(bt.EventKind===SSEEventKindEnum.TASK_FINISHED&&((pt=Bt[oe])!=null&&pt[bt.TaskRunId])){const xt=bt.Status===RunHandlerStatusCodeEnum.Failed?LoadingStatusesEnum.ERROR:LoadingStatusesEnum.SUCCESS;return Ie(bt.RecordKey,xt)}}},[Be]);const Ie=(dt,Bt)=>{pe.setLastHandlerStatus(pt=>{const mt=isObject$9(pt[oe])??{},bt=!dt&&oe===HandlersTypeEnum.Editor?{...Object.fromEntries(Object.keys(mt).map(xt=>[xt,Bt])),static:Bt}:{...pt[oe],[dt]:Bt};return{...pt,[oe]:oe===HandlersTypeEnum.MainGrid?Bt:bt}})},Fe=()=>Te?env.isFullScreenHandlers:nt&&!Se,qe=dt=>{switch(dt){case RunHandlerStatusCodeEnum.Completed:return LoadingStatusesEnum.SUCCESS;case RunHandlerStatusCodeEnum.Failed:case RunHandlerStatusCodeEnum.Cancelled:return LoadingStatusesEnum.ERROR;default:return LoadingStatusesEnum.LOADING}},We=(dt,Bt)=>{const pt={dataset:xe,taskRunIds:[dt]};handlerApi.runTasksResult(pt).then(mt=>{const bt=mt[0].Result;if(!isNullable(bt))if(bt._t===HandlerContentTypeEnum.BinaryContent)downloadDecodedData(bt.FileBytes,bt.Name||"");else if(bt._t.endsWith(HandlerContentTypeEnum.ExternalLink))window.open(bt.Url,"_blank","noopener,noreferrer");else{const yt=`${DateFormatUtility.create().format(DateFormatEnum.DATE_TIME_MS)} ${mt[0].Key} ${Bt}`;downloadJsonObject(bt,yt)}})},Ue=(dt,Bt)=>{var xt;const pt=J&&((xt=Object.values(J))==null?void 0:xt.map(yt=>({...dt,key:getRunHandlerKey(dt.id,oe,dt.isStatic,yt._key),rowKey:yt._key}))),mt=[],bt=()=>{switch(!0){case dt.isStatic:return;case mt.length!==0:return mt;case isDefined$1(K.key):return[K.key];default:return}};pt==null||pt.forEach(({rowKey:yt})=>{mt.push(yt)}),pe.clearNotRunningStatuses(),handlerApi.runTasks({dataset:xe,type:ne,keys:bt()||[],method:dt.id,args:Bt||{},userName:ye==null?void 0:ye.username}).then(yt=>{const It=yt.map(wt=>({...wt,StatusCode:RunHandlerStatusCodeEnum.Submitted})),ht={},gt={...Ae.executedHandlersInfoByRecord},Pt=[];ht[oe]||(ht[oe]={}),yt.forEach(wt=>{ht[oe][wt.TaskRunId]={key:wt.Key,statusCode:RunHandlerStatusCodeEnum.Submitted,executableHandler:dt},gt[getRunHandlerKey(dt.id,oe,dt.isStatic,wt.Key)]={data:{},status:qe(RunHandlerStatusCodeEnum.Submitted),error:""},Pt.push(wt.TaskRunId)}),pe.setAllHandlerTasksStatus({tableName:ne,handlerId:dt.id,data:yt,statusCode:RunHandlerStatusCodeEnum.Submitted}),et(wt=>[...wt,...Pt]),pe.setNewRunHandlers(wt=>{const St=structuredClone(wt);for(const Zt in ht)Object.hasOwn(St,Zt)?St[Zt]={...St[Zt],...ht[Zt]}:St[Zt]={...ht[Zt]};return St}),pe.setExecutedHandlersInfoByRecord(gt),Ie(dt.isStatic?void 0:K.key,LoadingStatusesEnum.LOADING),pe.changeRecordStatuses(It)}).catch(()=>{pe.setAllHandlerTasksStatus({tableName:ne,handlerId:dt.id,data:[],statusCode:RunHandlerStatusCodeEnum.Failed})})},_e=dt=>je({name:dt}).then(Bt=>{ne!==dt&&me.callResetDndContextMethod(dt),!ge.showLineHider&&me.setShowLineHiderAction(!0);const pt=Bt.typeList[Bt.rootType],mt=[...(Ye==null?void 0:Ye.Tables)??[],...(Ye==null?void 0:Ye.Types)??[]].find(bt=>bt.id===dt);if($e(updateActiveTypeMetadata(pt)),mt){const{id:bt,label:xt,tableKey:yt,tableName:It}=mt;$e(openTab({id:bt,key:bt,label:xt,tableKey:yt,tableName:It}))}Ke(dt)}).catch(toast.error),Qe=()=>{setTimeout(()=>{externalStorage.clearSelectedRow(),externalStorage.clearViewerActiveTab()},2e3)},tt=(dt,Bt)=>{const pt={dataset:xe,taskRunIds:[dt]};return handlerApi.runTasksResult(pt).then(mt=>{const bt=mt[0].Result,xt=keysPicker(bt,"Type_","type_");if(xt&&xt==ne&&_e(xt),bt!=null&&bt.View||bt!=null&&bt.view){const It=structuredClone(Ae.config),ht=findParent(It,[EditorTabsEnum.EDITOR]);ht&&ht.content.forEach(gt=>{gt.isActive=gt.id===((bt==null?void 0:bt.View)||(bt==null?void 0:bt.view))}),pe.updateConfig(It)}const yt=()=>{const It=ke("grid.recordNavigationModal.content",{handlerName:Bt.name}),ht=bt!=null&&bt.Key?ke("grid.recordNavigationModal.forRecordKey",{recordKey:bt==null?void 0:bt.Key}):"",gt=ke("grid.recordNavigationModal.viewResults");return`${It}${ht}${gt}`};Ho.info({testId:"record-navigation",title:ke("grid.recordNavigationModal.title",{handlerName:Bt.name}),content:yt(),defaultHeight:200,okText:ke("buttons.proceed"),onOk:It=>{var gt,Pt;const ht=xt===ne;if(xt){const wt=keysPicker(bt,"key","Key");wt&&(ht?(pe.selectGridRowKey(wt),(Pt=(gt=Ae.headersRef.current)==null?void 0:gt.updateMarkedIndexOnRowChange)==null||Pt.call(gt,wt)):externalStorage.setSelectedRow(wt)),ht||_e(xt)}if(bt!=null&&typeof bt!="string"&&bt){const wt=keysPicker(bt,"view","View");wt&&externalStorage.setViewerActiveTab(wt)}Qe(),It()}})})},it=(dt,Bt)=>{var bt;if(!K.key&&!Bt)return;const pt=Bt?dt:K.key??"",mt=(bt=Ae.toolbarHandler[ne][dt][pt])==null?void 0:bt.TaskRunId;handlerApi.cancel({dataset:xe,taskRunIds:[mt]})},at=dt=>{Xe(Bt=>{const pt=dt.id,mt=Bt==null?void 0:Bt.map(bt=>bt.id===pt?{...bt,isPinned:!bt.isPinned}:bt);if(mt){const bt=()=>ue.includes(pt)?ue.filter(xt=>xt!==pt):[pt,...ue];oe===HandlersTypeEnum.MainGrid&&pe.saveUiTypeData({handlers:bt()}),oe===HandlersTypeEnum.Editor&&pe.updateRecordPinnedHandlers(bt())}return mt})},ot=dt=>{var Bt;Ho.info({testId:"executing-handlers",title:ke("confirmationModal.executingHandlers.title"),content:ke("confirmationModal.executingHandlers.confirmationTexts",{numberOfItems:(Bt=Object.keys(J||{}))==null?void 0:Bt.length}),okText:ke("buttons.run"),onOk:pt=>{dt!=null&&dt.hasParams?st(dt):Ue(dt),pt()}})},lt=dt=>{me.checkUnsavedEditor(()=>{ve||(Ge&&!dt.isStatic?ot(dt):dt.hasParams?st(dt):Ue(dt))})},st=dt=>{rt(dt)},ut=()=>rt(void 0);return!Fe()||!(ze!=null&&ze.length)?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HandlersContainer,{handlers:ze,onPinHandler:at,onHandlerClick:lt,onCancelHandler:it,isReadOnly:ve,lastHandlerStatus:Ae.lastHandlerStatus[oe],runningHandlerRunIds:Ze,selectedRowKey:K.key??"",pinnedHandlers:ue,handlersType:oe}),Je&&jsxRuntimeExports.jsx(HandlerWithParamsModal,{schemaType:ne,selectedRowType:K.type,selectedHandlerWithParams:Je,onExecuteHandler:Ue,onClose:ut})]})},EditorContentInner=({isLoading:K=!1,type:J,selectedGridRow:ne,stackRef:oe,onUpdate:ce,isDashboardType:ue=!1,containerClassname:Ae,selectedRangeRows:pe})=>{var Re,Ie,Fe;const{action:xe}=useAppContext(),{state:me,action:ge}=useDndContext(),{config:ye}=me,{updateConfig:Se}=ge,{getRecord:Te}=useEditorRequest(),Ne=useSelector$1(selectActiveDataset$1),$e=useSelector$1(selectUser),ke=useAppDispatch(),[je,Ke]=reactExports.useState(),[Ye,ze]=reactExports.useState(),Xe=reactExports.useRef(ye);reactExports.useEffect(()=>{Xe.current=ye},[ye]),reactExports.useEffect(()=>{const qe=()=>ce==null?void 0:ce();recordEventManager.subscribe(RecordEvent.UpdateRecord,qe)},[]),reactExports.useEffect(()=>{if(externalStorage.getViewerActiveTab()&&me.viewers.length){const qe=me.viewers.find(We=>We.label===externalStorage.getViewerActiveTab());qe&&Ze({...qe,isActive:!0})}},[externalStorage.getViewerActiveTab(),me.viewers]),reactExports.useEffect(()=>{ne!=null&&ne.type&&ne.key&&Je()},[ne,Ne]);const Je=qe=>{Te.fetch({key:qe??(ne==null?void 0:ne.key),type:(ne==null?void 0:ne.type)??"",dataset:Ne}).then(We=>{const{_t:Ue}=We.data;if(Ue===SimplifiedEnum.UI_APP_STATE){const _e=We.data,{ReadOnly:Qe}=_e;Qe!==void 0&&ke(updateAppReadOnly(Qe))}storageApi.getRecord({type:SimplifiedEnum.UI_TYPE_STATE,key:`cl;${Ue};${$e==null?void 0:$e.username}`,ignoreNotFound:!0,module:"Cl.Runtime.Backend.Core"}).then(_e=>{const Qe=_e.data;ge.setRecordTypeState({_t:SimplifiedEnum.UI_TYPE_STATE,Type_:`cl;${Ue}`,...Qe})})})},rt=qe=>{Ke(qe)},Ze=qe=>{const We=structuredClone(Xe.current),Ue=findParent(We,[qe.key]);if(Ue){Ue.content.forEach(Qe=>{Qe.isCurrentlyDragging=!1,Qe.isActive=Qe.key===qe.key}),Se(We);const _e=getParsedConfig(We,!0);ge.saveUiTypeData({simplifiedConfig:_e,handlers:me.pinnedHandlers})}},et=(Re=oe.content)==null?void 0:Re.find(qe=>qe.isActive&&!qe.isCurrentlyDragging),nt=qe=>qe==null?void 0:qe.filter(We=>We.isActive).map(We=>We.id),Ge=qe=>{const We=structuredClone(Xe.current),Ue=`${EditorTabsEnum.EDITOR_TRANSITION}-${qe.key}-${v4()}`,_e=findTarget(We,oe.key);if(_e){const Qe=_e.content.some(ot=>ot.id.includes(qe.key)),tt=_e.content.findIndex(ot=>ot.isActive);_e.content=_e.content.map(ot=>({...ot,isActive:Qe&&ot.id.includes(qe.key)})),Qe||_e.content.splice(tt+1,0,{...EDITOR_TABS[EditorTabsEnum.EDITOR_TRANSITION],id:Ue,key:Ue,disableActions:!0,label:qe.key,transitionData:qe,isActive:!0});const it=correctContent(We,!0);Se(it);const at=getParsedConfig(it,!0);ge.saveUiTypeData({simplifiedConfig:at})}},ve=qe=>{var _e;if(!(qe!=null&&qe.key))return;const We=structuredClone(Xe.current),Ue=findTarget(We,oe.key);if(Ue){const Qe=Ue.content,tt=Qe.findIndex(it=>it.key===qe.key);if((_e=Qe[tt])!=null&&_e.isActive){const it=Qe.findIndex(at=>at.key===EditorTabsEnum.EDITOR);Qe[it>=0?it:0].isActive=!0}Ue.content.splice(tt,1),Se(We)}},Be=qe=>{(et==null?void 0:et.key)===EditorTabsEnum.EDITOR?xe.onConfirmLeaveEditor(()=>Ze(qe)):Ze(qe)};return jsxRuntimeExports.jsx(PF,{loading:!J||K,children:jsxRuntimeExports.jsxs("div",{className:cx(styles$M.container,Ae),"data-tid":"editor-content",children:[ne&&jsxRuntimeExports.jsx(HandlersBlock,{selectedRow:ne,selectedRangeRows:pe,activeTypeTab:J,handlersType:HandlersTypeEnum.Editor,schema:(Ie=Te.state)==null?void 0:Ie.schema.typeList[Te.state.schema.rootType],pinnedHandlers:((Fe=me.recordTypeState)==null?void 0:Fe.PinnedHandlers)||[]}),(!ue||oe.content.length>1)&&jsxRuntimeExports.jsx(EditorTabs,{onCloseTab:ve,activeTabs:nt(oe.content),activeTab:et==null?void 0:et.key,tabs:me.hideEditor&&!me.shouldIgroreHideEditor?oe.content.filter(qe=>qe.id!==EditorTabsEnum.EDITOR):oe.content,onChangeTab:Be,stackRef:oe}),jsxRuntimeExports.jsxs("div",{"data-tid":"editor-tab-content",className:styles$M.content,children:[jsxRuntimeExports.jsx(DropBox,{position:DropBoxEnum.INNER,stackRef:oe}),jsxRuntimeExports.jsx(EditorTabContent,{activeTab:et==null?void 0:et.key,transitionTab:et==null?void 0:et.transitionData,type:J,selectedGridRow:ne,successorType:je,breadcrumbs:Ye,onChangeBreadcrumbs:ze,onApplySuccessorType:rt,onUpdate:ce,onTransition:qe=>xe.onConfirmLeaveEditor(()=>Ge(qe)),isEntityLoading:Te.isLoading,hasInitFetch:Te.hasInitFetch,entityState:Te.state,getEditorData:Je})]})]})})},EditorContent=K=>{const{EditorContentInner:J}=useComponentsMapper();return jsxRuntimeExports.jsx(J,{...K})},container$k="_container_kuuk5_1",editorContainer="_editorContainer_kuuk5_7",styles$F={container:container$k,editorContainer},DraggableEditorContainer=({isLoading:K,type:J,selectedGridRow:ne,stackRef:oe,isSingleTabStackDragging:ce,configType:ue,onUpdate:Ae,isDashboardType:pe=!1,isHiddenEditor:xe=!1,selectedRangeRows:me})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ue===StackEnum.STACK&&ce&&jsxRuntimeExports.jsx(DropBox,{position:DropBoxEnum.SINGLE,stackRef:oe}),jsxRuntimeExports.jsx("div",{className:cx(styles$F.container,{displayNone:xe}),children:jsxRuntimeExports.jsx(EditorContent,{isLoading:K,type:J,selectedGridRow:ne,stackRef:oe,onUpdate:Ae,isDashboardType:pe,containerClassname:styles$F.editorContainer,selectedRangeRows:me})})]}),container$j="_container_3layh_1",content$8="_content_3layh_11",styles$E={container:container$j,content:content$8},DropPreview=({activeTab:K,draggingTab:J,showToolbar:ne})=>{const oe=()=>{};return!J||!K?jsxRuntimeExports.jsx(NoGridData,{content:t$5("noData.noData"),additionalContent:t$5("noData.emptyViewer"),icon:jsxRuntimeExports.jsx(Pp,{size:"Full"})}):jsxRuntimeExports.jsxs("div",{className:styles$E.container,children:[jsxRuntimeExports.jsx(EditorTabs,{activeTab:K,tabs:[J],onChangeTab:oe}),jsxRuntimeExports.jsxs("div",{className:cx("stack-content",styles$E.content),children:[ne&&jsxRuntimeExports.jsx(Ac,{children:jsxRuntimeExports.jsx(mf,{title:t$5("editorToolbar.json")||"",children:jsxRuntimeExports.jsx("span",{"data-tid":"drop-preview-json-icon",children:jsxRuntimeExports.jsx(BD,{})})})}),jsxRuntimeExports.jsx(PF,{loading:!0})]})]})},container$i="_container_ltd7z_1",stacks="_stacks_ltd7z_7",dashed="_dashed_ltd7z_13",singleDragging="_singleDragging_ltd7z_24",previewWindow="_previewWindow_ltd7z_28",row$3="_row_ltd7z_34",column="_column_ltd7z_38",element="_element_ltd7z_43",styles$D={container:container$i,stacks,dashed,singleDragging,previewWindow,row:row$3,column,element},DraggableContainer=reactExports.forwardRef(({isLoading:K,type:J,tabs:ne,showEditor:oe,draggableGrid:ce,onUpdate:ue,isDashboardType:Ae=!1,data:pe},xe)=>{const ge="stack-main",ye=useSelector$1(selectMetaData),{state:Se}=useAppContext(),{state:Te,action:Ne}=useDndContext(),{isDragging:$e,draggingLabel:ke,selectedGridRow:je,dropMarker:Ke,dropPreview:Ye,managerRef:ze,config:Xe}=Te,Je=!!Te.maximizedTabId,[rt,Ze]=reactExports.useState({activeTab:void 0,openedTabs:[]}),et=reactExports.useRef(null);reactExports.useEffect(()=>{var Re;Te.isLayoutRestored&&((Re=et.current)==null||Re.resize(50))},[Te.isLayoutRestored]),useDnD({tabs:rt,type:J,passedTabs:ne,setTabs:Ze,draggableGrid:ce,selectedGridRow:je,data:pe}),reactExports.useEffect(()=>{var Re;$e||(Re=Ke.current)==null||Re.removeAttribute("style")},[$e]),reactExports.useEffect(()=>{Ne.setBlockDnd(Je)},[Je]),reactExports.useEffect(()=>{resizePlotly()},[Je]);const nt=reactExports.useCallback(Re=>{if(Te.maximizedTabId===EditorTabsEnum.EDITOR){if(Re===Xe||findTarget(Re,Te.maximizedTabId))return!1;if(findTarget(Re,GridTabEnum.MAIN))return!0;const Ie=findParent(Xe,[Re.id]);return Ie&&Ie!==Xe?nt(Ie):Ie&&!findTarget(Ie,GridTabEnum.MAIN)}return Te.hideEditor&&Re.content.length===1&&!Te.shouldIgroreHideEditor?findTarget(Re,EditorTabsEnum.EDITOR)!==void 0:!!(Te.maximizedTabId&&!findTarget(Re,Te.maximizedTabId))},[Te.maximizedTabId]),Ge=reactExports.useCallback(Re=>!$e||!ke?!1:!!(Re.content.length===1&&findTarget(Re,ke.id)),[$e,ke,Xe]),ve=Re=>ce&&ce({tabs:Re.content,stackRef:Re,type:J});reactExports.useImperativeHandle(xe,()=>({config:Xe,getSortDesc:Ne.getSortDesc}));const Be=reactExports.useCallback(Re=>{if(Xe.id===Re.id&&Xe.type!==StackEnum.STACK&&findTarget(Xe,ge)&&!Ne.getEditorTabs(Se.activeEditorTab,J,ne).find(Ie=>Ie.id===EditorTabsEnum.EDITOR||Ie.id===EditorTabsEnum.NEW_ENTITY||Ie.id===EditorTabsEnum.COPY_ENTITY||Ie.id===EditorTabsEnum.SELECT_TYPE)||Xe.content.length===0)return jsxRuntimeExports.jsx(PF,{loading:!0});if(!oe){const Ie=findTarget(Re,ge);return ve(Ie||Re)}if(Re.type===StackEnum.STACK&&!Re.isMainGrid)return jsxRuntimeExports.jsx(PF,{loading:K,children:jsxRuntimeExports.jsx(DraggableEditorContainer,{isLoading:K,type:J,selectedGridRow:je,stackRef:Re,onUpdate:ue,isSingleTabStackDragging:Ge(Re),configType:Xe.type,isDashboardType:Ae,isHiddenEditor:Te.hideEditor&&!Te.shouldIgroreHideEditor&&Re.content.length===1&&ye.data.DisplayKind!==SchemaDisplayKind.Singleton&&findTarget(Re,EditorTabsEnum.EDITOR)!==void 0})});if(Re.type===StackEnum.STACK&&Re.isMainGrid&&ce)return ve(Re);if(Re.type==="row"||Re.type==="column"&&oe)return jsxRuntimeExports.jsx("div",{id:Re.id,className:cx(Re.type==="row"?styles$D.row:styles$D.column,styles$D.element),children:jsxRuntimeExports.jsx(PanelGroup,{direction:Re.type==="row"?"horizontal":"vertical",className:styles$D.group,children:Re.content.map((Ie,Fe,{length:qe})=>{const We=nt(Ie),Ue=Ie.type!=="row",_e=Ie.type===StackEnum.STACK&&Ie.isMainGrid&&Te.maximizedTabId===GridTabEnum.MAIN;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Panel$1,{ref:Qe=>{Qe&&Ie.id===ge&&(et.current=Qe)},minSize:0,maxSize:100,collapsible:!0,className:cx({displayNone:We},{[styles$D.singleDragging]:Ge(Ie)}),onResize:resizePlotly,children:Be(Ie)}),Fe<qe-1&&jsxRuntimeExports.jsx(PanelResizeHandle,{hitAreaMargins:{coarse:-1,fine:-1},className:cx(Re.type==="row"?"verticalPanelResizer":"horizontalPanelResizer",{displayNone:Ue&&We||_e})})]},Fe)})})},Re.key)},[ce,je,Xe,$e,Te.hideEditor,Te.maximizedTabId]);return jsxRuntimeExports.jsxs("div",{ref:ze,className:cx("manager",styles$D.container),children:[jsxRuntimeExports.jsx("div",{className:cx("editor-container",styles$D.stacks),children:Be(Xe)}),jsxRuntimeExports.jsx("div",{ref:Ye,className:cx("preview","displayNone",styles$D.previewWindow),children:jsxRuntimeExports.jsx(DropPreview,{showToolbar:!0,activeTab:ke==null?void 0:ke.id,draggingTab:ke,selectedGridRow:je,type:J})}),jsxRuntimeExports.jsx("div",{ref:Ke,className:cx(styles$D.dashed,"displayNone")})]})});DraggableContainer.displayName="DraggableContainer";var Direction=(K=>(K.Horizontal="Horizontal",K.Vertical="Vertical",K))(Direction||{});const useKeyboardNavigation=({itemsCount:K,isFirstSelected:J=!0,direction:ne="Vertical",isPreventDefaultEvent:oe=!0})=>{const ce=J?0:-1,[ue,Ae]=reactExports.useState(ce),pe=()=>{Ae(ye=>(ye+1)%K)},xe=()=>{Ae(ye=>ye===ce?K-1:(ye-1)%K)};return{focusedIndex:ue,defaultFocusedIndex:ce,handleKeyDown:ye=>{ne==="Vertical"&&(ye.code===KeyboardCode.ArrowDown&&(oe&&ye.preventDefault(),pe()),ye.code===KeyboardCode.ArrowUp&&(oe&&ye.preventDefault(),xe())),ne==="Horizontal"&&(ye.code===KeyboardCode.ArrowRight&&(oe&&ye.preventDefault(),pe()),ye.code===KeyboardCode.ArrowLeft&&(oe&&ye.preventDefault(),xe()))},resetFocusIndex:()=>{Ae(ce)},setFocusedIndex:Ae,incrementIndex:pe}},animatedBackground="_animatedBackground_18xx4_9",placeHolderShimmer="_placeHolderShimmer_18xx4_1",styles$C={animatedBackground,placeHolderShimmer},ProgressBarSpinner=()=>jsxRuntimeExports.jsx("div",{className:styles$C.animatedBackground}),container$h="_container_ai02b_1",header$2="_header_ai02b_8",headerActive="_headerActive_ai02b_22",sortIcon="_sortIcon_ai02b_26",content$7="_content_ai02b_31",noData$1="_noData_ai02b_41",groupTitle="_groupTitle_ai02b_45",progressBar="_progressBar_ai02b_59",row$2="_row_ai02b_68",activeRow="_activeRow_ai02b_83",focusedRow="_focusedRow_ai02b_98",titleContainer="_titleContainer_ai02b_103",styles$B={container:container$h,header:header$2,headerActive,sortIcon,content:content$7,noData:noData$1,groupTitle,progressBar,row:row$2,activeRow,focusedRow,titleContainer},DropdownSection=reactExports.forwardRef(({searchText:K,title:J,items:ne,activeTab:oe,onClick:ce,isLoading:ue=!1,isActive:Ae,focusedItemIndex:pe},xe)=>{const{t:me}=useTranslation(),ge=!ue&&ne,ye=reactExports.useRef(null),[Se,Te]=reactExports.useState(!1),[Ne,$e]=reactExports.useState([...ne||[]]),[ke,je]=reactExports.useState(Ne),[Ke,Ye]=reactExports.useState(SortOrderEnum.NONE),ze=()=>{je(ne||[]),$e(ne||[])};reactExports.useImperativeHandle(xe,()=>({...xe.current,[J]:ze})),reactExports.useEffect(()=>{ze()},[ne]),reactExports.useEffect(()=>{const Je=ye.current;if(Je&&Ae&&pe!==-1){const rt=Je.querySelector(`[data-item-index="${pe}"]`);rt&&rt.scrollIntoView({block:"center"})}},[pe,Ae]),reactExports.useEffect(()=>{ye.current&&oe&&setTimeout(()=>{var rt;const Je=(rt=ye.current)==null?void 0:rt.querySelector('[data-active="true"]');Je&&Je.scrollIntoView({block:"center",behavior:"smooth"})},100)},[oe,ke]);const Xe=[{key:SortOrderEnum.ASC,label:me("grid.sorting.asc"),icon:jsxRuntimeExports.jsx(nB,{}),onClick:()=>{const Je=[...Ne];Je.sort((rt,Ze)=>rt.label>Ze.label?1:rt.label<Ze.label?-1:0),je(Je),Ye(SortOrderEnum.ASC)}},{key:SortOrderEnum.DESC,label:me("grid.sorting.desc"),icon:jsxRuntimeExports.jsx(rB,{}),onClick:()=>{const Je=[...Ne];Je.sort((rt,Ze)=>rt.label>Ze.label?-1:rt.label<Ze.label?1:0),je(Je),Ye(SortOrderEnum.DESC)}},{key:SortOrderEnum.NONE,label:me("grid.sorting.none"),icon:jsxRuntimeExports.jsx(oB,{}),onClick:()=>{je(Ne),Ye(SortOrderEnum.NONE)}}];return jsxRuntimeExports.jsxs("div",{className:styles$B.container,children:[jsxRuntimeExports.jsx("div",{className:cx(styles$B.header,{[styles$B.headerActive]:Ae}),children:jsxRuntimeExports.jsxs("div",{className:styles$B.titleContainer,children:[J,jsxRuntimeExports.jsx(X_,{open:Se,onOpenChange:Je=>{Te(Je)},menu:{items:Xe,selectedKeys:[Ke]},getPopupContainer:Je=>Je.closest(".dropdownContainer"),placement:"bottomRight",children:jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(oa,{testid:"dropdown-section-sorting-icon",children:jsxRuntimeExports.jsx(rA,{})})})})]})}),jsxRuntimeExports.jsx("div",{className:styles$B.content,ref:ye,children:ge?ke.map((Je,rt)=>{const{label:Ze}=Je,et=Je.key===oe,nt=rt===pe;return jsxRuntimeExports.jsx("div",{"aria-hidden":"true","data-item-index":rt,"data-active":et||void 0,className:cx(styles$B.row,{[styles$B.activeRow]:et,[styles$B.focusedRow]:nt}),title:Ze,onClick:()=>ce(Je),children:K?jsxRuntimeExports.jsx(HighlightTextMatch,{text:Ze,searchText:K,isTypesSearch:!0}):Ze},Je.id)}):jsxRuntimeExports.jsxs("div",{className:styles$B.progressBar,children:[jsxRuntimeExports.jsx("span",{className:styles$B.noData,children:me("noData.loading")}),jsxRuntimeExports.jsx(ProgressBarSpinner,{})]})})]})});DropdownSection.displayName="DropdownSection";const searchContainer$1="_searchContainer_xvs14_1",dropdownSections$1="_dropdownSections_xvs14_7",inputContainer="_inputContainer_xvs14_14",input="_input_xvs14_14",noData="_noData_xvs14_23",styles$A={searchContainer:searchContainer$1,dropdownSections:dropdownSections$1,inputContainer,input,noData},editor="_editor_10c3g_1",footer$1="_footer_10c3g_6",message="_message_10c3g_14",messageSuccess="_messageSuccess_10c3g_23",messageError="_messageError_10c3g_27",checkbox="_checkbox_10c3g_31",styles$z={editor,footer:footer$1,message,messageSuccess,messageError,checkbox},CreateEntityModal=({isOpen:K,setIsModalOpen:J,selectedType:ne,baseType:oe,recordKey:ce,title:ue,isCheckboxAction:Ae=!1})=>{const{t:pe}=useTranslation(),{getSchema:xe,saveEntity:me,getRecord:ge}=useEditorRequest(),{fetch:ye}=useRequest(schemaApi.getType),{activeTab:Se,setActiveTab:Te}=useTabParams(),{schemaTypes:Ne}=useSelector$1(selectSchemaTypes),$e=useSelector$1(selectActiveDataset$1),[ke,je]=reactExports.useState(null),[Ke,Ye]=reactExports.useState(),[ze,Xe]=reactExports.useState(null),[Je,rt]=reactExports.useState(!1);reactExports.useEffect(()=>(ne&&xe.fetch({name:ne}).then(Re=>{var Ie;je({schema:Re.typeList,rootSchemaName:((Ie=Object.keys(Re.typeList))==null?void 0:Ie.find(Fe=>Fe.endsWith(ne)))??""})}),()=>{je(null)}),[ne]),reactExports.useEffect(()=>{K||(Xe(null),Ye(null),rt(!1))},[K]),reactExports.useEffect(()=>{ce&&Ze(ce)},[ce]),reactExports.useEffect(()=>{ge.state&&Ye(ge.state.data)},[ge.state]),reactExports.useEffect(()=>{if(ze==="SUCCESS"){const Re=setTimeout(()=>{Xe(null)},5e3);return()=>clearTimeout(Re)}},[ze]);const Ze=Re=>{ge.fetch({key:Re,type:ne,dataset:$e})},et=({data:Re},Ie,Fe)=>{if(Xe(null),me.isLoading)return;const qe=[...Ne.Tables,...Ne.Types].find(We=>We.id===ne);qe&&me.fetch({data:Re,recordType:qe.id,isToast:!1}).then(()=>{if(((qe==null?void 0:qe.tableKey)===((Se==null?void 0:Se.tableKey)||(Se==null?void 0:Se.id))||(qe==null?void 0:qe.id)===((Se==null?void 0:Se.tableKey)||(Se==null?void 0:Se.id)))&&ye({name:oe??ne}).then(We=>{const Ue=We.typeList[We.rootType];dispatch$1(updateActiveTypeMetadata(Ue))}),Ie)Ye(Re),J(!0);else if(Fe){const{id:We,label:Ue,tableKey:_e,tableName:Qe}=qe;dispatch$1(openTab({id:We,key:We,label:Ue,tableKey:_e,tableName:Qe})),Te(ne),nt()}else nt();Xe("SUCCESS")}).catch(()=>Xe("ERROR"))},nt=()=>J(!1),Ge=()=>Ye({}),ve=()=>ke?jsxRuntimeExports.jsx(EditorInstance,{...ke,className:styles$z.editor,data:Ke,i18n:{submitBtnText:pe("buttons.saveAndClose"),copyBtnText:pe("buttons.saveAndNext"),cancelBtnText:pe("buttons.cancel")},onCancel:nt,onSubmit:Re=>et(Re,!1,Je),onCopy:Re=>et(Re,!0),isSubmitDisabled:!1,isCancelDisabled:!1,isCopyBtn:!0,clearIcon:jsxRuntimeExports.jsx(mf,{title:pe("newEntity.clearAllFields"),children:jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(mB,{}),onClick:Ge})}),footerActions:Ae&&jsxRuntimeExports.jsx(pF,{className:styles$z.checkbox,value:Je,onChange:rt,testid:"create-new-entity-checkbox",children:pe("newEntity.openNewTable")})}):jsxRuntimeExports.jsx(RF,{}),Be=()=>{switch(ze){case"SUCCESS":return jsxRuntimeExports.jsxs("div",{className:cx(styles$z.message,styles$z.messageSuccess),children:[jsxRuntimeExports.jsx(__$1,{size:"XS"}),pe("newEntity.success")]});case"ERROR":return jsxRuntimeExports.jsxs("div",{className:cx(styles$z.message,styles$z.messageError),children:[jsxRuntimeExports.jsx(wk,{size:"XS"}),pe("newEntity.error")]});default:return null}};return jsxRuntimeExports.jsxs(Ho,{open:K,defaultHeight:350,title:ue??pe("newEntity.create"),onClose:()=>J(!1),minWidthConstraints:600,minHeightConstraints:350,children:[jsxRuntimeExports.jsx(Ho.Body,{children:ve()}),jsxRuntimeExports.jsx(Ho.Footer,{okText:null,cancelText:null,className:styles$z.footer,renderFooterActions:Be()})]})},CreateEntityButton=()=>{const{t:K}=useTranslation(),{activeTab:J}=useTabParams(),ne=reactExports.useRef(null),[oe,ce]=reactExports.useState(!1),[ue,Ae]=reactExports.useState([]),[pe,xe]=reactExports.useState(""),[me,ge]=reactExports.useState([]),[ye,Se]=reactExports.useState([]),[Te,Ne]=reactExports.useState(!1),[$e,ke]=reactExports.useState(""),[je,Ke]=reactExports.useState(SortOrderEnum.NONE);reactExports.useEffect(()=>{schemaApi.getTypes().then(rt=>{if(rt.length===0)return;const Ze=[];rt.forEach(({Label:nt,Kind:Ge,Name:ve})=>Ge!==SchemaTypeKind.TABLE&&Ze.push({value:ve,label:nt}));const et=Ze.findIndex(nt=>nt.label===(J==null?void 0:J.label));if(et>0){const[nt]=Ze.splice(et,1);Ze.unshift(nt)}Ae(Ze)})},[]),reactExports.useEffect(()=>{const rt=ue.filter(Ze=>Ze.label.toLowerCase().includes(pe.toLowerCase()));ge(rt)},[ue,pe]);const Ye=()=>{ye.length&&ge([...ye]),Se([]),Ke(SortOrderEnum.NONE)};reactExports.useEffect(()=>{oe?setTimeout(()=>{var rt;(rt=ne.current)==null||rt.focus()},0):(xe(""),Ke(SortOrderEnum.NONE))},[oe]);const ze=[{key:SortOrderEnum.ASC,label:K("grid.sorting.asc"),icon:jsxRuntimeExports.jsx(nB,{}),onClick:()=>{!ye.length&&Se(me);const rt=[...me];rt.sort((Ze,et)=>Ze.label>et.label?1:Ze.label<et.label?-1:0),ge(rt),Ke(SortOrderEnum.ASC)}},{key:SortOrderEnum.DESC,label:K("grid.sorting.desc"),icon:jsxRuntimeExports.jsx(rB,{}),onClick:()=>{!ye.length&&Se(me);const rt=[...me];rt.sort((Ze,et)=>Ze.label>et.label?-1:Ze.label<et.label?1:0),ge(rt),Ke(SortOrderEnum.DESC)}},{key:SortOrderEnum.NONE,label:K("grid.sorting.none"),icon:jsxRuntimeExports.jsx(oB,{}),onClick:Ye}],Xe=rt=>{Ne(!0),ce(!1),ke(rt)},Je=()=>jsxRuntimeExports.jsxs("div",{className:"create-entity-dropdown__menu",children:[jsxRuntimeExports.jsx(Ml,{ref:ne,testId:"add-new-entity-filter",variant:"outlined",status:"default",placeholder:K("shared.filterInputPlaceholder")||"",allowClear:!0,onChange:xe,value:pe,prefix:jsxRuntimeExports.jsx(gf$1,{}),suffix:jsxRuntimeExports.jsx(X_,{menu:{items:ze,selectedKeys:[je]},children:jsxRuntimeExports.jsx(rA,{})})}),jsxRuntimeExports.jsx("div",{className:"create-entity-dropdown__menu-list",children:me.map(({value:rt,label:Ze})=>jsxRuntimeExports.jsx("div",{"aria-hidden":"true",className:cx("create-entity-dropdown__menu-item",{"create-entity-dropdown__menu-item--active":rt===(J==null?void 0:J.label)||Ze===(J==null?void 0:J.label)}),onClick:()=>Xe(rt),children:Ze},rt))})]});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(X_,{testid:"add-new-entity-dropdown",open:oe,onOpenChange:()=>ce(rt=>!rt),dropdownRender:Je,children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(mf,{title:K("newEntity.add"),children:jsxRuntimeExports.jsx(rl,{className:"create-entity-button",type:"transparent",variant:"ghost",iconBefore:jsxRuntimeExports.jsx(Dk,{}),testid:"add-new-entity-button"})})})}),Te&&jsxRuntimeExports.jsx(CreateEntityModal,{baseType:"",isOpen:Te,setIsModalOpen:Ne,selectedType:$e,isCheckboxAction:!0})]})},HeaderSearch=()=>{var Bt;const{t:K}=useTranslation(),J=useAppDispatch(),{searchTypes:ne}=useSelector$1(selectSchemaTypes),oe=useSelector$1(selectActiveDataset$1),ce=useSelector$1(selectFullScreenMode),ue=reactExports.useRef(null),[Ae,pe]=reactExports.useState(""),[xe,me]=reactExports.useState(""),[ge,ye]=reactExports.useState(!1),[Se,Te]=reactExports.useState(),[Ne,$e]=reactExports.useState(!1),{fetch:ke}=useRequest(handlerApi.handlerRun),{state:je}=useDndContext(),Ke=useSelector$1(selectIsReadonly),{activeTab:Ye,setActiveTab:ze}=useTabParams(),{state:Xe,action:Je}=useAppContext(),rt=reactExports.useRef({}),Ze=[...(Se==null?void 0:Se.Tables)??[],...(Se==null?void 0:Se.Types)??[]],et=[{title:K("header.tabgroups.tables"),items:(Se==null?void 0:Se.Tables)||[]},{title:K("header.tabgroups.types"),items:(Se==null?void 0:Se.Types)||[]},{title:K("header.tabgroups.filters"),items:(Se==null?void 0:Se.Filters)||[],isHide:!((Bt=Se==null?void 0:Se.Filters)!=null&&Bt.length)}];reactExports.useEffect(()=>{[...(Se==null?void 0:Se.Tables)||[],...(Se==null?void 0:Se.Types)||[]].length===0&&it(1)},[Se]),reactExports.useEffect(()=>{me((Ye==null?void 0:Ye.label)||"")},[Ye==null?void 0:Ye.label]);const nt=pt=>pt.tableKey?{Type:HandlerRunTypeEnum.DATA_SERVICE,Method:"SelectType",Arguments:{TypeName:pt.id}}:{Type:HandlerRunTypeEnum.DATA_SERVICE,Method:"SelectTable",Arguments:{TableName:pt.id}},Ge=pt=>{(Ye==null?void 0:Ye.id)!==pt.id&&(Je.onConfirmLeaveEditor(()=>{ke(nt(pt)).then(mt=>{var gt;const bt=mt[0].Result,xt=convertSchemaTypeDtoToModel(bt.Schema,bt.BaseType);(gt=ue.current)==null||gt.blur(),Je.callResetDndContextMethod(pt.id),!Xe.showLineHider&&Je.setShowLineHiderAction(!0);const yt=xt.typeList[xt.rootType],It=yt.Name,ht=yt.Module.ModuleName;ye(!1),J(updateActiveTypeMetadata(yt)),J(openTab(pt)),Ye!=null&&Ye.id&&J(getDatasetData({type:It,module:ht})),ze(pt.id),ce&&yt.DisplayKind!==SchemaDisplayKind.Basic&&J(setFullScreenMode(!1)),J(saveAppState(oe))}).catch(toast.error)}),qe())},ve=pt=>(ne==null?void 0:ne.Tables.find(mt=>mt.key.toLowerCase()===pt.toLowerCase().replaceAll(" ","")))??null,Be=pt=>{var bt,xt,yt;const mt=pt.code===KeyboardCode.Enter||pt.code===KeyboardCode.NumpadEnter;if(pt.code===KeyboardCode.Tab&&(pt.preventDefault(),at()),Ne&&Qe(pt),ut(pt),pt.code===KeyboardCode.Escape&&(pt.preventDefault(),qe(),(bt=ue.current)==null||bt.blur()),mt){if(lt>-1)return pt.preventDefault(),et[_e].items[lt]&&Ge(et[_e].items[lt]);const It=((yt=(xt=ue.current)==null?void 0:xt.input)==null?void 0:yt.value)||"",ht=ve(It);ht&&(pt.preventDefault(),Ge({id:ht.key,key:ht.key,label:ht.label,tableKey:ht.tableKey,tableName:ht.tableName}))}},Re=()=>{et.forEach(pt=>{var mt,bt;(bt=(mt=rt.current)==null?void 0:mt[pt.title])==null||bt.call(mt)})};reactExports.useEffect(()=>{const pt=mt=>{var bt;(mt.ctrlKey||mt.metaKey)&&mt.code===KeyboardCode.KeyF&&(mt.preventDefault(),(bt=ue.current)==null||bt.focus(),ye(!0))};return window.addEventListener("keydown",pt),()=>window.removeEventListener("keydown",pt)},[]),reactExports.useEffect(()=>{J(getSchemaTypes({isInitLoad:!0}))},[J]),reactExports.useEffect(()=>{ne&&xe!==(Ye==null?void 0:Ye.label)?Ue(xe):Te(ne)},[ne]),reactExports.useEffect(()=>{!ge&&J(removeSearchTypes())},[ge]),reactExports.useEffect(()=>{Ue(xe),ft(),$e(()=>!1)},[xe]),reactExports.useEffect(()=>{const pt=bt=>{Ie(bt)||(ge&&qe(),Re()),ue.current&&bt.target===ue.current.input&&(!ge&&ye(!0),Fe())},mt=()=>{ge&&qe(),Re()};return ge||(tt(),ft()),document.addEventListener("mousedown",pt),document.addEventListener("closesearchmenu",mt),()=>{document.removeEventListener("mousedown",pt),document.removeEventListener("closesearchmenu",mt)}},[ge]);const Ie=pt=>pt.target.closest(".dropdownContainer"),Fe=()=>!ge&&J(getSchemaTypes()),qe=pt=>{ye(!1),me((Ye==null?void 0:Ye.label)||"")},We=pt=>{var mt;xe&&((mt=ue.current)==null||mt.select()),pt.stopPropagation(),Fe(),ye(!0),ft(),tt(),$e(()=>!1)},Ue=pt=>{if(!(ne!=null&&ne.Tables)||!ne.Types)return;const mt=pt.trim().replace(/ +/g," ");pe(mt);const bt=filterTypeHelper(ne.Tables,mt),xt=filterTypeHelper(ne.Types,mt);Te({...ne,Tables:bt,Types:xt})},{focusedIndex:_e,handleKeyDown:Qe,resetFocusIndex:tt,setFocusedIndex:it,incrementIndex:at}=useKeyboardNavigation({itemsCount:et==null?void 0:et.length,direction:Direction.Horizontal}),ot=reactExports.useMemo(()=>et[_e].items.length,[_e]),{focusedIndex:lt,defaultFocusedIndex:st,handleKeyDown:ut,resetFocusIndex:ft}=useKeyboardNavigation({itemsCount:ot,isFirstSelected:!1,direction:Direction.Vertical});reactExports.useEffect(()=>{ft()},[_e]),reactExports.useEffect(()=>{lt!==st&&$e(()=>!0)},[lt]);const dt=()=>ne?(Ze==null?void 0:Ze.length)===0&&jsxRuntimeExports.jsx("div",{className:styles$A.noData,children:K("noData.noData")}):jsxRuntimeExports.jsx("div",{className:styles$A.noData,children:jsxRuntimeExports.jsx(HF,{isLoading:!0,isMessageShown:!1})});return jsxRuntimeExports.jsxs("div",{"data-tid":"search-types",className:styles$A.searchContainer,children:[jsxRuntimeExports.jsx(X_,{testid:"types-container",placement:"bottomLeft",className:"dropdownContainer",open:ge,dropdownRender:()=>jsxRuntimeExports.jsxs("div",{className:styles$A.dropdownSections,children:[et.map((pt,mt)=>{if(pt.isHide)return null;const bt=mt===_e;return rt.current&&(rt.current[pt.title]=()=>{}),jsxRuntimeExports.jsx(DropdownSection,{ref:rt,searchText:Ae,title:pt.title,activeTab:Ye==null?void 0:Ye.id,items:pt.items,onClick:Ge,focusedItemIndex:bt?lt:-1,isActive:bt},pt.title)}),dt()]})}),jsxRuntimeExports.jsxs("div",{className:styles$A.inputContainer,children:[jsxRuntimeExports.jsx(Ml,{ref:ue,variant:"outlined",placeholder:K("header.input.placeholder")||"",status:"transparent",prefix:jsxRuntimeExports.jsx(gf$1,{}),suffix:ge?jsxRuntimeExports.jsx(hk,{}):jsxRuntimeExports.jsx(Rp,{}),onChange:pt=>{pt&&ge===!1&&ye(!0),me(pt)},onKeyDown:Be,value:xe,onFocus:We,className:styles$A.input}),!Ke&&!je.isTypeReadOnly&&jsxRuntimeExports.jsx(CreateEntityButton,{})]})]})},toolbar="_toolbar_918zb_1",typeToolbar="_typeToolbar_918zb_7",logo="_logo_918zb_12",fullScreenMode$1="_fullScreenMode_918zb_19",styles$y={toolbar,typeToolbar,logo,fullScreenMode:fullScreenMode$1},TypeToolbarInner=({containerClassname:K})=>{const J=useSelector$1(selectEnvLabel),ne=useSelector$1(selectFullScreenMode);return!useSelector$1(selectIsDatasetSupport)&&!ne?null:jsxRuntimeExports.jsxs("div",{"data-tid":"type-toolbar",className:cx(styles$y.toolbar,{[styles$y.fullScreenMode]:ne},styles$y.typeToolbar,K),children:[ne&&jsxRuntimeExports.jsxs("div",{className:styles$y.logo,children:[jsxRuntimeExports.jsx(Logo,{}),jsxRuntimeExports.jsx(OF,{label:J})]}),ne&&env.isFullScreenNavigation&&jsxRuntimeExports.jsx(HeaderSearch,{})]})},TypeToolbar=K=>{const{TypeToolbarInner:J}=useComponentsMapper();return jsxRuntimeExports.jsx(J,{...K})},DashboardTypeContainer=({type:K})=>{const{action:J}=useDndContext();return reactExports.useEffect(()=>{J.fetchListPanelsData()},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TypeToolbar,{}),jsxRuntimeExports.jsx(DraggableContainer,{type:K,tabs:[],showEditor:!0,isDashboardType:!0})]})},QueryBuilderContext=reactExports.createContext({});function useQueryBuilderContext(){const K=reactExports.useContext(QueryBuilderContext);if(K==null)throw new Error("QueryBuilder components must be wrapped in <QueryBuilderProvider>");return K}const container$g="_container_154cz_1",label$2="_label_154cz_7",styles$x={container:container$g,label:label$2},QueryBuilderIndexDropdown=({selectClassName:K})=>{const{t:J}=useTranslation(),{selectedIndex:ne,selectIndex:oe,indexes:ce}=useQueryBuilderContext(),ue=reactExports.useMemo(()=>ce.find(Ae=>Ae.value===ne),[ce,ne]);return jsxRuntimeExports.jsxs("div",{className:styles$x.container,children:[jsxRuntimeExports.jsx("div",{className:styles$x.label,children:J("queryBuilder.label")}),jsxRuntimeExports.jsx(xF,{className:K,variant:"outlined",placeholder:J("queryBuilder.select"),value:ue==null?void 0:ue.value,options:ce,onChange:oe})]})},QueryBuilderIntroduction=({isCloseIcon:K,onCancel:J})=>{const{t:ne}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"query-builder-introduction",children:[K&&jsxRuntimeExports.jsx("div",{className:"query-builder-introduction__close-icon",children:jsxRuntimeExports.jsx(rl,{type:"secondary",variant:"ghost",onClick:J,iconBefore:jsxRuntimeExports.jsx(_c,{})})}),jsxRuntimeExports.jsx("div",{className:"query-builder-introduction__icon",children:jsxRuntimeExports.jsx(gD,{height:"24",width:"24"})}),jsxRuntimeExports.jsx("div",{className:"query-builder-introduction__title",children:ne("queryBuilder.introduction")}),jsxRuntimeExports.jsx(QueryBuilderIndexDropdown,{selectClassName:"query-builder-introduction__select"})]})},QueryBuilderToolbar=reactExports.memo(()=>{const{t:K}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"query-builder-toolbar",children:[jsxRuntimeExports.jsx("div",{className:"query-builder-toolbar__title",children:K("queryBuilder.title")}),jsxRuntimeExports.jsx(QueryBuilderIndexDropdown,{selectClassName:"query-builder-toolbar__select"})]})});QueryBuilderToolbar.displayName="QueryBuilderToolbar";const container$f="_container_1ilxl_1",rigthButtons="_rigthButtons_1ilxl_7",styles$w={container:container$f,rigthButtons},QueryBuilderActions=({isApplyDisabled:K=!1,onResetAll:J,onCancel:ne,onApply:oe})=>{const{t:ce}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:styles$w.container,children:[jsxRuntimeExports.jsx(rl,{type:"secondary",variant:"ghost",iconBefore:jsxRuntimeExports.jsx(_c,{}),onClick:ne,children:ce("shared.close")}),jsxRuntimeExports.jsxs("div",{className:styles$w.rigthButtons,children:[jsxRuntimeExports.jsx(rl,{disabled:K,onClick:oe,children:ce("queryBuilder.apply")}),jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:J,children:ce("queryBuilder.resetAll")})]})]})},container$e="_container_1968s_1",row$1="_row_1968s_7",styles$v={container:container$e,row:row$1},QueryBuilderTable=({rows:K,renderKeyCell:J,renderConditionCell:ne,renderValueCell:oe})=>{const[ce,ue]=reactExports.useState(0),Ae=pe=>{pe!==ce&&ue(pe)};return reactExports.useEffect(()=>{ce>K.length-1&&ue(0)},[K.length,ce]),jsxRuntimeExports.jsx("div",{className:styles$v.container,role:"table",children:K.map((pe,xe)=>jsxRuntimeExports.jsxs("div",{className:styles$v.row,role:"row",onClick:()=>Ae(xe),children:[J({key:pe.key,isActive:xe===ce}),ne(pe),oe(pe)]},pe.key))})},key$3="_key_149cn_1",focusedKey="_focusedKey_149cn_13",styles$u={key:key$3,focusedKey},QueryBuilderKeyCell=({key:K})=>jsxRuntimeExports.jsx("div",{className:cx(styles$u.key,{[styles$u.focusedKey]:styles$u.focusedKey}),children:K});function mapSchemaToElements(K,J){return isArray$6(K.Elements)?K.Elements.reduce((ne,oe)=>{var me,ge,ye,Se,Te,Ne;const ce=oe.Filterable,ue=isArray$6(K.Keys)?K.Keys.includes(oe.Name):!1,Ae=(Te=(Se=(ye=(ge=J[`${(me=oe.Key)==null?void 0:me.Module.ModuleName}.${oe.Name}`])==null?void 0:ge.Elements)==null?void 0:ye[0])==null?void 0:Se.Value)==null?void 0:Te.Type,pe=((Ne=oe.Value)==null?void 0:Ne.Type)||Ae,xe=[ValueTypesEnum$1.String,ValueTypesEnum$1.Int,ValueTypesEnum$1.Double,ValueTypesEnum$1.Long,ValueTypesEnum$1.Bool,ValueTypesEnum$1.Date,ValueTypesEnum$1.Time,ValueTypesEnum$1.DateTime].includes(pe);return(ce||ue)&&xe&&!oe.Vector&&ne.push(oe),ne},[]):[]}const generateOptionsBySchemaType=K=>{switch(K){case ValueTypesEnum$1.String:return[{label:"Contains",value:QueryOperatorEnum.Contains},{label:"Equals",value:QueryOperatorEnum.Equal},{label:"Ends With",value:QueryOperatorEnum.EndsWith},{label:"Starts With",value:QueryOperatorEnum.StartsWith}];case ValueTypesEnum$1.Int:case ValueTypesEnum$1.Double:case ValueTypesEnum$1.Long:return[{label:"Equals",value:QueryOperatorEnum.Equal},{label:"Not Equals",value:QueryOperatorEnum.NotEqual},{label:"Less Than",value:QueryOperatorEnum.Less},{label:"Less Than Or Equal",value:QueryOperatorEnum.LessOrEqual},{label:"Greater Than Or Equal",value:QueryOperatorEnum.MoreOrEqual},{label:"Greater Than",value:QueryOperatorEnum.More}];case ValueTypesEnum$1.Bool:return[{label:"Equals",value:QueryOperatorEnum.Equal},{label:"Not Equals",value:QueryOperatorEnum.NotEqual}];case ValueTypesEnum$1.Date:case ValueTypesEnum$1.Time:case ValueTypesEnum$1.DateTime:return[{label:"Equals",value:QueryOperatorEnum.Equal},{label:"Not Equals",value:QueryOperatorEnum.NotEqual},{label:"From",value:QueryOperatorEnum.MoreOrEqual},{label:"To",value:QueryOperatorEnum.LessOrEqual}];default:return[]}},generateValueBySchemaType=K=>{switch(K){case ValueTypesEnum$1.String:return"";case ValueTypesEnum$1.Int:case ValueTypesEnum$1.Double:case ValueTypesEnum$1.Long:case ValueTypesEnum$1.Bool:case ValueTypesEnum$1.Date:case ValueTypesEnum$1.Time:case ValueTypesEnum$1.DateTime:return null;default:throw new Error(`Cannot generate value by current schema - ${K}`)}},getTypeBySchema=K=>{var J;return((J=K==null?void 0:K.Value)==null?void 0:J.Type)||ValueTypesEnum$1.String},generateValueWithConditionBySchema=K=>{var ue;const J=getTypeBySchema(K),oe=((ue=generateOptionsBySchemaType(J).at(0))==null?void 0:ue.value)??QueryOperatorEnum.Contains;return{value:generateValueBySchemaType(J),condition:oe}};function validateValueBySchemaType({value:K},J){switch(getTypeBySchema(J)){case ValueTypesEnum$1.Int:case ValueTypesEnum$1.Double:case ValueTypesEnum$1.Long:return!!(BigNumber.isBigNumber(K)||isNumber$2(K));case ValueTypesEnum$1.Bool:return isBool(K);case ValueTypesEnum$1.Date:case ValueTypesEnum$1.Time:case ValueTypesEnum$1.DateTime:return!!K;default:return!!K}}const QueryBuilderConditionCell=({type:K,condition:J,onChangeCondition:ne})=>{const oe=generateOptionsBySchemaType(K),ce=oe.find(ue=>ue.value===J);return jsxRuntimeExports.jsx(xF,{value:ce==null?void 0:ce.value,options:oe,onChange:ne})},QueryBuilderDateInput=({value:K,onChange:J})=>{const ne=K?DateFormatUtility.create(K).toInstance():null,oe=ce=>{J(ce!=null&&ce.isValid?ce.format(DateFormatEnum.DATE):(ce==null?void 0:ce.toString())??null)};return jsxRuntimeExports.jsx(bF,{value:ne,onChange:oe})},QueryBuilderDateTimeInput=({value:K,onChange:J})=>{const ne=K?DateFormatUtility.create(K).toInstance():null,oe=ce=>{J(ce!=null&&ce.isValid?ce.toISOString():(ce==null?void 0:ce.toString())??null)};return jsxRuntimeExports.jsx(bF,{showTime:!0,value:ne,onChange:oe})},QueryBuilderBoolInput=({value:K,onChange:J})=>{const ne=reactExports.useMemo(()=>[{label:"Y",value:"true"},{label:"N",value:"false"}],[]),oe=ne.find(ce=>ce.value===`${K}`);return jsxRuntimeExports.jsx(xF,{value:oe==null?void 0:oe.value,options:ne,onChange:ce=>J(ce==="true")})},QueryBuilderTimeInput=({value:K,onChange:J})=>{const ne=K?DateFormatUtility.create(K,DateFormatEnum.TIME).toInstance():null,oe=ce=>{J(ce!=null&&ce.isValid?ce.format(DateFormatEnum.TIME_MS):(ce==null?void 0:ce.toString())??null)};return jsxRuntimeExports.jsx(bF,{picker:"time",value:ne,onChange:oe})},QueryBuilderValueCell=({isOptional:K,type:J,value:ne,onChangeValue:oe})=>{switch(J){case ValueTypesEnum$1.Int:case ValueTypesEnum$1.Double:case ValueTypesEnum$1.Long:return jsxRuntimeExports.jsx(CF,{value:ne,onChange:oe});case ValueTypesEnum$1.String:return jsxRuntimeExports.jsx(Ml,{value:ne,onChange:oe});case ValueTypesEnum$1.Bool:return jsxRuntimeExports.jsx(QueryBuilderBoolInput,{isOptional:K,value:ne,onChange:oe});case ValueTypesEnum$1.Date:return jsxRuntimeExports.jsx(QueryBuilderDateInput,{value:ne,onChange:oe});case ValueTypesEnum$1.DateTime:return jsxRuntimeExports.jsx(QueryBuilderDateTimeInput,{value:ne,onChange:oe});case ValueTypesEnum$1.Time:return jsxRuntimeExports.jsx(QueryBuilderTimeInput,{value:ne,onChange:oe});default:return null}},mapQueryToRows=(K,J,ne)=>Object.keys(K).map(oe=>{const ce=K[oe],ue=J[oe],Ae=getTypeBySchema(ue),pe=me=>{ce.condition!==me&&ne(oe,{value:ce.value,condition:me})},xe=me=>{ce.value!==me&&ne(oe,{value:me,condition:ce.condition})};return{type:Ae,key:oe,isOptional:(ue==null?void 0:ue.Optional)??!1,condition:ce.condition,onChangeCondition:pe,value:ce.value,onChangeValue:xe}}),container$d="_container_hpytv_1",styles$t={container:container$d},QueryBuilderEditor=({query:K,schemaDictionary:J,updateValueByKey:ne})=>{const oe=reactExports.useMemo(()=>mapQueryToRows(K,J,ne),[K,J,ne]);return jsxRuntimeExports.jsx("div",{className:styles$t.container,children:jsxRuntimeExports.jsx(QueryBuilderTable,{rows:oe,renderKeyCell:QueryBuilderKeyCell,renderConditionCell:QueryBuilderConditionCell,renderValueCell:QueryBuilderValueCell})})},container$c="_container_1jjcs_1",styles$s={container:container$c},QueryBuilderContent=({onCancel:K,onApply:J})=>{const{validQuery:ne,query:oe,schemaDictionary:ce,updateValueByKey:ue,reset:Ae}=useQueryBuilderContext();return jsxRuntimeExports.jsxs("div",{className:styles$s.container,children:[jsxRuntimeExports.jsx(QueryBuilderToolbar,{}),jsxRuntimeExports.jsx(QueryBuilderEditor,{schemaDictionary:ce,query:oe,updateValueByKey:ue}),jsxRuntimeExports.jsx(QueryBuilderActions,{isApplyDisabled:!ne,onResetAll:Ae,onApply:()=>J(oe),onCancel:K})]})},CUSTOM_INDEX="custom",generateSchemaDictionaryByElements=K=>K.reduce((J,ne)=>(J[ne.Name]=ne,J),{}),QueryBuilderProvider=({initialQuery:K,elements:J,children:ne,onReset:oe})=>{const{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(K),[pe,xe]=reactExports.useState(()=>Object.keys(K).at(0)),me=!pe,ge=reactExports.useMemo(()=>{const je=J.map(Ke=>({label:Ke.Name,value:Ke.Name}));return je.length>0&&je.push({label:ce("queryBuilder.customIndex"),value:CUSTOM_INDEX}),je},[J]),ye=reactExports.useMemo(()=>generateSchemaDictionaryByElements(J),[J]),Se=reactExports.useMemo(()=>Object.keys(ue).some(je=>{const Ke=ue[je],Ye=ye[je];return validateValueBySchemaType(Ke,Ye)}),[ue,ye]),Te=reactExports.useCallback(je=>{xe(Ke=>{if(Ke===je)return Ke;let Ye={};if(je===CUSTOM_INDEX)Ye=Object.keys(ye).reduce((ze,Xe)=>{const Je=ye[Xe];return{...ze,[Xe]:generateValueWithConditionBySchema(Je)}},{});else{const ze=je?ye[je]:void 0;Ye=je?{[je]:generateValueWithConditionBySchema(ze)}:{}}return Ae(Ye),je})},[ye]),Ne=reactExports.useCallback((je,Ke)=>{Ae(Ye=>Object.hasOwn(Ye,je)?{...Ye,[je]:Ke}:Ye)},[]),$e=reactExports.useCallback(()=>{xe(void 0),Ae({}),oe()},[]),ke={validQuery:Se,schemaDictionary:ye,indexes:ge,query:ue,selectedIndex:pe,selectIndex:Te,isShowIntroductionSection:me,updateValueByKey:Ne,reset:$e};return jsxRuntimeExports.jsx(QueryBuilderContext.Provider,{value:ke,children:ne(ke)})},content$6="_content_4x1bp_1",styles$r={content:content$6},QueryBuilder=reactExports.memo(({initialQuery:K,elements:J,onCancel:ne,onApply:oe,onReset:ce,isCloseIcon:ue=!1})=>(useTranslation(),jsxRuntimeExports.jsx(QueryBuilderProvider,{initialQuery:K,elements:J,onReset:ce,children:Ae=>jsxRuntimeExports.jsx("div",{className:styles$r.content,children:Ae.isShowIntroductionSection?jsxRuntimeExports.jsx(QueryBuilderIntroduction,{isCloseIcon:ue,onCancel:ne}):jsxRuntimeExports.jsx(QueryBuilderContent,{onCancel:ne,onApply:oe})})})));QueryBuilder.displayName="QueryBuilder";const container$b="_container_22peh_1",content$5="_content_22peh_9",styles$q={container:container$b,content:content$5},DraggableGridContainer=({selectedGridRow:K,tabs:J,stackRef:ne,type:oe,children:ce,onUpdate:ue})=>{const{state:Ae,action:pe}=useDndContext(),{config:xe}=Ae,{updateConfig:me}=pe,{getRecord:ge}=useEditorRequest(),ye=useSelector$1(selectActiveDataset$1),[Se,Te]=reactExports.useState(),Ne=Ye=>{ge.fetch({key:Ye??(K==null?void 0:K.key),type:(K==null?void 0:K.type)??"",dataset:ye})},$e=Ye=>{Te(Ye)},ke=Ye=>{const ze=structuredClone(xe),Xe=`${EditorTabsEnum.EDITOR_TRANSITION}-${Ye.key}-${v4()}`,Je=findTarget(ze,ne.key);if(Je){const rt=Je.content.some(nt=>nt.id.includes(Ye.key));Je.content=Je.content.map(nt=>({...nt,isActive:rt&&nt.id.includes(Ye.key)})),rt||Je.content.push({...EDITOR_TABS[EditorTabsEnum.EDITOR_TRANSITION],id:Xe,key:Xe,disableActions:!0,label:Ye.key,transitionData:Ye,isActive:!0});const Ze=correctContent(ze,!0);me(Ze);const et=getParsedConfig(Ze,!0);pe.saveUiTypeData({simplifiedConfig:et})}},Ke=(Ye=>Ye==null?void 0:Ye.find(ze=>ze.isActive&&!ze.isCurrentlyDragging))(J||[]);return jsxRuntimeExports.jsx("div",{className:styles$q.container,children:jsxRuntimeExports.jsx("div",{"data-tid":"draggable-grid-container",className:cx("stack-content",styles$q.content),children:(Ke==null?void 0:Ke.key)===GridTabEnum.MAIN?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ce}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DropBox,{position:DropBoxEnum.INNER,stackRef:ne}),jsxRuntimeExports.jsx(EditorTabContent,{activeTab:Ke==null?void 0:Ke.key,transitionTab:Ke==null?void 0:Ke.transitionData,type:oe||"",selectedGridRow:K,successorType:Se,onApplySuccessorType:$e,onTransition:ke,onUpdate:ue,isEntityLoading:ge.isLoading,hasInitFetch:ge.hasInitFetch,entityState:ge.state,getEditorData:Ne})]})})})},InfoModalWithCheckbox=({isOpen:K,title:J,content:ne,onClose:oe,onConfirm:ce})=>{const{t:ue}=useTranslation(),[Ae,pe]=reactExports.useState(!0);reactExports.useEffect(()=>{K&&pe(!0)},[K]);const xe=()=>ce(Ae);return jsxRuntimeExports.jsxs(Ho,{isResizable:!1,title:J,onClose:oe,open:K,defaultHeight:180,defaultWidth:460,minHeightConstraints:180,minWidthConstraints:460,children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsxs("div",{className:"info-modal-with-checkbox__container",children:[jsxRuntimeExports.jsx("div",{className:"info-modal-with-checkbox__icon",children:jsxRuntimeExports.jsx(W5,{size:"Full"})}),ne]})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"info-with-checkbox",renderFooterActions:({cancelBtn:me,okBtn:ge})=>jsxRuntimeExports.jsxs("div",{className:"info-modal-with-checkbox__footer",children:[jsxRuntimeExports.jsxs("label",{className:"info-modal-with-checkbox__checkbox-wrapper",children:[jsxRuntimeExports.jsx(pF,{value:Ae,onChange:ye=>pe(ye)}),ue("confirmationModal.withDependencies")]}),jsxRuntimeExports.jsxs("div",{className:"info-modal-with-checkbox__footer-btn",children:[ge,me]})]}),onCancel:oe,onOk:xe,okText:ue("buttons.yes"),cancelText:ue("buttons.no")})]})},ContentHandlersModal=({handlers:K,isOpen:J,onClose:ne,onApply:oe})=>{const{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(null),pe=reactExports.useMemo(()=>K.map(me=>({label:me.Label,value:me.Name})),[K]),xe=()=>{const me=K.find(ge=>ge.Name===((ue==null?void 0:ue.value)||ue));if(!me)throw new Error("Cannot apply empty handler");oe({handler:me}),ne()};return jsxRuntimeExports.jsxs(Ho,{size:"sm",open:J,title:ce("chat.contentHandlersModal.title")??"",onClose:ne,children:[jsxRuntimeExports.jsx(Ho.Body,{className:"content-handlers-modal",children:jsxRuntimeExports.jsx(K_.Group,{name:"content-handlers-modal-choice-list",options:pe,value:ue,onChange:Ae})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"content-handlers",okText:ce("buttons.apply"),onOk:xe,okProps:{disabled:!ue},cancelText:ce("buttons.cancel"),onCancel:ne})]})};var ContentHandlerAttachmentEnum=(K=>(K.Attachment="Attachment",K.MessageInput="MessageInput",K))(ContentHandlerAttachmentEnum||{});const types$1={"application/prs.cww":["cww"],"application/prs.xsf+xml":["xsf"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["*xfdf"],"application/vnd.age":["age"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["*fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["*mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.pwg-xhtml-print+xml":["xhtm"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml","uo"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["*prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["*sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["*aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif","btf"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.cld":["cld"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.pytha.pyox":["pyo","pyox"],"model/vnd.sap.vds":["vds"],"model/vnd.usda":["usda"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.familysearch.gedcom":["ged"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]};Object.freeze(types$1);const types={"application/andrew-inset":["ez"],"application/appinstaller":["appinstaller"],"application/applixware":["aw"],"application/appx":["appx"],"application/appxbundle":["appxbundle"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/automationml-aml+xml":["aml"],"application/automationml-amlx+zip":["amlx"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cpl+xml":["cpl"],"application/cu-seeme":["cu"],"application/cwl":["cwl"],"application/dash+xml":["mpd"],"application/dash-patch+xml":["mpp"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdf":["fdf"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["*js"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/media-policy-dataset+xml":["mpf"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["*mp4","*mpg4","mp4s","m4p"],"application/msix":["msix"],"application/msixbundle":["msixbundle"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-keys":["asc"],"application/pgp-signature":["sig","*asc"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/sql":["sql"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/watcherinfo+xml":["wif"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xfdf":["xfdf"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/aac":["adts","aac"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avci":["avci"],"image/avcs":["avcs"],"image/avif":["avif"],"image/bmp":["bmp","dib"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/dpx":["dpx"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm","jpgm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/jt":["jt"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/prc":["prc"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/u3d":["u3d"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js","mjs"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["md","markdown"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/wgsl":["wgsl"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","*jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};Object.freeze(types);var __classPrivateFieldGet=function(K,J,ne,oe){if(ne==="a"&&!oe)throw new TypeError("Private accessor was defined without a getter");if(typeof J=="function"?K!==J||!oe:!J.has(K))throw new TypeError("Cannot read private member from an object whose class did not declare it");return ne==="m"?oe:ne==="a"?oe.call(K):oe?oe.value:J.get(K)},_Mime_extensionToType,_Mime_typeToExtension,_Mime_typeToExtensions;class Mime{constructor(...J){_Mime_extensionToType.set(this,new Map),_Mime_typeToExtension.set(this,new Map),_Mime_typeToExtensions.set(this,new Map);for(const ne of J)this.define(ne)}define(J,ne=!1){for(let[oe,ce]of Object.entries(J)){oe=oe.toLowerCase(),ce=ce.map(pe=>pe.toLowerCase()),__classPrivateFieldGet(this,_Mime_typeToExtensions,"f").has(oe)||__classPrivateFieldGet(this,_Mime_typeToExtensions,"f").set(oe,new Set);const ue=__classPrivateFieldGet(this,_Mime_typeToExtensions,"f").get(oe);let Ae=!0;for(let pe of ce){const xe=pe.startsWith("*");if(pe=xe?pe.slice(1):pe,ue==null||ue.add(pe),Ae&&__classPrivateFieldGet(this,_Mime_typeToExtension,"f").set(oe,pe),Ae=!1,xe)continue;const me=__classPrivateFieldGet(this,_Mime_extensionToType,"f").get(pe);if(me&&me!=oe&&!ne)throw new Error(`"${oe} -> ${pe}" conflicts with "${me} -> ${pe}". Pass \`force=true\` to override this definition.`);__classPrivateFieldGet(this,_Mime_extensionToType,"f").set(pe,oe)}}return this}getType(J){if(typeof J!="string")return null;const ne=J.replace(/^.*[/\\]/,"").toLowerCase(),oe=ne.replace(/^.*\./,"").toLowerCase(),ce=ne.length<J.length;return!(oe.length<ne.length-1)&&ce?null:__classPrivateFieldGet(this,_Mime_extensionToType,"f").get(oe)??null}getExtension(J){var ne;return typeof J!="string"?null:(J=(ne=J==null?void 0:J.split)==null?void 0:ne.call(J,";")[0],(J&&__classPrivateFieldGet(this,_Mime_typeToExtension,"f").get(J.trim().toLowerCase()))??null)}getAllExtensions(J){return typeof J!="string"?null:__classPrivateFieldGet(this,_Mime_typeToExtensions,"f").get(J.toLowerCase())??null}_freeze(){this.define=()=>{throw new Error("define() not allowed for built-in Mime objects. See https://github.com/broofa/mime/blob/main/README.md#custom-mime-instances")},Object.freeze(this);for(const J of __classPrivateFieldGet(this,_Mime_typeToExtensions,"f").values())Object.freeze(J);return this}_getTestState(){return{types:__classPrivateFieldGet(this,_Mime_extensionToType,"f"),extensions:__classPrivateFieldGet(this,_Mime_typeToExtension,"f")}}}_Mime_extensionToType=new WeakMap,_Mime_typeToExtension=new WeakMap,_Mime_typeToExtensions=new WeakMap;const mime=new Mime(types,types$1)._freeze(),contentHandlersConverter={toDomain:K=>{const J=(K==null?void 0:K.filter(ce=>ce.Type===HandlerType.CONTENT))||[],ne=J.length>0,oe=J.length>1;return{handlers:J,isExist:ne,isMultiChoice:oe}}},getFilename=(K,J,ne="txt")=>`${K}-${J}.${ne}`,contentHandlerApi={async getContentHandlers(K){var oe;if(isNullable(K.dataset)||isNullable(K.environment))throw new Error('Cannot execute request because one of these parameters is empty: "dataset" or "environment"');const J=await storageApi.getRecord(K),ne=J.schema.typeList[J.schema.rootType];return contentHandlersConverter.toDomain((oe=ne.Declare)==null?void 0:oe.Handlers)},async runContentHandler(K){if(isNullable(K.dataset)||isNullable(K.environment))throw new Error('Cannot execute request because one of these parameters is empty: "dataset" or "environment"');const J={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"LoadRecordContent",Keys:[],Arguments:{Key:K.key,ContentId:K.handler.Label,TypeName:K.type},Dataset:K.dataset,userName:K.userName},oe=(await handlerApi.handlerRun(J))[0].Result;if(oe.Bytes_){const ce=base64ToBytes(oe.Bytes_),ue=getMimeTypeFromBuffer(ce)||"plain/text",Ae=new Blob([ce],{type:ue}),pe=mime.getExtension(ue)||"txt",xe=getFilename(K.type,K.key,pe);return{attachmentType:oe.AttachmentType,content:new File([Ae],xe)}}if(oe.BinaryContent){const ce=base64ToBytes(oe.BinaryContent.Content),ue=getMimeTypeFromBuffer(ce)||"plain/text",Ae=new Blob([ce],{type:ue}),pe=mime.getExtension(ue)||"txt",xe=getFilename(K.type,K.key,pe);return{attachmentType:oe.AttachmentType,content:new File([Ae],xe)}}if(oe.Instruction)return{attachmentType:oe.AttachmentType,content:oe.Instruction};if(oe.Text){if(oe.AttachmentType===ContentHandlerAttachmentEnum.Attachment){const ce=new Blob([oe.Text],{type:"plain/text"}),ue=getFilename(K.type,K.key),Ae=new File([ce],ue);return{attachmentType:oe.AttachmentType,content:Ae}}return{attachmentType:oe.AttachmentType,content:oe.Text}}throw new Error(`Cannot create request handler by handler - ${K.handler.Name}`)}},CHAT_KEY="ChatDashboard",CHAT_LABEL="Chat Dashboard",ChatAboutContent=({type:K,selectedGridRowKey:J,isDisabled:ne,testid:oe})=>{var Xe;const{t:ce}=useTranslation(),ue=useSelector$1(selectActiveEnvironment),Ae=useSelector$1(selectActiveDataset$1),pe=useDispatch$1(),{data:xe}=useSelector$1(selectGridSchema),me=useSelector$1(selectUser),{activeTab:ge,setActiveTab:ye}=useTabParams(),{openTabParams:Se}=useAppContext(),[Te,{setTrue:Ne,setFalse:$e}]=useBoolean(!1),ke=contentHandlersConverter.toDomain((Xe=xe.Declare)==null?void 0:Xe.Handlers),je=ne||!ke.isExist,Ke=()=>{ge!=null&&ge.id&&(ye(ge.id),Se.chatAbout.clearParams())},Ye=async Je=>{if(!J)return;const rt=await contentHandlerApi.runContentHandler({handler:Je.handler,key:J,type:K,dataset:Ae,environment:ue,userName:me==null?void 0:me.username});pe(openTab({id:CHAT_KEY,key:CHAT_KEY,label:CHAT_LABEL})),ye(CHAT_KEY),Se.chatAbout.setParams({data:rt,handleMoveToPreviousTab:Ke})},ze=()=>{if(ke.isMultiChoice){Ne();return}Ye({handler:ke.handlers[0]})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(mf,{title:ce("gridToolbar.chatAbout")||"",children:jsxRuntimeExports.jsx(rl,{iconAfter:jsxRuntimeExports.jsx(bA,{}),onClick:ze,disabled:je,testid:oe,type:"secondary",variant:"ghost"})}),Te&&jsxRuntimeExports.jsx(ContentHandlersModal,{isOpen:!0,handlers:ke.handlers,onClose:$e,onApply:Ye})]})},container$a="_container_1e0u3_6",handlerInfo="_handlerInfo_1e0u3_12",infoIcon="_infoIcon_1e0u3_20",content$4="_content_1e0u3_24",icons$1="_icons_1e0u3_30",group="_group_1e0u3_35",dropdownList="_dropdownList_1e0u3_53",iconBadge="_iconBadge_1e0u3_59",endBlock="_endBlock_1e0u3_63",dropdown="_dropdown_1e0u3_53",spin="_spin_1e0u3_1",styles$p={container:container$a,handlerInfo,infoIcon,content:content$4,icons:icons$1,group,dropdownList,iconBadge,endBlock,dropdown,spin};var ToolbarActionIconStatus=(K=>(K.SUCCESS="success",K.ERROR="error",K))(ToolbarActionIconStatus||{});const GridSettingsModal=({isOpen:K,toggleModal:J,cellRowsCount:ne,dndContextAction:oe,isRowBorder:ce,onChangeIsRowBorder:ue})=>{const{t:Ae}=useTranslation();return jsxRuntimeExports.jsxs(Ho,{size:"sm",title:Ae("grid.settings"),open:K,onClose:J,children:[jsxRuntimeExports.jsxs(Ho.Body,{className:"grid-settings",children:[jsxRuntimeExports.jsxs("div",{className:"grid-settings__row",children:[Ae("grid.cellHeight"),jsxRuntimeExports.jsx(xF,{size:"sm",className:"grid-settings__select",testid:"cell-height-dropdown",variant:"outlined",options:rowsCountArr,value:ne,onChange:pe=>{oe.saveUiTypeData({cellRowsHeight:Number(pe)}),pe>CellRowsCount.ONE&&ue(!0)},defaultValue:CellRowsCount.ONE})]}),jsxRuntimeExports.jsxs("div",{className:"grid-settings__row",children:[Ae("grid.rowBorder"),jsxRuntimeExports.jsx(mF,{value:ce,onChange:ue,testid:"row-border-toggle"})]})]}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"grid-settings",onCancel:J,okText:null,cancelText:Ae("buttons.close")})]})},dropdownSections="_dropdownSections_f4ldg_1",footer="_footer_f4ldg_8",clearButton="_clearButton_f4ldg_13",filter="_filter_f4ldg_17",filterButton="_filterButton_f4ldg_22",filterLabel="_filterLabel_f4ldg_27",placeholder="_placeholder_f4ldg_40",styles$o={dropdownSections,footer,clearButton,filter,filterButton,filterLabel,placeholder},TypesFilter=()=>{var Je,rt;const{t:K}=useTranslation(),{schemaTypes:J,status:ne}=useSelector$1(selectSchemaTypes),{activeTab:oe,setActiveTab:ce}=useTabParams(),{state:ue,action:Ae}=useAppContext(),{fetch:pe}=useRequest(handlerApi.handlerRun),xe=useSelector$1(selectFullScreenMode),me=useSelector$1(selectActiveDataset$1),[ge,ye]=reactExports.useState(!1),[Se,Te]=reactExports.useState(),Ne=()=>{const Ze=(oe==null?void 0:oe.tableKey)||(oe==null?void 0:oe.id);return Se==null?void 0:Se.Types.filter(et=>et.tableKey===Ze)},$e=[{title:K("header.tabgroups.types"),items:Ne()||[],isLoading:ne===LoadingStatusesEnum.LOADING},{title:K("header.tabgroups.filters"),items:(Se==null?void 0:Se.Filters)||[],isLoading:ne===LoadingStatusesEnum.LOADING,isHide:!((Je=Se==null?void 0:Se.Filters)!=null&&Je.length)}],ke=$e.every(Ze=>Ze.items.length===0);reactExports.useEffect(()=>{Te(J)},[ge,J]);const je=Ze=>{(oe==null?void 0:oe.id)===Ze.id&&!Ze.tableKey||Ae.onConfirmLeaveEditor(()=>{pe({Type:HandlerRunTypeEnum.DATA_SERVICE,Method:"SelectType",Arguments:{TypeName:Ze.id}}).then(et=>{const nt=et[0].Result,Ge=convertSchemaTypeDtoToModel(nt.Schema,nt.BaseType);Ae.callResetDndContextMethod(Ze.id),!ue.showLineHider&&Ae.setShowLineHiderAction(!0);const ve=Ge.typeList[Ge.rootType],Be=ve.Name,Re=ve.Module.ModuleName;dispatch$1(updateActiveTypeMetadata(ve)),dispatch$1(openTab(Ze)),oe!=null&&oe.id&&dispatch$1(getDatasetData({type:Be,module:Re})),ce(Ze.id),ye(!1),xe&&ve.DisplayKind!==SchemaDisplayKind.Basic&&dispatch$1(setFullScreenMode(!1)),dispatch$1(saveAppState(me))}).catch(toast.error)})},Ke=()=>{if(!(oe!=null&&oe.tableKey))return;const Ze=J.Tables.find(et=>et.id===(oe==null?void 0:oe.tableKey));Ze&&je(Ze)},Ye=oe!=null&&oe.tableKey?(rt=Se==null?void 0:Se.Types.find(Ze=>Ze.id===oe.id))==null?void 0:rt.label:"",ze=()=>Ye?jsxRuntimeExports.jsx(mf,{title:Ye,children:jsxRuntimeExports.jsx("span",{className:styles$o.filterLabel,children:Ye})}):jsxRuntimeExports.jsx("span",{className:cx(styles$o.filterLabel,styles$o.placeholder),children:K("header.tabgroups.filter")}),Xe=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$o.dropdownSections,children:$e.map(({isHide:Ze,title:et,items:nt})=>Ze?null:jsxRuntimeExports.jsx(DropdownSection,{title:et,activeTab:oe==null?void 0:oe.id,items:nt,onClick:je},et))}),jsxRuntimeExports.jsx("div",{className:styles$o.footer,children:jsxRuntimeExports.jsx(rl,{size:"sm",variant:"ghost",type:"primary",testid:"filter-types-clear-icon",disabled:!Ye,className:styles$o.clearButton,iconBefore:jsxRuntimeExports.jsx(WB,{}),onClick:Ke,children:K("header.tabgroups.clear")})})]});return ke?null:jsxRuntimeExports.jsx(X_,{testid:"filter-types-container",open:ge,onOpenChange:()=>ye(Ze=>!Ze),dropdownRender:Xe,children:jsxRuntimeExports.jsxs("div",{className:styles$o.filter,"aria-hidden":!0,onClick:()=>ye(!0),children:[jsxRuntimeExports.jsx(rl,{testid:"filter-types-btn",size:"sm",variant:"ghost",type:ge?"primary":"secondary",iconBefore:jsxRuntimeExports.jsx(zB,{}),className:styles$o.filterButton}),ze()]})})},dropdownBtn="_dropdownBtn_10shk_1",open="_open_10shk_6",styles$n={dropdownBtn,open},ExportDropdown=({dropdown:K})=>{var ce;const[J,ne]=reactExports.useState(!1),oe=ue=>{ne(ue)};return jsxRuntimeExports.jsx(X_,{open:J,onOpenChange:oe,menu:{items:(ce=K.dropdownItems)==null?void 0:ce.map(({name:ue,actionHandler:Ae,icon:pe,isDisabled:xe})=>({key:ue,label:ue,onClick:Ae,icon:pe,disabled:xe}))},children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(rl,{iconAfter:jsxRuntimeExports.jsx(Rp,{className:cx({[styles$n.open]:J})}),type:"secondary",variant:"ghost",className:styles$n.dropdownBtn,testid:K.testid,children:K.title})})})};var define_process_env_default={};const GridToolbar=({type:K,selectedRow:J,entities:ne,isQueryApplied:oe,onExportGridOptions:ce,showQueryBuilder:ue,typeViewSettings:Ae,selectedRangeRows:pe,onDeleteSelectedRangeRows:xe,deleteEntitiesStatus:me,onExportBulkEntities:ge,onSaveRecordPermanently:ye,savePermanentlyStatus:Se,onRefresh:Te,isSelectAllRecordsBtnClicked:Ne,selectAllRecords:$e,deselectAllRecords:ke,cellRowsCount:je,isRowBorder:Ke,onChangeIsRowBorder:Ye,activeTypeTab:ze})=>{var Tt,or;const{t:Xe}=useTranslation(),{action:Je,state:rt}=useAppContext(),{state:Ze,action:et}=useDndContext(),{cacheTabData:nt}=rt,[Ge,{toggle:ve}]=useBoolean(),[Be,{toggle:Re}]=useBoolean(),[Ie,{toggle:Fe}]=useBoolean(),{activeTab:qe}=useTabParams(),{data:We}=useSelector$1(selectGridSchema),[Ue,_e]=reactExports.useState(!1),[Qe,tt]=reactExports.useState(""),[it,at]=reactExports.useState(""),[ot,lt]=reactExports.useState([]),[st,ut]=reactExports.useState(""),ft=useSelector$1(selectUser),dt=useSelector$1(selectMetaData),Bt=useSelector$1(selectActiveDataset$1),pt=useSelector$1(selectIsReadonly),mt=useRequest(schemaApi.getTypeHierarchy),bt=pt||Ze.isTypeReadOnly,xt=Object.keys(pe).length,yt=ne.length===0,It=((Tt=nt==null?void 0:nt[K])==null?void 0:Tt.query)||null,ht=async Mt=>{try{const kt=await mt.fetch({name:Mt});lt(kt)}catch(kt){console.error(kt)}};reactExports.useEffect(()=>{qe!=null&&qe.id&&ht(qe==null?void 0:qe.id)},[qe==null?void 0:qe.id]),reactExports.useEffect(()=>{Ue||(tt(""),at(""))});const gt=Mt=>{ut(Xe("newEntity.create")),at(Mt),_e(!0)},Pt=Mt=>{ge(!!Mt),ve()},wt=Mt=>{ye(!!Mt),Re()},St=()=>{var $t,jt,nr;const kt=[{name:"Export time:",value:formatExcelDate(new Date)},{name:"Type:",value:(($t=dt==null?void 0:dt.data)==null?void 0:$t.Name)||"no active type"},{name:"Dataset:",value:Bt||"no active dataset"}],ur=()=>xt?Object.keys(pe):J.key?[J.key]:[];ce().toExcel({sheetName:((nr=(jt=dt==null?void 0:dt.data)==null?void 0:jt.Module)==null?void 0:nr.ModuleName)||"Sheet 1",selectedRowKeys:ur(),additionalCells:kt})},Zt=()=>Ne?0:xt!==0?xt:1,Ct=[{groupId:v4(),icons:[{tooltipPlaceholder:Xe("shared.refresh")||"",actionHandler:Te,testid:"refresh-data-button",icon:jsxRuntimeExports.jsx(Pk,{})}]},{groupId:v4(),icons:[{isDisabled:yt,isHide:((or=Ae.LayoutSettings)==null?void 0:or.HideEditor)||bt,tooltipPlaceholder:Xe(Ne?"gridToolbar.deselectAllRecords":"gridToolbar.selectAllRecords"),actionHandler:Ne?ke:$e,testid:"select-all-records-button",icon:Ne?jsxRuntimeExports.jsx(GB,{}):jsxRuntimeExports.jsx(UB,{})},{isDisabled:pt||ot.length===0,isHide:Ae.ReadOnly||bt,tooltipPlaceholder:Xe("gridToolbar.addNewEntity")||"",actionHandler:()=>ot.length===1&&gt(ot[0].Name),testid:"add-new-entity-button",icon:jsxRuntimeExports.jsx(VA,{}),dropdown:{isHide:ot.length===1,items:ot.map(({Name:Mt,Label:kt})=>({key:Mt,label:kt})),actionHandler:gt}},{isDisabled:!J.key,isHide:Ae.ReadOnly||bt,tooltipPlaceholder:Xe("gridToolbar.copyEntity")||"",actionHandler:()=>Je.onConfirmLeaveEditor(()=>{J.key&&(ut(Xe("newEntity.copy")),tt(J.key),at((qe==null?void 0:qe.id)??""),_e(!0))}),testid:"copy-entity-button",icon:jsxRuntimeExports.jsx(_A,{})},{isDisabled:yt,isHide:Ae.ReadOnly||bt,tooltipPlaceholder:xt<2?Xe("gridToolbar.deleteSelectedEntity"):Xe("gridToolbar.deleteSelectedEntities",{numberOfItems:`${Ne?"All":xt} `}),actionHandler:()=>Ho.delete({title:Xe("confirmationModal.deleteRecords.title"),content:xt<2?Xe("confirmationModal.deleteRecords.confirmationTextOneEntity"):Xe("confirmationModal.deleteRecords.confirmationTexts",{numberOfItems:xt!==0?xt:1}),defaultHeight:200,onOk:Mt=>{xe(),Mt(),Je.setIsEditorDataChangedAction(!1)},testId:"delete-record"}),isBadge:xt!==0,status:me,testid:"delete-entity-button",icon:jsxRuntimeExports.jsx(Tk,{})},{isDisabled:yt,isHide:!(ft!=null&&ft.roles.includes(UserRole.Developer))||env.isSimplifiedBuild,tooltipPlaceholder:xt<2?Xe("gridToolbar.savePermanentlyEntity"):Xe("gridToolbar.savePermanentlyEntities",{numberOfItems:`${Ne?"All":xt} `}),actionHandler:Re,isBadge:xt!==0,status:Se,testid:"save-permanently-button",icon:jsxRuntimeExports.jsx(Ak,{})},{tooltipPlaceholder:Xe("gridToolbar.chatAbout")||"",isHide:define_process_env_default.CL_CHAT_ABOUT_ON==="false"||env.isSimplifiedBuild,component:jsxRuntimeExports.jsx(ChatAboutContent,{type:K,selectedGridRowKey:J.key,isDisabled:yt,testid:"chat-about-button"}),testid:"chat-about-button",icon:jsxRuntimeExports.jsx(bA,{})}]},{groupId:v4(),dropdown:{title:Xe("gridToolbar.export")||"",isVisible:!0,testid:"export-button",dropdownItems:[{name:Xe("gridToolbar.excel")||"",isDisabled:yt,actionHandler:()=>Ho.info({title:Xe("confirmationModal.export.title"),content:Xe("confirmationModal.export.exportEntity",{count:Zt()}),onOk:Mt=>{St(),Mt()},defaultHeight:200,testId:"export-entity"}),icon:jsxRuntimeExports.jsx(rk,{})},{name:Xe("gridToolbar.csv")||"",isDisabled:yt,actionHandler:ve,icon:jsxRuntimeExports.jsx(sF,{})}]}}];env.isSimplifiedBuild||Ct.unshift({groupId:v4(),icons:[{className:oe||It?"text-warning":void 0,tooltipPlaceholder:Xe("gridToolbar.query")||"",actionHandler:ue,isDisabled:oe||It?!1:yt,testid:"query-button",icon:jsxRuntimeExports.jsx(gD,{})}]});const Rt=(Mt,kt)=>{switch(kt){case ToolbarActionIconStatus.SUCCESS:return`'${Mt}' ${Xe("gridToolbar.completed")}`;case ToolbarActionIconStatus.ERROR:return`'${Mt}' ${Xe("gridToolbar.failed")}`;default:return Mt}},dr=(Mt,kt)=>{var ur;return jsxRuntimeExports.jsx(X_,{menu:{items:(ur=Mt==null?void 0:Mt.items)==null?void 0:ur.map($t=>({...$t,onClick:()=>Mt.actionHandler($t.key)}))},className:styles$p.dropdown,children:kt})},Dt=(Mt,kt,ur,$t)=>Mt||kt?jsxRuntimeExports.jsx(vF,{color:kt??"info",className:styles$p.iconBadge,children:ur}):$t??ur;return jsxRuntimeExports.jsxs("div",{className:styles$p.container,"data-tid":"main-grid-toolbar",children:[jsxRuntimeExports.jsx(HandlersBlock,{selectedRow:J,selectedRangeRows:pe,activeTypeTab:ze,handlersType:HandlersTypeEnum.MainGrid,schema:We,pinnedHandlers:Ze.pinnedHandlers}),jsxRuntimeExports.jsxs("div",{className:styles$p.content,children:[jsxRuntimeExports.jsx("div",{className:styles$p.icons,children:Ct.map(({groupName:Mt,groupId:kt,icons:ur,dropdown:$t})=>jsxRuntimeExports.jsxs("div",{className:styles$p.group,children:[Mt&&jsxRuntimeExports.jsx("span",{children:Xe(Mt||"")}),ur==null?void 0:ur.map(({className:jt,isDisabled:nr,tooltipPlaceholder:Ot,actionHandler:Lt,isHide:lr,component:Ht,isBadge:qt,testid:tr,icon:Vt,status:Gt,dropdown:br})=>{const Yt=jsxRuntimeExports.jsx(mf,{title:Rt(Ot,Gt),status:Gt||void 0,open:isDefined$1(Gt)||void 0,children:jsxRuntimeExports.jsx(rl,{iconAfter:Vt,testid:tr,type:"secondary",variant:"ghost",disabled:nr,onClick:Lt,className:jt})});return jsxRuntimeExports.jsx(reactExports.Fragment,{children:br&&!br.isHide?dr(br,Yt):!lr&&Dt(qt,Gt,Yt,Ht)},v4())}),$t&&$t.isVisible&&jsxRuntimeExports.jsx(ExportDropdown,{dropdown:$t})]},kt))}),jsxRuntimeExports.jsxs("div",{className:styles$p.endBlock,children:[jsxRuntimeExports.jsx(TypesFilter,{}),jsxRuntimeExports.jsx(mf,{title:Xe("grid.settings"),children:jsxRuntimeExports.jsx(rl,{type:Ie?"primary":"secondary",variant:"ghost",iconBefore:jsxRuntimeExports.jsx(HD,{}),onClick:Fe,testid:"grid-settings-button"})})]})]}),jsxRuntimeExports.jsx(InfoModalWithCheckbox,{title:Xe("confirmationModal.export.title"),isOpen:Ge,content:Xe("confirmationModal.export.exportEntity",{count:Zt()}),onClose:ve,onConfirm:Pt}),jsxRuntimeExports.jsx(InfoModalWithCheckbox,{title:Xe("confirmationModal.savePermanently.title"),isOpen:Be,content:Xe("confirmationModal.savePermanently.exportEntity",{count:Zt()}),onClose:Re,onConfirm:wt}),jsxRuntimeExports.jsx(CreateEntityModal,{isOpen:Ue,setIsModalOpen:_e,selectedType:it,baseType:ze,recordKey:Qe,title:st}),jsxRuntimeExports.jsx(GridSettingsModal,{isOpen:Ie,toggleModal:Fe,cellRowsCount:je,dndContextAction:et,isRowBorder:Ke,onChangeIsRowBorder:Ye})]})},UserGuideModal=()=>{const{t:K}=useTranslation(),{state:J,action:ne}=useDndContext(),{userGuideCompleted:oe,userGuideFormat:ce,userGuideContent:ue}=J.userGuide,[Ae,pe]=reactExports.useState(!oe),[xe,me]=reactExports.useState(!!oe),ge=()=>{pe(!1),xe&&(ne.saveUiTypeData({userGuideCompleted:xe}),ne.changeIsGuideCompleted(xe))};if(!(oe||!ue))return jsxRuntimeExports.jsxs(Ho,{size:"lg",defaultHeight:400,open:Ae,onClose:()=>pe(!Ae),title:K("userGuideModal.title"),children:[jsxRuntimeExports.jsx(Ho.Body,{className:"user-guide-modal__body",children:ce===LanguageEnum.Markdown?jsxRuntimeExports.jsx("div",{className:"user-guide-modal__markdown-viewer",children:jsxRuntimeExports.jsx(Markdown,{children:ue})}):jsxRuntimeExports.jsx(ContentViewer,{content:ue})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"user-guide",okText:K("buttons.ok"),onOk:ge,renderFooterActions:({okBtn:ye})=>jsxRuntimeExports.jsxs("div",{className:"user-guide-modal__footer",children:[jsxRuntimeExports.jsx(pF,{value:xe,onChange:()=>me(!xe),children:K("userGuideModal.doNotShowAgain")}),ye]})})]})},GridPagination=({className:K,range:J,isAvailableNextPage:ne,isAvailablePreviousPage:oe,onPrev:ce,onNext:ue,onFirst:Ae,isGridPageDataLoading:pe})=>{const{t:xe}=useTranslation(),me=pe||!oe||J.start===1,ge=pe||!ne,[ye,Se]=reactExports.useState(!1),[Te,Ne]=reactExports.useState(!1),[$e,ke]=reactExports.useState(!1);return reactExports.useEffect(()=>{(!oe&&(ye||Te)||J.start===1)&&(Se(!1),Ne(!1))},[oe,J.start]),jsxRuntimeExports.jsxs("div",{className:cx(K,"grid-pagination"),children:[jsxRuntimeExports.jsx(mf,{open:ye&&oe,title:xe("grid.pagination.firstPage"),onOpenChange:je=>{(!oe||J.start===1)&&je||Se(je)},children:jsxRuntimeExports.jsx(rl,{size:"sm",iconAfter:jsxRuntimeExports.jsx(MA,{}),onClick:Ae,testid:"go-to-first-page-button",disabled:me,type:"secondary",variant:"ghost"})}),jsxRuntimeExports.jsx(mf,{open:Te&&oe,title:xe("grid.pagination.previousPage"),onOpenChange:je=>{(!oe||J.start===1)&&je||Ne(je)},children:jsxRuntimeExports.jsx(rl,{size:"sm",iconAfter:jsxRuntimeExports.jsx(vk,{}),disabled:me,onClick:ce,testid:"go-to-prev-page-button",type:"secondary",variant:"ghost"})}),jsxRuntimeExports.jsx(mf,{open:$e,title:xe("grid.pagination.nextPage"),onOpenChange:je=>{ne&&ke(je)},children:jsxRuntimeExports.jsx(rl,{size:"sm",iconAfter:jsxRuntimeExports.jsx(fk,{}),disabled:ge,onClick:ue,testid:"go-to-next-page-button",type:"secondary",variant:"ghost"})}),jsxRuntimeExports.jsxs("span",{className:"grid-pagination__counter",children:[J.start," - ",J.end]})]})},PageNavigation=({page:K,onChangeCurrentPage:J,isPageDataLoading:ne,isAvailableNextPage:oe})=>{const{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(),pe=()=>{K===ue||!ue||(J(ue),Ae(void 0))},xe=me=>{(me.code===KeyboardCode.Enter||me.code===KeyboardCode.NumpadEnter)&&pe()};return K===1&&(ne||!oe)?null:jsxRuntimeExports.jsxs("div",{className:"grid-page-navigation",children:[jsxRuntimeExports.jsx("div",{className:"grid-page-navigation__label",children:ce("grid.pagination.jumpToPage")}),jsxRuntimeExports.jsx(CF,{variant:"outlined",className:"grid-page-navigation__input",value:ue,onChange:me=>me&&Ae(Number(me)),onKeyDown:xe}),jsxRuntimeExports.jsx(rl,{size:"sm",variant:"ghost",className:"grid-page-navigation__button",onClick:pe,children:ce("grid.pagination.go")})]})},PAGINATION_LIMIT=1e3;function usePagination({initPageSize:K,initPageIndex:J}){const ne=isNullable(J)?1:J+1,[oe,ce]=reactExports.useState(ne),[ue,Ae]=reactExports.useState(ne),[pe,xe]=reactExports.useState({start:1,end:K||PAGINATION_LIMIT}),[me,ge]=reactExports.useState(!1),[ye,Se]=reactExports.useState(!1),Te=reactExports.useRef(!0),[Ne,$e]=reactExports.useState(!1),ke=oe===1,je=K||PAGINATION_LIMIT,Ke=()=>je+1,Ye=Fe=>(Fe-1)*je,ze=()=>Ye(oe),Xe=Fe=>Fe.slice(0,je),Je=reactExports.useCallback(Fe=>{if(Ne)return pe;const qe=Fe.length,We=(oe-1)*je+(qe?1:0),Ue=We+(qe?qe-1:0);return{start:We,end:Ue}},[Ne]);return{isAvailableNextPageRef:Te,isInitialPage:ke,page:oe,onRevertPrevPage:()=>{$e(!0),ce(ue)},setPage:ce,isAvailableNextPage:me,isAvailablePreviousPage:ye,getSkipByCurrentPage:ze,getLimit:Ke,sliceEntitiesByLimit:Xe,getSkipByPage:Ye,updatePagination:Fe=>{const qe=Fe.length;ge(qe>je),Se(qe?oe>1:!1)},onResetPage:()=>{Ae(oe),ce(1)},onPreviousPage:()=>{if(!ye||Ne)return;const Fe=oe-1;$e(!0),Ae(oe),ce(Fe)},onFirstPage:()=>{ye&&($e(!0),Ae(oe),ce(1))},onNextPage:()=>{if(!me||Ne)return;const Fe=oe+1;$e(!0),Ae(oe),ce(Fe)},generateRangeByEntities:Je,reset:()=>{$e(!1)},isPageDataLoading:Ne,updateRange:Fe=>{const qe=oe===1?oe:(oe-1)*je+1;xe({start:qe,end:qe+Fe-1})},onChangeCurrentPage:Fe=>{$e(!0),Ae(oe),ce(Fe)}}}function useQueryBuilder(K=!1){const[J,{setTrue:ne,setFalse:oe}]=useBoolean(K),[ce,ue]=reactExports.useState({});return{isApplied:reactExports.useMemo(()=>!isEmpty$2(ce),[ce]),isShow:J,query:ce,mapQueryToDTO:()=>Object.keys(ce).reduce((ye,Se)=>{const{condition:Te,value:Ne}=ce[Se];return isNullable(Ne)?ye:{...ye,[Se]:{[Te]:Ne}}},{}),generateElementsBySchema:(ye,Se)=>ye&&Se?mapSchemaToElements(ye,Se):[],close:oe,show:ne,apply:ye=>ue({...ye}),reset:()=>ue({})}}const initialSelectedRow={key:void 0,type:void 0};function useEntities({tabSchema:K,useCache:J=!1,columnsState:ne,gridColumns:oe,updateTypeState:ce,cellHeight:ue,initPageSize:Ae,initPageIndex:pe}){var Ot;const{state:xe,action:me}=useAppContext(),{state:ge,action:ye}=useDndContext(),Se=(K==null?void 0:K.Name)&&((Ot=xe.cacheTabData)==null?void 0:Ot[K.Name])||null,Te=usePagination({initPageSize:Ae,initPageIndex:pe}),Ne=useQueryBuilder(!!Se),$e=useSelector$1(selectActiveDataset$1),ke=useSelector$1(selectUser),{activeTab:je}=useTabParams(),[Ke,Ye]=reactExports.useReducer(Lt=>Lt+1,0),ze=reactExports.useRef(0),Xe=reactExports.useRef(0),Je=reactExports.useRef(!0),[rt,Ze]=reactExports.useState(void 0),[et,nt]=reactExports.useState({}),{debounce:Ge,isLoading:ve}=useDebounce(),[Be,Re]=reactExports.useState(initialSelectedRow),[Ie,Fe]=reactExports.useState({}),[qe,We]=reactExports.useState({}),[Ue,_e]=reactExports.useState([]),[Qe,tt]=reactExports.useState(!1),[it,at]=reactExports.useState(!1),{fetch:ot,isLoading:lt}=useRequest(storageApi.deleteEntities),{fetch:st,isLoading:ut,status:ft,error:dt}=useRequest(handlerApi.handlerRun),[Bt,pt]=reactExports.useState(!1),[mt,bt]=reactExports.useState(null),[xt,yt]=reactExports.useState(null),It=reactExports.useRef({...initialSelectedRow}),ht=Object.values(Ie).length!==0,gt=ut||lt||ge.isViewersDataLoading,Pt=reactExports.useMemo(()=>mapMetadataToGridColumnsHelper((rt==null?void 0:rt.Elements)||[],ne,oe,ce),[rt,ne,ue]),wt=()=>{Re(initialSelectedRow),ye.setSelectedGridRow(initialSelectedRow),ye.selectGridRowKey(initialSelectedRow.key||"")},St=()=>Fe({}),Zt=reactExports.useCallback(Lt=>Lt==null?void 0:Lt._key,[]),Ct=Lt=>{const lr=Ue.find(qt=>Zt(qt)===Lt);if(!lr||!K)return;It.current.key=lr._key,It.current.type=lr._t;const Ht={key:lr._key,type:lr._t};Re(Ht),ye.setSelectedGridRow(Ht),ye.selectGridRowKey(Ht.key),Lt!==Be.key&&ye.fetchListPanelsData({type:K.Name,key:lr._key})},Rt=Lt=>{const lr=Te.getLimit(),Ht=Te.getSkipByCurrentPage(),qt={Limit:lr,Skip:Ht},tr=Object.keys(Ne.mapQueryToDTO()).length?{QueryDict:Ne.mapQueryToDTO()}:{};return Lt.tableKey?{Type:HandlerRunTypeEnum.DATA_SERVICE,Method:"SelectType",Arguments:{TypeName:Lt.id,...qt,...tr}}:{Type:HandlerRunTypeEnum.DATA_SERVICE,Method:"SelectTable",Arguments:{TableName:Lt.id,...qt,...tr}}},dr=Lt=>{!K||!je||st(Rt(je)).then(lr=>{const Ht=lr[0].Result,qt=convertSchemaTypeDtoToModel(Ht.Schema,Ht.BaseType),tr=qt.typeList[qt.rootType];J&&Ne.isApplied&&(Ht.Data.length?me.setCacheQueryDataAction({type:K.Name,query:Ne.query,entityData:Ht.Data,entitySchema:tr}):me.clearCacheQueryByTypeAction(K.Name)),Te.updatePagination(Ht.Data),Ze(tr),nt(qt.typeList);const Vt=Te.sliceEntitiesByLimit(Ht.Data);if(!Vt.find(br=>Zt(br)===Be.key)&&It.current.key===""&&wt(),_e(Vt),Be.key){const br=Vt.find(Yt=>Zt(Yt)===Be.key);br&&K&&ye.fetchListPanelsData({type:K.Name,key:br._key})}Xe.current=Vt.length}).catch(lr=>{toast.error(lr),externalStorage.clearLayoutDirection()}).finally(()=>{Te.updateRange(Xe.current),Te.reset(),Lt==null||Lt()})},Dt=()=>{const Lt=[{Key:Be.key,Type:Be.type}],Ht=ht?(qt=>Object.values(qt).map(({_key:tr,_t:Vt})=>({Key:tr,Type:Vt})))(Ie):Lt;ot({data:Ht,dataset:$e||""}).then(()=>{if(bt(ToolbarActionIconStatus.SUCCESS),Ht.some(tr=>tr.Key===Be.key)){const tr=Ht.map(br=>br.Key),Vt=Ue.find(br=>tr.indexOf(br._key)===-1),Gt=Vt?{key:Vt._key,type:Vt._t}:initialSelectedRow;Re(Gt),ye.setSelectedGridRow(Gt),ye.selectGridRowKey(Gt.key||"")}St(),Te.onResetPage(),Object.keys(Ie).length===ze.current?Ne.reset():Ye()}).catch(()=>bt(ToolbarActionIconStatus.ERROR)).finally(()=>setTimeout(()=>bt(null),5e3))},Tt=async Lt=>{const lr=ht?Object.keys(Ie):[Be.key],Ht={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"ExportRecords",Arguments:{TypeToExport:Be.type,Keys:lr,WithDependencies:Lt},Dataset:$e,userName:ke==null?void 0:ke.username};try{(await handlerApi.handlerRun(Ht)).forEach(tr=>{const Vt=tr.Result;Vt.FileBytes&&downloadZipFromObject(Vt.FileBytes,Vt.Name)})}catch(qt){toast.error(qt)}},or=async Lt=>{const lr=ht?Object.keys(Ie):[Be.key],Ht={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"SavePermanently",Arguments:{TypeToExport:Be.type,Keys:lr,WithDependencies:Lt},Dataset:$e,userName:ke==null?void 0:ke.username};await handlerApi.handlerRun(Ht).then(()=>yt(ToolbarActionIconStatus.SUCCESS)).catch(()=>yt(ToolbarActionIconStatus.ERROR)).finally(()=>setTimeout(()=>yt(null),5e3))},Mt=Lt=>{Ct(Lt),ye.updateSelectedGridRowKey(Lt),Ge({value:"",fn:()=>{}}),externalStorage.removeAllParamsViewers()},kt=Lt=>{Ne.apply(Lt),Te.onResetPage()},ur=()=>{Te.onResetPage(),Ne.reset(),K!=null&&K.Name&&me.clearCacheQueryByTypeAction(K.Name)},$t=Lt=>{Fe(lr=>{const Ht=structuredClone(lr);return delete Ht[Lt],Ht})};reactExports.useEffect(()=>{if(Je.current&&Se){Je.current=!1,Te.updatePagination(Se.entityData);const Lt=Te.sliceEntitiesByLimit(Se.entityData);Ze(Se.entitySchema),_e(Lt)}else dr();It.current.key="",It.current.type=""},[K,Te.page,Ne.query,Ke]);const jt=()=>{tt(!0),at(!1)},nr=()=>{tt(!1),at(!0)};return reactExports.useEffect(()=>{!Qe&&it&&at(!1)},[Qe,it]),{isSelectedLoading:ve,loading:gt,status:ft,columns:Pt,entities:Ue,error:dt?getErrorMessage(dt):"",selectedRow:Be,getRowId:Zt,selectedRangeRows:Ie,selectRangeRows:Fe,fetch:dr,selectRow:Re,selectRowByKeyWithDelay:Mt,deleteSelectedRangeRows:Dt,deleteEntitiesStatus:mt,exportBulkEntities:Tt,savePermanentlyStatus:xt,saveRecordPermanently:or,selectedRowsPerPage:qe,setSelectedRowsPerPage:We,isSelectAllRecordsBtnClicked:Qe,isDeselectAllRecordsBtnClicked:it,setIsSelectAllRecordsBtnClicked:tt,selectAllRecords:jt,deselectAllRecords:nr,maxEntitiesCountRef:ze,removeSelectionRowByKey:$t,pagination:{range:Te.generateRangeByEntities(Ue),isAvailableNextPage:Te.isAvailableNextPage,isAvailablePreviousPage:Te.isAvailablePreviousPage,onNextPage:Te.onNextPage,onPreviousPage:Te.onPreviousPage,onFirstPage:Te.onFirstPage,isAvailableNextPageRef:Te.isAvailableNextPageRef,page:Te.page,isPageDataLoading:Te.isPageDataLoading,onChangeCurrentPage:Te.onChangeCurrentPage,onRevertPrevPage:Te.onRevertPrevPage},isRowFocus:Bt,setIsRowFocus:pt,queryBuilder:{query:Ne.query,isQueryApplied:Ne.isApplied,renderQueryBuilderHeader:Ne.renderHeader,queryBuilderElements:Ne.generateElementsBySchema(rt,et),isShowQueryBuilder:Ne.isShow,showQueryBuilder:Ne.show,closeQueryBuilder:Ne.close,resetQuery:ur,applyQuery:kt}}}var ViewersMetadataType=(K=>(K.PRIMARY_DASHBOARD="PrimaryDashboard",K.DASHBOARD="Dashboard",K.DETAILS="Details",K))(ViewersMetadataType||{});const selectPrioritizedPanel=K=>{let J;for(const ne of K){const oe=ne==null?void 0:ne.Kind;if(oe===ViewersMetadataType.PRIMARY_DASHBOARD)return ne;oe===ViewersMetadataType.DASHBOARD&&(J=ne)}return J};function useNewTab(){const{activeTab:K}=useTabParams(),J=useSelector$1(selectUser),ne=useDispatch$1(),oe=useSelector$1(selectActiveDataset$1),ce=useRequest(handlerApi.handlerRun);return{handler:reactExports.useCallback(Ae=>{if(!K||!oe)return;const pe=Ae.id,xe={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"GetRecordPanels",Keys:[],Arguments:{TypeName:K.id,Key:pe},Dataset:oe,userName:J==null?void 0:J.username};ce.fetch(xe).then(me=>selectPrioritizedPanel(me[0].Result)).then(me=>{if(!me)return Promise.resolve();const ge={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"LoadRecordPanel",Keys:[],Arguments:{TypeName:K.id,Key:pe,PanelId:me.Name},userName:J==null?void 0:J.username};return ce.fetch(ge).then(ye=>{const Se=ye[0].Result,Te=getViewerTypeHelper(Se),Ne=`${Te}: ${pe}`;ne(openTab({id:pe,label:Ne,key:Te,dynamicType:{type:me.Kind,id:pe}}))})})},[K==null?void 0:K.id,oe])}}function useSorting(K){const J=reactExports.useCallback(oe=>externalStorage.setSortByKey(K,oe),[K]),ne=()=>externalStorage.clearSortByKey(K);return reactExports.useEffect(()=>ne,[]),{onChanged:J}}function useViewSettings(K,J=!1){const{state:ne,action:oe}=useDndContext(),ce=useSelector$1(selectUser),{fetch:ue,state:Ae,hasInitFetch:pe,isLoading:xe,status:me}=useRequest(storageApi.getTypeViewSettings),[ge,ye]=reactExports.useState({LayoutSettings:{HideEditor:!1},ReadOnly:!1,UseCache:!1}),[Se,Te]=reactExports.useState(!1),Ne=reactExports.useCallback(()=>{if(!K||!ce)return;oe.resetCellHeight(),oe.resetPinnedHandlers(),oe.resetIsReadOnly(),oe.resetMaximizedStates(),oe.resetUserGuide(),oe.resetInitiallyHiddenColumns(),oe.resetUseCache(),externalStorage.getLayoutDirection(K.Name)||externalStorage.setLayoutDirectiom(K.Name,ne.layoutDirection);const{Name:Ke,Module:Ye}=K;ue({type:Ke,module:Ye.ModuleName,user:ce.id}).then(ze=>{const{PinnedHandlers:Xe,ReadOnly:Je,MaximizedTabId:rt,MainGridCellHeight:Ze,UserGuideContent:et,UserGuideFormat:nt,UserGuideCompleted:Ge,HideEditor:ve,ColumnsState:Be,UseCache:Re=!1,PageIndex:Ie,PageSize:Fe}=ze||{};let qe=[...Be||[]];qe!=null&&qe.some(We=>We===null)&&(qe=qe.filter(We=>We!==null)),(Je||rt)&&(ye(We=>({...We,ReadOnly:Je||!1,maximizedTabId:rt})),Te(We=>!We)),oe.updatePinnedHandlers(Xe||[]),oe.updateIsReadOnly(J||Je||!1),oe.updateMaximizedTabId(rt||"",!0),oe.updateCellHeight(Ze||+env.gridMaxLines),oe.updateUserGuide({userGuideContent:et,userGuideFormat:nt,userGuideCompleted:!!Ge}),oe.updateHideEditorValue(ve),oe.updateInitiallyHiddenColumns((qe==null?void 0:qe.reduce((We,Ue)=>Ue!=null&&Ue.Hidden?[...We,Ue.Id]:We,[]))||[]),oe.updateUseCache(Re),Ie&&oe.updatePageIndex(Ie),Fe&&oe.updatePageSize(Fe)})},[K,pe]);reactExports.useEffect(Ne,[K]);const $e=je=>{ye({...ge,Layout:je}),Te(Ke=>!Ke)};return{typeViewSettings:reactExports.useMemo(()=>{var Ke;let je=structuredClone(Ae);return je||(je={}),je.ColumnsState=((Ke=je.ColumnsState)==null?void 0:Ke.filter(Ye=>Ye!==null))||[],{...ge,...je}},[Se,Ae]),addLayoutToSettings:$e,isInitFetch:!pe,isViewSettingsLoading:xe,viewSettingsStatus:me}}const runLocalSearch=(K,J)=>K.filter(ne=>searchByName(ne.Header,J)),MainGridFilterDropdown=reactExports.forwardRef(({handleClose:K,columns:J,handleTypeUpdate:ne,updateInitiallyHiddenColumns:oe,hiddenColumns:ce,setHiddenColumns:ue},Ae)=>{const{t:pe}=useTranslation(),[xe,me]=reactExports.useState([]),[ge,ye]=reactExports.useState(""),[Se,Te]=reactExports.useState(!1),Ne=reactExports.useMemo(()=>J.filter(Ze=>!Ze.suppressHideColumn),[J]),$e=reactExports.useMemo(()=>Ne.filter(Ze=>env.hideEmptyColumns==="false"?!1:!Ze.isVisible).map(Ze=>Ze.id),[Ne]);reactExports.useEffect(()=>(me(Ne),ue($e),Te($e.length===0),()=>ue([])),[$e]);const ke=reactExports.useCallback(Ze=>{Ze.code===KeyboardCode.Escape&&K()},[K]);reactExports.useEffect(()=>(document.addEventListener("keydown",ke),()=>{document.removeEventListener("keydown",ke)}),[ke]);const je=(Ze="")=>{if(!Ze)return;let et=[...ce];et.includes(Ze)?et=et.filter(nt=>nt!==Ze):et=[...et,Ze],et.length>0?Te(!1):Te(!0),ue(et)},Ke=Ze=>{const et=runLocalSearch(Ne,Ze);ye(Ze),me(et)},Ye=()=>{ye(""),me(Ne)},ze=()=>{ue($e),Te($e.length===0),K()},Xe=()=>{const Ze=J.map(et=>{if(!et.suppressHideColumn){const nt=ce.includes(et.id);return et.toggleHidden(nt),{...et,isVisible:!nt}}return{...et}});K(),ne({headers:Ze}),oe(ce)},Je=Ze=>!ce.includes(Ze),rt=()=>{if(Se){ue(Ne.map(Ze=>Ze.id)),Te(!1);return}ue([]),Te(!0)};return reactExports.useImperativeHandle(Ae,()=>({restoreDefaultLayout:()=>{ue([]),Te(!0),Ne.forEach(Ze=>{Ze.toggleHidden(!1)})}})),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"mainGridFilterDropdown",children:[jsxRuntimeExports.jsx(Ml,{variant:"outlined",placeholder:pe("grid.columnFilter.filterPlaceholder")||"",value:ge,onChange:Ke,prefix:jsxRuntimeExports.jsx(gf$1,{}),suffix:ge?jsxRuntimeExports.jsx(Pp,{onClick:Ye}):null}),jsxRuntimeExports.jsx(pF,{intermediate:!!ce.length&&ce.length!==Ne.length,value:Se,onChange:rt,children:pe("checkboxLabex.label")})]}),jsxRuntimeExports.jsx("div",{className:"mainGridFilterDropdown__dropdownList",children:xe.map(Ze=>jsxRuntimeExports.jsx(pF,{value:Je(Ze.id),onChange:()=>je(Ze.id),children:Ze.render("Header")},Ze.id))}),jsxRuntimeExports.jsxs("div",{className:"mainGridFilterDropdown__buttonsContainer",children:[jsxRuntimeExports.jsx(rl,{onClick:Xe,children:pe("buttons.apply")}),jsxRuntimeExports.jsx(rl,{type:"tertiary",onClick:ze,children:pe("buttons.cancel")})]})]})});MainGridFilterDropdown.displayName="MainGridFilterDropdown";const container$9="_container_5a3cy_1",checkboxContainer="_checkboxContainer_5a3cy_13",containerReadOnly="_containerReadOnly_5a3cy_21",styles$m={container:container$9,checkboxContainer,containerReadOnly},MainGridFilterCell=reactExports.forwardRef(({columns:K,gridMode:J,rows:ne,onSelectedRowsRangeChanged:oe,clearCellSelectionState:ce,selectAllRowsAllCells:ue,maxEntitiesCount:Ae,isAvailableNextPageState:pe,maxRangeCounter:xe,selectedRowsPerPage:me,setSelectedRowsPerPage:ge,updateSelectedRowsPerPageState:ye,isSelectAllRecordsBtnClicked:Se,isDeselectAllRecordsBtnClicked:Te,setIsSelectAllRecordsBtnClicked:Ne,handleTypeUpdate:$e,updateInitiallyHiddenColumns:ke},je)=>{const[Ke,Ye]=reactExports.useState(!1),ze=reactExports.useRef(null),{selectedRowsRange:Xe}=reactExports.useContext(GridContext),{state:Je}=useDndContext(),rt=Object.keys(Xe).length,[Ze,et]=reactExports.useState(!1),[nt,Ge]=reactExports.useState(!1),[ve,Be]=reactExports.useState([]);reactExports.useEffect(()=>{if(!ze.current)return;const _e={},Qe=structuredClone(Xe);ne.forEach(at=>{!Se&&Xe[at.id]&&(_e[at.id]=structuredClone(Xe[at.id])),Se&&!Xe[at.id]&&(Qe[at.id]={_key:at.original._key,_t:at.original._t}),Se&&(_e[at.id]={_key:at.original._key,_t:at.original._t})}),Se&&!Te?oe(Qe):!Se&&Te&&oe({});const it=Se&&!Te||!Se&&!Te?_e:{};ye(it),ge(it),Ge(Se&&!Te?Object.keys(_e).length===ne.length:!1)},[xe,Se,Te]),reactExports.useEffect(()=>{if(!ze.current)return;const _e=Object.keys(Xe).length!==0,Qe=Object.keys(Xe).length===Ae,tt=_e&&Qe&&!pe||Se;ze.current.checked=tt,ze.current.indeterminate=rt>0&&!tt&&!Se,et(rt>0&&!tt&&!Se),Ge(Se&&!Te?!0:Object.keys(me).length===ne.length)},[ne.length,Xe,me,Se,Te]);const Re=reactExports.useCallback(()=>Ye(!1),[]),Ie=()=>{const _e=structuredClone(Xe),Qe={};ne.forEach(tt=>{const{_key:it,_t:at}=tt.original;_e[tt.id]={_key:it,_t:at},Qe[tt.id]={_key:it,_t:at}}),oe(_e),ye(Qe),ge(Qe),ue(),Ge(!0)},Fe=reactExports.useCallback(()=>{const _e=structuredClone(Xe),Qe={};ne.forEach(tt=>{_e[tt.id]||(_e[tt.id]={_key:tt.original._key,_t:tt.original._t}),Qe[tt.id]={_key:tt.original._key,_t:tt.original._t}}),oe(_e),ye(Qe),ge(Qe),Ge(!0),ue()},[Xe]),qe=reactExports.useCallback(()=>{const _e=structuredClone(Xe);ne.forEach(({id:Qe})=>{_e[Qe]&&delete _e[Qe]}),oe(_e),ye({}),ge({}),Ge(!1),ce()},[Xe]),We=reactExports.useCallback(_e=>{const Qe=ne.length===rt,tt=ne.length!==rt&&rt!==0;if((Qe||tt)&&!_e.ctrlKey){oe({}),ye({}),ge({}),ce(),Ge(!1),Se&&Ne(!1);return}if(!nt&&_e.ctrlKey){Fe();return}if(nt&&_e.ctrlKey){qe();return}Ie()},[rt,oe,ne.length,nt,Se]),Ue=()=>{const _e=[];K.forEach(Qe=>{env.hideEmptyColumns!=="false"&&(Qe.isVisible||_e.push(Qe.id))}),Be(_e)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:cx(styles$m.container,{[styles$m.containerReadOnly]:Je.isTypeReadOnly}),children:jsxRuntimeExports.jsx(X_,{testid:"main-grid-filter-dropdown",open:Ke,onOpenChange:_e=>{Ye(_e),_e||Ue()},dropdownRender:()=>jsxRuntimeExports.jsx(MainGridFilterDropdown,{ref:je,columns:K,handleClose:Re,handleTypeUpdate:$e,updateInitiallyHiddenColumns:ke,hiddenColumns:ve,setHiddenColumns:Be}),children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(rl,{testid:"main-grid-filter-icon",variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(zB,{})})})})}),J===GridModeEnum.MAIN&&jsxRuntimeExports.jsx("div",{className:styles$m.checkboxContainer,children:jsxRuntimeExports.jsx(pF,{value:nt,intermediate:Ze,onClick:We,checkboxRef:ze})})]})});MainGridFilterCell.displayName="MainGridFilterCell";const panelGroup="_panelGroup_456bh_1",queryBuilder="_queryBuilder_456bh_6",gridPanel="_gridPanel_456bh_11",logsPanel$1="_logsPanel_456bh_16",pagination="_pagination_456bh_20",styles$l={panelGroup,queryBuilder,gridPanel,logsPanel:logsPanel$1,pagination},MainTypeContainer=({activeTypeTab:K,metaData:J})=>{var qt,tr,Vt,Gt,br,Yt;const{action:ne,state:oe}=useAppContext(),{state:ce,action:ue}=useDndContext(),Ae=useSelector$1(selectIsReadonly),pe=useSelector$1(selectGridSchema),xe=Ae||ce.isTypeReadOnly,me=reactExports.useRef(),ge=reactExports.useRef(),[ye,Se]=reactExports.useState([]),[Te,Ne]=reactExports.useState([]),{typeViewSettings:$e,addLayoutToSettings:ke,isInitFetch:je,isViewSettingsLoading:Ke}=useViewSettings(J.data,Ae),Ye=Kt=>{if(Kt.columnType===ValueTypesEnum$1.Bool){const yr=Kt.filterValue;switch(yr){case"true":return BooleanColumnInputValueEnum.y;case"false":return BooleanColumnInputValueEnum.n;default:return yr}}else return Kt.filterValue},ze=(Kt,yr)=>{const zt=me.current.headers.reduce((Jt,xr)=>{var Xt,ir;return xr.id!==ColumnNameType.FILTER?[...Jt,{Id:xr.id,Filter:(xr.id===Kt.id?yr:Ye(xr))||"",Hidden:((Xt=me.current.hiddenColumns)==null?void 0:Xt.some(Mr=>Mr===xr.id))||!1,SortDesc:ge.current.getSortDesc(xr),SizeInPercent:parseInt(String(((ir=xr.getHeaderProps().style)==null?void 0:ir.width)||150),10),MaxSizeInPixels:xr.maxWidth,MinSizeInPixels:xr.minWidth,SizeFixed:!xr.canResize,_t:"ColumnState"}]:Jt},[]);ue.saveUiTypeData({simplifiedConfig:getParsedConfig(ge.current.config),updatedColumnsState:zt})},Xe=reactExports.useRef(!1),Je=reactExports.useRef(),{queryBuilder:rt,pagination:Ze,status:et,loading:nt,isSelectedLoading:Ge,columns:ve,entities:Be,error:Re,selectedRow:Ie,selectedRangeRows:Fe,selectRangeRows:qe,fetch:We,selectRow:Ue,getRowId:_e,selectRowByKeyWithDelay:Qe,deleteSelectedRangeRows:tt,deleteEntitiesStatus:it,exportBulkEntities:at,saveRecordPermanently:ot,savePermanentlyStatus:lt,selectedRowsPerPage:st,setSelectedRowsPerPage:ut,isSelectAllRecordsBtnClicked:ft,isDeselectAllRecordsBtnClicked:dt,setIsSelectAllRecordsBtnClicked:Bt,selectAllRecords:pt,deselectAllRecords:mt,maxEntitiesCountRef:bt,removeSelectionRowByKey:xt,isRowFocus:yt,setIsRowFocus:It}=useEntities({tabSchema:J.data,useCache:$e.UseCache,columnsState:$e.ColumnsState,gridColumns:((qt=me.current)==null?void 0:qt.gridColumns)||[],updateTypeState:ze,cellHeight:ce.cellHeight,initPageSize:ce.pageSize,initPageIndex:ce.pageIndex}),{onChanged:ht}=useSorting(K),{handler:gt}=useNewTab(),{isOpen:Pt}=useLogsPanel();reactExports.useImperativeHandle(ce.headersRef,()=>{var Kt,yr;return{headers:((Kt=me.current)==null?void 0:Kt.headers)||[],data:$e,addLayoutToSettings:ke,selectRowByKeyWithDelay:Qe,updateMarkedIndexOnRowChange:(yr=me.current)==null?void 0:yr.updateMarkedIndexOnRowChange,handleEntitiesRefresh:We}},[(tr=me.current)==null?void 0:tr.headers]);const wt=Ae||ce.isTypeReadOnly,St=((Vt=oe.cacheTabData)==null?void 0:Vt[K])||null,Zt=(br=(Gt=J.data.Declare)==null?void 0:Gt.Handlers)==null?void 0:br.filter(Kt=>Kt.Type===HandlerType.JOB),Ct=isDefined$1(Zt)&&Zt.length!==0&&!wt;reactExports.useEffect(()=>{ne.onConfirmLeaveEditor(()=>{Qe(ce.selectedGridRowKey),It(!0)})},[ce.selectedGridRowKey]),reactExports.useEffect(()=>{var Kt;ce.maximizedTabId===EditorTabsEnum.EDITOR&&!Ie.key&&Be.length!==0&&Qe((Kt=Be[0])==null?void 0:Kt._key)},[ce.maximizedTabId,Be]),reactExports.useEffect(()=>{isDefined$1(externalStorage.getSelectedRow())&&Qe(externalStorage.getSelectedRow())},[ce.selectedGridRowKey,externalStorage.getSelectedRow()]),reactExports.useImperativeHandle(ce.selectRowByKeyWithDelay,()=>({setIsRowFocus:It,selectRowByKeyWithDelay:Qe}));const Rt=()=>{ne.setActiveEditorTabAction(pe.data.Kind===KindTypeModel.ABSTRACT?EditorTabsEnum.SELECT_TYPE:EditorTabsEnum.EDITOR)};reactExports.useImperativeHandle(ce.restoreLayoutRef,()=>{var Kt;return{restoreLayoutRef:()=>{var yr,zt;(yr=me.current)==null||yr.resetLayout(),(zt=Je.current)==null||zt.restoreDefaultLayout(),Ze.onFirstPage(),Ze.page===1&&ne.onConfirmLeaveEditor(()=>Qe(_e(Be[0]))),qe({}),Bt(!1),ve.forEach(Jt=>{if(Jt.columnType===ValueTypesEnum$1.Bool){const[,xr]=Jt.filteredValueMask||[];xr==null||xr("")}})},columnsWidths:((Kt=me.current)==null?void 0:Kt.columnsWidths)||{},originalColumns:ve}});const dr=reactExports.useCallback(()=>me.current.exportGridOptions,[]),Dt=Kt=>{We(()=>{var yr,zt;if(Kt!=null&&Kt.oldKey){const Jt=Kt.oldKey;me.current.deleteOldSelectedRowKey(Jt),xt(Jt)}Kt&&Kt.newKey&&(Ue(Jt=>({...Jt,key:Kt.newKey||""})),(zt=(yr=ce.headersRef.current)==null?void 0:yr.updateMarkedIndexOnRowChange)==null||zt.call(yr,Kt.newKey))})},Tt=Kt=>{Kt&&Dt(Kt),Rt()},or=(Kt,yr)=>ce.maximizedTabId===EditorTabsEnum.EDITOR?Kt:yr==null?void 0:yr.getBoundingClientRect().height,Mt=()=>{ne.setActiveEditorTabAction(EditorTabsEnum.EDITOR),We()},kt=()=>rt.isShowQueryBuilder?rt.closeQueryBuilder():rt.showQueryBuilder(),ur=Kt=>jsxRuntimeExports.jsxs("div",{className:cx(styles$l.pagination,Kt),children:[jsxRuntimeExports.jsx(GridPagination,{isGridPageDataLoading:Ze.isPageDataLoading,isAvailableNextPage:Ze.isAvailableNextPage,isAvailablePreviousPage:Ze.isAvailablePreviousPage,range:Ze.range,page:Ze.page,onNext:Ze.onNextPage,onPrev:Ze.onPreviousPage,onFirst:Ze.onFirstPage}),jsxRuntimeExports.jsx(PageNavigation,{page:Ze.page,onChangeCurrentPage:Ze.onChangeCurrentPage,isPageDataLoading:Ze.isPageDataLoading,isAvailableNextPage:Ze.isAvailableNextPage})]}),$t=Kt=>{externalStorage.setMainGridScrollPercent({[J.data.Name]:Kt})},jt=()=>{const Kt=[EditorTabsEnum.NEW_ENTITY,EditorTabsEnum.SELECT_TYPE],yr=Ze.page!==1,zt=nt||je;return Kt.includes(oe.activeEditorTab)?jsxRuntimeExports.jsx(DraggableEditorContainer,{isLoading:!1,type:J.data.Name,stackRef:makeStack([EDITOR_TABS[oe.activeEditorTab]]),onUpdate:Tt,isSingleTabStackDragging:!0,configType:StackEnum.STACK,selectedRangeRows:Fe}):yr?jsxRuntimeExports.jsx(PF,{loading:zt,children:jsxRuntimeExports.jsx(NoGridData,{content:t$5("noData.pageNotExist"),isRefreshButton:!0,handleButtonClick:Ze.onRevertPrevPage,icon:jsxRuntimeExports.jsx(Pp,{size:"Full"}),additionalContent:t$5("noData.returnToPrevPage"),getPaginationBlock:ur,buttonIcon:jsxRuntimeExports.jsx(Nk,{}),buttonTitle:"noData.return"})}):jsxRuntimeExports.jsx(PF,{loading:zt,children:jsxRuntimeExports.jsx(NoGridData,{content:getNoGridDataTitle(et,Re)||t$5("noData.inTheReport"),isRefreshButton:!0,handleButtonClick:We,icon:jsxRuntimeExports.jsx(Pp,{size:"Full"}),additionalContent:t$5("noData.details"),getPaginationBlock:ur})})},nr=({passedColumns:Kt,gridMode:yr,rows:zt,onSelectedRowsRangeChanged:Jt,clearCellSelectionState:xr,selectAllRowsAllCells:Xt,updateSelectedRowsPerPageState:ir,passedSelectedRowsPerPage:Mr,isSelectAllRecordsBtnClicked:er,isDeselectAllRecordsBtnClicked:fr})=>(Ze.range.end>bt.current&&(bt.current=Ze.range.end),!Ze.isAvailableNextPage&&Ze.isAvailableNextPageRef.current&&(Ze.isAvailableNextPageRef.current=!1),jsxRuntimeExports.jsx(MainGridFilterCell,{ref:Je,columns:Kt,gridMode:yr,rows:zt,onSelectedRowsRangeChanged:Jt,clearCellSelectionState:xr,selectAllRowsAllCells:Xt,maxEntitiesCount:bt.current,isAvailableNextPageState:Ze.isAvailableNextPageRef.current,maxRangeCounter:Ze.range.end,selectedRowsPerPage:Mr,setSelectedRowsPerPage:ut,updateSelectedRowsPerPageState:ir,isSelectAllRecordsBtnClicked:!!er,isDeselectAllRecordsBtnClicked:!!fr,setIsSelectAllRecordsBtnClicked:Bt,handleTypeUpdate:ue.saveUiTypeData,updateInitiallyHiddenColumns:ue.updateInitiallyHiddenColumns})),Ot=reactExports.useMemo(()=>{var yr;const Kt={filters:[],sortings:[]};if(!$e.ColumnsState)return Kt;for(let zt=0;zt<((yr=$e.ColumnsState)==null?void 0:yr.length);zt++){const Jt=$e.ColumnsState[zt];Jt.Filter&&Kt.filters.push({id:Jt.Id,value:Jt.Filter}),Kt.sortings.push({id:Jt.Id,desc:Jt.SortDesc??void 0})}return Kt},[$e]),Lt=()=>(ce.maximizedTabId===EditorTabsEnum.EDITOR||Ke)&&Xe.current?jsxRuntimeExports.jsx(PF,{loading:!0}):(Xe.current=!0,jsxRuntimeExports.jsx(Grid,{initialFilters:ye.length?ye:Ot.filters,initialSortBy:Te.length?Te:Ot.sortings,setSavedFilters:Se,setSavedSortings:Ne,ref:me,columns:ve,initiallyHideEmptyColumns:!0,initiallyHiddenColumns:ce.initiallyHiddenColumns,data:Be,gridName:K,gridMode:wt?GridModeEnum.READ_ONLY:GridModeEnum.MAIN,selectedRowId:Ie.key,selectedRowsRange:Fe,getRowId:_e,onRowDoubleClicked:gt,onChangeSelectedRowId:Kt=>{ne.onConfirmLeaveEditor(()=>{Qe(Kt),me.current.updateMarkedIndexOnRowChange(Kt)},Ie.key,We)},onSelectedRowsRangeChanged:Kt=>{Kt&&qe(Kt)},onSortingChanged:ht,shouldClearCellsSelection:nt,customFilterCell:nr,selectedRowsPerPage:st,setSelectedRowsPerPage:ut,isSelectAllRecordsBtnClicked:ft,isDeselectAllRecordsBtnClicked:dt,setIsSelectAllRecordsBtnClicked:Bt,isRunHandlers:Ct,cellRowsCount:ce.cellHeight,onChangeGridRowsData:ue.updateGridRowsData,isLineBreakSymbol:!0,isRowFocus:yt,onChangeIsRowFocus:It,updateSelectedGridRowKey:Kt=>{ue.selectGridRowKey(Kt)},calculateElementHiehgt:or,isReadOnly:xe,getPaginationBlock:ur,defaultScroll:externalStorage.getMainGridScrollPercent(J.data.Name),onChangeScroll:$t,registerService:oe.mainGridService.register,clearService:oe.mainGridService.clear})),lr=()=>jsxRuntimeExports.jsx("div",{className:styles$l.panelGroup,children:jsxRuntimeExports.jsxs(PanelGroup,{direction:ce.isHorizontalLayoutDirection?"horizontal":"vertical",children:[rt.isShowQueryBuilder&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Panel$1,{id:"main-type-container-query-builder",minSize:30,defaultSize:40,maxSize:70,order:1,className:styles$l.queryBuilder,children:jsxRuntimeExports.jsx(QueryBuilder,{initialQuery:(St==null?void 0:St.query)||rt.query,elements:rt.queryBuilderElements,onCancel:rt.closeQueryBuilder,onApply:rt.applyQuery,onReset:rt.resetQuery,isCloseIcon:!0})}),jsxRuntimeExports.jsx(PanelResizeHandle,{hitAreaMargins:{coarse:-1,fine:-1},className:ce.isHorizontalLayoutDirection?"verticalPanelResizer":"horizontalPanelResizer"})]}),jsxRuntimeExports.jsxs(Panel$1,{id:"main-type-container-grid",order:2,className:styles$l.gridPanel,children:[jsxRuntimeExports.jsx(GridToolbar,{type:K,selectedRow:Ie,entities:Be,isQueryApplied:rt.isQueryApplied,selectedRangeRows:Fe,onExportGridOptions:dr,showQueryBuilder:kt,typeViewSettings:$e,onDeleteSelectedRangeRows:tt,deleteEntitiesStatus:it,onExportBulkEntities:at,onSaveRecordPermanently:ot,savePermanentlyStatus:lt,onRefresh:Mt,isSelectAllRecordsBtnClicked:ft,selectAllRecords:pt,deselectAllRecords:mt,cellRowsCount:ce.cellHeight,isRowBorder:ce.isRowBorder,onChangeIsRowBorder:ue.onChangeIsRowBorder,activeTypeTab:K}),Be.length?Lt():jt()]})]})}),Ht=({tabs:Kt,stackRef:yr,type:zt})=>jsxRuntimeExports.jsx(DraggableGridContainer,{selectedGridRow:Ie,tabs:Kt,stackRef:yr,type:zt,onUpdate:Dt,children:lr()});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(UserGuideModal,{}),jsxRuntimeExports.jsx(TypeToolbar,{}),jsxRuntimeExports.jsxs(PanelGroup,{direction:"horizontal",children:[jsxRuntimeExports.jsx(Panel$1,{id:"main-grid-panel",order:1,minSize:60,defaultSize:100,children:jsxRuntimeExports.jsx(DraggableContainer,{ref:ge,isLoading:Ge||(Ie==null?void 0:Ie.key)===void 0&&(Ie==null?void 0:Ie.type)===void 0||nt,type:J.data.Name,showEditor:!((Yt=$e.LayoutSettings)!=null&&Yt.HideEditor||Be.length===0),draggableGrid:Ht,onUpdate:Dt,data:$e})}),Pt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(PanelResizeHandle,{hitAreaMargins:{coarse:-1,fine:-1},className:"verticalPanelResizer"}),jsxRuntimeExports.jsx(Panel$1,{id:"logs-panel",order:2,defaultSize:20,minSize:20,className:styles$l.logsPanel,children:jsxRuntimeExports.jsx(Logs,{})})]})]})]})},SingletonContainer=({type:K,moduleName:J,metaData:ne})=>{const{fetch:oe,state:ce,isLoading:ue}=useRequest(handlerApi.handlerRun),{fetch:Ae}=useRequest(storageApi.getTypeViewSettings),pe=useSelector$1(selectUser),{activeTab:xe}=useTabParams(),{action:me}=useDndContext(),[ge,ye]=reactExports.useState([]),Se=$e=>$e.tableKey?{Method:"SelectType",Type:HandlerRunTypeEnum.DATA_SERVICE,Arguments:{TypeName:$e.id,Limit:1}}:{Method:"SelectTable",Type:HandlerRunTypeEnum.DATA_SERVICE,Arguments:{TableName:$e.id,Limit:1}},Te=async()=>{if(ye([]),K&&(xe==null?void 0:xe.key)===K)try{const ke=(await oe(Se(xe)))[0].Result;ye([ke.Data.length===0?EditorTabsEnum.NEW_ENTITY:EditorTabsEnum.EDITOR])}catch($e){toast.error($e)}},Ne=()=>{Te()};return reactExports.useEffect(()=>{if(!ne.data||!pe)return;const{Name:$e,Module:ke}=ne.data;Ae({type:$e,module:ke.ModuleName,user:pe.id}).then(je=>{const{HideEditor:Ke}=je||{};me.updateHideEditorValue(Ke)})},[]),reactExports.useEffect(()=>{K&&Te()},[K,J]),!ce||ue||ge.length===0?null:jsxRuntimeExports.jsx("div",{className:"singleton-container",children:jsxRuntimeExports.jsx(DraggableContainer,{type:K,tabs:ge,onUpdate:Ne,showEditor:!0})})},TabItemContent=({activeTab:K,options:J})=>{var Te,Ne,$e,ke;const{t:ne}=useTranslation(),oe=useAppDispatch(),ce=useSelector$1(selectMetaData),ue=useSelector$1(selectDataset),{InteractiveDashboardContainer:Ae}=useComponentsMapper(),[pe,xe]=reactExports.useState(""),me=ce.data.DisplayKind===SchemaDisplayKind.Dashboard,ge=je=>je.tableKey?{Type:HandlerRunTypeEnum.DATA_SERVICE,Arguments:{TypeName:je.id},Method:"SelectType"}:{Type:HandlerRunTypeEnum.DATA_SERVICE,Arguments:{TableName:je.id},Method:"SelectTable"};reactExports.useEffect(()=>{handlerApi.handlerRun(ge(K)).then(je=>{const Ke=je[0].Result;xe(Ke.BaseType),oe(getActiveTypeMetadata({activeTab:K.id,basetype:Ke.BaseType}))})},[K.id]),reactExports.useEffect(()=>{ce.data.Name&&oe(getDatasetData({type:ce.data.Name,module:ce.data.Module.ModuleName}))},[ce.data.Name]);const ye=reactExports.useMemo(()=>isLoading([ce.status,ue.status])||pe!==ce.data.Name,[ue.status,ce.status,ce.data.Name,pe]);return reactExports.useMemo(()=>isError([ue.status,ce.status]),[ue.status,ce.status])?jsxRuntimeExports.jsx(NoGridData,{content:ne("noData.contactAdministrator")}):ye?jsxRuntimeExports.jsx(PF,{loading:!0}):((Te=ce==null?void 0:ce.data)==null?void 0:Te.DisplayKind)===SchemaDisplayKind.Singleton?jsxRuntimeExports.jsx(SingletonContainer,{type:(Ne=ce==null?void 0:ce.data)==null?void 0:Ne.Name,moduleName:(ke=($e=ce==null?void 0:ce.data)==null?void 0:$e.Module)==null?void 0:ke.ModuleName,metaData:ce},K.id):me||J.isDynamicDashboard||J.isDynamicPrimaryDashboard?isInteractiveDashboard(ce.data)||J.isDynamicPrimaryDashboard?jsxRuntimeExports.jsx(Ae,{type:K.id,chatKey:J.dynamicId}):jsxRuntimeExports.jsx(DashboardTypeContainer,{type:pe},pe):me?jsxRuntimeExports.jsx(NoGridData,{content:ne("noData.contactAdministrator")}):jsxRuntimeExports.jsx(MainTypeContainer,{activeTypeTab:pe,metaData:ce},pe)},RecordEditorModal=({data:K,isReadOnly:J,isOpen:ne,onClose:oe,onSave:ce})=>{const{t:ue}=useTranslation(),[Ae,pe]=reactExports.useState(""),[xe,me]=reactExports.useState(!0);reactExports.useEffect(()=>{K&&ne&&(pe(serialize(K,void 0,2)),me(!0))},[K,ne]);const ge=Te=>{Te&&pe(Te),me(!1)},ye=Te=>{Te.length>0&&me(!0)},Se=()=>{Ae&&(ce==null||ce(deserialize(Ae)))};return jsxRuntimeExports.jsxs(Ho,{size:"lg",title:ue("editor.openJSONEditor"),open:ne,onClose:oe,defaultHeight:600,children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(CodeEditor,{isReadonly:J,code:Ae,language:LanguageEnum.Json,onChange:ge,onValidate:ye,isAutoFocus:!0})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"record-editor",onCancel:oe,okText:!J&&ue("buttons.save"),cancelText:ue("buttons.cancel"),onOk:Se,okProps:{disabled:xe}})]})},RecordEditor=({recordKey:K,recordType:J,isOpen:ne,onClose:oe,onSave:ce})=>{var me;const ue=useSelector$1(selectActiveDataset$1),{getRecord:Ae,saveEntity:pe}=useEditorRequest();reactExports.useEffect(()=>{J&&K&&ne&&Ae.fetch({key:K,type:J,dataset:ue})},[ne]);const xe=async ge=>{if(!(!J||!K))try{await pe.fetch({data:ge,recordType:J}),ce==null||ce()}catch{}};return jsxRuntimeExports.jsx(RecordEditorModal,{isOpen:ne,onClose:oe,onSave:xe,data:(me=Ae.state)==null?void 0:me.data})},GridTabsLayoutController=({isDashboard:K=!1})=>{var Ye,ze,Xe,Je;const{t:J}=useTranslation(),{state:ne}=useDndContext(),[oe,ce]=reactExports.useState(!1),[ue,Ae]=reactExports.useState(!1),[pe,xe]=reactExports.useState(!1),[me,ge]=reactExports.useState(!1),ye=ne.rowsData.findIndex(rt=>rt.id===ne.selectedGridRowKey),Se=ye===ne.rowsData.length-1||ne.rowsData.length===1;reactExports.useEffect(()=>{ye===0&&Ae(!1),ye===ne.rowsData.length-1&&xe(!1)},[ye]);const Te=()=>{var Ze,et,nt,Ge;if(ye<1)return;const rt=ne.rowsData[ye-1].id;(Ze=ne.headersRef.current)==null||Ze.selectRowByKeyWithDelay(rt),(nt=(et=ne.headersRef.current)==null?void 0:et.updateMarkedIndexOnRowChange)==null||nt.call(et,rt),(Ge=ne.selectRowByKeyWithDelay.current)==null||Ge.setIsRowFocus(!0)},Ne=()=>{var Ze,et,nt,Ge;if(Se)return;const rt=ne.rowsData[ye+1].id;(Ze=ne.headersRef.current)==null||Ze.selectRowByKeyWithDelay(rt),(nt=(et=ne.headersRef.current)==null?void 0:et.updateMarkedIndexOnRowChange)==null||nt.call(et,rt),(Ge=ne.selectRowByKeyWithDelay.current)==null||Ge.setIsRowFocus(!0)};if(K)return null;const $e=rt=>rt?jsxRuntimeExports.jsx(hk,{size:"XS"}):jsxRuntimeExports.jsx(Rp,{size:"XS"}),ke=ye<1,je=[{key:"nextRecord",title:J("recordNavigation.nextRecord"),description:J("recordNavigation.moveToTheNext"),prefix:jsxRuntimeExports.jsx(Rp,{}),isDisabled:Se,onClick:Ne},{key:"prevRecord",title:J("recordNavigation.prevRecord"),description:J("recordNavigation.moveToThePrev"),prefix:jsxRuntimeExports.jsx(hk,{}),isDisabled:ke,onClick:Te},{key:"editRecord",title:J("recordNavigation.editRecord"),description:J("recordNavigation.editRecordDescription"),isDisabled:!((Ye=ne.selectedGridRow)!=null&&Ye.type)||!((ze=ne.selectedGridRow)!=null&&ze.key),prefix:jsxRuntimeExports.jsx(BD,{}),onClick:()=>ge(!0)}],Ke=()=>{ge(!1),recordEventManager.emit(RecordEvent.UpdateRecord)};return jsxRuntimeExports.jsxs("div",{className:"grid-tabs","data-tid":"layout-panel",children:[jsxRuntimeExports.jsx(RecordEditor,{recordType:(Xe=ne.selectedGridRow)==null?void 0:Xe.type,recordKey:(Je=ne.selectedGridRow)==null?void 0:Je.key,isOpen:me,onSave:Ke,onClose:()=>ge(!1)}),jsxRuntimeExports.jsxs("div",{className:"grid-tabs__prev-next-buttons",children:[jsxRuntimeExports.jsx(X_,{className:"grid-tabs__prev-next-buttons-dropdown",open:oe,onOpenChange:ce,placement:"bottom",dropdownRender:()=>jsxRuntimeExports.jsx(EF,{items:je}),children:jsxRuntimeExports.jsx(rl,{type:"transparent",variant:"ghost",size:"sm",iconAfter:$e(oe),onClick:()=>ce(!oe),children:J("recordNavigation.record")})}),jsxRuntimeExports.jsx(mf,{open:pe,title:J("recordNavigation.nextRecord"),onOpenChange:rt=>{Se&&rt||xe(rt)},children:jsxRuntimeExports.jsx(rl,{type:"transparent",variant:"ghost",size:"sm",disabled:Se,iconBefore:jsxRuntimeExports.jsx(cT,{}),onClick:Ne,testid:"go-to-next-record-button",className:"grid-tabs__button"})}),jsxRuntimeExports.jsx(mf,{open:ue&&ye!==0,title:J("recordNavigation.prevRecord"),onOpenChange:rt=>{ke&&rt||Ae(rt)},children:jsxRuntimeExports.jsx(rl,{type:"transparent",variant:"ghost",size:"sm",disabled:ke,iconBefore:jsxRuntimeExports.jsx(mT,{}),onClick:Te,testid:"go-to-prev-record-button",className:"grid-tabs__button"})})]})]})},tabs="_tabs_1hy2c_1",tabAction="_tabAction_1hy2c_5",styles$k={tabs,tabAction},GridTabs=({activeTabId:K})=>{const{setActiveTab:J}=useTabParams(),{t:ne}=useTranslation(),oe=useSelector$1(selectActiveDataset$1),ce=useAppDispatch(),{action:ue,state:Ae}=useAppContext(),pe=useSelector$1(selectMetaData),xe=useSelector$1(selectOpenedTabs),{action:me}=useDndContext(),ge=useSelector$1(selectFullScreenMode),[ye,Se]=reactExports.useState(null),Te=xe.map(Xe=>({...Xe,closable:!0})),Ne=pe.data.DisplayKind===SchemaDisplayKind.Dashboard,$e=()=>{Ae.activeEditorTab!==EditorTabsEnum.EDITOR&&ue.setActiveEditorTabAction(EditorTabsEnum.EDITOR)},ke=Xe=>{ue.onConfirmLeaveEditor(()=>{var Je,rt;if(ue.clearCacheQueryByTypeAction(Xe),ce(closeTab({id:Xe})),externalStorage.removeMainGridScrollPercent(Xe),Xe===K){const Ze=Te.findIndex(nt=>nt.id===Xe),et=((Je=Te[Ze+1])==null?void 0:Je.id)||((rt=Te[Ze-1])==null?void 0:rt.id);Te.length>1&&ce(updateActiveTabIndex({id:et})),J(et),$e()}else Te.forEach(({id:Ze})=>Ze===K&&ce(updateActiveTabIndex({id:K})));ce(saveAppState(oe)),me.clearHandlerState()})},je=Xe=>{ue.onConfirmLeaveEditor(()=>{J(Xe),ce(saveAppState(oe)),ce(removeMetaData()),$e(),me.resetCellHeight(),me.clearHandlerState()})};if(ge)return null;const Ke=(Xe,Je)=>`tab-${Xe}-dropdown-item-${Je.replace(/\s+/g,"")}`,Ye=[{key:"1",label:ne("grid.tabs.closeTab"),onClick:()=>ye&&ke(ye),"data-tid":Ke(0,ne("grid.tabs.closeTab")),children:null},{key:"2",label:ne("grid.tabs.closeOtherTabs"),onClick:()=>{const Xe=Te.filter(Je=>Je.id===ye);ce(setTabs(Xe)),ye&&(J(ye),ce(updateActiveTabIndex({id:ye})),ce(saveAppState(oe)),$e())},"data-tid":Ke(1,ne("grid.tabs.closeOtherTabs")),children:null},{key:"3",label:ne("grid.tabs.closeAllTabs"),onClick:()=>{J(""),ce(setTabs([])),$e()},"data-tid":Ke(2,ne("grid.tabs.closeAllTabs")),children:null}],ze=Xe=>{const Je=Xe===ye;return jsxRuntimeExports.jsx("div",{tabIndex:-2,onClick:rt=>rt.stopPropagation(),"aria-hidden":"true",children:jsxRuntimeExports.jsx(X_,{open:Je,onOpenChange:()=>Se(null),placement:"bottom",menu:{items:Ye},children:jsxRuntimeExports.jsx("div",{"aria-hidden":"true",className:styles$k.tabAction,"data-tid":`tab-${Xe}-dropdown`,onClick:rt=>{rt.stopPropagation(),Se(Je?null:Xe)},children:Je?jsxRuntimeExports.jsx(hk,{}):jsxRuntimeExports.jsx(Rp,{})})})})};return jsxRuntimeExports.jsx(wF,{className:styles$k.tabs,variant:"borderless",tabBarExtraContent:jsxRuntimeExports.jsx(GridTabsLayoutController,{isDashboard:Ne}),activeKey:K,onChange:je,items:Te,renderActions:ze,onClose:ke,renderTabBar:(Xe,Je)=>jsxRuntimeExports.jsx(Je,{...Xe,children:rt=>{var Ze;return jsxRuntimeExports.jsx(mf,{title:((Ze=Te.find(et=>et.id===rt.key))==null?void 0:Ze.label)||"",children:rt})}})})},infoMessage="_infoMessage_1oygr_1",infoMessageTitle="_infoMessageTitle_1oygr_12",infoMessageSubtitle="_infoMessageSubtitle_1oygr_19",tabContent="_tabContent_1oygr_26",noTypesSelected="_noTypesSelected_1oygr_34",infoMessageIcon="_infoMessageIcon_1oygr_38",noDataContainer="_noDataContainer_1oygr_44",logsPanel="_logsPanel_1oygr_49",container$8="_container_1oygr_53",content$3="_content_1oygr_61",styles$j={infoMessage,infoMessageTitle,infoMessageSubtitle,tabContent,noTypesSelected,infoMessageIcon,noDataContainer,logsPanel,container:container$8,content:content$3},Main=({gridTabsContainerClassname:K,mainTabContentClassname:J})=>{const{t:ne}=useTranslation(),{activeTab:oe}=useTabParams(),{schemaTypes:ce,status:ue}=useSelector$1(selectSchemaTypes),{isOpen:Ae}=useLogsPanel(),pe=reactExports.useMemo(()=>Object.keys(ce).some(Se=>{const Te=Se;return isArray$6(ce[Te])&&ce[Te].length>0}),[ce]),xe=()=>pe?{type:"noTypesSelected",content:jsxRuntimeExports.jsxs("div",{className:styles$j.infoMessage,children:[jsxRuntimeExports.jsx("div",{className:styles$j.infoMessageIcon,children:jsxRuntimeExports.jsx(gf$1,{size:"Full"})}),jsxRuntimeExports.jsx("span",{className:styles$j.infoMessageTitle,children:ne("grid.useSearch")}),jsxRuntimeExports.jsx("span",{className:styles$j.infoMessageSubtitle,children:ne("grid.pressControlF")})]})}:{type:"Administrator",content:ne("grid.pleaseContantTheAdministrator")},{content:me,type:ge}=xe(),ye=()=>{var Se,Te,Ne;return oe!=null&&oe.id?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:K,"data-tid":"main-tabs-container",children:jsxRuntimeExports.jsx(GridTabs,{activeTabId:oe.id})}),jsxRuntimeExports.jsx("div",{"data-tid":`${oe.id}-tab-content`,className:cx(styles$j.tabContent,J),children:jsxRuntimeExports.jsx(TabItemContent,{activeTab:oe,options:{dynamicId:(Se=oe.dynamicType)==null?void 0:Se.id,isDynamicDashboard:((Te=oe.dynamicType)==null?void 0:Te.type)===ViewersMetadataType.DASHBOARD,isDynamicPrimaryDashboard:((Ne=oe.dynamicType)==null?void 0:Ne.type)===ViewersMetadataType.PRIMARY_DASHBOARD}})})]}):Object.keys(ce).length!==0?jsxRuntimeExports.jsxs(Lj,{direction:"horizontal",className:styles$j.noDataContainer,children:[jsxRuntimeExports.jsx(Ij,{order:1,minSize:30,children:jsxRuntimeExports.jsx(NoGridData,{containerClassname:styles$j[ge],content:me,loading:ue===LoadingStatusesEnum.LOADING})}),Ae&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx($F,{}),jsxRuntimeExports.jsx(Ij,{id:"logs-panel",order:2,defaultSize:20,minSize:20,className:styles$j.logsPanel,children:jsxRuntimeExports.jsx(Logs,{})})]})]}):null};return jsxRuntimeExports.jsx("div",{className:styles$j.container,children:jsxRuntimeExports.jsx("div",{className:styles$j.content,children:ye()})})},select$2="_select_1ditm_1",styles$i={select:select$2},DatasetButton=()=>{const K=useAppDispatch(),J=useSelector$1(selectOpenedTabs),{rowsData:ne,activeDatasetName:oe}=useSelector$1(selectDatasetData),[ce,ue]=reactExports.useState([]),Ae=()=>{if(ce.length)return oe||ce[0].Name};reactExports.useEffect(()=>{J.length===0?ue([]):ne.length!==0&&ue(ne)},[J,ne,oe]);const pe=()=>ce.map(({Name:me})=>({label:me,value:me})),xe=me=>{me!==oe&&K(selectDataset$1(!oe||oe==="Root"?"":oe))};return jsxRuntimeExports.jsx(xF,{className:styles$i.select,testid:"dataset-button",variant:"outlined",status:"transparent",disabled:ce.length===0,value:Ae(),prefix:jsxRuntimeExports.jsx(ik,{}),options:pe(),onChange:xe})},select$1="_select_1ditm_1",styles$h={select:select$1},EnvironmentButton=()=>{const K=useSelector$1(selectActiveEnvironment),J=useSelector$1(selectEnvironmentList),ne=reactExports.useMemo(()=>J==null?void 0:J.map(({Name:ce})=>({label:ce,value:ce})),[J]),oe=ce=>{ce!==K&&dispatch$1(setActiveEnvironment(ce))};return K&&jsxRuntimeExports.jsx(xF,{className:styles$h.select,variant:"outlined",status:"transparent",value:K,prefix:jsxRuntimeExports.jsx(zT,{}),options:ne,onChange:oe,testid:"environment-button"})},FullScreenLayoutSettingsButton=({isDisabled:K=!1})=>{const{t:J}=useTranslation(),ne=useSelector$1(selectMetaData),{state:oe}=useAppContext(),{state:ce,action:ue}=useDndContext(),[Ae,pe]=reactExports.useState(!1),xe=()=>{var Te,Ne;const ge=ue.getEditorTabs(oe.activeEditorTab,ne.data.Name),ye=returnDefaultConfig(ge),Se=findParent(ye,[EditorTabsEnum.EDITOR]);if(Se&&Se.content.forEach(($e,ke,je)=>{ce.hideEditor?ce.hideEditor&&je.length>1&&ke===1&&($e.isActive=!0):$e.isActive=$e.id===EditorTabsEnum.EDITOR}),!(oe.activeEditorTab===EditorTabsEnum.NEW_ENTITY||oe.activeEditorTab===EditorTabsEnum.COPY_ENTITY||oe.activeEditorTab===EditorTabsEnum.SELECT_TYPE)){const $e=getParsedConfig(ye,!0);ue.resetMaximizedStates(),ue.saveUiTypeData({simplifiedConfig:$e,handlers:ce.pinnedHandlers,MaximizedTabId:"",isLayoutRestored:!0})}correctConfigDirection(ye,LayoutDirection.VERTICAL),ue.updateConfig(ye),ue.setIsLayoutRestored(!0),(Ne=(Te=ce.restoreLayoutRef.current)==null?void 0:Te.restoreLayoutRef)==null||Ne.call(Te)},me=[{key:"1",title:J("confirmationModal.restoreLayout.title"),description:J("confirmationModal.restoreLayout.description"),prefix:jsxRuntimeExports.jsx(Nk,{}),onClick:()=>{pe(!1),Ho.info({title:J("confirmationModal.restoreLayout.title"),content:J("confirmationModal.restoreLayout.confirmationText"),onOk:ge=>{ue.updateLayoutDirection(LayoutDirection.VERTICAL),xe(),ge()},testId:"restore-layout"})}}];return jsxRuntimeExports.jsx(mf,{title:J("gridToolbar.settings"),children:jsxRuntimeExports.jsx("div",{className:"full-screen-layout-settings-button",children:jsxRuntimeExports.jsx(X_,{className:"grid-tabs__prev-next-buttons-dropdown",open:Ae,onOpenChange:pe,placement:"bottom",dropdownRender:()=>jsxRuntimeExports.jsx(EF,{items:me}),children:jsxRuntimeExports.jsx(rl,{testid:"full-screen-layout-settings-button",size:"sm",type:"transparent",variant:"ghost",iconBefore:jsxRuntimeExports.jsx(HD,{}),disabled:ce.isLayoutBtnsDisabled||K})})})})},RecordNavigationSelect=()=>{const{t:K}=useTranslation(),J=reactExports.useRef(null),{state:ne}=useDndContext(),[oe,ce]=reactExports.useState(!1),[ue,Ae]=reactExports.useState(""),[pe,xe]=reactExports.useState([]),{rowsData:me,selectedGridRowKey:ge,headersRef:ye}=ne,Se=ke=>(ke==null?void 0:ke.map(({id:je})=>({value:je,label:je})))||[];reactExports.useEffect(()=>{xe(Se(me))},[me]),reactExports.useEffect(()=>{oe?setTimeout(()=>{var ke;(ke=J.current)==null||ke.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"})},0):(xe(Se(me)),Ae(""))},[oe]);const Te=ke=>{var je,Ke,Ye;(je=ye.current)==null||je.selectRowByKeyWithDelay(ke),(Ye=(Ke=ye.current)==null?void 0:Ke.updateMarkedIndexOnRowChange)==null||Ye.call(Ke,ke),xe(Se(me))},Ne=ke=>{Ae(ke);const je=Se(me).filter(Ke=>Ke.label.toLowerCase().includes(ke.toLowerCase()));xe(je)},$e=()=>jsxRuntimeExports.jsxs("div",{className:"record-navigation-dropdown__menu",children:[jsxRuntimeExports.jsx(Ml,{className:"record-navigation-dropdown__input",variant:"outlined",placeholder:K("shared.filterInputPlaceholder")||"",prefix:jsxRuntimeExports.jsx(gf$1,{}),value:ue,onChange:Ne}),jsxRuntimeExports.jsx("div",{className:"record-navigation-dropdown__menu-list",children:pe.length!==0?pe.map(({value:ke,label:je})=>jsxRuntimeExports.jsx("div",{"aria-hidden":"true",ref:ge===ke?J:null,className:cx("record-navigation-dropdown__menu-item",{"record-navigation-dropdown__menu-item--active":ke===ge||je===ge}),onClick:()=>{Te(ke),ce(!1)},children:je},ke)):jsxRuntimeExports.jsx("div",{className:"record-navigation-dropdown__menu-item-no-data",children:K("noData.noData")})})]});return jsxRuntimeExports.jsx(X_,{className:"record-navigation-dropdown",placement:"bottom",open:oe,onOpenChange:ce,dropdownRender:$e,children:jsxRuntimeExports.jsxs("div",{className:"record-navigation-dropdown__record",children:[K("header.record"),oe?jsxRuntimeExports.jsx(hk,{}):jsxRuntimeExports.jsx(Rp,{})]})})},FullScreenModeButton=({isDisabled:K=!1})=>{const{t:J}=useTranslation(),ne=useSelector$1(selectUser),oe=useSelector$1(selectApplicationTheme),ce=useSelector$1(selectOpenedTabs),ue=useSelector$1(selectActiveTabIndex),Ae=useSelector$1(selectIsReadonly),pe=useSelector$1(selectActiveDataset$1),xe=useSelector$1(selectFullScreenMode),me=()=>{storageApi.saveEntity({dataset:pe||"",data:[{ApplicationTheme:oe,OpenedTabs:generateTabsParams(ce),ActiveTabIndex:ue,User:(ne==null?void 0:ne.username)||null,ReadOnly:Ae??!1,FullScreenMode:!xe,_t:"UiAppState"}]}).then(()=>{dispatch$1(setFullScreenMode(!xe))}).catch(toast.error)};return jsxRuntimeExports.jsx(mf,{title:J("header.userInfo.fullScreenMode"),children:jsxRuntimeExports.jsx(rl,{testid:`full-screen-mode${xe?"-active":""}`,size:"sm",type:"transparent",variant:"ghost",disabled:K,onClick:me,iconBefore:xe?jsxRuntimeExports.jsx(Lk,{}):jsxRuntimeExports.jsx(Ik,{})})})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(K,J){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,oe){ne.__proto__=oe}||function(ne,oe){for(var ce in oe)Object.prototype.hasOwnProperty.call(oe,ce)&&(ne[ce]=oe[ce])},extendStatics(K,J)};function __extends$1(K,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");extendStatics(K,J);function ne(){this.constructor=K}K.prototype=J===null?Object.create(J):(ne.prototype=J.prototype,new ne)}var __assign$1=function(){return __assign$1=Object.assign||function(J){for(var ne,oe=1,ce=arguments.length;oe<ce;oe++){ne=arguments[oe];for(var ue in ne)Object.prototype.hasOwnProperty.call(ne,ue)&&(J[ue]=ne[ue])}return J},__assign$1.apply(this,arguments)};function __awaiter$1(K,J,ne,oe){function ce(ue){return ue instanceof ne?ue:new ne(function(Ae){Ae(ue)})}return new(ne||(ne=Promise))(function(ue,Ae){function pe(ge){try{me(oe.next(ge))}catch(ye){Ae(ye)}}function xe(ge){try{me(oe.throw(ge))}catch(ye){Ae(ye)}}function me(ge){ge.done?ue(ge.value):ce(ge.value).then(pe,xe)}me((oe=oe.apply(K,[])).next())})}function __generator$1(K,J){var ne={label:0,sent:function(){if(ue[0]&1)throw ue[1];return ue[1]},trys:[],ops:[]},oe,ce,ue,Ae;return Ae={next:pe(0),throw:pe(1),return:pe(2)},typeof Symbol=="function"&&(Ae[Symbol.iterator]=function(){return this}),Ae;function pe(me){return function(ge){return xe([me,ge])}}function xe(me){if(oe)throw new TypeError("Generator is already executing.");for(;ne;)try{if(oe=1,ce&&(ue=me[0]&2?ce.return:me[0]?ce.throw||((ue=ce.return)&&ue.call(ce),0):ce.next)&&!(ue=ue.call(ce,me[1])).done)return ue;switch(ce=0,ue&&(me=[me[0]&2,ue.value]),me[0]){case 0:case 1:ue=me;break;case 4:return ne.label++,{value:me[1],done:!1};case 5:ne.label++,ce=me[1],me=[0];continue;case 7:me=ne.ops.pop(),ne.trys.pop();continue;default:if(ue=ne.trys,!(ue=ue.length>0&&ue[ue.length-1])&&(me[0]===6||me[0]===2)){ne=0;continue}if(me[0]===3&&(!ue||me[1]>ue[0]&&me[1]<ue[3])){ne.label=me[1];break}if(me[0]===6&&ne.label<ue[1]){ne.label=ue[1],ue=me;break}if(ue&&ne.label<ue[2]){ne.label=ue[2],ne.ops.push(me);break}ue[2]&&ne.ops.pop(),ne.trys.pop();continue}me=J.call(K,ne)}catch(ge){me=[6,ge],ce=0}finally{oe=ue=0}if(me[0]&5)throw me[1];return{value:me[0]?me[1]:void 0,done:!0}}}function __spreadArray$1(K,J,ne){if(arguments.length===2)for(var oe=0,ce=J.length,ue;oe<ce;oe++)(ue||!(oe in J))&&(ue||(ue=Array.prototype.slice.call(J,0,oe)),ue[oe]=J[oe]);return K.concat(ue||J)}var Bounds=function(){function K(J,ne,oe,ce){this.left=J,this.top=ne,this.width=oe,this.height=ce}return K.prototype.add=function(J,ne,oe,ce){return new K(this.left+J,this.top+ne,this.width+oe,this.height+ce)},K.fromClientRect=function(J,ne){return new K(ne.left+J.windowBounds.left,ne.top+J.windowBounds.top,ne.width,ne.height)},K.fromDOMRectList=function(J,ne){var oe=Array.from(ne).find(function(ce){return ce.width!==0});return oe?new K(oe.left+J.windowBounds.left,oe.top+J.windowBounds.top,oe.width,oe.height):K.EMPTY},K.EMPTY=new K(0,0,0,0),K}(),parseBounds=function(K,J){return Bounds.fromClientRect(K,J.getBoundingClientRect())},parseDocumentSize=function(K){var J=K.body,ne=K.documentElement;if(!J||!ne)throw new Error("Unable to get document size");var oe=Math.max(Math.max(J.scrollWidth,ne.scrollWidth),Math.max(J.offsetWidth,ne.offsetWidth),Math.max(J.clientWidth,ne.clientWidth)),ce=Math.max(Math.max(J.scrollHeight,ne.scrollHeight),Math.max(J.offsetHeight,ne.offsetHeight),Math.max(J.clientHeight,ne.clientHeight));return new Bounds(0,0,oe,ce)},toCodePoints$1=function(K){for(var J=[],ne=0,oe=K.length;ne<oe;){var ce=K.charCodeAt(ne++);if(ce>=55296&&ce<=56319&&ne<oe){var ue=K.charCodeAt(ne++);(ue&64512)===56320?J.push(((ce&1023)<<10)+(ue&1023)+65536):(J.push(ce),ne--)}else J.push(ce)}return J},fromCodePoint$1=function(){for(var K=[],J=0;J<arguments.length;J++)K[J]=arguments[J];if(String.fromCodePoint)return String.fromCodePoint.apply(String,K);var ne=K.length;if(!ne)return"";for(var oe=[],ce=-1,ue="";++ce<ne;){var Ae=K[ce];Ae<=65535?oe.push(Ae):(Ae-=65536,oe.push((Ae>>10)+55296,Ae%1024+56320)),(ce+1===ne||oe.length>16384)&&(ue+=String.fromCharCode.apply(String,oe),oe.length=0)}return ue},chars$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$2=0;i$2<chars$2.length;i$2++)lookup$2[chars$2.charCodeAt(i$2)]=i$2;var chars$1$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1$1=0;i$1$1<chars$1$1.length;i$1$1++)lookup$1$1[chars$1$1.charCodeAt(i$1$1)]=i$1$1;var decode$1=function(K){var J=K.length*.75,ne=K.length,oe,ce=0,ue,Ae,pe,xe;K[K.length-1]==="="&&(J--,K[K.length-2]==="="&&J--);var me=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(J):new Array(J),ge=Array.isArray(me)?me:new Uint8Array(me);for(oe=0;oe<ne;oe+=4)ue=lookup$1$1[K.charCodeAt(oe)],Ae=lookup$1$1[K.charCodeAt(oe+1)],pe=lookup$1$1[K.charCodeAt(oe+2)],xe=lookup$1$1[K.charCodeAt(oe+3)],ge[ce++]=ue<<2|Ae>>4,ge[ce++]=(Ae&15)<<4|pe>>2,ge[ce++]=(pe&3)<<6|xe&63;return me},polyUint16Array$1=function(K){for(var J=K.length,ne=[],oe=0;oe<J;oe+=2)ne.push(K[oe+1]<<8|K[oe]);return ne},polyUint32Array$1=function(K){for(var J=K.length,ne=[],oe=0;oe<J;oe+=4)ne.push(K[oe+3]<<24|K[oe+2]<<16|K[oe+1]<<8|K[oe]);return ne},UTRIE2_SHIFT_2$1=5,UTRIE2_SHIFT_1$1=11,UTRIE2_INDEX_SHIFT$1=2,UTRIE2_SHIFT_1_2$1=UTRIE2_SHIFT_1$1-UTRIE2_SHIFT_2$1,UTRIE2_LSCP_INDEX_2_OFFSET$1=65536>>UTRIE2_SHIFT_2$1,UTRIE2_DATA_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_2$1,UTRIE2_DATA_MASK$1=UTRIE2_DATA_BLOCK_LENGTH$1-1,UTRIE2_LSCP_INDEX_2_LENGTH$1=1024>>UTRIE2_SHIFT_2$1,UTRIE2_INDEX_2_BMP_LENGTH$1=UTRIE2_LSCP_INDEX_2_OFFSET$1+UTRIE2_LSCP_INDEX_2_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_OFFSET$1=UTRIE2_INDEX_2_BMP_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_LENGTH$1=32,UTRIE2_INDEX_1_OFFSET$1=UTRIE2_UTF8_2B_INDEX_2_OFFSET$1+UTRIE2_UTF8_2B_INDEX_2_LENGTH$1,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1=65536>>UTRIE2_SHIFT_1$1,UTRIE2_INDEX_2_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_1_2$1,UTRIE2_INDEX_2_MASK$1=UTRIE2_INDEX_2_BLOCK_LENGTH$1-1,slice16$1=function(K,J,ne){return K.slice?K.slice(J,ne):new Uint16Array(Array.prototype.slice.call(K,J,ne))},slice32$1=function(K,J,ne){return K.slice?K.slice(J,ne):new Uint32Array(Array.prototype.slice.call(K,J,ne))},createTrieFromBase64$1=function(K,J){var ne=decode$1(K),oe=Array.isArray(ne)?polyUint32Array$1(ne):new Uint32Array(ne),ce=Array.isArray(ne)?polyUint16Array$1(ne):new Uint16Array(ne),ue=24,Ae=slice16$1(ce,ue/2,oe[4]/2),pe=oe[5]===2?slice16$1(ce,(ue+oe[4])/2):slice32$1(oe,Math.ceil((ue+oe[4])/4));return new Trie$1(oe[0],oe[1],oe[2],oe[3],Ae,pe)},Trie$1=function(){function K(J,ne,oe,ce,ue,Ae){this.initialValue=J,this.errorValue=ne,this.highStart=oe,this.highValueIndex=ce,this.index=ue,this.data=Ae}return K.prototype.get=function(J){var ne;if(J>=0){if(J<55296||J>56319&&J<=65535)return ne=this.index[J>>UTRIE2_SHIFT_2$1],ne=(ne<<UTRIE2_INDEX_SHIFT$1)+(J&UTRIE2_DATA_MASK$1),this.data[ne];if(J<=65535)return ne=this.index[UTRIE2_LSCP_INDEX_2_OFFSET$1+(J-55296>>UTRIE2_SHIFT_2$1)],ne=(ne<<UTRIE2_INDEX_SHIFT$1)+(J&UTRIE2_DATA_MASK$1),this.data[ne];if(J<this.highStart)return ne=UTRIE2_INDEX_1_OFFSET$1-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1+(J>>UTRIE2_SHIFT_1$1),ne=this.index[ne],ne+=J>>UTRIE2_SHIFT_2$1&UTRIE2_INDEX_2_MASK$1,ne=this.index[ne],ne=(ne<<UTRIE2_INDEX_SHIFT$1)+(J&UTRIE2_DATA_MASK$1),this.data[ne];if(J<=1114111)return this.data[this.highValueIndex]}return this.errorValue},K}(),chars$3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$3=0;i$3<chars$3.length;i$3++)lookup$3[chars$3.charCodeAt(i$3)]=i$3;var base64$1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",LETTER_NUMBER_MODIFIER=50,BK=1,CR$1=2,LF$1=3,CM=4,NL=5,WJ=7,ZW=8,GL=9,SP=10,ZWJ$1=11,B2=12,BA=13,BB=14,HY=15,CB=16,CL=17,CP=18,EX=19,IN=20,NS=21,OP=22,QU=23,IS=24,NU=25,PO=26,PR=27,SY=28,AI=29,AL=30,CJ=31,EB=32,EM=33,H2$1=34,H3$1=35,HL=36,ID=37,JL=38,JV=39,JT=40,RI$1=41,SA=42,XX=43,ea_OP=[9001,65288],BREAK_MANDATORY="!",BREAK_NOT_ALLOWED$1="",BREAK_ALLOWED$1="",UnicodeTrie$1=createTrieFromBase64$1(base64$1),ALPHABETICS=[AL,HL],HARD_LINE_BREAKS=[BK,CR$1,LF$1,NL],SPACE$1=[SP,ZW],PREFIX_POSTFIX=[PR,PO],LINE_BREAKS=HARD_LINE_BREAKS.concat(SPACE$1),KOREAN_SYLLABLE_BLOCK=[JL,JV,JT,H2$1,H3$1],HYPHEN=[HY,BA],codePointsToCharacterClasses=function(K,J){J===void 0&&(J="strict");var ne=[],oe=[],ce=[];return K.forEach(function(ue,Ae){var pe=UnicodeTrie$1.get(ue);if(pe>LETTER_NUMBER_MODIFIER?(ce.push(!0),pe-=LETTER_NUMBER_MODIFIER):ce.push(!1),["normal","auto","loose"].indexOf(J)!==-1&&[8208,8211,12316,12448].indexOf(ue)!==-1)return oe.push(Ae),ne.push(CB);if(pe===CM||pe===ZWJ$1){if(Ae===0)return oe.push(Ae),ne.push(AL);var xe=ne[Ae-1];return LINE_BREAKS.indexOf(xe)===-1?(oe.push(oe[Ae-1]),ne.push(xe)):(oe.push(Ae),ne.push(AL))}if(oe.push(Ae),pe===CJ)return ne.push(J==="strict"?NS:ID);if(pe===SA||pe===AI)return ne.push(AL);if(pe===XX)return ue>=131072&&ue<=196605||ue>=196608&&ue<=262141?ne.push(ID):ne.push(AL);ne.push(pe)}),[oe,ne,ce]},isAdjacentWithSpaceIgnored=function(K,J,ne,oe){var ce=oe[ne];if(Array.isArray(K)?K.indexOf(ce)!==-1:K===ce)for(var ue=ne;ue<=oe.length;){ue++;var Ae=oe[ue];if(Ae===J)return!0;if(Ae!==SP)break}if(ce===SP)for(var ue=ne;ue>0;){ue--;var pe=oe[ue];if(Array.isArray(K)?K.indexOf(pe)!==-1:K===pe)for(var xe=ne;xe<=oe.length;){xe++;var Ae=oe[xe];if(Ae===J)return!0;if(Ae!==SP)break}if(pe!==SP)break}return!1},previousNonSpaceClassType=function(K,J){for(var ne=K;ne>=0;){var oe=J[ne];if(oe===SP)ne--;else return oe}return 0},_lineBreakAtIndex=function(K,J,ne,oe,ce){if(ne[oe]===0)return BREAK_NOT_ALLOWED$1;var ue=oe-1;if(Array.isArray(ce)&&ce[ue]===!0)return BREAK_NOT_ALLOWED$1;var Ae=ue-1,pe=ue+1,xe=J[ue],me=Ae>=0?J[Ae]:0,ge=J[pe];if(xe===CR$1&&ge===LF$1)return BREAK_NOT_ALLOWED$1;if(HARD_LINE_BREAKS.indexOf(xe)!==-1)return BREAK_MANDATORY;if(HARD_LINE_BREAKS.indexOf(ge)!==-1||SPACE$1.indexOf(ge)!==-1)return BREAK_NOT_ALLOWED$1;if(previousNonSpaceClassType(ue,J)===ZW)return BREAK_ALLOWED$1;if(UnicodeTrie$1.get(K[ue])===ZWJ$1||(xe===EB||xe===EM)&&UnicodeTrie$1.get(K[pe])===ZWJ$1||xe===WJ||ge===WJ||xe===GL||[SP,BA,HY].indexOf(xe)===-1&&ge===GL||[CL,CP,EX,IS,SY].indexOf(ge)!==-1||previousNonSpaceClassType(ue,J)===OP||isAdjacentWithSpaceIgnored(QU,OP,ue,J)||isAdjacentWithSpaceIgnored([CL,CP],NS,ue,J)||isAdjacentWithSpaceIgnored(B2,B2,ue,J))return BREAK_NOT_ALLOWED$1;if(xe===SP)return BREAK_ALLOWED$1;if(xe===QU||ge===QU)return BREAK_NOT_ALLOWED$1;if(ge===CB||xe===CB)return BREAK_ALLOWED$1;if([BA,HY,NS].indexOf(ge)!==-1||xe===BB||me===HL&&HYPHEN.indexOf(xe)!==-1||xe===SY&&ge===HL||ge===IN||ALPHABETICS.indexOf(ge)!==-1&&xe===NU||ALPHABETICS.indexOf(xe)!==-1&&ge===NU||xe===PR&&[ID,EB,EM].indexOf(ge)!==-1||[ID,EB,EM].indexOf(xe)!==-1&&ge===PO||ALPHABETICS.indexOf(xe)!==-1&&PREFIX_POSTFIX.indexOf(ge)!==-1||PREFIX_POSTFIX.indexOf(xe)!==-1&&ALPHABETICS.indexOf(ge)!==-1||[PR,PO].indexOf(xe)!==-1&&(ge===NU||[OP,HY].indexOf(ge)!==-1&&J[pe+1]===NU)||[OP,HY].indexOf(xe)!==-1&&ge===NU||xe===NU&&[NU,SY,IS].indexOf(ge)!==-1)return BREAK_NOT_ALLOWED$1;if([NU,SY,IS,CL,CP].indexOf(ge)!==-1)for(var ye=ue;ye>=0;){var Se=J[ye];if(Se===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(Se)!==-1)ye--;else break}if([PR,PO].indexOf(ge)!==-1)for(var ye=[CL,CP].indexOf(xe)!==-1?Ae:ue;ye>=0;){var Se=J[ye];if(Se===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(Se)!==-1)ye--;else break}if(JL===xe&&[JL,JV,H2$1,H3$1].indexOf(ge)!==-1||[JV,H2$1].indexOf(xe)!==-1&&[JV,JT].indexOf(ge)!==-1||[JT,H3$1].indexOf(xe)!==-1&&ge===JT||KOREAN_SYLLABLE_BLOCK.indexOf(xe)!==-1&&[IN,PO].indexOf(ge)!==-1||KOREAN_SYLLABLE_BLOCK.indexOf(ge)!==-1&&xe===PR||ALPHABETICS.indexOf(xe)!==-1&&ALPHABETICS.indexOf(ge)!==-1||xe===IS&&ALPHABETICS.indexOf(ge)!==-1||ALPHABETICS.concat(NU).indexOf(xe)!==-1&&ge===OP&&ea_OP.indexOf(K[pe])===-1||ALPHABETICS.concat(NU).indexOf(ge)!==-1&&xe===CP)return BREAK_NOT_ALLOWED$1;if(xe===RI$1&&ge===RI$1){for(var Te=ne[ue],Ne=1;Te>0&&(Te--,J[Te]===RI$1);)Ne++;if(Ne%2!==0)return BREAK_NOT_ALLOWED$1}return xe===EB&&ge===EM?BREAK_NOT_ALLOWED$1:BREAK_ALLOWED$1},cssFormattedClasses=function(K,J){J||(J={lineBreak:"normal",wordBreak:"normal"});var ne=codePointsToCharacterClasses(K,J.lineBreak),oe=ne[0],ce=ne[1],ue=ne[2];(J.wordBreak==="break-all"||J.wordBreak==="break-word")&&(ce=ce.map(function(pe){return[NU,AL,SA].indexOf(pe)!==-1?ID:pe}));var Ae=J.wordBreak==="keep-all"?ue.map(function(pe,xe){return pe&&K[xe]>=19968&&K[xe]<=40959}):void 0;return[oe,ce,Ae]},Break=function(){function K(J,ne,oe,ce){this.codePoints=J,this.required=ne===BREAK_MANDATORY,this.start=oe,this.end=ce}return K.prototype.slice=function(){return fromCodePoint$1.apply(void 0,this.codePoints.slice(this.start,this.end))},K}(),LineBreaker=function(K,J){var ne=toCodePoints$1(K),oe=cssFormattedClasses(ne,J),ce=oe[0],ue=oe[1],Ae=oe[2],pe=ne.length,xe=0,me=0;return{next:function(){if(me>=pe)return{done:!0,value:null};for(var ge=BREAK_NOT_ALLOWED$1;me<pe&&(ge=_lineBreakAtIndex(ne,ue,ce,++me,Ae))===BREAK_NOT_ALLOWED$1;);if(ge!==BREAK_NOT_ALLOWED$1||me===pe){var ye=new Break(ne,ge,xe,me);return xe=me,{value:ye,done:!1}}return{done:!0,value:null}}}},FLAG_UNRESTRICTED=1,FLAG_ID=2,FLAG_INTEGER=4,FLAG_NUMBER=8,LINE_FEED=10,SOLIDUS=47,REVERSE_SOLIDUS=92,CHARACTER_TABULATION=9,SPACE=32,QUOTATION_MARK=34,EQUALS_SIGN=61,NUMBER_SIGN=35,DOLLAR_SIGN=36,PERCENTAGE_SIGN=37,APOSTROPHE=39,LEFT_PARENTHESIS=40,RIGHT_PARENTHESIS=41,LOW_LINE=95,HYPHEN_MINUS=45,EXCLAMATION_MARK=33,LESS_THAN_SIGN=60,GREATER_THAN_SIGN=62,COMMERCIAL_AT=64,LEFT_SQUARE_BRACKET=91,RIGHT_SQUARE_BRACKET=93,CIRCUMFLEX_ACCENT=61,LEFT_CURLY_BRACKET=123,QUESTION_MARK=63,RIGHT_CURLY_BRACKET=125,VERTICAL_LINE=124,TILDE=126,CONTROL=128,REPLACEMENT_CHARACTER=65533,ASTERISK=42,PLUS_SIGN=43,COMMA=44,COLON=58,SEMICOLON=59,FULL_STOP=46,NULL=0,BACKSPACE=8,LINE_TABULATION=11,SHIFT_OUT=14,INFORMATION_SEPARATOR_ONE=31,DELETE=127,EOF=-1,ZERO=48,a=97,e=101,f$1=102,u=117,z=122,A$1=65,E=69,F=70,U=85,Z$1=90,isDigit=function(K){return K>=ZERO&&K<=57},isSurrogateCodePoint=function(K){return K>=55296&&K<=57343},isHex=function(K){return isDigit(K)||K>=A$1&&K<=F||K>=a&&K<=f$1},isLowerCaseLetter=function(K){return K>=a&&K<=z},isUpperCaseLetter=function(K){return K>=A$1&&K<=Z$1},isLetter=function(K){return isLowerCaseLetter(K)||isUpperCaseLetter(K)},isNonASCIICodePoint=function(K){return K>=CONTROL},isWhiteSpace=function(K){return K===LINE_FEED||K===CHARACTER_TABULATION||K===SPACE},isNameStartCodePoint=function(K){return isLetter(K)||isNonASCIICodePoint(K)||K===LOW_LINE},isNameCodePoint=function(K){return isNameStartCodePoint(K)||isDigit(K)||K===HYPHEN_MINUS},isNonPrintableCodePoint=function(K){return K>=NULL&&K<=BACKSPACE||K===LINE_TABULATION||K>=SHIFT_OUT&&K<=INFORMATION_SEPARATOR_ONE||K===DELETE},isValidEscape=function(K,J){return K!==REVERSE_SOLIDUS?!1:J!==LINE_FEED},isIdentifierStart=function(K,J,ne){return K===HYPHEN_MINUS?isNameStartCodePoint(J)||isValidEscape(J,ne):isNameStartCodePoint(K)?!0:!!(K===REVERSE_SOLIDUS&&isValidEscape(K,J))},isNumberStart=function(K,J,ne){return K===PLUS_SIGN||K===HYPHEN_MINUS?isDigit(J)?!0:J===FULL_STOP&&isDigit(ne):isDigit(K===FULL_STOP?J:K)},stringToNumber=function(K){var J=0,ne=1;(K[J]===PLUS_SIGN||K[J]===HYPHEN_MINUS)&&(K[J]===HYPHEN_MINUS&&(ne=-1),J++);for(var oe=[];isDigit(K[J]);)oe.push(K[J++]);var ce=oe.length?parseInt(fromCodePoint$1.apply(void 0,oe),10):0;K[J]===FULL_STOP&&J++;for(var ue=[];isDigit(K[J]);)ue.push(K[J++]);var Ae=ue.length,pe=Ae?parseInt(fromCodePoint$1.apply(void 0,ue),10):0;(K[J]===E||K[J]===e)&&J++;var xe=1;(K[J]===PLUS_SIGN||K[J]===HYPHEN_MINUS)&&(K[J]===HYPHEN_MINUS&&(xe=-1),J++);for(var me=[];isDigit(K[J]);)me.push(K[J++]);var ge=me.length?parseInt(fromCodePoint$1.apply(void 0,me),10):0;return ne*(ce+pe*Math.pow(10,-Ae))*Math.pow(10,xe*ge)},LEFT_PARENTHESIS_TOKEN={type:2},RIGHT_PARENTHESIS_TOKEN={type:3},COMMA_TOKEN={type:4},SUFFIX_MATCH_TOKEN={type:13},PREFIX_MATCH_TOKEN={type:8},COLUMN_TOKEN={type:21},DASH_MATCH_TOKEN={type:9},INCLUDE_MATCH_TOKEN={type:10},LEFT_CURLY_BRACKET_TOKEN={type:11},RIGHT_CURLY_BRACKET_TOKEN={type:12},SUBSTRING_MATCH_TOKEN={type:14},BAD_URL_TOKEN={type:23},BAD_STRING_TOKEN={type:1},CDO_TOKEN={type:25},CDC_TOKEN={type:24},COLON_TOKEN={type:26},SEMICOLON_TOKEN={type:27},LEFT_SQUARE_BRACKET_TOKEN={type:28},RIGHT_SQUARE_BRACKET_TOKEN={type:29},WHITESPACE_TOKEN={type:31},EOF_TOKEN={type:32},Tokenizer=function(){function K(){this._value=[]}return K.prototype.write=function(J){this._value=this._value.concat(toCodePoints$1(J))},K.prototype.read=function(){for(var J=[],ne=this.consumeToken();ne!==EOF_TOKEN;)J.push(ne),ne=this.consumeToken();return J},K.prototype.consumeToken=function(){var J=this.consumeCodePoint();switch(J){case QUOTATION_MARK:return this.consumeStringToken(QUOTATION_MARK);case NUMBER_SIGN:var ne=this.peekCodePoint(0),oe=this.peekCodePoint(1),ce=this.peekCodePoint(2);if(isNameCodePoint(ne)||isValidEscape(oe,ce)){var ue=isIdentifierStart(ne,oe,ce)?FLAG_ID:FLAG_UNRESTRICTED,Ae=this.consumeName();return{type:5,value:Ae,flags:ue}}break;case DOLLAR_SIGN:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUFFIX_MATCH_TOKEN;break;case APOSTROPHE:return this.consumeStringToken(APOSTROPHE);case LEFT_PARENTHESIS:return LEFT_PARENTHESIS_TOKEN;case RIGHT_PARENTHESIS:return RIGHT_PARENTHESIS_TOKEN;case ASTERISK:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUBSTRING_MATCH_TOKEN;break;case PLUS_SIGN:if(isNumberStart(J,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(J),this.consumeNumericToken();break;case COMMA:return COMMA_TOKEN;case HYPHEN_MINUS:var pe=J,xe=this.peekCodePoint(0),me=this.peekCodePoint(1);if(isNumberStart(pe,xe,me))return this.reconsumeCodePoint(J),this.consumeNumericToken();if(isIdentifierStart(pe,xe,me))return this.reconsumeCodePoint(J),this.consumeIdentLikeToken();if(xe===HYPHEN_MINUS&&me===GREATER_THAN_SIGN)return this.consumeCodePoint(),this.consumeCodePoint(),CDC_TOKEN;break;case FULL_STOP:if(isNumberStart(J,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(J),this.consumeNumericToken();break;case SOLIDUS:if(this.peekCodePoint(0)===ASTERISK)for(this.consumeCodePoint();;){var ge=this.consumeCodePoint();if(ge===ASTERISK&&(ge=this.consumeCodePoint(),ge===SOLIDUS))return this.consumeToken();if(ge===EOF)return this.consumeToken()}break;case COLON:return COLON_TOKEN;case SEMICOLON:return SEMICOLON_TOKEN;case LESS_THAN_SIGN:if(this.peekCodePoint(0)===EXCLAMATION_MARK&&this.peekCodePoint(1)===HYPHEN_MINUS&&this.peekCodePoint(2)===HYPHEN_MINUS)return this.consumeCodePoint(),this.consumeCodePoint(),CDO_TOKEN;break;case COMMERCIAL_AT:var ye=this.peekCodePoint(0),Se=this.peekCodePoint(1),Te=this.peekCodePoint(2);if(isIdentifierStart(ye,Se,Te)){var Ae=this.consumeName();return{type:7,value:Ae}}break;case LEFT_SQUARE_BRACKET:return LEFT_SQUARE_BRACKET_TOKEN;case REVERSE_SOLIDUS:if(isValidEscape(J,this.peekCodePoint(0)))return this.reconsumeCodePoint(J),this.consumeIdentLikeToken();break;case RIGHT_SQUARE_BRACKET:return RIGHT_SQUARE_BRACKET_TOKEN;case CIRCUMFLEX_ACCENT:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),PREFIX_MATCH_TOKEN;break;case LEFT_CURLY_BRACKET:return LEFT_CURLY_BRACKET_TOKEN;case RIGHT_CURLY_BRACKET:return RIGHT_CURLY_BRACKET_TOKEN;case u:case U:var Ne=this.peekCodePoint(0),$e=this.peekCodePoint(1);return Ne===PLUS_SIGN&&(isHex($e)||$e===QUESTION_MARK)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(J),this.consumeIdentLikeToken();case VERTICAL_LINE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),DASH_MATCH_TOKEN;if(this.peekCodePoint(0)===VERTICAL_LINE)return this.consumeCodePoint(),COLUMN_TOKEN;break;case TILDE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),INCLUDE_MATCH_TOKEN;break;case EOF:return EOF_TOKEN}return isWhiteSpace(J)?(this.consumeWhiteSpace(),WHITESPACE_TOKEN):isDigit(J)?(this.reconsumeCodePoint(J),this.consumeNumericToken()):isNameStartCodePoint(J)?(this.reconsumeCodePoint(J),this.consumeIdentLikeToken()):{type:6,value:fromCodePoint$1(J)}},K.prototype.consumeCodePoint=function(){var J=this._value.shift();return typeof J>"u"?-1:J},K.prototype.reconsumeCodePoint=function(J){this._value.unshift(J)},K.prototype.peekCodePoint=function(J){return J>=this._value.length?-1:this._value[J]},K.prototype.consumeUnicodeRangeToken=function(){for(var J=[],ne=this.consumeCodePoint();isHex(ne)&&J.length<6;)J.push(ne),ne=this.consumeCodePoint();for(var oe=!1;ne===QUESTION_MARK&&J.length<6;)J.push(ne),ne=this.consumeCodePoint(),oe=!0;if(oe){var ce=parseInt(fromCodePoint$1.apply(void 0,J.map(function(xe){return xe===QUESTION_MARK?ZERO:xe})),16),ue=parseInt(fromCodePoint$1.apply(void 0,J.map(function(xe){return xe===QUESTION_MARK?F:xe})),16);return{type:30,start:ce,end:ue}}var Ae=parseInt(fromCodePoint$1.apply(void 0,J),16);if(this.peekCodePoint(0)===HYPHEN_MINUS&&isHex(this.peekCodePoint(1))){this.consumeCodePoint(),ne=this.consumeCodePoint();for(var pe=[];isHex(ne)&&pe.length<6;)pe.push(ne),ne=this.consumeCodePoint();var ue=parseInt(fromCodePoint$1.apply(void 0,pe),16);return{type:30,start:Ae,end:ue}}else return{type:30,start:Ae,end:Ae}},K.prototype.consumeIdentLikeToken=function(){var J=this.consumeName();return J.toLowerCase()==="url"&&this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),{type:19,value:J}):{type:20,value:J}},K.prototype.consumeUrlToken=function(){var J=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF)return{type:22,value:""};var ne=this.peekCodePoint(0);if(ne===APOSTROPHE||ne===QUOTATION_MARK){var oe=this.consumeStringToken(this.consumeCodePoint());return oe.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS)?(this.consumeCodePoint(),{type:22,value:oe.value}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN)}for(;;){var ce=this.consumeCodePoint();if(ce===EOF||ce===RIGHT_PARENTHESIS)return{type:22,value:fromCodePoint$1.apply(void 0,J)};if(isWhiteSpace(ce))return this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS?(this.consumeCodePoint(),{type:22,value:fromCodePoint$1.apply(void 0,J)}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN);if(ce===QUOTATION_MARK||ce===APOSTROPHE||ce===LEFT_PARENTHESIS||isNonPrintableCodePoint(ce))return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;if(ce===REVERSE_SOLIDUS)if(isValidEscape(ce,this.peekCodePoint(0)))J.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;else J.push(ce)}},K.prototype.consumeWhiteSpace=function(){for(;isWhiteSpace(this.peekCodePoint(0));)this.consumeCodePoint()},K.prototype.consumeBadUrlRemnants=function(){for(;;){var J=this.consumeCodePoint();if(J===RIGHT_PARENTHESIS||J===EOF)return;isValidEscape(J,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},K.prototype.consumeStringSlice=function(J){for(var ne=5e4,oe="";J>0;){var ce=Math.min(ne,J);oe+=fromCodePoint$1.apply(void 0,this._value.splice(0,ce)),J-=ce}return this._value.shift(),oe},K.prototype.consumeStringToken=function(J){var ne="",oe=0;do{var ce=this._value[oe];if(ce===EOF||ce===void 0||ce===J)return ne+=this.consumeStringSlice(oe),{type:0,value:ne};if(ce===LINE_FEED)return this._value.splice(0,oe),BAD_STRING_TOKEN;if(ce===REVERSE_SOLIDUS){var ue=this._value[oe+1];ue!==EOF&&ue!==void 0&&(ue===LINE_FEED?(ne+=this.consumeStringSlice(oe),oe=-1,this._value.shift()):isValidEscape(ce,ue)&&(ne+=this.consumeStringSlice(oe),ne+=fromCodePoint$1(this.consumeEscapedCodePoint()),oe=-1))}oe++}while(!0)},K.prototype.consumeNumber=function(){var J=[],ne=FLAG_INTEGER,oe=this.peekCodePoint(0);for((oe===PLUS_SIGN||oe===HYPHEN_MINUS)&&J.push(this.consumeCodePoint());isDigit(this.peekCodePoint(0));)J.push(this.consumeCodePoint());oe=this.peekCodePoint(0);var ce=this.peekCodePoint(1);if(oe===FULL_STOP&&isDigit(ce))for(J.push(this.consumeCodePoint(),this.consumeCodePoint()),ne=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)J.push(this.consumeCodePoint());oe=this.peekCodePoint(0),ce=this.peekCodePoint(1);var ue=this.peekCodePoint(2);if((oe===E||oe===e)&&((ce===PLUS_SIGN||ce===HYPHEN_MINUS)&&isDigit(ue)||isDigit(ce)))for(J.push(this.consumeCodePoint(),this.consumeCodePoint()),ne=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)J.push(this.consumeCodePoint());return[stringToNumber(J),ne]},K.prototype.consumeNumericToken=function(){var J=this.consumeNumber(),ne=J[0],oe=J[1],ce=this.peekCodePoint(0),ue=this.peekCodePoint(1),Ae=this.peekCodePoint(2);if(isIdentifierStart(ce,ue,Ae)){var pe=this.consumeName();return{type:15,number:ne,flags:oe,unit:pe}}return ce===PERCENTAGE_SIGN?(this.consumeCodePoint(),{type:16,number:ne,flags:oe}):{type:17,number:ne,flags:oe}},K.prototype.consumeEscapedCodePoint=function(){var J=this.consumeCodePoint();if(isHex(J)){for(var ne=fromCodePoint$1(J);isHex(this.peekCodePoint(0))&&ne.length<6;)ne+=fromCodePoint$1(this.consumeCodePoint());isWhiteSpace(this.peekCodePoint(0))&&this.consumeCodePoint();var oe=parseInt(ne,16);return oe===0||isSurrogateCodePoint(oe)||oe>1114111?REPLACEMENT_CHARACTER:oe}return J===EOF?REPLACEMENT_CHARACTER:J},K.prototype.consumeName=function(){for(var J="";;){var ne=this.consumeCodePoint();if(isNameCodePoint(ne))J+=fromCodePoint$1(ne);else if(isValidEscape(ne,this.peekCodePoint(0)))J+=fromCodePoint$1(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(ne),J}},K}(),Parser=function(){function K(J){this._tokens=J}return K.create=function(J){var ne=new Tokenizer;return ne.write(J),new K(ne.read())},K.parseValue=function(J){return K.create(J).parseComponentValue()},K.parseValues=function(J){return K.create(J).parseComponentValues()},K.prototype.parseComponentValue=function(){for(var J=this.consumeToken();J.type===31;)J=this.consumeToken();if(J.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(J);var ne=this.consumeComponentValue();do J=this.consumeToken();while(J.type===31);if(J.type===32)return ne;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},K.prototype.parseComponentValues=function(){for(var J=[];;){var ne=this.consumeComponentValue();if(ne.type===32)return J;J.push(ne),J.push()}},K.prototype.consumeComponentValue=function(){var J=this.consumeToken();switch(J.type){case 11:case 28:case 2:return this.consumeSimpleBlock(J.type);case 19:return this.consumeFunction(J)}return J},K.prototype.consumeSimpleBlock=function(J){for(var ne={type:J,values:[]},oe=this.consumeToken();;){if(oe.type===32||isEndingTokenFor(oe,J))return ne;this.reconsumeToken(oe),ne.values.push(this.consumeComponentValue()),oe=this.consumeToken()}},K.prototype.consumeFunction=function(J){for(var ne={name:J.value,values:[],type:18};;){var oe=this.consumeToken();if(oe.type===32||oe.type===3)return ne;this.reconsumeToken(oe),ne.values.push(this.consumeComponentValue())}},K.prototype.consumeToken=function(){var J=this._tokens.shift();return typeof J>"u"?EOF_TOKEN:J},K.prototype.reconsumeToken=function(J){this._tokens.unshift(J)},K}(),isDimensionToken=function(K){return K.type===15},isNumberToken=function(K){return K.type===17},isIdentToken=function(K){return K.type===20},isStringToken=function(K){return K.type===0},isIdentWithValue=function(K,J){return isIdentToken(K)&&K.value===J},nonWhiteSpace=function(K){return K.type!==31},nonFunctionArgSeparator=function(K){return K.type!==31&&K.type!==4},parseFunctionArgs=function(K){var J=[],ne=[];return K.forEach(function(oe){if(oe.type===4){if(ne.length===0)throw new Error("Error parsing function args, zero tokens for arg");J.push(ne),ne=[];return}oe.type!==31&&ne.push(oe)}),ne.length&&J.push(ne),J},isEndingTokenFor=function(K,J){return J===11&&K.type===12||J===28&&K.type===29?!0:J===2&&K.type===3},isLength$3=function(K){return K.type===17||K.type===15},isLengthPercentage=function(K){return K.type===16||isLength$3(K)},parseLengthPercentageTuple=function(K){return K.length>1?[K[0],K[1]]:[K[0]]},ZERO_LENGTH={type:17,number:0,flags:FLAG_INTEGER},FIFTY_PERCENT={type:16,number:50,flags:FLAG_INTEGER},HUNDRED_PERCENT={type:16,number:100,flags:FLAG_INTEGER},getAbsoluteValueForTuple=function(K,J,ne){var oe=K[0],ce=K[1];return[getAbsoluteValue(oe,J),getAbsoluteValue(typeof ce<"u"?ce:oe,ne)]},getAbsoluteValue=function(K,J){if(K.type===16)return K.number/100*J;if(isDimensionToken(K))switch(K.unit){case"rem":case"em":return 16*K.number;case"px":default:return K.number}return K.number},DEG="deg",GRAD="grad",RAD="rad",TURN="turn",angle={name:"angle",parse:function(K,J){if(J.type===15)switch(J.unit){case DEG:return Math.PI*J.number/180;case GRAD:return Math.PI/200*J.number;case RAD:return J.number;case TURN:return Math.PI*2*J.number}throw new Error("Unsupported angle type")}},isAngle=function(K){return K.type===15&&(K.unit===DEG||K.unit===GRAD||K.unit===RAD||K.unit===TURN)},parseNamedSide=function(K){var J=K.filter(isIdentToken).map(function(ne){return ne.value}).join(" ");switch(J){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ZERO_LENGTH,ZERO_LENGTH];case"to top":case"bottom":return deg(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ZERO_LENGTH,HUNDRED_PERCENT];case"to right":case"left":return deg(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[HUNDRED_PERCENT,HUNDRED_PERCENT];case"to bottom":case"top":return deg(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[HUNDRED_PERCENT,ZERO_LENGTH];case"to left":case"right":return deg(270)}return 0},deg=function(K){return Math.PI*K/180},color$1={name:"color",parse:function(K,J){if(J.type===18){var ne=SUPPORTED_COLOR_FUNCTIONS[J.name];if(typeof ne>"u")throw new Error('Attempting to parse an unsupported color function "'+J.name+'"');return ne(K,J.values)}if(J.type===5){if(J.value.length===3){var oe=J.value.substring(0,1),ce=J.value.substring(1,2),ue=J.value.substring(2,3);return pack$1(parseInt(oe+oe,16),parseInt(ce+ce,16),parseInt(ue+ue,16),1)}if(J.value.length===4){var oe=J.value.substring(0,1),ce=J.value.substring(1,2),ue=J.value.substring(2,3),Ae=J.value.substring(3,4);return pack$1(parseInt(oe+oe,16),parseInt(ce+ce,16),parseInt(ue+ue,16),parseInt(Ae+Ae,16)/255)}if(J.value.length===6){var oe=J.value.substring(0,2),ce=J.value.substring(2,4),ue=J.value.substring(4,6);return pack$1(parseInt(oe,16),parseInt(ce,16),parseInt(ue,16),1)}if(J.value.length===8){var oe=J.value.substring(0,2),ce=J.value.substring(2,4),ue=J.value.substring(4,6),Ae=J.value.substring(6,8);return pack$1(parseInt(oe,16),parseInt(ce,16),parseInt(ue,16),parseInt(Ae,16)/255)}}if(J.type===20){var pe=COLORS[J.value.toUpperCase()];if(typeof pe<"u")return pe}return COLORS.TRANSPARENT}},isTransparent=function(K){return(255&K)===0},asString=function(K){var J=255&K,ne=255&K>>8,oe=255&K>>16,ce=255&K>>24;return J<255?"rgba("+ce+","+oe+","+ne+","+J/255+")":"rgb("+ce+","+oe+","+ne+")"},pack$1=function(K,J,ne,oe){return(K<<24|J<<16|ne<<8|Math.round(oe*255)<<0)>>>0},getTokenColorValue=function(K,J){if(K.type===17)return K.number;if(K.type===16){var ne=J===3?1:255;return J===3?K.number/100*ne:Math.round(K.number/100*ne)}return 0},rgb=function(K,J){var ne=J.filter(nonFunctionArgSeparator);if(ne.length===3){var oe=ne.map(getTokenColorValue),ce=oe[0],ue=oe[1],Ae=oe[2];return pack$1(ce,ue,Ae,1)}if(ne.length===4){var pe=ne.map(getTokenColorValue),ce=pe[0],ue=pe[1],Ae=pe[2],xe=pe[3];return pack$1(ce,ue,Ae,xe)}return 0};function hue2rgb(K,J,ne){return ne<0&&(ne+=1),ne>=1&&(ne-=1),ne<1/6?(J-K)*ne*6+K:ne<1/2?J:ne<2/3?(J-K)*6*(2/3-ne)+K:K}var hsl=function(K,J){var ne=J.filter(nonFunctionArgSeparator),oe=ne[0],ce=ne[1],ue=ne[2],Ae=ne[3],pe=(oe.type===17?deg(oe.number):angle.parse(K,oe))/(Math.PI*2),xe=isLengthPercentage(ce)?ce.number/100:0,me=isLengthPercentage(ue)?ue.number/100:0,ge=typeof Ae<"u"&&isLengthPercentage(Ae)?getAbsoluteValue(Ae,1):1;if(xe===0)return pack$1(me*255,me*255,me*255,1);var ye=me<=.5?me*(xe+1):me+xe-me*xe,Se=me*2-ye,Te=hue2rgb(Se,ye,pe+1/3),Ne=hue2rgb(Se,ye,pe),$e=hue2rgb(Se,ye,pe-1/3);return pack$1(Te*255,Ne*255,$e*255,ge)},SUPPORTED_COLOR_FUNCTIONS={hsl,hsla:hsl,rgb,rgba:rgb},parseColor=function(K,J){return color$1.parse(K,Parser.create(J).parseComponentValue())},COLORS={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},backgroundClip={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(K,J){return J.map(function(ne){if(isIdentToken(ne))switch(ne.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundColor={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},parseColorStop=function(K,J){var ne=color$1.parse(K,J[0]),oe=J[1];return oe&&isLengthPercentage(oe)?{color:ne,stop:oe}:{color:ne,stop:null}},processColorStops=function(K,J){var ne=K[0],oe=K[K.length-1];ne.stop===null&&(ne.stop=ZERO_LENGTH),oe.stop===null&&(oe.stop=HUNDRED_PERCENT);for(var ce=[],ue=0,Ae=0;Ae<K.length;Ae++){var pe=K[Ae].stop;if(pe!==null){var xe=getAbsoluteValue(pe,J);xe>ue?ce.push(xe):ce.push(ue),ue=xe}else ce.push(null)}for(var me=null,Ae=0;Ae<ce.length;Ae++){var ge=ce[Ae];if(ge===null)me===null&&(me=Ae);else if(me!==null){for(var ye=Ae-me,Se=ce[me-1],Te=(ge-Se)/(ye+1),Ne=1;Ne<=ye;Ne++)ce[me+Ne-1]=Te*Ne;me=null}}return K.map(function($e,ke){var je=$e.color;return{color:je,stop:Math.max(Math.min(1,ce[ke]/J),0)}})},getAngleFromCorner=function(K,J,ne){var oe=J/2,ce=ne/2,ue=getAbsoluteValue(K[0],J)-oe,Ae=ce-getAbsoluteValue(K[1],ne);return(Math.atan2(Ae,ue)+Math.PI*2)%(Math.PI*2)},calculateGradientDirection=function(K,J,ne){var oe=typeof K=="number"?K:getAngleFromCorner(K,J,ne),ce=Math.abs(J*Math.sin(oe))+Math.abs(ne*Math.cos(oe)),ue=J/2,Ae=ne/2,pe=ce/2,xe=Math.sin(oe-Math.PI/2)*pe,me=Math.cos(oe-Math.PI/2)*pe;return[ce,ue-me,ue+me,Ae-xe,Ae+xe]},distance=function(K,J){return Math.sqrt(K*K+J*J)},findCorner=function(K,J,ne,oe,ce){var ue=[[0,0],[0,J],[K,0],[K,J]];return ue.reduce(function(Ae,pe){var xe=pe[0],me=pe[1],ge=distance(ne-xe,oe-me);return(ce?ge<Ae.optimumDistance:ge>Ae.optimumDistance)?{optimumCorner:pe,optimumDistance:ge}:Ae},{optimumDistance:ce?1/0:-1/0,optimumCorner:null}).optimumCorner},calculateRadius=function(K,J,ne,oe,ce){var ue=0,Ae=0;switch(K.size){case 0:K.shape===0?ue=Ae=Math.min(Math.abs(J),Math.abs(J-oe),Math.abs(ne),Math.abs(ne-ce)):K.shape===1&&(ue=Math.min(Math.abs(J),Math.abs(J-oe)),Ae=Math.min(Math.abs(ne),Math.abs(ne-ce)));break;case 2:if(K.shape===0)ue=Ae=Math.min(distance(J,ne),distance(J,ne-ce),distance(J-oe,ne),distance(J-oe,ne-ce));else if(K.shape===1){var pe=Math.min(Math.abs(ne),Math.abs(ne-ce))/Math.min(Math.abs(J),Math.abs(J-oe)),xe=findCorner(oe,ce,J,ne,!0),me=xe[0],ge=xe[1];ue=distance(me-J,(ge-ne)/pe),Ae=pe*ue}break;case 1:K.shape===0?ue=Ae=Math.max(Math.abs(J),Math.abs(J-oe),Math.abs(ne),Math.abs(ne-ce)):K.shape===1&&(ue=Math.max(Math.abs(J),Math.abs(J-oe)),Ae=Math.max(Math.abs(ne),Math.abs(ne-ce)));break;case 3:if(K.shape===0)ue=Ae=Math.max(distance(J,ne),distance(J,ne-ce),distance(J-oe,ne),distance(J-oe,ne-ce));else if(K.shape===1){var pe=Math.max(Math.abs(ne),Math.abs(ne-ce))/Math.max(Math.abs(J),Math.abs(J-oe)),ye=findCorner(oe,ce,J,ne,!1),me=ye[0],ge=ye[1];ue=distance(me-J,(ge-ne)/pe),Ae=pe*ue}break}return Array.isArray(K.size)&&(ue=getAbsoluteValue(K.size[0],oe),Ae=K.size.length===2?getAbsoluteValue(K.size[1],ce):ue),[ue,Ae]},linearGradient=function(K,J){var ne=deg(180),oe=[];return parseFunctionArgs(J).forEach(function(ce,ue){if(ue===0){var Ae=ce[0];if(Ae.type===20&&Ae.value==="to"){ne=parseNamedSide(ce);return}else if(isAngle(Ae)){ne=angle.parse(K,Ae);return}}var pe=parseColorStop(K,ce);oe.push(pe)}),{angle:ne,stops:oe,type:1}},prefixLinearGradient=function(K,J){var ne=deg(180),oe=[];return parseFunctionArgs(J).forEach(function(ce,ue){if(ue===0){var Ae=ce[0];if(Ae.type===20&&["top","left","right","bottom"].indexOf(Ae.value)!==-1){ne=parseNamedSide(ce);return}else if(isAngle(Ae)){ne=(angle.parse(K,Ae)+deg(270))%deg(360);return}}var pe=parseColorStop(K,ce);oe.push(pe)}),{angle:ne,stops:oe,type:1}},webkitGradient=function(K,J){var ne=deg(180),oe=[],ce=1,ue=0,Ae=3,pe=[];return parseFunctionArgs(J).forEach(function(xe,me){var ge=xe[0];if(me===0){if(isIdentToken(ge)&&ge.value==="linear"){ce=1;return}else if(isIdentToken(ge)&&ge.value==="radial"){ce=2;return}}if(ge.type===18){if(ge.name==="from"){var ye=color$1.parse(K,ge.values[0]);oe.push({stop:ZERO_LENGTH,color:ye})}else if(ge.name==="to"){var ye=color$1.parse(K,ge.values[0]);oe.push({stop:HUNDRED_PERCENT,color:ye})}else if(ge.name==="color-stop"){var Se=ge.values.filter(nonFunctionArgSeparator);if(Se.length===2){var ye=color$1.parse(K,Se[1]),Te=Se[0];isNumberToken(Te)&&oe.push({stop:{type:16,number:Te.number*100,flags:Te.flags},color:ye})}}}}),ce===1?{angle:(ne+deg(180))%deg(360),stops:oe,type:ce}:{size:Ae,shape:ue,stops:oe,position:pe,type:ce}},CLOSEST_SIDE="closest-side",FARTHEST_SIDE="farthest-side",CLOSEST_CORNER="closest-corner",FARTHEST_CORNER="farthest-corner",CIRCLE="circle",ELLIPSE="ellipse",COVER="cover",CONTAIN="contain",radialGradient=function(K,J){var ne=0,oe=3,ce=[],ue=[];return parseFunctionArgs(J).forEach(function(Ae,pe){var xe=!0;if(pe===0){var me=!1;xe=Ae.reduce(function(ye,Se){if(me)if(isIdentToken(Se))switch(Se.value){case"center":return ue.push(FIFTY_PERCENT),ye;case"top":case"left":return ue.push(ZERO_LENGTH),ye;case"right":case"bottom":return ue.push(HUNDRED_PERCENT),ye}else(isLengthPercentage(Se)||isLength$3(Se))&&ue.push(Se);else if(isIdentToken(Se))switch(Se.value){case CIRCLE:return ne=0,!1;case ELLIPSE:return ne=1,!1;case"at":return me=!0,!1;case CLOSEST_SIDE:return oe=0,!1;case COVER:case FARTHEST_SIDE:return oe=1,!1;case CONTAIN:case CLOSEST_CORNER:return oe=2,!1;case FARTHEST_CORNER:return oe=3,!1}else if(isLength$3(Se)||isLengthPercentage(Se))return Array.isArray(oe)||(oe=[]),oe.push(Se),!1;return ye},xe)}if(xe){var ge=parseColorStop(K,Ae);ce.push(ge)}}),{size:oe,shape:ne,stops:ce,position:ue,type:2}},prefixRadialGradient=function(K,J){var ne=0,oe=3,ce=[],ue=[];return parseFunctionArgs(J).forEach(function(Ae,pe){var xe=!0;if(pe===0?xe=Ae.reduce(function(ge,ye){if(isIdentToken(ye))switch(ye.value){case"center":return ue.push(FIFTY_PERCENT),!1;case"top":case"left":return ue.push(ZERO_LENGTH),!1;case"right":case"bottom":return ue.push(HUNDRED_PERCENT),!1}else if(isLengthPercentage(ye)||isLength$3(ye))return ue.push(ye),!1;return ge},xe):pe===1&&(xe=Ae.reduce(function(ge,ye){if(isIdentToken(ye))switch(ye.value){case CIRCLE:return ne=0,!1;case ELLIPSE:return ne=1,!1;case CONTAIN:case CLOSEST_SIDE:return oe=0,!1;case FARTHEST_SIDE:return oe=1,!1;case CLOSEST_CORNER:return oe=2,!1;case COVER:case FARTHEST_CORNER:return oe=3,!1}else if(isLength$3(ye)||isLengthPercentage(ye))return Array.isArray(oe)||(oe=[]),oe.push(ye),!1;return ge},xe)),xe){var me=parseColorStop(K,Ae);ce.push(me)}}),{size:oe,shape:ne,stops:ce,position:ue,type:2}},isLinearGradient=function(K){return K.type===1},isRadialGradient=function(K){return K.type===2},image={name:"image",parse:function(K,J){if(J.type===22){var ne={url:J.value,type:0};return K.cache.addImage(J.value),ne}if(J.type===18){var oe=SUPPORTED_IMAGE_FUNCTIONS[J.name];if(typeof oe>"u")throw new Error('Attempting to parse an unsupported image function "'+J.name+'"');return oe(K,J.values)}throw new Error("Unsupported image type "+J.type)}};function isSupportedImage(K){return!(K.type===20&&K.value==="none")&&(K.type!==18||!!SUPPORTED_IMAGE_FUNCTIONS[K.name])}var SUPPORTED_IMAGE_FUNCTIONS={"linear-gradient":linearGradient,"-moz-linear-gradient":prefixLinearGradient,"-ms-linear-gradient":prefixLinearGradient,"-o-linear-gradient":prefixLinearGradient,"-webkit-linear-gradient":prefixLinearGradient,"radial-gradient":radialGradient,"-moz-radial-gradient":prefixRadialGradient,"-ms-radial-gradient":prefixRadialGradient,"-o-radial-gradient":prefixRadialGradient,"-webkit-radial-gradient":prefixRadialGradient,"-webkit-gradient":webkitGradient},backgroundImage={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(K,J){if(J.length===0)return[];var ne=J[0];return ne.type===20&&ne.value==="none"?[]:J.filter(function(oe){return nonFunctionArgSeparator(oe)&&isSupportedImage(oe)}).map(function(oe){return image.parse(K,oe)})}},backgroundOrigin={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(K,J){return J.map(function(ne){if(isIdentToken(ne))switch(ne.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundPosition={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(K,J){return parseFunctionArgs(J).map(function(ne){return ne.filter(isLengthPercentage)}).map(parseLengthPercentageTuple)}},backgroundRepeat={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(K,J){return parseFunctionArgs(J).map(function(ne){return ne.filter(isIdentToken).map(function(oe){return oe.value}).join(" ")}).map(parseBackgroundRepeat)}},parseBackgroundRepeat=function(K){switch(K){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},BACKGROUND_SIZE;(function(K){K.AUTO="auto",K.CONTAIN="contain",K.COVER="cover"})(BACKGROUND_SIZE||(BACKGROUND_SIZE={}));var backgroundSize={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(K,J){return parseFunctionArgs(J).map(function(ne){return ne.filter(isBackgroundSizeInfoToken)})}},isBackgroundSizeInfoToken=function(K){return isIdentToken(K)||isLengthPercentage(K)},borderColorForSide=function(K){return{name:"border-"+K+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},borderTopColor=borderColorForSide("top"),borderRightColor=borderColorForSide("right"),borderBottomColor=borderColorForSide("bottom"),borderLeftColor=borderColorForSide("left"),borderRadiusForSide=function(K){return{name:"border-radius-"+K,initialValue:"0 0",prefix:!1,type:1,parse:function(J,ne){return parseLengthPercentageTuple(ne.filter(isLengthPercentage))}}},borderTopLeftRadius=borderRadiusForSide("top-left"),borderTopRightRadius=borderRadiusForSide("top-right"),borderBottomRightRadius=borderRadiusForSide("bottom-right"),borderBottomLeftRadius=borderRadiusForSide("bottom-left"),borderStyleForSide=function(K){return{name:"border-"+K+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(J,ne){switch(ne){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},borderTopStyle=borderStyleForSide("top"),borderRightStyle=borderStyleForSide("right"),borderBottomStyle=borderStyleForSide("bottom"),borderLeftStyle=borderStyleForSide("left"),borderWidthForSide=function(K){return{name:"border-"+K+"-width",initialValue:"0",type:0,prefix:!1,parse:function(J,ne){return isDimensionToken(ne)?ne.number:0}}},borderTopWidth=borderWidthForSide("top"),borderRightWidth=borderWidthForSide("right"),borderBottomWidth=borderWidthForSide("bottom"),borderLeftWidth=borderWidthForSide("left"),color={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},direction={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(K,J){switch(J){case"rtl":return 1;case"ltr":default:return 0}}},display={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(K,J){return J.filter(isIdentToken).reduce(function(ne,oe){return ne|parseDisplayValue(oe.value)},0)}},parseDisplayValue=function(K){switch(K){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},float={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(K,J){switch(J){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},letterSpacing={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(K,J){return J.type===20&&J.value==="normal"?0:J.type===17||J.type===15?J.number:0}},LINE_BREAK;(function(K){K.NORMAL="normal",K.STRICT="strict"})(LINE_BREAK||(LINE_BREAK={}));var lineBreak={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(K,J){switch(J){case"strict":return LINE_BREAK.STRICT;case"normal":default:return LINE_BREAK.NORMAL}}},lineHeight={name:"line-height",initialValue:"normal",prefix:!1,type:4},computeLineHeight=function(K,J){return isIdentToken(K)&&K.value==="normal"?1.2*J:K.type===17?J*K.number:isLengthPercentage(K)?getAbsoluteValue(K,J):J},listStyleImage={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(K,J){return J.type===20&&J.value==="none"?null:image.parse(K,J)}},listStylePosition={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(K,J){switch(J){case"inside":return 0;case"outside":default:return 1}}},listStyleType={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(K,J){switch(J){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},marginForSide=function(K){return{name:"margin-"+K,initialValue:"0",prefix:!1,type:4}},marginTop=marginForSide("top"),marginRight=marginForSide("right"),marginBottom=marginForSide("bottom"),marginLeft=marginForSide("left"),overflow={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(K,J){return J.filter(isIdentToken).map(function(ne){switch(ne.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},overflowWrap={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(K,J){switch(J){case"break-word":return"break-word";case"normal":default:return"normal"}}},paddingForSide=function(K){return{name:"padding-"+K,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},paddingTop=paddingForSide("top"),paddingRight=paddingForSide("right"),paddingBottom=paddingForSide("bottom"),paddingLeft=paddingForSide("left"),textAlign={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(K,J){switch(J){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},position={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(K,J){switch(J){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},textShadow={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(K,J){return J.length===1&&isIdentWithValue(J[0],"none")?[]:parseFunctionArgs(J).map(function(ne){for(var oe={color:COLORS.TRANSPARENT,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH},ce=0,ue=0;ue<ne.length;ue++){var Ae=ne[ue];isLength$3(Ae)?(ce===0?oe.offsetX=Ae:ce===1?oe.offsetY=Ae:oe.blur=Ae,ce++):oe.color=color$1.parse(K,Ae)}return oe})}},textTransform={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(K,J){switch(J){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},transform$1={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(K,J){if(J.type===20&&J.value==="none")return null;if(J.type===18){var ne=SUPPORTED_TRANSFORM_FUNCTIONS[J.name];if(typeof ne>"u")throw new Error('Attempting to parse an unsupported transform function "'+J.name+'"');return ne(J.values)}return null}},matrix=function(K){var J=K.filter(function(ne){return ne.type===17}).map(function(ne){return ne.number});return J.length===6?J:null},matrix3d=function(K){var J=K.filter(function(xe){return xe.type===17}).map(function(xe){return xe.number}),ne=J[0],oe=J[1];J[2],J[3];var ce=J[4],ue=J[5];J[6],J[7],J[8],J[9],J[10],J[11];var Ae=J[12],pe=J[13];return J[14],J[15],J.length===16?[ne,oe,ce,ue,Ae,pe]:null},SUPPORTED_TRANSFORM_FUNCTIONS={matrix,matrix3d},DEFAULT_VALUE={type:16,number:50,flags:FLAG_INTEGER},DEFAULT=[DEFAULT_VALUE,DEFAULT_VALUE],transformOrigin={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(K,J){var ne=J.filter(isLengthPercentage);return ne.length!==2?DEFAULT:[ne[0],ne[1]]}},visibility={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(K,J){switch(J){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},WORD_BREAK;(function(K){K.NORMAL="normal",K.BREAK_ALL="break-all",K.KEEP_ALL="keep-all"})(WORD_BREAK||(WORD_BREAK={}));var wordBreak={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(K,J){switch(J){case"break-all":return WORD_BREAK.BREAK_ALL;case"keep-all":return WORD_BREAK.KEEP_ALL;case"normal":default:return WORD_BREAK.NORMAL}}},zIndex={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(K,J){if(J.type===20)return{auto:!0,order:0};if(isNumberToken(J))return{auto:!1,order:J.number};throw new Error("Invalid z-index number parsed")}},time={name:"time",parse:function(K,J){if(J.type===15)switch(J.unit.toLowerCase()){case"s":return 1e3*J.number;case"ms":return J.number}throw new Error("Unsupported time type")}},opacity={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(K,J){return isNumberToken(J)?J.number:1}},textDecorationColor={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},textDecorationLine={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(K,J){return J.filter(isIdentToken).map(function(ne){switch(ne.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(ne){return ne!==0})}},fontFamily={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(K,J){var ne=[],oe=[];return J.forEach(function(ce){switch(ce.type){case 20:case 0:ne.push(ce.value);break;case 17:ne.push(ce.number.toString());break;case 4:oe.push(ne.join(" ")),ne.length=0;break}}),ne.length&&oe.push(ne.join(" ")),oe.map(function(ce){return ce.indexOf(" ")===-1?ce:"'"+ce+"'"})}},fontSize={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fontWeight={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(K,J){if(isNumberToken(J))return J.number;if(isIdentToken(J))switch(J.value){case"bold":return 700;case"normal":default:return 400}return 400}},fontVariant={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(K,J){return J.filter(isIdentToken).map(function(ne){return ne.value})}},fontStyle={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(K,J){switch(J){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},contains=function(K,J){return(K&J)!==0},content$2={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(K,J){if(J.length===0)return[];var ne=J[0];return ne.type===20&&ne.value==="none"?[]:J}},counterIncrement={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(K,J){if(J.length===0)return null;var ne=J[0];if(ne.type===20&&ne.value==="none")return null;for(var oe=[],ce=J.filter(nonWhiteSpace),ue=0;ue<ce.length;ue++){var Ae=ce[ue],pe=ce[ue+1];if(Ae.type===20){var xe=pe&&isNumberToken(pe)?pe.number:1;oe.push({counter:Ae.value,increment:xe})}}return oe}},counterReset={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(K,J){if(J.length===0)return[];for(var ne=[],oe=J.filter(nonWhiteSpace),ce=0;ce<oe.length;ce++){var ue=oe[ce],Ae=oe[ce+1];if(isIdentToken(ue)&&ue.value!=="none"){var pe=Ae&&isNumberToken(Ae)?Ae.number:0;ne.push({counter:ue.value,reset:pe})}}return ne}},duration={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(K,J){return J.filter(isDimensionToken).map(function(ne){return time.parse(K,ne)})}},quotes={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(K,J){if(J.length===0)return null;var ne=J[0];if(ne.type===20&&ne.value==="none")return null;var oe=[],ce=J.filter(isStringToken);if(ce.length%2!==0)return null;for(var ue=0;ue<ce.length;ue+=2){var Ae=ce[ue].value,pe=ce[ue+1].value;oe.push({open:Ae,close:pe})}return oe}},getQuote=function(K,J,ne){if(!K)return"";var oe=K[Math.min(J,K.length-1)];return oe?ne?oe.open:oe.close:""},boxShadow={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(K,J){return J.length===1&&isIdentWithValue(J[0],"none")?[]:parseFunctionArgs(J).map(function(ne){for(var oe={color:255,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH,spread:ZERO_LENGTH,inset:!1},ce=0,ue=0;ue<ne.length;ue++){var Ae=ne[ue];isIdentWithValue(Ae,"inset")?oe.inset=!0:isLength$3(Ae)?(ce===0?oe.offsetX=Ae:ce===1?oe.offsetY=Ae:ce===2?oe.blur=Ae:oe.spread=Ae,ce++):oe.color=color$1.parse(K,Ae)}return oe})}},paintOrder={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(K,J){var ne=[0,1,2],oe=[];return J.filter(isIdentToken).forEach(function(ce){switch(ce.value){case"stroke":oe.push(1);break;case"fill":oe.push(0);break;case"markers":oe.push(2);break}}),ne.forEach(function(ce){oe.indexOf(ce)===-1&&oe.push(ce)}),oe}},webkitTextStrokeColor={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},webkitTextStrokeWidth={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(K,J){return isDimensionToken(J)?J.number:0}},CSSParsedDeclaration=function(){function K(J,ne){var oe,ce;this.animationDuration=parse(J,duration,ne.animationDuration),this.backgroundClip=parse(J,backgroundClip,ne.backgroundClip),this.backgroundColor=parse(J,backgroundColor,ne.backgroundColor),this.backgroundImage=parse(J,backgroundImage,ne.backgroundImage),this.backgroundOrigin=parse(J,backgroundOrigin,ne.backgroundOrigin),this.backgroundPosition=parse(J,backgroundPosition,ne.backgroundPosition),this.backgroundRepeat=parse(J,backgroundRepeat,ne.backgroundRepeat),this.backgroundSize=parse(J,backgroundSize,ne.backgroundSize),this.borderTopColor=parse(J,borderTopColor,ne.borderTopColor),this.borderRightColor=parse(J,borderRightColor,ne.borderRightColor),this.borderBottomColor=parse(J,borderBottomColor,ne.borderBottomColor),this.borderLeftColor=parse(J,borderLeftColor,ne.borderLeftColor),this.borderTopLeftRadius=parse(J,borderTopLeftRadius,ne.borderTopLeftRadius),this.borderTopRightRadius=parse(J,borderTopRightRadius,ne.borderTopRightRadius),this.borderBottomRightRadius=parse(J,borderBottomRightRadius,ne.borderBottomRightRadius),this.borderBottomLeftRadius=parse(J,borderBottomLeftRadius,ne.borderBottomLeftRadius),this.borderTopStyle=parse(J,borderTopStyle,ne.borderTopStyle),this.borderRightStyle=parse(J,borderRightStyle,ne.borderRightStyle),this.borderBottomStyle=parse(J,borderBottomStyle,ne.borderBottomStyle),this.borderLeftStyle=parse(J,borderLeftStyle,ne.borderLeftStyle),this.borderTopWidth=parse(J,borderTopWidth,ne.borderTopWidth),this.borderRightWidth=parse(J,borderRightWidth,ne.borderRightWidth),this.borderBottomWidth=parse(J,borderBottomWidth,ne.borderBottomWidth),this.borderLeftWidth=parse(J,borderLeftWidth,ne.borderLeftWidth),this.boxShadow=parse(J,boxShadow,ne.boxShadow),this.color=parse(J,color,ne.color),this.direction=parse(J,direction,ne.direction),this.display=parse(J,display,ne.display),this.float=parse(J,float,ne.cssFloat),this.fontFamily=parse(J,fontFamily,ne.fontFamily),this.fontSize=parse(J,fontSize,ne.fontSize),this.fontStyle=parse(J,fontStyle,ne.fontStyle),this.fontVariant=parse(J,fontVariant,ne.fontVariant),this.fontWeight=parse(J,fontWeight,ne.fontWeight),this.letterSpacing=parse(J,letterSpacing,ne.letterSpacing),this.lineBreak=parse(J,lineBreak,ne.lineBreak),this.lineHeight=parse(J,lineHeight,ne.lineHeight),this.listStyleImage=parse(J,listStyleImage,ne.listStyleImage),this.listStylePosition=parse(J,listStylePosition,ne.listStylePosition),this.listStyleType=parse(J,listStyleType,ne.listStyleType),this.marginTop=parse(J,marginTop,ne.marginTop),this.marginRight=parse(J,marginRight,ne.marginRight),this.marginBottom=parse(J,marginBottom,ne.marginBottom),this.marginLeft=parse(J,marginLeft,ne.marginLeft),this.opacity=parse(J,opacity,ne.opacity);var ue=parse(J,overflow,ne.overflow);this.overflowX=ue[0],this.overflowY=ue[ue.length>1?1:0],this.overflowWrap=parse(J,overflowWrap,ne.overflowWrap),this.paddingTop=parse(J,paddingTop,ne.paddingTop),this.paddingRight=parse(J,paddingRight,ne.paddingRight),this.paddingBottom=parse(J,paddingBottom,ne.paddingBottom),this.paddingLeft=parse(J,paddingLeft,ne.paddingLeft),this.paintOrder=parse(J,paintOrder,ne.paintOrder),this.position=parse(J,position,ne.position),this.textAlign=parse(J,textAlign,ne.textAlign),this.textDecorationColor=parse(J,textDecorationColor,(oe=ne.textDecorationColor)!==null&&oe!==void 0?oe:ne.color),this.textDecorationLine=parse(J,textDecorationLine,(ce=ne.textDecorationLine)!==null&&ce!==void 0?ce:ne.textDecoration),this.textShadow=parse(J,textShadow,ne.textShadow),this.textTransform=parse(J,textTransform,ne.textTransform),this.transform=parse(J,transform$1,ne.transform),this.transformOrigin=parse(J,transformOrigin,ne.transformOrigin),this.visibility=parse(J,visibility,ne.visibility),this.webkitTextStrokeColor=parse(J,webkitTextStrokeColor,ne.webkitTextStrokeColor),this.webkitTextStrokeWidth=parse(J,webkitTextStrokeWidth,ne.webkitTextStrokeWidth),this.wordBreak=parse(J,wordBreak,ne.wordBreak),this.zIndex=parse(J,zIndex,ne.zIndex)}return K.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},K.prototype.isTransparent=function(){return isTransparent(this.backgroundColor)},K.prototype.isTransformed=function(){return this.transform!==null},K.prototype.isPositioned=function(){return this.position!==0},K.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},K.prototype.isFloating=function(){return this.float!==0},K.prototype.isInlineLevel=function(){return contains(this.display,4)||contains(this.display,33554432)||contains(this.display,268435456)||contains(this.display,536870912)||contains(this.display,67108864)||contains(this.display,134217728)},K}(),CSSParsedPseudoDeclaration=function(){function K(J,ne){this.content=parse(J,content$2,ne.content),this.quotes=parse(J,quotes,ne.quotes)}return K}(),CSSParsedCounterDeclaration=function(){function K(J,ne){this.counterIncrement=parse(J,counterIncrement,ne.counterIncrement),this.counterReset=parse(J,counterReset,ne.counterReset)}return K}(),parse=function(K,J,ne){var oe=new Tokenizer,ce=ne!==null&&typeof ne<"u"?ne.toString():J.initialValue;oe.write(ce);var ue=new Parser(oe.read());switch(J.type){case 2:var Ae=ue.parseComponentValue();return J.parse(K,isIdentToken(Ae)?Ae.value:J.initialValue);case 0:return J.parse(K,ue.parseComponentValue());case 1:return J.parse(K,ue.parseComponentValues());case 4:return ue.parseComponentValue();case 3:switch(J.format){case"angle":return angle.parse(K,ue.parseComponentValue());case"color":return color$1.parse(K,ue.parseComponentValue());case"image":return image.parse(K,ue.parseComponentValue());case"length":var pe=ue.parseComponentValue();return isLength$3(pe)?pe:ZERO_LENGTH;case"length-percentage":var xe=ue.parseComponentValue();return isLengthPercentage(xe)?xe:ZERO_LENGTH;case"time":return time.parse(K,ue.parseComponentValue())}break}},elementDebuggerAttribute="data-html2canvas-debug",getElementDebugType=function(K){var J=K.getAttribute(elementDebuggerAttribute);switch(J){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},isDebugging=function(K,J){var ne=getElementDebugType(K);return ne===1||J===ne},ElementContainer=function(){function K(J,ne){if(this.context=J,this.textNodes=[],this.elements=[],this.flags=0,isDebugging(ne,3))debugger;this.styles=new CSSParsedDeclaration(J,window.getComputedStyle(ne,null)),isHTMLElementNode(ne)&&(this.styles.animationDuration.some(function(oe){return oe>0})&&(ne.style.animationDuration="0s"),this.styles.transform!==null&&(ne.style.transform="none")),this.bounds=parseBounds(this.context,ne),isDebugging(ne,4)&&(this.flags|=16)}return K}(),base64="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1=0;i$1<chars$1.length;i$1++)lookup$1[chars$1.charCodeAt(i$1)]=i$1;var decode=function(K){var J=K.length*.75,ne=K.length,oe,ce=0,ue,Ae,pe,xe;K[K.length-1]==="="&&(J--,K[K.length-2]==="="&&J--);var me=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(J):new Array(J),ge=Array.isArray(me)?me:new Uint8Array(me);for(oe=0;oe<ne;oe+=4)ue=lookup$1[K.charCodeAt(oe)],Ae=lookup$1[K.charCodeAt(oe+1)],pe=lookup$1[K.charCodeAt(oe+2)],xe=lookup$1[K.charCodeAt(oe+3)],ge[ce++]=ue<<2|Ae>>4,ge[ce++]=(Ae&15)<<4|pe>>2,ge[ce++]=(pe&3)<<6|xe&63;return me},polyUint16Array=function(K){for(var J=K.length,ne=[],oe=0;oe<J;oe+=2)ne.push(K[oe+1]<<8|K[oe]);return ne},polyUint32Array=function(K){for(var J=K.length,ne=[],oe=0;oe<J;oe+=4)ne.push(K[oe+3]<<24|K[oe+2]<<16|K[oe+1]<<8|K[oe]);return ne},UTRIE2_SHIFT_2=5,UTRIE2_SHIFT_1=11,UTRIE2_INDEX_SHIFT=2,UTRIE2_SHIFT_1_2=UTRIE2_SHIFT_1-UTRIE2_SHIFT_2,UTRIE2_LSCP_INDEX_2_OFFSET=65536>>UTRIE2_SHIFT_2,UTRIE2_DATA_BLOCK_LENGTH=1<<UTRIE2_SHIFT_2,UTRIE2_DATA_MASK=UTRIE2_DATA_BLOCK_LENGTH-1,UTRIE2_LSCP_INDEX_2_LENGTH=1024>>UTRIE2_SHIFT_2,UTRIE2_INDEX_2_BMP_LENGTH=UTRIE2_LSCP_INDEX_2_OFFSET+UTRIE2_LSCP_INDEX_2_LENGTH,UTRIE2_UTF8_2B_INDEX_2_OFFSET=UTRIE2_INDEX_2_BMP_LENGTH,UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,UTRIE2_INDEX_1_OFFSET=UTRIE2_UTF8_2B_INDEX_2_OFFSET+UTRIE2_UTF8_2B_INDEX_2_LENGTH,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>UTRIE2_SHIFT_1,UTRIE2_INDEX_2_BLOCK_LENGTH=1<<UTRIE2_SHIFT_1_2,UTRIE2_INDEX_2_MASK=UTRIE2_INDEX_2_BLOCK_LENGTH-1,slice16=function(K,J,ne){return K.slice?K.slice(J,ne):new Uint16Array(Array.prototype.slice.call(K,J,ne))},slice32=function(K,J,ne){return K.slice?K.slice(J,ne):new Uint32Array(Array.prototype.slice.call(K,J,ne))},createTrieFromBase64=function(K,J){var ne=decode(K),oe=Array.isArray(ne)?polyUint32Array(ne):new Uint32Array(ne),ce=Array.isArray(ne)?polyUint16Array(ne):new Uint16Array(ne),ue=24,Ae=slice16(ce,ue/2,oe[4]/2),pe=oe[5]===2?slice16(ce,(ue+oe[4])/2):slice32(oe,Math.ceil((ue+oe[4])/4));return new Trie(oe[0],oe[1],oe[2],oe[3],Ae,pe)},Trie=function(){function K(J,ne,oe,ce,ue,Ae){this.initialValue=J,this.errorValue=ne,this.highStart=oe,this.highValueIndex=ce,this.index=ue,this.data=Ae}return K.prototype.get=function(J){var ne;if(J>=0){if(J<55296||J>56319&&J<=65535)return ne=this.index[J>>UTRIE2_SHIFT_2],ne=(ne<<UTRIE2_INDEX_SHIFT)+(J&UTRIE2_DATA_MASK),this.data[ne];if(J<=65535)return ne=this.index[UTRIE2_LSCP_INDEX_2_OFFSET+(J-55296>>UTRIE2_SHIFT_2)],ne=(ne<<UTRIE2_INDEX_SHIFT)+(J&UTRIE2_DATA_MASK),this.data[ne];if(J<this.highStart)return ne=UTRIE2_INDEX_1_OFFSET-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH+(J>>UTRIE2_SHIFT_1),ne=this.index[ne],ne+=J>>UTRIE2_SHIFT_2&UTRIE2_INDEX_2_MASK,ne=this.index[ne],ne=(ne<<UTRIE2_INDEX_SHIFT)+(J&UTRIE2_DATA_MASK),this.data[ne];if(J<=1114111)return this.data[this.highValueIndex]}return this.errorValue},K}(),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$4=0;i$4<chars.length;i$4++)lookup[chars.charCodeAt(i$4)]=i$4;var Prepend=1,CR=2,LF=3,Control=4,Extend=5,SpacingMark=7,L$1=8,V=9,T=10,LV=11,LVT=12,ZWJ=13,Extended_Pictographic=14,RI=15,toCodePoints=function(K){for(var J=[],ne=0,oe=K.length;ne<oe;){var ce=K.charCodeAt(ne++);if(ce>=55296&&ce<=56319&&ne<oe){var ue=K.charCodeAt(ne++);(ue&64512)===56320?J.push(((ce&1023)<<10)+(ue&1023)+65536):(J.push(ce),ne--)}else J.push(ce)}return J},fromCodePoint=function(){for(var K=[],J=0;J<arguments.length;J++)K[J]=arguments[J];if(String.fromCodePoint)return String.fromCodePoint.apply(String,K);var ne=K.length;if(!ne)return"";for(var oe=[],ce=-1,ue="";++ce<ne;){var Ae=K[ce];Ae<=65535?oe.push(Ae):(Ae-=65536,oe.push((Ae>>10)+55296,Ae%1024+56320)),(ce+1===ne||oe.length>16384)&&(ue+=String.fromCharCode.apply(String,oe),oe.length=0)}return ue},UnicodeTrie=createTrieFromBase64(base64),BREAK_NOT_ALLOWED="",BREAK_ALLOWED="",codePointToClass=function(K){return UnicodeTrie.get(K)},_graphemeBreakAtIndex=function(K,J,ne){var oe=ne-2,ce=J[oe],ue=J[ne-1],Ae=J[ne];if(ue===CR&&Ae===LF)return BREAK_NOT_ALLOWED;if(ue===CR||ue===LF||ue===Control||Ae===CR||Ae===LF||Ae===Control)return BREAK_ALLOWED;if(ue===L$1&&[L$1,V,LV,LVT].indexOf(Ae)!==-1||(ue===LV||ue===V)&&(Ae===V||Ae===T)||(ue===LVT||ue===T)&&Ae===T||Ae===ZWJ||Ae===Extend||Ae===SpacingMark||ue===Prepend)return BREAK_NOT_ALLOWED;if(ue===ZWJ&&Ae===Extended_Pictographic){for(;ce===Extend;)ce=J[--oe];if(ce===Extended_Pictographic)return BREAK_NOT_ALLOWED}if(ue===RI&&Ae===RI){for(var pe=0;ce===RI;)pe++,ce=J[--oe];if(pe%2===0)return BREAK_NOT_ALLOWED}return BREAK_ALLOWED},GraphemeBreaker=function(K){var J=toCodePoints(K),ne=J.length,oe=0,ce=0,ue=J.map(codePointToClass);return{next:function(){if(oe>=ne)return{done:!0,value:null};for(var Ae=BREAK_NOT_ALLOWED;oe<ne&&(Ae=_graphemeBreakAtIndex(J,ue,++oe))===BREAK_NOT_ALLOWED;);if(Ae!==BREAK_NOT_ALLOWED||oe===ne){var pe=fromCodePoint.apply(null,J.slice(ce,oe));return ce=oe,{value:pe,done:!1}}return{done:!0,value:null}}}},splitGraphemes=function(K){for(var J=GraphemeBreaker(K),ne=[],oe;!(oe=J.next()).done;)oe.value&&ne.push(oe.value.slice());return ne},testRangeBounds=function(K){var J=123;if(K.createRange){var ne=K.createRange();if(ne.getBoundingClientRect){var oe=K.createElement("boundtest");oe.style.height=J+"px",oe.style.display="block",K.body.appendChild(oe),ne.selectNode(oe);var ce=ne.getBoundingClientRect(),ue=Math.round(ce.height);if(K.body.removeChild(oe),ue===J)return!0}}return!1},testIOSLineBreak=function(K){var J=K.createElement("boundtest");J.style.width="50px",J.style.display="block",J.style.fontSize="12px",J.style.letterSpacing="0px",J.style.wordSpacing="0px",K.body.appendChild(J);var ne=K.createRange();J.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var oe=J.firstChild,ce=toCodePoints$1(oe.data).map(function(xe){return fromCodePoint$1(xe)}),ue=0,Ae={},pe=ce.every(function(xe,me){ne.setStart(oe,ue),ne.setEnd(oe,ue+xe.length);var ge=ne.getBoundingClientRect();ue+=xe.length;var ye=ge.x>Ae.x||ge.y>Ae.y;return Ae=ge,me===0?!0:ye});return K.body.removeChild(J),pe},testCORS=function(){return typeof new Image().crossOrigin<"u"},testResponseType=function(){return typeof new XMLHttpRequest().responseType=="string"},testSVG=function(K){var J=new Image,ne=K.createElement("canvas"),oe=ne.getContext("2d");if(!oe)return!1;J.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{oe.drawImage(J,0,0),ne.toDataURL()}catch{return!1}return!0},isGreenPixel=function(K){return K[0]===0&&K[1]===255&&K[2]===0&&K[3]===255},testForeignObject=function(K){var J=K.createElement("canvas"),ne=100;J.width=ne,J.height=ne;var oe=J.getContext("2d");if(!oe)return Promise.reject(!1);oe.fillStyle="rgb(0, 255, 0)",oe.fillRect(0,0,ne,ne);var ce=new Image,ue=J.toDataURL();ce.src=ue;var Ae=createForeignObjectSVG(ne,ne,0,0,ce);return oe.fillStyle="red",oe.fillRect(0,0,ne,ne),loadSerializedSVG$1(Ae).then(function(pe){oe.drawImage(pe,0,0);var xe=oe.getImageData(0,0,ne,ne).data;oe.fillStyle="red",oe.fillRect(0,0,ne,ne);var me=K.createElement("div");return me.style.backgroundImage="url("+ue+")",me.style.height=ne+"px",isGreenPixel(xe)?loadSerializedSVG$1(createForeignObjectSVG(ne,ne,0,0,me)):Promise.reject(!1)}).then(function(pe){return oe.drawImage(pe,0,0),isGreenPixel(oe.getImageData(0,0,ne,ne).data)}).catch(function(){return!1})},createForeignObjectSVG=function(K,J,ne,oe,ce){var ue="http://www.w3.org/2000/svg",Ae=document.createElementNS(ue,"svg"),pe=document.createElementNS(ue,"foreignObject");return Ae.setAttributeNS(null,"width",K.toString()),Ae.setAttributeNS(null,"height",J.toString()),pe.setAttributeNS(null,"width","100%"),pe.setAttributeNS(null,"height","100%"),pe.setAttributeNS(null,"x",ne.toString()),pe.setAttributeNS(null,"y",oe.toString()),pe.setAttributeNS(null,"externalResourcesRequired","true"),Ae.appendChild(pe),pe.appendChild(ce),Ae},loadSerializedSVG$1=function(K){return new Promise(function(J,ne){var oe=new Image;oe.onload=function(){return J(oe)},oe.onerror=ne,oe.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(K))})},FEATURES={get SUPPORT_RANGE_BOUNDS(){var K=testRangeBounds(document);return Object.defineProperty(FEATURES,"SUPPORT_RANGE_BOUNDS",{value:K}),K},get SUPPORT_WORD_BREAKING(){var K=FEATURES.SUPPORT_RANGE_BOUNDS&&testIOSLineBreak(document);return Object.defineProperty(FEATURES,"SUPPORT_WORD_BREAKING",{value:K}),K},get SUPPORT_SVG_DRAWING(){var K=testSVG(document);return Object.defineProperty(FEATURES,"SUPPORT_SVG_DRAWING",{value:K}),K},get SUPPORT_FOREIGNOBJECT_DRAWING(){var K=typeof Array.from=="function"&&typeof window.fetch=="function"?testForeignObject(document):Promise.resolve(!1);return Object.defineProperty(FEATURES,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:K}),K},get SUPPORT_CORS_IMAGES(){var K=testCORS();return Object.defineProperty(FEATURES,"SUPPORT_CORS_IMAGES",{value:K}),K},get SUPPORT_RESPONSE_TYPE(){var K=testResponseType();return Object.defineProperty(FEATURES,"SUPPORT_RESPONSE_TYPE",{value:K}),K},get SUPPORT_CORS_XHR(){var K="withCredentials"in new XMLHttpRequest;return Object.defineProperty(FEATURES,"SUPPORT_CORS_XHR",{value:K}),K},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var K=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(FEATURES,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:K}),K}},TextBounds=function(){function K(J,ne){this.text=J,this.bounds=ne}return K}(),parseTextBounds=function(K,J,ne,oe){var ce=breakText(J,ne),ue=[],Ae=0;return ce.forEach(function(pe){if(ne.textDecorationLine.length||pe.trim().length>0)if(FEATURES.SUPPORT_RANGE_BOUNDS){var xe=createRange(oe,Ae,pe.length).getClientRects();if(xe.length>1){var me=segmentGraphemes(pe),ge=0;me.forEach(function(Se){ue.push(new TextBounds(Se,Bounds.fromDOMRectList(K,createRange(oe,ge+Ae,Se.length).getClientRects()))),ge+=Se.length})}else ue.push(new TextBounds(pe,Bounds.fromDOMRectList(K,xe)))}else{var ye=oe.splitText(pe.length);ue.push(new TextBounds(pe,getWrapperBounds(K,oe))),oe=ye}else FEATURES.SUPPORT_RANGE_BOUNDS||(oe=oe.splitText(pe.length));Ae+=pe.length}),ue},getWrapperBounds=function(K,J){var ne=J.ownerDocument;if(ne){var oe=ne.createElement("html2canvaswrapper");oe.appendChild(J.cloneNode(!0));var ce=J.parentNode;if(ce){ce.replaceChild(oe,J);var ue=parseBounds(K,oe);return oe.firstChild&&ce.replaceChild(oe.firstChild,oe),ue}}return Bounds.EMPTY},createRange=function(K,J,ne){var oe=K.ownerDocument;if(!oe)throw new Error("Node has no owner document");var ce=oe.createRange();return ce.setStart(K,J),ce.setEnd(K,J+ne),ce},segmentGraphemes=function(K){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var J=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(J.segment(K)).map(function(ne){return ne.segment})}return splitGraphemes(K)},segmentWords=function(K,J){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var ne=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(ne.segment(K)).map(function(oe){return oe.segment})}return breakWords(K,J)},breakText=function(K,J){return J.letterSpacing!==0?segmentGraphemes(K):segmentWords(K,J)},wordSeparators=[32,160,4961,65792,65793,4153,4241],breakWords=function(K,J){for(var ne=LineBreaker(K,{lineBreak:J.lineBreak,wordBreak:J.overflowWrap==="break-word"?"break-word":J.wordBreak}),oe=[],ce,ue=function(){if(ce.value){var Ae=ce.value.slice(),pe=toCodePoints$1(Ae),xe="";pe.forEach(function(me){wordSeparators.indexOf(me)===-1?xe+=fromCodePoint$1(me):(xe.length&&oe.push(xe),oe.push(fromCodePoint$1(me)),xe="")}),xe.length&&oe.push(xe)}};!(ce=ne.next()).done;)ue();return oe},TextContainer=function(){function K(J,ne,oe){this.text=transform(ne.data,oe.textTransform),this.textBounds=parseTextBounds(J,this.text,oe,ne)}return K}(),transform=function(K,J){switch(J){case 1:return K.toLowerCase();case 3:return K.replace(CAPITALIZE,capitalize);case 2:return K.toUpperCase();default:return K}},CAPITALIZE=/(^|\s|:|-|\(|\))([a-z])/g,capitalize=function(K,J,ne){return K.length>0?J+ne.toUpperCase():K},ImageElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.src=oe.currentSrc||oe.src,ce.intrinsicWidth=oe.naturalWidth,ce.intrinsicHeight=oe.naturalHeight,ce.context.cache.addImage(ce.src),ce}return J}(ElementContainer),CanvasElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.canvas=oe,ce.intrinsicWidth=oe.width,ce.intrinsicHeight=oe.height,ce}return J}(ElementContainer),SVGElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this,ue=new XMLSerializer,Ae=parseBounds(ne,oe);return oe.setAttribute("width",Ae.width+"px"),oe.setAttribute("height",Ae.height+"px"),ce.svg="data:image/svg+xml,"+encodeURIComponent(ue.serializeToString(oe)),ce.intrinsicWidth=oe.width.baseVal.value,ce.intrinsicHeight=oe.height.baseVal.value,ce.context.cache.addImage(ce.svg),ce}return J}(ElementContainer),LIElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.value=oe.value,ce}return J}(ElementContainer),OLElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.start=oe.start,ce.reversed=typeof oe.reversed=="boolean"&&oe.reversed===!0,ce}return J}(ElementContainer),CHECKBOX_BORDER_RADIUS=[{type:15,flags:0,unit:"px",number:3}],RADIO_BORDER_RADIUS=[{type:16,flags:0,number:50}],reformatInputBounds=function(K){return K.width>K.height?new Bounds(K.left+(K.width-K.height)/2,K.top,K.height,K.height):K.width<K.height?new Bounds(K.left,K.top+(K.height-K.width)/2,K.width,K.width):K},getInputValue=function(K){var J=K.type===PASSWORD?new Array(K.value.length+1).join(""):K.value;return J.length===0?K.placeholder||"":J},CHECKBOX="checkbox",RADIO="radio",PASSWORD="password",INPUT_COLOR=707406591,InputElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;switch(ce.type=oe.type.toLowerCase(),ce.checked=oe.checked,ce.value=getInputValue(oe),(ce.type===CHECKBOX||ce.type===RADIO)&&(ce.styles.backgroundColor=3739148031,ce.styles.borderTopColor=ce.styles.borderRightColor=ce.styles.borderBottomColor=ce.styles.borderLeftColor=2779096575,ce.styles.borderTopWidth=ce.styles.borderRightWidth=ce.styles.borderBottomWidth=ce.styles.borderLeftWidth=1,ce.styles.borderTopStyle=ce.styles.borderRightStyle=ce.styles.borderBottomStyle=ce.styles.borderLeftStyle=1,ce.styles.backgroundClip=[0],ce.styles.backgroundOrigin=[0],ce.bounds=reformatInputBounds(ce.bounds)),ce.type){case CHECKBOX:ce.styles.borderTopRightRadius=ce.styles.borderTopLeftRadius=ce.styles.borderBottomRightRadius=ce.styles.borderBottomLeftRadius=CHECKBOX_BORDER_RADIUS;break;case RADIO:ce.styles.borderTopRightRadius=ce.styles.borderTopLeftRadius=ce.styles.borderBottomRightRadius=ce.styles.borderBottomLeftRadius=RADIO_BORDER_RADIUS;break}return ce}return J}(ElementContainer),SelectElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this,ue=oe.options[oe.selectedIndex||0];return ce.value=ue&&ue.text||"",ce}return J}(ElementContainer),TextareaElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.value=oe.value,ce}return J}(ElementContainer),IFrameElementContainer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;ce.src=oe.src,ce.width=parseInt(oe.width,10)||0,ce.height=parseInt(oe.height,10)||0,ce.backgroundColor=ce.styles.backgroundColor;try{if(oe.contentWindow&&oe.contentWindow.document&&oe.contentWindow.document.documentElement){ce.tree=parseTree(ne,oe.contentWindow.document.documentElement);var ue=oe.contentWindow.document.documentElement?parseColor(ne,getComputedStyle(oe.contentWindow.document.documentElement).backgroundColor):COLORS.TRANSPARENT,Ae=oe.contentWindow.document.body?parseColor(ne,getComputedStyle(oe.contentWindow.document.body).backgroundColor):COLORS.TRANSPARENT;ce.backgroundColor=isTransparent(ue)?isTransparent(Ae)?ce.styles.backgroundColor:Ae:ue}}catch{}return ce}return J}(ElementContainer),LIST_OWNERS=["OL","UL","MENU"],parseNodeTree=function(K,J,ne,oe){for(var ce=J.firstChild,ue=void 0;ce;ce=ue)if(ue=ce.nextSibling,isTextNode(ce)&&ce.data.trim().length>0)ne.textNodes.push(new TextContainer(K,ce,ne.styles));else if(isElementNode(ce))if(isSlotElement(ce)&&ce.assignedNodes)ce.assignedNodes().forEach(function(pe){return parseNodeTree(K,pe,ne,oe)});else{var Ae=createContainer(K,ce);Ae.styles.isVisible()&&(createsRealStackingContext(ce,Ae,oe)?Ae.flags|=4:createsStackingContext(Ae.styles)&&(Ae.flags|=2),LIST_OWNERS.indexOf(ce.tagName)!==-1&&(Ae.flags|=8),ne.elements.push(Ae),ce.slot,ce.shadowRoot?parseNodeTree(K,ce.shadowRoot,Ae,oe):!isTextareaElement(ce)&&!isSVGElement(ce)&&!isSelectElement(ce)&&parseNodeTree(K,ce,Ae,oe))}},createContainer=function(K,J){return isImageElement(J)?new ImageElementContainer(K,J):isCanvasElement(J)?new CanvasElementContainer(K,J):isSVGElement(J)?new SVGElementContainer(K,J):isLIElement(J)?new LIElementContainer(K,J):isOLElement(J)?new OLElementContainer(K,J):isInputElement(J)?new InputElementContainer(K,J):isSelectElement(J)?new SelectElementContainer(K,J):isTextareaElement(J)?new TextareaElementContainer(K,J):isIFrameElement(J)?new IFrameElementContainer(K,J):new ElementContainer(K,J)},parseTree=function(K,J){var ne=createContainer(K,J);return ne.flags|=4,parseNodeTree(K,J,ne,ne),ne},createsRealStackingContext=function(K,J,ne){return J.styles.isPositionedWithZIndex()||J.styles.opacity<1||J.styles.isTransformed()||isBodyElement(K)&&ne.styles.isTransparent()},createsStackingContext=function(K){return K.isPositioned()||K.isFloating()},isTextNode=function(K){return K.nodeType===Node.TEXT_NODE},isElementNode=function(K){return K.nodeType===Node.ELEMENT_NODE},isHTMLElementNode=function(K){return isElementNode(K)&&typeof K.style<"u"&&!isSVGElementNode(K)},isSVGElementNode=function(K){return typeof K.className=="object"},isLIElement=function(K){return K.tagName==="LI"},isOLElement=function(K){return K.tagName==="OL"},isInputElement=function(K){return K.tagName==="INPUT"},isHTMLElement=function(K){return K.tagName==="HTML"},isSVGElement=function(K){return K.tagName==="svg"},isBodyElement=function(K){return K.tagName==="BODY"},isCanvasElement=function(K){return K.tagName==="CANVAS"},isVideoElement=function(K){return K.tagName==="VIDEO"},isImageElement=function(K){return K.tagName==="IMG"},isIFrameElement=function(K){return K.tagName==="IFRAME"},isStyleElement=function(K){return K.tagName==="STYLE"},isScriptElement=function(K){return K.tagName==="SCRIPT"},isTextareaElement=function(K){return K.tagName==="TEXTAREA"},isSelectElement=function(K){return K.tagName==="SELECT"},isSlotElement=function(K){return K.tagName==="SLOT"},isCustomElement=function(K){return K.tagName.indexOf("-")>0},CounterState=function(){function K(){this.counters={}}return K.prototype.getCounterValue=function(J){var ne=this.counters[J];return ne&&ne.length?ne[ne.length-1]:1},K.prototype.getCounterValues=function(J){var ne=this.counters[J];return ne||[]},K.prototype.pop=function(J){var ne=this;J.forEach(function(oe){return ne.counters[oe].pop()})},K.prototype.parse=function(J){var ne=this,oe=J.counterIncrement,ce=J.counterReset,ue=!0;oe!==null&&oe.forEach(function(pe){var xe=ne.counters[pe.counter];xe&&pe.increment!==0&&(ue=!1,xe.length||xe.push(1),xe[Math.max(0,xe.length-1)]+=pe.increment)});var Ae=[];return ue&&ce.forEach(function(pe){var xe=ne.counters[pe.counter];Ae.push(pe.counter),xe||(xe=ne.counters[pe.counter]=[]),xe.push(pe.reset)}),Ae},K}(),ROMAN_UPPER={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ARMENIAN={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},HEBREW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},GEORGIAN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},createAdditiveCounter=function(K,J,ne,oe,ce,ue){return K<J||K>ne?createCounterText(K,ce,ue.length>0):oe.integers.reduce(function(Ae,pe,xe){for(;K>=pe;)K-=pe,Ae+=oe.values[xe];return Ae},"")+ue},createCounterStyleWithSymbolResolver=function(K,J,ne,oe){var ce="";do ne||K--,ce=oe(K)+ce,K/=J;while(K*J>=J);return ce},createCounterStyleFromRange=function(K,J,ne,oe,ce){var ue=ne-J+1;return(K<0?"-":"")+(createCounterStyleWithSymbolResolver(Math.abs(K),ue,oe,function(Ae){return fromCodePoint$1(Math.floor(Ae%ue)+J)})+ce)},createCounterStyleFromSymbols=function(K,J,ne){ne===void 0&&(ne=". ");var oe=J.length;return createCounterStyleWithSymbolResolver(Math.abs(K),oe,!1,function(ce){return J[Math.floor(ce%oe)]})+ne},CJK_ZEROS=1,CJK_TEN_COEFFICIENTS=2,CJK_TEN_HIGH_COEFFICIENTS=4,CJK_HUNDRED_COEFFICIENTS=8,createCJKCounter=function(K,J,ne,oe,ce,ue){if(K<-9999||K>9999)return createCounterText(K,4,ce.length>0);var Ae=Math.abs(K),pe=ce;if(Ae===0)return J[0]+pe;for(var xe=0;Ae>0&&xe<=4;xe++){var me=Ae%10;me===0&&contains(ue,CJK_ZEROS)&&pe!==""?pe=J[me]+pe:me>1||me===1&&xe===0||me===1&&xe===1&&contains(ue,CJK_TEN_COEFFICIENTS)||me===1&&xe===1&&contains(ue,CJK_TEN_HIGH_COEFFICIENTS)&&K>100||me===1&&xe>1&&contains(ue,CJK_HUNDRED_COEFFICIENTS)?pe=J[me]+(xe>0?ne[xe-1]:"")+pe:me===1&&xe>0&&(pe=ne[xe-1]+pe),Ae=Math.floor(Ae/10)}return(K<0?oe:"")+pe},CHINESE_INFORMAL_MULTIPLIERS="",CHINESE_FORMAL_MULTIPLIERS="",JAPANESE_NEGATIVE="",KOREAN_NEGATIVE="",createCounterText=function(K,J,ne){var oe=ne?". ":"",ce=ne?"":"",ue=ne?", ":"",Ae=ne?" ":"";switch(J){case 0:return""+Ae;case 1:return""+Ae;case 2:return""+Ae;case 5:var pe=createCounterStyleFromRange(K,48,57,!0,oe);return pe.length<4?"0"+pe:pe;case 4:return createCounterStyleFromSymbols(K,"",ce);case 6:return createAdditiveCounter(K,1,3999,ROMAN_UPPER,3,oe).toLowerCase();case 7:return createAdditiveCounter(K,1,3999,ROMAN_UPPER,3,oe);case 8:return createCounterStyleFromRange(K,945,969,!1,oe);case 9:return createCounterStyleFromRange(K,97,122,!1,oe);case 10:return createCounterStyleFromRange(K,65,90,!1,oe);case 11:return createCounterStyleFromRange(K,1632,1641,!0,oe);case 12:case 49:return createAdditiveCounter(K,1,9999,ARMENIAN,3,oe);case 35:return createAdditiveCounter(K,1,9999,ARMENIAN,3,oe).toLowerCase();case 13:return createCounterStyleFromRange(K,2534,2543,!0,oe);case 14:case 30:return createCounterStyleFromRange(K,6112,6121,!0,oe);case 15:return createCounterStyleFromSymbols(K,"",ce);case 16:return createCounterStyleFromSymbols(K,"",ce);case 17:case 48:return createCJKCounter(K,"",CHINESE_INFORMAL_MULTIPLIERS,"",ce,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 47:return createCJKCounter(K,"",CHINESE_FORMAL_MULTIPLIERS,"",ce,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 42:return createCJKCounter(K,"",CHINESE_INFORMAL_MULTIPLIERS,"",ce,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 41:return createCJKCounter(K,"",CHINESE_FORMAL_MULTIPLIERS,"",ce,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 26:return createCJKCounter(K,"","",JAPANESE_NEGATIVE,ce,0);case 25:return createCJKCounter(K,"","",JAPANESE_NEGATIVE,ce,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 31:return createCJKCounter(K,"","",KOREAN_NEGATIVE,ue,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 33:return createCJKCounter(K,"","",KOREAN_NEGATIVE,ue,0);case 32:return createCJKCounter(K,"","",KOREAN_NEGATIVE,ue,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 18:return createCounterStyleFromRange(K,2406,2415,!0,oe);case 20:return createAdditiveCounter(K,1,19999,GEORGIAN,3,oe);case 21:return createCounterStyleFromRange(K,2790,2799,!0,oe);case 22:return createCounterStyleFromRange(K,2662,2671,!0,oe);case 22:return createAdditiveCounter(K,1,10999,HEBREW,3,oe);case 23:return createCounterStyleFromSymbols(K,"");case 24:return createCounterStyleFromSymbols(K,"");case 27:return createCounterStyleFromRange(K,3302,3311,!0,oe);case 28:return createCounterStyleFromSymbols(K,"",ce);case 29:return createCounterStyleFromSymbols(K,"",ce);case 34:return createCounterStyleFromRange(K,3792,3801,!0,oe);case 37:return createCounterStyleFromRange(K,6160,6169,!0,oe);case 38:return createCounterStyleFromRange(K,4160,4169,!0,oe);case 39:return createCounterStyleFromRange(K,2918,2927,!0,oe);case 40:return createCounterStyleFromRange(K,1776,1785,!0,oe);case 43:return createCounterStyleFromRange(K,3046,3055,!0,oe);case 44:return createCounterStyleFromRange(K,3174,3183,!0,oe);case 45:return createCounterStyleFromRange(K,3664,3673,!0,oe);case 46:return createCounterStyleFromRange(K,3872,3881,!0,oe);case 3:default:return createCounterStyleFromRange(K,48,57,!0,oe)}},IGNORE_ATTRIBUTE="data-html2canvas-ignore",DocumentCloner=function(){function K(J,ne,oe){if(this.context=J,this.options=oe,this.scrolledElements=[],this.referenceElement=ne,this.counters=new CounterState,this.quoteDepth=0,!ne.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(ne.ownerDocument.documentElement,!1)}return K.prototype.toIFrame=function(J,ne){var oe=this,ce=createIFrameContainer(J,ne);if(!ce.contentWindow)return Promise.reject("Unable to find iframe window");var ue=J.defaultView.pageXOffset,Ae=J.defaultView.pageYOffset,pe=ce.contentWindow,xe=pe.document,me=iframeLoader(ce).then(function(){return __awaiter$1(oe,void 0,void 0,function(){var ge,ye;return __generator$1(this,function(Se){switch(Se.label){case 0:return this.scrolledElements.forEach(restoreNodeScroll),pe&&(pe.scrollTo(ne.left,ne.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(pe.scrollY!==ne.top||pe.scrollX!==ne.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(pe.scrollX-ne.left,pe.scrollY-ne.top,0,0))),ge=this.options.onclone,ye=this.clonedReferenceElement,typeof ye>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:xe.fonts&&xe.fonts.ready?[4,xe.fonts.ready]:[3,2];case 1:Se.sent(),Se.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,imagesReady(xe)]:[3,4];case 3:Se.sent(),Se.label=4;case 4:return typeof ge=="function"?[2,Promise.resolve().then(function(){return ge(xe,ye)}).then(function(){return ce})]:[2,ce]}})})});return xe.open(),xe.write(serializeDoctype(document.doctype)+"<html></html>"),restoreOwnerScroll(this.referenceElement.ownerDocument,ue,Ae),xe.replaceChild(xe.adoptNode(this.documentElement),xe.documentElement),xe.close(),me},K.prototype.createElementClone=function(J){if(isDebugging(J,2))debugger;if(isCanvasElement(J))return this.createCanvasClone(J);if(isVideoElement(J))return this.createVideoClone(J);if(isStyleElement(J))return this.createStyleClone(J);var ne=J.cloneNode(!1);return isImageElement(ne)&&(isImageElement(J)&&J.currentSrc&&J.currentSrc!==J.src&&(ne.src=J.currentSrc,ne.srcset=""),ne.loading==="lazy"&&(ne.loading="eager")),isCustomElement(ne)?this.createCustomElementClone(ne):ne},K.prototype.createCustomElementClone=function(J){var ne=document.createElement("html2canvascustomelement");return copyCSSStyles(J.style,ne),ne},K.prototype.createStyleClone=function(J){try{var ne=J.sheet;if(ne&&ne.cssRules){var oe=[].slice.call(ne.cssRules,0).reduce(function(ue,Ae){return Ae&&typeof Ae.cssText=="string"?ue+Ae.cssText:ue},""),ce=J.cloneNode(!1);return ce.textContent=oe,ce}}catch(ue){if(this.context.logger.error("Unable to access cssRules property",ue),ue.name!=="SecurityError")throw ue}return J.cloneNode(!1)},K.prototype.createCanvasClone=function(J){var ne;if(this.options.inlineImages&&J.ownerDocument){var oe=J.ownerDocument.createElement("img");try{return oe.src=J.toDataURL(),oe}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",J)}}var ce=J.cloneNode(!1);try{ce.width=J.width,ce.height=J.height;var ue=J.getContext("2d"),Ae=ce.getContext("2d");if(Ae)if(!this.options.allowTaint&&ue)Ae.putImageData(ue.getImageData(0,0,J.width,J.height),0,0);else{var pe=(ne=J.getContext("webgl2"))!==null&&ne!==void 0?ne:J.getContext("webgl");if(pe){var xe=pe.getContextAttributes();(xe==null?void 0:xe.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",J)}Ae.drawImage(J,0,0)}return ce}catch{this.context.logger.info("Unable to clone canvas as it is tainted",J)}return ce},K.prototype.createVideoClone=function(J){var ne=J.ownerDocument.createElement("canvas");ne.width=J.offsetWidth,ne.height=J.offsetHeight;var oe=ne.getContext("2d");try{return oe&&(oe.drawImage(J,0,0,ne.width,ne.height),this.options.allowTaint||oe.getImageData(0,0,ne.width,ne.height)),ne}catch{this.context.logger.info("Unable to clone video as it is tainted",J)}var ce=J.ownerDocument.createElement("canvas");return ce.width=J.offsetWidth,ce.height=J.offsetHeight,ce},K.prototype.appendChildNode=function(J,ne,oe){(!isElementNode(ne)||!isScriptElement(ne)&&!ne.hasAttribute(IGNORE_ATTRIBUTE)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(ne)))&&(!this.options.copyStyles||!isElementNode(ne)||!isStyleElement(ne))&&J.appendChild(this.cloneNode(ne,oe))},K.prototype.cloneChildNodes=function(J,ne,oe){for(var ce=this,ue=J.shadowRoot?J.shadowRoot.firstChild:J.firstChild;ue;ue=ue.nextSibling)if(isElementNode(ue)&&isSlotElement(ue)&&typeof ue.assignedNodes=="function"){var Ae=ue.assignedNodes();Ae.length&&Ae.forEach(function(pe){return ce.appendChildNode(ne,pe,oe)})}else this.appendChildNode(ne,ue,oe)},K.prototype.cloneNode=function(J,ne){if(isTextNode(J))return document.createTextNode(J.data);if(!J.ownerDocument)return J.cloneNode(!1);var oe=J.ownerDocument.defaultView;if(oe&&isElementNode(J)&&(isHTMLElementNode(J)||isSVGElementNode(J))){var ce=this.createElementClone(J);ce.style.transitionProperty="none";var ue=oe.getComputedStyle(J),Ae=oe.getComputedStyle(J,":before"),pe=oe.getComputedStyle(J,":after");this.referenceElement===J&&isHTMLElementNode(ce)&&(this.clonedReferenceElement=ce),isBodyElement(ce)&&createPseudoHideStyles(ce);var xe=this.counters.parse(new CSSParsedCounterDeclaration(this.context,ue)),me=this.resolvePseudoContent(J,ce,Ae,PseudoElementType.BEFORE);isCustomElement(J)&&(ne=!0),isVideoElement(J)||this.cloneChildNodes(J,ce,ne),me&&ce.insertBefore(me,ce.firstChild);var ge=this.resolvePseudoContent(J,ce,pe,PseudoElementType.AFTER);return ge&&ce.appendChild(ge),this.counters.pop(xe),(ue&&(this.options.copyStyles||isSVGElementNode(J))&&!isIFrameElement(J)||ne)&&copyCSSStyles(ue,ce),(J.scrollTop!==0||J.scrollLeft!==0)&&this.scrolledElements.push([ce,J.scrollLeft,J.scrollTop]),(isTextareaElement(J)||isSelectElement(J))&&(isTextareaElement(ce)||isSelectElement(ce))&&(ce.value=J.value),ce}return J.cloneNode(!1)},K.prototype.resolvePseudoContent=function(J,ne,oe,ce){var ue=this;if(oe){var Ae=oe.content,pe=ne.ownerDocument;if(!(!pe||!Ae||Ae==="none"||Ae==="-moz-alt-content"||oe.display==="none")){this.counters.parse(new CSSParsedCounterDeclaration(this.context,oe));var xe=new CSSParsedPseudoDeclaration(this.context,oe),me=pe.createElement("html2canvaspseudoelement");copyCSSStyles(oe,me),xe.content.forEach(function(ye){if(ye.type===0)me.appendChild(pe.createTextNode(ye.value));else if(ye.type===22){var Se=pe.createElement("img");Se.src=ye.value,Se.style.opacity="1",me.appendChild(Se)}else if(ye.type===18){if(ye.name==="attr"){var Te=ye.values.filter(isIdentToken);Te.length&&me.appendChild(pe.createTextNode(J.getAttribute(Te[0].value)||""))}else if(ye.name==="counter"){var Ne=ye.values.filter(nonFunctionArgSeparator),$e=Ne[0],ke=Ne[1];if($e&&isIdentToken($e)){var je=ue.counters.getCounterValue($e.value),Ke=ke&&isIdentToken(ke)?listStyleType.parse(ue.context,ke.value):3;me.appendChild(pe.createTextNode(createCounterText(je,Ke,!1)))}}else if(ye.name==="counters"){var Ye=ye.values.filter(nonFunctionArgSeparator),$e=Ye[0],ze=Ye[1],ke=Ye[2];if($e&&isIdentToken($e)){var Xe=ue.counters.getCounterValues($e.value),Je=ke&&isIdentToken(ke)?listStyleType.parse(ue.context,ke.value):3,rt=ze&&ze.type===0?ze.value:"",Ze=Xe.map(function(Ge){return createCounterText(Ge,Je,!1)}).join(rt);me.appendChild(pe.createTextNode(Ze))}}}else if(ye.type===20)switch(ye.value){case"open-quote":me.appendChild(pe.createTextNode(getQuote(xe.quotes,ue.quoteDepth++,!0)));break;case"close-quote":me.appendChild(pe.createTextNode(getQuote(xe.quotes,--ue.quoteDepth,!1)));break;default:me.appendChild(pe.createTextNode(ye.value))}}),me.className=PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;var ge=ce===PseudoElementType.BEFORE?" "+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE:" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;return isSVGElementNode(ne)?ne.className.baseValue+=ge:ne.className+=ge,me}}},K.destroy=function(J){return J.parentNode?(J.parentNode.removeChild(J),!0):!1},K}(),PseudoElementType;(function(K){K[K.BEFORE=0]="BEFORE",K[K.AFTER=1]="AFTER"})(PseudoElementType||(PseudoElementType={}));var createIFrameContainer=function(K,J){var ne=K.createElement("iframe");return ne.className="html2canvas-container",ne.style.visibility="hidden",ne.style.position="fixed",ne.style.left="-10000px",ne.style.top="0px",ne.style.border="0",ne.width=J.width.toString(),ne.height=J.height.toString(),ne.scrolling="no",ne.setAttribute(IGNORE_ATTRIBUTE,"true"),K.body.appendChild(ne),ne},imageReady=function(K){return new Promise(function(J){if(K.complete){J();return}if(!K.src){J();return}K.onload=J,K.onerror=J})},imagesReady=function(K){return Promise.all([].slice.call(K.images,0).map(imageReady))},iframeLoader=function(K){return new Promise(function(J,ne){var oe=K.contentWindow;if(!oe)return ne("No window assigned for iframe");var ce=oe.document;oe.onload=K.onload=function(){oe.onload=K.onload=null;var ue=setInterval(function(){ce.body.childNodes.length>0&&ce.readyState==="complete"&&(clearInterval(ue),J(K))},50)}})},ignoredStyleProperties=["all","d","content"],copyCSSStyles=function(K,J){for(var ne=K.length-1;ne>=0;ne--){var oe=K.item(ne);ignoredStyleProperties.indexOf(oe)===-1&&J.style.setProperty(oe,K.getPropertyValue(oe))}return J},serializeDoctype=function(K){var J="";return K&&(J+="<!DOCTYPE ",K.name&&(J+=K.name),K.internalSubset&&(J+=K.internalSubset),K.publicId&&(J+='"'+K.publicId+'"'),K.systemId&&(J+='"'+K.systemId+'"'),J+=">"),J},restoreOwnerScroll=function(K,J,ne){K&&K.defaultView&&(J!==K.defaultView.pageXOffset||ne!==K.defaultView.pageYOffset)&&K.defaultView.scrollTo(J,ne)},restoreNodeScroll=function(K){var J=K[0],ne=K[1],oe=K[2];J.scrollLeft=ne,J.scrollTop=oe},PSEUDO_BEFORE=":before",PSEUDO_AFTER=":after",PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",PSEUDO_HIDE_ELEMENT_STYLE=`{
    content: "" !important;
    display: none !important;
}`,createPseudoHideStyles=function(K){createStyles(K,"."+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+PSEUDO_BEFORE+PSEUDO_HIDE_ELEMENT_STYLE+`
         .`+PSEUDO_HIDE_ELEMENT_CLASS_AFTER+PSEUDO_AFTER+PSEUDO_HIDE_ELEMENT_STYLE)},createStyles=function(K,J){var ne=K.ownerDocument;if(ne){var oe=ne.createElement("style");oe.textContent=J,K.appendChild(oe)}},CacheStorage=function(){function K(){}return K.getOrigin=function(J){var ne=K._link;return ne?(ne.href=J,ne.href=ne.href,ne.protocol+ne.hostname+ne.port):"about:blank"},K.isSameOrigin=function(J){return K.getOrigin(J)===K._origin},K.setContext=function(J){K._link=J.document.createElement("a"),K._origin=K.getOrigin(J.location.href)},K._origin="about:blank",K}(),Cache=function(){function K(J,ne){this.context=J,this._options=ne,this._cache={}}return K.prototype.addImage=function(J){var ne=Promise.resolve();return this.has(J)||(isBlobImage(J)||isRenderable(J))&&(this._cache[J]=this.loadImage(J)).catch(function(){}),ne},K.prototype.match=function(J){return this._cache[J]},K.prototype.loadImage=function(J){return __awaiter$1(this,void 0,void 0,function(){var ne,oe,ce,ue,Ae=this;return __generator$1(this,function(pe){switch(pe.label){case 0:return ne=CacheStorage.isSameOrigin(J),oe=!isInlineImage(J)&&this._options.useCORS===!0&&FEATURES.SUPPORT_CORS_IMAGES&&!ne,ce=!isInlineImage(J)&&!ne&&!isBlobImage(J)&&typeof this._options.proxy=="string"&&FEATURES.SUPPORT_CORS_XHR&&!oe,!ne&&this._options.allowTaint===!1&&!isInlineImage(J)&&!isBlobImage(J)&&!ce&&!oe?[2]:(ue=J,ce?[4,this.proxy(ue)]:[3,2]);case 1:ue=pe.sent(),pe.label=2;case 2:return this.context.logger.debug("Added image "+J.substring(0,256)),[4,new Promise(function(xe,me){var ge=new Image;ge.onload=function(){return xe(ge)},ge.onerror=me,(isInlineBase64Image(ue)||oe)&&(ge.crossOrigin="anonymous"),ge.src=ue,ge.complete===!0&&setTimeout(function(){return xe(ge)},500),Ae._options.imageTimeout>0&&setTimeout(function(){return me("Timed out ("+Ae._options.imageTimeout+"ms) loading image")},Ae._options.imageTimeout)})];case 3:return[2,pe.sent()]}})})},K.prototype.has=function(J){return typeof this._cache[J]<"u"},K.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},K.prototype.proxy=function(J){var ne=this,oe=this._options.proxy;if(!oe)throw new Error("No proxy defined");var ce=J.substring(0,256);return new Promise(function(ue,Ae){var pe=FEATURES.SUPPORT_RESPONSE_TYPE?"blob":"text",xe=new XMLHttpRequest;xe.onload=function(){if(xe.status===200)if(pe==="text")ue(xe.response);else{var ye=new FileReader;ye.addEventListener("load",function(){return ue(ye.result)},!1),ye.addEventListener("error",function(Se){return Ae(Se)},!1),ye.readAsDataURL(xe.response)}else Ae("Failed to proxy resource "+ce+" with status code "+xe.status)},xe.onerror=Ae;var me=oe.indexOf("?")>-1?"&":"?";if(xe.open("GET",""+oe+me+"url="+encodeURIComponent(J)+"&responseType="+pe),pe!=="text"&&xe instanceof XMLHttpRequest&&(xe.responseType=pe),ne._options.imageTimeout){var ge=ne._options.imageTimeout;xe.timeout=ge,xe.ontimeout=function(){return Ae("Timed out ("+ge+"ms) proxying "+ce)}}xe.send()})},K}(),INLINE_SVG=/^data:image\/svg\+xml/i,INLINE_BASE64=/^data:image\/.*;base64,/i,INLINE_IMG=/^data:image\/.*/i,isRenderable=function(K){return FEATURES.SUPPORT_SVG_DRAWING||!isSVG(K)},isInlineImage=function(K){return INLINE_IMG.test(K)},isInlineBase64Image=function(K){return INLINE_BASE64.test(K)},isBlobImage=function(K){return K.substr(0,4)==="blob"},isSVG=function(K){return K.substr(-3).toLowerCase()==="svg"||INLINE_SVG.test(K)},Vector=function(){function K(J,ne){this.type=0,this.x=J,this.y=ne}return K.prototype.add=function(J,ne){return new K(this.x+J,this.y+ne)},K}(),lerp=function(K,J,ne){return new Vector(K.x+(J.x-K.x)*ne,K.y+(J.y-K.y)*ne)},BezierCurve=function(){function K(J,ne,oe,ce){this.type=1,this.start=J,this.startControl=ne,this.endControl=oe,this.end=ce}return K.prototype.subdivide=function(J,ne){var oe=lerp(this.start,this.startControl,J),ce=lerp(this.startControl,this.endControl,J),ue=lerp(this.endControl,this.end,J),Ae=lerp(oe,ce,J),pe=lerp(ce,ue,J),xe=lerp(Ae,pe,J);return ne?new K(this.start,oe,Ae,xe):new K(xe,pe,ue,this.end)},K.prototype.add=function(J,ne){return new K(this.start.add(J,ne),this.startControl.add(J,ne),this.endControl.add(J,ne),this.end.add(J,ne))},K.prototype.reverse=function(){return new K(this.end,this.endControl,this.startControl,this.start)},K}(),isBezierCurve=function(K){return K.type===1},BoundCurves=function(){function K(J){var ne=J.styles,oe=J.bounds,ce=getAbsoluteValueForTuple(ne.borderTopLeftRadius,oe.width,oe.height),ue=ce[0],Ae=ce[1],pe=getAbsoluteValueForTuple(ne.borderTopRightRadius,oe.width,oe.height),xe=pe[0],me=pe[1],ge=getAbsoluteValueForTuple(ne.borderBottomRightRadius,oe.width,oe.height),ye=ge[0],Se=ge[1],Te=getAbsoluteValueForTuple(ne.borderBottomLeftRadius,oe.width,oe.height),Ne=Te[0],$e=Te[1],ke=[];ke.push((ue+xe)/oe.width),ke.push((Ne+ye)/oe.width),ke.push((Ae+$e)/oe.height),ke.push((me+Se)/oe.height);var je=Math.max.apply(Math,ke);je>1&&(ue/=je,Ae/=je,xe/=je,me/=je,ye/=je,Se/=je,Ne/=je,$e/=je);var Ke=oe.width-xe,Ye=oe.height-Se,ze=oe.width-ye,Xe=oe.height-$e,Je=ne.borderTopWidth,rt=ne.borderRightWidth,Ze=ne.borderBottomWidth,et=ne.borderLeftWidth,nt=getAbsoluteValue(ne.paddingTop,J.bounds.width),Ge=getAbsoluteValue(ne.paddingRight,J.bounds.width),ve=getAbsoluteValue(ne.paddingBottom,J.bounds.width),Be=getAbsoluteValue(ne.paddingLeft,J.bounds.width);this.topLeftBorderDoubleOuterBox=ue>0||Ae>0?getCurvePoints(oe.left+et/3,oe.top+Je/3,ue-et/3,Ae-Je/3,CORNER.TOP_LEFT):new Vector(oe.left+et/3,oe.top+Je/3),this.topRightBorderDoubleOuterBox=ue>0||Ae>0?getCurvePoints(oe.left+Ke,oe.top+Je/3,xe-rt/3,me-Je/3,CORNER.TOP_RIGHT):new Vector(oe.left+oe.width-rt/3,oe.top+Je/3),this.bottomRightBorderDoubleOuterBox=ye>0||Se>0?getCurvePoints(oe.left+ze,oe.top+Ye,ye-rt/3,Se-Ze/3,CORNER.BOTTOM_RIGHT):new Vector(oe.left+oe.width-rt/3,oe.top+oe.height-Ze/3),this.bottomLeftBorderDoubleOuterBox=Ne>0||$e>0?getCurvePoints(oe.left+et/3,oe.top+Xe,Ne-et/3,$e-Ze/3,CORNER.BOTTOM_LEFT):new Vector(oe.left+et/3,oe.top+oe.height-Ze/3),this.topLeftBorderDoubleInnerBox=ue>0||Ae>0?getCurvePoints(oe.left+et*2/3,oe.top+Je*2/3,ue-et*2/3,Ae-Je*2/3,CORNER.TOP_LEFT):new Vector(oe.left+et*2/3,oe.top+Je*2/3),this.topRightBorderDoubleInnerBox=ue>0||Ae>0?getCurvePoints(oe.left+Ke,oe.top+Je*2/3,xe-rt*2/3,me-Je*2/3,CORNER.TOP_RIGHT):new Vector(oe.left+oe.width-rt*2/3,oe.top+Je*2/3),this.bottomRightBorderDoubleInnerBox=ye>0||Se>0?getCurvePoints(oe.left+ze,oe.top+Ye,ye-rt*2/3,Se-Ze*2/3,CORNER.BOTTOM_RIGHT):new Vector(oe.left+oe.width-rt*2/3,oe.top+oe.height-Ze*2/3),this.bottomLeftBorderDoubleInnerBox=Ne>0||$e>0?getCurvePoints(oe.left+et*2/3,oe.top+Xe,Ne-et*2/3,$e-Ze*2/3,CORNER.BOTTOM_LEFT):new Vector(oe.left+et*2/3,oe.top+oe.height-Ze*2/3),this.topLeftBorderStroke=ue>0||Ae>0?getCurvePoints(oe.left+et/2,oe.top+Je/2,ue-et/2,Ae-Je/2,CORNER.TOP_LEFT):new Vector(oe.left+et/2,oe.top+Je/2),this.topRightBorderStroke=ue>0||Ae>0?getCurvePoints(oe.left+Ke,oe.top+Je/2,xe-rt/2,me-Je/2,CORNER.TOP_RIGHT):new Vector(oe.left+oe.width-rt/2,oe.top+Je/2),this.bottomRightBorderStroke=ye>0||Se>0?getCurvePoints(oe.left+ze,oe.top+Ye,ye-rt/2,Se-Ze/2,CORNER.BOTTOM_RIGHT):new Vector(oe.left+oe.width-rt/2,oe.top+oe.height-Ze/2),this.bottomLeftBorderStroke=Ne>0||$e>0?getCurvePoints(oe.left+et/2,oe.top+Xe,Ne-et/2,$e-Ze/2,CORNER.BOTTOM_LEFT):new Vector(oe.left+et/2,oe.top+oe.height-Ze/2),this.topLeftBorderBox=ue>0||Ae>0?getCurvePoints(oe.left,oe.top,ue,Ae,CORNER.TOP_LEFT):new Vector(oe.left,oe.top),this.topRightBorderBox=xe>0||me>0?getCurvePoints(oe.left+Ke,oe.top,xe,me,CORNER.TOP_RIGHT):new Vector(oe.left+oe.width,oe.top),this.bottomRightBorderBox=ye>0||Se>0?getCurvePoints(oe.left+ze,oe.top+Ye,ye,Se,CORNER.BOTTOM_RIGHT):new Vector(oe.left+oe.width,oe.top+oe.height),this.bottomLeftBorderBox=Ne>0||$e>0?getCurvePoints(oe.left,oe.top+Xe,Ne,$e,CORNER.BOTTOM_LEFT):new Vector(oe.left,oe.top+oe.height),this.topLeftPaddingBox=ue>0||Ae>0?getCurvePoints(oe.left+et,oe.top+Je,Math.max(0,ue-et),Math.max(0,Ae-Je),CORNER.TOP_LEFT):new Vector(oe.left+et,oe.top+Je),this.topRightPaddingBox=xe>0||me>0?getCurvePoints(oe.left+Math.min(Ke,oe.width-rt),oe.top+Je,Ke>oe.width+rt?0:Math.max(0,xe-rt),Math.max(0,me-Je),CORNER.TOP_RIGHT):new Vector(oe.left+oe.width-rt,oe.top+Je),this.bottomRightPaddingBox=ye>0||Se>0?getCurvePoints(oe.left+Math.min(ze,oe.width-et),oe.top+Math.min(Ye,oe.height-Ze),Math.max(0,ye-rt),Math.max(0,Se-Ze),CORNER.BOTTOM_RIGHT):new Vector(oe.left+oe.width-rt,oe.top+oe.height-Ze),this.bottomLeftPaddingBox=Ne>0||$e>0?getCurvePoints(oe.left+et,oe.top+Math.min(Xe,oe.height-Ze),Math.max(0,Ne-et),Math.max(0,$e-Ze),CORNER.BOTTOM_LEFT):new Vector(oe.left+et,oe.top+oe.height-Ze),this.topLeftContentBox=ue>0||Ae>0?getCurvePoints(oe.left+et+Be,oe.top+Je+nt,Math.max(0,ue-(et+Be)),Math.max(0,Ae-(Je+nt)),CORNER.TOP_LEFT):new Vector(oe.left+et+Be,oe.top+Je+nt),this.topRightContentBox=xe>0||me>0?getCurvePoints(oe.left+Math.min(Ke,oe.width+et+Be),oe.top+Je+nt,Ke>oe.width+et+Be?0:xe-et+Be,me-(Je+nt),CORNER.TOP_RIGHT):new Vector(oe.left+oe.width-(rt+Ge),oe.top+Je+nt),this.bottomRightContentBox=ye>0||Se>0?getCurvePoints(oe.left+Math.min(ze,oe.width-(et+Be)),oe.top+Math.min(Ye,oe.height+Je+nt),Math.max(0,ye-(rt+Ge)),Se-(Ze+ve),CORNER.BOTTOM_RIGHT):new Vector(oe.left+oe.width-(rt+Ge),oe.top+oe.height-(Ze+ve)),this.bottomLeftContentBox=Ne>0||$e>0?getCurvePoints(oe.left+et+Be,oe.top+Xe,Math.max(0,Ne-(et+Be)),$e-(Ze+ve),CORNER.BOTTOM_LEFT):new Vector(oe.left+et+Be,oe.top+oe.height-(Ze+ve))}return K}(),CORNER;(function(K){K[K.TOP_LEFT=0]="TOP_LEFT",K[K.TOP_RIGHT=1]="TOP_RIGHT",K[K.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",K[K.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(CORNER||(CORNER={}));var getCurvePoints=function(K,J,ne,oe,ce){var ue=4*((Math.sqrt(2)-1)/3),Ae=ne*ue,pe=oe*ue,xe=K+ne,me=J+oe;switch(ce){case CORNER.TOP_LEFT:return new BezierCurve(new Vector(K,me),new Vector(K,me-pe),new Vector(xe-Ae,J),new Vector(xe,J));case CORNER.TOP_RIGHT:return new BezierCurve(new Vector(K,J),new Vector(K+Ae,J),new Vector(xe,me-pe),new Vector(xe,me));case CORNER.BOTTOM_RIGHT:return new BezierCurve(new Vector(xe,J),new Vector(xe,J+pe),new Vector(K+Ae,me),new Vector(K,me));case CORNER.BOTTOM_LEFT:default:return new BezierCurve(new Vector(xe,me),new Vector(xe-Ae,me),new Vector(K,J+pe),new Vector(K,J))}},calculateBorderBoxPath=function(K){return[K.topLeftBorderBox,K.topRightBorderBox,K.bottomRightBorderBox,K.bottomLeftBorderBox]},calculateContentBoxPath=function(K){return[K.topLeftContentBox,K.topRightContentBox,K.bottomRightContentBox,K.bottomLeftContentBox]},calculatePaddingBoxPath=function(K){return[K.topLeftPaddingBox,K.topRightPaddingBox,K.bottomRightPaddingBox,K.bottomLeftPaddingBox]},TransformEffect=function(){function K(J,ne,oe){this.offsetX=J,this.offsetY=ne,this.matrix=oe,this.type=0,this.target=6}return K}(),ClipEffect=function(){function K(J,ne){this.path=J,this.target=ne,this.type=1}return K}(),OpacityEffect=function(){function K(J){this.opacity=J,this.type=2,this.target=6}return K}(),isTransformEffect=function(K){return K.type===0},isClipEffect=function(K){return K.type===1},isOpacityEffect=function(K){return K.type===2},equalPath=function(K,J){return K.length===J.length?K.some(function(ne,oe){return ne===J[oe]}):!1},transformPath=function(K,J,ne,oe,ce){return K.map(function(ue,Ae){switch(Ae){case 0:return ue.add(J,ne);case 1:return ue.add(J+oe,ne);case 2:return ue.add(J+oe,ne+ce);case 3:return ue.add(J,ne+ce)}return ue})},StackingContext=function(){function K(J){this.element=J,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return K}(),ElementPaint=function(){function K(J,ne){if(this.container=J,this.parent=ne,this.effects=[],this.curves=new BoundCurves(this.container),this.container.styles.opacity<1&&this.effects.push(new OpacityEffect(this.container.styles.opacity)),this.container.styles.transform!==null){var oe=this.container.bounds.left+this.container.styles.transformOrigin[0].number,ce=this.container.bounds.top+this.container.styles.transformOrigin[1].number,ue=this.container.styles.transform;this.effects.push(new TransformEffect(oe,ce,ue))}if(this.container.styles.overflowX!==0){var Ae=calculateBorderBoxPath(this.curves),pe=calculatePaddingBoxPath(this.curves);equalPath(Ae,pe)?this.effects.push(new ClipEffect(Ae,6)):(this.effects.push(new ClipEffect(Ae,2)),this.effects.push(new ClipEffect(pe,4)))}}return K.prototype.getEffects=function(J){for(var ne=[2,3].indexOf(this.container.styles.position)===-1,oe=this.parent,ce=this.effects.slice(0);oe;){var ue=oe.effects.filter(function(xe){return!isClipEffect(xe)});if(ne||oe.container.styles.position!==0||!oe.parent){if(ce.unshift.apply(ce,ue),ne=[2,3].indexOf(oe.container.styles.position)===-1,oe.container.styles.overflowX!==0){var Ae=calculateBorderBoxPath(oe.curves),pe=calculatePaddingBoxPath(oe.curves);equalPath(Ae,pe)||ce.unshift(new ClipEffect(pe,6))}}else ce.unshift.apply(ce,ue);oe=oe.parent}return ce.filter(function(xe){return contains(xe.target,J)})},K}(),parseStackTree=function(K,J,ne,oe){K.container.elements.forEach(function(ce){var ue=contains(ce.flags,4),Ae=contains(ce.flags,2),pe=new ElementPaint(ce,K);contains(ce.styles.display,2048)&&oe.push(pe);var xe=contains(ce.flags,8)?[]:oe;if(ue||Ae){var me=ue||ce.styles.isPositioned()?ne:J,ge=new StackingContext(pe);if(ce.styles.isPositioned()||ce.styles.opacity<1||ce.styles.isTransformed()){var ye=ce.styles.zIndex.order;if(ye<0){var Se=0;me.negativeZIndex.some(function(Ne,$e){return ye>Ne.element.container.styles.zIndex.order?(Se=$e,!1):Se>0}),me.negativeZIndex.splice(Se,0,ge)}else if(ye>0){var Te=0;me.positiveZIndex.some(function(Ne,$e){return ye>=Ne.element.container.styles.zIndex.order?(Te=$e+1,!1):Te>0}),me.positiveZIndex.splice(Te,0,ge)}else me.zeroOrAutoZIndexOrTransformedOrOpacity.push(ge)}else ce.styles.isFloating()?me.nonPositionedFloats.push(ge):me.nonPositionedInlineLevel.push(ge);parseStackTree(pe,ge,ue?ge:ne,xe)}else ce.styles.isInlineLevel()?J.inlineLevel.push(pe):J.nonInlineLevel.push(pe),parseStackTree(pe,J,ne,xe);contains(ce.flags,8)&&processListItems(ce,xe)})},processListItems=function(K,J){for(var ne=K instanceof OLElementContainer?K.start:1,oe=K instanceof OLElementContainer?K.reversed:!1,ce=0;ce<J.length;ce++){var ue=J[ce];ue.container instanceof LIElementContainer&&typeof ue.container.value=="number"&&ue.container.value!==0&&(ne=ue.container.value),ue.listValue=createCounterText(ne,ue.container.styles.listStyleType,!0),ne+=oe?-1:1}},parseStackingContexts=function(K){var J=new ElementPaint(K,null),ne=new StackingContext(J),oe=[];return parseStackTree(J,ne,ne,oe),processListItems(J.container,oe),ne},parsePathForBorder=function(K,J){switch(J){case 0:return createPathFromCurves(K.topLeftBorderBox,K.topLeftPaddingBox,K.topRightBorderBox,K.topRightPaddingBox);case 1:return createPathFromCurves(K.topRightBorderBox,K.topRightPaddingBox,K.bottomRightBorderBox,K.bottomRightPaddingBox);case 2:return createPathFromCurves(K.bottomRightBorderBox,K.bottomRightPaddingBox,K.bottomLeftBorderBox,K.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(K.bottomLeftBorderBox,K.bottomLeftPaddingBox,K.topLeftBorderBox,K.topLeftPaddingBox)}},parsePathForBorderDoubleOuter=function(K,J){switch(J){case 0:return createPathFromCurves(K.topLeftBorderBox,K.topLeftBorderDoubleOuterBox,K.topRightBorderBox,K.topRightBorderDoubleOuterBox);case 1:return createPathFromCurves(K.topRightBorderBox,K.topRightBorderDoubleOuterBox,K.bottomRightBorderBox,K.bottomRightBorderDoubleOuterBox);case 2:return createPathFromCurves(K.bottomRightBorderBox,K.bottomRightBorderDoubleOuterBox,K.bottomLeftBorderBox,K.bottomLeftBorderDoubleOuterBox);case 3:default:return createPathFromCurves(K.bottomLeftBorderBox,K.bottomLeftBorderDoubleOuterBox,K.topLeftBorderBox,K.topLeftBorderDoubleOuterBox)}},parsePathForBorderDoubleInner=function(K,J){switch(J){case 0:return createPathFromCurves(K.topLeftBorderDoubleInnerBox,K.topLeftPaddingBox,K.topRightBorderDoubleInnerBox,K.topRightPaddingBox);case 1:return createPathFromCurves(K.topRightBorderDoubleInnerBox,K.topRightPaddingBox,K.bottomRightBorderDoubleInnerBox,K.bottomRightPaddingBox);case 2:return createPathFromCurves(K.bottomRightBorderDoubleInnerBox,K.bottomRightPaddingBox,K.bottomLeftBorderDoubleInnerBox,K.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(K.bottomLeftBorderDoubleInnerBox,K.bottomLeftPaddingBox,K.topLeftBorderDoubleInnerBox,K.topLeftPaddingBox)}},parsePathForBorderStroke=function(K,J){switch(J){case 0:return createStrokePathFromCurves(K.topLeftBorderStroke,K.topRightBorderStroke);case 1:return createStrokePathFromCurves(K.topRightBorderStroke,K.bottomRightBorderStroke);case 2:return createStrokePathFromCurves(K.bottomRightBorderStroke,K.bottomLeftBorderStroke);case 3:default:return createStrokePathFromCurves(K.bottomLeftBorderStroke,K.topLeftBorderStroke)}},createStrokePathFromCurves=function(K,J){var ne=[];return isBezierCurve(K)?ne.push(K.subdivide(.5,!1)):ne.push(K),isBezierCurve(J)?ne.push(J.subdivide(.5,!0)):ne.push(J),ne},createPathFromCurves=function(K,J,ne,oe){var ce=[];return isBezierCurve(K)?ce.push(K.subdivide(.5,!1)):ce.push(K),isBezierCurve(ne)?ce.push(ne.subdivide(.5,!0)):ce.push(ne),isBezierCurve(oe)?ce.push(oe.subdivide(.5,!0).reverse()):ce.push(oe),isBezierCurve(J)?ce.push(J.subdivide(.5,!1).reverse()):ce.push(J),ce},paddingBox=function(K){var J=K.bounds,ne=K.styles;return J.add(ne.borderLeftWidth,ne.borderTopWidth,-(ne.borderRightWidth+ne.borderLeftWidth),-(ne.borderTopWidth+ne.borderBottomWidth))},contentBox=function(K){var J=K.styles,ne=K.bounds,oe=getAbsoluteValue(J.paddingLeft,ne.width),ce=getAbsoluteValue(J.paddingRight,ne.width),ue=getAbsoluteValue(J.paddingTop,ne.width),Ae=getAbsoluteValue(J.paddingBottom,ne.width);return ne.add(oe+J.borderLeftWidth,ue+J.borderTopWidth,-(J.borderRightWidth+J.borderLeftWidth+oe+ce),-(J.borderTopWidth+J.borderBottomWidth+ue+Ae))},calculateBackgroundPositioningArea=function(K,J){return K===0?J.bounds:K===2?contentBox(J):paddingBox(J)},calculateBackgroundPaintingArea=function(K,J){return K===0?J.bounds:K===2?contentBox(J):paddingBox(J)},calculateBackgroundRendering=function(K,J,ne){var oe=calculateBackgroundPositioningArea(getBackgroundValueForIndex(K.styles.backgroundOrigin,J),K),ce=calculateBackgroundPaintingArea(getBackgroundValueForIndex(K.styles.backgroundClip,J),K),ue=calculateBackgroundSize(getBackgroundValueForIndex(K.styles.backgroundSize,J),ne,oe),Ae=ue[0],pe=ue[1],xe=getAbsoluteValueForTuple(getBackgroundValueForIndex(K.styles.backgroundPosition,J),oe.width-Ae,oe.height-pe),me=calculateBackgroundRepeatPath(getBackgroundValueForIndex(K.styles.backgroundRepeat,J),xe,ue,oe,ce),ge=Math.round(oe.left+xe[0]),ye=Math.round(oe.top+xe[1]);return[me,ge,ye,Ae,pe]},isAuto=function(K){return isIdentToken(K)&&K.value===BACKGROUND_SIZE.AUTO},hasIntrinsicValue=function(K){return typeof K=="number"},calculateBackgroundSize=function(K,J,ne){var oe=J[0],ce=J[1],ue=J[2],Ae=K[0],pe=K[1];if(!Ae)return[0,0];if(isLengthPercentage(Ae)&&pe&&isLengthPercentage(pe))return[getAbsoluteValue(Ae,ne.width),getAbsoluteValue(pe,ne.height)];var xe=hasIntrinsicValue(ue);if(isIdentToken(Ae)&&(Ae.value===BACKGROUND_SIZE.CONTAIN||Ae.value===BACKGROUND_SIZE.COVER)){if(hasIntrinsicValue(ue)){var me=ne.width/ne.height;return me<ue!=(Ae.value===BACKGROUND_SIZE.COVER)?[ne.width,ne.width/ue]:[ne.height*ue,ne.height]}return[ne.width,ne.height]}var ge=hasIntrinsicValue(oe),ye=hasIntrinsicValue(ce),Se=ge||ye;if(isAuto(Ae)&&(!pe||isAuto(pe))){if(ge&&ye)return[oe,ce];if(!xe&&!Se)return[ne.width,ne.height];if(Se&&xe){var Te=ge?oe:ce*ue,Ne=ye?ce:oe/ue;return[Te,Ne]}var $e=ge?oe:ne.width,ke=ye?ce:ne.height;return[$e,ke]}if(xe){var je=0,Ke=0;return isLengthPercentage(Ae)?je=getAbsoluteValue(Ae,ne.width):isLengthPercentage(pe)&&(Ke=getAbsoluteValue(pe,ne.height)),isAuto(Ae)?je=Ke*ue:(!pe||isAuto(pe))&&(Ke=je/ue),[je,Ke]}var Ye=null,ze=null;if(isLengthPercentage(Ae)?Ye=getAbsoluteValue(Ae,ne.width):pe&&isLengthPercentage(pe)&&(ze=getAbsoluteValue(pe,ne.height)),Ye!==null&&(!pe||isAuto(pe))&&(ze=ge&&ye?Ye/oe*ce:ne.height),ze!==null&&isAuto(Ae)&&(Ye=ge&&ye?ze/ce*oe:ne.width),Ye!==null&&ze!==null)return[Ye,ze];throw new Error("Unable to calculate background-size for element")},getBackgroundValueForIndex=function(K,J){var ne=K[J];return typeof ne>"u"?K[0]:ne},calculateBackgroundRepeatPath=function(K,J,ne,oe,ce){var ue=J[0],Ae=J[1],pe=ne[0],xe=ne[1];switch(K){case 2:return[new Vector(Math.round(oe.left),Math.round(oe.top+Ae)),new Vector(Math.round(oe.left+oe.width),Math.round(oe.top+Ae)),new Vector(Math.round(oe.left+oe.width),Math.round(xe+oe.top+Ae)),new Vector(Math.round(oe.left),Math.round(xe+oe.top+Ae))];case 3:return[new Vector(Math.round(oe.left+ue),Math.round(oe.top)),new Vector(Math.round(oe.left+ue+pe),Math.round(oe.top)),new Vector(Math.round(oe.left+ue+pe),Math.round(oe.height+oe.top)),new Vector(Math.round(oe.left+ue),Math.round(oe.height+oe.top))];case 1:return[new Vector(Math.round(oe.left+ue),Math.round(oe.top+Ae)),new Vector(Math.round(oe.left+ue+pe),Math.round(oe.top+Ae)),new Vector(Math.round(oe.left+ue+pe),Math.round(oe.top+Ae+xe)),new Vector(Math.round(oe.left+ue),Math.round(oe.top+Ae+xe))];default:return[new Vector(Math.round(ce.left),Math.round(ce.top)),new Vector(Math.round(ce.left+ce.width),Math.round(ce.top)),new Vector(Math.round(ce.left+ce.width),Math.round(ce.height+ce.top)),new Vector(Math.round(ce.left),Math.round(ce.height+ce.top))]}},SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",SAMPLE_TEXT="Hidden Text",FontMetrics=function(){function K(J){this._data={},this._document=J}return K.prototype.parseMetrics=function(J,ne){var oe=this._document.createElement("div"),ce=this._document.createElement("img"),ue=this._document.createElement("span"),Ae=this._document.body;oe.style.visibility="hidden",oe.style.fontFamily=J,oe.style.fontSize=ne,oe.style.margin="0",oe.style.padding="0",oe.style.whiteSpace="nowrap",Ae.appendChild(oe),ce.src=SMALL_IMAGE,ce.width=1,ce.height=1,ce.style.margin="0",ce.style.padding="0",ce.style.verticalAlign="baseline",ue.style.fontFamily=J,ue.style.fontSize=ne,ue.style.margin="0",ue.style.padding="0",ue.appendChild(this._document.createTextNode(SAMPLE_TEXT)),oe.appendChild(ue),oe.appendChild(ce);var pe=ce.offsetTop-ue.offsetTop+2;oe.removeChild(ue),oe.appendChild(this._document.createTextNode(SAMPLE_TEXT)),oe.style.lineHeight="normal",ce.style.verticalAlign="super";var xe=ce.offsetTop-oe.offsetTop+2;return Ae.removeChild(oe),{baseline:pe,middle:xe}},K.prototype.getMetrics=function(J,ne){var oe=J+" "+ne;return typeof this._data[oe]>"u"&&(this._data[oe]=this.parseMetrics(J,ne)),this._data[oe]},K}(),Renderer=function(){function K(J,ne){this.context=J,this.options=ne}return K}(),MASK_OFFSET=1e4,CanvasRenderer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce._activeEffects=[],ce.canvas=oe.canvas?oe.canvas:document.createElement("canvas"),ce.ctx=ce.canvas.getContext("2d"),oe.canvas||(ce.canvas.width=Math.floor(oe.width*oe.scale),ce.canvas.height=Math.floor(oe.height*oe.scale),ce.canvas.style.width=oe.width+"px",ce.canvas.style.height=oe.height+"px"),ce.fontMetrics=new FontMetrics(document),ce.ctx.scale(ce.options.scale,ce.options.scale),ce.ctx.translate(-oe.x,-oe.y),ce.ctx.textBaseline="bottom",ce._activeEffects=[],ce.context.logger.debug("Canvas renderer initialized ("+oe.width+"x"+oe.height+") with scale "+oe.scale),ce}return J.prototype.applyEffects=function(ne){for(var oe=this;this._activeEffects.length;)this.popEffect();ne.forEach(function(ce){return oe.applyEffect(ce)})},J.prototype.applyEffect=function(ne){this.ctx.save(),isOpacityEffect(ne)&&(this.ctx.globalAlpha=ne.opacity),isTransformEffect(ne)&&(this.ctx.translate(ne.offsetX,ne.offsetY),this.ctx.transform(ne.matrix[0],ne.matrix[1],ne.matrix[2],ne.matrix[3],ne.matrix[4],ne.matrix[5]),this.ctx.translate(-ne.offsetX,-ne.offsetY)),isClipEffect(ne)&&(this.path(ne.path),this.ctx.clip()),this._activeEffects.push(ne)},J.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},J.prototype.renderStack=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe;return __generator$1(this,function(ce){switch(ce.label){case 0:return oe=ne.element.container.styles,oe.isVisible()?[4,this.renderStackContent(ne)]:[3,2];case 1:ce.sent(),ce.label=2;case 2:return[2]}})})},J.prototype.renderNode=function(ne){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(oe){switch(oe.label){case 0:if(contains(ne.container.flags,16))debugger;return ne.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(ne)]:[3,3];case 1:return oe.sent(),[4,this.renderNodeContent(ne)];case 2:oe.sent(),oe.label=3;case 3:return[2]}})})},J.prototype.renderTextWithLetterSpacing=function(ne,oe,ce){var ue=this;if(oe===0)this.ctx.fillText(ne.text,ne.bounds.left,ne.bounds.top+ce);else{var Ae=segmentGraphemes(ne.text);Ae.reduce(function(pe,xe){return ue.ctx.fillText(xe,pe,ne.bounds.top+ce),pe+ue.ctx.measureText(xe).width},ne.bounds.left)}},J.prototype.createFontStyle=function(ne){var oe=ne.fontVariant.filter(function(Ae){return Ae==="normal"||Ae==="small-caps"}).join(""),ce=fixIOSSystemFonts(ne.fontFamily).join(", "),ue=isDimensionToken(ne.fontSize)?""+ne.fontSize.number+ne.fontSize.unit:ne.fontSize.number+"px";return[[ne.fontStyle,oe,ne.fontWeight,ue,ce].join(" "),ce,ue]},J.prototype.renderTextNode=function(ne,oe){return __awaiter$1(this,void 0,void 0,function(){var ce,ue,Ae,pe,xe,me,ge,ye,Se=this;return __generator$1(this,function(Te){return ce=this.createFontStyle(oe),ue=ce[0],Ae=ce[1],pe=ce[2],this.ctx.font=ue,this.ctx.direction=oe.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",xe=this.fontMetrics.getMetrics(Ae,pe),me=xe.baseline,ge=xe.middle,ye=oe.paintOrder,ne.textBounds.forEach(function(Ne){ye.forEach(function($e){switch($e){case 0:Se.ctx.fillStyle=asString(oe.color),Se.renderTextWithLetterSpacing(Ne,oe.letterSpacing,me);var ke=oe.textShadow;ke.length&&Ne.text.trim().length&&(ke.slice(0).reverse().forEach(function(je){Se.ctx.shadowColor=asString(je.color),Se.ctx.shadowOffsetX=je.offsetX.number*Se.options.scale,Se.ctx.shadowOffsetY=je.offsetY.number*Se.options.scale,Se.ctx.shadowBlur=je.blur.number,Se.renderTextWithLetterSpacing(Ne,oe.letterSpacing,me)}),Se.ctx.shadowColor="",Se.ctx.shadowOffsetX=0,Se.ctx.shadowOffsetY=0,Se.ctx.shadowBlur=0),oe.textDecorationLine.length&&(Se.ctx.fillStyle=asString(oe.textDecorationColor||oe.color),oe.textDecorationLine.forEach(function(je){switch(je){case 1:Se.ctx.fillRect(Ne.bounds.left,Math.round(Ne.bounds.top+me),Ne.bounds.width,1);break;case 2:Se.ctx.fillRect(Ne.bounds.left,Math.round(Ne.bounds.top),Ne.bounds.width,1);break;case 3:Se.ctx.fillRect(Ne.bounds.left,Math.ceil(Ne.bounds.top+ge),Ne.bounds.width,1);break}}));break;case 1:oe.webkitTextStrokeWidth&&Ne.text.trim().length&&(Se.ctx.strokeStyle=asString(oe.webkitTextStrokeColor),Se.ctx.lineWidth=oe.webkitTextStrokeWidth,Se.ctx.lineJoin=window.chrome?"miter":"round",Se.ctx.strokeText(Ne.text,Ne.bounds.left,Ne.bounds.top+me)),Se.ctx.strokeStyle="",Se.ctx.lineWidth=0,Se.ctx.lineJoin="miter";break}})}),[2]})})},J.prototype.renderReplacedElement=function(ne,oe,ce){if(ce&&ne.intrinsicWidth>0&&ne.intrinsicHeight>0){var ue=contentBox(ne),Ae=calculatePaddingBoxPath(oe);this.path(Ae),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(ce,0,0,ne.intrinsicWidth,ne.intrinsicHeight,ue.left,ue.top,ue.width,ue.height),this.ctx.restore()}},J.prototype.renderNodeContent=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe,ce,ue,Ae,pe,xe,Ke,Ke,me,ge,ye,Se,ze,Te,Ne,Xe,$e,ke,je,Ke,Ye,ze,Xe;return __generator$1(this,function(Je){switch(Je.label){case 0:this.applyEffects(ne.getEffects(4)),oe=ne.container,ce=ne.curves,ue=oe.styles,Ae=0,pe=oe.textNodes,Je.label=1;case 1:return Ae<pe.length?(xe=pe[Ae],[4,this.renderTextNode(xe,ue)]):[3,4];case 2:Je.sent(),Je.label=3;case 3:return Ae++,[3,1];case 4:if(!(oe instanceof ImageElementContainer))return[3,8];Je.label=5;case 5:return Je.trys.push([5,7,,8]),[4,this.context.cache.match(oe.src)];case 6:return Ke=Je.sent(),this.renderReplacedElement(oe,ce,Ke),[3,8];case 7:return Je.sent(),this.context.logger.error("Error loading image "+oe.src),[3,8];case 8:if(oe instanceof CanvasElementContainer&&this.renderReplacedElement(oe,ce,oe.canvas),!(oe instanceof SVGElementContainer))return[3,12];Je.label=9;case 9:return Je.trys.push([9,11,,12]),[4,this.context.cache.match(oe.svg)];case 10:return Ke=Je.sent(),this.renderReplacedElement(oe,ce,Ke),[3,12];case 11:return Je.sent(),this.context.logger.error("Error loading svg "+oe.svg.substring(0,255)),[3,12];case 12:return oe instanceof IFrameElementContainer&&oe.tree?(me=new J(this.context,{scale:this.options.scale,backgroundColor:oe.backgroundColor,x:0,y:0,width:oe.width,height:oe.height}),[4,me.render(oe.tree)]):[3,14];case 13:ge=Je.sent(),oe.width&&oe.height&&this.ctx.drawImage(ge,0,0,oe.width,oe.height,oe.bounds.left,oe.bounds.top,oe.bounds.width,oe.bounds.height),Je.label=14;case 14:if(oe instanceof InputElementContainer&&(ye=Math.min(oe.bounds.width,oe.bounds.height),oe.type===CHECKBOX?oe.checked&&(this.ctx.save(),this.path([new Vector(oe.bounds.left+ye*.39363,oe.bounds.top+ye*.79),new Vector(oe.bounds.left+ye*.16,oe.bounds.top+ye*.5549),new Vector(oe.bounds.left+ye*.27347,oe.bounds.top+ye*.44071),new Vector(oe.bounds.left+ye*.39694,oe.bounds.top+ye*.5649),new Vector(oe.bounds.left+ye*.72983,oe.bounds.top+ye*.23),new Vector(oe.bounds.left+ye*.84,oe.bounds.top+ye*.34085),new Vector(oe.bounds.left+ye*.39363,oe.bounds.top+ye*.79)]),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore()):oe.type===RADIO&&oe.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(oe.bounds.left+ye/2,oe.bounds.top+ye/2,ye/4,0,Math.PI*2,!0),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore())),isTextInputElement(oe)&&oe.value.length){switch(Se=this.createFontStyle(ue),ze=Se[0],Te=Se[1],Ne=this.fontMetrics.getMetrics(ze,Te).baseline,this.ctx.font=ze,this.ctx.fillStyle=asString(ue.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=canvasTextAlign(oe.styles.textAlign),Xe=contentBox(oe),$e=0,oe.styles.textAlign){case 1:$e+=Xe.width/2;break;case 2:$e+=Xe.width;break}ke=Xe.add($e,0,0,-Xe.height/2+1),this.ctx.save(),this.path([new Vector(Xe.left,Xe.top),new Vector(Xe.left+Xe.width,Xe.top),new Vector(Xe.left+Xe.width,Xe.top+Xe.height),new Vector(Xe.left,Xe.top+Xe.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new TextBounds(oe.value,ke),ue.letterSpacing,Ne),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!contains(oe.styles.display,2048))return[3,20];if(oe.styles.listStyleImage===null)return[3,19];if(je=oe.styles.listStyleImage,je.type!==0)return[3,18];Ke=void 0,Ye=je.url,Je.label=15;case 15:return Je.trys.push([15,17,,18]),[4,this.context.cache.match(Ye)];case 16:return Ke=Je.sent(),this.ctx.drawImage(Ke,oe.bounds.left-(Ke.width+10),oe.bounds.top),[3,18];case 17:return Je.sent(),this.context.logger.error("Error loading list-style-image "+Ye),[3,18];case 18:return[3,20];case 19:ne.listValue&&oe.styles.listStyleType!==-1&&(ze=this.createFontStyle(ue)[0],this.ctx.font=ze,this.ctx.fillStyle=asString(ue.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Xe=new Bounds(oe.bounds.left,oe.bounds.top+getAbsoluteValue(oe.styles.paddingTop,oe.bounds.width),oe.bounds.width,computeLineHeight(ue.lineHeight,ue.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new TextBounds(ne.listValue,Xe),ue.letterSpacing,computeLineHeight(ue.lineHeight,ue.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Je.label=20;case 20:return[2]}})})},J.prototype.renderStackContent=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe,ce,je,ue,Ae,je,pe,xe,je,me,ge,je,ye,Se,je,Te,Ne,je,$e,ke,je;return __generator$1(this,function(Ke){switch(Ke.label){case 0:if(contains(ne.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(ne.element)];case 1:Ke.sent(),oe=0,ce=ne.negativeZIndex,Ke.label=2;case 2:return oe<ce.length?(je=ce[oe],[4,this.renderStack(je)]):[3,5];case 3:Ke.sent(),Ke.label=4;case 4:return oe++,[3,2];case 5:return[4,this.renderNodeContent(ne.element)];case 6:Ke.sent(),ue=0,Ae=ne.nonInlineLevel,Ke.label=7;case 7:return ue<Ae.length?(je=Ae[ue],[4,this.renderNode(je)]):[3,10];case 8:Ke.sent(),Ke.label=9;case 9:return ue++,[3,7];case 10:pe=0,xe=ne.nonPositionedFloats,Ke.label=11;case 11:return pe<xe.length?(je=xe[pe],[4,this.renderStack(je)]):[3,14];case 12:Ke.sent(),Ke.label=13;case 13:return pe++,[3,11];case 14:me=0,ge=ne.nonPositionedInlineLevel,Ke.label=15;case 15:return me<ge.length?(je=ge[me],[4,this.renderStack(je)]):[3,18];case 16:Ke.sent(),Ke.label=17;case 17:return me++,[3,15];case 18:ye=0,Se=ne.inlineLevel,Ke.label=19;case 19:return ye<Se.length?(je=Se[ye],[4,this.renderNode(je)]):[3,22];case 20:Ke.sent(),Ke.label=21;case 21:return ye++,[3,19];case 22:Te=0,Ne=ne.zeroOrAutoZIndexOrTransformedOrOpacity,Ke.label=23;case 23:return Te<Ne.length?(je=Ne[Te],[4,this.renderStack(je)]):[3,26];case 24:Ke.sent(),Ke.label=25;case 25:return Te++,[3,23];case 26:$e=0,ke=ne.positiveZIndex,Ke.label=27;case 27:return $e<ke.length?(je=ke[$e],[4,this.renderStack(je)]):[3,30];case 28:Ke.sent(),Ke.label=29;case 29:return $e++,[3,27];case 30:return[2]}})})},J.prototype.mask=function(ne){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(ne.slice(0).reverse()),this.ctx.closePath()},J.prototype.path=function(ne){this.ctx.beginPath(),this.formatPath(ne),this.ctx.closePath()},J.prototype.formatPath=function(ne){var oe=this;ne.forEach(function(ce,ue){var Ae=isBezierCurve(ce)?ce.start:ce;ue===0?oe.ctx.moveTo(Ae.x,Ae.y):oe.ctx.lineTo(Ae.x,Ae.y),isBezierCurve(ce)&&oe.ctx.bezierCurveTo(ce.startControl.x,ce.startControl.y,ce.endControl.x,ce.endControl.y,ce.end.x,ce.end.y)})},J.prototype.renderRepeat=function(ne,oe,ce,ue){this.path(ne),this.ctx.fillStyle=oe,this.ctx.translate(ce,ue),this.ctx.fill(),this.ctx.translate(-ce,-ue)},J.prototype.resizeImage=function(ne,oe,ce){var ue;if(ne.width===oe&&ne.height===ce)return ne;var Ae=(ue=this.canvas.ownerDocument)!==null&&ue!==void 0?ue:document,pe=Ae.createElement("canvas");pe.width=Math.max(1,oe),pe.height=Math.max(1,ce);var xe=pe.getContext("2d");return xe.drawImage(ne,0,0,ne.width,ne.height,0,0,oe,ce),pe},J.prototype.renderBackgroundImage=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe,ce,ue,Ae,pe,xe;return __generator$1(this,function(me){switch(me.label){case 0:oe=ne.styles.backgroundImage.length-1,ce=function(ge){var ye,Se,Te,nt,Fe,qe,Be,Re,Ze,Ne,nt,Fe,qe,Be,Re,$e,ke,je,Ke,Ye,ze,Xe,Je,rt,Ze,et,nt,Ge,ve,Be,Re,Ie,Fe,qe,We,Ue,_e,Qe,tt,it,at,ot;return __generator$1(this,function(lt){switch(lt.label){case 0:if(ge.type!==0)return[3,5];ye=void 0,Se=ge.url,lt.label=1;case 1:return lt.trys.push([1,3,,4]),[4,ue.context.cache.match(Se)];case 2:return ye=lt.sent(),[3,4];case 3:return lt.sent(),ue.context.logger.error("Error loading background-image "+Se),[3,4];case 4:return ye&&(Te=calculateBackgroundRendering(ne,oe,[ye.width,ye.height,ye.width/ye.height]),nt=Te[0],Fe=Te[1],qe=Te[2],Be=Te[3],Re=Te[4],Ze=ue.ctx.createPattern(ue.resizeImage(ye,Be,Re),"repeat"),ue.renderRepeat(nt,Ze,Fe,qe)),[3,6];case 5:isLinearGradient(ge)?(Ne=calculateBackgroundRendering(ne,oe,[null,null,null]),nt=Ne[0],Fe=Ne[1],qe=Ne[2],Be=Ne[3],Re=Ne[4],$e=calculateGradientDirection(ge.angle,Be,Re),ke=$e[0],je=$e[1],Ke=$e[2],Ye=$e[3],ze=$e[4],Xe=document.createElement("canvas"),Xe.width=Be,Xe.height=Re,Je=Xe.getContext("2d"),rt=Je.createLinearGradient(je,Ye,Ke,ze),processColorStops(ge.stops,ke).forEach(function(st){return rt.addColorStop(st.stop,asString(st.color))}),Je.fillStyle=rt,Je.fillRect(0,0,Be,Re),Be>0&&Re>0&&(Ze=ue.ctx.createPattern(Xe,"repeat"),ue.renderRepeat(nt,Ze,Fe,qe))):isRadialGradient(ge)&&(et=calculateBackgroundRendering(ne,oe,[null,null,null]),nt=et[0],Ge=et[1],ve=et[2],Be=et[3],Re=et[4],Ie=ge.position.length===0?[FIFTY_PERCENT]:ge.position,Fe=getAbsoluteValue(Ie[0],Be),qe=getAbsoluteValue(Ie[Ie.length-1],Re),We=calculateRadius(ge,Fe,qe,Be,Re),Ue=We[0],_e=We[1],Ue>0&&_e>0&&(Qe=ue.ctx.createRadialGradient(Ge+Fe,ve+qe,0,Ge+Fe,ve+qe,Ue),processColorStops(ge.stops,Ue*2).forEach(function(st){return Qe.addColorStop(st.stop,asString(st.color))}),ue.path(nt),ue.ctx.fillStyle=Qe,Ue!==_e?(tt=ne.bounds.left+.5*ne.bounds.width,it=ne.bounds.top+.5*ne.bounds.height,at=_e/Ue,ot=1/at,ue.ctx.save(),ue.ctx.translate(tt,it),ue.ctx.transform(1,0,0,at,0,0),ue.ctx.translate(-tt,-it),ue.ctx.fillRect(Ge,ot*(ve-it)+it,Be,Re*ot),ue.ctx.restore()):ue.ctx.fill())),lt.label=6;case 6:return oe--,[2]}})},ue=this,Ae=0,pe=ne.styles.backgroundImage.slice(0).reverse(),me.label=1;case 1:return Ae<pe.length?(xe=pe[Ae],[5,ce(xe)]):[3,4];case 2:me.sent(),me.label=3;case 3:return Ae++,[3,1];case 4:return[2]}})})},J.prototype.renderSolidBorder=function(ne,oe,ce){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(ue){return this.path(parsePathForBorder(ce,oe)),this.ctx.fillStyle=asString(ne),this.ctx.fill(),[2]})})},J.prototype.renderDoubleBorder=function(ne,oe,ce,ue){return __awaiter$1(this,void 0,void 0,function(){var Ae,pe;return __generator$1(this,function(xe){switch(xe.label){case 0:return oe<3?[4,this.renderSolidBorder(ne,ce,ue)]:[3,2];case 1:return xe.sent(),[2];case 2:return Ae=parsePathForBorderDoubleOuter(ue,ce),this.path(Ae),this.ctx.fillStyle=asString(ne),this.ctx.fill(),pe=parsePathForBorderDoubleInner(ue,ce),this.path(pe),this.ctx.fill(),[2]}})})},J.prototype.renderNodeBackgroundAndBorders=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe,ce,ue,Ae,pe,xe,me,ge,ye=this;return __generator$1(this,function(Se){switch(Se.label){case 0:return this.applyEffects(ne.getEffects(2)),oe=ne.container.styles,ce=!isTransparent(oe.backgroundColor)||oe.backgroundImage.length,ue=[{style:oe.borderTopStyle,color:oe.borderTopColor,width:oe.borderTopWidth},{style:oe.borderRightStyle,color:oe.borderRightColor,width:oe.borderRightWidth},{style:oe.borderBottomStyle,color:oe.borderBottomColor,width:oe.borderBottomWidth},{style:oe.borderLeftStyle,color:oe.borderLeftColor,width:oe.borderLeftWidth}],Ae=calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(oe.backgroundClip,0),ne.curves),ce||oe.boxShadow.length?(this.ctx.save(),this.path(Ae),this.ctx.clip(),isTransparent(oe.backgroundColor)||(this.ctx.fillStyle=asString(oe.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(ne.container)]):[3,2];case 1:Se.sent(),this.ctx.restore(),oe.boxShadow.slice(0).reverse().forEach(function(Te){ye.ctx.save();var Ne=calculateBorderBoxPath(ne.curves),$e=Te.inset?0:MASK_OFFSET,ke=transformPath(Ne,-$e+(Te.inset?1:-1)*Te.spread.number,(Te.inset?1:-1)*Te.spread.number,Te.spread.number*(Te.inset?-2:2),Te.spread.number*(Te.inset?-2:2));Te.inset?(ye.path(Ne),ye.ctx.clip(),ye.mask(ke)):(ye.mask(Ne),ye.ctx.clip(),ye.path(ke)),ye.ctx.shadowOffsetX=Te.offsetX.number+$e,ye.ctx.shadowOffsetY=Te.offsetY.number,ye.ctx.shadowColor=asString(Te.color),ye.ctx.shadowBlur=Te.blur.number,ye.ctx.fillStyle=Te.inset?asString(Te.color):"rgba(0,0,0,1)",ye.ctx.fill(),ye.ctx.restore()}),Se.label=2;case 2:pe=0,xe=0,me=ue,Se.label=3;case 3:return xe<me.length?(ge=me[xe],ge.style!==0&&!isTransparent(ge.color)&&ge.width>0?ge.style!==2?[3,5]:[4,this.renderDashedDottedBorder(ge.color,ge.width,pe,ne.curves,2)]:[3,11]):[3,13];case 4:return Se.sent(),[3,11];case 5:return ge.style!==3?[3,7]:[4,this.renderDashedDottedBorder(ge.color,ge.width,pe,ne.curves,3)];case 6:return Se.sent(),[3,11];case 7:return ge.style!==4?[3,9]:[4,this.renderDoubleBorder(ge.color,ge.width,pe,ne.curves)];case 8:return Se.sent(),[3,11];case 9:return[4,this.renderSolidBorder(ge.color,pe,ne.curves)];case 10:Se.sent(),Se.label=11;case 11:pe++,Se.label=12;case 12:return xe++,[3,3];case 13:return[2]}})})},J.prototype.renderDashedDottedBorder=function(ne,oe,ce,ue,Ae){return __awaiter$1(this,void 0,void 0,function(){var pe,xe,me,ge,ye,Se,Te,Ne,$e,ke,je,Ke,Ye,ze,Xe,Je,Xe,Je;return __generator$1(this,function(rt){return this.ctx.save(),pe=parsePathForBorderStroke(ue,ce),xe=parsePathForBorder(ue,ce),Ae===2&&(this.path(xe),this.ctx.clip()),isBezierCurve(xe[0])?(me=xe[0].start.x,ge=xe[0].start.y):(me=xe[0].x,ge=xe[0].y),isBezierCurve(xe[1])?(ye=xe[1].end.x,Se=xe[1].end.y):(ye=xe[1].x,Se=xe[1].y),ce===0||ce===2?Te=Math.abs(me-ye):Te=Math.abs(ge-Se),this.ctx.beginPath(),Ae===3?this.formatPath(pe):this.formatPath(xe.slice(0,2)),Ne=oe<3?oe*3:oe*2,$e=oe<3?oe*2:oe,Ae===3&&(Ne=oe,$e=oe),ke=!0,Te<=Ne*2?ke=!1:Te<=Ne*2+$e?(je=Te/(2*Ne+$e),Ne*=je,$e*=je):(Ke=Math.floor((Te+$e)/(Ne+$e)),Ye=(Te-Ke*Ne)/(Ke-1),ze=(Te-(Ke+1)*Ne)/Ke,$e=ze<=0||Math.abs($e-Ye)<Math.abs($e-ze)?Ye:ze),ke&&(Ae===3?this.ctx.setLineDash([0,Ne+$e]):this.ctx.setLineDash([Ne,$e])),Ae===3?(this.ctx.lineCap="round",this.ctx.lineWidth=oe):this.ctx.lineWidth=oe*2+1.1,this.ctx.strokeStyle=asString(ne),this.ctx.stroke(),this.ctx.setLineDash([]),Ae===2&&(isBezierCurve(xe[0])&&(Xe=xe[3],Je=xe[0],this.ctx.beginPath(),this.formatPath([new Vector(Xe.end.x,Xe.end.y),new Vector(Je.start.x,Je.start.y)]),this.ctx.stroke()),isBezierCurve(xe[1])&&(Xe=xe[1],Je=xe[2],this.ctx.beginPath(),this.formatPath([new Vector(Xe.end.x,Xe.end.y),new Vector(Je.start.x,Je.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},J.prototype.render=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe;return __generator$1(this,function(ce){switch(ce.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),oe=parseStackingContexts(ne),[4,this.renderStack(oe)];case 1:return ce.sent(),this.applyEffects([]),[2,this.canvas]}})})},J}(Renderer),isTextInputElement=function(K){return K instanceof TextareaElementContainer||K instanceof SelectElementContainer?!0:K instanceof InputElementContainer&&K.type!==RADIO&&K.type!==CHECKBOX},calculateBackgroundCurvedPaintingArea=function(K,J){switch(K){case 0:return calculateBorderBoxPath(J);case 2:return calculateContentBoxPath(J);case 1:default:return calculatePaddingBoxPath(J)}},canvasTextAlign=function(K){switch(K){case 1:return"center";case 2:return"right";case 0:default:return"left"}},iOSBrokenFonts=["-apple-system","system-ui"],fixIOSSystemFonts=function(K){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?K.filter(function(J){return iOSBrokenFonts.indexOf(J)===-1}):K},ForeignObjectRenderer=function(K){__extends$1(J,K);function J(ne,oe){var ce=K.call(this,ne,oe)||this;return ce.canvas=oe.canvas?oe.canvas:document.createElement("canvas"),ce.ctx=ce.canvas.getContext("2d"),ce.options=oe,ce.canvas.width=Math.floor(oe.width*oe.scale),ce.canvas.height=Math.floor(oe.height*oe.scale),ce.canvas.style.width=oe.width+"px",ce.canvas.style.height=oe.height+"px",ce.ctx.scale(ce.options.scale,ce.options.scale),ce.ctx.translate(-oe.x,-oe.y),ce.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+oe.width+"x"+oe.height+" at "+oe.x+","+oe.y+") with scale "+oe.scale),ce}return J.prototype.render=function(ne){return __awaiter$1(this,void 0,void 0,function(){var oe,ce;return __generator$1(this,function(ue){switch(ue.label){case 0:return oe=createForeignObjectSVG(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,ne),[4,loadSerializedSVG(oe)];case 1:return ce=ue.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(ce,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},J}(Renderer),loadSerializedSVG=function(K){return new Promise(function(J,ne){var oe=new Image;oe.onload=function(){J(oe)},oe.onerror=ne,oe.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(K))})},Logger=function(){function K(J){var ne=J.id,oe=J.enabled;this.id=ne,this.enabled=oe,this.start=Date.now()}return K.prototype.debug=function(){for(var J=[],ne=0;ne<arguments.length;ne++)J[ne]=arguments[ne];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,__spreadArray$1([this.id,this.getTime()+"ms"],J)):this.info.apply(this,J))},K.prototype.getTime=function(){return Date.now()-this.start},K.prototype.info=function(){for(var J=[],ne=0;ne<arguments.length;ne++)J[ne]=arguments[ne];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,__spreadArray$1([this.id,this.getTime()+"ms"],J))},K.prototype.warn=function(){for(var J=[],ne=0;ne<arguments.length;ne++)J[ne]=arguments[ne];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,__spreadArray$1([this.id,this.getTime()+"ms"],J)):this.info.apply(this,J))},K.prototype.error=function(){for(var J=[],ne=0;ne<arguments.length;ne++)J[ne]=arguments[ne];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,__spreadArray$1([this.id,this.getTime()+"ms"],J)):this.info.apply(this,J))},K.instances={},K}(),Context=function(){function K(J,ne){var oe;this.windowBounds=ne,this.instanceName="#"+K.instanceCount++,this.logger=new Logger({id:this.instanceName,enabled:J.logging}),this.cache=(oe=J.cache)!==null&&oe!==void 0?oe:new Cache(this,J)}return K.instanceCount=1,K}(),html2canvas=function(K,J){return J===void 0&&(J={}),renderElement(K,J)};typeof window<"u"&&CacheStorage.setContext(window);var renderElement=function(K,J){return __awaiter$1(void 0,void 0,void 0,function(){var ne,oe,ce,ue,Ae,pe,xe,me,ge,ye,Se,Te,Ne,$e,ke,je,Ke,Ye,ze,Xe,rt,Je,rt,Ze,et,nt,Ge,ve,Be,Re,Ie,Fe,qe,We,Ue,_e,Qe,tt,it,at;return __generator$1(this,function(ot){switch(ot.label){case 0:if(!K||typeof K!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(ne=K.ownerDocument,!ne)throw new Error("Element is not attached to a Document");if(oe=ne.defaultView,!oe)throw new Error("Document is not attached to a Window");return ce={allowTaint:(Ze=J.allowTaint)!==null&&Ze!==void 0?Ze:!1,imageTimeout:(et=J.imageTimeout)!==null&&et!==void 0?et:15e3,proxy:J.proxy,useCORS:(nt=J.useCORS)!==null&&nt!==void 0?nt:!1},ue=__assign$1({logging:(Ge=J.logging)!==null&&Ge!==void 0?Ge:!0,cache:J.cache},ce),Ae={windowWidth:(ve=J.windowWidth)!==null&&ve!==void 0?ve:oe.innerWidth,windowHeight:(Be=J.windowHeight)!==null&&Be!==void 0?Be:oe.innerHeight,scrollX:(Re=J.scrollX)!==null&&Re!==void 0?Re:oe.pageXOffset,scrollY:(Ie=J.scrollY)!==null&&Ie!==void 0?Ie:oe.pageYOffset},pe=new Bounds(Ae.scrollX,Ae.scrollY,Ae.windowWidth,Ae.windowHeight),xe=new Context(ue,pe),me=(Fe=J.foreignObjectRendering)!==null&&Fe!==void 0?Fe:!1,ge={allowTaint:(qe=J.allowTaint)!==null&&qe!==void 0?qe:!1,onclone:J.onclone,ignoreElements:J.ignoreElements,inlineImages:me,copyStyles:me},xe.logger.debug("Starting document clone with size "+pe.width+"x"+pe.height+" scrolled to "+-pe.left+","+-pe.top),ye=new DocumentCloner(xe,K,ge),Se=ye.clonedReferenceElement,Se?[4,ye.toIFrame(ne,pe)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Te=ot.sent(),Ne=isBodyElement(Se)||isHTMLElement(Se)?parseDocumentSize(Se.ownerDocument):parseBounds(xe,Se),$e=Ne.width,ke=Ne.height,je=Ne.left,Ke=Ne.top,Ye=parseBackgroundColor(xe,Se,J.backgroundColor),ze={canvas:J.canvas,backgroundColor:Ye,scale:(Ue=(We=J.scale)!==null&&We!==void 0?We:oe.devicePixelRatio)!==null&&Ue!==void 0?Ue:1,x:((_e=J.x)!==null&&_e!==void 0?_e:0)+je,y:((Qe=J.y)!==null&&Qe!==void 0?Qe:0)+Ke,width:(tt=J.width)!==null&&tt!==void 0?tt:Math.ceil($e),height:(it=J.height)!==null&&it!==void 0?it:Math.ceil(ke)},me?(xe.logger.debug("Document cloned, using foreign object rendering"),rt=new ForeignObjectRenderer(xe,ze),[4,rt.render(Se)]):[3,3];case 2:return Xe=ot.sent(),[3,5];case 3:return xe.logger.debug("Document cloned, element located at "+je+","+Ke+" with size "+$e+"x"+ke+" using computed rendering"),xe.logger.debug("Starting DOM parsing"),Je=parseTree(xe,Se),Ye===Je.styles.backgroundColor&&(Je.styles.backgroundColor=COLORS.TRANSPARENT),xe.logger.debug("Starting renderer for element at "+ze.x+","+ze.y+" with size "+ze.width+"x"+ze.height),rt=new CanvasRenderer(xe,ze),[4,rt.render(Je)];case 4:Xe=ot.sent(),ot.label=5;case 5:return(!((at=J.removeContainer)!==null&&at!==void 0)||at)&&(DocumentCloner.destroy(Te)||xe.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),xe.logger.debug("Finished rendering"),[2,Xe]}})})},parseBackgroundColor=function(K,J,ne){var oe=J.ownerDocument,ce=oe.documentElement?parseColor(K,getComputedStyle(oe.documentElement).backgroundColor):COLORS.TRANSPARENT,ue=oe.body?parseColor(K,getComputedStyle(oe.body).backgroundColor):COLORS.TRANSPARENT,Ae=typeof ne=="string"?parseColor(K,ne):ne===null?COLORS.TRANSPARENT:4294967295;return J===oe.documentElement?isTransparent(ce)?isTransparent(ue)?Ae:ue:ce:Ae};const title="_title_d9wt9_1",styles$g={title},InputTitle=({title:K})=>jsxRuntimeExports.jsx("div",{className:styles$g.title,children:K}),getIsValidEmail=K=>/^[a-z0-9][-a-z0-9._]+@([-a-z0-9]+\.)+[a-z]{2,5}$/.test(K),container$7="_container_q85y8_1",fieldContainer="_fieldContainer_q85y8_8",focusedContainer="_focusedContainer_q85y8_20",invalidField="_invalidField_q85y8_24",fieldTag="_fieldTag_q85y8_28",invalidTag="_invalidTag_q85y8_46",fieldBlock="_fieldBlock_q85y8_51",errorMessage="_errorMessage_q85y8_57",styles$f={container:container$7,fieldContainer,focusedContainer,invalidField,fieldTag,invalidTag,fieldBlock,errorMessage},ToField=({emailTags:K=[],setEmailTags:J})=>{const{t:ne}=useTranslation(),[oe,ce]=reactExports.useState(""),[ue,Ae]=reactExports.useState(""),[pe,xe]=reactExports.useState(!1),[me,ge]=reactExports.useState(!0);reactExports.useEffect(()=>{const Ke=K.find(Ye=>!getIsValidEmail(Ye));ge(!Ke)},[K]);const ye=Ke=>{Ae(Ke.currentTarget.textContent)},Se=Ke=>{const Ye=K.filter((ze,Xe)=>Xe!==Ke);J(Ye)},Te=(Ke,Ye)=>{ce(""),ue&&(K[Ye]=Ke,J(K),Ae(""))},Ne=()=>{ce(""),xe(!1),oe&&J([...K,oe])},$e=Ke=>{(Ke.code==="Space"||Ke.code==="Enter")&&Ne()},ke=!me||!K.length,je=()=>{switch(!0){case!me:return ne("validationMessage.invalidEmail");case!K.length:return ne("validationMessage.emptyTagsArray");default:return""}};return jsxRuntimeExports.jsxs("div",{className:styles$f.container,children:[jsxRuntimeExports.jsxs("div",{className:cx(styles$f.fieldContainer,{[styles$f.focusedContainer]:pe,[styles$f.invalidField]:!me||!K.length}),children:[K.map((Ke,Ye)=>Ke.length?jsxRuntimeExports.jsxs("div",{contentEditable:"true",suppressContentEditableWarning:!0,className:cx(styles$f.fieldTag,{[styles$f.invalidTag]:!getIsValidEmail(Ke)}),onBlur:()=>Te(Ke,Ye),onInput:ye,children:[jsxRuntimeExports.jsx("div",{children:Ke}),jsxRuntimeExports.jsx(_c,{size:"XS",onClick:()=>Se(Ye)})]},Ye):null),jsxRuntimeExports.jsx(Ml,{variant:"borderless",className:styles$f.fieldBlock,value:oe,onChange:Ke=>ce(Ke.trimStart()),onKeyDown:$e,onBlur:Ne,onFocus:()=>xe(!0)})]}),ke&&jsxRuntimeExports.jsx("div",{className:styles$f.errorMessage,children:je()})]})};function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$2(K,J){return K===J||K!==K&&J!==J}var eq_1=eq$2,eq$1=eq_1;function assocIndexOf$4(K,J){for(var ne=K.length;ne--;)if(eq$1(K[ne][0],J))return ne;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(K){var J=this.__data__,ne=assocIndexOf$3(J,K);if(ne<0)return!1;var oe=J.length-1;return ne==oe?J.pop():splice.call(J,ne,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(K){var J=this.__data__,ne=assocIndexOf$2(J,K);return ne<0?void 0:J[ne][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(K){return assocIndexOf$1(this.__data__,K)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(K,J){var ne=this.__data__,oe=assocIndexOf(ne,K);return oe<0?(++this.size,ne.push([K,J])):ne[oe][1]=J,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(K){var J=-1,ne=K==null?0:K.length;for(this.clear();++J<ne;){var oe=K[J];this.set(oe[0],oe[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(K){var J=this.__data__,ne=J.delete(K);return this.size=J.size,ne}var _stackDelete=stackDelete$1;function stackGet$1(K){return this.__data__.get(K)}var _stackGet=stackGet$1;function stackHas$1(K){return this.__data__.has(K)}var _stackHas=stackHas$1,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$4=root$8.Symbol,_Symbol=Symbol$4,Symbol$3=_Symbol,objectProto$b=Object.prototype,hasOwnProperty$8=objectProto$b.hasOwnProperty,nativeObjectToString$1=objectProto$b.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(K){var J=hasOwnProperty$8.call(K,symToStringTag$1),ne=K[symToStringTag$1];try{K[symToStringTag$1]=void 0;var oe=!0}catch{}var ce=nativeObjectToString$1.call(K);return oe&&(J?K[symToStringTag$1]=ne:delete K[symToStringTag$1]),ce}var _getRawTag=getRawTag$1,objectProto$a=Object.prototype,nativeObjectToString=objectProto$a.toString;function objectToString$1(K){return nativeObjectToString.call(K)}var _objectToString=objectToString$1,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$4(K){return K==null?K===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(K)?getRawTag(K):objectToString(K)}var _baseGetTag=baseGetTag$4;function isObject$3(K){var J=typeof K;return K!=null&&(J=="object"||J=="function")}var isObject_1=isObject$3,baseGetTag$3=_baseGetTag,isObject$2=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(K){if(!isObject$2(K))return!1;var J=baseGetTag$3(K);return J==funcTag$1||J==genTag||J==asyncTag||J==proxyTag}var isFunction_1=isFunction$2,root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var K=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return K?"Symbol(src)_1."+K:""}();function isMasked$1(K){return!!maskSrcKey&&maskSrcKey in K}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(K){if(K!=null){try{return funcToString$1.call(K)}catch{}try{return K+""}catch{}}return""}var _toSource=toSource$2,isFunction$1=isFunction_1,isMasked=_isMasked,isObject$1=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(K){if(!isObject$1(K)||isMasked(K))return!1;var J=isFunction$1(K)?reIsNative:reIsHostCtor;return J.test(toSource$1(K))}var _baseIsNative=baseIsNative$1;function getValue$1(K,J){return K==null?void 0:K[J]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$6(K,J){var ne=getValue(K,J);return baseIsNative(ne)?ne:void 0}var _getNative=getNative$6,getNative$5=_getNative,root$6=_root,Map$4=getNative$5(root$6,"Map"),_Map=Map$4,getNative$4=_getNative,nativeCreate$4=getNative$4(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(K){var J=this.has(K)&&delete this.__data__[K];return this.size-=J?1:0,J}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashGet$1(K){var J=this.__data__;if(nativeCreate$2){var ne=J[K];return ne===HASH_UNDEFINED$2?void 0:ne}return hasOwnProperty$6.call(J,K)?J[K]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function hashHas$1(K){var J=this.__data__;return nativeCreate$1?J[K]!==void 0:hasOwnProperty$5.call(J,K)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(K,J){var ne=this.__data__;return this.size+=this.has(K)?0:1,ne[K]=nativeCreate&&J===void 0?HASH_UNDEFINED$1:J,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(K){var J=-1,ne=K==null?0:K.length;for(this.clear();++J<ne;){var oe=K[J];this.set(oe[0],oe[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(K){var J=typeof K;return J=="string"||J=="number"||J=="symbol"||J=="boolean"?K!=="__proto__":K===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(K,J){var ne=K.__data__;return isKeyable(J)?ne[typeof J=="string"?"string":"hash"]:ne.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(K){var J=getMapData$3(this,K).delete(K);return this.size-=J?1:0,J}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(K){return getMapData$2(this,K).get(K)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(K){return getMapData$1(this,K).has(K)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(K,J){var ne=getMapData(this,K),oe=ne.size;return ne.set(K,J),this.size+=ne.size==oe?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$2(K){var J=-1,ne=K==null?0:K.length;for(this.clear();++J<ne;){var oe=K[J];this.set(oe[0],oe[1])}}MapCache$2.prototype.clear=mapCacheClear;MapCache$2.prototype.delete=mapCacheDelete;MapCache$2.prototype.get=mapCacheGet;MapCache$2.prototype.has=mapCacheHas;MapCache$2.prototype.set=mapCacheSet;var _MapCache=MapCache$2,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE=200;function stackSet$1(K,J){var ne=this.__data__;if(ne instanceof ListCache$1){var oe=ne.__data__;if(!Map$2||oe.length<LARGE_ARRAY_SIZE-1)return oe.push([K,J]),this.size=++ne.size,this;ne=this.__data__=new MapCache$1(oe)}return ne.set(K,J),this.size=ne.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$1(K){var J=this.__data__=new ListCache(K);this.size=J.size}Stack$1.prototype.clear=stackClear;Stack$1.prototype.delete=stackDelete;Stack$1.prototype.get=stackGet;Stack$1.prototype.has=stackHas;Stack$1.prototype.set=stackSet;var _Stack=Stack$1,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(K){return this.__data__.set(K,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(K){return this.__data__.has(K)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$1(K){var J=-1,ne=K==null?0:K.length;for(this.__data__=new MapCache;++J<ne;)this.add(K[J])}SetCache$1.prototype.add=SetCache$1.prototype.push=setCacheAdd;SetCache$1.prototype.has=setCacheHas;var _SetCache=SetCache$1;function arraySome$1(K,J){for(var ne=-1,oe=K==null?0:K.length;++ne<oe;)if(J(K[ne],ne,K))return!0;return!1}var _arraySome=arraySome$1;function cacheHas$1(K,J){return K.has(J)}var _cacheHas=cacheHas$1,SetCache=_SetCache,arraySome=_arraySome,cacheHas=_cacheHas,COMPARE_PARTIAL_FLAG$3=1,COMPARE_UNORDERED_FLAG$1=2;function equalArrays$2(K,J,ne,oe,ce,ue){var Ae=ne&COMPARE_PARTIAL_FLAG$3,pe=K.length,xe=J.length;if(pe!=xe&&!(Ae&&xe>pe))return!1;var me=ue.get(K),ge=ue.get(J);if(me&&ge)return me==J&&ge==K;var ye=-1,Se=!0,Te=ne&COMPARE_UNORDERED_FLAG$1?new SetCache:void 0;for(ue.set(K,J),ue.set(J,K);++ye<pe;){var Ne=K[ye],$e=J[ye];if(oe)var ke=Ae?oe($e,Ne,ye,J,K,ue):oe(Ne,$e,ye,K,J,ue);if(ke!==void 0){if(ke)continue;Se=!1;break}if(Te){if(!arraySome(J,function(je,Ke){if(!cacheHas(Te,Ke)&&(Ne===je||ce(Ne,je,ne,oe,ue)))return Te.push(Ke)})){Se=!1;break}}else if(!(Ne===$e||ce(Ne,$e,ne,oe,ue))){Se=!1;break}}return ue.delete(K),ue.delete(J),Se}var _equalArrays=equalArrays$2,root$5=_root,Uint8Array$2=root$5.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(K){var J=-1,ne=Array(K.size);return K.forEach(function(oe,ce){ne[++J]=[ce,oe]}),ne}var _mapToArray=mapToArray$1;function setToArray$1(K){var J=-1,ne=Array(K.size);return K.forEach(function(oe){ne[++J]=oe}),ne}var _setToArray=setToArray$1,Symbol$1=_Symbol,Uint8Array$1=_Uint8Array,eq=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray=_setToArray,COMPARE_PARTIAL_FLAG$2=1,COMPARE_UNORDERED_FLAG=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(K,J,ne,oe,ce,ue,Ae){switch(ne){case dataViewTag$2:if(K.byteLength!=J.byteLength||K.byteOffset!=J.byteOffset)return!1;K=K.buffer,J=J.buffer;case arrayBufferTag$1:return!(K.byteLength!=J.byteLength||!ue(new Uint8Array$1(K),new Uint8Array$1(J)));case boolTag$1:case dateTag$1:case numberTag$1:return eq(+K,+J);case errorTag$1:return K.name==J.name&&K.message==J.message;case regexpTag$1:case stringTag$1:return K==J+"";case mapTag$2:var pe=mapToArray;case setTag$2:var xe=oe&COMPARE_PARTIAL_FLAG$2;if(pe||(pe=setToArray),K.size!=J.size&&!xe)return!1;var me=Ae.get(K);if(me)return me==J;oe|=COMPARE_UNORDERED_FLAG,Ae.set(K,J);var ge=equalArrays$1(pe(K),pe(J),oe,ce,ue,Ae);return Ae.delete(K),ge;case symbolTag:if(symbolValueOf)return symbolValueOf.call(K)==symbolValueOf.call(J)}return!1}var _equalByTag=equalByTag$1;function arrayPush$1(K,J){for(var ne=-1,oe=J.length,ce=K.length;++ne<oe;)K[ce+ne]=J[ne];return K}var _arrayPush=arrayPush$1,isArray$3=Array.isArray,isArray_1=isArray$3,arrayPush=_arrayPush,isArray$2=isArray_1;function baseGetAllKeys$1(K,J,ne){var oe=J(K);return isArray$2(K)?oe:arrayPush(oe,ne(K))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(K,J){for(var ne=-1,oe=K==null?0:K.length,ce=0,ue=[];++ne<oe;){var Ae=K[ne];J(Ae,ne,K)&&(ue[ce++]=Ae)}return ue}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$6=Object.prototype,propertyIsEnumerable$1=objectProto$6.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(K){return K==null?[]:(K=Object(K),arrayFilter(nativeGetSymbols(K),function(J){return propertyIsEnumerable$1.call(K,J)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(K,J){for(var ne=-1,oe=Array(K);++ne<K;)oe[ne]=J(ne);return oe}var _baseTimes=baseTimes$1;function isObjectLike$4(K){return K!=null&&typeof K=="object"}var isObjectLike_1=isObjectLike$4,baseGetTag$2=_baseGetTag,isObjectLike$3=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(K){return isObjectLike$3(K)&&baseGetTag$2(K)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$2=isObjectLike_1,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(K){return isObjectLike$2(K)&&hasOwnProperty$4.call(K,"callee")&&!propertyIsEnumerable.call(K,"callee")},isArguments_1=isArguments$1,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(K,J){var ne=_root,oe=stubFalse_1,ce=J&&!J.nodeType&&J,ue=ce&&!0&&K&&!K.nodeType&&K,Ae=ue&&ue.exports===ce,pe=Ae?ne.Buffer:void 0,xe=pe?pe.isBuffer:void 0,me=xe||oe;K.exports=me})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$1(K,J){var ne=typeof K;return J=J??MAX_SAFE_INTEGER$1,!!J&&(ne=="number"||ne!="symbol"&&reIsUint.test(K))&&K>-1&&K%1==0&&K<J}var _isIndex=isIndex$1,MAX_SAFE_INTEGER=9007199254740991;function isLength$2(K){return typeof K=="number"&&K>-1&&K%1==0&&K<=MAX_SAFE_INTEGER}var isLength_1=isLength$2,baseGetTag$1=_baseGetTag,isLength$1=isLength_1,isObjectLike$1=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag$2="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(K){return isObjectLike$1(K)&&isLength$1(K.length)&&!!typedArrayTags[baseGetTag$1(K)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$1(K){return function(J){return K(J)}}var _baseUnary=baseUnary$1,_nodeUtil={exports:{}};_nodeUtil.exports;(function(K,J){var ne=_freeGlobal,oe=J&&!J.nodeType&&J,ce=oe&&!0&&K&&!K.nodeType&&K,ue=ce&&ce.exports===oe,Ae=ue&&ne.process,pe=function(){try{var xe=ce&&ce.require&&ce.require("util").types;return xe||Ae&&Ae.binding&&Ae.binding("util")}catch{}}();K.exports=pe})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$2,baseTimes=_baseTimes,isArguments=isArguments_1,isArray$1=isArray_1,isBuffer$1=isBufferExports,isIndex=_isIndex,isTypedArray$1=isTypedArray_1,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function arrayLikeKeys$1(K,J){var ne=isArray$1(K),oe=!ne&&isArguments(K),ce=!ne&&!oe&&isBuffer$1(K),ue=!ne&&!oe&&!ce&&isTypedArray$1(K),Ae=ne||oe||ce||ue,pe=Ae?baseTimes(K.length,String):[],xe=pe.length;for(var me in K)(J||hasOwnProperty$3.call(K,me))&&!(Ae&&(me=="length"||ce&&(me=="offset"||me=="parent")||ue&&(me=="buffer"||me=="byteLength"||me=="byteOffset")||isIndex(me,xe)))&&pe.push(me);return pe}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$3=Object.prototype;function isPrototype$1(K){var J=K&&K.constructor,ne=typeof J=="function"&&J.prototype||objectProto$3;return K===ne}var _isPrototype=isPrototype$1;function overArg$1(K,J){return function(ne){return K(J(ne))}}var _overArg=overArg$1,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeys$1(K){if(!isPrototype(K))return nativeKeys(K);var J=[];for(var ne in Object(K))hasOwnProperty$2.call(K,ne)&&ne!="constructor"&&J.push(ne);return J}var _baseKeys=baseKeys$1,isFunction=isFunction_1,isLength=isLength_1;function isArrayLike$1(K){return K!=null&&isLength(K.length)&&!isFunction(K)}var isArrayLike_1=isArrayLike$1,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike=isArrayLike_1;function keys$1(K){return isArrayLike(K)?arrayLikeKeys(K):baseKeys(K)}var keys_1=keys$1,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys=keys_1;function getAllKeys$1(K){return baseGetAllKeys(K,keys,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$1=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects$1(K,J,ne,oe,ce,ue){var Ae=ne&COMPARE_PARTIAL_FLAG$1,pe=getAllKeys(K),xe=pe.length,me=getAllKeys(J),ge=me.length;if(xe!=ge&&!Ae)return!1;for(var ye=xe;ye--;){var Se=pe[ye];if(!(Ae?Se in J:hasOwnProperty$1.call(J,Se)))return!1}var Te=ue.get(K),Ne=ue.get(J);if(Te&&Ne)return Te==J&&Ne==K;var $e=!0;ue.set(K,J),ue.set(J,K);for(var ke=Ae;++ye<xe;){Se=pe[ye];var je=K[Se],Ke=J[Se];if(oe)var Ye=Ae?oe(Ke,je,Se,J,K,ue):oe(je,Ke,Se,K,J,ue);if(!(Ye===void 0?je===Ke||ce(je,Ke,ne,oe,ue):Ye)){$e=!1;break}ke||(ke=Se=="constructor")}if($e&&!ke){var ze=K.constructor,Xe=J.constructor;ze!=Xe&&"constructor"in K&&"constructor"in J&&!(typeof ze=="function"&&ze instanceof ze&&typeof Xe=="function"&&Xe instanceof Xe)&&($e=!1)}return ue.delete(K),ue.delete(J),$e}var _equalObjects=equalObjects$1,getNative$3=_getNative,root$4=_root,DataView$2=getNative$3(root$4,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$3=_root,Promise$2=getNative$2(root$3,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$2=_root,Set$2=getNative$1(root$2,"Set"),_Set=Set$2,getNative=_getNative,root$1=_root,WeakMap$2=getNative(root$1,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$1=_Set,WeakMap$1=_WeakMap,baseGetTag=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$1(new Map$1)!=mapTag||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$1&&getTag$1(new Set$1)!=setTag||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag)&&(getTag$1=function(K){var J=baseGetTag(K),ne=J==objectTag$1?K.constructor:void 0,oe=ne?toSource(ne):"";if(oe)switch(oe){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return J});var _getTag=getTag$1,Stack=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray=isArray_1,isBuffer=isBufferExports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep$1(K,J,ne,oe,ce,ue){var Ae=isArray(K),pe=isArray(J),xe=Ae?arrayTag:getTag(K),me=pe?arrayTag:getTag(J);xe=xe==argsTag?objectTag:xe,me=me==argsTag?objectTag:me;var ge=xe==objectTag,ye=me==objectTag,Se=xe==me;if(Se&&isBuffer(K)){if(!isBuffer(J))return!1;Ae=!0,ge=!1}if(Se&&!ge)return ue||(ue=new Stack),Ae||isTypedArray(K)?equalArrays(K,J,ne,oe,ce,ue):equalByTag(K,J,xe,ne,oe,ce,ue);if(!(ne&COMPARE_PARTIAL_FLAG)){var Te=ge&&hasOwnProperty.call(K,"__wrapped__"),Ne=ye&&hasOwnProperty.call(J,"__wrapped__");if(Te||Ne){var $e=Te?K.value():K,ke=Ne?J.value():J;return ue||(ue=new Stack),ce($e,ke,ne,oe,ue)}}return Se?(ue||(ue=new Stack),equalObjects(K,J,ne,oe,ce,ue)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike=isObjectLike_1;function baseIsEqual$1(K,J,ne,oe,ce){return K===J?!0:K==null||J==null||!isObjectLike(K)&&!isObjectLike(J)?K!==K&&J!==J:baseIsEqualDeep(K,J,ne,oe,baseIsEqual$1,ce)}var _baseIsEqual=baseIsEqual$1,baseIsEqual=_baseIsEqual;function isEqual(K,J){return baseIsEqual(K,J)}var isEqual_1$1=isEqual,quill={exports:{}};(function(K,J){(function(oe,ce){K.exports=ce()})(typeof self<"u"?self:commonjsGlobal,function(){return function(ne){var oe={};function ce(ue){if(oe[ue])return oe[ue].exports;var Ae=oe[ue]={i:ue,l:!1,exports:{}};return ne[ue].call(Ae.exports,Ae,Ae.exports,ce),Ae.l=!0,Ae.exports}return ce.m=ne,ce.c=oe,ce.d=function(ue,Ae,pe){ce.o(ue,Ae)||Object.defineProperty(ue,Ae,{configurable:!1,enumerable:!0,get:pe})},ce.n=function(ue){var Ae=ue&&ue.__esModule?function(){return ue.default}:function(){return ue};return ce.d(Ae,"a",Ae),Ae},ce.o=function(ue,Ae){return Object.prototype.hasOwnProperty.call(ue,Ae)},ce.p="",ce(ce.s=109)}([function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(17),Ae=ce(18),pe=ce(19),xe=ce(45),me=ce(46),ge=ce(47),ye=ce(48),Se=ce(49),Te=ce(12),Ne=ce(32),$e=ce(33),ke=ce(31),je=ce(1),Ke={Scope:je.Scope,create:je.create,find:je.find,query:je.query,register:je.register,Container:ue.default,Format:Ae.default,Leaf:pe.default,Embed:ye.default,Scroll:xe.default,Block:ge.default,Inline:me.default,Text:Se.default,Attributor:{Attribute:Te.default,Class:Ne.default,Style:$e.default,Store:ke.default}};oe.default=Ke},function(ne,oe,ce){var ue=this&&this.__extends||function(){var ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(je,Ke){je.__proto__=Ke}||function(je,Ke){for(var Ye in Ke)Ke.hasOwnProperty(Ye)&&(je[Ye]=Ke[Ye])};return function(je,Ke){ke(je,Ke);function Ye(){this.constructor=je}je.prototype=Ke===null?Object.create(Ke):(Ye.prototype=Ke.prototype,new Ye)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=function(ke){ue(je,ke);function je(Ke){var Ye=this;return Ke="[Parchment] "+Ke,Ye=ke.call(this,Ke)||this,Ye.message=Ke,Ye.name=Ye.constructor.name,Ye}return je}(Error);oe.ParchmentError=Ae;var pe={},xe={},me={},ge={};oe.DATA_KEY="__blot";var ye;(function(ke){ke[ke.TYPE=3]="TYPE",ke[ke.LEVEL=12]="LEVEL",ke[ke.ATTRIBUTE=13]="ATTRIBUTE",ke[ke.BLOT=14]="BLOT",ke[ke.INLINE=7]="INLINE",ke[ke.BLOCK=11]="BLOCK",ke[ke.BLOCK_BLOT=10]="BLOCK_BLOT",ke[ke.INLINE_BLOT=6]="INLINE_BLOT",ke[ke.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",ke[ke.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",ke[ke.ANY=15]="ANY"})(ye=oe.Scope||(oe.Scope={}));function Se(ke,je){var Ke=Ne(ke);if(Ke==null)throw new Ae("Unable to create "+ke+" blot");var Ye=Ke,ze=ke instanceof Node||ke.nodeType===Node.TEXT_NODE?ke:Ye.create(je);return new Ye(ze,je)}oe.create=Se;function Te(ke,je){return je===void 0&&(je=!1),ke==null?null:ke[oe.DATA_KEY]!=null?ke[oe.DATA_KEY].blot:je?Te(ke.parentNode,je):null}oe.find=Te;function Ne(ke,je){je===void 0&&(je=ye.ANY);var Ke;if(typeof ke=="string")Ke=ge[ke]||pe[ke];else if(ke instanceof Text||ke.nodeType===Node.TEXT_NODE)Ke=ge.text;else if(typeof ke=="number")ke&ye.LEVEL&ye.BLOCK?Ke=ge.block:ke&ye.LEVEL&ye.INLINE&&(Ke=ge.inline);else if(ke instanceof HTMLElement){var Ye=(ke.getAttribute("class")||"").split(/\s+/);for(var ze in Ye)if(Ke=xe[Ye[ze]],Ke)break;Ke=Ke||me[ke.tagName]}return Ke==null?null:je&ye.LEVEL&Ke.scope&&je&ye.TYPE&Ke.scope?Ke:null}oe.query=Ne;function $e(){for(var ke=[],je=0;je<arguments.length;je++)ke[je]=arguments[je];if(ke.length>1)return ke.map(function(ze){return $e(ze)});var Ke=ke[0];if(typeof Ke.blotName!="string"&&typeof Ke.attrName!="string")throw new Ae("Invalid definition");if(Ke.blotName==="abstract")throw new Ae("Cannot register abstract class");if(ge[Ke.blotName||Ke.attrName]=Ke,typeof Ke.keyName=="string")pe[Ke.keyName]=Ke;else if(Ke.className!=null&&(xe[Ke.className]=Ke),Ke.tagName!=null){Array.isArray(Ke.tagName)?Ke.tagName=Ke.tagName.map(function(ze){return ze.toUpperCase()}):Ke.tagName=Ke.tagName.toUpperCase();var Ye=Array.isArray(Ke.tagName)?Ke.tagName:[Ke.tagName];Ye.forEach(function(ze){(me[ze]==null||Ke.className==null)&&(me[ze]=Ke)})}return Ke}oe.register=$e},function(ne,oe,ce){var ue=ce(51),Ae=ce(11),pe=ce(3),xe=ce(20),me="\0",ge=function(ye){Array.isArray(ye)?this.ops=ye:ye!=null&&Array.isArray(ye.ops)?this.ops=ye.ops:this.ops=[]};ge.prototype.insert=function(ye,Se){var Te={};return ye.length===0?this:(Te.insert=ye,Se!=null&&typeof Se=="object"&&Object.keys(Se).length>0&&(Te.attributes=Se),this.push(Te))},ge.prototype.delete=function(ye){return ye<=0?this:this.push({delete:ye})},ge.prototype.retain=function(ye,Se){if(ye<=0)return this;var Te={retain:ye};return Se!=null&&typeof Se=="object"&&Object.keys(Se).length>0&&(Te.attributes=Se),this.push(Te)},ge.prototype.push=function(ye){var Se=this.ops.length,Te=this.ops[Se-1];if(ye=pe(!0,{},ye),typeof Te=="object"){if(typeof ye.delete=="number"&&typeof Te.delete=="number")return this.ops[Se-1]={delete:Te.delete+ye.delete},this;if(typeof Te.delete=="number"&&ye.insert!=null&&(Se-=1,Te=this.ops[Se-1],typeof Te!="object"))return this.ops.unshift(ye),this;if(Ae(ye.attributes,Te.attributes)){if(typeof ye.insert=="string"&&typeof Te.insert=="string")return this.ops[Se-1]={insert:Te.insert+ye.insert},typeof ye.attributes=="object"&&(this.ops[Se-1].attributes=ye.attributes),this;if(typeof ye.retain=="number"&&typeof Te.retain=="number")return this.ops[Se-1]={retain:Te.retain+ye.retain},typeof ye.attributes=="object"&&(this.ops[Se-1].attributes=ye.attributes),this}}return Se===this.ops.length?this.ops.push(ye):this.ops.splice(Se,0,ye),this},ge.prototype.chop=function(){var ye=this.ops[this.ops.length-1];return ye&&ye.retain&&!ye.attributes&&this.ops.pop(),this},ge.prototype.filter=function(ye){return this.ops.filter(ye)},ge.prototype.forEach=function(ye){this.ops.forEach(ye)},ge.prototype.map=function(ye){return this.ops.map(ye)},ge.prototype.partition=function(ye){var Se=[],Te=[];return this.forEach(function(Ne){var $e=ye(Ne)?Se:Te;$e.push(Ne)}),[Se,Te]},ge.prototype.reduce=function(ye,Se){return this.ops.reduce(ye,Se)},ge.prototype.changeLength=function(){return this.reduce(function(ye,Se){return Se.insert?ye+xe.length(Se):Se.delete?ye-Se.delete:ye},0)},ge.prototype.length=function(){return this.reduce(function(ye,Se){return ye+xe.length(Se)},0)},ge.prototype.slice=function(ye,Se){ye=ye||0,typeof Se!="number"&&(Se=1/0);for(var Te=[],Ne=xe.iterator(this.ops),$e=0;$e<Se&&Ne.hasNext();){var ke;$e<ye?ke=Ne.next(ye-$e):(ke=Ne.next(Se-$e),Te.push(ke)),$e+=xe.length(ke)}return new ge(Te)},ge.prototype.compose=function(ye){var Se=xe.iterator(this.ops),Te=xe.iterator(ye.ops),Ne=[],$e=Te.peek();if($e!=null&&typeof $e.retain=="number"&&$e.attributes==null){for(var ke=$e.retain;Se.peekType()==="insert"&&Se.peekLength()<=ke;)ke-=Se.peekLength(),Ne.push(Se.next());$e.retain-ke>0&&Te.next($e.retain-ke)}for(var je=new ge(Ne);Se.hasNext()||Te.hasNext();)if(Te.peekType()==="insert")je.push(Te.next());else if(Se.peekType()==="delete")je.push(Se.next());else{var Ke=Math.min(Se.peekLength(),Te.peekLength()),Ye=Se.next(Ke),ze=Te.next(Ke);if(typeof ze.retain=="number"){var Xe={};typeof Ye.retain=="number"?Xe.retain=Ke:Xe.insert=Ye.insert;var Je=xe.attributes.compose(Ye.attributes,ze.attributes,typeof Ye.retain=="number");if(Je&&(Xe.attributes=Je),je.push(Xe),!Te.hasNext()&&Ae(je.ops[je.ops.length-1],Xe)){var rt=new ge(Se.rest());return je.concat(rt).chop()}}else typeof ze.delete=="number"&&typeof Ye.retain=="number"&&je.push(ze)}return je.chop()},ge.prototype.concat=function(ye){var Se=new ge(this.ops.slice());return ye.ops.length>0&&(Se.push(ye.ops[0]),Se.ops=Se.ops.concat(ye.ops.slice(1))),Se},ge.prototype.diff=function(ye,Se){if(this.ops===ye.ops)return new ge;var Te=[this,ye].map(function(Ke){return Ke.map(function(Ye){if(Ye.insert!=null)return typeof Ye.insert=="string"?Ye.insert:me;var ze=Ke===ye?"on":"with";throw new Error("diff() called "+ze+" non-document")}).join("")}),Ne=new ge,$e=ue(Te[0],Te[1],Se),ke=xe.iterator(this.ops),je=xe.iterator(ye.ops);return $e.forEach(function(Ke){for(var Ye=Ke[1].length;Ye>0;){var ze=0;switch(Ke[0]){case ue.INSERT:ze=Math.min(je.peekLength(),Ye),Ne.push(je.next(ze));break;case ue.DELETE:ze=Math.min(Ye,ke.peekLength()),ke.next(ze),Ne.delete(ze);break;case ue.EQUAL:ze=Math.min(ke.peekLength(),je.peekLength(),Ye);var Xe=ke.next(ze),Je=je.next(ze);Ae(Xe.insert,Je.insert)?Ne.retain(ze,xe.attributes.diff(Xe.attributes,Je.attributes)):Ne.push(Je).delete(ze);break}Ye-=ze}}),Ne.chop()},ge.prototype.eachLine=function(ye,Se){Se=Se||`
`;for(var Te=xe.iterator(this.ops),Ne=new ge,$e=0;Te.hasNext();){if(Te.peekType()!=="insert")return;var ke=Te.peek(),je=xe.length(ke)-Te.peekLength(),Ke=typeof ke.insert=="string"?ke.insert.indexOf(Se,je)-je:-1;if(Ke<0)Ne.push(Te.next());else if(Ke>0)Ne.push(Te.next(Ke));else{if(ye(Ne,Te.next(1).attributes||{},$e)===!1)return;$e+=1,Ne=new ge}}Ne.length()>0&&ye(Ne,{},$e)},ge.prototype.transform=function(ye,Se){if(Se=!!Se,typeof ye=="number")return this.transformPosition(ye,Se);for(var Te=xe.iterator(this.ops),Ne=xe.iterator(ye.ops),$e=new ge;Te.hasNext()||Ne.hasNext();)if(Te.peekType()==="insert"&&(Se||Ne.peekType()!=="insert"))$e.retain(xe.length(Te.next()));else if(Ne.peekType()==="insert")$e.push(Ne.next());else{var ke=Math.min(Te.peekLength(),Ne.peekLength()),je=Te.next(ke),Ke=Ne.next(ke);if(je.delete)continue;Ke.delete?$e.push(Ke):$e.retain(ke,xe.attributes.transform(je.attributes,Ke.attributes,Se))}return $e.chop()},ge.prototype.transformPosition=function(ye,Se){Se=!!Se;for(var Te=xe.iterator(this.ops),Ne=0;Te.hasNext()&&Ne<=ye;){var $e=Te.peekLength(),ke=Te.peekType();if(Te.next(),ke==="delete"){ye-=Math.min($e,ye-Ne);continue}else ke==="insert"&&(Ne<ye||!Se)&&(ye+=$e);Ne+=$e}return ye},ne.exports=ge},function(ne,oe){var ce=Object.prototype.hasOwnProperty,ue=Object.prototype.toString,Ae=Object.defineProperty,pe=Object.getOwnPropertyDescriptor,xe=function(Te){return typeof Array.isArray=="function"?Array.isArray(Te):ue.call(Te)==="[object Array]"},me=function(Te){if(!Te||ue.call(Te)!=="[object Object]")return!1;var Ne=ce.call(Te,"constructor"),$e=Te.constructor&&Te.constructor.prototype&&ce.call(Te.constructor.prototype,"isPrototypeOf");if(Te.constructor&&!Ne&&!$e)return!1;var ke;for(ke in Te);return typeof ke>"u"||ce.call(Te,ke)},ge=function(Te,Ne){Ae&&Ne.name==="__proto__"?Ae(Te,Ne.name,{enumerable:!0,configurable:!0,value:Ne.newValue,writable:!0}):Te[Ne.name]=Ne.newValue},ye=function(Te,Ne){if(Ne==="__proto__")if(ce.call(Te,Ne)){if(pe)return pe(Te,Ne).value}else return;return Te[Ne]};ne.exports=function Se(){var Te,Ne,$e,ke,je,Ke,Ye=arguments[0],ze=1,Xe=arguments.length,Je=!1;for(typeof Ye=="boolean"&&(Je=Ye,Ye=arguments[1]||{},ze=2),(Ye==null||typeof Ye!="object"&&typeof Ye!="function")&&(Ye={});ze<Xe;++ze)if(Te=arguments[ze],Te!=null)for(Ne in Te)$e=ye(Ye,Ne),ke=ye(Te,Ne),Ye!==ke&&(Je&&ke&&(me(ke)||(je=xe(ke)))?(je?(je=!1,Ke=$e&&xe($e)?$e:[]):Ke=$e&&me($e)?$e:{},ge(Ye,{name:Ne,newValue:Se(Je,Ke,ke)})):typeof ke<"u"&&ge(Ye,{name:Ne,newValue:ke}));return Ye}},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.BlockEmbed=oe.bubbleFormats=void 0;var ue=function(){function Ge(ve,Be){for(var Re=0;Re<Be.length;Re++){var Ie=Be[Re];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(ve,Ie.key,Ie)}}return function(ve,Be,Re){return Be&&Ge(ve.prototype,Be),Re&&Ge(ve,Re),ve}}(),Ae=function Ge(ve,Be,Re){ve===null&&(ve=Function.prototype);var Ie=Object.getOwnPropertyDescriptor(ve,Be);if(Ie===void 0){var Fe=Object.getPrototypeOf(ve);return Fe===null?void 0:Ge(Fe,Be,Re)}else{if("value"in Ie)return Ie.value;var qe=Ie.get;return qe===void 0?void 0:qe.call(Re)}},pe=ce(3),xe=Ye(pe),me=ce(2),ge=Ye(me),ye=ce(0),Se=Ye(ye),Te=ce(16),Ne=Ye(Te),$e=ce(6),ke=Ye($e),je=ce(7),Ke=Ye(je);function Ye(Ge){return Ge&&Ge.__esModule?Ge:{default:Ge}}function ze(Ge,ve){if(!(Ge instanceof ve))throw new TypeError("Cannot call a class as a function")}function Xe(Ge,ve){if(!Ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve&&(typeof ve=="object"||typeof ve=="function")?ve:Ge}function Je(Ge,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ve);Ge.prototype=Object.create(ve&&ve.prototype,{constructor:{value:Ge,enumerable:!1,writable:!0,configurable:!0}}),ve&&(Object.setPrototypeOf?Object.setPrototypeOf(Ge,ve):Ge.__proto__=ve)}var rt=1,Ze=function(Ge){Je(ve,Ge);function ve(){return ze(this,ve),Xe(this,(ve.__proto__||Object.getPrototypeOf(ve)).apply(this,arguments))}return ue(ve,[{key:"attach",value:function(){Ae(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"attach",this).call(this),this.attributes=new Se.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new ge.default().insert(this.value(),(0,xe.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(Re,Ie){var Fe=Se.default.query(Re,Se.default.Scope.BLOCK_ATTRIBUTE);Fe!=null&&this.attributes.attribute(Fe,Ie)}},{key:"formatAt",value:function(Re,Ie,Fe,qe){this.format(Fe,qe)}},{key:"insertAt",value:function(Re,Ie,Fe){if(typeof Ie=="string"&&Ie.endsWith(`
`)){var qe=Se.default.create(et.blotName);this.parent.insertBefore(qe,Re===0?this:this.next),qe.insertAt(0,Ie.slice(0,-1))}else Ae(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"insertAt",this).call(this,Re,Ie,Fe)}}]),ve}(Se.default.Embed);Ze.scope=Se.default.Scope.BLOCK_BLOT;var et=function(Ge){Je(ve,Ge);function ve(Be){ze(this,ve);var Re=Xe(this,(ve.__proto__||Object.getPrototypeOf(ve)).call(this,Be));return Re.cache={},Re}return ue(ve,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(Se.default.Leaf).reduce(function(Re,Ie){return Ie.length()===0?Re:Re.insert(Ie.value(),nt(Ie))},new ge.default).insert(`
`,nt(this))),this.cache.delta}},{key:"deleteAt",value:function(Re,Ie){Ae(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"deleteAt",this).call(this,Re,Ie),this.cache={}}},{key:"formatAt",value:function(Re,Ie,Fe,qe){Ie<=0||(Se.default.query(Fe,Se.default.Scope.BLOCK)?Re+Ie===this.length()&&this.format(Fe,qe):Ae(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"formatAt",this).call(this,Re,Math.min(Ie,this.length()-Re-1),Fe,qe),this.cache={})}},{key:"insertAt",value:function(Re,Ie,Fe){if(Fe!=null)return Ae(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"insertAt",this).call(this,Re,Ie,Fe);if(Ie.length!==0){var qe=Ie.split(`
`),We=qe.shift();We.length>0&&(Re<this.length()-1||this.children.tail==null?Ae(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"insertAt",this).call(this,Math.min(Re,this.length()-1),We):this.children.tail.insertAt(this.children.tail.length(),We),this.cache={});var Ue=this;qe.reduce(function(_e,Qe){return Ue=Ue.split(_e,!0),Ue.insertAt(0,Qe),Qe.length},Re+We.length)}}},{key:"insertBefore",value:function(Re,Ie){var Fe=this.children.head;Ae(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"insertBefore",this).call(this,Re,Ie),Fe instanceof Ne.default&&Fe.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=Ae(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"length",this).call(this)+rt),this.cache.length}},{key:"moveChildren",value:function(Re,Ie){Ae(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"moveChildren",this).call(this,Re,Ie),this.cache={}}},{key:"optimize",value:function(Re){Ae(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"optimize",this).call(this,Re),this.cache={}}},{key:"path",value:function(Re){return Ae(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"path",this).call(this,Re,!0)}},{key:"removeChild",value:function(Re){Ae(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"removeChild",this).call(this,Re),this.cache={}}},{key:"split",value:function(Re){var Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Ie&&(Re===0||Re>=this.length()-rt)){var Fe=this.clone();return Re===0?(this.parent.insertBefore(Fe,this),this):(this.parent.insertBefore(Fe,this.next),Fe)}else{var qe=Ae(ve.prototype.__proto__||Object.getPrototypeOf(ve.prototype),"split",this).call(this,Re,Ie);return this.cache={},qe}}}]),ve}(Se.default.Block);et.blotName="block",et.tagName="P",et.defaultChild="break",et.allowedChildren=[ke.default,Se.default.Embed,Ke.default];function nt(Ge){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ge==null||(typeof Ge.formats=="function"&&(ve=(0,xe.default)(ve,Ge.formats())),Ge.parent==null||Ge.parent.blotName=="scroll"||Ge.parent.statics.scope!==Ge.statics.scope)?ve:nt(Ge.parent,ve)}oe.bubbleFormats=nt,oe.BlockEmbed=Ze,oe.default=et},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.overload=oe.expandConfig=void 0;var ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ue){return typeof Ue}:function(Ue){return Ue&&typeof Symbol=="function"&&Ue.constructor===Symbol&&Ue!==Symbol.prototype?"symbol":typeof Ue},Ae=function(){function Ue(_e,Qe){var tt=[],it=!0,at=!1,ot=void 0;try{for(var lt=_e[Symbol.iterator](),st;!(it=(st=lt.next()).done)&&(tt.push(st.value),!(Qe&&tt.length===Qe));it=!0);}catch(ut){at=!0,ot=ut}finally{try{!it&&lt.return&&lt.return()}finally{if(at)throw ot}}return tt}return function(_e,Qe){if(Array.isArray(_e))return _e;if(Symbol.iterator in Object(_e))return Ue(_e,Qe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function(){function Ue(_e,Qe){for(var tt=0;tt<Qe.length;tt++){var it=Qe[tt];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(_e,it.key,it)}}return function(_e,Qe,tt){return Qe&&Ue(_e.prototype,Qe),tt&&Ue(_e,tt),_e}}();ce(50);var xe=ce(2),me=nt(xe),ge=ce(14),ye=nt(ge),Se=ce(8),Te=nt(Se),Ne=ce(9),$e=nt(Ne),ke=ce(0),je=nt(ke),Ke=ce(15),Ye=nt(Ke),ze=ce(3),Xe=nt(ze),Je=ce(10),rt=nt(Je),Ze=ce(34),et=nt(Ze);function nt(Ue){return Ue&&Ue.__esModule?Ue:{default:Ue}}function Ge(Ue,_e,Qe){return _e in Ue?Object.defineProperty(Ue,_e,{value:Qe,enumerable:!0,configurable:!0,writable:!0}):Ue[_e]=Qe,Ue}function ve(Ue,_e){if(!(Ue instanceof _e))throw new TypeError("Cannot call a class as a function")}var Be=(0,rt.default)("quill"),Re=function(){pe(Ue,null,[{key:"debug",value:function(Qe){Qe===!0&&(Qe="log"),rt.default.level(Qe)}},{key:"find",value:function(Qe){return Qe.__quill||je.default.find(Qe)}},{key:"import",value:function(Qe){return this.imports[Qe]==null&&Be.error("Cannot import "+Qe+". Are you sure it was registered?"),this.imports[Qe]}},{key:"register",value:function(Qe,tt){var it=this,at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof Qe!="string"){var ot=Qe.attrName||Qe.blotName;typeof ot=="string"?this.register("formats/"+ot,Qe,tt):Object.keys(Qe).forEach(function(lt){it.register(lt,Qe[lt],tt)})}else this.imports[Qe]!=null&&!at&&Be.warn("Overwriting "+Qe+" with",tt),this.imports[Qe]=tt,(Qe.startsWith("blots/")||Qe.startsWith("formats/"))&&tt.blotName!=="abstract"?je.default.register(tt):Qe.startsWith("modules")&&typeof tt.register=="function"&&tt.register()}}]);function Ue(_e){var Qe=this,tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ve(this,Ue),this.options=Ie(_e,tt),this.container=this.options.container,this.container==null)return Be.error("Invalid Quill container",_e);this.options.debug&&Ue.debug(this.options.debug);var it=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new Te.default,this.scroll=je.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new ye.default(this.scroll),this.selection=new Ye.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(Te.default.events.EDITOR_CHANGE,function(ot){ot===Te.default.events.TEXT_CHANGE&&Qe.root.classList.toggle("ql-blank",Qe.editor.isBlank())}),this.emitter.on(Te.default.events.SCROLL_UPDATE,function(ot,lt){var st=Qe.selection.lastRange,ut=st&&st.length===0?st.index:void 0;Fe.call(Qe,function(){return Qe.editor.update(null,lt,ut)},ot)});var at=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+it+"<p><br></p></div>");this.setContents(at),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return pe(Ue,[{key:"addContainer",value:function(Qe){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof Qe=="string"){var it=Qe;Qe=document.createElement("div"),Qe.classList.add(it)}return this.container.insertBefore(Qe,tt),Qe}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(Qe,tt,it){var at=this,ot=qe(Qe,tt,it),lt=Ae(ot,4);return Qe=lt[0],tt=lt[1],it=lt[3],Fe.call(this,function(){return at.editor.deleteText(Qe,tt)},it,Qe,-1*tt)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(Qe),this.container.classList.toggle("ql-disabled",!Qe)}},{key:"focus",value:function(){var Qe=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=Qe,this.scrollIntoView()}},{key:"format",value:function(Qe,tt){var it=this,at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te.default.sources.API;return Fe.call(this,function(){var ot=it.getSelection(!0),lt=new me.default;if(ot==null)return lt;if(je.default.query(Qe,je.default.Scope.BLOCK))lt=it.editor.formatLine(ot.index,ot.length,Ge({},Qe,tt));else{if(ot.length===0)return it.selection.format(Qe,tt),lt;lt=it.editor.formatText(ot.index,ot.length,Ge({},Qe,tt))}return it.setSelection(ot,Te.default.sources.SILENT),lt},at)}},{key:"formatLine",value:function(Qe,tt,it,at,ot){var lt=this,st=void 0,ut=qe(Qe,tt,it,at,ot),ft=Ae(ut,4);return Qe=ft[0],tt=ft[1],st=ft[2],ot=ft[3],Fe.call(this,function(){return lt.editor.formatLine(Qe,tt,st)},ot,Qe,0)}},{key:"formatText",value:function(Qe,tt,it,at,ot){var lt=this,st=void 0,ut=qe(Qe,tt,it,at,ot),ft=Ae(ut,4);return Qe=ft[0],tt=ft[1],st=ft[2],ot=ft[3],Fe.call(this,function(){return lt.editor.formatText(Qe,tt,st)},ot,Qe,0)}},{key:"getBounds",value:function(Qe){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,it=void 0;typeof Qe=="number"?it=this.selection.getBounds(Qe,tt):it=this.selection.getBounds(Qe.index,Qe.length);var at=this.container.getBoundingClientRect();return{bottom:it.bottom-at.top,height:it.height,left:it.left-at.left,right:it.right-at.left,top:it.top-at.top,width:it.width}}},{key:"getContents",value:function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-Qe,it=qe(Qe,tt),at=Ae(it,2);return Qe=at[0],tt=at[1],this.editor.getContents(Qe,tt)}},{key:"getFormat",value:function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof Qe=="number"?this.editor.getFormat(Qe,tt):this.editor.getFormat(Qe.index,Qe.length)}},{key:"getIndex",value:function(Qe){return Qe.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(Qe){return this.scroll.leaf(Qe)}},{key:"getLine",value:function(Qe){return this.scroll.line(Qe)}},{key:"getLines",value:function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof Qe!="number"?this.scroll.lines(Qe.index,Qe.length):this.scroll.lines(Qe,tt)}},{key:"getModule",value:function(Qe){return this.theme.modules[Qe]}},{key:"getSelection",value:function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Qe&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-Qe,it=qe(Qe,tt),at=Ae(it,2);return Qe=at[0],tt=at[1],this.editor.getText(Qe,tt)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(Qe,tt,it){var at=this,ot=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ue.sources.API;return Fe.call(this,function(){return at.editor.insertEmbed(Qe,tt,it)},ot,Qe)}},{key:"insertText",value:function(Qe,tt,it,at,ot){var lt=this,st=void 0,ut=qe(Qe,0,it,at,ot),ft=Ae(ut,4);return Qe=ft[0],st=ft[2],ot=ft[3],Fe.call(this,function(){return lt.editor.insertText(Qe,tt,st)},ot,Qe,tt.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(Qe,tt,it){this.clipboard.dangerouslyPasteHTML(Qe,tt,it)}},{key:"removeFormat",value:function(Qe,tt,it){var at=this,ot=qe(Qe,tt,it),lt=Ae(ot,4);return Qe=lt[0],tt=lt[1],it=lt[3],Fe.call(this,function(){return at.editor.removeFormat(Qe,tt)},it,Qe)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(Qe){var tt=this,it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.default.sources.API;return Fe.call(this,function(){Qe=new me.default(Qe);var at=tt.getLength(),ot=tt.editor.deleteText(0,at),lt=tt.editor.applyDelta(Qe),st=lt.ops[lt.ops.length-1];st!=null&&typeof st.insert=="string"&&st.insert[st.insert.length-1]===`
`&&(tt.editor.deleteText(tt.getLength()-1,1),lt.delete(1));var ut=ot.compose(lt);return ut},it)}},{key:"setSelection",value:function(Qe,tt,it){if(Qe==null)this.selection.setRange(null,tt||Ue.sources.API);else{var at=qe(Qe,tt,it),ot=Ae(at,4);Qe=ot[0],tt=ot[1],it=ot[3],this.selection.setRange(new Ke.Range(Qe,tt),it),it!==Te.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(Qe){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.default.sources.API,it=new me.default().insert(Qe);return this.setContents(it,tt)}},{key:"update",value:function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te.default.sources.USER,tt=this.scroll.update(Qe);return this.selection.update(Qe),tt}},{key:"updateContents",value:function(Qe){var tt=this,it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.default.sources.API;return Fe.call(this,function(){return Qe=new me.default(Qe),tt.editor.applyDelta(Qe,it)},it,!0)}}]),Ue}();Re.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},Re.events=Te.default.events,Re.sources=Te.default.sources,Re.version="1.3.7",Re.imports={delta:me.default,parchment:je.default,"core/module":$e.default,"core/theme":et.default};function Ie(Ue,_e){if(_e=(0,Xe.default)(!0,{container:Ue,modules:{clipboard:!0,keyboard:!0,history:!0}},_e),!_e.theme||_e.theme===Re.DEFAULTS.theme)_e.theme=et.default;else if(_e.theme=Re.import("themes/"+_e.theme),_e.theme==null)throw new Error("Invalid theme "+_e.theme+". Did you register it?");var Qe=(0,Xe.default)(!0,{},_e.theme.DEFAULTS);[Qe,_e].forEach(function(at){at.modules=at.modules||{},Object.keys(at.modules).forEach(function(ot){at.modules[ot]===!0&&(at.modules[ot]={})})});var tt=Object.keys(Qe.modules).concat(Object.keys(_e.modules)),it=tt.reduce(function(at,ot){var lt=Re.import("modules/"+ot);return lt==null?Be.error("Cannot load "+ot+" module. Are you sure you registered it?"):at[ot]=lt.DEFAULTS||{},at},{});return _e.modules!=null&&_e.modules.toolbar&&_e.modules.toolbar.constructor!==Object&&(_e.modules.toolbar={container:_e.modules.toolbar}),_e=(0,Xe.default)(!0,{},Re.DEFAULTS,{modules:it},Qe,_e),["bounds","container","scrollingContainer"].forEach(function(at){typeof _e[at]=="string"&&(_e[at]=document.querySelector(_e[at]))}),_e.modules=Object.keys(_e.modules).reduce(function(at,ot){return _e.modules[ot]&&(at[ot]=_e.modules[ot]),at},{}),_e}function Fe(Ue,_e,Qe,tt){if(this.options.strict&&!this.isEnabled()&&_e===Te.default.sources.USER)return new me.default;var it=Qe==null?null:this.getSelection(),at=this.editor.delta,ot=Ue();if(it!=null&&(Qe===!0&&(Qe=it.index),tt==null?it=We(it,ot,_e):tt!==0&&(it=We(it,Qe,tt,_e)),this.setSelection(it,Te.default.sources.SILENT)),ot.length()>0){var lt,st=[Te.default.events.TEXT_CHANGE,ot,at,_e];if((lt=this.emitter).emit.apply(lt,[Te.default.events.EDITOR_CHANGE].concat(st)),_e!==Te.default.sources.SILENT){var ut;(ut=this.emitter).emit.apply(ut,st)}}return ot}function qe(Ue,_e,Qe,tt,it){var at={};return typeof Ue.index=="number"&&typeof Ue.length=="number"?typeof _e!="number"?(it=tt,tt=Qe,Qe=_e,_e=Ue.length,Ue=Ue.index):(_e=Ue.length,Ue=Ue.index):typeof _e!="number"&&(it=tt,tt=Qe,Qe=_e,_e=0),(typeof Qe>"u"?"undefined":ue(Qe))==="object"?(at=Qe,it=tt):typeof Qe=="string"&&(tt!=null?at[Qe]=tt:it=Qe),it=it||Te.default.sources.API,[Ue,_e,at,it]}function We(Ue,_e,Qe,tt){if(Ue==null)return null;var it=void 0,at=void 0;if(_e instanceof me.default){var ot=[Ue.index,Ue.index+Ue.length].map(function(ft){return _e.transformPosition(ft,tt!==Te.default.sources.USER)}),lt=Ae(ot,2);it=lt[0],at=lt[1]}else{var st=[Ue.index,Ue.index+Ue.length].map(function(ft){return ft<_e||ft===_e&&tt===Te.default.sources.USER?ft:Qe>=0?ft+Qe:Math.max(_e,ft+Qe)}),ut=Ae(st,2);it=ut[0],at=ut[1]}return new Ke.Range(it,at-it)}oe.expandConfig=Ie,oe.overload=qe,oe.default=Re},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function ke(je,Ke){for(var Ye=0;Ye<Ke.length;Ye++){var ze=Ke[Ye];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(je,ze.key,ze)}}return function(je,Ke,Ye){return Ke&&ke(je.prototype,Ke),Ye&&ke(je,Ye),je}}(),Ae=function ke(je,Ke,Ye){je===null&&(je=Function.prototype);var ze=Object.getOwnPropertyDescriptor(je,Ke);if(ze===void 0){var Xe=Object.getPrototypeOf(je);return Xe===null?void 0:ke(Xe,Ke,Ye)}else{if("value"in ze)return ze.value;var Je=ze.get;return Je===void 0?void 0:Je.call(Ye)}},pe=ce(7),xe=ye(pe),me=ce(0),ge=ye(me);function ye(ke){return ke&&ke.__esModule?ke:{default:ke}}function Se(ke,je){if(!(ke instanceof je))throw new TypeError("Cannot call a class as a function")}function Te(ke,je){if(!ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return je&&(typeof je=="object"||typeof je=="function")?je:ke}function Ne(ke,je){if(typeof je!="function"&&je!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof je);ke.prototype=Object.create(je&&je.prototype,{constructor:{value:ke,enumerable:!1,writable:!0,configurable:!0}}),je&&(Object.setPrototypeOf?Object.setPrototypeOf(ke,je):ke.__proto__=je)}var $e=function(ke){Ne(je,ke);function je(){return Se(this,je),Te(this,(je.__proto__||Object.getPrototypeOf(je)).apply(this,arguments))}return ue(je,[{key:"formatAt",value:function(Ye,ze,Xe,Je){if(je.compare(this.statics.blotName,Xe)<0&&ge.default.query(Xe,ge.default.Scope.BLOT)){var rt=this.isolate(Ye,ze);Je&&rt.wrap(Xe,Je)}else Ae(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"formatAt",this).call(this,Ye,ze,Xe,Je)}},{key:"optimize",value:function(Ye){if(Ae(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"optimize",this).call(this,Ye),this.parent instanceof je&&je.compare(this.statics.blotName,this.parent.statics.blotName)>0){var ze=this.parent.isolate(this.offset(),this.length());this.moveChildren(ze),ze.wrap(this)}}}],[{key:"compare",value:function(Ye,ze){var Xe=je.order.indexOf(Ye),Je=je.order.indexOf(ze);return Xe>=0||Je>=0?Xe-Je:Ye===ze?0:Ye<ze?-1:1}}]),je}(ge.default.Inline);$e.allowedChildren=[$e,ge.default.Embed,xe.default],$e.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],oe.default=$e},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(0),Ae=pe(ue);function pe(Se){return Se&&Se.__esModule?Se:{default:Se}}function xe(Se,Te){if(!(Se instanceof Te))throw new TypeError("Cannot call a class as a function")}function me(Se,Te){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Te&&(typeof Te=="object"||typeof Te=="function")?Te:Se}function ge(Se,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Te);Se.prototype=Object.create(Te&&Te.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),Te&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,Te):Se.__proto__=Te)}var ye=function(Se){ge(Te,Se);function Te(){return xe(this,Te),me(this,(Te.__proto__||Object.getPrototypeOf(Te)).apply(this,arguments))}return Te}(Ae.default.Text);oe.default=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function Ke(Ye,ze){for(var Xe=0;Xe<ze.length;Xe++){var Je=ze[Xe];Je.enumerable=Je.enumerable||!1,Je.configurable=!0,"value"in Je&&(Je.writable=!0),Object.defineProperty(Ye,Je.key,Je)}}return function(Ye,ze,Xe){return ze&&Ke(Ye.prototype,ze),Xe&&Ke(Ye,Xe),Ye}}(),Ae=function Ke(Ye,ze,Xe){Ye===null&&(Ye=Function.prototype);var Je=Object.getOwnPropertyDescriptor(Ye,ze);if(Je===void 0){var rt=Object.getPrototypeOf(Ye);return rt===null?void 0:Ke(rt,ze,Xe)}else{if("value"in Je)return Je.value;var Ze=Je.get;return Ze===void 0?void 0:Ze.call(Xe)}},pe=ce(54),xe=ye(pe),me=ce(10),ge=ye(me);function ye(Ke){return Ke&&Ke.__esModule?Ke:{default:Ke}}function Se(Ke,Ye){if(!(Ke instanceof Ye))throw new TypeError("Cannot call a class as a function")}function Te(Ke,Ye){if(!Ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ye&&(typeof Ye=="object"||typeof Ye=="function")?Ye:Ke}function Ne(Ke,Ye){if(typeof Ye!="function"&&Ye!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ye);Ke.prototype=Object.create(Ye&&Ye.prototype,{constructor:{value:Ke,enumerable:!1,writable:!0,configurable:!0}}),Ye&&(Object.setPrototypeOf?Object.setPrototypeOf(Ke,Ye):Ke.__proto__=Ye)}var $e=(0,ge.default)("quill:events"),ke=["selectionchange","mousedown","mouseup","click"];ke.forEach(function(Ke){document.addEventListener(Ke,function(){for(var Ye=arguments.length,ze=Array(Ye),Xe=0;Xe<Ye;Xe++)ze[Xe]=arguments[Xe];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(Je){if(Je.__quill&&Je.__quill.emitter){var rt;(rt=Je.__quill.emitter).handleDOM.apply(rt,ze)}})})});var je=function(Ke){Ne(Ye,Ke);function Ye(){Se(this,Ye);var ze=Te(this,(Ye.__proto__||Object.getPrototypeOf(Ye)).call(this));return ze.listeners={},ze.on("error",$e.error),ze}return ue(Ye,[{key:"emit",value:function(){$e.log.apply($e,arguments),Ae(Ye.prototype.__proto__||Object.getPrototypeOf(Ye.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(Xe){for(var Je=arguments.length,rt=Array(Je>1?Je-1:0),Ze=1;Ze<Je;Ze++)rt[Ze-1]=arguments[Ze];(this.listeners[Xe.type]||[]).forEach(function(et){var nt=et.node,Ge=et.handler;(Xe.target===nt||nt.contains(Xe.target))&&Ge.apply(void 0,[Xe].concat(rt))})}},{key:"listenDOM",value:function(Xe,Je,rt){this.listeners[Xe]||(this.listeners[Xe]=[]),this.listeners[Xe].push({node:Je,handler:rt})}}]),Ye}(xe.default);je.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},je.sources={API:"api",SILENT:"silent",USER:"user"},oe.default=je},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});function ue(pe,xe){if(!(pe instanceof xe))throw new TypeError("Cannot call a class as a function")}var Ae=function pe(xe){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ue(this,pe),this.quill=xe,this.options=me};Ae.DEFAULTS={},oe.default=Ae},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=["error","warn","log","info"],Ae="warn";function pe(me){if(ue.indexOf(me)<=ue.indexOf(Ae)){for(var ge,ye=arguments.length,Se=Array(ye>1?ye-1:0),Te=1;Te<ye;Te++)Se[Te-1]=arguments[Te];(ge=console)[me].apply(ge,Se)}}function xe(me){return ue.reduce(function(ge,ye){return ge[ye]=pe.bind(console,ye,me),ge},{})}pe.level=xe.level=function(me){Ae=me},oe.default=xe},function(ne,oe,ce){var ue=Array.prototype.slice,Ae=ce(52),pe=ce(53),xe=ne.exports=function(Se,Te,Ne){return Ne||(Ne={}),Se===Te?!0:Se instanceof Date&&Te instanceof Date?Se.getTime()===Te.getTime():!Se||!Te||typeof Se!="object"&&typeof Te!="object"?Ne.strict?Se===Te:Se==Te:ye(Se,Te,Ne)};function me(Se){return Se==null}function ge(Se){return!(!Se||typeof Se!="object"||typeof Se.length!="number"||typeof Se.copy!="function"||typeof Se.slice!="function"||Se.length>0&&typeof Se[0]!="number")}function ye(Se,Te,Ne){var $e,ke;if(me(Se)||me(Te)||Se.prototype!==Te.prototype)return!1;if(pe(Se))return pe(Te)?(Se=ue.call(Se),Te=ue.call(Te),xe(Se,Te,Ne)):!1;if(ge(Se)){if(!ge(Te)||Se.length!==Te.length)return!1;for($e=0;$e<Se.length;$e++)if(Se[$e]!==Te[$e])return!1;return!0}try{var je=Ae(Se),Ke=Ae(Te)}catch{return!1}if(je.length!=Ke.length)return!1;for(je.sort(),Ke.sort(),$e=je.length-1;$e>=0;$e--)if(je[$e]!=Ke[$e])return!1;for($e=je.length-1;$e>=0;$e--)if(ke=je[$e],!xe(Se[ke],Te[ke],Ne))return!1;return typeof Se==typeof Te}},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(1),Ae=function(){function pe(xe,me,ge){ge===void 0&&(ge={}),this.attrName=xe,this.keyName=me;var ye=ue.Scope.TYPE&ue.Scope.ATTRIBUTE;ge.scope!=null?this.scope=ge.scope&ue.Scope.LEVEL|ye:this.scope=ue.Scope.ATTRIBUTE,ge.whitelist!=null&&(this.whitelist=ge.whitelist)}return pe.keys=function(xe){return[].map.call(xe.attributes,function(me){return me.name})},pe.prototype.add=function(xe,me){return this.canAdd(xe,me)?(xe.setAttribute(this.keyName,me),!0):!1},pe.prototype.canAdd=function(xe,me){var ge=ue.query(xe,ue.Scope.BLOT&(this.scope|ue.Scope.TYPE));return ge==null?!1:this.whitelist==null?!0:typeof me=="string"?this.whitelist.indexOf(me.replace(/["']/g,""))>-1:this.whitelist.indexOf(me)>-1},pe.prototype.remove=function(xe){xe.removeAttribute(this.keyName)},pe.prototype.value=function(xe){var me=xe.getAttribute(this.keyName);return this.canAdd(xe,me)&&me?me:""},pe}();oe.default=Ae},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.Code=void 0;var ue=function(){function Ze(et,nt){var Ge=[],ve=!0,Be=!1,Re=void 0;try{for(var Ie=et[Symbol.iterator](),Fe;!(ve=(Fe=Ie.next()).done)&&(Ge.push(Fe.value),!(nt&&Ge.length===nt));ve=!0);}catch(qe){Be=!0,Re=qe}finally{try{!ve&&Ie.return&&Ie.return()}finally{if(Be)throw Re}}return Ge}return function(et,nt){if(Array.isArray(et))return et;if(Symbol.iterator in Object(et))return Ze(et,nt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ae=function(){function Ze(et,nt){for(var Ge=0;Ge<nt.length;Ge++){var ve=nt[Ge];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(et,ve.key,ve)}}return function(et,nt,Ge){return nt&&Ze(et.prototype,nt),Ge&&Ze(et,Ge),et}}(),pe=function Ze(et,nt,Ge){et===null&&(et=Function.prototype);var ve=Object.getOwnPropertyDescriptor(et,nt);if(ve===void 0){var Be=Object.getPrototypeOf(et);return Be===null?void 0:Ze(Be,nt,Ge)}else{if("value"in ve)return ve.value;var Re=ve.get;return Re===void 0?void 0:Re.call(Ge)}},xe=ce(2),me=Ke(xe),ge=ce(0),ye=Ke(ge),Se=ce(4),Te=Ke(Se),Ne=ce(6),$e=Ke(Ne),ke=ce(7),je=Ke(ke);function Ke(Ze){return Ze&&Ze.__esModule?Ze:{default:Ze}}function Ye(Ze,et){if(!(Ze instanceof et))throw new TypeError("Cannot call a class as a function")}function ze(Ze,et){if(!Ze)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return et&&(typeof et=="object"||typeof et=="function")?et:Ze}function Xe(Ze,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof et);Ze.prototype=Object.create(et&&et.prototype,{constructor:{value:Ze,enumerable:!1,writable:!0,configurable:!0}}),et&&(Object.setPrototypeOf?Object.setPrototypeOf(Ze,et):Ze.__proto__=et)}var Je=function(Ze){Xe(et,Ze);function et(){return Ye(this,et),ze(this,(et.__proto__||Object.getPrototypeOf(et)).apply(this,arguments))}return et}($e.default);Je.blotName="code",Je.tagName="CODE";var rt=function(Ze){Xe(et,Ze);function et(){return Ye(this,et),ze(this,(et.__proto__||Object.getPrototypeOf(et)).apply(this,arguments))}return Ae(et,[{key:"delta",value:function(){var Ge=this,ve=this.domNode.textContent;return ve.endsWith(`
`)&&(ve=ve.slice(0,-1)),ve.split(`
`).reduce(function(Be,Re){return Be.insert(Re).insert(`
`,Ge.formats())},new me.default)}},{key:"format",value:function(Ge,ve){if(!(Ge===this.statics.blotName&&ve)){var Be=this.descendant(je.default,this.length()-1),Re=ue(Be,1),Ie=Re[0];Ie!=null&&Ie.deleteAt(Ie.length()-1,1),pe(et.prototype.__proto__||Object.getPrototypeOf(et.prototype),"format",this).call(this,Ge,ve)}}},{key:"formatAt",value:function(Ge,ve,Be,Re){if(ve!==0&&!(ye.default.query(Be,ye.default.Scope.BLOCK)==null||Be===this.statics.blotName&&Re===this.statics.formats(this.domNode))){var Ie=this.newlineIndex(Ge);if(!(Ie<0||Ie>=Ge+ve)){var Fe=this.newlineIndex(Ge,!0)+1,qe=Ie-Fe+1,We=this.isolate(Fe,qe),Ue=We.next;We.format(Be,Re),Ue instanceof et&&Ue.formatAt(0,Ge-Fe+ve-qe,Be,Re)}}}},{key:"insertAt",value:function(Ge,ve,Be){if(Be==null){var Re=this.descendant(je.default,Ge),Ie=ue(Re,2),Fe=Ie[0],qe=Ie[1];Fe.insertAt(qe,ve)}}},{key:"length",value:function(){var Ge=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?Ge:Ge+1}},{key:"newlineIndex",value:function(Ge){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(ve)return this.domNode.textContent.slice(0,Ge).lastIndexOf(`
`);var Be=this.domNode.textContent.slice(Ge).indexOf(`
`);return Be>-1?Ge+Be:-1}},{key:"optimize",value:function(Ge){this.domNode.textContent.endsWith(`
`)||this.appendChild(ye.default.create("text",`
`)),pe(et.prototype.__proto__||Object.getPrototypeOf(et.prototype),"optimize",this).call(this,Ge);var ve=this.next;ve!=null&&ve.prev===this&&ve.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===ve.statics.formats(ve.domNode)&&(ve.optimize(Ge),ve.moveChildren(this),ve.remove())}},{key:"replace",value:function(Ge){pe(et.prototype.__proto__||Object.getPrototypeOf(et.prototype),"replace",this).call(this,Ge),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(ve){var Be=ye.default.find(ve);Be==null?ve.parentNode.removeChild(ve):Be instanceof ye.default.Embed?Be.remove():Be.unwrap()})}}],[{key:"create",value:function(Ge){var ve=pe(et.__proto__||Object.getPrototypeOf(et),"create",this).call(this,Ge);return ve.setAttribute("spellcheck",!1),ve}},{key:"formats",value:function(){return!0}}]),et}(Te.default);rt.blotName="code-block",rt.tagName="PRE",rt.TAB="  ",oe.Code=Je,oe.default=rt},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ue){return typeof Ue}:function(Ue){return Ue&&typeof Symbol=="function"&&Ue.constructor===Symbol&&Ue!==Symbol.prototype?"symbol":typeof Ue},Ae=function(){function Ue(_e,Qe){var tt=[],it=!0,at=!1,ot=void 0;try{for(var lt=_e[Symbol.iterator](),st;!(it=(st=lt.next()).done)&&(tt.push(st.value),!(Qe&&tt.length===Qe));it=!0);}catch(ut){at=!0,ot=ut}finally{try{!it&&lt.return&&lt.return()}finally{if(at)throw ot}}return tt}return function(_e,Qe){if(Array.isArray(_e))return _e;if(Symbol.iterator in Object(_e))return Ue(_e,Qe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function(){function Ue(_e,Qe){for(var tt=0;tt<Qe.length;tt++){var it=Qe[tt];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(_e,it.key,it)}}return function(_e,Qe,tt){return Qe&&Ue(_e.prototype,Qe),tt&&Ue(_e,tt),_e}}(),xe=ce(2),me=ve(xe),ge=ce(20),ye=ve(ge),Se=ce(0),Te=ve(Se),Ne=ce(13),$e=ve(Ne),ke=ce(24),je=ve(ke),Ke=ce(4),Ye=ve(Ke),ze=ce(16),Xe=ve(ze),Je=ce(21),rt=ve(Je),Ze=ce(11),et=ve(Ze),nt=ce(3),Ge=ve(nt);function ve(Ue){return Ue&&Ue.__esModule?Ue:{default:Ue}}function Be(Ue,_e,Qe){return _e in Ue?Object.defineProperty(Ue,_e,{value:Qe,enumerable:!0,configurable:!0,writable:!0}):Ue[_e]=Qe,Ue}function Re(Ue,_e){if(!(Ue instanceof _e))throw new TypeError("Cannot call a class as a function")}var Ie=/^[ -~]*$/,Fe=function(){function Ue(_e){Re(this,Ue),this.scroll=_e,this.delta=this.getDelta()}return pe(Ue,[{key:"applyDelta",value:function(Qe){var tt=this,it=!1;this.scroll.update();var at=this.scroll.length();return this.scroll.batchStart(),Qe=We(Qe),Qe.reduce(function(ot,lt){var st=lt.retain||lt.delete||lt.insert.length||1,ut=lt.attributes||{};if(lt.insert!=null){if(typeof lt.insert=="string"){var ft=lt.insert;ft.endsWith(`
`)&&it&&(it=!1,ft=ft.slice(0,-1)),ot>=at&&!ft.endsWith(`
`)&&(it=!0),tt.scroll.insertAt(ot,ft);var dt=tt.scroll.line(ot),Bt=Ae(dt,2),pt=Bt[0],mt=Bt[1],bt=(0,Ge.default)({},(0,Ke.bubbleFormats)(pt));if(pt instanceof Ye.default){var xt=pt.descendant(Te.default.Leaf,mt),yt=Ae(xt,1),It=yt[0];bt=(0,Ge.default)(bt,(0,Ke.bubbleFormats)(It))}ut=ye.default.attributes.diff(bt,ut)||{}}else if(ue(lt.insert)==="object"){var ht=Object.keys(lt.insert)[0];if(ht==null)return ot;tt.scroll.insertAt(ot,ht,lt.insert[ht])}at+=st}return Object.keys(ut).forEach(function(gt){tt.scroll.formatAt(ot,st,gt,ut[gt])}),ot+st},0),Qe.reduce(function(ot,lt){return typeof lt.delete=="number"?(tt.scroll.deleteAt(ot,lt.delete),ot):ot+(lt.retain||lt.insert.length||1)},0),this.scroll.batchEnd(),this.update(Qe)}},{key:"deleteText",value:function(Qe,tt){return this.scroll.deleteAt(Qe,tt),this.update(new me.default().retain(Qe).delete(tt))}},{key:"formatLine",value:function(Qe,tt){var it=this,at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(at).forEach(function(ot){if(!(it.scroll.whitelist!=null&&!it.scroll.whitelist[ot])){var lt=it.scroll.lines(Qe,Math.max(tt,1)),st=tt;lt.forEach(function(ut){var ft=ut.length();if(!(ut instanceof $e.default))ut.format(ot,at[ot]);else{var dt=Qe-ut.offset(it.scroll),Bt=ut.newlineIndex(dt+st)-dt+1;ut.formatAt(dt,Bt,ot,at[ot])}st-=ft})}}),this.scroll.optimize(),this.update(new me.default().retain(Qe).retain(tt,(0,rt.default)(at)))}},{key:"formatText",value:function(Qe,tt){var it=this,at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(at).forEach(function(ot){it.scroll.formatAt(Qe,tt,ot,at[ot])}),this.update(new me.default().retain(Qe).retain(tt,(0,rt.default)(at)))}},{key:"getContents",value:function(Qe,tt){return this.delta.slice(Qe,Qe+tt)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(Qe,tt){return Qe.concat(tt.delta())},new me.default)}},{key:"getFormat",value:function(Qe){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,it=[],at=[];tt===0?this.scroll.path(Qe).forEach(function(lt){var st=Ae(lt,1),ut=st[0];ut instanceof Ye.default?it.push(ut):ut instanceof Te.default.Leaf&&at.push(ut)}):(it=this.scroll.lines(Qe,tt),at=this.scroll.descendants(Te.default.Leaf,Qe,tt));var ot=[it,at].map(function(lt){if(lt.length===0)return{};for(var st=(0,Ke.bubbleFormats)(lt.shift());Object.keys(st).length>0;){var ut=lt.shift();if(ut==null)return st;st=qe((0,Ke.bubbleFormats)(ut),st)}return st});return Ge.default.apply(Ge.default,ot)}},{key:"getText",value:function(Qe,tt){return this.getContents(Qe,tt).filter(function(it){return typeof it.insert=="string"}).map(function(it){return it.insert}).join("")}},{key:"insertEmbed",value:function(Qe,tt,it){return this.scroll.insertAt(Qe,tt,it),this.update(new me.default().retain(Qe).insert(Be({},tt,it)))}},{key:"insertText",value:function(Qe,tt){var it=this,at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return tt=tt.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(Qe,tt),Object.keys(at).forEach(function(ot){it.scroll.formatAt(Qe,tt.length,ot,at[ot])}),this.update(new me.default().retain(Qe).insert(tt,(0,rt.default)(at)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var Qe=this.scroll.children.head;return Qe.statics.blotName!==Ye.default.blotName||Qe.children.length>1?!1:Qe.children.head instanceof Xe.default}},{key:"removeFormat",value:function(Qe,tt){var it=this.getText(Qe,tt),at=this.scroll.line(Qe+tt),ot=Ae(at,2),lt=ot[0],st=ot[1],ut=0,ft=new me.default;lt!=null&&(lt instanceof $e.default?ut=lt.newlineIndex(st)-st+1:ut=lt.length()-st,ft=lt.delta().slice(st,st+ut-1).insert(`
`));var dt=this.getContents(Qe,tt+ut),Bt=dt.diff(new me.default().insert(it).concat(ft)),pt=new me.default().retain(Qe).concat(Bt);return this.applyDelta(pt)}},{key:"update",value:function(Qe){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,at=this.delta;if(tt.length===1&&tt[0].type==="characterData"&&tt[0].target.data.match(Ie)&&Te.default.find(tt[0].target)){var ot=Te.default.find(tt[0].target),lt=(0,Ke.bubbleFormats)(ot),st=ot.offset(this.scroll),ut=tt[0].oldValue.replace(je.default.CONTENTS,""),ft=new me.default().insert(ut),dt=new me.default().insert(ot.value()),Bt=new me.default().retain(st).concat(ft.diff(dt,it));Qe=Bt.reduce(function(pt,mt){return mt.insert?pt.insert(mt.insert,lt):pt.push(mt)},new me.default),this.delta=at.compose(Qe)}else this.delta=this.getDelta(),(!Qe||!(0,et.default)(at.compose(Qe),this.delta))&&(Qe=at.diff(this.delta,it));return Qe}}]),Ue}();function qe(Ue,_e){return Object.keys(_e).reduce(function(Qe,tt){return Ue[tt]==null||(_e[tt]===Ue[tt]?Qe[tt]=_e[tt]:Array.isArray(_e[tt])?_e[tt].indexOf(Ue[tt])<0&&(Qe[tt]=_e[tt].concat([Ue[tt]])):Qe[tt]=[_e[tt],Ue[tt]]),Qe},{})}function We(Ue){return Ue.reduce(function(_e,Qe){if(Qe.insert===1){var tt=(0,rt.default)(Qe.attributes);return delete tt.image,_e.insert({image:Qe.attributes.image},tt)}if(Qe.attributes!=null&&(Qe.attributes.list===!0||Qe.attributes.bullet===!0)&&(Qe=(0,rt.default)(Qe),Qe.attributes.list?Qe.attributes.list="ordered":(Qe.attributes.list="bullet",delete Qe.attributes.bullet)),typeof Qe.insert=="string"){var it=Qe.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return _e.insert(it,Qe.attributes)}return _e.push(Qe)},new me.default)}oe.default=Fe},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.Range=void 0;var ue=function(){function Ze(et,nt){var Ge=[],ve=!0,Be=!1,Re=void 0;try{for(var Ie=et[Symbol.iterator](),Fe;!(ve=(Fe=Ie.next()).done)&&(Ge.push(Fe.value),!(nt&&Ge.length===nt));ve=!0);}catch(qe){Be=!0,Re=qe}finally{try{!ve&&Ie.return&&Ie.return()}finally{if(Be)throw Re}}return Ge}return function(et,nt){if(Array.isArray(et))return et;if(Symbol.iterator in Object(et))return Ze(et,nt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ae=function(){function Ze(et,nt){for(var Ge=0;Ge<nt.length;Ge++){var ve=nt[Ge];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(et,ve.key,ve)}}return function(et,nt,Ge){return nt&&Ze(et.prototype,nt),Ge&&Ze(et,Ge),et}}(),pe=ce(0),xe=je(pe),me=ce(21),ge=je(me),ye=ce(11),Se=je(ye),Te=ce(8),Ne=je(Te),$e=ce(10),ke=je($e);function je(Ze){return Ze&&Ze.__esModule?Ze:{default:Ze}}function Ke(Ze){if(Array.isArray(Ze)){for(var et=0,nt=Array(Ze.length);et<Ze.length;et++)nt[et]=Ze[et];return nt}else return Array.from(Ze)}function Ye(Ze,et){if(!(Ze instanceof et))throw new TypeError("Cannot call a class as a function")}var ze=(0,ke.default)("quill:selection"),Xe=function Ze(et){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ye(this,Ze),this.index=et,this.length=nt},Je=function(){function Ze(et,nt){var Ge=this;Ye(this,Ze),this.emitter=nt,this.scroll=et,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=xe.default.create("cursor",this),this.lastRange=this.savedRange=new Xe(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){Ge.mouseDown||setTimeout(Ge.update.bind(Ge,Ne.default.sources.USER),1)}),this.emitter.on(Ne.default.events.EDITOR_CHANGE,function(ve,Be){ve===Ne.default.events.TEXT_CHANGE&&Be.length()>0&&Ge.update(Ne.default.sources.SILENT)}),this.emitter.on(Ne.default.events.SCROLL_BEFORE_UPDATE,function(){if(Ge.hasFocus()){var ve=Ge.getNativeRange();ve!=null&&ve.start.node!==Ge.cursor.textNode&&Ge.emitter.once(Ne.default.events.SCROLL_UPDATE,function(){try{Ge.setNativeRange(ve.start.node,ve.start.offset,ve.end.node,ve.end.offset)}catch{}})}}),this.emitter.on(Ne.default.events.SCROLL_OPTIMIZE,function(ve,Be){if(Be.range){var Re=Be.range,Ie=Re.startNode,Fe=Re.startOffset,qe=Re.endNode,We=Re.endOffset;Ge.setNativeRange(Ie,Fe,qe,We)}}),this.update(Ne.default.sources.SILENT)}return Ae(Ze,[{key:"handleComposition",value:function(){var nt=this;this.root.addEventListener("compositionstart",function(){nt.composing=!0}),this.root.addEventListener("compositionend",function(){if(nt.composing=!1,nt.cursor.parent){var Ge=nt.cursor.restore();if(!Ge)return;setTimeout(function(){nt.setNativeRange(Ge.startNode,Ge.startOffset,Ge.endNode,Ge.endOffset)},1)}})}},{key:"handleDragging",value:function(){var nt=this;this.emitter.listenDOM("mousedown",document.body,function(){nt.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){nt.mouseDown=!1,nt.update(Ne.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(nt,Ge){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[nt])){this.scroll.update();var ve=this.getNativeRange();if(!(ve==null||!ve.native.collapsed||xe.default.query(nt,xe.default.Scope.BLOCK))){if(ve.start.node!==this.cursor.textNode){var Be=xe.default.find(ve.start.node,!1);if(Be==null)return;if(Be instanceof xe.default.Leaf){var Re=Be.split(ve.start.offset);Be.parent.insertBefore(this.cursor,Re)}else Be.insertBefore(this.cursor,ve.start.node);this.cursor.attach()}this.cursor.format(nt,Ge),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(nt){var Ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ve=this.scroll.length();nt=Math.min(nt,ve-1),Ge=Math.min(nt+Ge,ve-1)-nt;var Be=void 0,Re=this.scroll.leaf(nt),Ie=ue(Re,2),Fe=Ie[0],qe=Ie[1];if(Fe==null)return null;var We=Fe.position(qe,!0),Ue=ue(We,2);Be=Ue[0],qe=Ue[1];var _e=document.createRange();if(Ge>0){_e.setStart(Be,qe);var Qe=this.scroll.leaf(nt+Ge),tt=ue(Qe,2);if(Fe=tt[0],qe=tt[1],Fe==null)return null;var it=Fe.position(qe,!0),at=ue(it,2);return Be=at[0],qe=at[1],_e.setEnd(Be,qe),_e.getBoundingClientRect()}else{var ot="left",lt=void 0;return Be instanceof Text?(qe<Be.data.length?(_e.setStart(Be,qe),_e.setEnd(Be,qe+1)):(_e.setStart(Be,qe-1),_e.setEnd(Be,qe),ot="right"),lt=_e.getBoundingClientRect()):(lt=Fe.domNode.getBoundingClientRect(),qe>0&&(ot="right")),{bottom:lt.top+lt.height,height:lt.height,left:lt[ot],right:lt[ot],top:lt.top,width:0}}}},{key:"getNativeRange",value:function(){var nt=document.getSelection();if(nt==null||nt.rangeCount<=0)return null;var Ge=nt.getRangeAt(0);if(Ge==null)return null;var ve=this.normalizeNative(Ge);return ze.info("getNativeRange",ve),ve}},{key:"getRange",value:function(){var nt=this.getNativeRange();if(nt==null)return[null,null];var Ge=this.normalizedToRange(nt);return[Ge,nt]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(nt){var Ge=this,ve=[[nt.start.node,nt.start.offset]];nt.native.collapsed||ve.push([nt.end.node,nt.end.offset]);var Be=ve.map(function(Fe){var qe=ue(Fe,2),We=qe[0],Ue=qe[1],_e=xe.default.find(We,!0),Qe=_e.offset(Ge.scroll);return Ue===0?Qe:_e instanceof xe.default.Container?Qe+_e.length():Qe+_e.index(We,Ue)}),Re=Math.min(Math.max.apply(Math,Ke(Be)),this.scroll.length()-1),Ie=Math.min.apply(Math,[Re].concat(Ke(Be)));return new Xe(Ie,Re-Ie)}},{key:"normalizeNative",value:function(nt){if(!rt(this.root,nt.startContainer)||!nt.collapsed&&!rt(this.root,nt.endContainer))return null;var Ge={start:{node:nt.startContainer,offset:nt.startOffset},end:{node:nt.endContainer,offset:nt.endOffset},native:nt};return[Ge.start,Ge.end].forEach(function(ve){for(var Be=ve.node,Re=ve.offset;!(Be instanceof Text)&&Be.childNodes.length>0;)if(Be.childNodes.length>Re)Be=Be.childNodes[Re],Re=0;else if(Be.childNodes.length===Re)Be=Be.lastChild,Re=Be instanceof Text?Be.data.length:Be.childNodes.length+1;else break;ve.node=Be,ve.offset=Re}),Ge}},{key:"rangeToNative",value:function(nt){var Ge=this,ve=nt.collapsed?[nt.index]:[nt.index,nt.index+nt.length],Be=[],Re=this.scroll.length();return ve.forEach(function(Ie,Fe){Ie=Math.min(Re-1,Ie);var qe=void 0,We=Ge.scroll.leaf(Ie),Ue=ue(We,2),_e=Ue[0],Qe=Ue[1],tt=_e.position(Qe,Fe!==0),it=ue(tt,2);qe=it[0],Qe=it[1],Be.push(qe,Qe)}),Be.length<2&&(Be=Be.concat(Be)),Be}},{key:"scrollIntoView",value:function(nt){var Ge=this.lastRange;if(Ge!=null){var ve=this.getBounds(Ge.index,Ge.length);if(ve!=null){var Be=this.scroll.length()-1,Re=this.scroll.line(Math.min(Ge.index,Be)),Ie=ue(Re,1),Fe=Ie[0],qe=Fe;if(Ge.length>0){var We=this.scroll.line(Math.min(Ge.index+Ge.length,Be)),Ue=ue(We,1);qe=Ue[0]}if(!(Fe==null||qe==null)){var _e=nt.getBoundingClientRect();ve.top<_e.top?nt.scrollTop-=_e.top-ve.top:ve.bottom>_e.bottom&&(nt.scrollTop+=ve.bottom-_e.bottom)}}}}},{key:"setNativeRange",value:function(nt,Ge){var ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nt,Be=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ge,Re=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(ze.info("setNativeRange",nt,Ge,ve,Be),!(nt!=null&&(this.root.parentNode==null||nt.parentNode==null||ve.parentNode==null))){var Ie=document.getSelection();if(Ie!=null)if(nt!=null){this.hasFocus()||this.root.focus();var Fe=(this.getNativeRange()||{}).native;if(Fe==null||Re||nt!==Fe.startContainer||Ge!==Fe.startOffset||ve!==Fe.endContainer||Be!==Fe.endOffset){nt.tagName=="BR"&&(Ge=[].indexOf.call(nt.parentNode.childNodes,nt),nt=nt.parentNode),ve.tagName=="BR"&&(Be=[].indexOf.call(ve.parentNode.childNodes,ve),ve=ve.parentNode);var qe=document.createRange();qe.setStart(nt,Ge),qe.setEnd(ve,Be),Ie.removeAllRanges(),Ie.addRange(qe)}}else Ie.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(nt){var Ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ne.default.sources.API;if(typeof Ge=="string"&&(ve=Ge,Ge=!1),ze.info("setRange",nt),nt!=null){var Be=this.rangeToNative(nt);this.setNativeRange.apply(this,Ke(Be).concat([Ge]))}else this.setNativeRange(null);this.update(ve)}},{key:"update",value:function(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ne.default.sources.USER,Ge=this.lastRange,ve=this.getRange(),Be=ue(ve,2),Re=Be[0],Ie=Be[1];if(this.lastRange=Re,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,Se.default)(Ge,this.lastRange)){var Fe;!this.composing&&Ie!=null&&Ie.native.collapsed&&Ie.start.node!==this.cursor.textNode&&this.cursor.restore();var qe=[Ne.default.events.SELECTION_CHANGE,(0,ge.default)(this.lastRange),(0,ge.default)(Ge),nt];if((Fe=this.emitter).emit.apply(Fe,[Ne.default.events.EDITOR_CHANGE].concat(qe)),nt!==Ne.default.sources.SILENT){var We;(We=this.emitter).emit.apply(We,qe)}}}}]),Ze}();function rt(Ze,et){try{et.parentNode}catch{return!1}return et instanceof Text&&(et=et.parentNode),Ze.contains(et)}oe.Range=Xe,oe.default=Je},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function Ne($e,ke){for(var je=0;je<ke.length;je++){var Ke=ke[je];Ke.enumerable=Ke.enumerable||!1,Ke.configurable=!0,"value"in Ke&&(Ke.writable=!0),Object.defineProperty($e,Ke.key,Ke)}}return function($e,ke,je){return ke&&Ne($e.prototype,ke),je&&Ne($e,je),$e}}(),Ae=function Ne($e,ke,je){$e===null&&($e=Function.prototype);var Ke=Object.getOwnPropertyDescriptor($e,ke);if(Ke===void 0){var Ye=Object.getPrototypeOf($e);return Ye===null?void 0:Ne(Ye,ke,je)}else{if("value"in Ke)return Ke.value;var ze=Ke.get;return ze===void 0?void 0:ze.call(je)}},pe=ce(0),xe=me(pe);function me(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}function ge(Ne,$e){if(!(Ne instanceof $e))throw new TypeError("Cannot call a class as a function")}function ye(Ne,$e){if(!Ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $e&&(typeof $e=="object"||typeof $e=="function")?$e:Ne}function Se(Ne,$e){if(typeof $e!="function"&&$e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $e);Ne.prototype=Object.create($e&&$e.prototype,{constructor:{value:Ne,enumerable:!1,writable:!0,configurable:!0}}),$e&&(Object.setPrototypeOf?Object.setPrototypeOf(Ne,$e):Ne.__proto__=$e)}var Te=function(Ne){Se($e,Ne);function $e(){return ge(this,$e),ye(this,($e.__proto__||Object.getPrototypeOf($e)).apply(this,arguments))}return ue($e,[{key:"insertInto",value:function(je,Ke){je.children.length===0?Ae($e.prototype.__proto__||Object.getPrototypeOf($e.prototype),"insertInto",this).call(this,je,Ke):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),$e}(xe.default.Embed);Te.blotName="break",Te.tagName="BR",oe.default=Te},function(ne,oe,ce){var ue=this&&this.__extends||function(){var ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Se,Te){Se.__proto__=Te}||function(Se,Te){for(var Ne in Te)Te.hasOwnProperty(Ne)&&(Se[Ne]=Te[Ne])};return function(Se,Te){ye(Se,Te);function Ne(){this.constructor=Se}Se.prototype=Te===null?Object.create(Te):(Ne.prototype=Te.prototype,new Ne)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(44),pe=ce(30),xe=ce(1),me=function(ye){ue(Se,ye);function Se(Te){var Ne=ye.call(this,Te)||this;return Ne.build(),Ne}return Se.prototype.appendChild=function(Te){this.insertBefore(Te)},Se.prototype.attach=function(){ye.prototype.attach.call(this),this.children.forEach(function(Te){Te.attach()})},Se.prototype.build=function(){var Te=this;this.children=new Ae.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(Ne){try{var $e=ge(Ne);Te.insertBefore($e,Te.children.head||void 0)}catch(ke){if(ke instanceof xe.ParchmentError)return;throw ke}})},Se.prototype.deleteAt=function(Te,Ne){if(Te===0&&Ne===this.length())return this.remove();this.children.forEachAt(Te,Ne,function($e,ke,je){$e.deleteAt(ke,je)})},Se.prototype.descendant=function(Te,Ne){var $e=this.children.find(Ne),ke=$e[0],je=$e[1];return Te.blotName==null&&Te(ke)||Te.blotName!=null&&ke instanceof Te?[ke,je]:ke instanceof Se?ke.descendant(Te,je):[null,-1]},Se.prototype.descendants=function(Te,Ne,$e){Ne===void 0&&(Ne=0),$e===void 0&&($e=Number.MAX_VALUE);var ke=[],je=$e;return this.children.forEachAt(Ne,$e,function(Ke,Ye,ze){(Te.blotName==null&&Te(Ke)||Te.blotName!=null&&Ke instanceof Te)&&ke.push(Ke),Ke instanceof Se&&(ke=ke.concat(Ke.descendants(Te,Ye,je))),je-=ze}),ke},Se.prototype.detach=function(){this.children.forEach(function(Te){Te.detach()}),ye.prototype.detach.call(this)},Se.prototype.formatAt=function(Te,Ne,$e,ke){this.children.forEachAt(Te,Ne,function(je,Ke,Ye){je.formatAt(Ke,Ye,$e,ke)})},Se.prototype.insertAt=function(Te,Ne,$e){var ke=this.children.find(Te),je=ke[0],Ke=ke[1];if(je)je.insertAt(Ke,Ne,$e);else{var Ye=$e==null?xe.create("text",Ne):xe.create(Ne,$e);this.appendChild(Ye)}},Se.prototype.insertBefore=function(Te,Ne){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function($e){return Te instanceof $e}))throw new xe.ParchmentError("Cannot insert "+Te.statics.blotName+" into "+this.statics.blotName);Te.insertInto(this,Ne)},Se.prototype.length=function(){return this.children.reduce(function(Te,Ne){return Te+Ne.length()},0)},Se.prototype.moveChildren=function(Te,Ne){this.children.forEach(function($e){Te.insertBefore($e,Ne)})},Se.prototype.optimize=function(Te){if(ye.prototype.optimize.call(this,Te),this.children.length===0)if(this.statics.defaultChild!=null){var Ne=xe.create(this.statics.defaultChild);this.appendChild(Ne),Ne.optimize(Te)}else this.remove()},Se.prototype.path=function(Te,Ne){Ne===void 0&&(Ne=!1);var $e=this.children.find(Te,Ne),ke=$e[0],je=$e[1],Ke=[[this,Te]];return ke instanceof Se?Ke.concat(ke.path(je,Ne)):(ke!=null&&Ke.push([ke,je]),Ke)},Se.prototype.removeChild=function(Te){this.children.remove(Te)},Se.prototype.replace=function(Te){Te instanceof Se&&Te.moveChildren(this),ye.prototype.replace.call(this,Te)},Se.prototype.split=function(Te,Ne){if(Ne===void 0&&(Ne=!1),!Ne){if(Te===0)return this;if(Te===this.length())return this.next}var $e=this.clone();return this.parent.insertBefore($e,this.next),this.children.forEachAt(Te,this.length(),function(ke,je,Ke){ke=ke.split(je,Ne),$e.appendChild(ke)}),$e},Se.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},Se.prototype.update=function(Te,Ne){var $e=this,ke=[],je=[];Te.forEach(function(Ke){Ke.target===$e.domNode&&Ke.type==="childList"&&(ke.push.apply(ke,Ke.addedNodes),je.push.apply(je,Ke.removedNodes))}),je.forEach(function(Ke){if(!(Ke.parentNode!=null&&Ke.tagName!=="IFRAME"&&document.body.compareDocumentPosition(Ke)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var Ye=xe.find(Ke);Ye!=null&&(Ye.domNode.parentNode==null||Ye.domNode.parentNode===$e.domNode)&&Ye.detach()}}),ke.filter(function(Ke){return Ke.parentNode==$e.domNode}).sort(function(Ke,Ye){return Ke===Ye?0:Ke.compareDocumentPosition(Ye)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(Ke){var Ye=null;Ke.nextSibling!=null&&(Ye=xe.find(Ke.nextSibling));var ze=ge(Ke);(ze.next!=Ye||ze.next==null)&&(ze.parent!=null&&ze.parent.removeChild($e),$e.insertBefore(ze,Ye||void 0))})},Se}(pe.default);function ge(ye){var Se=xe.find(ye);if(Se==null)try{Se=xe.create(ye)}catch{Se=xe.create(xe.Scope.INLINE),[].slice.call(ye.childNodes).forEach(function(Ne){Se.domNode.appendChild(Ne)}),ye.parentNode&&ye.parentNode.replaceChild(Se.domNode,ye),Se.attach()}return Se}oe.default=me},function(ne,oe,ce){var ue=this&&this.__extends||function(){var ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Se,Te){Se.__proto__=Te}||function(Se,Te){for(var Ne in Te)Te.hasOwnProperty(Ne)&&(Se[Ne]=Te[Ne])};return function(Se,Te){ye(Se,Te);function Ne(){this.constructor=Se}Se.prototype=Te===null?Object.create(Te):(Ne.prototype=Te.prototype,new Ne)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(12),pe=ce(31),xe=ce(17),me=ce(1),ge=function(ye){ue(Se,ye);function Se(Te){var Ne=ye.call(this,Te)||this;return Ne.attributes=new pe.default(Ne.domNode),Ne}return Se.formats=function(Te){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return Te.tagName.toLowerCase()},Se.prototype.format=function(Te,Ne){var $e=me.query(Te);$e instanceof Ae.default?this.attributes.attribute($e,Ne):Ne&&$e!=null&&(Te!==this.statics.blotName||this.formats()[Te]!==Ne)&&this.replaceWith(Te,Ne)},Se.prototype.formats=function(){var Te=this.attributes.values(),Ne=this.statics.formats(this.domNode);return Ne!=null&&(Te[this.statics.blotName]=Ne),Te},Se.prototype.replaceWith=function(Te,Ne){var $e=ye.prototype.replaceWith.call(this,Te,Ne);return this.attributes.copy($e),$e},Se.prototype.update=function(Te,Ne){var $e=this;ye.prototype.update.call(this,Te,Ne),Te.some(function(ke){return ke.target===$e.domNode&&ke.type==="attributes"})&&this.attributes.build()},Se.prototype.wrap=function(Te,Ne){var $e=ye.prototype.wrap.call(this,Te,Ne);return $e instanceof Se&&$e.statics.scope===this.statics.scope&&this.attributes.move($e),$e},Se}(xe.default);oe.default=ge},function(ne,oe,ce){var ue=this&&this.__extends||function(){var me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,ye){ge.__proto__=ye}||function(ge,ye){for(var Se in ye)ye.hasOwnProperty(Se)&&(ge[Se]=ye[Se])};return function(ge,ye){me(ge,ye);function Se(){this.constructor=ge}ge.prototype=ye===null?Object.create(ye):(Se.prototype=ye.prototype,new Se)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(30),pe=ce(1),xe=function(me){ue(ge,me);function ge(){return me!==null&&me.apply(this,arguments)||this}return ge.value=function(ye){return!0},ge.prototype.index=function(ye,Se){return this.domNode===ye||this.domNode.compareDocumentPosition(ye)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(Se,1):-1},ge.prototype.position=function(ye,Se){var Te=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return ye>0&&(Te+=1),[this.parent.domNode,Te]},ge.prototype.value=function(){var ye;return ye={},ye[this.statics.blotName]=this.statics.value(this.domNode)||!0,ye},ge.scope=pe.Scope.INLINE_BLOT,ge}(Ae.default);oe.default=xe},function(ne,oe,ce){var ue=ce(11),Ae=ce(3),pe={attributes:{compose:function(me,ge,ye){typeof me!="object"&&(me={}),typeof ge!="object"&&(ge={});var Se=Ae(!0,{},ge);ye||(Se=Object.keys(Se).reduce(function(Ne,$e){return Se[$e]!=null&&(Ne[$e]=Se[$e]),Ne},{}));for(var Te in me)me[Te]!==void 0&&ge[Te]===void 0&&(Se[Te]=me[Te]);return Object.keys(Se).length>0?Se:void 0},diff:function(me,ge){typeof me!="object"&&(me={}),typeof ge!="object"&&(ge={});var ye=Object.keys(me).concat(Object.keys(ge)).reduce(function(Se,Te){return ue(me[Te],ge[Te])||(Se[Te]=ge[Te]===void 0?null:ge[Te]),Se},{});return Object.keys(ye).length>0?ye:void 0},transform:function(me,ge,ye){if(typeof me!="object")return ge;if(typeof ge=="object"){if(!ye)return ge;var Se=Object.keys(ge).reduce(function(Te,Ne){return me[Ne]===void 0&&(Te[Ne]=ge[Ne]),Te},{});return Object.keys(Se).length>0?Se:void 0}}},iterator:function(me){return new xe(me)},length:function(me){return typeof me.delete=="number"?me.delete:typeof me.retain=="number"?me.retain:typeof me.insert=="string"?me.insert.length:1}};function xe(me){this.ops=me,this.index=0,this.offset=0}xe.prototype.hasNext=function(){return this.peekLength()<1/0},xe.prototype.next=function(me){me||(me=1/0);var ge=this.ops[this.index];if(ge){var ye=this.offset,Se=pe.length(ge);if(me>=Se-ye?(me=Se-ye,this.index+=1,this.offset=0):this.offset+=me,typeof ge.delete=="number")return{delete:me};var Te={};return ge.attributes&&(Te.attributes=ge.attributes),typeof ge.retain=="number"?Te.retain=me:typeof ge.insert=="string"?Te.insert=ge.insert.substr(ye,me):Te.insert=ge.insert,Te}else return{retain:1/0}},xe.prototype.peek=function(){return this.ops[this.index]},xe.prototype.peekLength=function(){return this.ops[this.index]?pe.length(this.ops[this.index])-this.offset:1/0},xe.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},xe.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var me=this.offset,ge=this.index,ye=this.next(),Se=this.ops.slice(this.index);return this.offset=me,this.index=ge,[ye].concat(Se)}else return[]},ne.exports=pe},function(ne,oe){var ce=function(){function ue($e,ke){return ke!=null&&$e instanceof ke}var Ae;try{Ae=Map}catch{Ae=function(){}}var pe;try{pe=Set}catch{pe=function(){}}var xe;try{xe=Promise}catch{xe=function(){}}function me($e,ke,je,Ke,Ye){typeof ke=="object"&&(je=ke.depth,Ke=ke.prototype,Ye=ke.includeNonEnumerable,ke=ke.circular);var ze=[],Xe=[],Je=typeof Buffer<"u";typeof ke>"u"&&(ke=!0),typeof je>"u"&&(je=1/0);function rt(Ze,et){if(Ze===null)return null;if(et===0)return Ze;var nt,Ge;if(typeof Ze!="object")return Ze;if(ue(Ze,Ae))nt=new Ae;else if(ue(Ze,pe))nt=new pe;else if(ue(Ze,xe))nt=new xe(function(_e,Qe){Ze.then(function(tt){_e(rt(tt,et-1))},function(tt){Qe(rt(tt,et-1))})});else if(me.__isArray(Ze))nt=[];else if(me.__isRegExp(Ze))nt=new RegExp(Ze.source,Ne(Ze)),Ze.lastIndex&&(nt.lastIndex=Ze.lastIndex);else if(me.__isDate(Ze))nt=new Date(Ze.getTime());else{if(Je&&Buffer.isBuffer(Ze))return Buffer.allocUnsafe?nt=Buffer.allocUnsafe(Ze.length):nt=new Buffer(Ze.length),Ze.copy(nt),nt;ue(Ze,Error)?nt=Object.create(Ze):typeof Ke>"u"?(Ge=Object.getPrototypeOf(Ze),nt=Object.create(Ge)):(nt=Object.create(Ke),Ge=Ke)}if(ke){var ve=ze.indexOf(Ze);if(ve!=-1)return Xe[ve];ze.push(Ze),Xe.push(nt)}ue(Ze,Ae)&&Ze.forEach(function(_e,Qe){var tt=rt(Qe,et-1),it=rt(_e,et-1);nt.set(tt,it)}),ue(Ze,pe)&&Ze.forEach(function(_e){var Qe=rt(_e,et-1);nt.add(Qe)});for(var Be in Ze){var Re;Ge&&(Re=Object.getOwnPropertyDescriptor(Ge,Be)),!(Re&&Re.set==null)&&(nt[Be]=rt(Ze[Be],et-1))}if(Object.getOwnPropertySymbols)for(var Ie=Object.getOwnPropertySymbols(Ze),Be=0;Be<Ie.length;Be++){var Fe=Ie[Be],qe=Object.getOwnPropertyDescriptor(Ze,Fe);qe&&!qe.enumerable&&!Ye||(nt[Fe]=rt(Ze[Fe],et-1),qe.enumerable||Object.defineProperty(nt,Fe,{enumerable:!1}))}if(Ye)for(var We=Object.getOwnPropertyNames(Ze),Be=0;Be<We.length;Be++){var Ue=We[Be],qe=Object.getOwnPropertyDescriptor(Ze,Ue);qe&&qe.enumerable||(nt[Ue]=rt(Ze[Ue],et-1),Object.defineProperty(nt,Ue,{enumerable:!1}))}return nt}return rt($e,je)}me.clonePrototype=function(ke){if(ke===null)return null;var je=function(){};return je.prototype=ke,new je};function ge($e){return Object.prototype.toString.call($e)}me.__objToStr=ge;function ye($e){return typeof $e=="object"&&ge($e)==="[object Date]"}me.__isDate=ye;function Se($e){return typeof $e=="object"&&ge($e)==="[object Array]"}me.__isArray=Se;function Te($e){return typeof $e=="object"&&ge($e)==="[object RegExp]"}me.__isRegExp=Te;function Ne($e){var ke="";return $e.global&&(ke+="g"),$e.ignoreCase&&(ke+="i"),$e.multiline&&(ke+="m"),ke}return me.__getRegExpFlags=Ne,me}();typeof ne=="object"&&ne.exports&&(ne.exports=ce)},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function nt(Ge,ve){var Be=[],Re=!0,Ie=!1,Fe=void 0;try{for(var qe=Ge[Symbol.iterator](),We;!(Re=(We=qe.next()).done)&&(Be.push(We.value),!(ve&&Be.length===ve));Re=!0);}catch(Ue){Ie=!0,Fe=Ue}finally{try{!Re&&qe.return&&qe.return()}finally{if(Ie)throw Fe}}return Be}return function(Ge,ve){if(Array.isArray(Ge))return Ge;if(Symbol.iterator in Object(Ge))return nt(Ge,ve);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ae=function(){function nt(Ge,ve){for(var Be=0;Be<ve.length;Be++){var Re=ve[Be];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(Ge,Re.key,Re)}}return function(Ge,ve,Be){return ve&&nt(Ge.prototype,ve),Be&&nt(Ge,Be),Ge}}(),pe=function nt(Ge,ve,Be){Ge===null&&(Ge=Function.prototype);var Re=Object.getOwnPropertyDescriptor(Ge,ve);if(Re===void 0){var Ie=Object.getPrototypeOf(Ge);return Ie===null?void 0:nt(Ie,ve,Be)}else{if("value"in Re)return Re.value;var Fe=Re.get;return Fe===void 0?void 0:Fe.call(Be)}},xe=ce(0),me=ze(xe),ge=ce(8),ye=ze(ge),Se=ce(4),Te=ze(Se),Ne=ce(16),$e=ze(Ne),ke=ce(13),je=ze(ke),Ke=ce(25),Ye=ze(Ke);function ze(nt){return nt&&nt.__esModule?nt:{default:nt}}function Xe(nt,Ge){if(!(nt instanceof Ge))throw new TypeError("Cannot call a class as a function")}function Je(nt,Ge){if(!nt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ge&&(typeof Ge=="object"||typeof Ge=="function")?Ge:nt}function rt(nt,Ge){if(typeof Ge!="function"&&Ge!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ge);nt.prototype=Object.create(Ge&&Ge.prototype,{constructor:{value:nt,enumerable:!1,writable:!0,configurable:!0}}),Ge&&(Object.setPrototypeOf?Object.setPrototypeOf(nt,Ge):nt.__proto__=Ge)}function Ze(nt){return nt instanceof Te.default||nt instanceof Se.BlockEmbed}var et=function(nt){rt(Ge,nt);function Ge(ve,Be){Xe(this,Ge);var Re=Je(this,(Ge.__proto__||Object.getPrototypeOf(Ge)).call(this,ve));return Re.emitter=Be.emitter,Array.isArray(Be.whitelist)&&(Re.whitelist=Be.whitelist.reduce(function(Ie,Fe){return Ie[Fe]=!0,Ie},{})),Re.domNode.addEventListener("DOMNodeInserted",function(){}),Re.optimize(),Re.enable(),Re}return Ae(Ge,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(Be,Re){var Ie=this.line(Be),Fe=ue(Ie,2),qe=Fe[0],We=Fe[1],Ue=this.line(Be+Re),_e=ue(Ue,1),Qe=_e[0];if(pe(Ge.prototype.__proto__||Object.getPrototypeOf(Ge.prototype),"deleteAt",this).call(this,Be,Re),Qe!=null&&qe!==Qe&&We>0){if(qe instanceof Se.BlockEmbed||Qe instanceof Se.BlockEmbed){this.optimize();return}if(qe instanceof je.default){var tt=qe.newlineIndex(qe.length(),!0);if(tt>-1&&(qe=qe.split(tt+1),qe===Qe)){this.optimize();return}}else if(Qe instanceof je.default){var it=Qe.newlineIndex(0);it>-1&&Qe.split(it+1)}var at=Qe.children.head instanceof $e.default?null:Qe.children.head;qe.moveChildren(Qe,at),qe.remove()}this.optimize()}},{key:"enable",value:function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",Be)}},{key:"formatAt",value:function(Be,Re,Ie,Fe){this.whitelist!=null&&!this.whitelist[Ie]||(pe(Ge.prototype.__proto__||Object.getPrototypeOf(Ge.prototype),"formatAt",this).call(this,Be,Re,Ie,Fe),this.optimize())}},{key:"insertAt",value:function(Be,Re,Ie){if(!(Ie!=null&&this.whitelist!=null&&!this.whitelist[Re])){if(Be>=this.length())if(Ie==null||me.default.query(Re,me.default.Scope.BLOCK)==null){var Fe=me.default.create(this.statics.defaultChild);this.appendChild(Fe),Ie==null&&Re.endsWith(`
`)&&(Re=Re.slice(0,-1)),Fe.insertAt(0,Re,Ie)}else{var qe=me.default.create(Re,Ie);this.appendChild(qe)}else pe(Ge.prototype.__proto__||Object.getPrototypeOf(Ge.prototype),"insertAt",this).call(this,Be,Re,Ie);this.optimize()}}},{key:"insertBefore",value:function(Be,Re){if(Be.statics.scope===me.default.Scope.INLINE_BLOT){var Ie=me.default.create(this.statics.defaultChild);Ie.appendChild(Be),Be=Ie}pe(Ge.prototype.__proto__||Object.getPrototypeOf(Ge.prototype),"insertBefore",this).call(this,Be,Re)}},{key:"leaf",value:function(Be){return this.path(Be).pop()||[null,-1]}},{key:"line",value:function(Be){return Be===this.length()?this.line(Be-1):this.descendant(Ze,Be)}},{key:"lines",value:function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,Ie=function Fe(qe,We,Ue){var _e=[],Qe=Ue;return qe.children.forEachAt(We,Ue,function(tt,it,at){Ze(tt)?_e.push(tt):tt instanceof me.default.Container&&(_e=_e.concat(Fe(tt,it,Qe))),Qe-=at}),_e};return Ie(this,Be,Re)}},{key:"optimize",value:function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(pe(Ge.prototype.__proto__||Object.getPrototypeOf(Ge.prototype),"optimize",this).call(this,Be,Re),Be.length>0&&this.emitter.emit(ye.default.events.SCROLL_OPTIMIZE,Be,Re))}},{key:"path",value:function(Be){return pe(Ge.prototype.__proto__||Object.getPrototypeOf(Ge.prototype),"path",this).call(this,Be).slice(1)}},{key:"update",value:function(Be){if(this.batch!==!0){var Re=ye.default.sources.USER;typeof Be=="string"&&(Re=Be),Array.isArray(Be)||(Be=this.observer.takeRecords()),Be.length>0&&this.emitter.emit(ye.default.events.SCROLL_BEFORE_UPDATE,Re,Be),pe(Ge.prototype.__proto__||Object.getPrototypeOf(Ge.prototype),"update",this).call(this,Be.concat([])),Be.length>0&&this.emitter.emit(ye.default.events.SCROLL_UPDATE,Re,Be)}}}]),Ge}(me.default.Scroll);et.blotName="scroll",et.className="ql-editor",et.tagName="DIV",et.defaultChild="block",et.allowedChildren=[Te.default,Se.BlockEmbed,Ye.default],oe.default=et},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.SHORTKEY=oe.default=void 0;var ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lt){return typeof lt}:function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},Ae=function(){function lt(st,ut){var ft=[],dt=!0,Bt=!1,pt=void 0;try{for(var mt=st[Symbol.iterator](),bt;!(dt=(bt=mt.next()).done)&&(ft.push(bt.value),!(ut&&ft.length===ut));dt=!0);}catch(xt){Bt=!0,pt=xt}finally{try{!dt&&mt.return&&mt.return()}finally{if(Bt)throw pt}}return ft}return function(st,ut){if(Array.isArray(st))return st;if(Symbol.iterator in Object(st))return lt(st,ut);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function(){function lt(st,ut){for(var ft=0;ft<ut.length;ft++){var dt=ut[ft];dt.enumerable=dt.enumerable||!1,dt.configurable=!0,"value"in dt&&(dt.writable=!0),Object.defineProperty(st,dt.key,dt)}}return function(st,ut,ft){return ut&&lt(st.prototype,ut),ft&&lt(st,ft),st}}(),xe=ce(21),me=nt(xe),ge=ce(11),ye=nt(ge),Se=ce(3),Te=nt(Se),Ne=ce(2),$e=nt(Ne),ke=ce(20),je=nt(ke),Ke=ce(0),Ye=nt(Ke),ze=ce(5),Xe=nt(ze),Je=ce(10),rt=nt(Je),Ze=ce(9),et=nt(Ze);function nt(lt){return lt&&lt.__esModule?lt:{default:lt}}function Ge(lt,st,ut){return st in lt?Object.defineProperty(lt,st,{value:ut,enumerable:!0,configurable:!0,writable:!0}):lt[st]=ut,lt}function ve(lt,st){if(!(lt instanceof st))throw new TypeError("Cannot call a class as a function")}function Be(lt,st){if(!lt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return st&&(typeof st=="object"||typeof st=="function")?st:lt}function Re(lt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof st);lt.prototype=Object.create(st&&st.prototype,{constructor:{value:lt,enumerable:!1,writable:!0,configurable:!0}}),st&&(Object.setPrototypeOf?Object.setPrototypeOf(lt,st):lt.__proto__=st)}var Ie=(0,rt.default)("quill:keyboard"),Fe=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",qe=function(lt){Re(st,lt),pe(st,null,[{key:"match",value:function(ft,dt){return dt=ot(dt),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Bt){return!!dt[Bt]!==ft[Bt]&&dt[Bt]!==null})?!1:dt.key===(ft.which||ft.keyCode)}}]);function st(ut,ft){ve(this,st);var dt=Be(this,(st.__proto__||Object.getPrototypeOf(st)).call(this,ut,ft));return dt.bindings={},Object.keys(dt.options.bindings).forEach(function(Bt){Bt==="list autofill"&&ut.scroll.whitelist!=null&&!ut.scroll.whitelist.list||dt.options.bindings[Bt]&&dt.addBinding(dt.options.bindings[Bt])}),dt.addBinding({key:st.keys.ENTER,shiftKey:null},tt),dt.addBinding({key:st.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(dt.addBinding({key:st.keys.BACKSPACE},{collapsed:!0},Ue),dt.addBinding({key:st.keys.DELETE},{collapsed:!0},_e)):(dt.addBinding({key:st.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Ue),dt.addBinding({key:st.keys.DELETE},{collapsed:!0,suffix:/^.?$/},_e)),dt.addBinding({key:st.keys.BACKSPACE},{collapsed:!1},Qe),dt.addBinding({key:st.keys.DELETE},{collapsed:!1},Qe),dt.addBinding({key:st.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Ue),dt.listen(),dt}return pe(st,[{key:"addBinding",value:function(ft){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},pt=ot(ft);if(pt==null||pt.key==null)return Ie.warn("Attempted to add invalid keyboard binding",pt);typeof dt=="function"&&(dt={handler:dt}),typeof Bt=="function"&&(Bt={handler:Bt}),pt=(0,Te.default)(pt,dt,Bt),this.bindings[pt.key]=this.bindings[pt.key]||[],this.bindings[pt.key].push(pt)}},{key:"listen",value:function(){var ft=this;this.quill.root.addEventListener("keydown",function(dt){if(!dt.defaultPrevented){var Bt=dt.which||dt.keyCode,pt=(ft.bindings[Bt]||[]).filter(function(Mt){return st.match(dt,Mt)});if(pt.length!==0){var mt=ft.quill.getSelection();if(!(mt==null||!ft.quill.hasFocus())){var bt=ft.quill.getLine(mt.index),xt=Ae(bt,2),yt=xt[0],It=xt[1],ht=ft.quill.getLeaf(mt.index),gt=Ae(ht,2),Pt=gt[0],wt=gt[1],St=mt.length===0?[Pt,wt]:ft.quill.getLeaf(mt.index+mt.length),Zt=Ae(St,2),Ct=Zt[0],Rt=Zt[1],dr=Pt instanceof Ye.default.Text?Pt.value().slice(0,wt):"",Dt=Ct instanceof Ye.default.Text?Ct.value().slice(Rt):"",Tt={collapsed:mt.length===0,empty:mt.length===0&&yt.length()<=1,format:ft.quill.getFormat(mt),offset:It,prefix:dr,suffix:Dt},or=pt.some(function(Mt){if(Mt.collapsed!=null&&Mt.collapsed!==Tt.collapsed||Mt.empty!=null&&Mt.empty!==Tt.empty||Mt.offset!=null&&Mt.offset!==Tt.offset)return!1;if(Array.isArray(Mt.format)){if(Mt.format.every(function(kt){return Tt.format[kt]==null}))return!1}else if(ue(Mt.format)==="object"&&!Object.keys(Mt.format).every(function(kt){return Mt.format[kt]===!0?Tt.format[kt]!=null:Mt.format[kt]===!1?Tt.format[kt]==null:(0,ye.default)(Mt.format[kt],Tt.format[kt])}))return!1;return Mt.prefix!=null&&!Mt.prefix.test(Tt.prefix)||Mt.suffix!=null&&!Mt.suffix.test(Tt.suffix)?!1:Mt.handler.call(ft,mt,Tt)!==!0});or&&dt.preventDefault()}}}})}}]),st}(et.default);qe.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},qe.DEFAULTS={bindings:{bold:at("bold"),italic:at("italic"),underline:at("underline"),indent:{key:qe.keys.TAB,format:["blockquote","indent","list"],handler:function(st,ut){if(ut.collapsed&&ut.offset!==0)return!0;this.quill.format("indent","+1",Xe.default.sources.USER)}},outdent:{key:qe.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(st,ut){if(ut.collapsed&&ut.offset!==0)return!0;this.quill.format("indent","-1",Xe.default.sources.USER)}},"outdent backspace":{key:qe.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(st,ut){ut.format.indent!=null?this.quill.format("indent","-1",Xe.default.sources.USER):ut.format.list!=null&&this.quill.format("list",!1,Xe.default.sources.USER)}},"indent code-block":it(!0),"outdent code-block":it(!1),"remove tab":{key:qe.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(st){this.quill.deleteText(st.index-1,1,Xe.default.sources.USER)}},tab:{key:qe.keys.TAB,handler:function(st){this.quill.history.cutoff();var ut=new $e.default().retain(st.index).delete(st.length).insert("	");this.quill.updateContents(ut,Xe.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(st.index+1,Xe.default.sources.SILENT)}},"list empty enter":{key:qe.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(st,ut){this.quill.format("list",!1,Xe.default.sources.USER),ut.format.indent&&this.quill.format("indent",!1,Xe.default.sources.USER)}},"checklist enter":{key:qe.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(st){var ut=this.quill.getLine(st.index),ft=Ae(ut,2),dt=ft[0],Bt=ft[1],pt=(0,Te.default)({},dt.formats(),{list:"checked"}),mt=new $e.default().retain(st.index).insert(`
`,pt).retain(dt.length()-Bt-1).retain(1,{list:"unchecked"});this.quill.updateContents(mt,Xe.default.sources.USER),this.quill.setSelection(st.index+1,Xe.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:qe.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(st,ut){var ft=this.quill.getLine(st.index),dt=Ae(ft,2),Bt=dt[0],pt=dt[1],mt=new $e.default().retain(st.index).insert(`
`,ut.format).retain(Bt.length()-pt-1).retain(1,{header:null});this.quill.updateContents(mt,Xe.default.sources.USER),this.quill.setSelection(st.index+1,Xe.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(st,ut){var ft=ut.prefix.length,dt=this.quill.getLine(st.index),Bt=Ae(dt,2),pt=Bt[0],mt=Bt[1];if(mt>ft)return!0;var bt=void 0;switch(ut.prefix.trim()){case"[]":case"[ ]":bt="unchecked";break;case"[x]":bt="checked";break;case"-":case"*":bt="bullet";break;default:bt="ordered"}this.quill.insertText(st.index," ",Xe.default.sources.USER),this.quill.history.cutoff();var xt=new $e.default().retain(st.index-mt).delete(ft+1).retain(pt.length()-2-mt).retain(1,{list:bt});this.quill.updateContents(xt,Xe.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(st.index-ft,Xe.default.sources.SILENT)}},"code exit":{key:qe.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(st){var ut=this.quill.getLine(st.index),ft=Ae(ut,2),dt=ft[0],Bt=ft[1],pt=new $e.default().retain(st.index+dt.length()-Bt-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(pt,Xe.default.sources.USER)}},"embed left":We(qe.keys.LEFT,!1),"embed left shift":We(qe.keys.LEFT,!0),"embed right":We(qe.keys.RIGHT,!1),"embed right shift":We(qe.keys.RIGHT,!0)}};function We(lt,st){var ut,ft=lt===qe.keys.LEFT?"prefix":"suffix";return ut={key:lt,shiftKey:st,altKey:null},Ge(ut,ft,/^$/),Ge(ut,"handler",function(Bt){var pt=Bt.index;lt===qe.keys.RIGHT&&(pt+=Bt.length+1);var mt=this.quill.getLeaf(pt),bt=Ae(mt,1),xt=bt[0];return xt instanceof Ye.default.Embed?(lt===qe.keys.LEFT?st?this.quill.setSelection(Bt.index-1,Bt.length+1,Xe.default.sources.USER):this.quill.setSelection(Bt.index-1,Xe.default.sources.USER):st?this.quill.setSelection(Bt.index,Bt.length+1,Xe.default.sources.USER):this.quill.setSelection(Bt.index+Bt.length+1,Xe.default.sources.USER),!1):!0}),ut}function Ue(lt,st){if(!(lt.index===0||this.quill.getLength()<=1)){var ut=this.quill.getLine(lt.index),ft=Ae(ut,1),dt=ft[0],Bt={};if(st.offset===0){var pt=this.quill.getLine(lt.index-1),mt=Ae(pt,1),bt=mt[0];if(bt!=null&&bt.length()>1){var xt=dt.formats(),yt=this.quill.getFormat(lt.index-1,1);Bt=je.default.attributes.diff(xt,yt)||{}}}var It=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(st.prefix)?2:1;this.quill.deleteText(lt.index-It,It,Xe.default.sources.USER),Object.keys(Bt).length>0&&this.quill.formatLine(lt.index-It,It,Bt,Xe.default.sources.USER),this.quill.focus()}}function _e(lt,st){var ut=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(st.suffix)?2:1;if(!(lt.index>=this.quill.getLength()-ut)){var ft={},dt=0,Bt=this.quill.getLine(lt.index),pt=Ae(Bt,1),mt=pt[0];if(st.offset>=mt.length()-1){var bt=this.quill.getLine(lt.index+1),xt=Ae(bt,1),yt=xt[0];if(yt){var It=mt.formats(),ht=this.quill.getFormat(lt.index,1);ft=je.default.attributes.diff(It,ht)||{},dt=yt.length()}}this.quill.deleteText(lt.index,ut,Xe.default.sources.USER),Object.keys(ft).length>0&&this.quill.formatLine(lt.index+dt-1,ut,ft,Xe.default.sources.USER)}}function Qe(lt){var st=this.quill.getLines(lt),ut={};if(st.length>1){var ft=st[0].formats(),dt=st[st.length-1].formats();ut=je.default.attributes.diff(dt,ft)||{}}this.quill.deleteText(lt,Xe.default.sources.USER),Object.keys(ut).length>0&&this.quill.formatLine(lt.index,1,ut,Xe.default.sources.USER),this.quill.setSelection(lt.index,Xe.default.sources.SILENT),this.quill.focus()}function tt(lt,st){var ut=this;lt.length>0&&this.quill.scroll.deleteAt(lt.index,lt.length);var ft=Object.keys(st.format).reduce(function(dt,Bt){return Ye.default.query(Bt,Ye.default.Scope.BLOCK)&&!Array.isArray(st.format[Bt])&&(dt[Bt]=st.format[Bt]),dt},{});this.quill.insertText(lt.index,`
`,ft,Xe.default.sources.USER),this.quill.setSelection(lt.index+1,Xe.default.sources.SILENT),this.quill.focus(),Object.keys(st.format).forEach(function(dt){ft[dt]==null&&(Array.isArray(st.format[dt])||dt!=="link"&&ut.quill.format(dt,st.format[dt],Xe.default.sources.USER))})}function it(lt){return{key:qe.keys.TAB,shiftKey:!lt,format:{"code-block":!0},handler:function(ut){var ft=Ye.default.query("code-block"),dt=ut.index,Bt=ut.length,pt=this.quill.scroll.descendant(ft,dt),mt=Ae(pt,2),bt=mt[0],xt=mt[1];if(bt!=null){var yt=this.quill.getIndex(bt),It=bt.newlineIndex(xt,!0)+1,ht=bt.newlineIndex(yt+xt+Bt),gt=bt.domNode.textContent.slice(It,ht).split(`
`);xt=0,gt.forEach(function(Pt,wt){lt?(bt.insertAt(It+xt,ft.TAB),xt+=ft.TAB.length,wt===0?dt+=ft.TAB.length:Bt+=ft.TAB.length):Pt.startsWith(ft.TAB)&&(bt.deleteAt(It+xt,ft.TAB.length),xt-=ft.TAB.length,wt===0?dt-=ft.TAB.length:Bt-=ft.TAB.length),xt+=Pt.length+1}),this.quill.update(Xe.default.sources.USER),this.quill.setSelection(dt,Bt,Xe.default.sources.SILENT)}}}}function at(lt){return{key:lt[0].toUpperCase(),shortKey:!0,handler:function(ut,ft){this.quill.format(lt,!ft.format[lt],Xe.default.sources.USER)}}}function ot(lt){if(typeof lt=="string"||typeof lt=="number")return ot({key:lt});if((typeof lt>"u"?"undefined":ue(lt))==="object"&&(lt=(0,me.default)(lt,!1)),typeof lt.key=="string")if(qe.keys[lt.key.toUpperCase()]!=null)lt.key=qe.keys[lt.key.toUpperCase()];else if(lt.key.length===1)lt.key=lt.key.toUpperCase().charCodeAt(0);else return null;return lt.shortKey&&(lt[Fe]=lt.shortKey,delete lt.shortKey),lt}oe.default=qe,oe.SHORTKEY=Fe},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function je(Ke,Ye){var ze=[],Xe=!0,Je=!1,rt=void 0;try{for(var Ze=Ke[Symbol.iterator](),et;!(Xe=(et=Ze.next()).done)&&(ze.push(et.value),!(Ye&&ze.length===Ye));Xe=!0);}catch(nt){Je=!0,rt=nt}finally{try{!Xe&&Ze.return&&Ze.return()}finally{if(Je)throw rt}}return ze}return function(Ke,Ye){if(Array.isArray(Ke))return Ke;if(Symbol.iterator in Object(Ke))return je(Ke,Ye);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ae=function je(Ke,Ye,ze){Ke===null&&(Ke=Function.prototype);var Xe=Object.getOwnPropertyDescriptor(Ke,Ye);if(Xe===void 0){var Je=Object.getPrototypeOf(Ke);return Je===null?void 0:je(Je,Ye,ze)}else{if("value"in Xe)return Xe.value;var rt=Xe.get;return rt===void 0?void 0:rt.call(ze)}},pe=function(){function je(Ke,Ye){for(var ze=0;ze<Ye.length;ze++){var Xe=Ye[ze];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(Ke,Xe.key,Xe)}}return function(Ke,Ye,ze){return Ye&&je(Ke.prototype,Ye),ze&&je(Ke,ze),Ke}}(),xe=ce(0),me=Se(xe),ge=ce(7),ye=Se(ge);function Se(je){return je&&je.__esModule?je:{default:je}}function Te(je,Ke){if(!(je instanceof Ke))throw new TypeError("Cannot call a class as a function")}function Ne(je,Ke){if(!je)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ke&&(typeof Ke=="object"||typeof Ke=="function")?Ke:je}function $e(je,Ke){if(typeof Ke!="function"&&Ke!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ke);je.prototype=Object.create(Ke&&Ke.prototype,{constructor:{value:je,enumerable:!1,writable:!0,configurable:!0}}),Ke&&(Object.setPrototypeOf?Object.setPrototypeOf(je,Ke):je.__proto__=Ke)}var ke=function(je){$e(Ke,je),pe(Ke,null,[{key:"value",value:function(){}}]);function Ke(Ye,ze){Te(this,Ke);var Xe=Ne(this,(Ke.__proto__||Object.getPrototypeOf(Ke)).call(this,Ye));return Xe.selection=ze,Xe.textNode=document.createTextNode(Ke.CONTENTS),Xe.domNode.appendChild(Xe.textNode),Xe._length=0,Xe}return pe(Ke,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(ze,Xe){if(this._length!==0)return Ae(Ke.prototype.__proto__||Object.getPrototypeOf(Ke.prototype),"format",this).call(this,ze,Xe);for(var Je=this,rt=0;Je!=null&&Je.statics.scope!==me.default.Scope.BLOCK_BLOT;)rt+=Je.offset(Je.parent),Je=Je.parent;Je!=null&&(this._length=Ke.CONTENTS.length,Je.optimize(),Je.formatAt(rt,Ke.CONTENTS.length,ze,Xe),this._length=0)}},{key:"index",value:function(ze,Xe){return ze===this.textNode?0:Ae(Ke.prototype.__proto__||Object.getPrototypeOf(Ke.prototype),"index",this).call(this,ze,Xe)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){Ae(Ke.prototype.__proto__||Object.getPrototypeOf(Ke.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var ze=this.textNode,Xe=this.selection.getNativeRange(),Je=void 0,rt=void 0,Ze=void 0;if(Xe!=null&&Xe.start.node===ze&&Xe.end.node===ze){var et=[ze,Xe.start.offset,Xe.end.offset];Je=et[0],rt=et[1],Ze=et[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==Ke.CONTENTS){var nt=this.textNode.data.split(Ke.CONTENTS).join("");this.next instanceof ye.default?(Je=this.next.domNode,this.next.insertAt(0,nt),this.textNode.data=Ke.CONTENTS):(this.textNode.data=nt,this.parent.insertBefore(me.default.create(this.textNode),this),this.textNode=document.createTextNode(Ke.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),rt!=null){var Ge=[rt,Ze].map(function(Be){return Math.max(0,Math.min(Je.data.length,Be-1))}),ve=ue(Ge,2);return rt=ve[0],Ze=ve[1],{startNode:Je,startOffset:rt,endNode:Je,endOffset:Ze}}}}},{key:"update",value:function(ze,Xe){var Je=this;if(ze.some(function(Ze){return Ze.type==="characterData"&&Ze.target===Je.textNode})){var rt=this.restore();rt&&(Xe.range=rt)}}},{key:"value",value:function(){return""}}]),Ke}(me.default.Embed);ke.blotName="cursor",ke.className="ql-cursor",ke.tagName="span",ke.CONTENTS="\uFEFF",oe.default=ke},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(0),Ae=me(ue),pe=ce(4),xe=me(pe);function me(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}function ge(Ne,$e){if(!(Ne instanceof $e))throw new TypeError("Cannot call a class as a function")}function ye(Ne,$e){if(!Ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $e&&(typeof $e=="object"||typeof $e=="function")?$e:Ne}function Se(Ne,$e){if(typeof $e!="function"&&$e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $e);Ne.prototype=Object.create($e&&$e.prototype,{constructor:{value:Ne,enumerable:!1,writable:!0,configurable:!0}}),$e&&(Object.setPrototypeOf?Object.setPrototypeOf(Ne,$e):Ne.__proto__=$e)}var Te=function(Ne){Se($e,Ne);function $e(){return ge(this,$e),ye(this,($e.__proto__||Object.getPrototypeOf($e)).apply(this,arguments))}return $e}(Ae.default.Container);Te.allowedChildren=[xe.default,pe.BlockEmbed,Te],oe.default=Te},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.ColorStyle=oe.ColorClass=oe.ColorAttributor=void 0;var ue=function(){function ke(je,Ke){for(var Ye=0;Ye<Ke.length;Ye++){var ze=Ke[Ye];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(je,ze.key,ze)}}return function(je,Ke,Ye){return Ke&&ke(je.prototype,Ke),Ye&&ke(je,Ye),je}}(),Ae=function ke(je,Ke,Ye){je===null&&(je=Function.prototype);var ze=Object.getOwnPropertyDescriptor(je,Ke);if(ze===void 0){var Xe=Object.getPrototypeOf(je);return Xe===null?void 0:ke(Xe,Ke,Ye)}else{if("value"in ze)return ze.value;var Je=ze.get;return Je===void 0?void 0:Je.call(Ye)}},pe=ce(0),xe=me(pe);function me(ke){return ke&&ke.__esModule?ke:{default:ke}}function ge(ke,je){if(!(ke instanceof je))throw new TypeError("Cannot call a class as a function")}function ye(ke,je){if(!ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return je&&(typeof je=="object"||typeof je=="function")?je:ke}function Se(ke,je){if(typeof je!="function"&&je!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof je);ke.prototype=Object.create(je&&je.prototype,{constructor:{value:ke,enumerable:!1,writable:!0,configurable:!0}}),je&&(Object.setPrototypeOf?Object.setPrototypeOf(ke,je):ke.__proto__=je)}var Te=function(ke){Se(je,ke);function je(){return ge(this,je),ye(this,(je.__proto__||Object.getPrototypeOf(je)).apply(this,arguments))}return ue(je,[{key:"value",value:function(Ye){var ze=Ae(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"value",this).call(this,Ye);return ze.startsWith("rgb(")?(ze=ze.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+ze.split(",").map(function(Xe){return("00"+parseInt(Xe).toString(16)).slice(-2)}).join("")):ze}}]),je}(xe.default.Attributor.Style),Ne=new xe.default.Attributor.Class("color","ql-color",{scope:xe.default.Scope.INLINE}),$e=new Te("color","color",{scope:xe.default.Scope.INLINE});oe.ColorAttributor=Te,oe.ColorClass=Ne,oe.ColorStyle=$e},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.sanitize=oe.default=void 0;var ue=function(){function $e(ke,je){for(var Ke=0;Ke<je.length;Ke++){var Ye=je[Ke];Ye.enumerable=Ye.enumerable||!1,Ye.configurable=!0,"value"in Ye&&(Ye.writable=!0),Object.defineProperty(ke,Ye.key,Ye)}}return function(ke,je,Ke){return je&&$e(ke.prototype,je),Ke&&$e(ke,Ke),ke}}(),Ae=function $e(ke,je,Ke){ke===null&&(ke=Function.prototype);var Ye=Object.getOwnPropertyDescriptor(ke,je);if(Ye===void 0){var ze=Object.getPrototypeOf(ke);return ze===null?void 0:$e(ze,je,Ke)}else{if("value"in Ye)return Ye.value;var Xe=Ye.get;return Xe===void 0?void 0:Xe.call(Ke)}},pe=ce(6),xe=me(pe);function me($e){return $e&&$e.__esModule?$e:{default:$e}}function ge($e,ke){if(!($e instanceof ke))throw new TypeError("Cannot call a class as a function")}function ye($e,ke){if(!$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ke&&(typeof ke=="object"||typeof ke=="function")?ke:$e}function Se($e,ke){if(typeof ke!="function"&&ke!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ke);$e.prototype=Object.create(ke&&ke.prototype,{constructor:{value:$e,enumerable:!1,writable:!0,configurable:!0}}),ke&&(Object.setPrototypeOf?Object.setPrototypeOf($e,ke):$e.__proto__=ke)}var Te=function($e){Se(ke,$e);function ke(){return ge(this,ke),ye(this,(ke.__proto__||Object.getPrototypeOf(ke)).apply(this,arguments))}return ue(ke,[{key:"format",value:function(Ke,Ye){if(Ke!==this.statics.blotName||!Ye)return Ae(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"format",this).call(this,Ke,Ye);Ye=this.constructor.sanitize(Ye),this.domNode.setAttribute("href",Ye)}}],[{key:"create",value:function(Ke){var Ye=Ae(ke.__proto__||Object.getPrototypeOf(ke),"create",this).call(this,Ke);return Ke=this.sanitize(Ke),Ye.setAttribute("href",Ke),Ye.setAttribute("rel","noopener noreferrer"),Ye.setAttribute("target","_blank"),Ye}},{key:"formats",value:function(Ke){return Ke.getAttribute("href")}},{key:"sanitize",value:function(Ke){return Ne(Ke,this.PROTOCOL_WHITELIST)?Ke:this.SANITIZED_URL}}]),ke}(xe.default);Te.blotName="link",Te.tagName="A",Te.SANITIZED_URL="about:blank",Te.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function Ne($e,ke){var je=document.createElement("a");je.href=$e;var Ke=je.href.slice(0,je.href.indexOf(":"));return ke.indexOf(Ke)>-1}oe.default=Te,oe.sanitize=Ne},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ke){return typeof ke}:function(ke){return ke&&typeof Symbol=="function"&&ke.constructor===Symbol&&ke!==Symbol.prototype?"symbol":typeof ke},Ae=function(){function ke(je,Ke){for(var Ye=0;Ye<Ke.length;Ye++){var ze=Ke[Ye];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(je,ze.key,ze)}}return function(je,Ke,Ye){return Ke&&ke(je.prototype,Ke),Ye&&ke(je,Ye),je}}(),pe=ce(23),xe=ye(pe),me=ce(107),ge=ye(me);function ye(ke){return ke&&ke.__esModule?ke:{default:ke}}function Se(ke,je){if(!(ke instanceof je))throw new TypeError("Cannot call a class as a function")}var Te=0;function Ne(ke,je){ke.setAttribute(je,ke.getAttribute(je)!=="true")}var $e=function(){function ke(je){var Ke=this;Se(this,ke),this.select=je,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){Ke.togglePicker()}),this.label.addEventListener("keydown",function(Ye){switch(Ye.keyCode){case xe.default.keys.ENTER:Ke.togglePicker();break;case xe.default.keys.ESCAPE:Ke.escape(),Ye.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return Ae(ke,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),Ne(this.label,"aria-expanded"),Ne(this.options,"aria-hidden")}},{key:"buildItem",value:function(Ke){var Ye=this,ze=document.createElement("span");return ze.tabIndex="0",ze.setAttribute("role","button"),ze.classList.add("ql-picker-item"),Ke.hasAttribute("value")&&ze.setAttribute("data-value",Ke.getAttribute("value")),Ke.textContent&&ze.setAttribute("data-label",Ke.textContent),ze.addEventListener("click",function(){Ye.selectItem(ze,!0)}),ze.addEventListener("keydown",function(Xe){switch(Xe.keyCode){case xe.default.keys.ENTER:Ye.selectItem(ze,!0),Xe.preventDefault();break;case xe.default.keys.ESCAPE:Ye.escape(),Xe.preventDefault();break}}),ze}},{key:"buildLabel",value:function(){var Ke=document.createElement("span");return Ke.classList.add("ql-picker-label"),Ke.innerHTML=ge.default,Ke.tabIndex="0",Ke.setAttribute("role","button"),Ke.setAttribute("aria-expanded","false"),this.container.appendChild(Ke),Ke}},{key:"buildOptions",value:function(){var Ke=this,Ye=document.createElement("span");Ye.classList.add("ql-picker-options"),Ye.setAttribute("aria-hidden","true"),Ye.tabIndex="-1",Ye.id="ql-picker-options-"+Te,Te+=1,this.label.setAttribute("aria-controls",Ye.id),this.options=Ye,[].slice.call(this.select.options).forEach(function(ze){var Xe=Ke.buildItem(ze);Ye.appendChild(Xe),ze.selected===!0&&Ke.selectItem(Xe)}),this.container.appendChild(Ye)}},{key:"buildPicker",value:function(){var Ke=this;[].slice.call(this.select.attributes).forEach(function(Ye){Ke.container.setAttribute(Ye.name,Ye.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var Ke=this;this.close(),setTimeout(function(){return Ke.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(Ke){var Ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ze=this.container.querySelector(".ql-selected");if(Ke!==ze&&(ze!=null&&ze.classList.remove("ql-selected"),Ke!=null&&(Ke.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(Ke.parentNode.children,Ke),Ke.hasAttribute("data-value")?this.label.setAttribute("data-value",Ke.getAttribute("data-value")):this.label.removeAttribute("data-value"),Ke.hasAttribute("data-label")?this.label.setAttribute("data-label",Ke.getAttribute("data-label")):this.label.removeAttribute("data-label"),Ye))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":ue(Event))==="object"){var Xe=document.createEvent("Event");Xe.initEvent("change",!0,!0),this.select.dispatchEvent(Xe)}this.close()}}},{key:"update",value:function(){var Ke=void 0;if(this.select.selectedIndex>-1){var Ye=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];Ke=this.select.options[this.select.selectedIndex],this.selectItem(Ye)}else this.selectItem(null);var ze=Ke!=null&&Ke!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",ze)}}]),ke}();oe.default=$e},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(0),Ae=Ie(ue),pe=ce(5),xe=Ie(pe),me=ce(4),ge=Ie(me),ye=ce(16),Se=Ie(ye),Te=ce(25),Ne=Ie(Te),$e=ce(24),ke=Ie($e),je=ce(35),Ke=Ie(je),Ye=ce(6),ze=Ie(Ye),Xe=ce(22),Je=Ie(Xe),rt=ce(7),Ze=Ie(rt),et=ce(55),nt=Ie(et),Ge=ce(42),ve=Ie(Ge),Be=ce(23),Re=Ie(Be);function Ie(Fe){return Fe&&Fe.__esModule?Fe:{default:Fe}}xe.default.register({"blots/block":ge.default,"blots/block/embed":me.BlockEmbed,"blots/break":Se.default,"blots/container":Ne.default,"blots/cursor":ke.default,"blots/embed":Ke.default,"blots/inline":ze.default,"blots/scroll":Je.default,"blots/text":Ze.default,"modules/clipboard":nt.default,"modules/history":ve.default,"modules/keyboard":Re.default}),Ae.default.register(ge.default,Se.default,ke.default,ze.default,Je.default,Ze.default),oe.default=xe.default},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(1),Ae=function(){function pe(xe){this.domNode=xe,this.domNode[ue.DATA_KEY]={blot:this}}return Object.defineProperty(pe.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),pe.create=function(xe){if(this.tagName==null)throw new ue.ParchmentError("Blot definition missing tagName");var me;return Array.isArray(this.tagName)?(typeof xe=="string"&&(xe=xe.toUpperCase(),parseInt(xe).toString()===xe&&(xe=parseInt(xe))),typeof xe=="number"?me=document.createElement(this.tagName[xe-1]):this.tagName.indexOf(xe)>-1?me=document.createElement(xe):me=document.createElement(this.tagName[0])):me=document.createElement(this.tagName),this.className&&me.classList.add(this.className),me},pe.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},pe.prototype.clone=function(){var xe=this.domNode.cloneNode(!1);return ue.create(xe)},pe.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[ue.DATA_KEY]},pe.prototype.deleteAt=function(xe,me){var ge=this.isolate(xe,me);ge.remove()},pe.prototype.formatAt=function(xe,me,ge,ye){var Se=this.isolate(xe,me);if(ue.query(ge,ue.Scope.BLOT)!=null&&ye)Se.wrap(ge,ye);else if(ue.query(ge,ue.Scope.ATTRIBUTE)!=null){var Te=ue.create(this.statics.scope);Se.wrap(Te),Te.format(ge,ye)}},pe.prototype.insertAt=function(xe,me,ge){var ye=ge==null?ue.create("text",me):ue.create(me,ge),Se=this.split(xe);this.parent.insertBefore(ye,Se)},pe.prototype.insertInto=function(xe,me){me===void 0&&(me=null),this.parent!=null&&this.parent.children.remove(this);var ge=null;xe.children.insertBefore(this,me),me!=null&&(ge=me.domNode),(this.domNode.parentNode!=xe.domNode||this.domNode.nextSibling!=ge)&&xe.domNode.insertBefore(this.domNode,ge),this.parent=xe,this.attach()},pe.prototype.isolate=function(xe,me){var ge=this.split(xe);return ge.split(me),ge},pe.prototype.length=function(){return 1},pe.prototype.offset=function(xe){return xe===void 0&&(xe=this.parent),this.parent==null||this==xe?0:this.parent.children.offset(this)+this.parent.offset(xe)},pe.prototype.optimize=function(xe){this.domNode[ue.DATA_KEY]!=null&&delete this.domNode[ue.DATA_KEY].mutations},pe.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},pe.prototype.replace=function(xe){xe.parent!=null&&(xe.parent.insertBefore(this,xe.next),xe.remove())},pe.prototype.replaceWith=function(xe,me){var ge=typeof xe=="string"?ue.create(xe,me):xe;return ge.replace(this),ge},pe.prototype.split=function(xe,me){return xe===0?this:this.next},pe.prototype.update=function(xe,me){},pe.prototype.wrap=function(xe,me){var ge=typeof xe=="string"?ue.create(xe,me):xe;return this.parent!=null&&this.parent.insertBefore(ge,this.next),ge.appendChild(this),ge},pe.blotName="abstract",pe}();oe.default=Ae},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(12),Ae=ce(32),pe=ce(33),xe=ce(1),me=function(){function ge(ye){this.attributes={},this.domNode=ye,this.build()}return ge.prototype.attribute=function(ye,Se){Se?ye.add(this.domNode,Se)&&(ye.value(this.domNode)!=null?this.attributes[ye.attrName]=ye:delete this.attributes[ye.attrName]):(ye.remove(this.domNode),delete this.attributes[ye.attrName])},ge.prototype.build=function(){var ye=this;this.attributes={};var Se=ue.default.keys(this.domNode),Te=Ae.default.keys(this.domNode),Ne=pe.default.keys(this.domNode);Se.concat(Te).concat(Ne).forEach(function($e){var ke=xe.query($e,xe.Scope.ATTRIBUTE);ke instanceof ue.default&&(ye.attributes[ke.attrName]=ke)})},ge.prototype.copy=function(ye){var Se=this;Object.keys(this.attributes).forEach(function(Te){var Ne=Se.attributes[Te].value(Se.domNode);ye.format(Te,Ne)})},ge.prototype.move=function(ye){var Se=this;this.copy(ye),Object.keys(this.attributes).forEach(function(Te){Se.attributes[Te].remove(Se.domNode)}),this.attributes={}},ge.prototype.values=function(){var ye=this;return Object.keys(this.attributes).reduce(function(Se,Te){return Se[Te]=ye.attributes[Te].value(ye.domNode),Se},{})},ge}();oe.default=me},function(ne,oe,ce){var ue=this&&this.__extends||function(){var me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,ye){ge.__proto__=ye}||function(ge,ye){for(var Se in ye)ye.hasOwnProperty(Se)&&(ge[Se]=ye[Se])};return function(ge,ye){me(ge,ye);function Se(){this.constructor=ge}ge.prototype=ye===null?Object.create(ye):(Se.prototype=ye.prototype,new Se)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(12);function pe(me,ge){var ye=me.getAttribute("class")||"";return ye.split(/\s+/).filter(function(Se){return Se.indexOf(ge+"-")===0})}var xe=function(me){ue(ge,me);function ge(){return me!==null&&me.apply(this,arguments)||this}return ge.keys=function(ye){return(ye.getAttribute("class")||"").split(/\s+/).map(function(Se){return Se.split("-").slice(0,-1).join("-")})},ge.prototype.add=function(ye,Se){return this.canAdd(ye,Se)?(this.remove(ye),ye.classList.add(this.keyName+"-"+Se),!0):!1},ge.prototype.remove=function(ye){var Se=pe(ye,this.keyName);Se.forEach(function(Te){ye.classList.remove(Te)}),ye.classList.length===0&&ye.removeAttribute("class")},ge.prototype.value=function(ye){var Se=pe(ye,this.keyName)[0]||"",Te=Se.slice(this.keyName.length+1);return this.canAdd(ye,Te)?Te:""},ge}(Ae.default);oe.default=xe},function(ne,oe,ce){var ue=this&&this.__extends||function(){var me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,ye){ge.__proto__=ye}||function(ge,ye){for(var Se in ye)ye.hasOwnProperty(Se)&&(ge[Se]=ye[Se])};return function(ge,ye){me(ge,ye);function Se(){this.constructor=ge}ge.prototype=ye===null?Object.create(ye):(Se.prototype=ye.prototype,new Se)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(12);function pe(me){var ge=me.split("-"),ye=ge.slice(1).map(function(Se){return Se[0].toUpperCase()+Se.slice(1)}).join("");return ge[0]+ye}var xe=function(me){ue(ge,me);function ge(){return me!==null&&me.apply(this,arguments)||this}return ge.keys=function(ye){return(ye.getAttribute("style")||"").split(";").map(function(Se){var Te=Se.split(":");return Te[0].trim()})},ge.prototype.add=function(ye,Se){return this.canAdd(ye,Se)?(ye.style[pe(this.keyName)]=Se,!0):!1},ge.prototype.remove=function(ye){ye.style[pe(this.keyName)]="",ye.getAttribute("style")||ye.removeAttribute("style")},ge.prototype.value=function(ye){var Se=ye.style[pe(this.keyName)];return this.canAdd(ye,Se)?Se:""},ge}(Ae.default);oe.default=xe},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function xe(me,ge){for(var ye=0;ye<ge.length;ye++){var Se=ge[ye];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(me,Se.key,Se)}}return function(me,ge,ye){return ge&&xe(me.prototype,ge),ye&&xe(me,ye),me}}();function Ae(xe,me){if(!(xe instanceof me))throw new TypeError("Cannot call a class as a function")}var pe=function(){function xe(me,ge){Ae(this,xe),this.quill=me,this.options=ge,this.modules={}}return ue(xe,[{key:"init",value:function(){var ge=this;Object.keys(this.options.modules).forEach(function(ye){ge.modules[ye]==null&&ge.addModule(ye)})}},{key:"addModule",value:function(ge){var ye=this.quill.constructor.import("modules/"+ge);return this.modules[ge]=new ye(this.quill,this.options.modules[ge]||{}),this.modules[ge]}}]),xe}();pe.DEFAULTS={modules:{}},pe.themes={default:pe},oe.default=pe},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function je(Ke,Ye){for(var ze=0;ze<Ye.length;ze++){var Xe=Ye[ze];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(Ke,Xe.key,Xe)}}return function(Ke,Ye,ze){return Ye&&je(Ke.prototype,Ye),ze&&je(Ke,ze),Ke}}(),Ae=function je(Ke,Ye,ze){Ke===null&&(Ke=Function.prototype);var Xe=Object.getOwnPropertyDescriptor(Ke,Ye);if(Xe===void 0){var Je=Object.getPrototypeOf(Ke);return Je===null?void 0:je(Je,Ye,ze)}else{if("value"in Xe)return Xe.value;var rt=Xe.get;return rt===void 0?void 0:rt.call(ze)}},pe=ce(0),xe=ye(pe),me=ce(7),ge=ye(me);function ye(je){return je&&je.__esModule?je:{default:je}}function Se(je,Ke){if(!(je instanceof Ke))throw new TypeError("Cannot call a class as a function")}function Te(je,Ke){if(!je)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ke&&(typeof Ke=="object"||typeof Ke=="function")?Ke:je}function Ne(je,Ke){if(typeof Ke!="function"&&Ke!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ke);je.prototype=Object.create(Ke&&Ke.prototype,{constructor:{value:je,enumerable:!1,writable:!0,configurable:!0}}),Ke&&(Object.setPrototypeOf?Object.setPrototypeOf(je,Ke):je.__proto__=Ke)}var $e="\uFEFF",ke=function(je){Ne(Ke,je);function Ke(Ye){Se(this,Ke);var ze=Te(this,(Ke.__proto__||Object.getPrototypeOf(Ke)).call(this,Ye));return ze.contentNode=document.createElement("span"),ze.contentNode.setAttribute("contenteditable",!1),[].slice.call(ze.domNode.childNodes).forEach(function(Xe){ze.contentNode.appendChild(Xe)}),ze.leftGuard=document.createTextNode($e),ze.rightGuard=document.createTextNode($e),ze.domNode.appendChild(ze.leftGuard),ze.domNode.appendChild(ze.contentNode),ze.domNode.appendChild(ze.rightGuard),ze}return ue(Ke,[{key:"index",value:function(ze,Xe){return ze===this.leftGuard?0:ze===this.rightGuard?1:Ae(Ke.prototype.__proto__||Object.getPrototypeOf(Ke.prototype),"index",this).call(this,ze,Xe)}},{key:"restore",value:function(ze){var Xe=void 0,Je=void 0,rt=ze.data.split($e).join("");if(ze===this.leftGuard)if(this.prev instanceof ge.default){var Ze=this.prev.length();this.prev.insertAt(Ze,rt),Xe={startNode:this.prev.domNode,startOffset:Ze+rt.length}}else Je=document.createTextNode(rt),this.parent.insertBefore(xe.default.create(Je),this),Xe={startNode:Je,startOffset:rt.length};else ze===this.rightGuard&&(this.next instanceof ge.default?(this.next.insertAt(0,rt),Xe={startNode:this.next.domNode,startOffset:rt.length}):(Je=document.createTextNode(rt),this.parent.insertBefore(xe.default.create(Je),this.next),Xe={startNode:Je,startOffset:rt.length}));return ze.data=$e,Xe}},{key:"update",value:function(ze,Xe){var Je=this;ze.forEach(function(rt){if(rt.type==="characterData"&&(rt.target===Je.leftGuard||rt.target===Je.rightGuard)){var Ze=Je.restore(rt.target);Ze&&(Xe.range=Ze)}})}}]),Ke}(xe.default.Embed);oe.default=ke},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.AlignStyle=oe.AlignClass=oe.AlignAttribute=void 0;var ue=ce(0),Ae=pe(ue);function pe(Se){return Se&&Se.__esModule?Se:{default:Se}}var xe={scope:Ae.default.Scope.BLOCK,whitelist:["right","center","justify"]},me=new Ae.default.Attributor.Attribute("align","align",xe),ge=new Ae.default.Attributor.Class("align","ql-align",xe),ye=new Ae.default.Attributor.Style("align","text-align",xe);oe.AlignAttribute=me,oe.AlignClass=ge,oe.AlignStyle=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.BackgroundStyle=oe.BackgroundClass=void 0;var ue=ce(0),Ae=xe(ue),pe=ce(26);function xe(ye){return ye&&ye.__esModule?ye:{default:ye}}var me=new Ae.default.Attributor.Class("background","ql-bg",{scope:Ae.default.Scope.INLINE}),ge=new pe.ColorAttributor("background","background-color",{scope:Ae.default.Scope.INLINE});oe.BackgroundClass=me,oe.BackgroundStyle=ge},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.DirectionStyle=oe.DirectionClass=oe.DirectionAttribute=void 0;var ue=ce(0),Ae=pe(ue);function pe(Se){return Se&&Se.__esModule?Se:{default:Se}}var xe={scope:Ae.default.Scope.BLOCK,whitelist:["rtl"]},me=new Ae.default.Attributor.Attribute("direction","dir",xe),ge=new Ae.default.Attributor.Class("direction","ql-direction",xe),ye=new Ae.default.Attributor.Style("direction","direction",xe);oe.DirectionAttribute=me,oe.DirectionClass=ge,oe.DirectionStyle=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.FontClass=oe.FontStyle=void 0;var ue=function(){function je(Ke,Ye){for(var ze=0;ze<Ye.length;ze++){var Xe=Ye[ze];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(Ke,Xe.key,Xe)}}return function(Ke,Ye,ze){return Ye&&je(Ke.prototype,Ye),ze&&je(Ke,ze),Ke}}(),Ae=function je(Ke,Ye,ze){Ke===null&&(Ke=Function.prototype);var Xe=Object.getOwnPropertyDescriptor(Ke,Ye);if(Xe===void 0){var Je=Object.getPrototypeOf(Ke);return Je===null?void 0:je(Je,Ye,ze)}else{if("value"in Xe)return Xe.value;var rt=Xe.get;return rt===void 0?void 0:rt.call(ze)}},pe=ce(0),xe=me(pe);function me(je){return je&&je.__esModule?je:{default:je}}function ge(je,Ke){if(!(je instanceof Ke))throw new TypeError("Cannot call a class as a function")}function ye(je,Ke){if(!je)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ke&&(typeof Ke=="object"||typeof Ke=="function")?Ke:je}function Se(je,Ke){if(typeof Ke!="function"&&Ke!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ke);je.prototype=Object.create(Ke&&Ke.prototype,{constructor:{value:je,enumerable:!1,writable:!0,configurable:!0}}),Ke&&(Object.setPrototypeOf?Object.setPrototypeOf(je,Ke):je.__proto__=Ke)}var Te={scope:xe.default.Scope.INLINE,whitelist:["serif","monospace"]},Ne=new xe.default.Attributor.Class("font","ql-font",Te),$e=function(je){Se(Ke,je);function Ke(){return ge(this,Ke),ye(this,(Ke.__proto__||Object.getPrototypeOf(Ke)).apply(this,arguments))}return ue(Ke,[{key:"value",value:function(ze){return Ae(Ke.prototype.__proto__||Object.getPrototypeOf(Ke.prototype),"value",this).call(this,ze).replace(/["']/g,"")}}]),Ke}(xe.default.Attributor.Style),ke=new $e("font","font-family",Te);oe.FontStyle=ke,oe.FontClass=Ne},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.SizeStyle=oe.SizeClass=void 0;var ue=ce(0),Ae=pe(ue);function pe(ge){return ge&&ge.__esModule?ge:{default:ge}}var xe=new Ae.default.Attributor.Class("size","ql-size",{scope:Ae.default.Scope.INLINE,whitelist:["small","large","huge"]}),me=new Ae.default.Attributor.Style("size","font-size",{scope:Ae.default.Scope.INLINE,whitelist:["10px","18px","32px"]});oe.SizeClass=xe,oe.SizeStyle=me},function(ne,oe,ce){ne.exports={align:{"":ce(76),center:ce(77),right:ce(78),justify:ce(79)},background:ce(80),blockquote:ce(81),bold:ce(82),clean:ce(83),code:ce(58),"code-block":ce(58),color:ce(84),direction:{"":ce(85),rtl:ce(86)},float:{center:ce(87),full:ce(88),left:ce(89),right:ce(90)},formula:ce(91),header:{1:ce(92),2:ce(93)},italic:ce(94),image:ce(95),indent:{"+1":ce(96),"-1":ce(97)},link:ce(98),list:{ordered:ce(99),bullet:ce(100),check:ce(101)},script:{sub:ce(102),super:ce(103)},strike:ce(104),underline:ce(105),video:ce(106)}},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.getLastChangeIndex=oe.default=void 0;var ue=function(){function Ye(ze,Xe){for(var Je=0;Je<Xe.length;Je++){var rt=Xe[Je];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(ze,rt.key,rt)}}return function(ze,Xe,Je){return Xe&&Ye(ze.prototype,Xe),Je&&Ye(ze,Je),ze}}(),Ae=ce(0),pe=Se(Ae),xe=ce(5),me=Se(xe),ge=ce(9),ye=Se(ge);function Se(Ye){return Ye&&Ye.__esModule?Ye:{default:Ye}}function Te(Ye,ze){if(!(Ye instanceof ze))throw new TypeError("Cannot call a class as a function")}function Ne(Ye,ze){if(!Ye)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ze&&(typeof ze=="object"||typeof ze=="function")?ze:Ye}function $e(Ye,ze){if(typeof ze!="function"&&ze!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ze);Ye.prototype=Object.create(ze&&ze.prototype,{constructor:{value:Ye,enumerable:!1,writable:!0,configurable:!0}}),ze&&(Object.setPrototypeOf?Object.setPrototypeOf(Ye,ze):Ye.__proto__=ze)}var ke=function(Ye){$e(ze,Ye);function ze(Xe,Je){Te(this,ze);var rt=Ne(this,(ze.__proto__||Object.getPrototypeOf(ze)).call(this,Xe,Je));return rt.lastRecorded=0,rt.ignoreChange=!1,rt.clear(),rt.quill.on(me.default.events.EDITOR_CHANGE,function(Ze,et,nt,Ge){Ze!==me.default.events.TEXT_CHANGE||rt.ignoreChange||(!rt.options.userOnly||Ge===me.default.sources.USER?rt.record(et,nt):rt.transform(et))}),rt.quill.keyboard.addBinding({key:"Z",shortKey:!0},rt.undo.bind(rt)),rt.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},rt.redo.bind(rt)),/Win/i.test(navigator.platform)&&rt.quill.keyboard.addBinding({key:"Y",shortKey:!0},rt.redo.bind(rt)),rt}return ue(ze,[{key:"change",value:function(Je,rt){if(this.stack[Je].length!==0){var Ze=this.stack[Je].pop();this.stack[rt].push(Ze),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(Ze[Je],me.default.sources.USER),this.ignoreChange=!1;var et=Ke(Ze[Je]);this.quill.setSelection(et)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(Je,rt){if(Je.ops.length!==0){this.stack.redo=[];var Ze=this.quill.getContents().diff(rt),et=Date.now();if(this.lastRecorded+this.options.delay>et&&this.stack.undo.length>0){var nt=this.stack.undo.pop();Ze=Ze.compose(nt.undo),Je=nt.redo.compose(Je)}else this.lastRecorded=et;this.stack.undo.push({redo:Je,undo:Ze}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(Je){this.stack.undo.forEach(function(rt){rt.undo=Je.transform(rt.undo,!0),rt.redo=Je.transform(rt.redo,!0)}),this.stack.redo.forEach(function(rt){rt.undo=Je.transform(rt.undo,!0),rt.redo=Je.transform(rt.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),ze}(ye.default);ke.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function je(Ye){var ze=Ye.ops[Ye.ops.length-1];return ze==null?!1:ze.insert!=null?typeof ze.insert=="string"&&ze.insert.endsWith(`
`):ze.attributes!=null?Object.keys(ze.attributes).some(function(Xe){return pe.default.query(Xe,pe.default.Scope.BLOCK)!=null}):!1}function Ke(Ye){var ze=Ye.reduce(function(Je,rt){return Je+=rt.delete||0,Je},0),Xe=Ye.length()-ze;return je(Ye)&&(Xe-=1),Xe}oe.default=ke,oe.getLastChangeIndex=Ke},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.BaseTooltip=void 0;var ue=function(){function tt(it,at){for(var ot=0;ot<at.length;ot++){var lt=at[ot];lt.enumerable=lt.enumerable||!1,lt.configurable=!0,"value"in lt&&(lt.writable=!0),Object.defineProperty(it,lt.key,lt)}}return function(it,at,ot){return at&&tt(it.prototype,at),ot&&tt(it,ot),it}}(),Ae=function tt(it,at,ot){it===null&&(it=Function.prototype);var lt=Object.getOwnPropertyDescriptor(it,at);if(lt===void 0){var st=Object.getPrototypeOf(it);return st===null?void 0:tt(st,at,ot)}else{if("value"in lt)return lt.value;var ut=lt.get;return ut===void 0?void 0:ut.call(ot)}},pe=ce(3),xe=et(pe),me=ce(2),ge=et(me),ye=ce(8),Se=et(ye),Te=ce(23),Ne=et(Te),$e=ce(34),ke=et($e),je=ce(59),Ke=et(je),Ye=ce(60),ze=et(Ye),Xe=ce(28),Je=et(Xe),rt=ce(61),Ze=et(rt);function et(tt){return tt&&tt.__esModule?tt:{default:tt}}function nt(tt,it){if(!(tt instanceof it))throw new TypeError("Cannot call a class as a function")}function Ge(tt,it){if(!tt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return it&&(typeof it=="object"||typeof it=="function")?it:tt}function ve(tt,it){if(typeof it!="function"&&it!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof it);tt.prototype=Object.create(it&&it.prototype,{constructor:{value:tt,enumerable:!1,writable:!0,configurable:!0}}),it&&(Object.setPrototypeOf?Object.setPrototypeOf(tt,it):tt.__proto__=it)}var Be=[!1,"center","right","justify"],Re=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Ie=[!1,"serif","monospace"],Fe=["1","2","3",!1],qe=["small",!1,"large","huge"],We=function(tt){ve(it,tt);function it(at,ot){nt(this,it);var lt=Ge(this,(it.__proto__||Object.getPrototypeOf(it)).call(this,at,ot)),st=function ut(ft){if(!document.body.contains(at.root))return document.body.removeEventListener("click",ut);lt.tooltip!=null&&!lt.tooltip.root.contains(ft.target)&&document.activeElement!==lt.tooltip.textbox&&!lt.quill.hasFocus()&&lt.tooltip.hide(),lt.pickers!=null&&lt.pickers.forEach(function(dt){dt.container.contains(ft.target)||dt.close()})};return at.emitter.listenDOM("click",document.body,st),lt}return ue(it,[{key:"addModule",value:function(ot){var lt=Ae(it.prototype.__proto__||Object.getPrototypeOf(it.prototype),"addModule",this).call(this,ot);return ot==="toolbar"&&this.extendToolbar(lt),lt}},{key:"buildButtons",value:function(ot,lt){ot.forEach(function(st){var ut=st.getAttribute("class")||"";ut.split(/\s+/).forEach(function(ft){if(ft.startsWith("ql-")&&(ft=ft.slice(3),lt[ft]!=null))if(ft==="direction")st.innerHTML=lt[ft][""]+lt[ft].rtl;else if(typeof lt[ft]=="string")st.innerHTML=lt[ft];else{var dt=st.value||"";dt!=null&&lt[ft][dt]&&(st.innerHTML=lt[ft][dt])}})})}},{key:"buildPickers",value:function(ot,lt){var st=this;this.pickers=ot.map(function(ft){if(ft.classList.contains("ql-align"))return ft.querySelector("option")==null&&Qe(ft,Be),new ze.default(ft,lt.align);if(ft.classList.contains("ql-background")||ft.classList.contains("ql-color")){var dt=ft.classList.contains("ql-background")?"background":"color";return ft.querySelector("option")==null&&Qe(ft,Re,dt==="background"?"#ffffff":"#000000"),new Ke.default(ft,lt[dt])}else return ft.querySelector("option")==null&&(ft.classList.contains("ql-font")?Qe(ft,Ie):ft.classList.contains("ql-header")?Qe(ft,Fe):ft.classList.contains("ql-size")&&Qe(ft,qe)),new Je.default(ft)});var ut=function(){st.pickers.forEach(function(dt){dt.update()})};this.quill.on(Se.default.events.EDITOR_CHANGE,ut)}}]),it}(ke.default);We.DEFAULTS=(0,xe.default)(!0,{},ke.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var it=this,at=this.container.querySelector("input.ql-image[type=file]");at==null&&(at=document.createElement("input"),at.setAttribute("type","file"),at.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),at.classList.add("ql-image"),at.addEventListener("change",function(){if(at.files!=null&&at.files[0]!=null){var ot=new FileReader;ot.onload=function(lt){var st=it.quill.getSelection(!0);it.quill.updateContents(new ge.default().retain(st.index).delete(st.length).insert({image:lt.target.result}),Se.default.sources.USER),it.quill.setSelection(st.index+1,Se.default.sources.SILENT),at.value=""},ot.readAsDataURL(at.files[0])}}),this.container.appendChild(at)),at.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Ue=function(tt){ve(it,tt);function it(at,ot){nt(this,it);var lt=Ge(this,(it.__proto__||Object.getPrototypeOf(it)).call(this,at,ot));return lt.textbox=lt.root.querySelector('input[type="text"]'),lt.listen(),lt}return ue(it,[{key:"listen",value:function(){var ot=this;this.textbox.addEventListener("keydown",function(lt){Ne.default.match(lt,"enter")?(ot.save(),lt.preventDefault()):Ne.default.match(lt,"escape")&&(ot.cancel(),lt.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),lt!=null?this.textbox.value=lt:ot!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+ot)||""),this.root.setAttribute("data-mode",ot)}},{key:"restoreFocus",value:function(){var ot=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=ot}},{key:"save",value:function(){var ot=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var lt=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",ot,Se.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",ot,Se.default.sources.USER)),this.quill.root.scrollTop=lt;break}case"video":ot=_e(ot);case"formula":{if(!ot)break;var st=this.quill.getSelection(!0);if(st!=null){var ut=st.index+st.length;this.quill.insertEmbed(ut,this.root.getAttribute("data-mode"),ot,Se.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ut+1," ",Se.default.sources.USER),this.quill.setSelection(ut+2,Se.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),it}(Ze.default);function _e(tt){var it=tt.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||tt.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return it?(it[1]||"https")+"://www.youtube.com/embed/"+it[2]+"?showinfo=0":(it=tt.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(it[1]||"https")+"://player.vimeo.com/video/"+it[2]+"/":tt}function Qe(tt,it){var at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;it.forEach(function(ot){var lt=document.createElement("option");ot===at?lt.setAttribute("selected","selected"):lt.setAttribute("value",ot),tt.appendChild(lt)})}oe.BaseTooltip=Ue,oe.default=We},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function Ae(){this.head=this.tail=null,this.length=0}return Ae.prototype.append=function(){for(var pe=[],xe=0;xe<arguments.length;xe++)pe[xe]=arguments[xe];this.insertBefore(pe[0],null),pe.length>1&&this.append.apply(this,pe.slice(1))},Ae.prototype.contains=function(pe){for(var xe,me=this.iterator();xe=me();)if(xe===pe)return!0;return!1},Ae.prototype.insertBefore=function(pe,xe){pe&&(pe.next=xe,xe!=null?(pe.prev=xe.prev,xe.prev!=null&&(xe.prev.next=pe),xe.prev=pe,xe===this.head&&(this.head=pe)):this.tail!=null?(this.tail.next=pe,pe.prev=this.tail,this.tail=pe):(pe.prev=null,this.head=this.tail=pe),this.length+=1)},Ae.prototype.offset=function(pe){for(var xe=0,me=this.head;me!=null;){if(me===pe)return xe;xe+=me.length(),me=me.next}return-1},Ae.prototype.remove=function(pe){this.contains(pe)&&(pe.prev!=null&&(pe.prev.next=pe.next),pe.next!=null&&(pe.next.prev=pe.prev),pe===this.head&&(this.head=pe.next),pe===this.tail&&(this.tail=pe.prev),this.length-=1)},Ae.prototype.iterator=function(pe){return pe===void 0&&(pe=this.head),function(){var xe=pe;return pe!=null&&(pe=pe.next),xe}},Ae.prototype.find=function(pe,xe){xe===void 0&&(xe=!1);for(var me,ge=this.iterator();me=ge();){var ye=me.length();if(pe<ye||xe&&pe===ye&&(me.next==null||me.next.length()!==0))return[me,pe];pe-=ye}return[null,0]},Ae.prototype.forEach=function(pe){for(var xe,me=this.iterator();xe=me();)pe(xe)},Ae.prototype.forEachAt=function(pe,xe,me){if(!(xe<=0))for(var ge=this.find(pe),ye=ge[0],Se=ge[1],Te,Ne=pe-Se,$e=this.iterator(ye);(Te=$e())&&Ne<pe+xe;){var ke=Te.length();pe>Ne?me(Te,pe-Ne,Math.min(xe,Ne+ke-pe)):me(Te,0,Math.min(ke,pe+xe-Ne)),Ne+=ke}},Ae.prototype.map=function(pe){return this.reduce(function(xe,me){return xe.push(pe(me)),xe},[])},Ae.prototype.reduce=function(pe,xe){for(var me,ge=this.iterator();me=ge();)xe=pe(xe,me);return xe},Ae}();oe.default=ue},function(ne,oe,ce){var ue=this&&this.__extends||function(){var ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Se,Te){Se.__proto__=Te}||function(Se,Te){for(var Ne in Te)Te.hasOwnProperty(Ne)&&(Se[Ne]=Te[Ne])};return function(Se,Te){ye(Se,Te);function Ne(){this.constructor=Se}Se.prototype=Te===null?Object.create(Te):(Ne.prototype=Te.prototype,new Ne)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(17),pe=ce(1),xe={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},me=100,ge=function(ye){ue(Se,ye);function Se(Te){var Ne=ye.call(this,Te)||this;return Ne.scroll=Ne,Ne.observer=new MutationObserver(function($e){Ne.update($e)}),Ne.observer.observe(Ne.domNode,xe),Ne.attach(),Ne}return Se.prototype.detach=function(){ye.prototype.detach.call(this),this.observer.disconnect()},Se.prototype.deleteAt=function(Te,Ne){this.update(),Te===0&&Ne===this.length()?this.children.forEach(function($e){$e.remove()}):ye.prototype.deleteAt.call(this,Te,Ne)},Se.prototype.formatAt=function(Te,Ne,$e,ke){this.update(),ye.prototype.formatAt.call(this,Te,Ne,$e,ke)},Se.prototype.insertAt=function(Te,Ne,$e){this.update(),ye.prototype.insertAt.call(this,Te,Ne,$e)},Se.prototype.optimize=function(Te,Ne){var $e=this;Te===void 0&&(Te=[]),Ne===void 0&&(Ne={}),ye.prototype.optimize.call(this,Ne);for(var ke=[].slice.call(this.observer.takeRecords());ke.length>0;)Te.push(ke.pop());for(var je=function(Xe,Je){Je===void 0&&(Je=!0),!(Xe==null||Xe===$e)&&Xe.domNode.parentNode!=null&&(Xe.domNode[pe.DATA_KEY].mutations==null&&(Xe.domNode[pe.DATA_KEY].mutations=[]),Je&&je(Xe.parent))},Ke=function(Xe){Xe.domNode[pe.DATA_KEY]==null||Xe.domNode[pe.DATA_KEY].mutations==null||(Xe instanceof Ae.default&&Xe.children.forEach(Ke),Xe.optimize(Ne))},Ye=Te,ze=0;Ye.length>0;ze+=1){if(ze>=me)throw new Error("[Parchment] Maximum optimize iterations reached");for(Ye.forEach(function(Xe){var Je=pe.find(Xe.target,!0);Je!=null&&(Je.domNode===Xe.target&&(Xe.type==="childList"?(je(pe.find(Xe.previousSibling,!1)),[].forEach.call(Xe.addedNodes,function(rt){var Ze=pe.find(rt,!1);je(Ze,!1),Ze instanceof Ae.default&&Ze.children.forEach(function(et){je(et,!1)})})):Xe.type==="attributes"&&je(Je.prev)),je(Je))}),this.children.forEach(Ke),Ye=[].slice.call(this.observer.takeRecords()),ke=Ye.slice();ke.length>0;)Te.push(ke.pop())}},Se.prototype.update=function(Te,Ne){var $e=this;Ne===void 0&&(Ne={}),Te=Te||this.observer.takeRecords(),Te.map(function(ke){var je=pe.find(ke.target,!0);return je==null?null:je.domNode[pe.DATA_KEY].mutations==null?(je.domNode[pe.DATA_KEY].mutations=[ke],je):(je.domNode[pe.DATA_KEY].mutations.push(ke),null)}).forEach(function(ke){ke==null||ke===$e||ke.domNode[pe.DATA_KEY]==null||ke.update(ke.domNode[pe.DATA_KEY].mutations||[],Ne)}),this.domNode[pe.DATA_KEY].mutations!=null&&ye.prototype.update.call(this,this.domNode[pe.DATA_KEY].mutations,Ne),this.optimize(Te,Ne)},Se.blotName="scroll",Se.defaultChild="block",Se.scope=pe.Scope.BLOCK_BLOT,Se.tagName="DIV",Se}(Ae.default);oe.default=ge},function(ne,oe,ce){var ue=this&&this.__extends||function(){var ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ye,Se){ye.__proto__=Se}||function(ye,Se){for(var Te in Se)Se.hasOwnProperty(Te)&&(ye[Te]=Se[Te])};return function(ye,Se){ge(ye,Se);function Te(){this.constructor=ye}ye.prototype=Se===null?Object.create(Se):(Te.prototype=Se.prototype,new Te)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(18),pe=ce(1);function xe(ge,ye){if(Object.keys(ge).length!==Object.keys(ye).length)return!1;for(var Se in ge)if(ge[Se]!==ye[Se])return!1;return!0}var me=function(ge){ue(ye,ge);function ye(){return ge!==null&&ge.apply(this,arguments)||this}return ye.formats=function(Se){if(Se.tagName!==ye.tagName)return ge.formats.call(this,Se)},ye.prototype.format=function(Se,Te){var Ne=this;Se===this.statics.blotName&&!Te?(this.children.forEach(function($e){$e instanceof Ae.default||($e=$e.wrap(ye.blotName,!0)),Ne.attributes.copy($e)}),this.unwrap()):ge.prototype.format.call(this,Se,Te)},ye.prototype.formatAt=function(Se,Te,Ne,$e){if(this.formats()[Ne]!=null||pe.query(Ne,pe.Scope.ATTRIBUTE)){var ke=this.isolate(Se,Te);ke.format(Ne,$e)}else ge.prototype.formatAt.call(this,Se,Te,Ne,$e)},ye.prototype.optimize=function(Se){ge.prototype.optimize.call(this,Se);var Te=this.formats();if(Object.keys(Te).length===0)return this.unwrap();var Ne=this.next;Ne instanceof ye&&Ne.prev===this&&xe(Te,Ne.formats())&&(Ne.moveChildren(this),Ne.remove())},ye.blotName="inline",ye.scope=pe.Scope.INLINE_BLOT,ye.tagName="SPAN",ye}(Ae.default);oe.default=me},function(ne,oe,ce){var ue=this&&this.__extends||function(){var me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,ye){ge.__proto__=ye}||function(ge,ye){for(var Se in ye)ye.hasOwnProperty(Se)&&(ge[Se]=ye[Se])};return function(ge,ye){me(ge,ye);function Se(){this.constructor=ge}ge.prototype=ye===null?Object.create(ye):(Se.prototype=ye.prototype,new Se)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(18),pe=ce(1),xe=function(me){ue(ge,me);function ge(){return me!==null&&me.apply(this,arguments)||this}return ge.formats=function(ye){var Se=pe.query(ge.blotName).tagName;if(ye.tagName!==Se)return me.formats.call(this,ye)},ge.prototype.format=function(ye,Se){pe.query(ye,pe.Scope.BLOCK)!=null&&(ye===this.statics.blotName&&!Se?this.replaceWith(ge.blotName):me.prototype.format.call(this,ye,Se))},ge.prototype.formatAt=function(ye,Se,Te,Ne){pe.query(Te,pe.Scope.BLOCK)!=null?this.format(Te,Ne):me.prototype.formatAt.call(this,ye,Se,Te,Ne)},ge.prototype.insertAt=function(ye,Se,Te){if(Te==null||pe.query(Se,pe.Scope.INLINE)!=null)me.prototype.insertAt.call(this,ye,Se,Te);else{var Ne=this.split(ye),$e=pe.create(Se,Te);Ne.parent.insertBefore($e,Ne)}},ge.prototype.update=function(ye,Se){navigator.userAgent.match(/Trident/)?this.build():me.prototype.update.call(this,ye,Se)},ge.blotName="block",ge.scope=pe.Scope.BLOCK_BLOT,ge.tagName="P",ge}(Ae.default);oe.default=xe},function(ne,oe,ce){var ue=this&&this.__extends||function(){var xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(me,ge){me.__proto__=ge}||function(me,ge){for(var ye in ge)ge.hasOwnProperty(ye)&&(me[ye]=ge[ye])};return function(me,ge){xe(me,ge);function ye(){this.constructor=me}me.prototype=ge===null?Object.create(ge):(ye.prototype=ge.prototype,new ye)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(19),pe=function(xe){ue(me,xe);function me(){return xe!==null&&xe.apply(this,arguments)||this}return me.formats=function(ge){},me.prototype.format=function(ge,ye){xe.prototype.formatAt.call(this,0,this.length(),ge,ye)},me.prototype.formatAt=function(ge,ye,Se,Te){ge===0&&ye===this.length()?this.format(Se,Te):xe.prototype.formatAt.call(this,ge,ye,Se,Te)},me.prototype.formats=function(){return this.statics.formats(this.domNode)},me}(Ae.default);oe.default=pe},function(ne,oe,ce){var ue=this&&this.__extends||function(){var me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,ye){ge.__proto__=ye}||function(ge,ye){for(var Se in ye)ye.hasOwnProperty(Se)&&(ge[Se]=ye[Se])};return function(ge,ye){me(ge,ye);function Se(){this.constructor=ge}ge.prototype=ye===null?Object.create(ye):(Se.prototype=ye.prototype,new Se)}}();Object.defineProperty(oe,"__esModule",{value:!0});var Ae=ce(19),pe=ce(1),xe=function(me){ue(ge,me);function ge(ye){var Se=me.call(this,ye)||this;return Se.text=Se.statics.value(Se.domNode),Se}return ge.create=function(ye){return document.createTextNode(ye)},ge.value=function(ye){var Se=ye.data;return Se.normalize&&(Se=Se.normalize()),Se},ge.prototype.deleteAt=function(ye,Se){this.domNode.data=this.text=this.text.slice(0,ye)+this.text.slice(ye+Se)},ge.prototype.index=function(ye,Se){return this.domNode===ye?Se:-1},ge.prototype.insertAt=function(ye,Se,Te){Te==null?(this.text=this.text.slice(0,ye)+Se+this.text.slice(ye),this.domNode.data=this.text):me.prototype.insertAt.call(this,ye,Se,Te)},ge.prototype.length=function(){return this.text.length},ge.prototype.optimize=function(ye){me.prototype.optimize.call(this,ye),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof ge&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},ge.prototype.position=function(ye,Se){return[this.domNode,ye]},ge.prototype.split=function(ye,Se){if(Se===void 0&&(Se=!1),!Se){if(ye===0)return this;if(ye===this.length())return this.next}var Te=pe.create(this.domNode.splitText(ye));return this.parent.insertBefore(Te,this.next),this.text=this.statics.value(this.domNode),Te},ge.prototype.update=function(ye,Se){var Te=this;ye.some(function(Ne){return Ne.type==="characterData"&&Ne.target===Te.domNode})&&(this.text=this.statics.value(this.domNode))},ge.prototype.value=function(){return this.text},ge.blotName="text",ge.scope=pe.Scope.INLINE_BLOT,ge}(Ae.default);oe.default=xe},function(ne,oe,ce){var ue=document.createElement("div");if(ue.classList.toggle("test-class",!1),ue.classList.contains("test-class")){var Ae=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(pe,xe){return arguments.length>1&&!this.contains(pe)==!xe?xe:Ae.call(this,pe)}}String.prototype.startsWith||(String.prototype.startsWith=function(pe,xe){return xe=xe||0,this.substr(xe,pe.length)===pe}),String.prototype.endsWith||(String.prototype.endsWith=function(pe,xe){var me=this.toString();(typeof xe!="number"||!isFinite(xe)||Math.floor(xe)!==xe||xe>me.length)&&(xe=me.length),xe-=pe.length;var ge=me.indexOf(pe,xe);return ge!==-1&&ge===xe}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(xe){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof xe!="function")throw new TypeError("predicate must be a function");for(var me=Object(this),ge=me.length>>>0,ye=arguments[1],Se,Te=0;Te<ge;Te++)if(Se=me[Te],xe.call(ye,Se,Te,me))return Se}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(ne,oe){var ce=-1,ue=1,Ae=0;function pe(ze,Xe,Je){if(ze==Xe)return ze?[[Ae,ze]]:[];(Je<0||ze.length<Je)&&(Je=null);var rt=ye(ze,Xe),Ze=ze.substring(0,rt);ze=ze.substring(rt),Xe=Xe.substring(rt),rt=Se(ze,Xe);var et=ze.substring(ze.length-rt);ze=ze.substring(0,ze.length-rt),Xe=Xe.substring(0,Xe.length-rt);var nt=xe(ze,Xe);return Ze&&nt.unshift([Ae,Ze]),et&&nt.push([Ae,et]),Ne(nt),Je!=null&&(nt=je(nt,Je)),nt=Ke(nt),nt}function xe(ze,Xe){var Je;if(!ze)return[[ue,Xe]];if(!Xe)return[[ce,ze]];var rt=ze.length>Xe.length?ze:Xe,Ze=ze.length>Xe.length?Xe:ze,et=rt.indexOf(Ze);if(et!=-1)return Je=[[ue,rt.substring(0,et)],[Ae,Ze],[ue,rt.substring(et+Ze.length)]],ze.length>Xe.length&&(Je[0][0]=Je[2][0]=ce),Je;if(Ze.length==1)return[[ce,ze],[ue,Xe]];var nt=Te(ze,Xe);if(nt){var Ge=nt[0],ve=nt[1],Be=nt[2],Re=nt[3],Ie=nt[4],Fe=pe(Ge,Be),qe=pe(ve,Re);return Fe.concat([[Ae,Ie]],qe)}return me(ze,Xe)}function me(ze,Xe){for(var Je=ze.length,rt=Xe.length,Ze=Math.ceil((Je+rt)/2),et=Ze,nt=2*Ze,Ge=new Array(nt),ve=new Array(nt),Be=0;Be<nt;Be++)Ge[Be]=-1,ve[Be]=-1;Ge[et+1]=0,ve[et+1]=0;for(var Re=Je-rt,Ie=Re%2!=0,Fe=0,qe=0,We=0,Ue=0,_e=0;_e<Ze;_e++){for(var Qe=-_e+Fe;Qe<=_e-qe;Qe+=2){var tt=et+Qe,it;Qe==-_e||Qe!=_e&&Ge[tt-1]<Ge[tt+1]?it=Ge[tt+1]:it=Ge[tt-1]+1;for(var at=it-Qe;it<Je&&at<rt&&ze.charAt(it)==Xe.charAt(at);)it++,at++;if(Ge[tt]=it,it>Je)qe+=2;else if(at>rt)Fe+=2;else if(Ie){var ot=et+Re-Qe;if(ot>=0&&ot<nt&&ve[ot]!=-1){var lt=Je-ve[ot];if(it>=lt)return ge(ze,Xe,it,at)}}}for(var st=-_e+We;st<=_e-Ue;st+=2){var ot=et+st,lt;st==-_e||st!=_e&&ve[ot-1]<ve[ot+1]?lt=ve[ot+1]:lt=ve[ot-1]+1;for(var ut=lt-st;lt<Je&&ut<rt&&ze.charAt(Je-lt-1)==Xe.charAt(rt-ut-1);)lt++,ut++;if(ve[ot]=lt,lt>Je)Ue+=2;else if(ut>rt)We+=2;else if(!Ie){var tt=et+Re-st;if(tt>=0&&tt<nt&&Ge[tt]!=-1){var it=Ge[tt],at=et+it-tt;if(lt=Je-lt,it>=lt)return ge(ze,Xe,it,at)}}}}return[[ce,ze],[ue,Xe]]}function ge(ze,Xe,Je,rt){var Ze=ze.substring(0,Je),et=Xe.substring(0,rt),nt=ze.substring(Je),Ge=Xe.substring(rt),ve=pe(Ze,et),Be=pe(nt,Ge);return ve.concat(Be)}function ye(ze,Xe){if(!ze||!Xe||ze.charAt(0)!=Xe.charAt(0))return 0;for(var Je=0,rt=Math.min(ze.length,Xe.length),Ze=rt,et=0;Je<Ze;)ze.substring(et,Ze)==Xe.substring(et,Ze)?(Je=Ze,et=Je):rt=Ze,Ze=Math.floor((rt-Je)/2+Je);return Ze}function Se(ze,Xe){if(!ze||!Xe||ze.charAt(ze.length-1)!=Xe.charAt(Xe.length-1))return 0;for(var Je=0,rt=Math.min(ze.length,Xe.length),Ze=rt,et=0;Je<Ze;)ze.substring(ze.length-Ze,ze.length-et)==Xe.substring(Xe.length-Ze,Xe.length-et)?(Je=Ze,et=Je):rt=Ze,Ze=Math.floor((rt-Je)/2+Je);return Ze}function Te(ze,Xe){var Je=ze.length>Xe.length?ze:Xe,rt=ze.length>Xe.length?Xe:ze;if(Je.length<4||rt.length*2<Je.length)return null;function Ze(qe,We,Ue){for(var _e=qe.substring(Ue,Ue+Math.floor(qe.length/4)),Qe=-1,tt="",it,at,ot,lt;(Qe=We.indexOf(_e,Qe+1))!=-1;){var st=ye(qe.substring(Ue),We.substring(Qe)),ut=Se(qe.substring(0,Ue),We.substring(0,Qe));tt.length<ut+st&&(tt=We.substring(Qe-ut,Qe)+We.substring(Qe,Qe+st),it=qe.substring(0,Ue-ut),at=qe.substring(Ue+st),ot=We.substring(0,Qe-ut),lt=We.substring(Qe+st))}return tt.length*2>=qe.length?[it,at,ot,lt,tt]:null}var et=Ze(Je,rt,Math.ceil(Je.length/4)),nt=Ze(Je,rt,Math.ceil(Je.length/2)),Ge;if(!et&&!nt)return null;nt?et?Ge=et[4].length>nt[4].length?et:nt:Ge=nt:Ge=et;var ve,Be,Re,Ie;ze.length>Xe.length?(ve=Ge[0],Be=Ge[1],Re=Ge[2],Ie=Ge[3]):(Re=Ge[0],Ie=Ge[1],ve=Ge[2],Be=Ge[3]);var Fe=Ge[4];return[ve,Be,Re,Ie,Fe]}function Ne(ze){ze.push([Ae,""]);for(var Xe=0,Je=0,rt=0,Ze="",et="",nt;Xe<ze.length;)switch(ze[Xe][0]){case ue:rt++,et+=ze[Xe][1],Xe++;break;case ce:Je++,Ze+=ze[Xe][1],Xe++;break;case Ae:Je+rt>1?(Je!==0&&rt!==0&&(nt=ye(et,Ze),nt!==0&&(Xe-Je-rt>0&&ze[Xe-Je-rt-1][0]==Ae?ze[Xe-Je-rt-1][1]+=et.substring(0,nt):(ze.splice(0,0,[Ae,et.substring(0,nt)]),Xe++),et=et.substring(nt),Ze=Ze.substring(nt)),nt=Se(et,Ze),nt!==0&&(ze[Xe][1]=et.substring(et.length-nt)+ze[Xe][1],et=et.substring(0,et.length-nt),Ze=Ze.substring(0,Ze.length-nt))),Je===0?ze.splice(Xe-rt,Je+rt,[ue,et]):rt===0?ze.splice(Xe-Je,Je+rt,[ce,Ze]):ze.splice(Xe-Je-rt,Je+rt,[ce,Ze],[ue,et]),Xe=Xe-Je-rt+(Je?1:0)+(rt?1:0)+1):Xe!==0&&ze[Xe-1][0]==Ae?(ze[Xe-1][1]+=ze[Xe][1],ze.splice(Xe,1)):Xe++,rt=0,Je=0,Ze="",et="";break}ze[ze.length-1][1]===""&&ze.pop();var Ge=!1;for(Xe=1;Xe<ze.length-1;)ze[Xe-1][0]==Ae&&ze[Xe+1][0]==Ae&&(ze[Xe][1].substring(ze[Xe][1].length-ze[Xe-1][1].length)==ze[Xe-1][1]?(ze[Xe][1]=ze[Xe-1][1]+ze[Xe][1].substring(0,ze[Xe][1].length-ze[Xe-1][1].length),ze[Xe+1][1]=ze[Xe-1][1]+ze[Xe+1][1],ze.splice(Xe-1,1),Ge=!0):ze[Xe][1].substring(0,ze[Xe+1][1].length)==ze[Xe+1][1]&&(ze[Xe-1][1]+=ze[Xe+1][1],ze[Xe][1]=ze[Xe][1].substring(ze[Xe+1][1].length)+ze[Xe+1][1],ze.splice(Xe+1,1),Ge=!0)),Xe++;Ge&&Ne(ze)}var $e=pe;$e.INSERT=ue,$e.DELETE=ce,$e.EQUAL=Ae,ne.exports=$e;function ke(ze,Xe){if(Xe===0)return[Ae,ze];for(var Je=0,rt=0;rt<ze.length;rt++){var Ze=ze[rt];if(Ze[0]===ce||Ze[0]===Ae){var et=Je+Ze[1].length;if(Xe===et)return[rt+1,ze];if(Xe<et){ze=ze.slice();var nt=Xe-Je,Ge=[Ze[0],Ze[1].slice(0,nt)],ve=[Ze[0],Ze[1].slice(nt)];return ze.splice(rt,1,Ge,ve),[rt+1,ze]}else Je=et}}throw new Error("cursor_pos is out of bounds!")}function je(ze,Xe){var Je=ke(ze,Xe),rt=Je[1],Ze=Je[0],et=rt[Ze],nt=rt[Ze+1];if(et==null)return ze;if(et[0]!==Ae)return ze;if(nt!=null&&et[1]+nt[1]===nt[1]+et[1])return rt.splice(Ze,2,nt,et),Ye(rt,Ze,2);if(nt!=null&&nt[1].indexOf(et[1])===0){rt.splice(Ze,2,[nt[0],et[1]],[0,et[1]]);var Ge=nt[1].slice(et[1].length);return Ge.length>0&&rt.splice(Ze+2,0,[nt[0],Ge]),Ye(rt,Ze,3)}else return ze}function Ke(ze){for(var Xe=!1,Je=function(nt){return nt.charCodeAt(0)>=56320&&nt.charCodeAt(0)<=57343},rt=function(nt){return nt.charCodeAt(nt.length-1)>=55296&&nt.charCodeAt(nt.length-1)<=56319},Ze=2;Ze<ze.length;Ze+=1)ze[Ze-2][0]===Ae&&rt(ze[Ze-2][1])&&ze[Ze-1][0]===ce&&Je(ze[Ze-1][1])&&ze[Ze][0]===ue&&Je(ze[Ze][1])&&(Xe=!0,ze[Ze-1][1]=ze[Ze-2][1].slice(-1)+ze[Ze-1][1],ze[Ze][1]=ze[Ze-2][1].slice(-1)+ze[Ze][1],ze[Ze-2][1]=ze[Ze-2][1].slice(0,-1));if(!Xe)return ze;for(var et=[],Ze=0;Ze<ze.length;Ze+=1)ze[Ze][1].length>0&&et.push(ze[Ze]);return et}function Ye(ze,Xe,Je){for(var rt=Xe+Je-1;rt>=0&&rt>=Xe-1;rt--)if(rt+1<ze.length){var Ze=ze[rt],et=ze[rt+1];Ze[0]===et[1]&&ze.splice(rt,2,[Ze[0],Ze[1]+et[1]])}return ze}},function(ne,oe){oe=ne.exports=typeof Object.keys=="function"?Object.keys:ce,oe.shim=ce;function ce(ue){var Ae=[];for(var pe in ue)Ae.push(pe);return Ae}},function(ne,oe){var ce=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";oe=ne.exports=ce?ue:Ae,oe.supported=ue;function ue(pe){return Object.prototype.toString.call(pe)=="[object Arguments]"}oe.unsupported=Ae;function Ae(pe){return pe&&typeof pe=="object"&&typeof pe.length=="number"&&Object.prototype.hasOwnProperty.call(pe,"callee")&&!Object.prototype.propertyIsEnumerable.call(pe,"callee")||!1}},function(ne,oe){var ce=Object.prototype.hasOwnProperty,ue="~";function Ae(){}Object.create&&(Ae.prototype=Object.create(null),new Ae().__proto__||(ue=!1));function pe(me,ge,ye){this.fn=me,this.context=ge,this.once=ye||!1}function xe(){this._events=new Ae,this._eventsCount=0}xe.prototype.eventNames=function(){var ge=[],ye,Se;if(this._eventsCount===0)return ge;for(Se in ye=this._events)ce.call(ye,Se)&&ge.push(ue?Se.slice(1):Se);return Object.getOwnPropertySymbols?ge.concat(Object.getOwnPropertySymbols(ye)):ge},xe.prototype.listeners=function(ge,ye){var Se=ue?ue+ge:ge,Te=this._events[Se];if(ye)return!!Te;if(!Te)return[];if(Te.fn)return[Te.fn];for(var Ne=0,$e=Te.length,ke=new Array($e);Ne<$e;Ne++)ke[Ne]=Te[Ne].fn;return ke},xe.prototype.emit=function(ge,ye,Se,Te,Ne,$e){var ke=ue?ue+ge:ge;if(!this._events[ke])return!1;var je=this._events[ke],Ke=arguments.length,Ye,ze;if(je.fn){switch(je.once&&this.removeListener(ge,je.fn,void 0,!0),Ke){case 1:return je.fn.call(je.context),!0;case 2:return je.fn.call(je.context,ye),!0;case 3:return je.fn.call(je.context,ye,Se),!0;case 4:return je.fn.call(je.context,ye,Se,Te),!0;case 5:return je.fn.call(je.context,ye,Se,Te,Ne),!0;case 6:return je.fn.call(je.context,ye,Se,Te,Ne,$e),!0}for(ze=1,Ye=new Array(Ke-1);ze<Ke;ze++)Ye[ze-1]=arguments[ze];je.fn.apply(je.context,Ye)}else{var Xe=je.length,Je;for(ze=0;ze<Xe;ze++)switch(je[ze].once&&this.removeListener(ge,je[ze].fn,void 0,!0),Ke){case 1:je[ze].fn.call(je[ze].context);break;case 2:je[ze].fn.call(je[ze].context,ye);break;case 3:je[ze].fn.call(je[ze].context,ye,Se);break;case 4:je[ze].fn.call(je[ze].context,ye,Se,Te);break;default:if(!Ye)for(Je=1,Ye=new Array(Ke-1);Je<Ke;Je++)Ye[Je-1]=arguments[Je];je[ze].fn.apply(je[ze].context,Ye)}}return!0},xe.prototype.on=function(ge,ye,Se){var Te=new pe(ye,Se||this),Ne=ue?ue+ge:ge;return this._events[Ne]?this._events[Ne].fn?this._events[Ne]=[this._events[Ne],Te]:this._events[Ne].push(Te):(this._events[Ne]=Te,this._eventsCount++),this},xe.prototype.once=function(ge,ye,Se){var Te=new pe(ye,Se||this,!0),Ne=ue?ue+ge:ge;return this._events[Ne]?this._events[Ne].fn?this._events[Ne]=[this._events[Ne],Te]:this._events[Ne].push(Te):(this._events[Ne]=Te,this._eventsCount++),this},xe.prototype.removeListener=function(ge,ye,Se,Te){var Ne=ue?ue+ge:ge;if(!this._events[Ne])return this;if(!ye)return--this._eventsCount===0?this._events=new Ae:delete this._events[Ne],this;var $e=this._events[Ne];if($e.fn)$e.fn===ye&&(!Te||$e.once)&&(!Se||$e.context===Se)&&(--this._eventsCount===0?this._events=new Ae:delete this._events[Ne]);else{for(var ke=0,je=[],Ke=$e.length;ke<Ke;ke++)($e[ke].fn!==ye||Te&&!$e[ke].once||Se&&$e[ke].context!==Se)&&je.push($e[ke]);je.length?this._events[Ne]=je.length===1?je[0]:je:--this._eventsCount===0?this._events=new Ae:delete this._events[Ne]}return this},xe.prototype.removeAllListeners=function(ge){var ye;return ge?(ye=ue?ue+ge:ge,this._events[ye]&&(--this._eventsCount===0?this._events=new Ae:delete this._events[ye])):(this._events=new Ae,this._eventsCount=0),this},xe.prototype.off=xe.prototype.removeListener,xe.prototype.addListener=xe.prototype.on,xe.prototype.setMaxListeners=function(){return this},xe.prefixed=ue,xe.EventEmitter=xe,typeof ne<"u"&&(ne.exports=xe)},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.matchText=oe.matchSpacing=oe.matchNewline=oe.matchBlot=oe.matchAttributor=oe.default=void 0;var ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ht){return typeof ht}:function(ht){return ht&&typeof Symbol=="function"&&ht.constructor===Symbol&&ht!==Symbol.prototype?"symbol":typeof ht},Ae=function(){function ht(gt,Pt){var wt=[],St=!0,Zt=!1,Ct=void 0;try{for(var Rt=gt[Symbol.iterator](),dr;!(St=(dr=Rt.next()).done)&&(wt.push(dr.value),!(Pt&&wt.length===Pt));St=!0);}catch(Dt){Zt=!0,Ct=Dt}finally{try{!St&&Rt.return&&Rt.return()}finally{if(Zt)throw Ct}}return wt}return function(gt,Pt){if(Array.isArray(gt))return gt;if(Symbol.iterator in Object(gt))return ht(gt,Pt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function(){function ht(gt,Pt){for(var wt=0;wt<Pt.length;wt++){var St=Pt[wt];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(gt,St.key,St)}}return function(gt,Pt,wt){return Pt&&ht(gt.prototype,Pt),wt&&ht(gt,wt),gt}}(),xe=ce(3),me=ve(xe),ge=ce(2),ye=ve(ge),Se=ce(0),Te=ve(Se),Ne=ce(5),$e=ve(Ne),ke=ce(10),je=ve(ke),Ke=ce(9),Ye=ve(Ke),ze=ce(36),Xe=ce(37),Je=ce(13),rt=ve(Je),Ze=ce(26),et=ce(38),nt=ce(39),Ge=ce(40);function ve(ht){return ht&&ht.__esModule?ht:{default:ht}}function Be(ht,gt,Pt){return gt in ht?Object.defineProperty(ht,gt,{value:Pt,enumerable:!0,configurable:!0,writable:!0}):ht[gt]=Pt,ht}function Re(ht,gt){if(!(ht instanceof gt))throw new TypeError("Cannot call a class as a function")}function Ie(ht,gt){if(!ht)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return gt&&(typeof gt=="object"||typeof gt=="function")?gt:ht}function Fe(ht,gt){if(typeof gt!="function"&&gt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof gt);ht.prototype=Object.create(gt&&gt.prototype,{constructor:{value:ht,enumerable:!1,writable:!0,configurable:!0}}),gt&&(Object.setPrototypeOf?Object.setPrototypeOf(ht,gt):ht.__proto__=gt)}var qe=(0,je.default)("quill:clipboard"),We="__ql-matcher",Ue=[[Node.TEXT_NODE,It],[Node.TEXT_NODE,bt],["br",Bt],[Node.ELEMENT_NODE,bt],[Node.ELEMENT_NODE,dt],[Node.ELEMENT_NODE,xt],[Node.ELEMENT_NODE,ft],[Node.ELEMENT_NODE,yt],["li",mt],["b",ut.bind(ut,"bold")],["i",ut.bind(ut,"italic")],["style",pt]],_e=[ze.AlignAttribute,et.DirectionAttribute].reduce(function(ht,gt){return ht[gt.keyName]=gt,ht},{}),Qe=[ze.AlignStyle,Xe.BackgroundStyle,Ze.ColorStyle,et.DirectionStyle,nt.FontStyle,Ge.SizeStyle].reduce(function(ht,gt){return ht[gt.keyName]=gt,ht},{}),tt=function(ht){Fe(gt,ht);function gt(Pt,wt){Re(this,gt);var St=Ie(this,(gt.__proto__||Object.getPrototypeOf(gt)).call(this,Pt,wt));return St.quill.root.addEventListener("paste",St.onPaste.bind(St)),St.container=St.quill.addContainer("ql-clipboard"),St.container.setAttribute("contenteditable",!0),St.container.setAttribute("tabindex",-1),St.matchers=[],Ue.concat(St.options.matchers).forEach(function(Zt){var Ct=Ae(Zt,2),Rt=Ct[0],dr=Ct[1];!wt.matchVisual&&dr===xt||St.addMatcher(Rt,dr)}),St}return pe(gt,[{key:"addMatcher",value:function(wt,St){this.matchers.push([wt,St])}},{key:"convert",value:function(wt){if(typeof wt=="string")return this.container.innerHTML=wt.replace(/\>\r?\n +\</g,"><"),this.convert();var St=this.quill.getFormat(this.quill.selection.savedRange.index);if(St[rt.default.blotName]){var Zt=this.container.innerText;return this.container.innerHTML="",new ye.default().insert(Zt,Be({},rt.default.blotName,St[rt.default.blotName]))}var Ct=this.prepareMatching(),Rt=Ae(Ct,2),dr=Rt[0],Dt=Rt[1],Tt=st(this.container,dr,Dt);return ot(Tt,`
`)&&Tt.ops[Tt.ops.length-1].attributes==null&&(Tt=Tt.compose(new ye.default().retain(Tt.length()-1).delete(1))),qe.log("convert",this.container.innerHTML,Tt),this.container.innerHTML="",Tt}},{key:"dangerouslyPasteHTML",value:function(wt,St){var Zt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$e.default.sources.API;if(typeof wt=="string")this.quill.setContents(this.convert(wt),St),this.quill.setSelection(0,$e.default.sources.SILENT);else{var Ct=this.convert(St);this.quill.updateContents(new ye.default().retain(wt).concat(Ct),Zt),this.quill.setSelection(wt+Ct.length(),$e.default.sources.SILENT)}}},{key:"onPaste",value:function(wt){var St=this;if(!(wt.defaultPrevented||!this.quill.isEnabled())){var Zt=this.quill.getSelection(),Ct=new ye.default().retain(Zt.index),Rt=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update($e.default.sources.SILENT),setTimeout(function(){Ct=Ct.concat(St.convert()).delete(Zt.length),St.quill.updateContents(Ct,$e.default.sources.USER),St.quill.setSelection(Ct.length()-Zt.length,$e.default.sources.SILENT),St.quill.scrollingContainer.scrollTop=Rt,St.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var wt=this,St=[],Zt=[];return this.matchers.forEach(function(Ct){var Rt=Ae(Ct,2),dr=Rt[0],Dt=Rt[1];switch(dr){case Node.TEXT_NODE:Zt.push(Dt);break;case Node.ELEMENT_NODE:St.push(Dt);break;default:[].forEach.call(wt.container.querySelectorAll(dr),function(Tt){Tt[We]=Tt[We]||[],Tt[We].push(Dt)});break}}),[St,Zt]}}]),gt}(Ye.default);tt.DEFAULTS={matchers:[],matchVisual:!0};function it(ht,gt,Pt){return(typeof gt>"u"?"undefined":ue(gt))==="object"?Object.keys(gt).reduce(function(wt,St){return it(wt,St,gt[St])},ht):ht.reduce(function(wt,St){return St.attributes&&St.attributes[gt]?wt.push(St):wt.insert(St.insert,(0,me.default)({},Be({},gt,Pt),St.attributes))},new ye.default)}function at(ht){if(ht.nodeType!==Node.ELEMENT_NODE)return{};var gt="__ql-computed-style";return ht[gt]||(ht[gt]=window.getComputedStyle(ht))}function ot(ht,gt){for(var Pt="",wt=ht.ops.length-1;wt>=0&&Pt.length<gt.length;--wt){var St=ht.ops[wt];if(typeof St.insert!="string")break;Pt=St.insert+Pt}return Pt.slice(-1*gt.length)===gt}function lt(ht){if(ht.childNodes.length===0)return!1;var gt=at(ht);return["block","list-item"].indexOf(gt.display)>-1}function st(ht,gt,Pt){return ht.nodeType===ht.TEXT_NODE?Pt.reduce(function(wt,St){return St(ht,wt)},new ye.default):ht.nodeType===ht.ELEMENT_NODE?[].reduce.call(ht.childNodes||[],function(wt,St){var Zt=st(St,gt,Pt);return St.nodeType===ht.ELEMENT_NODE&&(Zt=gt.reduce(function(Ct,Rt){return Rt(St,Ct)},Zt),Zt=(St[We]||[]).reduce(function(Ct,Rt){return Rt(St,Ct)},Zt)),wt.concat(Zt)},new ye.default):new ye.default}function ut(ht,gt,Pt){return it(Pt,ht,!0)}function ft(ht,gt){var Pt=Te.default.Attributor.Attribute.keys(ht),wt=Te.default.Attributor.Class.keys(ht),St=Te.default.Attributor.Style.keys(ht),Zt={};return Pt.concat(wt).concat(St).forEach(function(Ct){var Rt=Te.default.query(Ct,Te.default.Scope.ATTRIBUTE);Rt!=null&&(Zt[Rt.attrName]=Rt.value(ht),Zt[Rt.attrName])||(Rt=_e[Ct],Rt!=null&&(Rt.attrName===Ct||Rt.keyName===Ct)&&(Zt[Rt.attrName]=Rt.value(ht)||void 0),Rt=Qe[Ct],Rt!=null&&(Rt.attrName===Ct||Rt.keyName===Ct)&&(Rt=Qe[Ct],Zt[Rt.attrName]=Rt.value(ht)||void 0))}),Object.keys(Zt).length>0&&(gt=it(gt,Zt)),gt}function dt(ht,gt){var Pt=Te.default.query(ht);if(Pt==null)return gt;if(Pt.prototype instanceof Te.default.Embed){var wt={},St=Pt.value(ht);St!=null&&(wt[Pt.blotName]=St,gt=new ye.default().insert(wt,Pt.formats(ht)))}else typeof Pt.formats=="function"&&(gt=it(gt,Pt.blotName,Pt.formats(ht)));return gt}function Bt(ht,gt){return ot(gt,`
`)||gt.insert(`
`),gt}function pt(){return new ye.default}function mt(ht,gt){var Pt=Te.default.query(ht);if(Pt==null||Pt.blotName!=="list-item"||!ot(gt,`
`))return gt;for(var wt=-1,St=ht.parentNode;!St.classList.contains("ql-clipboard");)(Te.default.query(St)||{}).blotName==="list"&&(wt+=1),St=St.parentNode;return wt<=0?gt:gt.compose(new ye.default().retain(gt.length()-1).retain(1,{indent:wt}))}function bt(ht,gt){return ot(gt,`
`)||(lt(ht)||gt.length()>0&&ht.nextSibling&&lt(ht.nextSibling))&&gt.insert(`
`),gt}function xt(ht,gt){if(lt(ht)&&ht.nextElementSibling!=null&&!ot(gt,`

`)){var Pt=ht.offsetHeight+parseFloat(at(ht).marginTop)+parseFloat(at(ht).marginBottom);ht.nextElementSibling.offsetTop>ht.offsetTop+Pt*1.5&&gt.insert(`
`)}return gt}function yt(ht,gt){var Pt={},wt=ht.style||{};return wt.fontStyle&&at(ht).fontStyle==="italic"&&(Pt.italic=!0),wt.fontWeight&&(at(ht).fontWeight.startsWith("bold")||parseInt(at(ht).fontWeight)>=700)&&(Pt.bold=!0),Object.keys(Pt).length>0&&(gt=it(gt,Pt)),parseFloat(wt.textIndent||0)>0&&(gt=new ye.default().insert("	").concat(gt)),gt}function It(ht,gt){var Pt=ht.data;if(ht.parentNode.tagName==="O:P")return gt.insert(Pt.trim());if(Pt.trim().length===0&&ht.parentNode.classList.contains("ql-clipboard"))return gt;if(!at(ht.parentNode).whiteSpace.startsWith("pre")){var wt=function(Zt,Ct){return Ct=Ct.replace(/[^\u00a0]/g,""),Ct.length<1&&Zt?" ":Ct};Pt=Pt.replace(/\r\n/g," ").replace(/\n/g," "),Pt=Pt.replace(/\s\s+/g,wt.bind(wt,!0)),(ht.previousSibling==null&&lt(ht.parentNode)||ht.previousSibling!=null&&lt(ht.previousSibling))&&(Pt=Pt.replace(/^\s+/,wt.bind(wt,!1))),(ht.nextSibling==null&&lt(ht.parentNode)||ht.nextSibling!=null&&lt(ht.nextSibling))&&(Pt=Pt.replace(/\s+$/,wt.bind(wt,!1)))}return gt.insert(Pt)}oe.default=tt,oe.matchAttributor=ft,oe.matchBlot=dt,oe.matchNewline=bt,oe.matchSpacing=xt,oe.matchText=It},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function Ne($e,ke){for(var je=0;je<ke.length;je++){var Ke=ke[je];Ke.enumerable=Ke.enumerable||!1,Ke.configurable=!0,"value"in Ke&&(Ke.writable=!0),Object.defineProperty($e,Ke.key,Ke)}}return function($e,ke,je){return ke&&Ne($e.prototype,ke),je&&Ne($e,je),$e}}(),Ae=function Ne($e,ke,je){$e===null&&($e=Function.prototype);var Ke=Object.getOwnPropertyDescriptor($e,ke);if(Ke===void 0){var Ye=Object.getPrototypeOf($e);return Ye===null?void 0:Ne(Ye,ke,je)}else{if("value"in Ke)return Ke.value;var ze=Ke.get;return ze===void 0?void 0:ze.call(je)}},pe=ce(6),xe=me(pe);function me(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}function ge(Ne,$e){if(!(Ne instanceof $e))throw new TypeError("Cannot call a class as a function")}function ye(Ne,$e){if(!Ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $e&&(typeof $e=="object"||typeof $e=="function")?$e:Ne}function Se(Ne,$e){if(typeof $e!="function"&&$e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $e);Ne.prototype=Object.create($e&&$e.prototype,{constructor:{value:Ne,enumerable:!1,writable:!0,configurable:!0}}),$e&&(Object.setPrototypeOf?Object.setPrototypeOf(Ne,$e):Ne.__proto__=$e)}var Te=function(Ne){Se($e,Ne);function $e(){return ge(this,$e),ye(this,($e.__proto__||Object.getPrototypeOf($e)).apply(this,arguments))}return ue($e,[{key:"optimize",value:function(je){Ae($e.prototype.__proto__||Object.getPrototypeOf($e.prototype),"optimize",this).call(this,je),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return Ae($e.__proto__||Object.getPrototypeOf($e),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),$e}(xe.default);Te.blotName="bold",Te.tagName=["STRONG","B"],oe.default=Te},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.addControls=oe.default=void 0;var ue=function(){function Ge(ve,Be){var Re=[],Ie=!0,Fe=!1,qe=void 0;try{for(var We=ve[Symbol.iterator](),Ue;!(Ie=(Ue=We.next()).done)&&(Re.push(Ue.value),!(Be&&Re.length===Be));Ie=!0);}catch(_e){Fe=!0,qe=_e}finally{try{!Ie&&We.return&&We.return()}finally{if(Fe)throw qe}}return Re}return function(ve,Be){if(Array.isArray(ve))return ve;if(Symbol.iterator in Object(ve))return Ge(ve,Be);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ae=function(){function Ge(ve,Be){for(var Re=0;Re<Be.length;Re++){var Ie=Be[Re];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(ve,Ie.key,Ie)}}return function(ve,Be,Re){return Be&&Ge(ve.prototype,Be),Re&&Ge(ve,Re),ve}}(),pe=ce(2),xe=je(pe),me=ce(0),ge=je(me),ye=ce(5),Se=je(ye),Te=ce(10),Ne=je(Te),$e=ce(9),ke=je($e);function je(Ge){return Ge&&Ge.__esModule?Ge:{default:Ge}}function Ke(Ge,ve,Be){return ve in Ge?Object.defineProperty(Ge,ve,{value:Be,enumerable:!0,configurable:!0,writable:!0}):Ge[ve]=Be,Ge}function Ye(Ge,ve){if(!(Ge instanceof ve))throw new TypeError("Cannot call a class as a function")}function ze(Ge,ve){if(!Ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve&&(typeof ve=="object"||typeof ve=="function")?ve:Ge}function Xe(Ge,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ve);Ge.prototype=Object.create(ve&&ve.prototype,{constructor:{value:Ge,enumerable:!1,writable:!0,configurable:!0}}),ve&&(Object.setPrototypeOf?Object.setPrototypeOf(Ge,ve):Ge.__proto__=ve)}var Je=(0,Ne.default)("quill:toolbar"),rt=function(Ge){Xe(ve,Ge);function ve(Be,Re){Ye(this,ve);var Ie=ze(this,(ve.__proto__||Object.getPrototypeOf(ve)).call(this,Be,Re));if(Array.isArray(Ie.options.container)){var Fe=document.createElement("div");et(Fe,Ie.options.container),Be.container.parentNode.insertBefore(Fe,Be.container),Ie.container=Fe}else typeof Ie.options.container=="string"?Ie.container=document.querySelector(Ie.options.container):Ie.container=Ie.options.container;if(!(Ie.container instanceof HTMLElement)){var qe;return qe=Je.error("Container required for toolbar",Ie.options),ze(Ie,qe)}return Ie.container.classList.add("ql-toolbar"),Ie.controls=[],Ie.handlers={},Object.keys(Ie.options.handlers).forEach(function(We){Ie.addHandler(We,Ie.options.handlers[We])}),[].forEach.call(Ie.container.querySelectorAll("button, select"),function(We){Ie.attach(We)}),Ie.quill.on(Se.default.events.EDITOR_CHANGE,function(We,Ue){We===Se.default.events.SELECTION_CHANGE&&Ie.update(Ue)}),Ie.quill.on(Se.default.events.SCROLL_OPTIMIZE,function(){var We=Ie.quill.selection.getRange(),Ue=ue(We,1),_e=Ue[0];Ie.update(_e)}),Ie}return Ae(ve,[{key:"addHandler",value:function(Re,Ie){this.handlers[Re]=Ie}},{key:"attach",value:function(Re){var Ie=this,Fe=[].find.call(Re.classList,function(We){return We.indexOf("ql-")===0});if(Fe){if(Fe=Fe.slice(3),Re.tagName==="BUTTON"&&Re.setAttribute("type","button"),this.handlers[Fe]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Fe]==null){Je.warn("ignoring attaching to disabled format",Fe,Re);return}if(ge.default.query(Fe)==null){Je.warn("ignoring attaching to nonexistent format",Fe,Re);return}}var qe=Re.tagName==="SELECT"?"change":"click";Re.addEventListener(qe,function(We){var Ue=void 0;if(Re.tagName==="SELECT"){if(Re.selectedIndex<0)return;var _e=Re.options[Re.selectedIndex];_e.hasAttribute("selected")?Ue=!1:Ue=_e.value||!1}else Re.classList.contains("ql-active")?Ue=!1:Ue=Re.value||!Re.hasAttribute("value"),We.preventDefault();Ie.quill.focus();var Qe=Ie.quill.selection.getRange(),tt=ue(Qe,1),it=tt[0];if(Ie.handlers[Fe]!=null)Ie.handlers[Fe].call(Ie,Ue);else if(ge.default.query(Fe).prototype instanceof ge.default.Embed){if(Ue=prompt("Enter "+Fe),!Ue)return;Ie.quill.updateContents(new xe.default().retain(it.index).delete(it.length).insert(Ke({},Fe,Ue)),Se.default.sources.USER)}else Ie.quill.format(Fe,Ue,Se.default.sources.USER);Ie.update(it)}),this.controls.push([Fe,Re])}}},{key:"update",value:function(Re){var Ie=Re==null?{}:this.quill.getFormat(Re);this.controls.forEach(function(Fe){var qe=ue(Fe,2),We=qe[0],Ue=qe[1];if(Ue.tagName==="SELECT"){var _e=void 0;if(Re==null)_e=null;else if(Ie[We]==null)_e=Ue.querySelector("option[selected]");else if(!Array.isArray(Ie[We])){var Qe=Ie[We];typeof Qe=="string"&&(Qe=Qe.replace(/\"/g,'\\"')),_e=Ue.querySelector('option[value="'+Qe+'"]')}_e==null?(Ue.value="",Ue.selectedIndex=-1):_e.selected=!0}else if(Re==null)Ue.classList.remove("ql-active");else if(Ue.hasAttribute("value")){var tt=Ie[We]===Ue.getAttribute("value")||Ie[We]!=null&&Ie[We].toString()===Ue.getAttribute("value")||Ie[We]==null&&!Ue.getAttribute("value");Ue.classList.toggle("ql-active",tt)}else Ue.classList.toggle("ql-active",Ie[We]!=null)})}}]),ve}(ke.default);rt.DEFAULTS={};function Ze(Ge,ve,Be){var Re=document.createElement("button");Re.setAttribute("type","button"),Re.classList.add("ql-"+ve),Be!=null&&(Re.value=Be),Ge.appendChild(Re)}function et(Ge,ve){Array.isArray(ve[0])||(ve=[ve]),ve.forEach(function(Be){var Re=document.createElement("span");Re.classList.add("ql-formats"),Be.forEach(function(Ie){if(typeof Ie=="string")Ze(Re,Ie);else{var Fe=Object.keys(Ie)[0],qe=Ie[Fe];Array.isArray(qe)?nt(Re,Fe,qe):Ze(Re,Fe,qe)}}),Ge.appendChild(Re)})}function nt(Ge,ve,Be){var Re=document.createElement("select");Re.classList.add("ql-"+ve),Be.forEach(function(Ie){var Fe=document.createElement("option");Ie!==!1?Fe.setAttribute("value",Ie):Fe.setAttribute("selected","selected"),Re.appendChild(Fe)}),Ge.appendChild(Re)}rt.DEFAULTS={container:null,handlers:{clean:function(){var ve=this,Be=this.quill.getSelection();if(Be!=null)if(Be.length==0){var Re=this.quill.getFormat();Object.keys(Re).forEach(function(Ie){ge.default.query(Ie,ge.default.Scope.INLINE)!=null&&ve.quill.format(Ie,!1)})}else this.quill.removeFormat(Be,Se.default.sources.USER)},direction:function(ve){var Be=this.quill.getFormat().align;ve==="rtl"&&Be==null?this.quill.format("align","right",Se.default.sources.USER):!ve&&Be==="right"&&this.quill.format("align",!1,Se.default.sources.USER),this.quill.format("direction",ve,Se.default.sources.USER)},indent:function(ve){var Be=this.quill.getSelection(),Re=this.quill.getFormat(Be),Ie=parseInt(Re.indent||0);if(ve==="+1"||ve==="-1"){var Fe=ve==="+1"?1:-1;Re.direction==="rtl"&&(Fe*=-1),this.quill.format("indent",Ie+Fe,Se.default.sources.USER)}},link:function(ve){ve===!0&&(ve=prompt("Enter link URL:")),this.quill.format("link",ve,Se.default.sources.USER)},list:function(ve){var Be=this.quill.getSelection(),Re=this.quill.getFormat(Be);ve==="check"?Re.list==="checked"||Re.list==="unchecked"?this.quill.format("list",!1,Se.default.sources.USER):this.quill.format("list","unchecked",Se.default.sources.USER):this.quill.format("list",ve,Se.default.sources.USER)}}},oe.default=rt,oe.addControls=et},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function Ne($e,ke){for(var je=0;je<ke.length;je++){var Ke=ke[je];Ke.enumerable=Ke.enumerable||!1,Ke.configurable=!0,"value"in Ke&&(Ke.writable=!0),Object.defineProperty($e,Ke.key,Ke)}}return function($e,ke,je){return ke&&Ne($e.prototype,ke),je&&Ne($e,je),$e}}(),Ae=function Ne($e,ke,je){$e===null&&($e=Function.prototype);var Ke=Object.getOwnPropertyDescriptor($e,ke);if(Ke===void 0){var Ye=Object.getPrototypeOf($e);return Ye===null?void 0:Ne(Ye,ke,je)}else{if("value"in Ke)return Ke.value;var ze=Ke.get;return ze===void 0?void 0:ze.call(je)}},pe=ce(28),xe=me(pe);function me(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}function ge(Ne,$e){if(!(Ne instanceof $e))throw new TypeError("Cannot call a class as a function")}function ye(Ne,$e){if(!Ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $e&&(typeof $e=="object"||typeof $e=="function")?$e:Ne}function Se(Ne,$e){if(typeof $e!="function"&&$e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $e);Ne.prototype=Object.create($e&&$e.prototype,{constructor:{value:Ne,enumerable:!1,writable:!0,configurable:!0}}),$e&&(Object.setPrototypeOf?Object.setPrototypeOf(Ne,$e):Ne.__proto__=$e)}var Te=function(Ne){Se($e,Ne);function $e(ke,je){ge(this,$e);var Ke=ye(this,($e.__proto__||Object.getPrototypeOf($e)).call(this,ke));return Ke.label.innerHTML=je,Ke.container.classList.add("ql-color-picker"),[].slice.call(Ke.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(Ye){Ye.classList.add("ql-primary")}),Ke}return ue($e,[{key:"buildItem",value:function(je){var Ke=Ae($e.prototype.__proto__||Object.getPrototypeOf($e.prototype),"buildItem",this).call(this,je);return Ke.style.backgroundColor=je.getAttribute("value")||"",Ke}},{key:"selectItem",value:function(je,Ke){Ae($e.prototype.__proto__||Object.getPrototypeOf($e.prototype),"selectItem",this).call(this,je,Ke);var Ye=this.label.querySelector(".ql-color-label"),ze=je&&je.getAttribute("data-value")||"";Ye&&(Ye.tagName==="line"?Ye.style.stroke=ze:Ye.style.fill=ze)}}]),$e}(xe.default);oe.default=Te},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function Ne($e,ke){for(var je=0;je<ke.length;je++){var Ke=ke[je];Ke.enumerable=Ke.enumerable||!1,Ke.configurable=!0,"value"in Ke&&(Ke.writable=!0),Object.defineProperty($e,Ke.key,Ke)}}return function($e,ke,je){return ke&&Ne($e.prototype,ke),je&&Ne($e,je),$e}}(),Ae=function Ne($e,ke,je){$e===null&&($e=Function.prototype);var Ke=Object.getOwnPropertyDescriptor($e,ke);if(Ke===void 0){var Ye=Object.getPrototypeOf($e);return Ye===null?void 0:Ne(Ye,ke,je)}else{if("value"in Ke)return Ke.value;var ze=Ke.get;return ze===void 0?void 0:ze.call(je)}},pe=ce(28),xe=me(pe);function me(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}function ge(Ne,$e){if(!(Ne instanceof $e))throw new TypeError("Cannot call a class as a function")}function ye(Ne,$e){if(!Ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $e&&(typeof $e=="object"||typeof $e=="function")?$e:Ne}function Se(Ne,$e){if(typeof $e!="function"&&$e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $e);Ne.prototype=Object.create($e&&$e.prototype,{constructor:{value:Ne,enumerable:!1,writable:!0,configurable:!0}}),$e&&(Object.setPrototypeOf?Object.setPrototypeOf(Ne,$e):Ne.__proto__=$e)}var Te=function(Ne){Se($e,Ne);function $e(ke,je){ge(this,$e);var Ke=ye(this,($e.__proto__||Object.getPrototypeOf($e)).call(this,ke));return Ke.container.classList.add("ql-icon-picker"),[].forEach.call(Ke.container.querySelectorAll(".ql-picker-item"),function(Ye){Ye.innerHTML=je[Ye.getAttribute("data-value")||""]}),Ke.defaultItem=Ke.container.querySelector(".ql-selected"),Ke.selectItem(Ke.defaultItem),Ke}return ue($e,[{key:"selectItem",value:function(je,Ke){Ae($e.prototype.__proto__||Object.getPrototypeOf($e.prototype),"selectItem",this).call(this,je,Ke),je=je||this.defaultItem,this.label.innerHTML=je.innerHTML}}]),$e}(xe.default);oe.default=Te},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function xe(me,ge){for(var ye=0;ye<ge.length;ye++){var Se=ge[ye];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(me,Se.key,Se)}}return function(me,ge,ye){return ge&&xe(me.prototype,ge),ye&&xe(me,ye),me}}();function Ae(xe,me){if(!(xe instanceof me))throw new TypeError("Cannot call a class as a function")}var pe=function(){function xe(me,ge){var ye=this;Ae(this,xe),this.quill=me,this.boundsContainer=ge||document.body,this.root=me.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){ye.root.style.marginTop=-1*ye.quill.root.scrollTop+"px"}),this.hide()}return ue(xe,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(ge){var ye=ge.left+ge.width/2-this.root.offsetWidth/2,Se=ge.bottom+this.quill.root.scrollTop;this.root.style.left=ye+"px",this.root.style.top=Se+"px",this.root.classList.remove("ql-flip");var Te=this.boundsContainer.getBoundingClientRect(),Ne=this.root.getBoundingClientRect(),$e=0;if(Ne.right>Te.right&&($e=Te.right-Ne.right,this.root.style.left=ye+$e+"px"),Ne.left<Te.left&&($e=Te.left-Ne.left,this.root.style.left=ye+$e+"px"),Ne.bottom>Te.bottom){var ke=Ne.bottom-Ne.top,je=ge.bottom-ge.top+ke;this.root.style.top=Se-je+"px",this.root.classList.add("ql-flip")}return $e}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),xe}();oe.default=pe},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function nt(Ge,ve){var Be=[],Re=!0,Ie=!1,Fe=void 0;try{for(var qe=Ge[Symbol.iterator](),We;!(Re=(We=qe.next()).done)&&(Be.push(We.value),!(ve&&Be.length===ve));Re=!0);}catch(Ue){Ie=!0,Fe=Ue}finally{try{!Re&&qe.return&&qe.return()}finally{if(Ie)throw Fe}}return Be}return function(Ge,ve){if(Array.isArray(Ge))return Ge;if(Symbol.iterator in Object(Ge))return nt(Ge,ve);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ae=function nt(Ge,ve,Be){Ge===null&&(Ge=Function.prototype);var Re=Object.getOwnPropertyDescriptor(Ge,ve);if(Re===void 0){var Ie=Object.getPrototypeOf(Ge);return Ie===null?void 0:nt(Ie,ve,Be)}else{if("value"in Re)return Re.value;var Fe=Re.get;return Fe===void 0?void 0:Fe.call(Be)}},pe=function(){function nt(Ge,ve){for(var Be=0;Be<ve.length;Be++){var Re=ve[Be];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(Ge,Re.key,Re)}}return function(Ge,ve,Be){return ve&&nt(Ge.prototype,ve),Be&&nt(Ge,Be),Ge}}(),xe=ce(3),me=Ye(xe),ge=ce(8),ye=Ye(ge),Se=ce(43),Te=Ye(Se),Ne=ce(27),$e=Ye(Ne),ke=ce(15),je=ce(41),Ke=Ye(je);function Ye(nt){return nt&&nt.__esModule?nt:{default:nt}}function ze(nt,Ge){if(!(nt instanceof Ge))throw new TypeError("Cannot call a class as a function")}function Xe(nt,Ge){if(!nt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ge&&(typeof Ge=="object"||typeof Ge=="function")?Ge:nt}function Je(nt,Ge){if(typeof Ge!="function"&&Ge!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ge);nt.prototype=Object.create(Ge&&Ge.prototype,{constructor:{value:nt,enumerable:!1,writable:!0,configurable:!0}}),Ge&&(Object.setPrototypeOf?Object.setPrototypeOf(nt,Ge):nt.__proto__=Ge)}var rt=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],Ze=function(nt){Je(Ge,nt);function Ge(ve,Be){ze(this,Ge),Be.modules.toolbar!=null&&Be.modules.toolbar.container==null&&(Be.modules.toolbar.container=rt);var Re=Xe(this,(Ge.__proto__||Object.getPrototypeOf(Ge)).call(this,ve,Be));return Re.quill.container.classList.add("ql-snow"),Re}return pe(Ge,[{key:"extendToolbar",value:function(Be){Be.container.classList.add("ql-snow"),this.buildButtons([].slice.call(Be.container.querySelectorAll("button")),Ke.default),this.buildPickers([].slice.call(Be.container.querySelectorAll("select")),Ke.default),this.tooltip=new et(this.quill,this.options.bounds),Be.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(Re,Ie){Be.handlers.link.call(Be,!Ie.format.link)})}}]),Ge}(Te.default);Ze.DEFAULTS=(0,me.default)(!0,{},Te.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(Ge){if(Ge){var ve=this.quill.getSelection();if(ve==null||ve.length==0)return;var Be=this.quill.getText(ve);/^\S+@\S+\.\S+$/.test(Be)&&Be.indexOf("mailto:")!==0&&(Be="mailto:"+Be);var Re=this.quill.theme.tooltip;Re.edit("link",Be)}else this.quill.format("link",!1)}}}}});var et=function(nt){Je(Ge,nt);function Ge(ve,Be){ze(this,Ge);var Re=Xe(this,(Ge.__proto__||Object.getPrototypeOf(Ge)).call(this,ve,Be));return Re.preview=Re.root.querySelector("a.ql-preview"),Re}return pe(Ge,[{key:"listen",value:function(){var Be=this;Ae(Ge.prototype.__proto__||Object.getPrototypeOf(Ge.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(Re){Be.root.classList.contains("ql-editing")?Be.save():Be.edit("link",Be.preview.textContent),Re.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(Re){if(Be.linkRange!=null){var Ie=Be.linkRange;Be.restoreFocus(),Be.quill.formatText(Ie,"link",!1,ye.default.sources.USER),delete Be.linkRange}Re.preventDefault(),Be.hide()}),this.quill.on(ye.default.events.SELECTION_CHANGE,function(Re,Ie,Fe){if(Re!=null){if(Re.length===0&&Fe===ye.default.sources.USER){var qe=Be.quill.scroll.descendant($e.default,Re.index),We=ue(qe,2),Ue=We[0],_e=We[1];if(Ue!=null){Be.linkRange=new ke.Range(Re.index-_e,Ue.length());var Qe=$e.default.formats(Ue.domNode);Be.preview.textContent=Qe,Be.preview.setAttribute("href",Qe),Be.show(),Be.position(Be.quill.getBounds(Be.linkRange));return}}else delete Be.linkRange;Be.hide()}})}},{key:"show",value:function(){Ae(Ge.prototype.__proto__||Object.getPrototypeOf(Ge.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),Ge}(Se.BaseTooltip);et.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),oe.default=Ze},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(29),Ae=St(ue),pe=ce(36),xe=ce(38),me=ce(64),ge=ce(65),ye=St(ge),Se=ce(66),Te=St(Se),Ne=ce(67),$e=St(Ne),ke=ce(37),je=ce(26),Ke=ce(39),Ye=ce(40),ze=ce(56),Xe=St(ze),Je=ce(68),rt=St(Je),Ze=ce(27),et=St(Ze),nt=ce(69),Ge=St(nt),ve=ce(70),Be=St(ve),Re=ce(71),Ie=St(Re),Fe=ce(72),qe=St(Fe),We=ce(73),Ue=St(We),_e=ce(13),Qe=St(_e),tt=ce(74),it=St(tt),at=ce(75),ot=St(at),lt=ce(57),st=St(lt),ut=ce(41),ft=St(ut),dt=ce(28),Bt=St(dt),pt=ce(59),mt=St(pt),bt=ce(60),xt=St(bt),yt=ce(61),It=St(yt),ht=ce(108),gt=St(ht),Pt=ce(62),wt=St(Pt);function St(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}Ae.default.register({"attributors/attribute/direction":xe.DirectionAttribute,"attributors/class/align":pe.AlignClass,"attributors/class/background":ke.BackgroundClass,"attributors/class/color":je.ColorClass,"attributors/class/direction":xe.DirectionClass,"attributors/class/font":Ke.FontClass,"attributors/class/size":Ye.SizeClass,"attributors/style/align":pe.AlignStyle,"attributors/style/background":ke.BackgroundStyle,"attributors/style/color":je.ColorStyle,"attributors/style/direction":xe.DirectionStyle,"attributors/style/font":Ke.FontStyle,"attributors/style/size":Ye.SizeStyle},!0),Ae.default.register({"formats/align":pe.AlignClass,"formats/direction":xe.DirectionClass,"formats/indent":me.IndentClass,"formats/background":ke.BackgroundStyle,"formats/color":je.ColorStyle,"formats/font":Ke.FontClass,"formats/size":Ye.SizeClass,"formats/blockquote":ye.default,"formats/code-block":Qe.default,"formats/header":Te.default,"formats/list":$e.default,"formats/bold":Xe.default,"formats/code":_e.Code,"formats/italic":rt.default,"formats/link":et.default,"formats/script":Ge.default,"formats/strike":Be.default,"formats/underline":Ie.default,"formats/image":qe.default,"formats/video":Ue.default,"formats/list/item":Ne.ListItem,"modules/formula":it.default,"modules/syntax":ot.default,"modules/toolbar":st.default,"themes/bubble":gt.default,"themes/snow":wt.default,"ui/icons":ft.default,"ui/picker":Bt.default,"ui/icon-picker":xt.default,"ui/color-picker":mt.default,"ui/tooltip":It.default},!0),oe.default=Ae.default},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.IndentClass=void 0;var ue=function(){function $e(ke,je){for(var Ke=0;Ke<je.length;Ke++){var Ye=je[Ke];Ye.enumerable=Ye.enumerable||!1,Ye.configurable=!0,"value"in Ye&&(Ye.writable=!0),Object.defineProperty(ke,Ye.key,Ye)}}return function(ke,je,Ke){return je&&$e(ke.prototype,je),Ke&&$e(ke,Ke),ke}}(),Ae=function $e(ke,je,Ke){ke===null&&(ke=Function.prototype);var Ye=Object.getOwnPropertyDescriptor(ke,je);if(Ye===void 0){var ze=Object.getPrototypeOf(ke);return ze===null?void 0:$e(ze,je,Ke)}else{if("value"in Ye)return Ye.value;var Xe=Ye.get;return Xe===void 0?void 0:Xe.call(Ke)}},pe=ce(0),xe=me(pe);function me($e){return $e&&$e.__esModule?$e:{default:$e}}function ge($e,ke){if(!($e instanceof ke))throw new TypeError("Cannot call a class as a function")}function ye($e,ke){if(!$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ke&&(typeof ke=="object"||typeof ke=="function")?ke:$e}function Se($e,ke){if(typeof ke!="function"&&ke!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ke);$e.prototype=Object.create(ke&&ke.prototype,{constructor:{value:$e,enumerable:!1,writable:!0,configurable:!0}}),ke&&(Object.setPrototypeOf?Object.setPrototypeOf($e,ke):$e.__proto__=ke)}var Te=function($e){Se(ke,$e);function ke(){return ge(this,ke),ye(this,(ke.__proto__||Object.getPrototypeOf(ke)).apply(this,arguments))}return ue(ke,[{key:"add",value:function(Ke,Ye){if(Ye==="+1"||Ye==="-1"){var ze=this.value(Ke)||0;Ye=Ye==="+1"?ze+1:ze-1}return Ye===0?(this.remove(Ke),!0):Ae(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"add",this).call(this,Ke,Ye)}},{key:"canAdd",value:function(Ke,Ye){return Ae(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"canAdd",this).call(this,Ke,Ye)||Ae(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"canAdd",this).call(this,Ke,parseInt(Ye))}},{key:"value",value:function(Ke){return parseInt(Ae(ke.prototype.__proto__||Object.getPrototypeOf(ke.prototype),"value",this).call(this,Ke))||void 0}}]),ke}(xe.default.Attributor.Class),Ne=new Te("indent","ql-indent",{scope:xe.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});oe.IndentClass=Ne},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(4),Ae=pe(ue);function pe(Se){return Se&&Se.__esModule?Se:{default:Se}}function xe(Se,Te){if(!(Se instanceof Te))throw new TypeError("Cannot call a class as a function")}function me(Se,Te){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Te&&(typeof Te=="object"||typeof Te=="function")?Te:Se}function ge(Se,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Te);Se.prototype=Object.create(Te&&Te.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),Te&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,Te):Se.__proto__=Te)}var ye=function(Se){ge(Te,Se);function Te(){return xe(this,Te),me(this,(Te.__proto__||Object.getPrototypeOf(Te)).apply(this,arguments))}return Te}(Ae.default);ye.blotName="blockquote",ye.tagName="blockquote",oe.default=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function Te(Ne,$e){for(var ke=0;ke<$e.length;ke++){var je=$e[ke];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(Ne,je.key,je)}}return function(Ne,$e,ke){return $e&&Te(Ne.prototype,$e),ke&&Te(Ne,ke),Ne}}(),Ae=ce(4),pe=xe(Ae);function xe(Te){return Te&&Te.__esModule?Te:{default:Te}}function me(Te,Ne){if(!(Te instanceof Ne))throw new TypeError("Cannot call a class as a function")}function ge(Te,Ne){if(!Te)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ne&&(typeof Ne=="object"||typeof Ne=="function")?Ne:Te}function ye(Te,Ne){if(typeof Ne!="function"&&Ne!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ne);Te.prototype=Object.create(Ne&&Ne.prototype,{constructor:{value:Te,enumerable:!1,writable:!0,configurable:!0}}),Ne&&(Object.setPrototypeOf?Object.setPrototypeOf(Te,Ne):Te.__proto__=Ne)}var Se=function(Te){ye(Ne,Te);function Ne(){return me(this,Ne),ge(this,(Ne.__proto__||Object.getPrototypeOf(Ne)).apply(this,arguments))}return ue(Ne,null,[{key:"formats",value:function(ke){return this.tagName.indexOf(ke.tagName)+1}}]),Ne}(pe.default);Se.blotName="header",Se.tagName=["H1","H2","H3","H4","H5","H6"],oe.default=Se},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.ListItem=void 0;var ue=function(){function ze(Xe,Je){for(var rt=0;rt<Je.length;rt++){var Ze=Je[rt];Ze.enumerable=Ze.enumerable||!1,Ze.configurable=!0,"value"in Ze&&(Ze.writable=!0),Object.defineProperty(Xe,Ze.key,Ze)}}return function(Xe,Je,rt){return Je&&ze(Xe.prototype,Je),rt&&ze(Xe,rt),Xe}}(),Ae=function ze(Xe,Je,rt){Xe===null&&(Xe=Function.prototype);var Ze=Object.getOwnPropertyDescriptor(Xe,Je);if(Ze===void 0){var et=Object.getPrototypeOf(Xe);return et===null?void 0:ze(et,Je,rt)}else{if("value"in Ze)return Ze.value;var nt=Ze.get;return nt===void 0?void 0:nt.call(rt)}},pe=ce(0),xe=Te(pe),me=ce(4),ge=Te(me),ye=ce(25),Se=Te(ye);function Te(ze){return ze&&ze.__esModule?ze:{default:ze}}function Ne(ze,Xe,Je){return Xe in ze?Object.defineProperty(ze,Xe,{value:Je,enumerable:!0,configurable:!0,writable:!0}):ze[Xe]=Je,ze}function $e(ze,Xe){if(!(ze instanceof Xe))throw new TypeError("Cannot call a class as a function")}function ke(ze,Xe){if(!ze)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Xe&&(typeof Xe=="object"||typeof Xe=="function")?Xe:ze}function je(ze,Xe){if(typeof Xe!="function"&&Xe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Xe);ze.prototype=Object.create(Xe&&Xe.prototype,{constructor:{value:ze,enumerable:!1,writable:!0,configurable:!0}}),Xe&&(Object.setPrototypeOf?Object.setPrototypeOf(ze,Xe):ze.__proto__=Xe)}var Ke=function(ze){je(Xe,ze);function Xe(){return $e(this,Xe),ke(this,(Xe.__proto__||Object.getPrototypeOf(Xe)).apply(this,arguments))}return ue(Xe,[{key:"format",value:function(rt,Ze){rt===Ye.blotName&&!Ze?this.replaceWith(xe.default.create(this.statics.scope)):Ae(Xe.prototype.__proto__||Object.getPrototypeOf(Xe.prototype),"format",this).call(this,rt,Ze)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():Ae(Xe.prototype.__proto__||Object.getPrototypeOf(Xe.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(rt,Ze){return this.parent.isolate(this.offset(this.parent),this.length()),rt===this.parent.statics.blotName?(this.parent.replaceWith(rt,Ze),this):(this.parent.unwrap(),Ae(Xe.prototype.__proto__||Object.getPrototypeOf(Xe.prototype),"replaceWith",this).call(this,rt,Ze))}}],[{key:"formats",value:function(rt){return rt.tagName===this.tagName?void 0:Ae(Xe.__proto__||Object.getPrototypeOf(Xe),"formats",this).call(this,rt)}}]),Xe}(ge.default);Ke.blotName="list-item",Ke.tagName="LI";var Ye=function(ze){je(Xe,ze),ue(Xe,null,[{key:"create",value:function(rt){var Ze=rt==="ordered"?"OL":"UL",et=Ae(Xe.__proto__||Object.getPrototypeOf(Xe),"create",this).call(this,Ze);return(rt==="checked"||rt==="unchecked")&&et.setAttribute("data-checked",rt==="checked"),et}},{key:"formats",value:function(rt){if(rt.tagName==="OL")return"ordered";if(rt.tagName==="UL")return rt.hasAttribute("data-checked")?rt.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function Xe(Je){$e(this,Xe);var rt=ke(this,(Xe.__proto__||Object.getPrototypeOf(Xe)).call(this,Je)),Ze=function(nt){if(nt.target.parentNode===Je){var Ge=rt.statics.formats(Je),ve=xe.default.find(nt.target);Ge==="checked"?ve.format("list","unchecked"):Ge==="unchecked"&&ve.format("list","checked")}};return Je.addEventListener("touchstart",Ze),Je.addEventListener("mousedown",Ze),rt}return ue(Xe,[{key:"format",value:function(rt,Ze){this.children.length>0&&this.children.tail.format(rt,Ze)}},{key:"formats",value:function(){return Ne({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(rt,Ze){if(rt instanceof Ke)Ae(Xe.prototype.__proto__||Object.getPrototypeOf(Xe.prototype),"insertBefore",this).call(this,rt,Ze);else{var et=Ze==null?this.length():Ze.offset(this),nt=this.split(et);nt.parent.insertBefore(rt,nt)}}},{key:"optimize",value:function(rt){Ae(Xe.prototype.__proto__||Object.getPrototypeOf(Xe.prototype),"optimize",this).call(this,rt);var Ze=this.next;Ze!=null&&Ze.prev===this&&Ze.statics.blotName===this.statics.blotName&&Ze.domNode.tagName===this.domNode.tagName&&Ze.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(Ze.moveChildren(this),Ze.remove())}},{key:"replace",value:function(rt){if(rt.statics.blotName!==this.statics.blotName){var Ze=xe.default.create(this.statics.defaultChild);rt.moveChildren(Ze),this.appendChild(Ze)}Ae(Xe.prototype.__proto__||Object.getPrototypeOf(Xe.prototype),"replace",this).call(this,rt)}}]),Xe}(Se.default);Ye.blotName="list",Ye.scope=xe.default.Scope.BLOCK_BLOT,Ye.tagName=["OL","UL"],Ye.defaultChild="list-item",Ye.allowedChildren=[Ke],oe.ListItem=Ke,oe.default=Ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(56),Ae=pe(ue);function pe(Se){return Se&&Se.__esModule?Se:{default:Se}}function xe(Se,Te){if(!(Se instanceof Te))throw new TypeError("Cannot call a class as a function")}function me(Se,Te){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Te&&(typeof Te=="object"||typeof Te=="function")?Te:Se}function ge(Se,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Te);Se.prototype=Object.create(Te&&Te.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),Te&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,Te):Se.__proto__=Te)}var ye=function(Se){ge(Te,Se);function Te(){return xe(this,Te),me(this,(Te.__proto__||Object.getPrototypeOf(Te)).apply(this,arguments))}return Te}(Ae.default);ye.blotName="italic",ye.tagName=["EM","I"],oe.default=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function Ne($e,ke){for(var je=0;je<ke.length;je++){var Ke=ke[je];Ke.enumerable=Ke.enumerable||!1,Ke.configurable=!0,"value"in Ke&&(Ke.writable=!0),Object.defineProperty($e,Ke.key,Ke)}}return function($e,ke,je){return ke&&Ne($e.prototype,ke),je&&Ne($e,je),$e}}(),Ae=function Ne($e,ke,je){$e===null&&($e=Function.prototype);var Ke=Object.getOwnPropertyDescriptor($e,ke);if(Ke===void 0){var Ye=Object.getPrototypeOf($e);return Ye===null?void 0:Ne(Ye,ke,je)}else{if("value"in Ke)return Ke.value;var ze=Ke.get;return ze===void 0?void 0:ze.call(je)}},pe=ce(6),xe=me(pe);function me(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}function ge(Ne,$e){if(!(Ne instanceof $e))throw new TypeError("Cannot call a class as a function")}function ye(Ne,$e){if(!Ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $e&&(typeof $e=="object"||typeof $e=="function")?$e:Ne}function Se(Ne,$e){if(typeof $e!="function"&&$e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $e);Ne.prototype=Object.create($e&&$e.prototype,{constructor:{value:Ne,enumerable:!1,writable:!0,configurable:!0}}),$e&&(Object.setPrototypeOf?Object.setPrototypeOf(Ne,$e):Ne.__proto__=$e)}var Te=function(Ne){Se($e,Ne);function $e(){return ge(this,$e),ye(this,($e.__proto__||Object.getPrototypeOf($e)).apply(this,arguments))}return ue($e,null,[{key:"create",value:function(je){return je==="super"?document.createElement("sup"):je==="sub"?document.createElement("sub"):Ae($e.__proto__||Object.getPrototypeOf($e),"create",this).call(this,je)}},{key:"formats",value:function(je){if(je.tagName==="SUB")return"sub";if(je.tagName==="SUP")return"super"}}]),$e}(xe.default);Te.blotName="script",Te.tagName=["SUB","SUP"],oe.default=Te},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(6),Ae=pe(ue);function pe(Se){return Se&&Se.__esModule?Se:{default:Se}}function xe(Se,Te){if(!(Se instanceof Te))throw new TypeError("Cannot call a class as a function")}function me(Se,Te){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Te&&(typeof Te=="object"||typeof Te=="function")?Te:Se}function ge(Se,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Te);Se.prototype=Object.create(Te&&Te.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),Te&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,Te):Se.__proto__=Te)}var ye=function(Se){ge(Te,Se);function Te(){return xe(this,Te),me(this,(Te.__proto__||Object.getPrototypeOf(Te)).apply(this,arguments))}return Te}(Ae.default);ye.blotName="strike",ye.tagName="S",oe.default=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=ce(6),Ae=pe(ue);function pe(Se){return Se&&Se.__esModule?Se:{default:Se}}function xe(Se,Te){if(!(Se instanceof Te))throw new TypeError("Cannot call a class as a function")}function me(Se,Te){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Te&&(typeof Te=="object"||typeof Te=="function")?Te:Se}function ge(Se,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Te);Se.prototype=Object.create(Te&&Te.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),Te&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,Te):Se.__proto__=Te)}var ye=function(Se){ge(Te,Se);function Te(){return xe(this,Te),me(this,(Te.__proto__||Object.getPrototypeOf(Te)).apply(this,arguments))}return Te}(Ae.default);ye.blotName="underline",ye.tagName="U",oe.default=ye},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function ke(je,Ke){for(var Ye=0;Ye<Ke.length;Ye++){var ze=Ke[Ye];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(je,ze.key,ze)}}return function(je,Ke,Ye){return Ke&&ke(je.prototype,Ke),Ye&&ke(je,Ye),je}}(),Ae=function ke(je,Ke,Ye){je===null&&(je=Function.prototype);var ze=Object.getOwnPropertyDescriptor(je,Ke);if(ze===void 0){var Xe=Object.getPrototypeOf(je);return Xe===null?void 0:ke(Xe,Ke,Ye)}else{if("value"in ze)return ze.value;var Je=ze.get;return Je===void 0?void 0:Je.call(Ye)}},pe=ce(0),xe=ge(pe),me=ce(27);function ge(ke){return ke&&ke.__esModule?ke:{default:ke}}function ye(ke,je){if(!(ke instanceof je))throw new TypeError("Cannot call a class as a function")}function Se(ke,je){if(!ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return je&&(typeof je=="object"||typeof je=="function")?je:ke}function Te(ke,je){if(typeof je!="function"&&je!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof je);ke.prototype=Object.create(je&&je.prototype,{constructor:{value:ke,enumerable:!1,writable:!0,configurable:!0}}),je&&(Object.setPrototypeOf?Object.setPrototypeOf(ke,je):ke.__proto__=je)}var Ne=["alt","height","width"],$e=function(ke){Te(je,ke);function je(){return ye(this,je),Se(this,(je.__proto__||Object.getPrototypeOf(je)).apply(this,arguments))}return ue(je,[{key:"format",value:function(Ye,ze){Ne.indexOf(Ye)>-1?ze?this.domNode.setAttribute(Ye,ze):this.domNode.removeAttribute(Ye):Ae(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"format",this).call(this,Ye,ze)}}],[{key:"create",value:function(Ye){var ze=Ae(je.__proto__||Object.getPrototypeOf(je),"create",this).call(this,Ye);return typeof Ye=="string"&&ze.setAttribute("src",this.sanitize(Ye)),ze}},{key:"formats",value:function(Ye){return Ne.reduce(function(ze,Xe){return Ye.hasAttribute(Xe)&&(ze[Xe]=Ye.getAttribute(Xe)),ze},{})}},{key:"match",value:function(Ye){return/\.(jpe?g|gif|png)$/.test(Ye)||/^data:image\/.+;base64/.test(Ye)}},{key:"sanitize",value:function(Ye){return(0,me.sanitize)(Ye,["http","https","data"])?Ye:"//:0"}},{key:"value",value:function(Ye){return Ye.getAttribute("src")}}]),je}(xe.default.Embed);$e.blotName="image",$e.tagName="IMG",oe.default=$e},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0});var ue=function(){function ke(je,Ke){for(var Ye=0;Ye<Ke.length;Ye++){var ze=Ke[Ye];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(je,ze.key,ze)}}return function(je,Ke,Ye){return Ke&&ke(je.prototype,Ke),Ye&&ke(je,Ye),je}}(),Ae=function ke(je,Ke,Ye){je===null&&(je=Function.prototype);var ze=Object.getOwnPropertyDescriptor(je,Ke);if(ze===void 0){var Xe=Object.getPrototypeOf(je);return Xe===null?void 0:ke(Xe,Ke,Ye)}else{if("value"in ze)return ze.value;var Je=ze.get;return Je===void 0?void 0:Je.call(Ye)}},pe=ce(4),xe=ce(27),me=ge(xe);function ge(ke){return ke&&ke.__esModule?ke:{default:ke}}function ye(ke,je){if(!(ke instanceof je))throw new TypeError("Cannot call a class as a function")}function Se(ke,je){if(!ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return je&&(typeof je=="object"||typeof je=="function")?je:ke}function Te(ke,je){if(typeof je!="function"&&je!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof je);ke.prototype=Object.create(je&&je.prototype,{constructor:{value:ke,enumerable:!1,writable:!0,configurable:!0}}),je&&(Object.setPrototypeOf?Object.setPrototypeOf(ke,je):ke.__proto__=je)}var Ne=["height","width"],$e=function(ke){Te(je,ke);function je(){return ye(this,je),Se(this,(je.__proto__||Object.getPrototypeOf(je)).apply(this,arguments))}return ue(je,[{key:"format",value:function(Ye,ze){Ne.indexOf(Ye)>-1?ze?this.domNode.setAttribute(Ye,ze):this.domNode.removeAttribute(Ye):Ae(je.prototype.__proto__||Object.getPrototypeOf(je.prototype),"format",this).call(this,Ye,ze)}}],[{key:"create",value:function(Ye){var ze=Ae(je.__proto__||Object.getPrototypeOf(je),"create",this).call(this,Ye);return ze.setAttribute("frameborder","0"),ze.setAttribute("allowfullscreen",!0),ze.setAttribute("src",this.sanitize(Ye)),ze}},{key:"formats",value:function(Ye){return Ne.reduce(function(ze,Xe){return Ye.hasAttribute(Xe)&&(ze[Xe]=Ye.getAttribute(Xe)),ze},{})}},{key:"sanitize",value:function(Ye){return me.default.sanitize(Ye)}},{key:"value",value:function(Ye){return Ye.getAttribute("src")}}]),je}(pe.BlockEmbed);$e.blotName="video",$e.className="ql-video",$e.tagName="IFRAME",oe.default=$e},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.FormulaBlot=void 0;var ue=function(){function Ye(ze,Xe){for(var Je=0;Je<Xe.length;Je++){var rt=Xe[Je];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(ze,rt.key,rt)}}return function(ze,Xe,Je){return Xe&&Ye(ze.prototype,Xe),Je&&Ye(ze,Je),ze}}(),Ae=function Ye(ze,Xe,Je){ze===null&&(ze=Function.prototype);var rt=Object.getOwnPropertyDescriptor(ze,Xe);if(rt===void 0){var Ze=Object.getPrototypeOf(ze);return Ze===null?void 0:Ye(Ze,Xe,Je)}else{if("value"in rt)return rt.value;var et=rt.get;return et===void 0?void 0:et.call(Je)}},pe=ce(35),xe=Te(pe),me=ce(5),ge=Te(me),ye=ce(9),Se=Te(ye);function Te(Ye){return Ye&&Ye.__esModule?Ye:{default:Ye}}function Ne(Ye,ze){if(!(Ye instanceof ze))throw new TypeError("Cannot call a class as a function")}function $e(Ye,ze){if(!Ye)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ze&&(typeof ze=="object"||typeof ze=="function")?ze:Ye}function ke(Ye,ze){if(typeof ze!="function"&&ze!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ze);Ye.prototype=Object.create(ze&&ze.prototype,{constructor:{value:Ye,enumerable:!1,writable:!0,configurable:!0}}),ze&&(Object.setPrototypeOf?Object.setPrototypeOf(Ye,ze):Ye.__proto__=ze)}var je=function(Ye){ke(ze,Ye);function ze(){return Ne(this,ze),$e(this,(ze.__proto__||Object.getPrototypeOf(ze)).apply(this,arguments))}return ue(ze,null,[{key:"create",value:function(Je){var rt=Ae(ze.__proto__||Object.getPrototypeOf(ze),"create",this).call(this,Je);return typeof Je=="string"&&(window.katex.render(Je,rt,{throwOnError:!1,errorColor:"#f00"}),rt.setAttribute("data-value",Je)),rt}},{key:"value",value:function(Je){return Je.getAttribute("data-value")}}]),ze}(xe.default);je.blotName="formula",je.className="ql-formula",je.tagName="SPAN";var Ke=function(Ye){ke(ze,Ye),ue(ze,null,[{key:"register",value:function(){ge.default.register(je,!0)}}]);function ze(){Ne(this,ze);var Xe=$e(this,(ze.__proto__||Object.getPrototypeOf(ze)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return Xe}return ze}(Se.default);oe.FormulaBlot=je,oe.default=Ke},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.CodeToken=oe.CodeBlock=void 0;var ue=function(){function Je(rt,Ze){for(var et=0;et<Ze.length;et++){var nt=Ze[et];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(rt,nt.key,nt)}}return function(rt,Ze,et){return Ze&&Je(rt.prototype,Ze),et&&Je(rt,et),rt}}(),Ae=function Je(rt,Ze,et){rt===null&&(rt=Function.prototype);var nt=Object.getOwnPropertyDescriptor(rt,Ze);if(nt===void 0){var Ge=Object.getPrototypeOf(rt);return Ge===null?void 0:Je(Ge,Ze,et)}else{if("value"in nt)return nt.value;var ve=nt.get;return ve===void 0?void 0:ve.call(et)}},pe=ce(0),xe=$e(pe),me=ce(5),ge=$e(me),ye=ce(9),Se=$e(ye),Te=ce(13),Ne=$e(Te);function $e(Je){return Je&&Je.__esModule?Je:{default:Je}}function ke(Je,rt){if(!(Je instanceof rt))throw new TypeError("Cannot call a class as a function")}function je(Je,rt){if(!Je)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rt&&(typeof rt=="object"||typeof rt=="function")?rt:Je}function Ke(Je,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof rt);Je.prototype=Object.create(rt&&rt.prototype,{constructor:{value:Je,enumerable:!1,writable:!0,configurable:!0}}),rt&&(Object.setPrototypeOf?Object.setPrototypeOf(Je,rt):Je.__proto__=rt)}var Ye=function(Je){Ke(rt,Je);function rt(){return ke(this,rt),je(this,(rt.__proto__||Object.getPrototypeOf(rt)).apply(this,arguments))}return ue(rt,[{key:"replaceWith",value:function(et){this.domNode.textContent=this.domNode.textContent,this.attach(),Ae(rt.prototype.__proto__||Object.getPrototypeOf(rt.prototype),"replaceWith",this).call(this,et)}},{key:"highlight",value:function(et){var nt=this.domNode.textContent;this.cachedText!==nt&&((nt.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=et(nt),this.domNode.normalize(),this.attach()),this.cachedText=nt)}}]),rt}(Ne.default);Ye.className="ql-syntax";var ze=new xe.default.Attributor.Class("token","hljs",{scope:xe.default.Scope.INLINE}),Xe=function(Je){Ke(rt,Je),ue(rt,null,[{key:"register",value:function(){ge.default.register(ze,!0),ge.default.register(Ye,!0)}}]);function rt(Ze,et){ke(this,rt);var nt=je(this,(rt.__proto__||Object.getPrototypeOf(rt)).call(this,Ze,et));if(typeof nt.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var Ge=null;return nt.quill.on(ge.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(Ge),Ge=setTimeout(function(){nt.highlight(),Ge=null},nt.options.interval)}),nt.highlight(),nt}return ue(rt,[{key:"highlight",value:function(){var et=this;if(!this.quill.selection.composing){this.quill.update(ge.default.sources.USER);var nt=this.quill.getSelection();this.quill.scroll.descendants(Ye).forEach(function(Ge){Ge.highlight(et.options.highlight)}),this.quill.update(ge.default.sources.SILENT),nt!=null&&this.quill.setSelection(nt,ge.default.sources.SILENT)}}}]),rt}(Se.default);Xe.DEFAULTS={highlight:function(){return window.hljs==null?null:function(Je){var rt=window.hljs.highlightAuto(Je);return rt.value}}(),interval:1e3},oe.CodeBlock=Ye,oe.CodeToken=ze,oe.default=Xe},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(ne,oe){ne.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(ne,oe){ne.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(ne,oe){ne.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(ne,oe){ne.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(ne,oe){ne.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(ne,oe,ce){Object.defineProperty(oe,"__esModule",{value:!0}),oe.default=oe.BubbleTooltip=void 0;var ue=function rt(Ze,et,nt){Ze===null&&(Ze=Function.prototype);var Ge=Object.getOwnPropertyDescriptor(Ze,et);if(Ge===void 0){var ve=Object.getPrototypeOf(Ze);return ve===null?void 0:rt(ve,et,nt)}else{if("value"in Ge)return Ge.value;var Be=Ge.get;return Be===void 0?void 0:Be.call(nt)}},Ae=function(){function rt(Ze,et){for(var nt=0;nt<et.length;nt++){var Ge=et[nt];Ge.enumerable=Ge.enumerable||!1,Ge.configurable=!0,"value"in Ge&&(Ge.writable=!0),Object.defineProperty(Ze,Ge.key,Ge)}}return function(Ze,et,nt){return et&&rt(Ze.prototype,et),nt&&rt(Ze,nt),Ze}}(),pe=ce(3),xe=ke(pe),me=ce(8),ge=ke(me),ye=ce(43),Se=ke(ye),Te=ce(15),Ne=ce(41),$e=ke(Ne);function ke(rt){return rt&&rt.__esModule?rt:{default:rt}}function je(rt,Ze){if(!(rt instanceof Ze))throw new TypeError("Cannot call a class as a function")}function Ke(rt,Ze){if(!rt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ze&&(typeof Ze=="object"||typeof Ze=="function")?Ze:rt}function Ye(rt,Ze){if(typeof Ze!="function"&&Ze!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ze);rt.prototype=Object.create(Ze&&Ze.prototype,{constructor:{value:rt,enumerable:!1,writable:!0,configurable:!0}}),Ze&&(Object.setPrototypeOf?Object.setPrototypeOf(rt,Ze):rt.__proto__=Ze)}var ze=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],Xe=function(rt){Ye(Ze,rt);function Ze(et,nt){je(this,Ze),nt.modules.toolbar!=null&&nt.modules.toolbar.container==null&&(nt.modules.toolbar.container=ze);var Ge=Ke(this,(Ze.__proto__||Object.getPrototypeOf(Ze)).call(this,et,nt));return Ge.quill.container.classList.add("ql-bubble"),Ge}return Ae(Ze,[{key:"extendToolbar",value:function(nt){this.tooltip=new Je(this.quill,this.options.bounds),this.tooltip.root.appendChild(nt.container),this.buildButtons([].slice.call(nt.container.querySelectorAll("button")),$e.default),this.buildPickers([].slice.call(nt.container.querySelectorAll("select")),$e.default)}}]),Ze}(Se.default);Xe.DEFAULTS=(0,xe.default)(!0,{},Se.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(Ze){Ze?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var Je=function(rt){Ye(Ze,rt);function Ze(et,nt){je(this,Ze);var Ge=Ke(this,(Ze.__proto__||Object.getPrototypeOf(Ze)).call(this,et,nt));return Ge.quill.on(ge.default.events.EDITOR_CHANGE,function(ve,Be,Re,Ie){if(ve===ge.default.events.SELECTION_CHANGE)if(Be!=null&&Be.length>0&&Ie===ge.default.sources.USER){Ge.show(),Ge.root.style.left="0px",Ge.root.style.width="",Ge.root.style.width=Ge.root.offsetWidth+"px";var Fe=Ge.quill.getLines(Be.index,Be.length);if(Fe.length===1)Ge.position(Ge.quill.getBounds(Be));else{var qe=Fe[Fe.length-1],We=Ge.quill.getIndex(qe),Ue=Math.min(qe.length()-1,Be.index+Be.length-We),_e=Ge.quill.getBounds(new Te.Range(We,Ue));Ge.position(_e)}}else document.activeElement!==Ge.textbox&&Ge.quill.hasFocus()&&Ge.hide()}),Ge}return Ae(Ze,[{key:"listen",value:function(){var nt=this;ue(Ze.prototype.__proto__||Object.getPrototypeOf(Ze.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){nt.root.classList.remove("ql-editing")}),this.quill.on(ge.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!nt.root.classList.contains("ql-hidden")){var Ge=nt.quill.getSelection();Ge!=null&&nt.position(nt.quill.getBounds(Ge))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(nt){var Ge=ue(Ze.prototype.__proto__||Object.getPrototypeOf(Ze.prototype),"position",this).call(this,nt),ve=this.root.querySelector(".ql-tooltip-arrow");if(ve.style.marginLeft="",Ge===0)return Ge;ve.style.marginLeft=-1*Ge-ve.offsetWidth/2+"px"}}]),Ze}(ye.BaseTooltip);Je.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),oe.BubbleTooltip=Je,oe.default=Xe},function(ne,oe,ce){ne.exports=ce(63)}]).default})})(quill);var quillExports=quill.exports,__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var K=function(J,ne){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ce){oe.__proto__=ce}||function(oe,ce){for(var ue in ce)ce.hasOwnProperty(ue)&&(oe[ue]=ce[ue])},K(J,ne)};return function(J,ne){K(J,ne);function oe(){this.constructor=J}J.prototype=ne===null?Object.create(ne):(oe.prototype=ne.prototype,new oe)}}(),__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(K){for(var J,ne=1,oe=arguments.length;ne<oe;ne++){J=arguments[ne];for(var ce in J)Object.prototype.hasOwnProperty.call(J,ce)&&(K[ce]=J[ce])}return K},__assign.apply(this,arguments)},__spreadArrays=commonjsGlobal&&commonjsGlobal.__spreadArrays||function(){for(var K=0,J=0,ne=arguments.length;J<ne;J++)K+=arguments[J].length;for(var oe=Array(K),ce=0,J=0;J<ne;J++)for(var ue=arguments[J],Ae=0,pe=ue.length;Ae<pe;Ae++,ce++)oe[ce]=ue[Ae];return oe},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(K){return K&&K.__esModule?K:{default:K}},react_1=__importDefault(reactExports),react_dom_1=__importDefault(reactDomExports),isEqual_1=__importDefault(isEqual_1$1),quill_1=__importDefault(quillExports),ReactQuill=function(K){__extends(J,K);function J(ne){var oe=K.call(this,ne)||this;oe.dirtyProps=["modules","formats","bounds","theme","children"],oe.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],oe.state={generation:0},oe.selection=null,oe.onEditorChange=function(ue,Ae,pe,xe){var me,ge,ye,Se;ue==="text-change"?(ge=(me=oe).onEditorChangeText)===null||ge===void 0||ge.call(me,oe.editor.root.innerHTML,Ae,xe,oe.unprivilegedEditor):ue==="selection-change"&&((Se=(ye=oe).onEditorChangeSelection)===null||Se===void 0||Se.call(ye,Ae,xe,oe.unprivilegedEditor))};var ce=oe.isControlled()?ne.value:ne.defaultValue;return oe.value=ce??"",oe}return J.prototype.validateProps=function(ne){var oe;if(react_1.default.Children.count(ne.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(react_1.default.Children.count(ne.children)){var ce=react_1.default.Children.only(ne.children);if(((oe=ce)===null||oe===void 0?void 0:oe.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&ne.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},J.prototype.shouldComponentUpdate=function(ne,oe){var ce=this,ue;if(this.validateProps(ne),!this.editor||this.state.generation!==oe.generation)return!0;if("value"in ne){var Ae=this.getEditorContents(),pe=(ue=ne.value,ue??"");this.isEqualValue(pe,Ae)||this.setEditorContents(this.editor,pe)}return ne.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,ne.readOnly),__spreadArrays(this.cleanProps,this.dirtyProps).some(function(xe){return!isEqual_1.default(ne[xe],ce.props[xe])})},J.prototype.shouldComponentRegenerate=function(ne){var oe=this;return this.dirtyProps.some(function(ce){return!isEqual_1.default(ne[ce],oe.props[ce])})},J.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},J.prototype.componentWillUnmount=function(){this.destroyEditor()},J.prototype.componentDidUpdate=function(ne,oe){var ce=this;if(this.editor&&this.shouldComponentRegenerate(ne)){var ue=this.editor.getContents(),Ae=this.editor.getSelection();this.regenerationSnapshot={delta:ue,selection:Ae},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==oe.generation){var pe=this.regenerationSnapshot,ue=pe.delta,xe=pe.selection;delete this.regenerationSnapshot,this.instantiateEditor();var me=this.editor;me.setContents(ue),postpone(function(){return ce.setEditorSelection(me,xe)})}},J.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},J.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},J.prototype.isControlled=function(){return"value"in this.props},J.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},J.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},J.prototype.createEditor=function(ne,oe){var ce=new quill_1.default(ne,oe);return oe.tabIndex!=null&&this.setEditorTabIndex(ce,oe.tabIndex),this.hookEditor(ce),ce},J.prototype.hookEditor=function(ne){this.unprivilegedEditor=this.makeUnprivilegedEditor(ne),ne.on("editor-change",this.onEditorChange)},J.prototype.unhookEditor=function(ne){ne.off("editor-change",this.onEditorChange)},J.prototype.getEditorContents=function(){return this.value},J.prototype.getEditorSelection=function(){return this.selection},J.prototype.isDelta=function(ne){return ne&&ne.ops},J.prototype.isEqualValue=function(ne,oe){return this.isDelta(ne)&&this.isDelta(oe)?isEqual_1.default(ne.ops,oe.ops):isEqual_1.default(ne,oe)},J.prototype.setEditorContents=function(ne,oe){var ce=this;this.value=oe;var ue=this.getEditorSelection();typeof oe=="string"?ne.setContents(ne.clipboard.convert(oe)):ne.setContents(oe),postpone(function(){return ce.setEditorSelection(ne,ue)})},J.prototype.setEditorSelection=function(ne,oe){if(this.selection=oe,oe){var ce=ne.getLength();oe.index=Math.max(0,Math.min(oe.index,ce-1)),oe.length=Math.max(0,Math.min(oe.length,ce-1-oe.index)),ne.setSelection(oe)}},J.prototype.setEditorTabIndex=function(ne,oe){var ce,ue;!((ue=(ce=ne)===null||ce===void 0?void 0:ce.scroll)===null||ue===void 0)&&ue.domNode&&(ne.scroll.domNode.tabIndex=oe)},J.prototype.setEditorReadOnly=function(ne,oe){oe?ne.disable():ne.enable()},J.prototype.makeUnprivilegedEditor=function(ne){var oe=ne;return{getHTML:function(){return oe.root.innerHTML},getLength:oe.getLength.bind(oe),getText:oe.getText.bind(oe),getContents:oe.getContents.bind(oe),getSelection:oe.getSelection.bind(oe),getBounds:oe.getBounds.bind(oe)}},J.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var ne=react_dom_1.default.findDOMNode(this.editingArea);if(!ne)throw new Error("Cannot find element for editing area");if(ne.nodeType===3)throw new Error("Editing area cannot be a text node");return ne},J.prototype.renderEditingArea=function(){var ne=this,oe=this.props,ce=oe.children,ue=oe.preserveWhitespace,Ae=this.state.generation,pe={key:Ae,ref:function(xe){ne.editingArea=xe}};return react_1.default.Children.count(ce)?react_1.default.cloneElement(react_1.default.Children.only(ce),pe):ue?react_1.default.createElement("pre",__assign({},pe)):react_1.default.createElement("div",__assign({},pe))},J.prototype.render=function(){var ne;return react_1.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(ne=this.props.className,ne??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},J.prototype.onEditorChangeText=function(ne,oe,ce,ue){var Ae,pe;if(this.editor){var xe=this.isDelta(this.value)?ue.getContents():ue.getHTML();xe!==this.getEditorContents()&&(this.lastDeltaChangeSet=oe,this.value=xe,(pe=(Ae=this.props).onChange)===null||pe===void 0||pe.call(Ae,ne,oe,ce,ue))}},J.prototype.onEditorChangeSelection=function(ne,oe,ce){var ue,Ae,pe,xe,me,ge;if(this.editor){var ye=this.getEditorSelection(),Se=!ye&&ne,Te=ye&&!ne;isEqual_1.default(ne,ye)||(this.selection=ne,(Ae=(ue=this.props).onChangeSelection)===null||Ae===void 0||Ae.call(ue,ne,oe,ce),Se?(xe=(pe=this.props).onFocus)===null||xe===void 0||xe.call(pe,ne,oe,ce):Te&&((ge=(me=this.props).onBlur)===null||ge===void 0||ge.call(me,ye,oe,ce)))}},J.prototype.focus=function(){this.editor&&this.editor.focus()},J.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},J.displayName="React Quill",J.Quill=quill_1.default,J.defaultProps={theme:"snow",modules:{},readOnly:!1},J}(react_1.default.Component);function postpone(K){Promise.resolve().then(K)}var lib$1=ReactQuill;const ReactQuill$1=getDefaultExportFromCjs(lib$1),TextareaSelectedFiles=({selectedFiles:K,handleRemoveFile:J})=>jsxRuntimeExports.jsx("div",{className:"send-feedback-files",children:K.map((ne,oe)=>jsxRuntimeExports.jsxs("div",{className:"send-feedback-files__item",children:[jsxRuntimeExports.jsx("span",{className:"send-feedback-files__label",children:ne.name}),jsxRuntimeExports.jsx(_c,{onClick:()=>J(ne.name),className:"send-feedback-files__icon"})]},oe))}),icons=lib$1.Quill.import("ui/icons"),QuillToolbar=()=>(Object.keys(icons).forEach(K=>{icons[K]=null}),jsxRuntimeExports.jsxs("div",{id:"quillToolbar",className:"quill-toolbar",children:[jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(pB,{}),className:"ql-bold"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(hB,{}),className:"ql-italic"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(CB$1,{}),className:"ql-underline"}),jsxRuntimeExports.jsx("div",{className:"quill-toolbar__divider"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(bB,{}),className:"ql-align ql-active",value:""}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(yB,{}),className:"ql-align",value:"center"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(xB,{}),className:"ql-align",value:"right"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(wB,{}),className:"ql-align",value:"justify"}),jsxRuntimeExports.jsx("div",{className:"quill-toolbar__divider"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(SB,{}),className:"ql-list",value:"ordered"}),jsxRuntimeExports.jsx("div",{className:"quill-toolbar__divider"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(CT,{}),className:"ql-image"}),jsxRuntimeExports.jsx("div",{className:"quill-toolbar__divider"}),jsxRuntimeExports.jsx(rl,{variant:"ghost",type:"secondary",iconBefore:jsxRuntimeExports.jsx(EB$1,{}),className:"ql-clean"})]})),logsQuillFormats=["bold","italic","underline","align","list","image"],container$6="_container_5cki3_1",textarea="_textarea_5cki3_13",validationMessage="_validationMessage_5cki3_25",styles$e={container:container$6,textarea,validationMessage},TextareaFormatting=({value:K,setFeedbackTextareaValue:J,feedbackFiles:ne,setFeedbackFiles:oe})=>{const{t:ce}=useTranslation(),ue=reactExports.useRef(null),[Ae,pe]=reactExports.useState(null),xe=()=>{const ge=document.createElement("input");ge.setAttribute("type","file"),ge.click(),ge.onchange=()=>{const ye=ge.files[0];oe(Se=>[...Se,ye])}};reactExports.useEffect(()=>{document.getElementById("quillToolbar")&&pe({toolbar:{container:"#quillToolbar",handlers:{image:xe}}})},[]);const me=ge=>{const ye=ne.filter(Se=>Se.name!==ge);oe(ye)};return jsxRuntimeExports.jsxs("div",{className:styles$e.container,children:[jsxRuntimeExports.jsx(QuillToolbar,{}),Ae&&jsxRuntimeExports.jsx(ReactQuill$1,{ref:ue,modules:Ae,formats:logsQuillFormats,value:K,onChange:J,placeholder:ce("sendFeedbackModal.textareaPlaceholder")||"",className:styles$e.textarea}),ne.length!==0&&jsxRuntimeExports.jsx(TextareaSelectedFiles,{selectedFiles:ne,handleRemoveFile:me})]})},DEFAULT_EMAIL_TO="team@compatibl.com",SendFeedbackButton=()=>{const{t:K}=useTranslation(),J=useSelector$1(selectActiveDataset$1),ne=useSelector$1(selectUser),[oe,{toggle:ce}]=useBoolean(),[ue,Ae]=reactExports.useState(null),[pe,xe]=reactExports.useState([]),[me,ge]=reactExports.useState(!0);reactExports.useEffect(()=>{oe||(Ae(null),xe([]))},[oe]);const ye=je=>{var Ye;if(((Ye=je.EmailTo)==null?void 0:Ye.length)===0)return;const Ke={Type:HandlerRunTypeEnum.UI_SUPPORT_UTIL,Method:"SendFeedback",Keys:[],Arguments:je,Dataset:J,userName:ne==null?void 0:ne.username};handlerApi.handlerRun(Ke).catch(ze=>{toast.error(ze)})},Se=async()=>{const je=await Promise.all(pe.map(async Ke=>{const Ye=await fileToBase64$1(Ke);return{Name:Ke.name,FileBytes:Ye,_t:"FileData"}}));ye({EmailTo:ue==null?void 0:ue.emailTo,Subject:ue==null?void 0:ue.subject,Body:ue==null?void 0:ue.body,Attachments:je,IncludeLogs:me})},Te=async()=>{const je=await $e(),Ke=await fileToBase64$1(je),Ye={Type:HandlerRunTypeEnum.UI_SUPPORT_UTIL,Method:"GetFeedbackFormDetails",Dataset:J,userName:ne==null?void 0:ne.username};handlerApi.handlerRun(Ye).then(ze=>{if(isNullable(ze[0].Result))return;const{EmailTo:Xe,Subject:Je,Body:rt,Interactive:Ze}=ze[0].Result,et=Xe!=null&&Xe.length?Xe:[DEFAULT_EMAIL_TO];if(Ze)Ae({emailTo:et,subject:Je||"",body:rt||""}),ce();else{const{Subject:nt,Body:Ge}=ze[0].Result;ye({Subject:nt,Body:Ge,IncludeLogs:!0,Attachments:[{Name:je.name,FileBytes:Ke,_t:"FileData"}]})}}).catch(ze=>{toast.error(ze)})},Ne=()=>{Se(),ce()},$e=async()=>{const Ke=(await html2canvas(document.body,{useCORS:!0,allowTaint:!0,scrollY:-window.scrollY,windowWidth:document.documentElement.scrollWidth,windowHeight:document.documentElement.scrollHeight})).toDataURL("image/png"),ze=`screenshot_${DateFormatUtility.create().format(DateFormatEnum.DATE_TIME_MS)}.png`,Xe=ke(Ke,ze);return xe(Je=>[...Je,Xe]),Xe},ke=(je,Ke)=>{var Ze;const Ye=je.split(","),ze=((Ze=Ye[0].match(/:(.*?);/))==null?void 0:Ze[1])||"image/png",Xe=atob(Ye[1]);let Je=Xe.length;const rt=new Uint8Array(Je);for(;Je--;)rt[Je]=Xe.charCodeAt(Je);return new File([rt],Ke,{type:ze})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(mf,{title:K("header.sendFeedback"),children:jsxRuntimeExports.jsx(rl,{"data-tid":"send-feedback-button",type:"transparent",variant:"ghost",size:"sm",onClick:Te,iconBefore:jsxRuntimeExports.jsx(RD,{width:"20",height:"20"})})}),jsxRuntimeExports.jsxs(Ho,{defaultHeight:400,title:K("sendFeedbackModal.feedback"),open:oe,onClose:ce,children:[jsxRuntimeExports.jsxs(Ho.Body,{className:"send-feedback-modal__content",children:[jsxRuntimeExports.jsxs("div",{className:"send-feedback-modal__input",children:[jsxRuntimeExports.jsx(InputTitle,{title:K("sendFeedbackModal.to")}),jsxRuntimeExports.jsx(ToField,{emailTags:ue==null?void 0:ue.emailTo,setEmailTags:je=>Ae({...ue,emailTo:je})})]}),jsxRuntimeExports.jsxs("div",{className:"send-feedback-modal__input",children:[jsxRuntimeExports.jsx(InputTitle,{title:K("sendFeedbackModal.subject")}),jsxRuntimeExports.jsx(Ml,{variant:"outlined",value:ue==null?void 0:ue.subject,onChange:je=>Ae({...ue,subject:je})})]}),jsxRuntimeExports.jsx(TextareaFormatting,{value:(ue==null?void 0:ue.body)||"",setFeedbackTextareaValue:je=>Ae({...ue,body:je}),feedbackFiles:pe,setFeedbackFiles:xe})]}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"send-feedback",okText:K("buttons.send"),cancelText:K("buttons.cancel"),onOk:Ne,onCancel:ce,renderFooterActions:({cancelBtn:je,okBtn:Ke})=>jsxRuntimeExports.jsxs("div",{className:"send-feedback-modal__footer",children:[jsxRuntimeExports.jsxs("div",{className:"send-feedback-modal__checkbox-wrapper",onClick:Ye=>{Ye.preventDefault(),ge(!me)},children:[jsxRuntimeExports.jsx(pF,{value:me}),K("sendFeedbackModal.attachLogs")]}),jsxRuntimeExports.jsxs("div",{className:"send-feedback-modal__footer-btn",children:[Ke,je]})]})})]})]})},Copy=({textToCopy:K,className:J,testid:ne})=>{const oe=reactExports.useRef(),{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(!1),pe=reactExports.useCallback(()=>{ue||(clearTimeout(oe.current),addDataToClickboard(K).then(()=>Ae(!0)).then(()=>{oe.current=setTimeout(()=>Ae(!1),3e3)}))},[ue,K]);return reactExports.useEffect(()=>()=>clearTimeout(oe.current),[]),jsxRuntimeExports.jsx(mf,{title:ce(ue?"shared.copied":"shared.copy"),className:J,children:jsxRuntimeExports.jsx(rl,{"data-tid":ne,type:ue?"success":"secondary",variant:"ghost",size:"sm",onClick:pe,iconBefore:ue?jsxRuntimeExports.jsx(Ek,{}):jsxRuntimeExports.jsx(jk,{})})})},container$5="_container_1ku9l_1",clickable="_clickable_1ku9l_9",chatContainer="_chatContainer_1ku9l_13",styles$d={container:container$5,clickable,chatContainer},UserInitials=({clickable:K,chatIcon:J=!1,className:ne,onClick:oe})=>jsxRuntimeExports.jsx("div",{"data-tid":"user-initials",className:cx(styles$d.container,{[styles$d.clickable]:K,[styles$d.chatContainer]:J},ne),onClick:oe,children:jsxRuntimeExports.jsx(IA,{width:"20",height:"20"})}),menu="_menu_1o9m7_1",header$1="_header_1o9m7_6",headerInfo="_headerInfo_1o9m7_18",fullName="_fullName_1o9m7_24",email="_email_1o9m7_32",content$1="_content_1o9m7_39",userInitials="_userInitials_1o9m7_47",dropdownRow="_dropdownRow_1o9m7_51",userContent="_userContent_1o9m7_57",myKeysContent="_myKeysContent_1o9m7_65",styles$c={menu,header:header$1,headerInfo,fullName,email,content:content$1,userInitials,dropdownRow,userContent,myKeysContent},row="_row_o96jx_1",label$1="_label_o96jx_7",select="_select_o96jx_17",styles$b={row,label:label$1,select},DropdownRow=({label:K,selectedOptionKey:J,options:ne,onChange:oe,testid:ce})=>{const ue=ne.find(({value:Ae})=>Ae===J);return jsxRuntimeExports.jsxs("div",{className:styles$b.row,children:[jsxRuntimeExports.jsx("div",{className:styles$b.label,children:K}),jsxRuntimeExports.jsx(xF,{className:styles$b.select,testid:ce,variant:"outlined",options:ne,value:ue==null?void 0:ue.label,onChange:oe})]})},DEFAULT_USER_KEYS_EXPIRE=30,AVAIABLE_LANGUAGES=[{key:"eng",label:"English(US)",value:"eng"}],UserExpire=parseInt(env.userKeyExpire||DEFAULT_USER_KEYS_EXPIRE),THIRTY_DAYS_MS=UserExpire*24*60*60*1e3,keysDescriptionArr=Array.from({length:5},(K,J)=>({id:J+1,content:`header.userInfo.secrets.point${J+1}`}));var forge$D={options:{usePureJavaScript:!1}},api$1={},baseN$1=api$1,_reverseAlphabets={};api$1.encode=function(K,J,ne){if(typeof J!="string")throw new TypeError('"alphabet" must be a string.');if(ne!==void 0&&typeof ne!="number")throw new TypeError('"maxline" must be a number.');var oe="";if(!(K instanceof Uint8Array))oe=_encodeWithByteBuffer(K,J);else{var ce=0,ue=J.length,Ae=J.charAt(0),pe=[0];for(ce=0;ce<K.length;++ce){for(var xe=0,me=K[ce];xe<pe.length;++xe)me+=pe[xe]<<8,pe[xe]=me%ue,me=me/ue|0;for(;me>0;)pe.push(me%ue),me=me/ue|0}for(ce=0;K[ce]===0&&ce<K.length-1;++ce)oe+=Ae;for(ce=pe.length-1;ce>=0;--ce)oe+=J[pe[ce]]}if(ne){var ge=new RegExp(".{1,"+ne+"}","g");oe=oe.match(ge).join(`\r
`)}return oe};api$1.decode=function(K,J){if(typeof K!="string")throw new TypeError('"input" must be a string.');if(typeof J!="string")throw new TypeError('"alphabet" must be a string.');var ne=_reverseAlphabets[J];if(!ne){ne=_reverseAlphabets[J]=[];for(var oe=0;oe<J.length;++oe)ne[J.charCodeAt(oe)]=oe}K=K.replace(/\s/g,"");for(var ce=J.length,ue=J.charAt(0),Ae=[0],oe=0;oe<K.length;oe++){var pe=ne[K.charCodeAt(oe)];if(pe===void 0)return;for(var xe=0,me=pe;xe<Ae.length;++xe)me+=Ae[xe]*ce,Ae[xe]=me&255,me>>=8;for(;me>0;)Ae.push(me&255),me>>=8}for(var ge=0;K[ge]===ue&&ge<K.length-1;++ge)Ae.push(0);return typeof Buffer<"u"?Buffer.from(Ae.reverse()):new Uint8Array(Ae.reverse())};function _encodeWithByteBuffer(K,J){var ne=0,oe=J.length,ce=J.charAt(0),ue=[0];for(ne=0;ne<K.length();++ne){for(var Ae=0,pe=K.at(ne);Ae<ue.length;++Ae)pe+=ue[Ae]<<8,ue[Ae]=pe%oe,pe=pe/oe|0;for(;pe>0;)ue.push(pe%oe),pe=pe/oe|0}var xe="";for(ne=0;K.at(ne)===0&&ne<K.length()-1;++ne)xe+=ce;for(ne=ue.length-1;ne>=0;--ne)xe+=J[ue[ne]];return xe}var forge$C=forge$D,baseN=baseN$1,util$2=forge$C.util=forge$C.util||{};(function(){if(typeof process$1<"u"&&process$1.nextTick&&!process$1.browser){util$2.nextTick=process$1.nextTick,typeof setImmediate=="function"?util$2.setImmediate=setImmediate:util$2.setImmediate=util$2.nextTick;return}if(typeof setImmediate=="function"){util$2.setImmediate=function(){return setImmediate.apply(void 0,arguments)},util$2.nextTick=function(Ae){return setImmediate(Ae)};return}if(util$2.setImmediate=function(Ae){setTimeout(Ae,0)},typeof window<"u"&&typeof window.postMessage=="function"){let Ae=function(pe){if(pe.source===window&&pe.data===K){pe.stopPropagation();var xe=J.slice();J.length=0,xe.forEach(function(me){me()})}};var K="forge.setImmediate",J=[];util$2.setImmediate=function(pe){J.push(pe),J.length===1&&window.postMessage(K,"*")},window.addEventListener("message",Ae,!0)}if(typeof MutationObserver<"u"){var ne=Date.now(),oe=!0,ce=document.createElement("div"),J=[];new MutationObserver(function(){var pe=J.slice();J.length=0,pe.forEach(function(xe){xe()})}).observe(ce,{attributes:!0});var ue=util$2.setImmediate;util$2.setImmediate=function(pe){Date.now()-ne>15?(ne=Date.now(),ue(pe)):(J.push(pe),J.length===1&&ce.setAttribute("a",oe=!oe))}}util$2.nextTick=util$2.setImmediate})();util$2.isNodejs=typeof process$1<"u"&&process$1.versions&&process$1.versions.node;util$2.globalScope=function(){return util$2.isNodejs?commonjsGlobal:typeof self>"u"?window:self}();util$2.isArray=Array.isArray||function(K){return Object.prototype.toString.call(K)==="[object Array]"};util$2.isArrayBuffer=function(K){return typeof ArrayBuffer<"u"&&K instanceof ArrayBuffer};util$2.isArrayBufferView=function(K){return K&&util$2.isArrayBuffer(K.buffer)&&K.byteLength!==void 0};function _checkBitsParam(K){if(!(K===8||K===16||K===24||K===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+K)}util$2.ByteBuffer=ByteStringBuffer;function ByteStringBuffer(K){if(this.data="",this.read=0,typeof K=="string")this.data=K;else if(util$2.isArrayBuffer(K)||util$2.isArrayBufferView(K))if(typeof Buffer<"u"&&K instanceof Buffer)this.data=K.toString("binary");else{var J=new Uint8Array(K);try{this.data=String.fromCharCode.apply(null,J)}catch{for(var ne=0;ne<J.length;++ne)this.putByte(J[ne])}}else(K instanceof ByteStringBuffer||typeof K=="object"&&typeof K.data=="string"&&typeof K.read=="number")&&(this.data=K.data,this.read=K.read);this._constructedStringLength=0}util$2.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;util$2.ByteStringBuffer.prototype._optimizeConstructedString=function(K){this._constructedStringLength+=K,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)};util$2.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};util$2.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};util$2.ByteStringBuffer.prototype.putByte=function(K){return this.putBytes(String.fromCharCode(K))};util$2.ByteStringBuffer.prototype.fillWithByte=function(K,J){K=String.fromCharCode(K);for(var ne=this.data;J>0;)J&1&&(ne+=K),J>>>=1,J>0&&(K+=K);return this.data=ne,this._optimizeConstructedString(J),this};util$2.ByteStringBuffer.prototype.putBytes=function(K){return this.data+=K,this._optimizeConstructedString(K.length),this};util$2.ByteStringBuffer.prototype.putString=function(K){return this.putBytes(util$2.encodeUtf8(K))};util$2.ByteStringBuffer.prototype.putInt16=function(K){return this.putBytes(String.fromCharCode(K>>8&255)+String.fromCharCode(K&255))};util$2.ByteStringBuffer.prototype.putInt24=function(K){return this.putBytes(String.fromCharCode(K>>16&255)+String.fromCharCode(K>>8&255)+String.fromCharCode(K&255))};util$2.ByteStringBuffer.prototype.putInt32=function(K){return this.putBytes(String.fromCharCode(K>>24&255)+String.fromCharCode(K>>16&255)+String.fromCharCode(K>>8&255)+String.fromCharCode(K&255))};util$2.ByteStringBuffer.prototype.putInt16Le=function(K){return this.putBytes(String.fromCharCode(K&255)+String.fromCharCode(K>>8&255))};util$2.ByteStringBuffer.prototype.putInt24Le=function(K){return this.putBytes(String.fromCharCode(K&255)+String.fromCharCode(K>>8&255)+String.fromCharCode(K>>16&255))};util$2.ByteStringBuffer.prototype.putInt32Le=function(K){return this.putBytes(String.fromCharCode(K&255)+String.fromCharCode(K>>8&255)+String.fromCharCode(K>>16&255)+String.fromCharCode(K>>24&255))};util$2.ByteStringBuffer.prototype.putInt=function(K,J){_checkBitsParam(J);var ne="";do J-=8,ne+=String.fromCharCode(K>>J&255);while(J>0);return this.putBytes(ne)};util$2.ByteStringBuffer.prototype.putSignedInt=function(K,J){return K<0&&(K+=2<<J-1),this.putInt(K,J)};util$2.ByteStringBuffer.prototype.putBuffer=function(K){return this.putBytes(K.getBytes())};util$2.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};util$2.ByteStringBuffer.prototype.getInt16=function(){var K=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,K};util$2.ByteStringBuffer.prototype.getInt24=function(){var K=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,K};util$2.ByteStringBuffer.prototype.getInt32=function(){var K=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,K};util$2.ByteStringBuffer.prototype.getInt16Le=function(){var K=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,K};util$2.ByteStringBuffer.prototype.getInt24Le=function(){var K=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,K};util$2.ByteStringBuffer.prototype.getInt32Le=function(){var K=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,K};util$2.ByteStringBuffer.prototype.getInt=function(K){_checkBitsParam(K);var J=0;do J=(J<<8)+this.data.charCodeAt(this.read++),K-=8;while(K>0);return J};util$2.ByteStringBuffer.prototype.getSignedInt=function(K){var J=this.getInt(K),ne=2<<K-2;return J>=ne&&(J-=ne<<1),J};util$2.ByteStringBuffer.prototype.getBytes=function(K){var J;return K?(K=Math.min(this.length(),K),J=this.data.slice(this.read,this.read+K),this.read+=K):K===0?J="":(J=this.read===0?this.data:this.data.slice(this.read),this.clear()),J};util$2.ByteStringBuffer.prototype.bytes=function(K){return typeof K>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+K)};util$2.ByteStringBuffer.prototype.at=function(K){return this.data.charCodeAt(this.read+K)};util$2.ByteStringBuffer.prototype.setAt=function(K,J){return this.data=this.data.substr(0,this.read+K)+String.fromCharCode(J)+this.data.substr(this.read+K+1),this};util$2.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};util$2.ByteStringBuffer.prototype.copy=function(){var K=util$2.createBuffer(this.data);return K.read=this.read,K};util$2.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};util$2.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};util$2.ByteStringBuffer.prototype.truncate=function(K){var J=Math.max(0,this.length()-K);return this.data=this.data.substr(this.read,J),this.read=0,this};util$2.ByteStringBuffer.prototype.toHex=function(){for(var K="",J=this.read;J<this.data.length;++J){var ne=this.data.charCodeAt(J);ne<16&&(K+="0"),K+=ne.toString(16)}return K};util$2.ByteStringBuffer.prototype.toString=function(){return util$2.decodeUtf8(this.bytes())};function DataBuffer(K,J){J=J||{},this.read=J.readOffset||0,this.growSize=J.growSize||1024;var ne=util$2.isArrayBuffer(K),oe=util$2.isArrayBufferView(K);if(ne||oe){ne?this.data=new DataView(K):this.data=new DataView(K.buffer,K.byteOffset,K.byteLength),this.write="writeOffset"in J?J.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,K!=null&&this.putBytes(K),"writeOffset"in J&&(this.write=J.writeOffset)}util$2.DataBuffer=DataBuffer;util$2.DataBuffer.prototype.length=function(){return this.write-this.read};util$2.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};util$2.DataBuffer.prototype.accommodate=function(K,J){if(this.length()>=K)return this;J=Math.max(J||this.growSize,K);var ne=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),oe=new Uint8Array(this.length()+J);return oe.set(ne),this.data=new DataView(oe.buffer),this};util$2.DataBuffer.prototype.putByte=function(K){return this.accommodate(1),this.data.setUint8(this.write++,K),this};util$2.DataBuffer.prototype.fillWithByte=function(K,J){this.accommodate(J);for(var ne=0;ne<J;++ne)this.data.setUint8(K);return this};util$2.DataBuffer.prototype.putBytes=function(K,J){if(util$2.isArrayBufferView(K)){var ne=new Uint8Array(K.buffer,K.byteOffset,K.byteLength),oe=ne.byteLength-ne.byteOffset;this.accommodate(oe);var ce=new Uint8Array(this.data.buffer,this.write);return ce.set(ne),this.write+=oe,this}if(util$2.isArrayBuffer(K)){var ne=new Uint8Array(K);this.accommodate(ne.byteLength);var ce=new Uint8Array(this.data.buffer);return ce.set(ne,this.write),this.write+=ne.byteLength,this}if(K instanceof util$2.DataBuffer||typeof K=="object"&&typeof K.read=="number"&&typeof K.write=="number"&&util$2.isArrayBufferView(K.data)){var ne=new Uint8Array(K.data.byteLength,K.read,K.length());this.accommodate(ne.byteLength);var ce=new Uint8Array(K.data.byteLength,this.write);return ce.set(ne),this.write+=ne.byteLength,this}if(K instanceof util$2.ByteStringBuffer&&(K=K.data,J="binary"),J=J||"binary",typeof K=="string"){var ue;if(J==="hex")return this.accommodate(Math.ceil(K.length/2)),ue=new Uint8Array(this.data.buffer,this.write),this.write+=util$2.binary.hex.decode(K,ue,this.write),this;if(J==="base64")return this.accommodate(Math.ceil(K.length/4)*3),ue=new Uint8Array(this.data.buffer,this.write),this.write+=util$2.binary.base64.decode(K,ue,this.write),this;if(J==="utf8"&&(K=util$2.encodeUtf8(K),J="binary"),J==="binary"||J==="raw")return this.accommodate(K.length),ue=new Uint8Array(this.data.buffer,this.write),this.write+=util$2.binary.raw.decode(ue),this;if(J==="utf16")return this.accommodate(K.length*2),ue=new Uint16Array(this.data.buffer,this.write),this.write+=util$2.text.utf16.encode(ue),this;throw new Error("Invalid encoding: "+J)}throw Error("Invalid parameter: "+K)};util$2.DataBuffer.prototype.putBuffer=function(K){return this.putBytes(K),K.clear(),this};util$2.DataBuffer.prototype.putString=function(K){return this.putBytes(K,"utf16")};util$2.DataBuffer.prototype.putInt16=function(K){return this.accommodate(2),this.data.setInt16(this.write,K),this.write+=2,this};util$2.DataBuffer.prototype.putInt24=function(K){return this.accommodate(3),this.data.setInt16(this.write,K>>8&65535),this.data.setInt8(this.write,K>>16&255),this.write+=3,this};util$2.DataBuffer.prototype.putInt32=function(K){return this.accommodate(4),this.data.setInt32(this.write,K),this.write+=4,this};util$2.DataBuffer.prototype.putInt16Le=function(K){return this.accommodate(2),this.data.setInt16(this.write,K,!0),this.write+=2,this};util$2.DataBuffer.prototype.putInt24Le=function(K){return this.accommodate(3),this.data.setInt8(this.write,K>>16&255),this.data.setInt16(this.write,K>>8&65535,!0),this.write+=3,this};util$2.DataBuffer.prototype.putInt32Le=function(K){return this.accommodate(4),this.data.setInt32(this.write,K,!0),this.write+=4,this};util$2.DataBuffer.prototype.putInt=function(K,J){_checkBitsParam(J),this.accommodate(J/8);do J-=8,this.data.setInt8(this.write++,K>>J&255);while(J>0);return this};util$2.DataBuffer.prototype.putSignedInt=function(K,J){return _checkBitsParam(J),this.accommodate(J/8),K<0&&(K+=2<<J-1),this.putInt(K,J)};util$2.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};util$2.DataBuffer.prototype.getInt16=function(){var K=this.data.getInt16(this.read);return this.read+=2,K};util$2.DataBuffer.prototype.getInt24=function(){var K=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,K};util$2.DataBuffer.prototype.getInt32=function(){var K=this.data.getInt32(this.read);return this.read+=4,K};util$2.DataBuffer.prototype.getInt16Le=function(){var K=this.data.getInt16(this.read,!0);return this.read+=2,K};util$2.DataBuffer.prototype.getInt24Le=function(){var K=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,K};util$2.DataBuffer.prototype.getInt32Le=function(){var K=this.data.getInt32(this.read,!0);return this.read+=4,K};util$2.DataBuffer.prototype.getInt=function(K){_checkBitsParam(K);var J=0;do J=(J<<8)+this.data.getInt8(this.read++),K-=8;while(K>0);return J};util$2.DataBuffer.prototype.getSignedInt=function(K){var J=this.getInt(K),ne=2<<K-2;return J>=ne&&(J-=ne<<1),J};util$2.DataBuffer.prototype.getBytes=function(K){var J;return K?(K=Math.min(this.length(),K),J=this.data.slice(this.read,this.read+K),this.read+=K):K===0?J="":(J=this.read===0?this.data:this.data.slice(this.read),this.clear()),J};util$2.DataBuffer.prototype.bytes=function(K){return typeof K>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+K)};util$2.DataBuffer.prototype.at=function(K){return this.data.getUint8(this.read+K)};util$2.DataBuffer.prototype.setAt=function(K,J){return this.data.setUint8(K,J),this};util$2.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};util$2.DataBuffer.prototype.copy=function(){return new util$2.DataBuffer(this)};util$2.DataBuffer.prototype.compact=function(){if(this.read>0){var K=new Uint8Array(this.data.buffer,this.read),J=new Uint8Array(K.byteLength);J.set(K),this.data=new DataView(J),this.write-=this.read,this.read=0}return this};util$2.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};util$2.DataBuffer.prototype.truncate=function(K){return this.write=Math.max(0,this.length()-K),this.read=Math.min(this.read,this.write),this};util$2.DataBuffer.prototype.toHex=function(){for(var K="",J=this.read;J<this.data.byteLength;++J){var ne=this.data.getUint8(J);ne<16&&(K+="0"),K+=ne.toString(16)}return K};util$2.DataBuffer.prototype.toString=function(K){var J=new Uint8Array(this.data,this.read,this.length());if(K=K||"utf8",K==="binary"||K==="raw")return util$2.binary.raw.encode(J);if(K==="hex")return util$2.binary.hex.encode(J);if(K==="base64")return util$2.binary.base64.encode(J);if(K==="utf8")return util$2.text.utf8.decode(J);if(K==="utf16")return util$2.text.utf16.decode(J);throw new Error("Invalid encoding: "+K)};util$2.createBuffer=function(K,J){return J=J||"raw",K!==void 0&&J==="utf8"&&(K=util$2.encodeUtf8(K)),new util$2.ByteBuffer(K)};util$2.fillString=function(K,J){for(var ne="";J>0;)J&1&&(ne+=K),J>>>=1,J>0&&(K+=K);return ne};util$2.xorBytes=function(K,J,ne){for(var oe="",ce="",ue="",Ae=0,pe=0;ne>0;--ne,++Ae)ce=K.charCodeAt(Ae)^J.charCodeAt(Ae),pe>=10&&(oe+=ue,ue="",pe=0),ue+=String.fromCharCode(ce),++pe;return oe+=ue,oe};util$2.hexToBytes=function(K){var J="",ne=0;for(K.length&!0&&(ne=1,J+=String.fromCharCode(parseInt(K[0],16)));ne<K.length;ne+=2)J+=String.fromCharCode(parseInt(K.substr(ne,2),16));return J};util$2.bytesToHex=function(K){return util$2.createBuffer(K).toHex()};util$2.int32ToBytes=function(K){return String.fromCharCode(K>>24&255)+String.fromCharCode(K>>16&255)+String.fromCharCode(K>>8&255)+String.fromCharCode(K&255)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";util$2.encode64=function(K,J){for(var ne="",oe="",ce,ue,Ae,pe=0;pe<K.length;)ce=K.charCodeAt(pe++),ue=K.charCodeAt(pe++),Ae=K.charCodeAt(pe++),ne+=_base64.charAt(ce>>2),ne+=_base64.charAt((ce&3)<<4|ue>>4),isNaN(ue)?ne+="==":(ne+=_base64.charAt((ue&15)<<2|Ae>>6),ne+=isNaN(Ae)?"=":_base64.charAt(Ae&63)),J&&ne.length>J&&(oe+=ne.substr(0,J)+`\r
`,ne=ne.substr(J));return oe+=ne,oe};util$2.decode64=function(K){K=K.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var J="",ne,oe,ce,ue,Ae=0;Ae<K.length;)ne=_base64Idx[K.charCodeAt(Ae++)-43],oe=_base64Idx[K.charCodeAt(Ae++)-43],ce=_base64Idx[K.charCodeAt(Ae++)-43],ue=_base64Idx[K.charCodeAt(Ae++)-43],J+=String.fromCharCode(ne<<2|oe>>4),ce!==64&&(J+=String.fromCharCode((oe&15)<<4|ce>>2),ue!==64&&(J+=String.fromCharCode((ce&3)<<6|ue)));return J};util$2.encodeUtf8=function(K){return unescape(encodeURIComponent(K))};util$2.decodeUtf8=function(K){return decodeURIComponent(escape(K))};util$2.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}};util$2.binary.raw.encode=function(K){return String.fromCharCode.apply(null,K)};util$2.binary.raw.decode=function(K,J,ne){var oe=J;oe||(oe=new Uint8Array(K.length)),ne=ne||0;for(var ce=ne,ue=0;ue<K.length;++ue)oe[ce++]=K.charCodeAt(ue);return J?ce-ne:oe};util$2.binary.hex.encode=util$2.bytesToHex;util$2.binary.hex.decode=function(K,J,ne){var oe=J;oe||(oe=new Uint8Array(Math.ceil(K.length/2))),ne=ne||0;var ce=0,ue=ne;for(K.length&1&&(ce=1,oe[ue++]=parseInt(K[0],16));ce<K.length;ce+=2)oe[ue++]=parseInt(K.substr(ce,2),16);return J?ue-ne:oe};util$2.binary.base64.encode=function(K,J){for(var ne="",oe="",ce,ue,Ae,pe=0;pe<K.byteLength;)ce=K[pe++],ue=K[pe++],Ae=K[pe++],ne+=_base64.charAt(ce>>2),ne+=_base64.charAt((ce&3)<<4|ue>>4),isNaN(ue)?ne+="==":(ne+=_base64.charAt((ue&15)<<2|Ae>>6),ne+=isNaN(Ae)?"=":_base64.charAt(Ae&63)),J&&ne.length>J&&(oe+=ne.substr(0,J)+`\r
`,ne=ne.substr(J));return oe+=ne,oe};util$2.binary.base64.decode=function(K,J,ne){var oe=J;oe||(oe=new Uint8Array(Math.ceil(K.length/4)*3)),K=K.replace(/[^A-Za-z0-9\+\/\=]/g,""),ne=ne||0;for(var ce,ue,Ae,pe,xe=0,me=ne;xe<K.length;)ce=_base64Idx[K.charCodeAt(xe++)-43],ue=_base64Idx[K.charCodeAt(xe++)-43],Ae=_base64Idx[K.charCodeAt(xe++)-43],pe=_base64Idx[K.charCodeAt(xe++)-43],oe[me++]=ce<<2|ue>>4,Ae!==64&&(oe[me++]=(ue&15)<<4|Ae>>2,pe!==64&&(oe[me++]=(Ae&3)<<6|pe));return J?me-ne:oe.subarray(0,me)};util$2.binary.base58.encode=function(K,J){return util$2.binary.baseN.encode(K,_base58,J)};util$2.binary.base58.decode=function(K,J){return util$2.binary.baseN.decode(K,_base58,J)};util$2.text={utf8:{},utf16:{}};util$2.text.utf8.encode=function(K,J,ne){K=util$2.encodeUtf8(K);var oe=J;oe||(oe=new Uint8Array(K.length)),ne=ne||0;for(var ce=ne,ue=0;ue<K.length;++ue)oe[ce++]=K.charCodeAt(ue);return J?ce-ne:oe};util$2.text.utf8.decode=function(K){return util$2.decodeUtf8(String.fromCharCode.apply(null,K))};util$2.text.utf16.encode=function(K,J,ne){var oe=J;oe||(oe=new Uint8Array(K.length*2));var ce=new Uint16Array(oe.buffer);ne=ne||0;for(var ue=ne,Ae=ne,pe=0;pe<K.length;++pe)ce[Ae++]=K.charCodeAt(pe),ue+=2;return J?ue-ne:oe};util$2.text.utf16.decode=function(K){return String.fromCharCode.apply(null,new Uint16Array(K.buffer))};util$2.deflate=function(K,J,ne){if(J=util$2.decode64(K.deflate(util$2.encode64(J)).rval),ne){var oe=2,ce=J.charCodeAt(1);ce&32&&(oe=6),J=J.substring(oe,J.length-4)}return J};util$2.inflate=function(K,J,ne){var oe=K.inflate(util$2.encode64(J)).rval;return oe===null?null:util$2.decode64(oe)};var _setStorageObject=function(K,J,ne){if(!K)throw new Error("WebStorage not available.");var oe;if(ne===null?oe=K.removeItem(J):(ne=util$2.encode64(JSON.stringify(ne)),oe=K.setItem(J,ne)),typeof oe<"u"&&oe.rval!==!0){var ce=new Error(oe.error.message);throw ce.id=oe.error.id,ce.name=oe.error.name,ce}},_getStorageObject=function(K,J){if(!K)throw new Error("WebStorage not available.");var ne=K.getItem(J);if(K.init)if(ne.rval===null){if(ne.error){var oe=new Error(ne.error.message);throw oe.id=ne.error.id,oe.name=ne.error.name,oe}ne=null}else ne=ne.rval;return ne!==null&&(ne=JSON.parse(util$2.decode64(ne))),ne},_setItem=function(K,J,ne,oe){var ce=_getStorageObject(K,J);ce===null&&(ce={}),ce[ne]=oe,_setStorageObject(K,J,ce)},_getItem=function(K,J,ne){var oe=_getStorageObject(K,J);return oe!==null&&(oe=ne in oe?oe[ne]:null),oe},_removeItem=function(K,J,ne){var oe=_getStorageObject(K,J);if(oe!==null&&ne in oe){delete oe[ne];var ce=!0;for(var ue in oe){ce=!1;break}ce&&(oe=null),_setStorageObject(K,J,oe)}},_clearItems=function(K,J){_setStorageObject(K,J,null)},_callStorageFunction=function(K,J,ne){var oe=null;typeof ne>"u"&&(ne=["web","flash"]);var ce,ue=!1,Ae=null;for(var pe in ne){ce=ne[pe];try{if(ce==="flash"||ce==="both"){if(J[0]===null)throw new Error("Flash local storage not available.");oe=K.apply(this,J),ue=ce==="flash"}(ce==="web"||ce==="both")&&(J[0]=localStorage,oe=K.apply(this,J),ue=!0)}catch(xe){Ae=xe}if(ue)break}if(!ue)throw Ae;return oe};util$2.setItem=function(K,J,ne,oe,ce){_callStorageFunction(_setItem,arguments,ce)};util$2.getItem=function(K,J,ne,oe){return _callStorageFunction(_getItem,arguments,oe)};util$2.removeItem=function(K,J,ne,oe){_callStorageFunction(_removeItem,arguments,oe)};util$2.clearItems=function(K,J,ne){_callStorageFunction(_clearItems,arguments,ne)};util$2.isEmpty=function(K){for(var J in K)if(K.hasOwnProperty(J))return!1;return!0};util$2.format=function(K){for(var J=/%./g,ne,oe,ce=0,ue=[],Ae=0;ne=J.exec(K);){oe=K.substring(Ae,J.lastIndex-2),oe.length>0&&ue.push(oe),Ae=J.lastIndex;var pe=ne[0][1];switch(pe){case"s":case"o":ce<arguments.length?ue.push(arguments[ce+++1]):ue.push("<?>");break;case"%":ue.push("%");break;default:ue.push("<%"+pe+"?>")}}return ue.push(K.substring(Ae)),ue.join("")};util$2.formatNumber=function(K,J,ne,oe){var ce=K,ue=isNaN(J=Math.abs(J))?2:J,Ae=ne===void 0?",":ne,pe=oe===void 0?".":oe,xe=ce<0?"-":"",me=parseInt(ce=Math.abs(+ce||0).toFixed(ue),10)+"",ge=me.length>3?me.length%3:0;return xe+(ge?me.substr(0,ge)+pe:"")+me.substr(ge).replace(/(\d{3})(?=\d)/g,"$1"+pe)+(ue?Ae+Math.abs(ce-me).toFixed(ue).slice(2):"")};util$2.formatSize=function(K){return K>=1073741824?K=util$2.formatNumber(K/1073741824,2,".","")+" GiB":K>=1048576?K=util$2.formatNumber(K/1048576,2,".","")+" MiB":K>=1024?K=util$2.formatNumber(K/1024,0)+" KiB":K=util$2.formatNumber(K,0)+" bytes",K};util$2.bytesFromIP=function(K){return K.indexOf(".")!==-1?util$2.bytesFromIPv4(K):K.indexOf(":")!==-1?util$2.bytesFromIPv6(K):null};util$2.bytesFromIPv4=function(K){if(K=K.split("."),K.length!==4)return null;for(var J=util$2.createBuffer(),ne=0;ne<K.length;++ne){var oe=parseInt(K[ne],10);if(isNaN(oe))return null;J.putByte(oe)}return J.getBytes()};util$2.bytesFromIPv6=function(K){var J=0;K=K.split(":").filter(function(Ae){return Ae.length===0&&++J,!0});for(var ne=(8-K.length+J)*2,oe=util$2.createBuffer(),ce=0;ce<8;++ce){if(!K[ce]||K[ce].length===0){oe.fillWithByte(0,ne),ne=0;continue}var ue=util$2.hexToBytes(K[ce]);ue.length<2&&oe.putByte(0),oe.putBytes(ue)}return oe.getBytes()};util$2.bytesToIP=function(K){return K.length===4?util$2.bytesToIPv4(K):K.length===16?util$2.bytesToIPv6(K):null};util$2.bytesToIPv4=function(K){if(K.length!==4)return null;for(var J=[],ne=0;ne<K.length;++ne)J.push(K.charCodeAt(ne));return J.join(".")};util$2.bytesToIPv6=function(K){if(K.length!==16)return null;for(var J=[],ne=[],oe=0,ce=0;ce<K.length;ce+=2){for(var ue=util$2.bytesToHex(K[ce]+K[ce+1]);ue[0]==="0"&&ue!=="0";)ue=ue.substr(1);if(ue==="0"){var Ae=ne[ne.length-1],pe=J.length;!Ae||pe!==Ae.end+1?ne.push({start:pe,end:pe}):(Ae.end=pe,Ae.end-Ae.start>ne[oe].end-ne[oe].start&&(oe=ne.length-1))}J.push(ue)}if(ne.length>0){var xe=ne[oe];xe.end-xe.start>0&&(J.splice(xe.start,xe.end-xe.start+1,""),xe.start===0&&J.unshift(""),xe.end===7&&J.push(""))}return J.join(":")};util$2.estimateCores=function(K,J){if(typeof K=="function"&&(J=K,K={}),K=K||{},"cores"in util$2&&!K.update)return J(null,util$2.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return util$2.cores=navigator.hardwareConcurrency,J(null,util$2.cores);if(typeof Worker>"u")return util$2.cores=1,J(null,util$2.cores);if(typeof Blob>"u")return util$2.cores=2,J(null,util$2.cores);var ne=URL.createObjectURL(new Blob(["(",(function(){self.addEventListener("message",function(Ae){var pe=Date.now(),xe=pe+4;self.postMessage({st:pe,et:xe})})}).toString(),")()"],{type:"application/javascript"}));oe([],5,16);function oe(Ae,pe,xe){if(pe===0){var me=Math.floor(Ae.reduce(function(ge,ye){return ge+ye},0)/Ae.length);return util$2.cores=Math.max(1,me),URL.revokeObjectURL(ne),J(null,util$2.cores)}ce(xe,function(ge,ye){Ae.push(ue(xe,ye)),oe(Ae,pe-1,xe)})}function ce(Ae,pe){for(var xe=[],me=[],ge=0;ge<Ae;++ge){var ye=new Worker(ne);ye.addEventListener("message",function(Se){if(me.push(Se.data),me.length===Ae){for(var Te=0;Te<Ae;++Te)xe[Te].terminate();pe(null,me)}}),xe.push(ye)}for(var ge=0;ge<Ae;++ge)xe[ge].postMessage(ge)}function ue(Ae,pe){for(var xe=[],me=0;me<Ae;++me)for(var ge=pe[me],ye=xe[me]=[],Se=0;Se<Ae;++Se)if(me!==Se){var Te=pe[Se];(ge.st>Te.st&&ge.st<Te.et||Te.st>ge.st&&Te.st<ge.et)&&ye.push(Se)}return xe.reduce(function(Ne,$e){return Math.max(Ne,$e.length)},0)}};var forge$B=forge$D;forge$B.cipher=forge$B.cipher||{};forge$B.cipher.algorithms=forge$B.cipher.algorithms||{};forge$B.cipher.createCipher=function(K,J){var ne=K;if(typeof ne=="string"&&(ne=forge$B.cipher.getAlgorithm(ne),ne&&(ne=ne())),!ne)throw new Error("Unsupported algorithm: "+K);return new forge$B.cipher.BlockCipher({algorithm:ne,key:J,decrypt:!1})};forge$B.cipher.createDecipher=function(K,J){var ne=K;if(typeof ne=="string"&&(ne=forge$B.cipher.getAlgorithm(ne),ne&&(ne=ne())),!ne)throw new Error("Unsupported algorithm: "+K);return new forge$B.cipher.BlockCipher({algorithm:ne,key:J,decrypt:!0})};forge$B.cipher.registerAlgorithm=function(K,J){K=K.toUpperCase(),forge$B.cipher.algorithms[K]=J};forge$B.cipher.getAlgorithm=function(K){return K=K.toUpperCase(),K in forge$B.cipher.algorithms?forge$B.cipher.algorithms[K]:null};var BlockCipher=forge$B.cipher.BlockCipher=function(K){this.algorithm=K.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=K.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=K.decrypt,this.algorithm.initialize(K)};BlockCipher.prototype.start=function(K){K=K||{};var J={};for(var ne in K)J[ne]=K[ne];J.decrypt=this._decrypt,this._finish=!1,this._input=forge$B.util.createBuffer(),this.output=K.output||forge$B.util.createBuffer(),this.mode.start(J)};BlockCipher.prototype.update=function(K){for(K&&this._input.putBuffer(K);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};BlockCipher.prototype.finish=function(K){K&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(ne){return K(this.blockSize,ne,!1)},this.mode.unpad=function(ne){return K(this.blockSize,ne,!0)});var J={};return J.decrypt=this._decrypt,J.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,J)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,J))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,J))};var forge$A=forge$D;forge$A.cipher=forge$A.cipher||{};var modes$1=forge$A.cipher.modes=forge$A.cipher.modes||{};modes$1.ecb=function(K){K=K||{},this.name="ECB",this.cipher=K.cipher,this.blockSize=K.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes$1.ecb.prototype.start=function(K){};modes$1.ecb.prototype.encrypt=function(K,J,ne){if(K.length()<this.blockSize&&!(ne&&K.length()>0))return!0;for(var oe=0;oe<this._ints;++oe)this._inBlock[oe]=K.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var oe=0;oe<this._ints;++oe)J.putInt32(this._outBlock[oe])};modes$1.ecb.prototype.decrypt=function(K,J,ne){if(K.length()<this.blockSize&&!(ne&&K.length()>0))return!0;for(var oe=0;oe<this._ints;++oe)this._inBlock[oe]=K.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var oe=0;oe<this._ints;++oe)J.putInt32(this._outBlock[oe])};modes$1.ecb.prototype.pad=function(K,J){var ne=K.length()===this.blockSize?this.blockSize:this.blockSize-K.length();return K.fillWithByte(ne,ne),!0};modes$1.ecb.prototype.unpad=function(K,J){if(J.overflow>0)return!1;var ne=K.length(),oe=K.at(ne-1);return oe>this.blockSize<<2?!1:(K.truncate(oe),!0)};modes$1.cbc=function(K){K=K||{},this.name="CBC",this.cipher=K.cipher,this.blockSize=K.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes$1.cbc.prototype.start=function(K){if(K.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in K)this._iv=transformIV(K.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};modes$1.cbc.prototype.encrypt=function(K,J,ne){if(K.length()<this.blockSize&&!(ne&&K.length()>0))return!0;for(var oe=0;oe<this._ints;++oe)this._inBlock[oe]=this._prev[oe]^K.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var oe=0;oe<this._ints;++oe)J.putInt32(this._outBlock[oe]);this._prev=this._outBlock};modes$1.cbc.prototype.decrypt=function(K,J,ne){if(K.length()<this.blockSize&&!(ne&&K.length()>0))return!0;for(var oe=0;oe<this._ints;++oe)this._inBlock[oe]=K.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var oe=0;oe<this._ints;++oe)J.putInt32(this._prev[oe]^this._outBlock[oe]);this._prev=this._inBlock.slice(0)};modes$1.cbc.prototype.pad=function(K,J){var ne=K.length()===this.blockSize?this.blockSize:this.blockSize-K.length();return K.fillWithByte(ne,ne),!0};modes$1.cbc.prototype.unpad=function(K,J){if(J.overflow>0)return!1;var ne=K.length(),oe=K.at(ne-1);return oe>this.blockSize<<2?!1:(K.truncate(oe),!0)};modes$1.cfb=function(K){K=K||{},this.name="CFB",this.cipher=K.cipher,this.blockSize=K.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=forge$A.util.createBuffer(),this._partialBytes=0};modes$1.cfb.prototype.start=function(K){if(!("iv"in K))throw new Error("Invalid IV parameter.");this._iv=transformIV(K.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.cfb.prototype.encrypt=function(K,J,ne){var oe=K.length();if(oe===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&oe>=this.blockSize){for(var ce=0;ce<this._ints;++ce)this._inBlock[ce]=K.getInt32()^this._outBlock[ce],J.putInt32(this._inBlock[ce]);return}var ue=(this.blockSize-oe)%this.blockSize;ue>0&&(ue=this.blockSize-ue),this._partialOutput.clear();for(var ce=0;ce<this._ints;++ce)this._partialBlock[ce]=K.getInt32()^this._outBlock[ce],this._partialOutput.putInt32(this._partialBlock[ce]);if(ue>0)K.read-=this.blockSize;else for(var ce=0;ce<this._ints;++ce)this._inBlock[ce]=this._partialBlock[ce];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),ue>0&&!ne)return J.putBytes(this._partialOutput.getBytes(ue-this._partialBytes)),this._partialBytes=ue,!0;J.putBytes(this._partialOutput.getBytes(oe-this._partialBytes)),this._partialBytes=0};modes$1.cfb.prototype.decrypt=function(K,J,ne){var oe=K.length();if(oe===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&oe>=this.blockSize){for(var ce=0;ce<this._ints;++ce)this._inBlock[ce]=K.getInt32(),J.putInt32(this._inBlock[ce]^this._outBlock[ce]);return}var ue=(this.blockSize-oe)%this.blockSize;ue>0&&(ue=this.blockSize-ue),this._partialOutput.clear();for(var ce=0;ce<this._ints;++ce)this._partialBlock[ce]=K.getInt32(),this._partialOutput.putInt32(this._partialBlock[ce]^this._outBlock[ce]);if(ue>0)K.read-=this.blockSize;else for(var ce=0;ce<this._ints;++ce)this._inBlock[ce]=this._partialBlock[ce];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),ue>0&&!ne)return J.putBytes(this._partialOutput.getBytes(ue-this._partialBytes)),this._partialBytes=ue,!0;J.putBytes(this._partialOutput.getBytes(oe-this._partialBytes)),this._partialBytes=0};modes$1.ofb=function(K){K=K||{},this.name="OFB",this.cipher=K.cipher,this.blockSize=K.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$A.util.createBuffer(),this._partialBytes=0};modes$1.ofb.prototype.start=function(K){if(!("iv"in K))throw new Error("Invalid IV parameter.");this._iv=transformIV(K.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.ofb.prototype.encrypt=function(K,J,ne){var oe=K.length();if(K.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&oe>=this.blockSize){for(var ce=0;ce<this._ints;++ce)J.putInt32(K.getInt32()^this._outBlock[ce]),this._inBlock[ce]=this._outBlock[ce];return}var ue=(this.blockSize-oe)%this.blockSize;ue>0&&(ue=this.blockSize-ue),this._partialOutput.clear();for(var ce=0;ce<this._ints;++ce)this._partialOutput.putInt32(K.getInt32()^this._outBlock[ce]);if(ue>0)K.read-=this.blockSize;else for(var ce=0;ce<this._ints;++ce)this._inBlock[ce]=this._outBlock[ce];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),ue>0&&!ne)return J.putBytes(this._partialOutput.getBytes(ue-this._partialBytes)),this._partialBytes=ue,!0;J.putBytes(this._partialOutput.getBytes(oe-this._partialBytes)),this._partialBytes=0};modes$1.ofb.prototype.decrypt=modes$1.ofb.prototype.encrypt;modes$1.ctr=function(K){K=K||{},this.name="CTR",this.cipher=K.cipher,this.blockSize=K.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$A.util.createBuffer(),this._partialBytes=0};modes$1.ctr.prototype.start=function(K){if(!("iv"in K))throw new Error("Invalid IV parameter.");this._iv=transformIV(K.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.ctr.prototype.encrypt=function(K,J,ne){var oe=K.length();if(oe===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&oe>=this.blockSize)for(var ce=0;ce<this._ints;++ce)J.putInt32(K.getInt32()^this._outBlock[ce]);else{var ue=(this.blockSize-oe)%this.blockSize;ue>0&&(ue=this.blockSize-ue),this._partialOutput.clear();for(var ce=0;ce<this._ints;++ce)this._partialOutput.putInt32(K.getInt32()^this._outBlock[ce]);if(ue>0&&(K.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),ue>0&&!ne)return J.putBytes(this._partialOutput.getBytes(ue-this._partialBytes)),this._partialBytes=ue,!0;J.putBytes(this._partialOutput.getBytes(oe-this._partialBytes)),this._partialBytes=0}inc32(this._inBlock)};modes$1.ctr.prototype.decrypt=modes$1.ctr.prototype.encrypt;modes$1.gcm=function(K){K=K||{},this.name="GCM",this.cipher=K.cipher,this.blockSize=K.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=forge$A.util.createBuffer(),this._partialBytes=0,this._R=3774873600};modes$1.gcm.prototype.start=function(K){if(!("iv"in K))throw new Error("Invalid IV parameter.");var J=forge$A.util.createBuffer(K.iv);this._cipherLength=0;var ne;if("additionalData"in K?ne=forge$A.util.createBuffer(K.additionalData):ne=forge$A.util.createBuffer(),"tagLength"in K?this._tagLength=K.tagLength:this._tagLength=128,this._tag=null,K.decrypt&&(this._tag=forge$A.util.createBuffer(K.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var oe=J.length();if(oe===12)this._j0=[J.getInt32(),J.getInt32(),J.getInt32(),1];else{for(this._j0=[0,0,0,0];J.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[J.getInt32(),J.getInt32(),J.getInt32(),J.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(from64To32(oe*8)))}this._inBlock=this._j0.slice(0),inc32(this._inBlock),this._partialBytes=0,ne=forge$A.util.createBuffer(ne),this._aDataLength=from64To32(ne.length()*8);var ce=ne.length()%this.blockSize;for(ce&&ne.fillWithByte(0,this.blockSize-ce),this._s=[0,0,0,0];ne.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[ne.getInt32(),ne.getInt32(),ne.getInt32(),ne.getInt32()])};modes$1.gcm.prototype.encrypt=function(K,J,ne){var oe=K.length();if(oe===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&oe>=this.blockSize){for(var ce=0;ce<this._ints;++ce)J.putInt32(this._outBlock[ce]^=K.getInt32());this._cipherLength+=this.blockSize}else{var ue=(this.blockSize-oe)%this.blockSize;ue>0&&(ue=this.blockSize-ue),this._partialOutput.clear();for(var ce=0;ce<this._ints;++ce)this._partialOutput.putInt32(K.getInt32()^this._outBlock[ce]);if(ue<=0||ne){if(ne){var Ae=oe%this.blockSize;this._cipherLength+=Ae,this._partialOutput.truncate(this.blockSize-Ae)}else this._cipherLength+=this.blockSize;for(var ce=0;ce<this._ints;++ce)this._outBlock[ce]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),ue>0&&!ne)return K.read-=this.blockSize,J.putBytes(this._partialOutput.getBytes(ue-this._partialBytes)),this._partialBytes=ue,!0;J.putBytes(this._partialOutput.getBytes(oe-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),inc32(this._inBlock)};modes$1.gcm.prototype.decrypt=function(K,J,ne){var oe=K.length();if(oe<this.blockSize&&!(ne&&oe>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),inc32(this._inBlock),this._hashBlock[0]=K.getInt32(),this._hashBlock[1]=K.getInt32(),this._hashBlock[2]=K.getInt32(),this._hashBlock[3]=K.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var ce=0;ce<this._ints;++ce)J.putInt32(this._outBlock[ce]^this._hashBlock[ce]);oe<this.blockSize?this._cipherLength+=oe%this.blockSize:this._cipherLength+=this.blockSize};modes$1.gcm.prototype.afterFinish=function(K,J){var ne=!0;J.decrypt&&J.overflow&&K.truncate(this.blockSize-J.overflow),this.tag=forge$A.util.createBuffer();var oe=this._aDataLength.concat(from64To32(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,oe);var ce=[];this.cipher.encrypt(this._j0,ce);for(var ue=0;ue<this._ints;++ue)this.tag.putInt32(this._s[ue]^ce[ue]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),J.decrypt&&this.tag.bytes()!==this._tag&&(ne=!1),ne};modes$1.gcm.prototype.multiply=function(K,J){for(var ne=[0,0,0,0],oe=J.slice(0),ce=0;ce<128;++ce){var ue=K[ce/32|0]&1<<31-ce%32;ue&&(ne[0]^=oe[0],ne[1]^=oe[1],ne[2]^=oe[2],ne[3]^=oe[3]),this.pow(oe,oe)}return ne};modes$1.gcm.prototype.pow=function(K,J){for(var ne=K[3]&1,oe=3;oe>0;--oe)J[oe]=K[oe]>>>1|(K[oe-1]&1)<<31;J[0]=K[0]>>>1,ne&&(J[0]^=this._R)};modes$1.gcm.prototype.tableMultiply=function(K){for(var J=[0,0,0,0],ne=0;ne<32;++ne){var oe=ne/8|0,ce=K[oe]>>>(7-ne%8)*4&15,ue=this._m[ne][ce];J[0]^=ue[0],J[1]^=ue[1],J[2]^=ue[2],J[3]^=ue[3]}return J};modes$1.gcm.prototype.ghash=function(K,J,ne){return J[0]^=ne[0],J[1]^=ne[1],J[2]^=ne[2],J[3]^=ne[3],this.tableMultiply(J)};modes$1.gcm.prototype.generateHashTable=function(K,J){for(var ne=8/J,oe=4*ne,ce=16*ne,ue=new Array(ce),Ae=0;Ae<ce;++Ae){var pe=[0,0,0,0],xe=Ae/oe|0,me=(oe-1-Ae%oe)*J;pe[xe]=1<<J-1<<me,ue[Ae]=this.generateSubHashTable(this.multiply(pe,K),J)}return ue};modes$1.gcm.prototype.generateSubHashTable=function(K,J){var ne=1<<J,oe=ne>>>1,ce=new Array(ne);ce[oe]=K.slice(0);for(var ue=oe>>>1;ue>0;)this.pow(ce[2*ue],ce[ue]=[]),ue>>=1;for(ue=2;ue<oe;){for(var Ae=1;Ae<ue;++Ae){var pe=ce[ue],xe=ce[Ae];ce[ue+Ae]=[pe[0]^xe[0],pe[1]^xe[1],pe[2]^xe[2],pe[3]^xe[3]]}ue*=2}for(ce[0]=[0,0,0,0],ue=oe+1;ue<ne;++ue){var me=ce[ue^oe];ce[ue]=[K[0]^me[0],K[1]^me[1],K[2]^me[2],K[3]^me[3]]}return ce};function transformIV(K,J){if(typeof K=="string"&&(K=forge$A.util.createBuffer(K)),forge$A.util.isArray(K)&&K.length>4){var ne=K;K=forge$A.util.createBuffer();for(var oe=0;oe<ne.length;++oe)K.putByte(ne[oe])}if(K.length()<J)throw new Error("Invalid IV length; got "+K.length()+" bytes and expected "+J+" bytes.");if(!forge$A.util.isArray(K)){for(var ce=[],ue=J/4,oe=0;oe<ue;++oe)ce.push(K.getInt32());K=ce}return K}function inc32(K){K[K.length-1]=K[K.length-1]+1&4294967295}function from64To32(K){return[K/4294967296|0,K&4294967295]}var forge$z=forge$D;forge$z.aes=forge$z.aes||{};forge$z.aes.startEncrypting=function(K,J,ne,oe){var ce=_createCipher$1({key:K,output:ne,decrypt:!1,mode:oe});return ce.start(J),ce};forge$z.aes.createEncryptionCipher=function(K,J){return _createCipher$1({key:K,output:null,decrypt:!1,mode:J})};forge$z.aes.startDecrypting=function(K,J,ne,oe){var ce=_createCipher$1({key:K,output:ne,decrypt:!0,mode:oe});return ce.start(J),ce};forge$z.aes.createDecryptionCipher=function(K,J){return _createCipher$1({key:K,output:null,decrypt:!0,mode:J})};forge$z.aes.Algorithm=function(K,J){init||initialize();var ne=this;ne.name=K,ne.mode=new J({blockSize:16,cipher:{encrypt:function(oe,ce){return _updateBlock$1(ne._w,oe,ce,!1)},decrypt:function(oe,ce){return _updateBlock$1(ne._w,oe,ce,!0)}}}),ne._init=!1};forge$z.aes.Algorithm.prototype.initialize=function(K){if(!this._init){var J=K.key,ne;if(typeof J=="string"&&(J.length===16||J.length===24||J.length===32))J=forge$z.util.createBuffer(J);else if(forge$z.util.isArray(J)&&(J.length===16||J.length===24||J.length===32)){ne=J,J=forge$z.util.createBuffer();for(var oe=0;oe<ne.length;++oe)J.putByte(ne[oe])}if(!forge$z.util.isArray(J)){ne=J,J=[];var ce=ne.length();if(ce===16||ce===24||ce===32){ce=ce>>>2;for(var oe=0;oe<ce;++oe)J.push(ne.getInt32())}}if(!forge$z.util.isArray(J)||!(J.length===4||J.length===6||J.length===8))throw new Error("Invalid key parameter.");var ue=this.mode.name,Ae=["CFB","OFB","CTR","GCM"].indexOf(ue)!==-1;this._w=_expandKey(J,K.decrypt&&!Ae),this._init=!0}};forge$z.aes._expandKey=function(K,J){return init||initialize(),_expandKey(K,J)};forge$z.aes._updateBlock=_updateBlock$1;registerAlgorithm$1("AES-ECB",forge$z.cipher.modes.ecb);registerAlgorithm$1("AES-CBC",forge$z.cipher.modes.cbc);registerAlgorithm$1("AES-CFB",forge$z.cipher.modes.cfb);registerAlgorithm$1("AES-OFB",forge$z.cipher.modes.ofb);registerAlgorithm$1("AES-CTR",forge$z.cipher.modes.ctr);registerAlgorithm$1("AES-GCM",forge$z.cipher.modes.gcm);function registerAlgorithm$1(K,J){var ne=function(){return new forge$z.aes.Algorithm(K,J)};forge$z.cipher.registerAlgorithm(K,ne)}var init=!1,Nb=4,sbox,isbox,rcon,mix,imix;function initialize(){init=!0,rcon=[0,1,2,4,8,16,32,64,128,27,54];for(var K=new Array(256),J=0;J<128;++J)K[J]=J<<1,K[J+128]=J+128<<1^283;sbox=new Array(256),isbox=new Array(256),mix=new Array(4),imix=new Array(4);for(var J=0;J<4;++J)mix[J]=new Array(256),imix[J]=new Array(256);for(var ne=0,oe=0,ce,ue,Ae,pe,xe,me,ge,J=0;J<256;++J){pe=oe^oe<<1^oe<<2^oe<<3^oe<<4,pe=pe>>8^pe&255^99,sbox[ne]=pe,isbox[pe]=ne,xe=K[pe],ce=K[ne],ue=K[ce],Ae=K[ue],me=xe<<24^pe<<16^pe<<8^(pe^xe),ge=(ce^ue^Ae)<<24^(ne^Ae)<<16^(ne^ue^Ae)<<8^(ne^ce^Ae);for(var ye=0;ye<4;++ye)mix[ye][ne]=me,imix[ye][pe]=ge,me=me<<24|me>>>8,ge=ge<<24|ge>>>8;ne===0?ne=oe=1:(ne=ce^K[K[K[ce^Ae]]],oe^=K[K[oe]])}}function _expandKey(K,J){for(var ne=K.slice(0),oe,ce=1,ue=ne.length,Ae=ue+6+1,pe=Nb*Ae,xe=ue;xe<pe;++xe)oe=ne[xe-1],xe%ue===0?(oe=sbox[oe>>>16&255]<<24^sbox[oe>>>8&255]<<16^sbox[oe&255]<<8^sbox[oe>>>24]^rcon[ce]<<24,ce++):ue>6&&xe%ue===4&&(oe=sbox[oe>>>24]<<24^sbox[oe>>>16&255]<<16^sbox[oe>>>8&255]<<8^sbox[oe&255]),ne[xe]=ne[xe-ue]^oe;if(J){var me,ge=imix[0],ye=imix[1],Se=imix[2],Te=imix[3],Ne=ne.slice(0);pe=ne.length;for(var xe=0,$e=pe-Nb;xe<pe;xe+=Nb,$e-=Nb)if(xe===0||xe===pe-Nb)Ne[xe]=ne[$e],Ne[xe+1]=ne[$e+3],Ne[xe+2]=ne[$e+2],Ne[xe+3]=ne[$e+1];else for(var ke=0;ke<Nb;++ke)me=ne[$e+ke],Ne[xe+(3&-ke)]=ge[sbox[me>>>24]]^ye[sbox[me>>>16&255]]^Se[sbox[me>>>8&255]]^Te[sbox[me&255]];ne=Ne}return ne}function _updateBlock$1(K,J,ne,oe){var ce=K.length/4-1,ue,Ae,pe,xe,me;oe?(ue=imix[0],Ae=imix[1],pe=imix[2],xe=imix[3],me=isbox):(ue=mix[0],Ae=mix[1],pe=mix[2],xe=mix[3],me=sbox);var ge,ye,Se,Te,Ne,$e,ke;ge=J[0]^K[0],ye=J[oe?3:1]^K[1],Se=J[2]^K[2],Te=J[oe?1:3]^K[3];for(var je=3,Ke=1;Ke<ce;++Ke)Ne=ue[ge>>>24]^Ae[ye>>>16&255]^pe[Se>>>8&255]^xe[Te&255]^K[++je],$e=ue[ye>>>24]^Ae[Se>>>16&255]^pe[Te>>>8&255]^xe[ge&255]^K[++je],ke=ue[Se>>>24]^Ae[Te>>>16&255]^pe[ge>>>8&255]^xe[ye&255]^K[++je],Te=ue[Te>>>24]^Ae[ge>>>16&255]^pe[ye>>>8&255]^xe[Se&255]^K[++je],ge=Ne,ye=$e,Se=ke;ne[0]=me[ge>>>24]<<24^me[ye>>>16&255]<<16^me[Se>>>8&255]<<8^me[Te&255]^K[++je],ne[oe?3:1]=me[ye>>>24]<<24^me[Se>>>16&255]<<16^me[Te>>>8&255]<<8^me[ge&255]^K[++je],ne[2]=me[Se>>>24]<<24^me[Te>>>16&255]<<16^me[ge>>>8&255]<<8^me[ye&255]^K[++je],ne[oe?1:3]=me[Te>>>24]<<24^me[ge>>>16&255]<<16^me[ye>>>8&255]<<8^me[Se&255]^K[++je]}function _createCipher$1(K){K=K||{};var J=(K.mode||"CBC").toUpperCase(),ne="AES-"+J,oe;K.decrypt?oe=forge$z.cipher.createDecipher(ne,K.key):oe=forge$z.cipher.createCipher(ne,K.key);var ce=oe.start;return oe.start=function(ue,Ae){var pe=null;Ae instanceof forge$z.util.ByteBuffer&&(pe=Ae,Ae={}),Ae=Ae||{},Ae.output=pe,Ae.iv=ue,ce.call(oe,Ae)},oe}var forge$y=forge$D;forge$y.pki=forge$y.pki||{};var oids$2=forge$y.pki.oids=forge$y.oids=forge$y.oids||{};function _IN(K,J){oids$2[K]=J,oids$2[J]=K}function _I_(K,J){oids$2[K]=J}_IN("1.2.840.113549.1.1.1","rsaEncryption");_IN("1.2.840.113549.1.1.4","md5WithRSAEncryption");_IN("1.2.840.113549.1.1.5","sha1WithRSAEncryption");_IN("1.2.840.113549.1.1.7","RSAES-OAEP");_IN("1.2.840.113549.1.1.8","mgf1");_IN("1.2.840.113549.1.1.9","pSpecified");_IN("1.2.840.113549.1.1.10","RSASSA-PSS");_IN("1.2.840.113549.1.1.11","sha256WithRSAEncryption");_IN("1.2.840.113549.1.1.12","sha384WithRSAEncryption");_IN("1.2.840.113549.1.1.13","sha512WithRSAEncryption");_IN("1.3.101.112","EdDSA25519");_IN("1.2.840.10040.4.3","dsa-with-sha1");_IN("1.3.14.3.2.7","desCBC");_IN("1.3.14.3.2.26","sha1");_IN("1.3.14.3.2.29","sha1WithRSASignature");_IN("2.16.840.1.101.3.4.2.1","sha256");_IN("2.16.840.1.101.3.4.2.2","sha384");_IN("2.16.840.1.101.3.4.2.3","sha512");_IN("2.16.840.1.101.3.4.2.4","sha224");_IN("2.16.840.1.101.3.4.2.5","sha512-224");_IN("2.16.840.1.101.3.4.2.6","sha512-256");_IN("1.2.840.113549.2.2","md2");_IN("1.2.840.113549.2.5","md5");_IN("1.2.840.113549.1.7.1","data");_IN("1.2.840.113549.1.7.2","signedData");_IN("1.2.840.113549.1.7.3","envelopedData");_IN("1.2.840.113549.1.7.4","signedAndEnvelopedData");_IN("1.2.840.113549.1.7.5","digestedData");_IN("1.2.840.113549.1.7.6","encryptedData");_IN("1.2.840.113549.1.9.1","emailAddress");_IN("1.2.840.113549.1.9.2","unstructuredName");_IN("1.2.840.113549.1.9.3","contentType");_IN("1.2.840.113549.1.9.4","messageDigest");_IN("1.2.840.113549.1.9.5","signingTime");_IN("1.2.840.113549.1.9.6","counterSignature");_IN("1.2.840.113549.1.9.7","challengePassword");_IN("1.2.840.113549.1.9.8","unstructuredAddress");_IN("1.2.840.113549.1.9.14","extensionRequest");_IN("1.2.840.113549.1.9.20","friendlyName");_IN("1.2.840.113549.1.9.21","localKeyId");_IN("1.2.840.113549.1.9.22.1","x509Certificate");_IN("1.2.840.113549.1.12.10.1.1","keyBag");_IN("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");_IN("1.2.840.113549.1.12.10.1.3","certBag");_IN("1.2.840.113549.1.12.10.1.4","crlBag");_IN("1.2.840.113549.1.12.10.1.5","secretBag");_IN("1.2.840.113549.1.12.10.1.6","safeContentsBag");_IN("1.2.840.113549.1.5.13","pkcs5PBES2");_IN("1.2.840.113549.1.5.12","pkcs5PBKDF2");_IN("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");_IN("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");_IN("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");_IN("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");_IN("1.2.840.113549.2.7","hmacWithSHA1");_IN("1.2.840.113549.2.8","hmacWithSHA224");_IN("1.2.840.113549.2.9","hmacWithSHA256");_IN("1.2.840.113549.2.10","hmacWithSHA384");_IN("1.2.840.113549.2.11","hmacWithSHA512");_IN("1.2.840.113549.3.7","des-EDE3-CBC");_IN("2.16.840.1.101.3.4.1.2","aes128-CBC");_IN("2.16.840.1.101.3.4.1.22","aes192-CBC");_IN("2.16.840.1.101.3.4.1.42","aes256-CBC");_IN("2.5.4.3","commonName");_IN("2.5.4.4","surname");_IN("2.5.4.5","serialNumber");_IN("2.5.4.6","countryName");_IN("2.5.4.7","localityName");_IN("2.5.4.8","stateOrProvinceName");_IN("2.5.4.9","streetAddress");_IN("2.5.4.10","organizationName");_IN("2.5.4.11","organizationalUnitName");_IN("2.5.4.12","title");_IN("2.5.4.13","description");_IN("2.5.4.15","businessCategory");_IN("2.5.4.17","postalCode");_IN("2.5.4.42","givenName");_IN("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");_IN("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");_IN("2.16.840.1.113730.1.1","nsCertType");_IN("2.16.840.1.113730.1.13","nsComment");_I_("2.5.29.1","authorityKeyIdentifier");_I_("2.5.29.2","keyAttributes");_I_("2.5.29.3","certificatePolicies");_I_("2.5.29.4","keyUsageRestriction");_I_("2.5.29.5","policyMapping");_I_("2.5.29.6","subtreesConstraint");_I_("2.5.29.7","subjectAltName");_I_("2.5.29.8","issuerAltName");_I_("2.5.29.9","subjectDirectoryAttributes");_I_("2.5.29.10","basicConstraints");_I_("2.5.29.11","nameConstraints");_I_("2.5.29.12","policyConstraints");_I_("2.5.29.13","basicConstraints");_IN("2.5.29.14","subjectKeyIdentifier");_IN("2.5.29.15","keyUsage");_I_("2.5.29.16","privateKeyUsagePeriod");_IN("2.5.29.17","subjectAltName");_IN("2.5.29.18","issuerAltName");_IN("2.5.29.19","basicConstraints");_I_("2.5.29.20","cRLNumber");_I_("2.5.29.21","cRLReason");_I_("2.5.29.22","expirationDate");_I_("2.5.29.23","instructionCode");_I_("2.5.29.24","invalidityDate");_I_("2.5.29.25","cRLDistributionPoints");_I_("2.5.29.26","issuingDistributionPoint");_I_("2.5.29.27","deltaCRLIndicator");_I_("2.5.29.28","issuingDistributionPoint");_I_("2.5.29.29","certificateIssuer");_I_("2.5.29.30","nameConstraints");_IN("2.5.29.31","cRLDistributionPoints");_IN("2.5.29.32","certificatePolicies");_I_("2.5.29.33","policyMappings");_I_("2.5.29.34","policyConstraints");_IN("2.5.29.35","authorityKeyIdentifier");_I_("2.5.29.36","policyConstraints");_IN("2.5.29.37","extKeyUsage");_I_("2.5.29.46","freshestCRL");_I_("2.5.29.54","inhibitAnyPolicy");_IN("1.3.6.1.4.1.11129.2.4.2","timestampList");_IN("1.3.6.1.5.5.7.1.1","authorityInfoAccess");_IN("1.3.6.1.5.5.7.3.1","serverAuth");_IN("1.3.6.1.5.5.7.3.2","clientAuth");_IN("1.3.6.1.5.5.7.3.3","codeSigning");_IN("1.3.6.1.5.5.7.3.4","emailProtection");_IN("1.3.6.1.5.5.7.3.8","timeStamping");var forge$x=forge$D,asn1$a=forge$x.asn1=forge$x.asn1||{};asn1$a.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};asn1$a.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};asn1$a.create=function(K,J,ne,oe,ce){if(forge$x.util.isArray(oe)){for(var ue=[],Ae=0;Ae<oe.length;++Ae)oe[Ae]!==void 0&&ue.push(oe[Ae]);oe=ue}var pe={tagClass:K,type:J,constructed:ne,composed:ne||forge$x.util.isArray(oe),value:oe};return ce&&"bitStringContents"in ce&&(pe.bitStringContents=ce.bitStringContents,pe.original=asn1$a.copy(pe)),pe};asn1$a.copy=function(K,J){var ne;if(forge$x.util.isArray(K)){ne=[];for(var oe=0;oe<K.length;++oe)ne.push(asn1$a.copy(K[oe],J));return ne}return typeof K=="string"?K:(ne={tagClass:K.tagClass,type:K.type,constructed:K.constructed,composed:K.composed,value:asn1$a.copy(K.value,J)},J&&!J.excludeBitStringContents&&(ne.bitStringContents=K.bitStringContents),ne)};asn1$a.equals=function(K,J,ne){if(forge$x.util.isArray(K)){if(!forge$x.util.isArray(J)||K.length!==J.length)return!1;for(var oe=0;oe<K.length;++oe)if(!asn1$a.equals(K[oe],J[oe]))return!1;return!0}if(typeof K!=typeof J)return!1;if(typeof K=="string")return K===J;var ce=K.tagClass===J.tagClass&&K.type===J.type&&K.constructed===J.constructed&&K.composed===J.composed&&asn1$a.equals(K.value,J.value);return ne&&ne.includeBitStringContents&&(ce=ce&&K.bitStringContents===J.bitStringContents),ce};asn1$a.getBerValueLength=function(K){var J=K.getByte();if(J!==128){var ne,oe=J&128;return oe?ne=K.getInt((J&127)<<3):ne=J,ne}};function _checkBufferLength(K,J,ne){if(ne>J){var oe=new Error("Too few bytes to parse DER.");throw oe.available=K.length(),oe.remaining=J,oe.requested=ne,oe}}var _getValueLength=function(K,J){var ne=K.getByte();if(J--,ne!==128){var oe,ce=ne&128;if(!ce)oe=ne;else{var ue=ne&127;_checkBufferLength(K,J,ue),oe=K.getInt(ue<<3)}if(oe<0)throw new Error("Negative length: "+oe);return oe}};asn1$a.fromDer=function(K,J){J===void 0&&(J={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof J=="boolean"&&(J={strict:J,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in J||(J.strict=!0),"parseAllBytes"in J||(J.parseAllBytes=!0),"decodeBitStrings"in J||(J.decodeBitStrings=!0),typeof K=="string"&&(K=forge$x.util.createBuffer(K));var ne=K.length(),oe=_fromDer(K,K.length(),0,J);if(J.parseAllBytes&&K.length()!==0){var ce=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw ce.byteCount=ne,ce.remaining=K.length(),ce}return oe};function _fromDer(K,J,ne,oe){var ce;_checkBufferLength(K,J,2);var ue=K.getByte();J--;var Ae=ue&192,pe=ue&31;ce=K.length();var xe=_getValueLength(K,J);if(J-=ce-K.length(),xe!==void 0&&xe>J){if(oe.strict){var me=new Error("Too few bytes to read ASN.1 value.");throw me.available=K.length(),me.remaining=J,me.requested=xe,me}xe=J}var ge,ye,Se=(ue&32)===32;if(Se)if(ge=[],xe===void 0)for(;;){if(_checkBufferLength(K,J,2),K.bytes(2)==="\0\0"){K.getBytes(2),J-=2;break}ce=K.length(),ge.push(_fromDer(K,J,ne+1,oe)),J-=ce-K.length()}else for(;xe>0;)ce=K.length(),ge.push(_fromDer(K,xe,ne+1,oe)),J-=ce-K.length(),xe-=ce-K.length();if(ge===void 0&&Ae===asn1$a.Class.UNIVERSAL&&pe===asn1$a.Type.BITSTRING&&(ye=K.bytes(xe)),ge===void 0&&oe.decodeBitStrings&&Ae===asn1$a.Class.UNIVERSAL&&pe===asn1$a.Type.BITSTRING&&xe>1){var Te=K.read,Ne=J,$e=0;if(pe===asn1$a.Type.BITSTRING&&(_checkBufferLength(K,J,1),$e=K.getByte(),J--),$e===0)try{ce=K.length();var ke={strict:!0,decodeBitStrings:!0},je=_fromDer(K,J,ne+1,ke),Ke=ce-K.length();J-=Ke,pe==asn1$a.Type.BITSTRING&&Ke++;var Ye=je.tagClass;Ke===xe&&(Ye===asn1$a.Class.UNIVERSAL||Ye===asn1$a.Class.CONTEXT_SPECIFIC)&&(ge=[je])}catch{}ge===void 0&&(K.read=Te,J=Ne)}if(ge===void 0){if(xe===void 0){if(oe.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");xe=J}if(pe===asn1$a.Type.BMPSTRING)for(ge="";xe>0;xe-=2)_checkBufferLength(K,J,2),ge+=String.fromCharCode(K.getInt16()),J-=2;else ge=K.getBytes(xe),J-=xe}var ze=ye===void 0?null:{bitStringContents:ye};return asn1$a.create(Ae,pe,Se,ge,ze)}asn1$a.toDer=function(K){var J=forge$x.util.createBuffer(),ne=K.tagClass|K.type,oe=forge$x.util.createBuffer(),ce=!1;if("bitStringContents"in K&&(ce=!0,K.original&&(ce=asn1$a.equals(K,K.original))),ce)oe.putBytes(K.bitStringContents);else if(K.composed){K.constructed?ne|=32:oe.putByte(0);for(var ue=0;ue<K.value.length;++ue)K.value[ue]!==void 0&&oe.putBuffer(asn1$a.toDer(K.value[ue]))}else if(K.type===asn1$a.Type.BMPSTRING)for(var ue=0;ue<K.value.length;++ue)oe.putInt16(K.value.charCodeAt(ue));else K.type===asn1$a.Type.INTEGER&&K.value.length>1&&(K.value.charCodeAt(0)===0&&!(K.value.charCodeAt(1)&128)||K.value.charCodeAt(0)===255&&(K.value.charCodeAt(1)&128)===128)?oe.putBytes(K.value.substr(1)):oe.putBytes(K.value);if(J.putByte(ne),oe.length()<=127)J.putByte(oe.length()&127);else{var Ae=oe.length(),pe="";do pe+=String.fromCharCode(Ae&255),Ae=Ae>>>8;while(Ae>0);J.putByte(pe.length|128);for(var ue=pe.length-1;ue>=0;--ue)J.putByte(pe.charCodeAt(ue))}return J.putBuffer(oe),J};asn1$a.oidToDer=function(K){var J=K.split("."),ne=forge$x.util.createBuffer();ne.putByte(40*parseInt(J[0],10)+parseInt(J[1],10));for(var oe,ce,ue,Ae,pe=2;pe<J.length;++pe){oe=!0,ce=[],ue=parseInt(J[pe],10);do Ae=ue&127,ue=ue>>>7,oe||(Ae|=128),ce.push(Ae),oe=!1;while(ue>0);for(var xe=ce.length-1;xe>=0;--xe)ne.putByte(ce[xe])}return ne};asn1$a.derToOid=function(K){var J;typeof K=="string"&&(K=forge$x.util.createBuffer(K));var ne=K.getByte();J=Math.floor(ne/40)+"."+ne%40;for(var oe=0;K.length()>0;)ne=K.getByte(),oe=oe<<7,ne&128?oe+=ne&127:(J+="."+(oe+ne),oe=0);return J};asn1$a.utcTimeToDate=function(K){var J=new Date,ne=parseInt(K.substr(0,2),10);ne=ne>=50?1900+ne:2e3+ne;var oe=parseInt(K.substr(2,2),10)-1,ce=parseInt(K.substr(4,2),10),ue=parseInt(K.substr(6,2),10),Ae=parseInt(K.substr(8,2),10),pe=0;if(K.length>11){var xe=K.charAt(10),me=10;xe!=="+"&&xe!=="-"&&(pe=parseInt(K.substr(10,2),10),me+=2)}if(J.setUTCFullYear(ne,oe,ce),J.setUTCHours(ue,Ae,pe,0),me&&(xe=K.charAt(me),xe==="+"||xe==="-")){var ge=parseInt(K.substr(me+1,2),10),ye=parseInt(K.substr(me+4,2),10),Se=ge*60+ye;Se*=6e4,xe==="+"?J.setTime(+J-Se):J.setTime(+J+Se)}return J};asn1$a.generalizedTimeToDate=function(K){var J=new Date,ne=parseInt(K.substr(0,4),10),oe=parseInt(K.substr(4,2),10)-1,ce=parseInt(K.substr(6,2),10),ue=parseInt(K.substr(8,2),10),Ae=parseInt(K.substr(10,2),10),pe=parseInt(K.substr(12,2),10),xe=0,me=0,ge=!1;K.charAt(K.length-1)==="Z"&&(ge=!0);var ye=K.length-5,Se=K.charAt(ye);if(Se==="+"||Se==="-"){var Te=parseInt(K.substr(ye+1,2),10),Ne=parseInt(K.substr(ye+4,2),10);me=Te*60+Ne,me*=6e4,Se==="+"&&(me*=-1),ge=!0}return K.charAt(14)==="."&&(xe=parseFloat(K.substr(14),10)*1e3),ge?(J.setUTCFullYear(ne,oe,ce),J.setUTCHours(ue,Ae,pe,xe),J.setTime(+J+me)):(J.setFullYear(ne,oe,ce),J.setHours(ue,Ae,pe,xe)),J};asn1$a.dateToUtcTime=function(K){if(typeof K=="string")return K;var J="",ne=[];ne.push((""+K.getUTCFullYear()).substr(2)),ne.push(""+(K.getUTCMonth()+1)),ne.push(""+K.getUTCDate()),ne.push(""+K.getUTCHours()),ne.push(""+K.getUTCMinutes()),ne.push(""+K.getUTCSeconds());for(var oe=0;oe<ne.length;++oe)ne[oe].length<2&&(J+="0"),J+=ne[oe];return J+="Z",J};asn1$a.dateToGeneralizedTime=function(K){if(typeof K=="string")return K;var J="",ne=[];ne.push(""+K.getUTCFullYear()),ne.push(""+(K.getUTCMonth()+1)),ne.push(""+K.getUTCDate()),ne.push(""+K.getUTCHours()),ne.push(""+K.getUTCMinutes()),ne.push(""+K.getUTCSeconds());for(var oe=0;oe<ne.length;++oe)ne[oe].length<2&&(J+="0"),J+=ne[oe];return J+="Z",J};asn1$a.integerToDer=function(K){var J=forge$x.util.createBuffer();if(K>=-128&&K<128)return J.putSignedInt(K,8);if(K>=-32768&&K<32768)return J.putSignedInt(K,16);if(K>=-8388608&&K<8388608)return J.putSignedInt(K,24);if(K>=-2147483648&&K<2147483648)return J.putSignedInt(K,32);var ne=new Error("Integer too large; max is 32-bits.");throw ne.integer=K,ne};asn1$a.derToInteger=function(K){typeof K=="string"&&(K=forge$x.util.createBuffer(K));var J=K.length()*8;if(J>32)throw new Error("Integer too large; max is 32-bits.");return K.getSignedInt(J)};asn1$a.validate=function(K,J,ne,oe){var ce=!1;if((K.tagClass===J.tagClass||typeof J.tagClass>"u")&&(K.type===J.type||typeof J.type>"u"))if(K.constructed===J.constructed||typeof J.constructed>"u"){if(ce=!0,J.value&&forge$x.util.isArray(J.value))for(var ue=0,Ae=0;ce&&Ae<J.value.length;++Ae)ce=J.value[Ae].optional||!1,K.value[ue]&&(ce=asn1$a.validate(K.value[ue],J.value[Ae],ne,oe),ce?++ue:J.value[Ae].optional&&(ce=!0)),!ce&&oe&&oe.push("["+J.name+'] Tag class "'+J.tagClass+'", type "'+J.type+'" expected value length "'+J.value.length+'", got "'+K.value.length+'"');if(ce&&ne&&(J.capture&&(ne[J.capture]=K.value),J.captureAsn1&&(ne[J.captureAsn1]=K),J.captureBitStringContents&&"bitStringContents"in K&&(ne[J.captureBitStringContents]=K.bitStringContents),J.captureBitStringValue&&"bitStringContents"in K))if(K.bitStringContents.length<2)ne[J.captureBitStringValue]="";else{var pe=K.bitStringContents.charCodeAt(0);if(pe!==0)throw new Error("captureBitStringValue only supported for zero unused bits");ne[J.captureBitStringValue]=K.bitStringContents.slice(1)}}else oe&&oe.push("["+J.name+'] Expected constructed "'+J.constructed+'", got "'+K.constructed+'"');else oe&&(K.tagClass!==J.tagClass&&oe.push("["+J.name+'] Expected tag class "'+J.tagClass+'", got "'+K.tagClass+'"'),K.type!==J.type&&oe.push("["+J.name+'] Expected type "'+J.type+'", got "'+K.type+'"'));return ce};var _nonLatinRegex=/[^\\u0000-\\u00ff]/;asn1$a.prettyPrint=function(K,J,ne){var oe="";J=J||0,ne=ne||2,J>0&&(oe+=`
`);for(var ce="",ue=0;ue<J*ne;++ue)ce+=" ";switch(oe+=ce+"Tag: ",K.tagClass){case asn1$a.Class.UNIVERSAL:oe+="Universal:";break;case asn1$a.Class.APPLICATION:oe+="Application:";break;case asn1$a.Class.CONTEXT_SPECIFIC:oe+="Context-Specific:";break;case asn1$a.Class.PRIVATE:oe+="Private:";break}if(K.tagClass===asn1$a.Class.UNIVERSAL)switch(oe+=K.type,K.type){case asn1$a.Type.NONE:oe+=" (None)";break;case asn1$a.Type.BOOLEAN:oe+=" (Boolean)";break;case asn1$a.Type.INTEGER:oe+=" (Integer)";break;case asn1$a.Type.BITSTRING:oe+=" (Bit string)";break;case asn1$a.Type.OCTETSTRING:oe+=" (Octet string)";break;case asn1$a.Type.NULL:oe+=" (Null)";break;case asn1$a.Type.OID:oe+=" (Object Identifier)";break;case asn1$a.Type.ODESC:oe+=" (Object Descriptor)";break;case asn1$a.Type.EXTERNAL:oe+=" (External or Instance of)";break;case asn1$a.Type.REAL:oe+=" (Real)";break;case asn1$a.Type.ENUMERATED:oe+=" (Enumerated)";break;case asn1$a.Type.EMBEDDED:oe+=" (Embedded PDV)";break;case asn1$a.Type.UTF8:oe+=" (UTF8)";break;case asn1$a.Type.ROID:oe+=" (Relative Object Identifier)";break;case asn1$a.Type.SEQUENCE:oe+=" (Sequence)";break;case asn1$a.Type.SET:oe+=" (Set)";break;case asn1$a.Type.PRINTABLESTRING:oe+=" (Printable String)";break;case asn1$a.Type.IA5String:oe+=" (IA5String (ASCII))";break;case asn1$a.Type.UTCTIME:oe+=" (UTC time)";break;case asn1$a.Type.GENERALIZEDTIME:oe+=" (Generalized time)";break;case asn1$a.Type.BMPSTRING:oe+=" (BMP String)";break}else oe+=K.type;if(oe+=`
`,oe+=ce+"Constructed: "+K.constructed+`
`,K.composed){for(var Ae=0,pe="",ue=0;ue<K.value.length;++ue)K.value[ue]!==void 0&&(Ae+=1,pe+=asn1$a.prettyPrint(K.value[ue],J+1,ne),ue+1<K.value.length&&(pe+=","));oe+=ce+"Sub values: "+Ae+pe}else{if(oe+=ce+"Value: ",K.type===asn1$a.Type.OID){var xe=asn1$a.derToOid(K.value);oe+=xe,forge$x.pki&&forge$x.pki.oids&&xe in forge$x.pki.oids&&(oe+=" ("+forge$x.pki.oids[xe]+") ")}if(K.type===asn1$a.Type.INTEGER)try{oe+=asn1$a.derToInteger(K.value)}catch{oe+="0x"+forge$x.util.bytesToHex(K.value)}else if(K.type===asn1$a.Type.BITSTRING){if(K.value.length>1?oe+="0x"+forge$x.util.bytesToHex(K.value.slice(1)):oe+="(none)",K.value.length>0){var me=K.value.charCodeAt(0);me==1?oe+=" (1 unused bit shown)":me>1&&(oe+=" ("+me+" unused bits shown)")}}else if(K.type===asn1$a.Type.OCTETSTRING)_nonLatinRegex.test(K.value)||(oe+="("+K.value+") "),oe+="0x"+forge$x.util.bytesToHex(K.value);else if(K.type===asn1$a.Type.UTF8)try{oe+=forge$x.util.decodeUtf8(K.value)}catch(ge){if(ge.message==="URI malformed")oe+="0x"+forge$x.util.bytesToHex(K.value)+" (malformed UTF8)";else throw ge}else K.type===asn1$a.Type.PRINTABLESTRING||K.type===asn1$a.Type.IA5String?oe+=K.value:_nonLatinRegex.test(K.value)?oe+="0x"+forge$x.util.bytesToHex(K.value):K.value.length===0?oe+="[null]":oe+=K.value}return oe};var forge$w=forge$D;forge$w.md=forge$w.md||{};forge$w.md.algorithms=forge$w.md.algorithms||{};var forge$v=forge$D,hmac$1=forge$v.hmac=forge$v.hmac||{};hmac$1.create=function(){var K=null,J=null,ne=null,oe=null,ce={};return ce.start=function(ue,Ae){if(ue!==null)if(typeof ue=="string")if(ue=ue.toLowerCase(),ue in forge$v.md.algorithms)J=forge$v.md.algorithms[ue].create();else throw new Error('Unknown hash algorithm "'+ue+'"');else J=ue;if(Ae===null)Ae=K;else{if(typeof Ae=="string")Ae=forge$v.util.createBuffer(Ae);else if(forge$v.util.isArray(Ae)){var pe=Ae;Ae=forge$v.util.createBuffer();for(var xe=0;xe<pe.length;++xe)Ae.putByte(pe[xe])}var me=Ae.length();me>J.blockLength&&(J.start(),J.update(Ae.bytes()),Ae=J.digest()),ne=forge$v.util.createBuffer(),oe=forge$v.util.createBuffer(),me=Ae.length();for(var xe=0;xe<me;++xe){var pe=Ae.at(xe);ne.putByte(54^pe),oe.putByte(92^pe)}if(me<J.blockLength)for(var pe=J.blockLength-me,xe=0;xe<pe;++xe)ne.putByte(54),oe.putByte(92);K=Ae,ne=ne.bytes(),oe=oe.bytes()}J.start(),J.update(ne)},ce.update=function(ue){J.update(ue)},ce.getMac=function(){var ue=J.digest().bytes();return J.start(),J.update(oe),J.update(ue),J.digest()},ce.digest=ce.getMac,ce};var forge$u=forge$D,md5$1=forge$u.md5=forge$u.md5||{};forge$u.md.md5=forge$u.md.algorithms.md5=md5$1;md5$1.create=function(){_initialized$3||_init$3();var K=null,J=forge$u.util.createBuffer(),ne=new Array(16),oe={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return oe.start=function(){oe.messageLength=0,oe.fullMessageLength=oe.messageLength64=[];for(var ce=oe.messageLengthSize/4,ue=0;ue<ce;++ue)oe.fullMessageLength.push(0);return J=forge$u.util.createBuffer(),K={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},oe},oe.start(),oe.update=function(ce,ue){ue==="utf8"&&(ce=forge$u.util.encodeUtf8(ce));var Ae=ce.length;oe.messageLength+=Ae,Ae=[Ae/4294967296>>>0,Ae>>>0];for(var pe=oe.fullMessageLength.length-1;pe>=0;--pe)oe.fullMessageLength[pe]+=Ae[1],Ae[1]=Ae[0]+(oe.fullMessageLength[pe]/4294967296>>>0),oe.fullMessageLength[pe]=oe.fullMessageLength[pe]>>>0,Ae[0]=Ae[1]/4294967296>>>0;return J.putBytes(ce),_update$3(K,ne,J),(J.read>2048||J.length()===0)&&J.compact(),oe},oe.digest=function(){var ce=forge$u.util.createBuffer();ce.putBytes(J.bytes());var ue=oe.fullMessageLength[oe.fullMessageLength.length-1]+oe.messageLengthSize,Ae=ue&oe.blockLength-1;ce.putBytes(_padding$3.substr(0,oe.blockLength-Ae));for(var pe,xe=0,me=oe.fullMessageLength.length-1;me>=0;--me)pe=oe.fullMessageLength[me]*8+xe,xe=pe/4294967296>>>0,ce.putInt32Le(pe>>>0);var ge={h0:K.h0,h1:K.h1,h2:K.h2,h3:K.h3};_update$3(ge,ne,ce);var ye=forge$u.util.createBuffer();return ye.putInt32Le(ge.h0),ye.putInt32Le(ge.h1),ye.putInt32Le(ge.h2),ye.putInt32Le(ge.h3),ye},oe};var _padding$3=null,_g=null,_r=null,_k$2=null,_initialized$3=!1;function _init$3(){_padding$3="",_padding$3+=forge$u.util.fillString("\0",64),_g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],_r=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],_k$2=new Array(64);for(var K=0;K<64;++K)_k$2[K]=Math.floor(Math.abs(Math.sin(K+1))*4294967296);_initialized$3=!0}function _update$3(K,J,ne){for(var oe,ce,ue,Ae,pe,xe,me,ge,ye=ne.length();ye>=64;){for(ce=K.h0,ue=K.h1,Ae=K.h2,pe=K.h3,ge=0;ge<16;++ge)J[ge]=ne.getInt32Le(),xe=pe^ue&(Ae^pe),oe=ce+xe+_k$2[ge]+J[ge],me=_r[ge],ce=pe,pe=Ae,Ae=ue,ue+=oe<<me|oe>>>32-me;for(;ge<32;++ge)xe=Ae^pe&(ue^Ae),oe=ce+xe+_k$2[ge]+J[_g[ge]],me=_r[ge],ce=pe,pe=Ae,Ae=ue,ue+=oe<<me|oe>>>32-me;for(;ge<48;++ge)xe=ue^Ae^pe,oe=ce+xe+_k$2[ge]+J[_g[ge]],me=_r[ge],ce=pe,pe=Ae,Ae=ue,ue+=oe<<me|oe>>>32-me;for(;ge<64;++ge)xe=Ae^(ue|~pe),oe=ce+xe+_k$2[ge]+J[_g[ge]],me=_r[ge],ce=pe,pe=Ae,Ae=ue,ue+=oe<<me|oe>>>32-me;K.h0=K.h0+ce|0,K.h1=K.h1+ue|0,K.h2=K.h2+Ae|0,K.h3=K.h3+pe|0,ye-=64}}var forge$t=forge$D,pem$2=forge$t.pem=forge$t.pem||{};pem$2.encode=function(K,J){J=J||{};var ne="-----BEGIN "+K.type+`-----\r
`,oe;if(K.procType&&(oe={name:"Proc-Type",values:[String(K.procType.version),K.procType.type]},ne+=foldHeader(oe)),K.contentDomain&&(oe={name:"Content-Domain",values:[K.contentDomain]},ne+=foldHeader(oe)),K.dekInfo&&(oe={name:"DEK-Info",values:[K.dekInfo.algorithm]},K.dekInfo.parameters&&oe.values.push(K.dekInfo.parameters),ne+=foldHeader(oe)),K.headers)for(var ce=0;ce<K.headers.length;++ce)ne+=foldHeader(K.headers[ce]);return K.procType&&(ne+=`\r
`),ne+=forge$t.util.encode64(K.body,J.maxline||64)+`\r
`,ne+="-----END "+K.type+`-----\r
`,ne};pem$2.decode=function(K){for(var J=[],ne=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,oe=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,ce=/\r?\n/,ue;ue=ne.exec(K),!!ue;){var Ae=ue[1];Ae==="NEW CERTIFICATE REQUEST"&&(Ae="CERTIFICATE REQUEST");var pe={type:Ae,procType:null,contentDomain:null,dekInfo:null,headers:[],body:forge$t.util.decode64(ue[3])};if(J.push(pe),!!ue[2]){for(var xe=ue[2].split(ce),me=0;ue&&me<xe.length;){for(var ge=xe[me].replace(/\s+$/,""),ye=me+1;ye<xe.length;++ye){var Se=xe[ye];if(!/\s/.test(Se[0]))break;ge+=Se,me=ye}if(ue=ge.match(oe),ue){for(var Te={name:ue[1],values:[]},Ne=ue[2].split(","),$e=0;$e<Ne.length;++$e)Te.values.push(ltrim(Ne[$e]));if(pe.procType)if(!pe.contentDomain&&Te.name==="Content-Domain")pe.contentDomain=Ne[0]||"";else if(!pe.dekInfo&&Te.name==="DEK-Info"){if(Te.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');pe.dekInfo={algorithm:Ne[0],parameters:Ne[1]||null}}else pe.headers.push(Te);else{if(Te.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(Te.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');pe.procType={version:Ne[0],type:Ne[1]}}}++me}if(pe.procType==="ENCRYPTED"&&!pe.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(J.length===0)throw new Error("Invalid PEM formatted message.");return J};function foldHeader(K){for(var J=K.name+": ",ne=[],oe=function(xe,me){return" "+me},ce=0;ce<K.values.length;++ce)ne.push(K.values[ce].replace(/^(\S+\r\n)/,oe));J+=ne.join(",")+`\r
`;for(var ue=0,Ae=-1,ce=0;ce<J.length;++ce,++ue)if(ue>65&&Ae!==-1){var pe=J[Ae];pe===","?(++Ae,J=J.substr(0,Ae)+`\r
 `+J.substr(Ae)):J=J.substr(0,Ae)+`\r
`+pe+J.substr(Ae+1),ue=ce-Ae-1,Ae=-1,++ce}else(J[ce]===" "||J[ce]==="	"||J[ce]===",")&&(Ae=ce);return J}function ltrim(K){return K.replace(/^\s+/,"")}var forge$s=forge$D;forge$s.des=forge$s.des||{};forge$s.des.startEncrypting=function(K,J,ne,oe){var ce=_createCipher({key:K,output:ne,decrypt:!1,mode:oe||(J===null?"ECB":"CBC")});return ce.start(J),ce};forge$s.des.createEncryptionCipher=function(K,J){return _createCipher({key:K,output:null,decrypt:!1,mode:J})};forge$s.des.startDecrypting=function(K,J,ne,oe){var ce=_createCipher({key:K,output:ne,decrypt:!0,mode:oe||(J===null?"ECB":"CBC")});return ce.start(J),ce};forge$s.des.createDecryptionCipher=function(K,J){return _createCipher({key:K,output:null,decrypt:!0,mode:J})};forge$s.des.Algorithm=function(K,J){var ne=this;ne.name=K,ne.mode=new J({blockSize:8,cipher:{encrypt:function(oe,ce){return _updateBlock(ne._keys,oe,ce,!1)},decrypt:function(oe,ce){return _updateBlock(ne._keys,oe,ce,!0)}}}),ne._init=!1};forge$s.des.Algorithm.prototype.initialize=function(K){if(!this._init){var J=forge$s.util.createBuffer(K.key);if(this.name.indexOf("3DES")===0&&J.length()!==24)throw new Error("Invalid Triple-DES key size: "+J.length()*8);this._keys=_createKeys(J),this._init=!0}};registerAlgorithm("DES-ECB",forge$s.cipher.modes.ecb);registerAlgorithm("DES-CBC",forge$s.cipher.modes.cbc);registerAlgorithm("DES-CFB",forge$s.cipher.modes.cfb);registerAlgorithm("DES-OFB",forge$s.cipher.modes.ofb);registerAlgorithm("DES-CTR",forge$s.cipher.modes.ctr);registerAlgorithm("3DES-ECB",forge$s.cipher.modes.ecb);registerAlgorithm("3DES-CBC",forge$s.cipher.modes.cbc);registerAlgorithm("3DES-CFB",forge$s.cipher.modes.cfb);registerAlgorithm("3DES-OFB",forge$s.cipher.modes.ofb);registerAlgorithm("3DES-CTR",forge$s.cipher.modes.ctr);function registerAlgorithm(K,J){var ne=function(){return new forge$s.des.Algorithm(K,J)};forge$s.cipher.registerAlgorithm(K,ne)}var spfunction1=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],spfunction2=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],spfunction3=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],spfunction4=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],spfunction5=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],spfunction6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],spfunction7=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],spfunction8=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function _createKeys(K){for(var J=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],ne=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],oe=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],ce=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],ue=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],Ae=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],pe=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],xe=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],me=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],ge=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],ye=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],Se=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],Te=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],Ne=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],$e=K.length()>8?3:1,ke=[],je=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],Ke=0,Ye,ze=0;ze<$e;ze++){var Xe=K.getInt32(),Je=K.getInt32();Ye=(Xe>>>4^Je)&252645135,Je^=Ye,Xe^=Ye<<4,Ye=(Je>>>-16^Xe)&65535,Xe^=Ye,Je^=Ye<<-16,Ye=(Xe>>>2^Je)&858993459,Je^=Ye,Xe^=Ye<<2,Ye=(Je>>>-16^Xe)&65535,Xe^=Ye,Je^=Ye<<-16,Ye=(Xe>>>1^Je)&1431655765,Je^=Ye,Xe^=Ye<<1,Ye=(Je>>>8^Xe)&16711935,Xe^=Ye,Je^=Ye<<8,Ye=(Xe>>>1^Je)&1431655765,Je^=Ye,Xe^=Ye<<1,Ye=Xe<<8|Je>>>20&240,Xe=Je<<24|Je<<8&16711680|Je>>>8&65280|Je>>>24&240,Je=Ye;for(var rt=0;rt<je.length;++rt){je[rt]?(Xe=Xe<<2|Xe>>>26,Je=Je<<2|Je>>>26):(Xe=Xe<<1|Xe>>>27,Je=Je<<1|Je>>>27),Xe&=-15,Je&=-15;var Ze=J[Xe>>>28]|ne[Xe>>>24&15]|oe[Xe>>>20&15]|ce[Xe>>>16&15]|ue[Xe>>>12&15]|Ae[Xe>>>8&15]|pe[Xe>>>4&15],et=xe[Je>>>28]|me[Je>>>24&15]|ge[Je>>>20&15]|ye[Je>>>16&15]|Se[Je>>>12&15]|Te[Je>>>8&15]|Ne[Je>>>4&15];Ye=(et>>>16^Ze)&65535,ke[Ke++]=Ze^Ye,ke[Ke++]=et^Ye<<16}}return ke}function _updateBlock(K,J,ne,oe){var ce=K.length===32?3:9,ue;ce===3?ue=oe?[30,-2,-2]:[0,32,2]:ue=oe?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var Ae,pe=J[0],xe=J[1];Ae=(pe>>>4^xe)&252645135,xe^=Ae,pe^=Ae<<4,Ae=(pe>>>16^xe)&65535,xe^=Ae,pe^=Ae<<16,Ae=(xe>>>2^pe)&858993459,pe^=Ae,xe^=Ae<<2,Ae=(xe>>>8^pe)&16711935,pe^=Ae,xe^=Ae<<8,Ae=(pe>>>1^xe)&1431655765,xe^=Ae,pe^=Ae<<1,pe=pe<<1|pe>>>31,xe=xe<<1|xe>>>31;for(var me=0;me<ce;me+=3){for(var ge=ue[me+1],ye=ue[me+2],Se=ue[me];Se!=ge;Se+=ye){var Te=xe^K[Se],Ne=(xe>>>4|xe<<28)^K[Se+1];Ae=pe,pe=xe,xe=Ae^(spfunction2[Te>>>24&63]|spfunction4[Te>>>16&63]|spfunction6[Te>>>8&63]|spfunction8[Te&63]|spfunction1[Ne>>>24&63]|spfunction3[Ne>>>16&63]|spfunction5[Ne>>>8&63]|spfunction7[Ne&63])}Ae=pe,pe=xe,xe=Ae}pe=pe>>>1|pe<<31,xe=xe>>>1|xe<<31,Ae=(pe>>>1^xe)&1431655765,xe^=Ae,pe^=Ae<<1,Ae=(xe>>>8^pe)&16711935,pe^=Ae,xe^=Ae<<8,Ae=(xe>>>2^pe)&858993459,pe^=Ae,xe^=Ae<<2,Ae=(pe>>>16^xe)&65535,xe^=Ae,pe^=Ae<<16,Ae=(pe>>>4^xe)&252645135,xe^=Ae,pe^=Ae<<4,ne[0]=pe,ne[1]=xe}function _createCipher(K){K=K||{};var J=(K.mode||"CBC").toUpperCase(),ne="DES-"+J,oe;K.decrypt?oe=forge$s.cipher.createDecipher(ne,K.key):oe=forge$s.cipher.createCipher(ne,K.key);var ce=oe.start;return oe.start=function(ue,Ae){var pe=null;Ae instanceof forge$s.util.ByteBuffer&&(pe=Ae,Ae={}),Ae=Ae||{},Ae.output=pe,Ae.iv=ue,ce.call(oe,Ae)},oe}var cryptoBrowserify={},browser$a={exports:{}},hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$a.exports;hasRequiredBrowser$a=1;var K=65536,J=4294967295;function ne(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var oe=requireSafeBuffer$1().Buffer,ce=commonjsGlobal.crypto||commonjsGlobal.msCrypto;ce&&ce.getRandomValues?browser$a.exports=ue:browser$a.exports=ne;function ue(Ae,pe){if(Ae>J)throw new RangeError("requested too many random bytes");var xe=oe.allocUnsafe(Ae);if(Ae>0)if(Ae>K)for(var me=0;me<Ae;me+=K)ce.getRandomValues(xe.slice(me,me+K));else ce.getRandomValues(xe);return typeof pe=="function"?process$1.nextTick(function(){pe(null,xe)}):xe}return browser$a.exports}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var K=requireSafeBuffer$1().Buffer,J=requireStreamBrowserify().Transform,ne=requireInherits_browser();function oe(ue,Ae){if(!K.isBuffer(ue)&&typeof ue!="string")throw new TypeError(Ae+" must be a string or a buffer")}function ce(ue){J.call(this),this._block=K.allocUnsafe(ue),this._blockSize=ue,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return ne(ce,J),ce.prototype._transform=function(ue,Ae,pe){var xe=null;try{this.update(ue,Ae)}catch(me){xe=me}pe(xe)},ce.prototype._flush=function(ue){var Ae=null;try{this.push(this.digest())}catch(pe){Ae=pe}ue(Ae)},ce.prototype.update=function(ue,Ae){if(oe(ue,"Data"),this._finalized)throw new Error("Digest already called");K.isBuffer(ue)||(ue=K.from(ue,Ae));for(var pe=this._block,xe=0;this._blockOffset+ue.length-xe>=this._blockSize;){for(var me=this._blockOffset;me<this._blockSize;)pe[me++]=ue[xe++];this._update(),this._blockOffset=0}for(;xe<ue.length;)pe[this._blockOffset++]=ue[xe++];for(var ge=0,ye=ue.length*8;ye>0;++ge)this._length[ge]+=ye,ye=this._length[ge]/4294967296|0,ye>0&&(this._length[ge]-=4294967296*ye);return this},ce.prototype._update=function(){throw new Error("_update is not implemented")},ce.prototype.digest=function(ue){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var Ae=this._digest();ue!==void 0&&(Ae=Ae.toString(ue)),this._block.fill(0),this._blockOffset=0;for(var pe=0;pe<4;++pe)this._length[pe]=0;return Ae},ce.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=ce,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var K=requireInherits_browser(),J=requireHashBase(),ne=requireSafeBuffer$1().Buffer,oe=new Array(16);function ce(){J.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}K(ce,J),ce.prototype._update=function(){for(var ge=oe,ye=0;ye<16;++ye)ge[ye]=this._block.readInt32LE(ye*4);var Se=this._a,Te=this._b,Ne=this._c,$e=this._d;Se=Ae(Se,Te,Ne,$e,ge[0],3614090360,7),$e=Ae($e,Se,Te,Ne,ge[1],3905402710,12),Ne=Ae(Ne,$e,Se,Te,ge[2],606105819,17),Te=Ae(Te,Ne,$e,Se,ge[3],3250441966,22),Se=Ae(Se,Te,Ne,$e,ge[4],4118548399,7),$e=Ae($e,Se,Te,Ne,ge[5],1200080426,12),Ne=Ae(Ne,$e,Se,Te,ge[6],2821735955,17),Te=Ae(Te,Ne,$e,Se,ge[7],4249261313,22),Se=Ae(Se,Te,Ne,$e,ge[8],1770035416,7),$e=Ae($e,Se,Te,Ne,ge[9],2336552879,12),Ne=Ae(Ne,$e,Se,Te,ge[10],4294925233,17),Te=Ae(Te,Ne,$e,Se,ge[11],2304563134,22),Se=Ae(Se,Te,Ne,$e,ge[12],1804603682,7),$e=Ae($e,Se,Te,Ne,ge[13],4254626195,12),Ne=Ae(Ne,$e,Se,Te,ge[14],2792965006,17),Te=Ae(Te,Ne,$e,Se,ge[15],1236535329,22),Se=pe(Se,Te,Ne,$e,ge[1],4129170786,5),$e=pe($e,Se,Te,Ne,ge[6],3225465664,9),Ne=pe(Ne,$e,Se,Te,ge[11],643717713,14),Te=pe(Te,Ne,$e,Se,ge[0],3921069994,20),Se=pe(Se,Te,Ne,$e,ge[5],3593408605,5),$e=pe($e,Se,Te,Ne,ge[10],38016083,9),Ne=pe(Ne,$e,Se,Te,ge[15],3634488961,14),Te=pe(Te,Ne,$e,Se,ge[4],3889429448,20),Se=pe(Se,Te,Ne,$e,ge[9],568446438,5),$e=pe($e,Se,Te,Ne,ge[14],3275163606,9),Ne=pe(Ne,$e,Se,Te,ge[3],4107603335,14),Te=pe(Te,Ne,$e,Se,ge[8],1163531501,20),Se=pe(Se,Te,Ne,$e,ge[13],2850285829,5),$e=pe($e,Se,Te,Ne,ge[2],4243563512,9),Ne=pe(Ne,$e,Se,Te,ge[7],1735328473,14),Te=pe(Te,Ne,$e,Se,ge[12],2368359562,20),Se=xe(Se,Te,Ne,$e,ge[5],4294588738,4),$e=xe($e,Se,Te,Ne,ge[8],2272392833,11),Ne=xe(Ne,$e,Se,Te,ge[11],1839030562,16),Te=xe(Te,Ne,$e,Se,ge[14],4259657740,23),Se=xe(Se,Te,Ne,$e,ge[1],2763975236,4),$e=xe($e,Se,Te,Ne,ge[4],1272893353,11),Ne=xe(Ne,$e,Se,Te,ge[7],4139469664,16),Te=xe(Te,Ne,$e,Se,ge[10],3200236656,23),Se=xe(Se,Te,Ne,$e,ge[13],681279174,4),$e=xe($e,Se,Te,Ne,ge[0],3936430074,11),Ne=xe(Ne,$e,Se,Te,ge[3],3572445317,16),Te=xe(Te,Ne,$e,Se,ge[6],76029189,23),Se=xe(Se,Te,Ne,$e,ge[9],3654602809,4),$e=xe($e,Se,Te,Ne,ge[12],3873151461,11),Ne=xe(Ne,$e,Se,Te,ge[15],530742520,16),Te=xe(Te,Ne,$e,Se,ge[2],3299628645,23),Se=me(Se,Te,Ne,$e,ge[0],4096336452,6),$e=me($e,Se,Te,Ne,ge[7],1126891415,10),Ne=me(Ne,$e,Se,Te,ge[14],2878612391,15),Te=me(Te,Ne,$e,Se,ge[5],4237533241,21),Se=me(Se,Te,Ne,$e,ge[12],1700485571,6),$e=me($e,Se,Te,Ne,ge[3],2399980690,10),Ne=me(Ne,$e,Se,Te,ge[10],4293915773,15),Te=me(Te,Ne,$e,Se,ge[1],2240044497,21),Se=me(Se,Te,Ne,$e,ge[8],1873313359,6),$e=me($e,Se,Te,Ne,ge[15],4264355552,10),Ne=me(Ne,$e,Se,Te,ge[6],2734768916,15),Te=me(Te,Ne,$e,Se,ge[13],1309151649,21),Se=me(Se,Te,Ne,$e,ge[4],4149444226,6),$e=me($e,Se,Te,Ne,ge[11],3174756917,10),Ne=me(Ne,$e,Se,Te,ge[2],718787259,15),Te=me(Te,Ne,$e,Se,ge[9],3951481745,21),this._a=this._a+Se|0,this._b=this._b+Te|0,this._c=this._c+Ne|0,this._d=this._d+$e|0},ce.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var ge=ne.allocUnsafe(16);return ge.writeInt32LE(this._a,0),ge.writeInt32LE(this._b,4),ge.writeInt32LE(this._c,8),ge.writeInt32LE(this._d,12),ge};function ue(ge,ye){return ge<<ye|ge>>>32-ye}function Ae(ge,ye,Se,Te,Ne,$e,ke){return ue(ge+(ye&Se|~ye&Te)+Ne+$e|0,ke)+ye|0}function pe(ge,ye,Se,Te,Ne,$e,ke){return ue(ge+(ye&Te|Se&~Te)+Ne+$e|0,ke)+ye|0}function xe(ge,ye,Se,Te,Ne,$e,ke){return ue(ge+(ye^Se^Te)+Ne+$e|0,ke)+ye|0}function me(ge,ye,Se,Te,Ne,$e,ke){return ue(ge+(Se^(ye|~Te))+Ne+$e|0,ke)+ye|0}return md5_js=ce,md5_js}var ripemd160,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1;var K=require$$0$1.Buffer,J=requireInherits_browser(),ne=requireHashBase(),oe=new Array(16),ce=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ue=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Ae=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],pe=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],xe=[0,1518500249,1859775393,2400959708,2840853838],me=[1352829926,1548603684,1836072691,2053994217,0];function ge(){ne.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}J(ge,ne),ge.prototype._update=function(){for(var je=oe,Ke=0;Ke<16;++Ke)je[Ke]=this._block.readInt32LE(Ke*4);for(var Ye=this._a|0,ze=this._b|0,Xe=this._c|0,Je=this._d|0,rt=this._e|0,Ze=this._a|0,et=this._b|0,nt=this._c|0,Ge=this._d|0,ve=this._e|0,Be=0;Be<80;Be+=1){var Re,Ie;Be<16?(Re=Se(Ye,ze,Xe,Je,rt,je[ce[Be]],xe[0],Ae[Be]),Ie=ke(Ze,et,nt,Ge,ve,je[ue[Be]],me[0],pe[Be])):Be<32?(Re=Te(Ye,ze,Xe,Je,rt,je[ce[Be]],xe[1],Ae[Be]),Ie=$e(Ze,et,nt,Ge,ve,je[ue[Be]],me[1],pe[Be])):Be<48?(Re=Ne(Ye,ze,Xe,Je,rt,je[ce[Be]],xe[2],Ae[Be]),Ie=Ne(Ze,et,nt,Ge,ve,je[ue[Be]],me[2],pe[Be])):Be<64?(Re=$e(Ye,ze,Xe,Je,rt,je[ce[Be]],xe[3],Ae[Be]),Ie=Te(Ze,et,nt,Ge,ve,je[ue[Be]],me[3],pe[Be])):(Re=ke(Ye,ze,Xe,Je,rt,je[ce[Be]],xe[4],Ae[Be]),Ie=Se(Ze,et,nt,Ge,ve,je[ue[Be]],me[4],pe[Be])),Ye=rt,rt=Je,Je=ye(Xe,10),Xe=ze,ze=Re,Ze=ve,ve=Ge,Ge=ye(nt,10),nt=et,et=Ie}var Fe=this._b+Xe+Ge|0;this._b=this._c+Je+ve|0,this._c=this._d+rt+Ze|0,this._d=this._e+Ye+et|0,this._e=this._a+ze+nt|0,this._a=Fe},ge.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var je=K.alloc?K.alloc(20):new K(20);return je.writeInt32LE(this._a,0),je.writeInt32LE(this._b,4),je.writeInt32LE(this._c,8),je.writeInt32LE(this._d,12),je.writeInt32LE(this._e,16),je};function ye(je,Ke){return je<<Ke|je>>>32-Ke}function Se(je,Ke,Ye,ze,Xe,Je,rt,Ze){return ye(je+(Ke^Ye^ze)+Je+rt|0,Ze)+Xe|0}function Te(je,Ke,Ye,ze,Xe,Je,rt,Ze){return ye(je+(Ke&Ye|~Ke&ze)+Je+rt|0,Ze)+Xe|0}function Ne(je,Ke,Ye,ze,Xe,Je,rt,Ze){return ye(je+((Ke|~Ye)^ze)+Je+rt|0,Ze)+Xe|0}function $e(je,Ke,Ye,ze,Xe,Je,rt,Ze){return ye(je+(Ke&ze|Ye&~ze)+Je+rt|0,Ze)+Xe|0}function ke(je,Ke,Ye,ze,Xe,Je,rt,Ze){return ye(je+(Ke^(Ye|~ze))+Je+rt|0,Ze)+Xe|0}return ripemd160=ge,ripemd160}var sha_js={exports:{}},hash$2,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$2;hasRequiredHash$1=1;var K=requireSafeBuffer$1().Buffer;function J(ne,oe){this._block=K.alloc(ne),this._finalSize=oe,this._blockSize=ne,this._len=0}return J.prototype.update=function(ne,oe){typeof ne=="string"&&(oe=oe||"utf8",ne=K.from(ne,oe));for(var ce=this._block,ue=this._blockSize,Ae=ne.length,pe=this._len,xe=0;xe<Ae;){for(var me=pe%ue,ge=Math.min(Ae-xe,ue-me),ye=0;ye<ge;ye++)ce[me+ye]=ne[xe+ye];pe+=ge,xe+=ge,pe%ue===0&&this._update(ce)}return this._len+=Ae,this},J.prototype.digest=function(ne){var oe=this._len%this._blockSize;this._block[oe]=128,this._block.fill(0,oe+1),oe>=this._finalSize&&(this._update(this._block),this._block.fill(0));var ce=this._len*8;if(ce<=4294967295)this._block.writeUInt32BE(ce,this._blockSize-4);else{var ue=(ce&4294967295)>>>0,Ae=(ce-ue)/4294967296;this._block.writeUInt32BE(Ae,this._blockSize-8),this._block.writeUInt32BE(ue,this._blockSize-4)}this._update(this._block);var pe=this._hash();return ne?pe.toString(ne):pe},J.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$2=J,hash$2}var sha$1,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var K=requireInherits_browser(),J=requireHash$1(),ne=requireSafeBuffer$1().Buffer,oe=[1518500249,1859775393,-1894007588,-899497514],ce=new Array(80);function ue(){this.init(),this._w=ce,J.call(this,64,56)}K(ue,J),ue.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Ae(me){return me<<5|me>>>27}function pe(me){return me<<30|me>>>2}function xe(me,ge,ye,Se){return me===0?ge&ye|~ge&Se:me===2?ge&ye|ge&Se|ye&Se:ge^ye^Se}return ue.prototype._update=function(me){for(var ge=this._w,ye=this._a|0,Se=this._b|0,Te=this._c|0,Ne=this._d|0,$e=this._e|0,ke=0;ke<16;++ke)ge[ke]=me.readInt32BE(ke*4);for(;ke<80;++ke)ge[ke]=ge[ke-3]^ge[ke-8]^ge[ke-14]^ge[ke-16];for(var je=0;je<80;++je){var Ke=~~(je/20),Ye=Ae(ye)+xe(Ke,Se,Te,Ne)+$e+ge[je]+oe[Ke]|0;$e=Ne,Ne=Te,Te=pe(Se),Se=ye,ye=Ye}this._a=ye+this._a|0,this._b=Se+this._b|0,this._c=Te+this._c|0,this._d=Ne+this._d|0,this._e=$e+this._e|0},ue.prototype._hash=function(){var me=ne.allocUnsafe(20);return me.writeInt32BE(this._a|0,0),me.writeInt32BE(this._b|0,4),me.writeInt32BE(this._c|0,8),me.writeInt32BE(this._d|0,12),me.writeInt32BE(this._e|0,16),me},sha$1=ue,sha$1}var sha1$1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1$1;hasRequiredSha1=1;var K=requireInherits_browser(),J=requireHash$1(),ne=requireSafeBuffer$1().Buffer,oe=[1518500249,1859775393,-1894007588,-899497514],ce=new Array(80);function ue(){this.init(),this._w=ce,J.call(this,64,56)}K(ue,J),ue.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Ae(ge){return ge<<1|ge>>>31}function pe(ge){return ge<<5|ge>>>27}function xe(ge){return ge<<30|ge>>>2}function me(ge,ye,Se,Te){return ge===0?ye&Se|~ye&Te:ge===2?ye&Se|ye&Te|Se&Te:ye^Se^Te}return ue.prototype._update=function(ge){for(var ye=this._w,Se=this._a|0,Te=this._b|0,Ne=this._c|0,$e=this._d|0,ke=this._e|0,je=0;je<16;++je)ye[je]=ge.readInt32BE(je*4);for(;je<80;++je)ye[je]=Ae(ye[je-3]^ye[je-8]^ye[je-14]^ye[je-16]);for(var Ke=0;Ke<80;++Ke){var Ye=~~(Ke/20),ze=pe(Se)+me(Ye,Te,Ne,$e)+ke+ye[Ke]+oe[Ye]|0;ke=$e,$e=Ne,Ne=xe(Te),Te=Se,Se=ze}this._a=Se+this._a|0,this._b=Te+this._b|0,this._c=Ne+this._c|0,this._d=$e+this._d|0,this._e=ke+this._e|0},ue.prototype._hash=function(){var ge=ne.allocUnsafe(20);return ge.writeInt32BE(this._a|0,0),ge.writeInt32BE(this._b|0,4),ge.writeInt32BE(this._c|0,8),ge.writeInt32BE(this._d|0,12),ge.writeInt32BE(this._e|0,16),ge},sha1$1=ue,sha1$1}var sha256$2,hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$2;hasRequiredSha256=1;var K=requireInherits_browser(),J=requireHash$1(),ne=requireSafeBuffer$1().Buffer,oe=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ce=new Array(64);function ue(){this.init(),this._w=ce,J.call(this,64,56)}K(ue,J),ue.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function Ae(Se,Te,Ne){return Ne^Se&(Te^Ne)}function pe(Se,Te,Ne){return Se&Te|Ne&(Se|Te)}function xe(Se){return(Se>>>2|Se<<30)^(Se>>>13|Se<<19)^(Se>>>22|Se<<10)}function me(Se){return(Se>>>6|Se<<26)^(Se>>>11|Se<<21)^(Se>>>25|Se<<7)}function ge(Se){return(Se>>>7|Se<<25)^(Se>>>18|Se<<14)^Se>>>3}function ye(Se){return(Se>>>17|Se<<15)^(Se>>>19|Se<<13)^Se>>>10}return ue.prototype._update=function(Se){for(var Te=this._w,Ne=this._a|0,$e=this._b|0,ke=this._c|0,je=this._d|0,Ke=this._e|0,Ye=this._f|0,ze=this._g|0,Xe=this._h|0,Je=0;Je<16;++Je)Te[Je]=Se.readInt32BE(Je*4);for(;Je<64;++Je)Te[Je]=ye(Te[Je-2])+Te[Je-7]+ge(Te[Je-15])+Te[Je-16]|0;for(var rt=0;rt<64;++rt){var Ze=Xe+me(Ke)+Ae(Ke,Ye,ze)+oe[rt]+Te[rt]|0,et=xe(Ne)+pe(Ne,$e,ke)|0;Xe=ze,ze=Ye,Ye=Ke,Ke=je+Ze|0,je=ke,ke=$e,$e=Ne,Ne=Ze+et|0}this._a=Ne+this._a|0,this._b=$e+this._b|0,this._c=ke+this._c|0,this._d=je+this._d|0,this._e=Ke+this._e|0,this._f=Ye+this._f|0,this._g=ze+this._g|0,this._h=Xe+this._h|0},ue.prototype._hash=function(){var Se=ne.allocUnsafe(32);return Se.writeInt32BE(this._a,0),Se.writeInt32BE(this._b,4),Se.writeInt32BE(this._c,8),Se.writeInt32BE(this._d,12),Se.writeInt32BE(this._e,16),Se.writeInt32BE(this._f,20),Se.writeInt32BE(this._g,24),Se.writeInt32BE(this._h,28),Se},sha256$2=ue,sha256$2}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var K=requireInherits_browser(),J=requireSha256(),ne=requireHash$1(),oe=requireSafeBuffer$1().Buffer,ce=new Array(64);function ue(){this.init(),this._w=ce,ne.call(this,64,56)}return K(ue,J),ue.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},ue.prototype._hash=function(){var Ae=oe.allocUnsafe(28);return Ae.writeInt32BE(this._a,0),Ae.writeInt32BE(this._b,4),Ae.writeInt32BE(this._c,8),Ae.writeInt32BE(this._d,12),Ae.writeInt32BE(this._e,16),Ae.writeInt32BE(this._f,20),Ae.writeInt32BE(this._g,24),Ae},sha224$1=ue,sha224$1}var sha512$3,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$3;hasRequiredSha512=1;var K=requireInherits_browser(),J=requireHash$1(),ne=requireSafeBuffer$1().Buffer,oe=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],ce=new Array(160);function ue(){this.init(),this._w=ce,J.call(this,128,112)}K(ue,J),ue.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Ae($e,ke,je){return je^$e&(ke^je)}function pe($e,ke,je){return $e&ke|je&($e|ke)}function xe($e,ke){return($e>>>28|ke<<4)^(ke>>>2|$e<<30)^(ke>>>7|$e<<25)}function me($e,ke){return($e>>>14|ke<<18)^($e>>>18|ke<<14)^(ke>>>9|$e<<23)}function ge($e,ke){return($e>>>1|ke<<31)^($e>>>8|ke<<24)^$e>>>7}function ye($e,ke){return($e>>>1|ke<<31)^($e>>>8|ke<<24)^($e>>>7|ke<<25)}function Se($e,ke){return($e>>>19|ke<<13)^(ke>>>29|$e<<3)^$e>>>6}function Te($e,ke){return($e>>>19|ke<<13)^(ke>>>29|$e<<3)^($e>>>6|ke<<26)}function Ne($e,ke){return $e>>>0<ke>>>0?1:0}return ue.prototype._update=function($e){for(var ke=this._w,je=this._ah|0,Ke=this._bh|0,Ye=this._ch|0,ze=this._dh|0,Xe=this._eh|0,Je=this._fh|0,rt=this._gh|0,Ze=this._hh|0,et=this._al|0,nt=this._bl|0,Ge=this._cl|0,ve=this._dl|0,Be=this._el|0,Re=this._fl|0,Ie=this._gl|0,Fe=this._hl|0,qe=0;qe<32;qe+=2)ke[qe]=$e.readInt32BE(qe*4),ke[qe+1]=$e.readInt32BE(qe*4+4);for(;qe<160;qe+=2){var We=ke[qe-30],Ue=ke[qe-15*2+1],_e=ge(We,Ue),Qe=ye(Ue,We);We=ke[qe-2*2],Ue=ke[qe-2*2+1];var tt=Se(We,Ue),it=Te(Ue,We),at=ke[qe-7*2],ot=ke[qe-7*2+1],lt=ke[qe-16*2],st=ke[qe-16*2+1],ut=Qe+ot|0,ft=_e+at+Ne(ut,Qe)|0;ut=ut+it|0,ft=ft+tt+Ne(ut,it)|0,ut=ut+st|0,ft=ft+lt+Ne(ut,st)|0,ke[qe]=ft,ke[qe+1]=ut}for(var dt=0;dt<160;dt+=2){ft=ke[dt],ut=ke[dt+1];var Bt=pe(je,Ke,Ye),pt=pe(et,nt,Ge),mt=xe(je,et),bt=xe(et,je),xt=me(Xe,Be),yt=me(Be,Xe),It=oe[dt],ht=oe[dt+1],gt=Ae(Xe,Je,rt),Pt=Ae(Be,Re,Ie),wt=Fe+yt|0,St=Ze+xt+Ne(wt,Fe)|0;wt=wt+Pt|0,St=St+gt+Ne(wt,Pt)|0,wt=wt+ht|0,St=St+It+Ne(wt,ht)|0,wt=wt+ut|0,St=St+ft+Ne(wt,ut)|0;var Zt=bt+pt|0,Ct=mt+Bt+Ne(Zt,bt)|0;Ze=rt,Fe=Ie,rt=Je,Ie=Re,Je=Xe,Re=Be,Be=ve+wt|0,Xe=ze+St+Ne(Be,ve)|0,ze=Ye,ve=Ge,Ye=Ke,Ge=nt,Ke=je,nt=et,et=wt+Zt|0,je=St+Ct+Ne(et,wt)|0}this._al=this._al+et|0,this._bl=this._bl+nt|0,this._cl=this._cl+Ge|0,this._dl=this._dl+ve|0,this._el=this._el+Be|0,this._fl=this._fl+Re|0,this._gl=this._gl+Ie|0,this._hl=this._hl+Fe|0,this._ah=this._ah+je+Ne(this._al,et)|0,this._bh=this._bh+Ke+Ne(this._bl,nt)|0,this._ch=this._ch+Ye+Ne(this._cl,Ge)|0,this._dh=this._dh+ze+Ne(this._dl,ve)|0,this._eh=this._eh+Xe+Ne(this._el,Be)|0,this._fh=this._fh+Je+Ne(this._fl,Re)|0,this._gh=this._gh+rt+Ne(this._gl,Ie)|0,this._hh=this._hh+Ze+Ne(this._hl,Fe)|0},ue.prototype._hash=function(){var $e=ne.allocUnsafe(64);function ke(je,Ke,Ye){$e.writeInt32BE(je,Ye),$e.writeInt32BE(Ke,Ye+4)}return ke(this._ah,this._al,0),ke(this._bh,this._bl,8),ke(this._ch,this._cl,16),ke(this._dh,this._dl,24),ke(this._eh,this._el,32),ke(this._fh,this._fl,40),ke(this._gh,this._gl,48),ke(this._hh,this._hl,56),$e},sha512$3=ue,sha512$3}var sha384$2,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$2;hasRequiredSha384=1;var K=requireInherits_browser(),J=requireSha512(),ne=requireHash$1(),oe=requireSafeBuffer$1().Buffer,ce=new Array(160);function ue(){this.init(),this._w=ce,ne.call(this,128,112)}return K(ue,J),ue.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},ue.prototype._hash=function(){var Ae=oe.allocUnsafe(48);function pe(xe,me,ge){Ae.writeInt32BE(xe,ge),Ae.writeInt32BE(me,ge+4)}return pe(this._ah,this._al,0),pe(this._bh,this._bl,8),pe(this._ch,this._cl,16),pe(this._dh,this._dl,24),pe(this._eh,this._el,32),pe(this._fh,this._fl,40),Ae},sha384$2=ue,sha384$2}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var K=sha_js.exports=function(ne){ne=ne.toLowerCase();var oe=K[ne];if(!oe)throw new Error(ne+" is not supported (we accept pull requests)");return new oe};return K.sha=requireSha$1(),K.sha1=requireSha1(),K.sha224=requireSha224(),K.sha256=requireSha256(),K.sha384=requireSha384(),K.sha512=requireSha512(),sha_js.exports}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var K=requireSafeBuffer$1().Buffer,J=requireStreamBrowserify().Transform,ne=requireString_decoder().StringDecoder,oe=requireInherits_browser();function ce(ue){J.call(this),this.hashMode=typeof ue=="string",this.hashMode?this[ue]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return oe(ce,J),ce.prototype.update=function(ue,Ae,pe){typeof ue=="string"&&(ue=K.from(ue,Ae));var xe=this._update(ue);return this.hashMode?this:(pe&&(xe=this._toString(xe,pe)),xe)},ce.prototype.setAutoPadding=function(){},ce.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},ce.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},ce.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},ce.prototype._transform=function(ue,Ae,pe){var xe;try{this.hashMode?this._update(ue):this.push(this._update(ue))}catch(me){xe=me}finally{pe(xe)}},ce.prototype._flush=function(ue){var Ae;try{this.push(this.__final())}catch(pe){Ae=pe}ue(Ae)},ce.prototype._finalOrDigest=function(ue){var Ae=this.__final()||K.alloc(0);return ue&&(Ae=this._toString(Ae,ue,!0)),Ae},ce.prototype._toString=function(ue,Ae,pe){if(this._decoder||(this._decoder=new ne(Ae),this._encoding=Ae),this._encoding!==Ae)throw new Error("can't switch encodings");var xe=this._decoder.write(ue);return pe&&(xe+=this._decoder.end()),xe},cipherBase=ce,cipherBase}var browser$9,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$9;hasRequiredBrowser$9=1;var K=requireInherits_browser(),J=requireMd5_js(),ne=requireRipemd160(),oe=requireSha_js(),ce=requireCipherBase();function ue(Ae){ce.call(this,"digest"),this._hash=Ae}return K(ue,ce),ue.prototype._update=function(Ae){this._hash.update(Ae)},ue.prototype._final=function(){return this._hash.digest()},browser$9=function(pe){return pe=pe.toLowerCase(),pe==="md5"?new J:pe==="rmd160"||pe==="ripemd160"?new ne:new ue(oe(pe))},browser$9}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var K=requireInherits_browser(),J=requireSafeBuffer$1().Buffer,ne=requireCipherBase(),oe=J.alloc(128),ce=64;function ue(Ae,pe){ne.call(this,"digest"),typeof pe=="string"&&(pe=J.from(pe)),this._alg=Ae,this._key=pe,pe.length>ce?pe=Ae(pe):pe.length<ce&&(pe=J.concat([pe,oe],ce));for(var xe=this._ipad=J.allocUnsafe(ce),me=this._opad=J.allocUnsafe(ce),ge=0;ge<ce;ge++)xe[ge]=pe[ge]^54,me[ge]=pe[ge]^92;this._hash=[xe]}return K(ue,ne),ue.prototype._update=function(Ae){this._hash.push(Ae)},ue.prototype._final=function(){var Ae=this._alg(J.concat(this._hash));return this._alg(J.concat([this._opad,Ae]))},legacy=ue,legacy}var md5,hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5;hasRequiredMd5=1;var K=requireMd5_js();return md5=function(J){return new K().update(J).digest()},md5}var browser$8,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$8;hasRequiredBrowser$8=1;var K=requireInherits_browser(),J=requireLegacy(),ne=requireCipherBase(),oe=requireSafeBuffer$1().Buffer,ce=requireMd5(),ue=requireRipemd160(),Ae=requireSha_js(),pe=oe.alloc(128);function xe(me,ge){ne.call(this,"digest"),typeof ge=="string"&&(ge=oe.from(ge));var ye=me==="sha512"||me==="sha384"?128:64;if(this._alg=me,this._key=ge,ge.length>ye){var Se=me==="rmd160"?new ue:Ae(me);ge=Se.update(ge).digest()}else ge.length<ye&&(ge=oe.concat([ge,pe],ye));for(var Te=this._ipad=oe.allocUnsafe(ye),Ne=this._opad=oe.allocUnsafe(ye),$e=0;$e<ye;$e++)Te[$e]=ge[$e]^54,Ne[$e]=ge[$e]^92;this._hash=me==="rmd160"?new ue:Ae(me),this._hash.update(Te)}return K(xe,ne),xe.prototype._update=function(me){this._hash.update(me)},xe.prototype._final=function(){var me=this._hash.digest(),ge=this._alg==="rmd160"?new ue:Ae(this._alg);return ge.update(this._opad).update(me).digest()},browser$8=function(ge,ye){return ge=ge.toLowerCase(),ge==="rmd160"||ge==="ripemd160"?new xe("rmd160",ye):ge==="md5"?new J(ce,ye):new xe(ge,ye)},browser$8}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$1={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384$1={sign:"ecdsa",hash:"sha384",id:""},sha512$2={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$1,sha224,sha384:sha384$1,sha512:sha512$2,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6),algos}var browser$7={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var K=Math.pow(2,30)-1;return precondition=function(J,ne){if(typeof J!="number")throw new TypeError("Iterations not a number");if(J<0)throw new TypeError("Bad iterations");if(typeof ne!="number")throw new TypeError("Key length not a number");if(ne<0||ne>K||ne!==ne)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var K;if(commonjsGlobal.process&&commonjsGlobal.process.browser)K="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var J=parseInt(process$1.version.split(".")[0].slice(1),10);K=J>=6?"utf-8":"binary"}else K="utf-8";return defaultEncoding_1=K,defaultEncoding_1}var toBuffer,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer;hasRequiredToBuffer=1;var K=requireSafeBuffer$1().Buffer;return toBuffer=function(J,ne,oe){if(K.isBuffer(J))return J;if(typeof J=="string")return K.from(J,ne);if(ArrayBuffer.isView(J))return K.from(J.buffer);throw new TypeError(oe+" must be a string, a Buffer, a typed array or a DataView")},toBuffer}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var K=requireMd5(),J=requireRipemd160(),ne=requireSha_js(),oe=requireSafeBuffer$1().Buffer,ce=requirePrecondition(),ue=requireDefaultEncoding(),Ae=requireToBuffer(),pe=oe.alloc(128),xe={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function me(Se,Te,Ne){var $e=ge(Se),ke=Se==="sha512"||Se==="sha384"?128:64;Te.length>ke?Te=$e(Te):Te.length<ke&&(Te=oe.concat([Te,pe],ke));for(var je=oe.allocUnsafe(ke+xe[Se]),Ke=oe.allocUnsafe(ke+xe[Se]),Ye=0;Ye<ke;Ye++)je[Ye]=Te[Ye]^54,Ke[Ye]=Te[Ye]^92;var ze=oe.allocUnsafe(ke+Ne+4);je.copy(ze,0,0,ke),this.ipad1=ze,this.ipad2=je,this.opad=Ke,this.alg=Se,this.blocksize=ke,this.hash=$e,this.size=xe[Se]}me.prototype.run=function(Se,Te){Se.copy(Te,this.blocksize);var Ne=this.hash(Te);return Ne.copy(this.opad,this.blocksize),this.hash(this.opad)};function ge(Se){function Te($e){return ne(Se).update($e).digest()}function Ne($e){return new J().update($e).digest()}return Se==="rmd160"||Se==="ripemd160"?Ne:Se==="md5"?K:Te}function ye(Se,Te,Ne,$e,ke){ce(Ne,$e),Se=Ae(Se,ue,"Password"),Te=Ae(Te,ue,"Salt"),ke=ke||"sha1";var je=new me(ke,Se,Te.length),Ke=oe.allocUnsafe($e),Ye=oe.allocUnsafe(Te.length+4);Te.copy(Ye,0,0,Te.length);for(var ze=0,Xe=xe[ke],Je=Math.ceil($e/Xe),rt=1;rt<=Je;rt++){Ye.writeUInt32BE(rt,Te.length);for(var Ze=je.run(Ye,je.ipad1),et=Ze,nt=1;nt<Ne;nt++){et=je.run(et,je.ipad2);for(var Ge=0;Ge<Xe;Ge++)Ze[Ge]^=et[Ge]}Ze.copy(Ke,ze),ze+=Xe}return Ke}return syncBrowser=ye,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var K=requireSafeBuffer$1().Buffer,J=requirePrecondition(),ne=requireDefaultEncoding(),oe=requireSyncBrowser(),ce=requireToBuffer(),ue,Ae=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,pe={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},xe=[];function me(Ne){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!Ae||!Ae.importKey||!Ae.deriveBits)return Promise.resolve(!1);if(xe[Ne]!==void 0)return xe[Ne];ue=ue||K.alloc(8);var $e=Se(ue,ue,10,128,Ne).then(function(){return!0}).catch(function(){return!1});return xe[Ne]=$e,$e}var ge;function ye(){return ge||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?ge=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?ge=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?ge=commonjsGlobal.setImmediate:ge=commonjsGlobal.setTimeout,ge)}function Se(Ne,$e,ke,je,Ke){return Ae.importKey("raw",Ne,{name:"PBKDF2"},!1,["deriveBits"]).then(function(Ye){return Ae.deriveBits({name:"PBKDF2",salt:$e,iterations:ke,hash:{name:Ke}},Ye,je<<3)}).then(function(Ye){return K.from(Ye)})}function Te(Ne,$e){Ne.then(function(ke){ye()(function(){$e(null,ke)})},function(ke){ye()(function(){$e(ke)})})}return async=function(Ne,$e,ke,je,Ke,Ye){typeof Ke=="function"&&(Ye=Ke,Ke=void 0),Ke=Ke||"sha1";var ze=pe[Ke.toLowerCase()];if(!ze||typeof commonjsGlobal.Promise!="function"){ye()(function(){var Xe;try{Xe=oe(Ne,$e,ke,je,Ke)}catch(Je){return Ye(Je)}Ye(null,Xe)});return}if(J(ke,je),Ne=ce(Ne,ne,"Password"),$e=ce($e,ne,"Salt"),typeof Ye!="function")throw new Error("No callback provided to pbkdf2");Te(me(ze).then(function(Xe){return Xe?Se(Ne,$e,ke,je,ze):oe(Ne,$e,ke,je,Ke)}),Ye)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$7.pbkdf2=requireAsync(),browser$7.pbkdf2Sync=requireSyncBrowser()),browser$7}var browser$6={},des$1={},utils$3={},hasRequiredUtils$3;function requireUtils$3(){if(hasRequiredUtils$3)return utils$3;hasRequiredUtils$3=1,utils$3.readUInt32BE=function(ce,ue){var Ae=ce[0+ue]<<24|ce[1+ue]<<16|ce[2+ue]<<8|ce[3+ue];return Ae>>>0},utils$3.writeUInt32BE=function(ce,ue,Ae){ce[0+Ae]=ue>>>24,ce[1+Ae]=ue>>>16&255,ce[2+Ae]=ue>>>8&255,ce[3+Ae]=ue&255},utils$3.ip=function(ce,ue,Ae,pe){for(var xe=0,me=0,ge=6;ge>=0;ge-=2){for(var ye=0;ye<=24;ye+=8)xe<<=1,xe|=ue>>>ye+ge&1;for(var ye=0;ye<=24;ye+=8)xe<<=1,xe|=ce>>>ye+ge&1}for(var ge=6;ge>=0;ge-=2){for(var ye=1;ye<=25;ye+=8)me<<=1,me|=ue>>>ye+ge&1;for(var ye=1;ye<=25;ye+=8)me<<=1,me|=ce>>>ye+ge&1}Ae[pe+0]=xe>>>0,Ae[pe+1]=me>>>0},utils$3.rip=function(ce,ue,Ae,pe){for(var xe=0,me=0,ge=0;ge<4;ge++)for(var ye=24;ye>=0;ye-=8)xe<<=1,xe|=ue>>>ye+ge&1,xe<<=1,xe|=ce>>>ye+ge&1;for(var ge=4;ge<8;ge++)for(var ye=24;ye>=0;ye-=8)me<<=1,me|=ue>>>ye+ge&1,me<<=1,me|=ce>>>ye+ge&1;Ae[pe+0]=xe>>>0,Ae[pe+1]=me>>>0},utils$3.pc1=function(ce,ue,Ae,pe){for(var xe=0,me=0,ge=7;ge>=5;ge--){for(var ye=0;ye<=24;ye+=8)xe<<=1,xe|=ue>>ye+ge&1;for(var ye=0;ye<=24;ye+=8)xe<<=1,xe|=ce>>ye+ge&1}for(var ye=0;ye<=24;ye+=8)xe<<=1,xe|=ue>>ye+ge&1;for(var ge=1;ge<=3;ge++){for(var ye=0;ye<=24;ye+=8)me<<=1,me|=ue>>ye+ge&1;for(var ye=0;ye<=24;ye+=8)me<<=1,me|=ce>>ye+ge&1}for(var ye=0;ye<=24;ye+=8)me<<=1,me|=ce>>ye+ge&1;Ae[pe+0]=xe>>>0,Ae[pe+1]=me>>>0},utils$3.r28shl=function(ce,ue){return ce<<ue&268435455|ce>>>28-ue};var K=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$3.pc2=function(ce,ue,Ae,pe){for(var xe=0,me=0,ge=K.length>>>1,ye=0;ye<ge;ye++)xe<<=1,xe|=ce>>>K[ye]&1;for(var ye=ge;ye<K.length;ye++)me<<=1,me|=ue>>>K[ye]&1;Ae[pe+0]=xe>>>0,Ae[pe+1]=me>>>0},utils$3.expand=function(ce,ue,Ae){var pe=0,xe=0;pe=(ce&1)<<5|ce>>>27;for(var me=23;me>=15;me-=4)pe<<=6,pe|=ce>>>me&63;for(var me=11;me>=3;me-=4)xe|=ce>>>me&63,xe<<=6;xe|=(ce&31)<<1|ce>>>31,ue[Ae+0]=pe>>>0,ue[Ae+1]=xe>>>0};var J=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$3.substitute=function(ce,ue){for(var Ae=0,pe=0;pe<4;pe++){var xe=ce>>>18-pe*6&63,me=J[pe*64+xe];Ae<<=4,Ae|=me}for(var pe=0;pe<4;pe++){var xe=ue>>>18-pe*6&63,me=J[4*64+pe*64+xe];Ae<<=4,Ae|=me}return Ae>>>0};var ne=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$3.permute=function(ce){for(var ue=0,Ae=0;Ae<ne.length;Ae++)ue<<=1,ue|=ce>>>ne[Ae]&1;return ue>>>0},utils$3.padSplit=function(ce,ue,Ae){for(var pe=ce.toString(2);pe.length<ue;)pe="0"+pe;for(var xe=[],me=0;me<ue;me+=Ae)xe.push(pe.slice(me,me+Ae));return xe.join(" ")},utils$3}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=K;function K(J,ne){if(!J)throw new Error(ne||"Assertion failed")}return K.equal=function(ne,oe,ce){if(ne!=oe)throw new Error(ce||"Assertion failed: "+ne+" != "+oe)},minimalisticAssert}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var K=requireMinimalisticAssert();function J(ne){this.options=ne,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=ne.padding!==!1}return cipher=J,J.prototype._init=function(){},J.prototype.update=function(oe){return oe.length===0?[]:this.type==="decrypt"?this._updateDecrypt(oe):this._updateEncrypt(oe)},J.prototype._buffer=function(oe,ce){for(var ue=Math.min(this.buffer.length-this.bufferOff,oe.length-ce),Ae=0;Ae<ue;Ae++)this.buffer[this.bufferOff+Ae]=oe[ce+Ae];return this.bufferOff+=ue,ue},J.prototype._flushBuffer=function(oe,ce){return this._update(this.buffer,0,oe,ce),this.bufferOff=0,this.blockSize},J.prototype._updateEncrypt=function(oe){var ce=0,ue=0,Ae=(this.bufferOff+oe.length)/this.blockSize|0,pe=new Array(Ae*this.blockSize);this.bufferOff!==0&&(ce+=this._buffer(oe,ce),this.bufferOff===this.buffer.length&&(ue+=this._flushBuffer(pe,ue)));for(var xe=oe.length-(oe.length-ce)%this.blockSize;ce<xe;ce+=this.blockSize)this._update(oe,ce,pe,ue),ue+=this.blockSize;for(;ce<oe.length;ce++,this.bufferOff++)this.buffer[this.bufferOff]=oe[ce];return pe},J.prototype._updateDecrypt=function(oe){for(var ce=0,ue=0,Ae=Math.ceil((this.bufferOff+oe.length)/this.blockSize)-1,pe=new Array(Ae*this.blockSize);Ae>0;Ae--)ce+=this._buffer(oe,ce),ue+=this._flushBuffer(pe,ue);return ce+=this._buffer(oe,ce),pe},J.prototype.final=function(oe){var ce;oe&&(ce=this.update(oe));var ue;return this.type==="encrypt"?ue=this._finalEncrypt():ue=this._finalDecrypt(),ce?ce.concat(ue):ue},J.prototype._pad=function(oe,ce){if(ce===0)return!1;for(;ce<oe.length;)oe[ce++]=0;return!0},J.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var oe=new Array(this.blockSize);return this._update(this.buffer,0,oe,0),oe},J.prototype._unpad=function(oe){return oe},J.prototype._finalDecrypt=function(){K.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var oe=new Array(this.blockSize);return this._flushBuffer(oe,0),this._unpad(oe)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var K=requireMinimalisticAssert(),J=requireInherits_browser(),ne=requireUtils$3(),oe=requireCipher();function ce(){this.tmp=new Array(2),this.keys=null}function ue(pe){oe.call(this,pe);var xe=new ce;this._desState=xe,this.deriveKeys(xe,pe.key)}J(ue,oe),des=ue,ue.create=function(xe){return new ue(xe)};var Ae=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return ue.prototype.deriveKeys=function(xe,me){xe.keys=new Array(16*2),K.equal(me.length,this.blockSize,"Invalid key length");var ge=ne.readUInt32BE(me,0),ye=ne.readUInt32BE(me,4);ne.pc1(ge,ye,xe.tmp,0),ge=xe.tmp[0],ye=xe.tmp[1];for(var Se=0;Se<xe.keys.length;Se+=2){var Te=Ae[Se>>>1];ge=ne.r28shl(ge,Te),ye=ne.r28shl(ye,Te),ne.pc2(ge,ye,xe.keys,Se)}},ue.prototype._update=function(xe,me,ge,ye){var Se=this._desState,Te=ne.readUInt32BE(xe,me),Ne=ne.readUInt32BE(xe,me+4);ne.ip(Te,Ne,Se.tmp,0),Te=Se.tmp[0],Ne=Se.tmp[1],this.type==="encrypt"?this._encrypt(Se,Te,Ne,Se.tmp,0):this._decrypt(Se,Te,Ne,Se.tmp,0),Te=Se.tmp[0],Ne=Se.tmp[1],ne.writeUInt32BE(ge,Te,ye),ne.writeUInt32BE(ge,Ne,ye+4)},ue.prototype._pad=function(xe,me){if(this.padding===!1)return!1;for(var ge=xe.length-me,ye=me;ye<xe.length;ye++)xe[ye]=ge;return!0},ue.prototype._unpad=function(xe){if(this.padding===!1)return xe;for(var me=xe[xe.length-1],ge=xe.length-me;ge<xe.length;ge++)K.equal(xe[ge],me);return xe.slice(0,xe.length-me)},ue.prototype._encrypt=function(xe,me,ge,ye,Se){for(var Te=me,Ne=ge,$e=0;$e<xe.keys.length;$e+=2){var ke=xe.keys[$e],je=xe.keys[$e+1];ne.expand(Ne,xe.tmp,0),ke^=xe.tmp[0],je^=xe.tmp[1];var Ke=ne.substitute(ke,je),Ye=ne.permute(Ke),ze=Ne;Ne=(Te^Ye)>>>0,Te=ze}ne.rip(Ne,Te,ye,Se)},ue.prototype._decrypt=function(xe,me,ge,ye,Se){for(var Te=ge,Ne=me,$e=xe.keys.length-2;$e>=0;$e-=2){var ke=xe.keys[$e],je=xe.keys[$e+1];ne.expand(Te,xe.tmp,0),ke^=xe.tmp[0],je^=xe.tmp[1];var Ke=ne.substitute(ke,je),Ye=ne.permute(Ke),ze=Te;Te=(Ne^Ye)>>>0,Ne=ze}ne.rip(Te,Ne,ye,Se)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var K=requireMinimalisticAssert(),J=requireInherits_browser(),ne={};function oe(ue){K.equal(ue.length,8,"Invalid IV length"),this.iv=new Array(8);for(var Ae=0;Ae<this.iv.length;Ae++)this.iv[Ae]=ue[Ae]}function ce(ue){function Ae(ge){ue.call(this,ge),this._cbcInit()}J(Ae,ue);for(var pe=Object.keys(ne),xe=0;xe<pe.length;xe++){var me=pe[xe];Ae.prototype[me]=ne[me]}return Ae.create=function(ye){return new Ae(ye)},Ae}return cbc$1.instantiate=ce,ne._cbcInit=function(){var Ae=new oe(this.options.iv);this._cbcState=Ae},ne._update=function(Ae,pe,xe,me){var ge=this._cbcState,ye=this.constructor.super_.prototype,Se=ge.iv;if(this.type==="encrypt"){for(var Te=0;Te<this.blockSize;Te++)Se[Te]^=Ae[pe+Te];ye._update.call(this,Se,0,xe,me);for(var Te=0;Te<this.blockSize;Te++)Se[Te]=xe[me+Te]}else{ye._update.call(this,Ae,pe,xe,me);for(var Te=0;Te<this.blockSize;Te++)xe[me+Te]^=Se[Te];for(var Te=0;Te<this.blockSize;Te++)Se[Te]=Ae[pe+Te]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var K=requireMinimalisticAssert(),J=requireInherits_browser(),ne=requireCipher(),oe=requireDes$1();function ce(Ae,pe){K.equal(pe.length,24,"Invalid key length");var xe=pe.slice(0,8),me=pe.slice(8,16),ge=pe.slice(16,24);Ae==="encrypt"?this.ciphers=[oe.create({type:"encrypt",key:xe}),oe.create({type:"decrypt",key:me}),oe.create({type:"encrypt",key:ge})]:this.ciphers=[oe.create({type:"decrypt",key:ge}),oe.create({type:"encrypt",key:me}),oe.create({type:"decrypt",key:xe})]}function ue(Ae){ne.call(this,Ae);var pe=new ce(this.type,this.options.key);this._edeState=pe}return J(ue,ne),ede=ue,ue.create=function(pe){return new ue(pe)},ue.prototype._update=function(pe,xe,me,ge){var ye=this._edeState;ye.ciphers[0]._update(pe,xe,me,ge),ye.ciphers[1]._update(me,ge,me,ge),ye.ciphers[2]._update(me,ge,me,ge)},ue.prototype._pad=oe.prototype._pad,ue.prototype._unpad=oe.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$3(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var K=requireCipherBase(),J=requireDes(),ne=requireInherits_browser(),oe=requireSafeBuffer$1().Buffer,ce={"des-ede3-cbc":J.CBC.instantiate(J.EDE),"des-ede3":J.EDE,"des-ede-cbc":J.CBC.instantiate(J.EDE),"des-ede":J.EDE,"des-cbc":J.CBC.instantiate(J.DES),"des-ecb":J.DES};ce.des=ce["des-cbc"],ce.des3=ce["des-ede3-cbc"],browserifyDes=ue,ne(ue,K);function ue(Ae){K.call(this);var pe=Ae.mode.toLowerCase(),xe=ce[pe],me;Ae.decrypt?me="decrypt":me="encrypt";var ge=Ae.key;oe.isBuffer(ge)||(ge=oe.from(ge)),(pe==="des-ede"||pe==="des-ede-cbc")&&(ge=oe.concat([ge,ge.slice(0,8)]));var ye=Ae.iv;oe.isBuffer(ye)||(ye=oe.from(ye)),this._des=xe.create({key:ge,iv:ye,type:me})}return ue.prototype._update=function(Ae){return oe.from(this._des.update(Ae))},ue.prototype._final=function(){return oe.from(this._des.final())},browserifyDes}var browser$5={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(K,J){return K._cipher.encryptBlock(J)},ecb.decrypt=function(K,J){return K._cipher.decryptBlock(J)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(J,ne){for(var oe=Math.min(J.length,ne.length),ce=new Buffer(oe),ue=0;ue<oe;++ue)ce[ue]=J[ue]^ne[ue];return ce}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var K=requireBufferXor();return cbc.encrypt=function(J,ne){var oe=K(ne,J._prev);return J._prev=J._cipher.encryptBlock(oe),J._prev},cbc.decrypt=function(J,ne){var oe=J._prev;J._prev=ne;var ce=J._cipher.decryptBlock(ne);return K(ce,oe)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var K=requireSafeBuffer$1().Buffer,J=requireBufferXor();function ne(oe,ce,ue){var Ae=ce.length,pe=J(ce,oe._cache);return oe._cache=oe._cache.slice(Ae),oe._prev=K.concat([oe._prev,ue?ce:pe]),pe}return cfb.encrypt=function(oe,ce,ue){for(var Ae=K.allocUnsafe(0),pe;ce.length;)if(oe._cache.length===0&&(oe._cache=oe._cipher.encryptBlock(oe._prev),oe._prev=K.allocUnsafe(0)),oe._cache.length<=ce.length)pe=oe._cache.length,Ae=K.concat([Ae,ne(oe,ce.slice(0,pe),ue)]),ce=ce.slice(pe);else{Ae=K.concat([Ae,ne(oe,ce,ue)]);break}return Ae},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var K=requireSafeBuffer$1().Buffer;function J(ne,oe,ce){var ue=ne._cipher.encryptBlock(ne._prev),Ae=ue[0]^oe;return ne._prev=K.concat([ne._prev.slice(1),K.from([ce?oe:Ae])]),Ae}return cfb8.encrypt=function(ne,oe,ce){for(var ue=oe.length,Ae=K.allocUnsafe(ue),pe=-1;++pe<ue;)Ae[pe]=J(ne,oe[pe],ce);return Ae},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var K=requireSafeBuffer$1().Buffer;function J(oe,ce,ue){for(var Ae,pe=-1,xe=8,me=0,ge,ye;++pe<xe;)Ae=oe._cipher.encryptBlock(oe._prev),ge=ce&1<<7-pe?128:0,ye=Ae[0]^ge,me+=(ye&128)>>pe%8,oe._prev=ne(oe._prev,ue?ge:ye);return me}function ne(oe,ce){var ue=oe.length,Ae=-1,pe=K.allocUnsafe(oe.length);for(oe=K.concat([oe,K.from([ce])]);++Ae<ue;)pe[Ae]=oe[Ae]<<1|oe[Ae+1]>>7;return pe}return cfb1.encrypt=function(oe,ce,ue){for(var Ae=ce.length,pe=K.allocUnsafe(Ae),xe=-1;++xe<Ae;)pe[xe]=J(oe,ce[xe],ue);return pe},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var K=requireBufferXor();function J(ne){return ne._prev=ne._cipher.encryptBlock(ne._prev),ne._prev}return ofb.encrypt=function(ne,oe){for(;ne._cache.length<oe.length;)ne._cache=Buffer.concat([ne._cache,J(ne)]);var ce=ne._cache.slice(0,oe.length);return ne._cache=ne._cache.slice(oe.length),K(oe,ce)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function K(J){for(var ne=J.length,oe;ne--;)if(oe=J.readUInt8(ne),oe===255)J.writeUInt8(0,ne);else{oe++,J.writeUInt8(oe,ne);break}}return incr32_1=K,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var K=requireBufferXor(),J=requireSafeBuffer$1().Buffer,ne=requireIncr32();function oe(ue){var Ae=ue._cipher.encryptBlockRaw(ue._prev);return ne(ue._prev),Ae}var ce=16;return ctr.encrypt=function(ue,Ae){var pe=Math.ceil(Ae.length/ce),xe=ue._cache.length;ue._cache=J.concat([ue._cache,J.allocUnsafe(pe*ce)]);for(var me=0;me<pe;me++){var ge=oe(ue),ye=xe+me*ce;ue._cache.writeUInt32BE(ge[0],ye+0),ue._cache.writeUInt32BE(ge[1],ye+4),ue._cache.writeUInt32BE(ge[2],ye+8),ue._cache.writeUInt32BE(ge[3],ye+12)}var Se=ue._cache.slice(0,Ae.length);return ue._cache=ue._cache.slice(Ae.length),K(Ae,Se)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var K={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},J=require$$2;for(var ne in J)J[ne].module=K[J[ne].mode];return modes_1=J,modes_1}var aes={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var K=requireSafeBuffer$1().Buffer;function J(pe){K.isBuffer(pe)||(pe=K.from(pe));for(var xe=pe.length/4|0,me=new Array(xe),ge=0;ge<xe;ge++)me[ge]=pe.readUInt32BE(ge*4);return me}function ne(pe){for(var xe=0;xe<pe.length;pe++)pe[xe]=0}function oe(pe,xe,me,ge,ye){for(var Se=me[0],Te=me[1],Ne=me[2],$e=me[3],ke=pe[0]^xe[0],je=pe[1]^xe[1],Ke=pe[2]^xe[2],Ye=pe[3]^xe[3],ze,Xe,Je,rt,Ze=4,et=1;et<ye;et++)ze=Se[ke>>>24]^Te[je>>>16&255]^Ne[Ke>>>8&255]^$e[Ye&255]^xe[Ze++],Xe=Se[je>>>24]^Te[Ke>>>16&255]^Ne[Ye>>>8&255]^$e[ke&255]^xe[Ze++],Je=Se[Ke>>>24]^Te[Ye>>>16&255]^Ne[ke>>>8&255]^$e[je&255]^xe[Ze++],rt=Se[Ye>>>24]^Te[ke>>>16&255]^Ne[je>>>8&255]^$e[Ke&255]^xe[Ze++],ke=ze,je=Xe,Ke=Je,Ye=rt;return ze=(ge[ke>>>24]<<24|ge[je>>>16&255]<<16|ge[Ke>>>8&255]<<8|ge[Ye&255])^xe[Ze++],Xe=(ge[je>>>24]<<24|ge[Ke>>>16&255]<<16|ge[Ye>>>8&255]<<8|ge[ke&255])^xe[Ze++],Je=(ge[Ke>>>24]<<24|ge[Ye>>>16&255]<<16|ge[ke>>>8&255]<<8|ge[je&255])^xe[Ze++],rt=(ge[Ye>>>24]<<24|ge[ke>>>16&255]<<16|ge[je>>>8&255]<<8|ge[Ke&255])^xe[Ze++],ze=ze>>>0,Xe=Xe>>>0,Je=Je>>>0,rt=rt>>>0,[ze,Xe,Je,rt]}var ce=[0,1,2,4,8,16,32,64,128,27,54],ue=function(){for(var pe=new Array(256),xe=0;xe<256;xe++)xe<128?pe[xe]=xe<<1:pe[xe]=xe<<1^283;for(var me=[],ge=[],ye=[[],[],[],[]],Se=[[],[],[],[]],Te=0,Ne=0,$e=0;$e<256;++$e){var ke=Ne^Ne<<1^Ne<<2^Ne<<3^Ne<<4;ke=ke>>>8^ke&255^99,me[Te]=ke,ge[ke]=Te;var je=pe[Te],Ke=pe[je],Ye=pe[Ke],ze=pe[ke]*257^ke*16843008;ye[0][Te]=ze<<24|ze>>>8,ye[1][Te]=ze<<16|ze>>>16,ye[2][Te]=ze<<8|ze>>>24,ye[3][Te]=ze,ze=Ye*16843009^Ke*65537^je*257^Te*16843008,Se[0][ke]=ze<<24|ze>>>8,Se[1][ke]=ze<<16|ze>>>16,Se[2][ke]=ze<<8|ze>>>24,Se[3][ke]=ze,Te===0?Te=Ne=1:(Te=je^pe[pe[pe[Ye^je]]],Ne^=pe[pe[Ne]])}return{SBOX:me,INV_SBOX:ge,SUB_MIX:ye,INV_SUB_MIX:Se}}();function Ae(pe){this._key=J(pe),this._reset()}return Ae.blockSize=4*4,Ae.keySize=256/8,Ae.prototype.blockSize=Ae.blockSize,Ae.prototype.keySize=Ae.keySize,Ae.prototype._reset=function(){for(var pe=this._key,xe=pe.length,me=xe+6,ge=(me+1)*4,ye=[],Se=0;Se<xe;Se++)ye[Se]=pe[Se];for(Se=xe;Se<ge;Se++){var Te=ye[Se-1];Se%xe===0?(Te=Te<<8|Te>>>24,Te=ue.SBOX[Te>>>24]<<24|ue.SBOX[Te>>>16&255]<<16|ue.SBOX[Te>>>8&255]<<8|ue.SBOX[Te&255],Te^=ce[Se/xe|0]<<24):xe>6&&Se%xe===4&&(Te=ue.SBOX[Te>>>24]<<24|ue.SBOX[Te>>>16&255]<<16|ue.SBOX[Te>>>8&255]<<8|ue.SBOX[Te&255]),ye[Se]=ye[Se-xe]^Te}for(var Ne=[],$e=0;$e<ge;$e++){var ke=ge-$e,je=ye[ke-($e%4?0:4)];$e<4||ke<=4?Ne[$e]=je:Ne[$e]=ue.INV_SUB_MIX[0][ue.SBOX[je>>>24]]^ue.INV_SUB_MIX[1][ue.SBOX[je>>>16&255]]^ue.INV_SUB_MIX[2][ue.SBOX[je>>>8&255]]^ue.INV_SUB_MIX[3][ue.SBOX[je&255]]}this._nRounds=me,this._keySchedule=ye,this._invKeySchedule=Ne},Ae.prototype.encryptBlockRaw=function(pe){return pe=J(pe),oe(pe,this._keySchedule,ue.SUB_MIX,ue.SBOX,this._nRounds)},Ae.prototype.encryptBlock=function(pe){var xe=this.encryptBlockRaw(pe),me=K.allocUnsafe(16);return me.writeUInt32BE(xe[0],0),me.writeUInt32BE(xe[1],4),me.writeUInt32BE(xe[2],8),me.writeUInt32BE(xe[3],12),me},Ae.prototype.decryptBlock=function(pe){pe=J(pe);var xe=pe[1];pe[1]=pe[3],pe[3]=xe;var me=oe(pe,this._invKeySchedule,ue.INV_SUB_MIX,ue.INV_SBOX,this._nRounds),ge=K.allocUnsafe(16);return ge.writeUInt32BE(me[0],0),ge.writeUInt32BE(me[3],4),ge.writeUInt32BE(me[2],8),ge.writeUInt32BE(me[1],12),ge},Ae.prototype.scrub=function(){ne(this._keySchedule),ne(this._invKeySchedule),ne(this._key)},aes.AES=Ae,aes}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var K=requireSafeBuffer$1().Buffer,J=K.alloc(16,0);function ne(ue){return[ue.readUInt32BE(0),ue.readUInt32BE(4),ue.readUInt32BE(8),ue.readUInt32BE(12)]}function oe(ue){var Ae=K.allocUnsafe(16);return Ae.writeUInt32BE(ue[0]>>>0,0),Ae.writeUInt32BE(ue[1]>>>0,4),Ae.writeUInt32BE(ue[2]>>>0,8),Ae.writeUInt32BE(ue[3]>>>0,12),Ae}function ce(ue){this.h=ue,this.state=K.alloc(16,0),this.cache=K.allocUnsafe(0)}return ce.prototype.ghash=function(ue){for(var Ae=-1;++Ae<ue.length;)this.state[Ae]^=ue[Ae];this._multiply()},ce.prototype._multiply=function(){for(var ue=ne(this.h),Ae=[0,0,0,0],pe,xe,me,ge=-1;++ge<128;){for(xe=(this.state[~~(ge/8)]&1<<7-ge%8)!==0,xe&&(Ae[0]^=ue[0],Ae[1]^=ue[1],Ae[2]^=ue[2],Ae[3]^=ue[3]),me=(ue[3]&1)!==0,pe=3;pe>0;pe--)ue[pe]=ue[pe]>>>1|(ue[pe-1]&1)<<31;ue[0]=ue[0]>>>1,me&&(ue[0]=ue[0]^225<<24)}this.state=oe(Ae)},ce.prototype.update=function(ue){this.cache=K.concat([this.cache,ue]);for(var Ae;this.cache.length>=16;)Ae=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(Ae)},ce.prototype.final=function(ue,Ae){return this.cache.length&&this.ghash(K.concat([this.cache,J],16)),this.ghash(oe([0,ue,0,Ae])),this.state},ghash=ce,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var K=requireAes(),J=requireSafeBuffer$1().Buffer,ne=requireCipherBase(),oe=requireInherits_browser(),ce=requireGhash(),ue=requireBufferXor(),Ae=requireIncr32();function pe(ge,ye){var Se=0;ge.length!==ye.length&&Se++;for(var Te=Math.min(ge.length,ye.length),Ne=0;Ne<Te;++Ne)Se+=ge[Ne]^ye[Ne];return Se}function xe(ge,ye,Se){if(ye.length===12)return ge._finID=J.concat([ye,J.from([0,0,0,1])]),J.concat([ye,J.from([0,0,0,2])]);var Te=new ce(Se),Ne=ye.length,$e=Ne%16;Te.update(ye),$e&&($e=16-$e,Te.update(J.alloc($e,0))),Te.update(J.alloc(8,0));var ke=Ne*8,je=J.alloc(8);je.writeUIntBE(ke,0,8),Te.update(je),ge._finID=Te.state;var Ke=J.from(ge._finID);return Ae(Ke),Ke}function me(ge,ye,Se,Te){ne.call(this);var Ne=J.alloc(4,0);this._cipher=new K.AES(ye);var $e=this._cipher.encryptBlock(Ne);this._ghash=new ce($e),Se=xe(this,Se,$e),this._prev=J.from(Se),this._cache=J.allocUnsafe(0),this._secCache=J.allocUnsafe(0),this._decrypt=Te,this._alen=0,this._len=0,this._mode=ge,this._authTag=null,this._called=!1}return oe(me,ne),me.prototype._update=function(ge){if(!this._called&&this._alen){var ye=16-this._alen%16;ye<16&&(ye=J.alloc(ye,0),this._ghash.update(ye))}this._called=!0;var Se=this._mode.encrypt(this,ge);return this._decrypt?this._ghash.update(ge):this._ghash.update(Se),this._len+=ge.length,Se},me.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var ge=ue(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&pe(ge,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=ge,this._cipher.scrub()},me.prototype.getAuthTag=function(){if(this._decrypt||!J.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},me.prototype.setAuthTag=function(ye){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=ye},me.prototype.setAAD=function(ye){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(ye),this._alen+=ye.length},authCipher=me,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var K=requireAes(),J=requireSafeBuffer$1().Buffer,ne=requireCipherBase(),oe=requireInherits_browser();function ce(ue,Ae,pe,xe){ne.call(this),this._cipher=new K.AES(Ae),this._prev=J.from(pe),this._cache=J.allocUnsafe(0),this._secCache=J.allocUnsafe(0),this._decrypt=xe,this._mode=ue}return oe(ce,ne),ce.prototype._update=function(ue){return this._mode.encrypt(this,ue,this._decrypt)},ce.prototype._final=function(){this._cipher.scrub()},streamCipher=ce,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var K=requireSafeBuffer$1().Buffer,J=requireMd5_js();function ne(oe,ce,ue,Ae){if(K.isBuffer(oe)||(oe=K.from(oe,"binary")),ce&&(K.isBuffer(ce)||(ce=K.from(ce,"binary")),ce.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var pe=ue/8,xe=K.alloc(pe),me=K.alloc(Ae||0),ge=K.alloc(0);pe>0||Ae>0;){var ye=new J;ye.update(ge),ye.update(oe),ce&&ye.update(ce),ge=ye.digest();var Se=0;if(pe>0){var Te=xe.length-pe;Se=Math.min(pe,ge.length),ge.copy(xe,Te,0,Se),pe-=Se}if(Se<ge.length&&Ae>0){var Ne=me.length-Ae,$e=Math.min(Ae,ge.length-Se);ge.copy(me,Ne,Se,Se+$e),Ae-=$e}}return ge.fill(0),{key:xe,iv:me}}return evp_bytestokey=ne,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var K=requireModes$1(),J=requireAuthCipher(),ne=requireSafeBuffer$1().Buffer,oe=requireStreamCipher(),ce=requireCipherBase(),ue=requireAes(),Ae=requireEvp_bytestokey(),pe=requireInherits_browser();function xe(Te,Ne,$e){ce.call(this),this._cache=new ge,this._cipher=new ue.AES(Ne),this._prev=ne.from($e),this._mode=Te,this._autopadding=!0}pe(xe,ce),xe.prototype._update=function(Te){this._cache.add(Te);for(var Ne,$e,ke=[];Ne=this._cache.get();)$e=this._mode.encrypt(this,Ne),ke.push($e);return ne.concat(ke)};var me=ne.alloc(16,16);xe.prototype._final=function(){var Te=this._cache.flush();if(this._autopadding)return Te=this._mode.encrypt(this,Te),this._cipher.scrub(),Te;if(!Te.equals(me))throw this._cipher.scrub(),new Error("data not multiple of block length")},xe.prototype.setAutoPadding=function(Te){return this._autopadding=!!Te,this};function ge(){this.cache=ne.allocUnsafe(0)}ge.prototype.add=function(Te){this.cache=ne.concat([this.cache,Te])},ge.prototype.get=function(){if(this.cache.length>15){var Te=this.cache.slice(0,16);return this.cache=this.cache.slice(16),Te}return null},ge.prototype.flush=function(){for(var Te=16-this.cache.length,Ne=ne.allocUnsafe(Te),$e=-1;++$e<Te;)Ne.writeUInt8(Te,$e);return ne.concat([this.cache,Ne])};function ye(Te,Ne,$e){var ke=K[Te.toLowerCase()];if(!ke)throw new TypeError("invalid suite type");if(typeof Ne=="string"&&(Ne=ne.from(Ne)),Ne.length!==ke.key/8)throw new TypeError("invalid key length "+Ne.length);if(typeof $e=="string"&&($e=ne.from($e)),ke.mode!=="GCM"&&$e.length!==ke.iv)throw new TypeError("invalid iv length "+$e.length);return ke.type==="stream"?new oe(ke.module,Ne,$e):ke.type==="auth"?new J(ke.module,Ne,$e):new xe(ke.module,Ne,$e)}function Se(Te,Ne){var $e=K[Te.toLowerCase()];if(!$e)throw new TypeError("invalid suite type");var ke=Ae(Ne,!1,$e.key,$e.iv);return ye(Te,ke.key,ke.iv)}return encrypter.createCipheriv=ye,encrypter.createCipher=Se,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var K=requireAuthCipher(),J=requireSafeBuffer$1().Buffer,ne=requireModes$1(),oe=requireStreamCipher(),ce=requireCipherBase(),ue=requireAes(),Ae=requireEvp_bytestokey(),pe=requireInherits_browser();function xe(Te,Ne,$e){ce.call(this),this._cache=new me,this._last=void 0,this._cipher=new ue.AES(Ne),this._prev=J.from($e),this._mode=Te,this._autopadding=!0}pe(xe,ce),xe.prototype._update=function(Te){this._cache.add(Te);for(var Ne,$e,ke=[];Ne=this._cache.get(this._autopadding);)$e=this._mode.decrypt(this,Ne),ke.push($e);return J.concat(ke)},xe.prototype._final=function(){var Te=this._cache.flush();if(this._autopadding)return ge(this._mode.decrypt(this,Te));if(Te)throw new Error("data not multiple of block length")},xe.prototype.setAutoPadding=function(Te){return this._autopadding=!!Te,this};function me(){this.cache=J.allocUnsafe(0)}me.prototype.add=function(Te){this.cache=J.concat([this.cache,Te])},me.prototype.get=function(Te){var Ne;if(Te){if(this.cache.length>16)return Ne=this.cache.slice(0,16),this.cache=this.cache.slice(16),Ne}else if(this.cache.length>=16)return Ne=this.cache.slice(0,16),this.cache=this.cache.slice(16),Ne;return null},me.prototype.flush=function(){if(this.cache.length)return this.cache};function ge(Te){var Ne=Te[15];if(Ne<1||Ne>16)throw new Error("unable to decrypt data");for(var $e=-1;++$e<Ne;)if(Te[$e+(16-Ne)]!==Ne)throw new Error("unable to decrypt data");if(Ne!==16)return Te.slice(0,16-Ne)}function ye(Te,Ne,$e){var ke=ne[Te.toLowerCase()];if(!ke)throw new TypeError("invalid suite type");if(typeof $e=="string"&&($e=J.from($e)),ke.mode!=="GCM"&&$e.length!==ke.iv)throw new TypeError("invalid iv length "+$e.length);if(typeof Ne=="string"&&(Ne=J.from(Ne)),Ne.length!==ke.key/8)throw new TypeError("invalid key length "+Ne.length);return ke.type==="stream"?new oe(ke.module,Ne,$e,!0):ke.type==="auth"?new K(ke.module,Ne,$e,!0):new xe(ke.module,Ne,$e)}function Se(Te,Ne){var $e=ne[Te.toLowerCase()];if(!$e)throw new TypeError("invalid suite type");var ke=Ae(Ne,!1,$e.key,$e.iv);return ye(Te,ke.key,ke.iv)}return decrypter.createDecipher=Se,decrypter.createDecipheriv=ye,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$5;hasRequiredBrowser$6=1;var K=requireEncrypter(),J=requireDecrypter(),ne=require$$2;function oe(){return Object.keys(ne)}return browser$5.createCipher=browser$5.Cipher=K.createCipher,browser$5.createCipheriv=browser$5.Cipheriv=K.createCipheriv,browser$5.createDecipher=browser$5.Decipher=J.createDecipher,browser$5.createDecipheriv=browser$5.Decipheriv=J.createDecipheriv,browser$5.listCiphers=browser$5.getCiphers=oe,browser$5}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(K){K["des-ecb"]={key:8,iv:0},K["des-cbc"]=K.des={key:8,iv:8},K["des-ede3-cbc"]=K.des3={key:24,iv:8},K["des-ede3"]={key:24,iv:0},K["des-ede-cbc"]={key:16,iv:8},K["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$6;hasRequiredBrowser$5=1;var K=requireBrowserifyDes(),J=requireBrowser$6(),ne=requireModes$1(),oe=requireModes(),ce=requireEvp_bytestokey();function ue(ge,ye){ge=ge.toLowerCase();var Se,Te;if(ne[ge])Se=ne[ge].key,Te=ne[ge].iv;else if(oe[ge])Se=oe[ge].key*8,Te=oe[ge].iv;else throw new TypeError("invalid suite type");var Ne=ce(ye,!1,Se,Te);return pe(ge,Ne.key,Ne.iv)}function Ae(ge,ye){ge=ge.toLowerCase();var Se,Te;if(ne[ge])Se=ne[ge].key,Te=ne[ge].iv;else if(oe[ge])Se=oe[ge].key*8,Te=oe[ge].iv;else throw new TypeError("invalid suite type");var Ne=ce(ye,!1,Se,Te);return xe(ge,Ne.key,Ne.iv)}function pe(ge,ye,Se){if(ge=ge.toLowerCase(),ne[ge])return J.createCipheriv(ge,ye,Se);if(oe[ge])return new K({key:ye,iv:Se,mode:ge});throw new TypeError("invalid suite type")}function xe(ge,ye,Se){if(ge=ge.toLowerCase(),ne[ge])return J.createDecipheriv(ge,ye,Se);if(oe[ge])return new K({key:ye,iv:Se,mode:ge,decrypt:!0});throw new TypeError("invalid suite type")}function me(){return Object.keys(oe).concat(J.getCiphers())}return browser$6.createCipher=browser$6.Cipher=ue,browser$6.createCipheriv=browser$6.Cipheriv=pe,browser$6.createDecipher=browser$6.Decipher=Ae,browser$6.createDecipheriv=browser$6.Decipheriv=xe,browser$6.listCiphers=browser$6.getCiphers=me,browser$6}var browser$4={},bn$6={exports:{}};bn$6.exports;var hasRequiredBn$6;function requireBn$6(){return hasRequiredBn$6||(hasRequiredBn$6=1,function(K){(function(J,ne){function oe(Ge,ve){if(!Ge)throw new Error(ve||"Assertion failed")}function ce(Ge,ve){Ge.super_=ve;var Be=function(){};Be.prototype=ve.prototype,Ge.prototype=new Be,Ge.prototype.constructor=Ge}function ue(Ge,ve,Be){if(ue.isBN(Ge))return Ge;this.negative=0,this.words=null,this.length=0,this.red=null,Ge!==null&&((ve==="le"||ve==="be")&&(Be=ve,ve=10),this._init(Ge||0,ve||10,Be||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(ve){return ve instanceof ue?!0:ve!==null&&typeof ve=="object"&&ve.constructor.wordSize===ue.wordSize&&Array.isArray(ve.words)},ue.max=function(ve,Be){return ve.cmp(Be)>0?ve:Be},ue.min=function(ve,Be){return ve.cmp(Be)<0?ve:Be},ue.prototype._init=function(ve,Be,Re){if(typeof ve=="number")return this._initNumber(ve,Be,Re);if(typeof ve=="object")return this._initArray(ve,Be,Re);Be==="hex"&&(Be=16),oe(Be===(Be|0)&&Be>=2&&Be<=36),ve=ve.toString().replace(/\s+/g,"");var Ie=0;ve[0]==="-"&&(Ie++,this.negative=1),Ie<ve.length&&(Be===16?this._parseHex(ve,Ie,Re):(this._parseBase(ve,Be,Ie),Re==="le"&&this._initArray(this.toArray(),Be,Re)))},ue.prototype._initNumber=function(ve,Be,Re){ve<0&&(this.negative=1,ve=-ve),ve<67108864?(this.words=[ve&67108863],this.length=1):ve<4503599627370496?(this.words=[ve&67108863,ve/67108864&67108863],this.length=2):(oe(ve<9007199254740992),this.words=[ve&67108863,ve/67108864&67108863,1],this.length=3),Re==="le"&&this._initArray(this.toArray(),Be,Re)},ue.prototype._initArray=function(ve,Be,Re){if(oe(typeof ve.length=="number"),ve.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ve.length/3),this.words=new Array(this.length);for(var Ie=0;Ie<this.length;Ie++)this.words[Ie]=0;var Fe,qe,We=0;if(Re==="be")for(Ie=ve.length-1,Fe=0;Ie>=0;Ie-=3)qe=ve[Ie]|ve[Ie-1]<<8|ve[Ie-2]<<16,this.words[Fe]|=qe<<We&67108863,this.words[Fe+1]=qe>>>26-We&67108863,We+=24,We>=26&&(We-=26,Fe++);else if(Re==="le")for(Ie=0,Fe=0;Ie<ve.length;Ie+=3)qe=ve[Ie]|ve[Ie+1]<<8|ve[Ie+2]<<16,this.words[Fe]|=qe<<We&67108863,this.words[Fe+1]=qe>>>26-We&67108863,We+=24,We>=26&&(We-=26,Fe++);return this.strip()};function pe(Ge,ve){var Be=Ge.charCodeAt(ve);return Be>=65&&Be<=70?Be-55:Be>=97&&Be<=102?Be-87:Be-48&15}function xe(Ge,ve,Be){var Re=pe(Ge,Be);return Be-1>=ve&&(Re|=pe(Ge,Be-1)<<4),Re}ue.prototype._parseHex=function(ve,Be,Re){this.length=Math.ceil((ve.length-Be)/6),this.words=new Array(this.length);for(var Ie=0;Ie<this.length;Ie++)this.words[Ie]=0;var Fe=0,qe=0,We;if(Re==="be")for(Ie=ve.length-1;Ie>=Be;Ie-=2)We=xe(ve,Be,Ie)<<Fe,this.words[qe]|=We&67108863,Fe>=18?(Fe-=18,qe+=1,this.words[qe]|=We>>>26):Fe+=8;else{var Ue=ve.length-Be;for(Ie=Ue%2===0?Be+1:Be;Ie<ve.length;Ie+=2)We=xe(ve,Be,Ie)<<Fe,this.words[qe]|=We&67108863,Fe>=18?(Fe-=18,qe+=1,this.words[qe]|=We>>>26):Fe+=8}this.strip()};function me(Ge,ve,Be,Re){for(var Ie=0,Fe=Math.min(Ge.length,Be),qe=ve;qe<Fe;qe++){var We=Ge.charCodeAt(qe)-48;Ie*=Re,We>=49?Ie+=We-49+10:We>=17?Ie+=We-17+10:Ie+=We}return Ie}ue.prototype._parseBase=function(ve,Be,Re){this.words=[0],this.length=1;for(var Ie=0,Fe=1;Fe<=67108863;Fe*=Be)Ie++;Ie--,Fe=Fe/Be|0;for(var qe=ve.length-Re,We=qe%Ie,Ue=Math.min(qe,qe-We)+Re,_e=0,Qe=Re;Qe<Ue;Qe+=Ie)_e=me(ve,Qe,Qe+Ie,Be),this.imuln(Fe),this.words[0]+_e<67108864?this.words[0]+=_e:this._iaddn(_e);if(We!==0){var tt=1;for(_e=me(ve,Qe,ve.length,Be),Qe=0;Qe<We;Qe++)tt*=Be;this.imuln(tt),this.words[0]+_e<67108864?this.words[0]+=_e:this._iaddn(_e)}this.strip()},ue.prototype.copy=function(ve){ve.words=new Array(this.length);for(var Be=0;Be<this.length;Be++)ve.words[Be]=this.words[Be];ve.length=this.length,ve.negative=this.negative,ve.red=this.red},ue.prototype.clone=function(){var ve=new ue(null);return this.copy(ve),ve},ue.prototype._expand=function(ve){for(;this.length<ve;)this.words[this.length++]=0;return this},ue.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},ue.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ge=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ye=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Se=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(ve,Be){ve=ve||10,Be=Be|0||1;var Re;if(ve===16||ve==="hex"){Re="";for(var Ie=0,Fe=0,qe=0;qe<this.length;qe++){var We=this.words[qe],Ue=((We<<Ie|Fe)&16777215).toString(16);Fe=We>>>24-Ie&16777215,Fe!==0||qe!==this.length-1?Re=ge[6-Ue.length]+Ue+Re:Re=Ue+Re,Ie+=2,Ie>=26&&(Ie-=26,qe--)}for(Fe!==0&&(Re=Fe.toString(16)+Re);Re.length%Be!==0;)Re="0"+Re;return this.negative!==0&&(Re="-"+Re),Re}if(ve===(ve|0)&&ve>=2&&ve<=36){var _e=ye[ve],Qe=Se[ve];Re="";var tt=this.clone();for(tt.negative=0;!tt.isZero();){var it=tt.modn(Qe).toString(ve);tt=tt.idivn(Qe),tt.isZero()?Re=it+Re:Re=ge[_e-it.length]+it+Re}for(this.isZero()&&(Re="0"+Re);Re.length%Be!==0;)Re="0"+Re;return this.negative!==0&&(Re="-"+Re),Re}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var ve=this.words[0];return this.length===2?ve+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ve+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ve:ve},ue.prototype.toJSON=function(){return this.toString(16)},ue.prototype.toBuffer=function(ve,Be){return oe(typeof Ae<"u"),this.toArrayLike(Ae,ve,Be)},ue.prototype.toArray=function(ve,Be){return this.toArrayLike(Array,ve,Be)},ue.prototype.toArrayLike=function(ve,Be,Re){var Ie=this.byteLength(),Fe=Re||Math.max(1,Ie);oe(Ie<=Fe,"byte array longer than desired length"),oe(Fe>0,"Requested array length <= 0"),this.strip();var qe=Be==="le",We=new ve(Fe),Ue,_e,Qe=this.clone();if(qe){for(_e=0;!Qe.isZero();_e++)Ue=Qe.andln(255),Qe.iushrn(8),We[_e]=Ue;for(;_e<Fe;_e++)We[_e]=0}else{for(_e=0;_e<Fe-Ie;_e++)We[_e]=0;for(_e=0;!Qe.isZero();_e++)Ue=Qe.andln(255),Qe.iushrn(8),We[Fe-_e-1]=Ue}return We},Math.clz32?ue.prototype._countBits=function(ve){return 32-Math.clz32(ve)}:ue.prototype._countBits=function(ve){var Be=ve,Re=0;return Be>=4096&&(Re+=13,Be>>>=13),Be>=64&&(Re+=7,Be>>>=7),Be>=8&&(Re+=4,Be>>>=4),Be>=2&&(Re+=2,Be>>>=2),Re+Be},ue.prototype._zeroBits=function(ve){if(ve===0)return 26;var Be=ve,Re=0;return Be&8191||(Re+=13,Be>>>=13),Be&127||(Re+=7,Be>>>=7),Be&15||(Re+=4,Be>>>=4),Be&3||(Re+=2,Be>>>=2),Be&1||Re++,Re},ue.prototype.bitLength=function(){var ve=this.words[this.length-1],Be=this._countBits(ve);return(this.length-1)*26+Be};function Te(Ge){for(var ve=new Array(Ge.bitLength()),Be=0;Be<ve.length;Be++){var Re=Be/26|0,Ie=Be%26;ve[Be]=(Ge.words[Re]&1<<Ie)>>>Ie}return ve}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ve=0,Be=0;Be<this.length;Be++){var Re=this._zeroBits(this.words[Be]);if(ve+=Re,Re!==26)break}return ve},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(ve){return this.negative!==0?this.abs().inotn(ve).iaddn(1):this.clone()},ue.prototype.fromTwos=function(ve){return this.testn(ve-1)?this.notn(ve).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(ve){for(;this.length<ve.length;)this.words[this.length++]=0;for(var Be=0;Be<ve.length;Be++)this.words[Be]=this.words[Be]|ve.words[Be];return this.strip()},ue.prototype.ior=function(ve){return oe((this.negative|ve.negative)===0),this.iuor(ve)},ue.prototype.or=function(ve){return this.length>ve.length?this.clone().ior(ve):ve.clone().ior(this)},ue.prototype.uor=function(ve){return this.length>ve.length?this.clone().iuor(ve):ve.clone().iuor(this)},ue.prototype.iuand=function(ve){var Be;this.length>ve.length?Be=ve:Be=this;for(var Re=0;Re<Be.length;Re++)this.words[Re]=this.words[Re]&ve.words[Re];return this.length=Be.length,this.strip()},ue.prototype.iand=function(ve){return oe((this.negative|ve.negative)===0),this.iuand(ve)},ue.prototype.and=function(ve){return this.length>ve.length?this.clone().iand(ve):ve.clone().iand(this)},ue.prototype.uand=function(ve){return this.length>ve.length?this.clone().iuand(ve):ve.clone().iuand(this)},ue.prototype.iuxor=function(ve){var Be,Re;this.length>ve.length?(Be=this,Re=ve):(Be=ve,Re=this);for(var Ie=0;Ie<Re.length;Ie++)this.words[Ie]=Be.words[Ie]^Re.words[Ie];if(this!==Be)for(;Ie<Be.length;Ie++)this.words[Ie]=Be.words[Ie];return this.length=Be.length,this.strip()},ue.prototype.ixor=function(ve){return oe((this.negative|ve.negative)===0),this.iuxor(ve)},ue.prototype.xor=function(ve){return this.length>ve.length?this.clone().ixor(ve):ve.clone().ixor(this)},ue.prototype.uxor=function(ve){return this.length>ve.length?this.clone().iuxor(ve):ve.clone().iuxor(this)},ue.prototype.inotn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=Math.ceil(ve/26)|0,Re=ve%26;this._expand(Be),Re>0&&Be--;for(var Ie=0;Ie<Be;Ie++)this.words[Ie]=~this.words[Ie]&67108863;return Re>0&&(this.words[Ie]=~this.words[Ie]&67108863>>26-Re),this.strip()},ue.prototype.notn=function(ve){return this.clone().inotn(ve)},ue.prototype.setn=function(ve,Be){oe(typeof ve=="number"&&ve>=0);var Re=ve/26|0,Ie=ve%26;return this._expand(Re+1),Be?this.words[Re]=this.words[Re]|1<<Ie:this.words[Re]=this.words[Re]&~(1<<Ie),this.strip()},ue.prototype.iadd=function(ve){var Be;if(this.negative!==0&&ve.negative===0)return this.negative=0,Be=this.isub(ve),this.negative^=1,this._normSign();if(this.negative===0&&ve.negative!==0)return ve.negative=0,Be=this.isub(ve),ve.negative=1,Be._normSign();var Re,Ie;this.length>ve.length?(Re=this,Ie=ve):(Re=ve,Ie=this);for(var Fe=0,qe=0;qe<Ie.length;qe++)Be=(Re.words[qe]|0)+(Ie.words[qe]|0)+Fe,this.words[qe]=Be&67108863,Fe=Be>>>26;for(;Fe!==0&&qe<Re.length;qe++)Be=(Re.words[qe]|0)+Fe,this.words[qe]=Be&67108863,Fe=Be>>>26;if(this.length=Re.length,Fe!==0)this.words[this.length]=Fe,this.length++;else if(Re!==this)for(;qe<Re.length;qe++)this.words[qe]=Re.words[qe];return this},ue.prototype.add=function(ve){var Be;return ve.negative!==0&&this.negative===0?(ve.negative=0,Be=this.sub(ve),ve.negative^=1,Be):ve.negative===0&&this.negative!==0?(this.negative=0,Be=ve.sub(this),this.negative=1,Be):this.length>ve.length?this.clone().iadd(ve):ve.clone().iadd(this)},ue.prototype.isub=function(ve){if(ve.negative!==0){ve.negative=0;var Be=this.iadd(ve);return ve.negative=1,Be._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ve),this.negative=1,this._normSign();var Re=this.cmp(ve);if(Re===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ie,Fe;Re>0?(Ie=this,Fe=ve):(Ie=ve,Fe=this);for(var qe=0,We=0;We<Fe.length;We++)Be=(Ie.words[We]|0)-(Fe.words[We]|0)+qe,qe=Be>>26,this.words[We]=Be&67108863;for(;qe!==0&&We<Ie.length;We++)Be=(Ie.words[We]|0)+qe,qe=Be>>26,this.words[We]=Be&67108863;if(qe===0&&We<Ie.length&&Ie!==this)for(;We<Ie.length;We++)this.words[We]=Ie.words[We];return this.length=Math.max(this.length,We),Ie!==this&&(this.negative=1),this.strip()},ue.prototype.sub=function(ve){return this.clone().isub(ve)};function Ne(Ge,ve,Be){Be.negative=ve.negative^Ge.negative;var Re=Ge.length+ve.length|0;Be.length=Re,Re=Re-1|0;var Ie=Ge.words[0]|0,Fe=ve.words[0]|0,qe=Ie*Fe,We=qe&67108863,Ue=qe/67108864|0;Be.words[0]=We;for(var _e=1;_e<Re;_e++){for(var Qe=Ue>>>26,tt=Ue&67108863,it=Math.min(_e,ve.length-1),at=Math.max(0,_e-Ge.length+1);at<=it;at++){var ot=_e-at|0;Ie=Ge.words[ot]|0,Fe=ve.words[at]|0,qe=Ie*Fe+tt,Qe+=qe/67108864|0,tt=qe&67108863}Be.words[_e]=tt|0,Ue=Qe|0}return Ue!==0?Be.words[_e]=Ue|0:Be.length--,Be.strip()}var $e=function(ve,Be,Re){var Ie=ve.words,Fe=Be.words,qe=Re.words,We=0,Ue,_e,Qe,tt=Ie[0]|0,it=tt&8191,at=tt>>>13,ot=Ie[1]|0,lt=ot&8191,st=ot>>>13,ut=Ie[2]|0,ft=ut&8191,dt=ut>>>13,Bt=Ie[3]|0,pt=Bt&8191,mt=Bt>>>13,bt=Ie[4]|0,xt=bt&8191,yt=bt>>>13,It=Ie[5]|0,ht=It&8191,gt=It>>>13,Pt=Ie[6]|0,wt=Pt&8191,St=Pt>>>13,Zt=Ie[7]|0,Ct=Zt&8191,Rt=Zt>>>13,dr=Ie[8]|0,Dt=dr&8191,Tt=dr>>>13,or=Ie[9]|0,Mt=or&8191,kt=or>>>13,ur=Fe[0]|0,$t=ur&8191,jt=ur>>>13,nr=Fe[1]|0,Ot=nr&8191,Lt=nr>>>13,lr=Fe[2]|0,Ht=lr&8191,qt=lr>>>13,tr=Fe[3]|0,Vt=tr&8191,Gt=tr>>>13,br=Fe[4]|0,Yt=br&8191,Kt=br>>>13,yr=Fe[5]|0,zt=yr&8191,Jt=yr>>>13,xr=Fe[6]|0,Xt=xr&8191,ir=xr>>>13,Mr=Fe[7]|0,er=Mr&8191,fr=Mr>>>13,Qr=Fe[8]|0,sr=Qr&8191,Ar=Qr>>>13,Kr=Fe[9]|0,ar=Kr&8191,hr=Kr>>>13;Re.negative=ve.negative^Be.negative,Re.length=19,Ue=Math.imul(it,$t),_e=Math.imul(it,jt),_e=_e+Math.imul(at,$t)|0,Qe=Math.imul(at,jt);var Lr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,Ue=Math.imul(lt,$t),_e=Math.imul(lt,jt),_e=_e+Math.imul(st,$t)|0,Qe=Math.imul(st,jt),Ue=Ue+Math.imul(it,Ot)|0,_e=_e+Math.imul(it,Lt)|0,_e=_e+Math.imul(at,Ot)|0,Qe=Qe+Math.imul(at,Lt)|0;var Pr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,Ue=Math.imul(ft,$t),_e=Math.imul(ft,jt),_e=_e+Math.imul(dt,$t)|0,Qe=Math.imul(dt,jt),Ue=Ue+Math.imul(lt,Ot)|0,_e=_e+Math.imul(lt,Lt)|0,_e=_e+Math.imul(st,Ot)|0,Qe=Qe+Math.imul(st,Lt)|0,Ue=Ue+Math.imul(it,Ht)|0,_e=_e+Math.imul(it,qt)|0,_e=_e+Math.imul(at,Ht)|0,Qe=Qe+Math.imul(at,qt)|0;var Yr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,Ue=Math.imul(pt,$t),_e=Math.imul(pt,jt),_e=_e+Math.imul(mt,$t)|0,Qe=Math.imul(mt,jt),Ue=Ue+Math.imul(ft,Ot)|0,_e=_e+Math.imul(ft,Lt)|0,_e=_e+Math.imul(dt,Ot)|0,Qe=Qe+Math.imul(dt,Lt)|0,Ue=Ue+Math.imul(lt,Ht)|0,_e=_e+Math.imul(lt,qt)|0,_e=_e+Math.imul(st,Ht)|0,Qe=Qe+Math.imul(st,qt)|0,Ue=Ue+Math.imul(it,Vt)|0,_e=_e+Math.imul(it,Gt)|0,_e=_e+Math.imul(at,Vt)|0,Qe=Qe+Math.imul(at,Gt)|0;var Wr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,Ue=Math.imul(xt,$t),_e=Math.imul(xt,jt),_e=_e+Math.imul(yt,$t)|0,Qe=Math.imul(yt,jt),Ue=Ue+Math.imul(pt,Ot)|0,_e=_e+Math.imul(pt,Lt)|0,_e=_e+Math.imul(mt,Ot)|0,Qe=Qe+Math.imul(mt,Lt)|0,Ue=Ue+Math.imul(ft,Ht)|0,_e=_e+Math.imul(ft,qt)|0,_e=_e+Math.imul(dt,Ht)|0,Qe=Qe+Math.imul(dt,qt)|0,Ue=Ue+Math.imul(lt,Vt)|0,_e=_e+Math.imul(lt,Gt)|0,_e=_e+Math.imul(st,Vt)|0,Qe=Qe+Math.imul(st,Gt)|0,Ue=Ue+Math.imul(it,Yt)|0,_e=_e+Math.imul(it,Kt)|0,_e=_e+Math.imul(at,Yt)|0,Qe=Qe+Math.imul(at,Kt)|0;var Zr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,Ue=Math.imul(ht,$t),_e=Math.imul(ht,jt),_e=_e+Math.imul(gt,$t)|0,Qe=Math.imul(gt,jt),Ue=Ue+Math.imul(xt,Ot)|0,_e=_e+Math.imul(xt,Lt)|0,_e=_e+Math.imul(yt,Ot)|0,Qe=Qe+Math.imul(yt,Lt)|0,Ue=Ue+Math.imul(pt,Ht)|0,_e=_e+Math.imul(pt,qt)|0,_e=_e+Math.imul(mt,Ht)|0,Qe=Qe+Math.imul(mt,qt)|0,Ue=Ue+Math.imul(ft,Vt)|0,_e=_e+Math.imul(ft,Gt)|0,_e=_e+Math.imul(dt,Vt)|0,Qe=Qe+Math.imul(dt,Gt)|0,Ue=Ue+Math.imul(lt,Yt)|0,_e=_e+Math.imul(lt,Kt)|0,_e=_e+Math.imul(st,Yt)|0,Qe=Qe+Math.imul(st,Kt)|0,Ue=Ue+Math.imul(it,zt)|0,_e=_e+Math.imul(it,Jt)|0,_e=_e+Math.imul(at,zt)|0,Qe=Qe+Math.imul(at,Jt)|0;var Jr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,Ue=Math.imul(wt,$t),_e=Math.imul(wt,jt),_e=_e+Math.imul(St,$t)|0,Qe=Math.imul(St,jt),Ue=Ue+Math.imul(ht,Ot)|0,_e=_e+Math.imul(ht,Lt)|0,_e=_e+Math.imul(gt,Ot)|0,Qe=Qe+Math.imul(gt,Lt)|0,Ue=Ue+Math.imul(xt,Ht)|0,_e=_e+Math.imul(xt,qt)|0,_e=_e+Math.imul(yt,Ht)|0,Qe=Qe+Math.imul(yt,qt)|0,Ue=Ue+Math.imul(pt,Vt)|0,_e=_e+Math.imul(pt,Gt)|0,_e=_e+Math.imul(mt,Vt)|0,Qe=Qe+Math.imul(mt,Gt)|0,Ue=Ue+Math.imul(ft,Yt)|0,_e=_e+Math.imul(ft,Kt)|0,_e=_e+Math.imul(dt,Yt)|0,Qe=Qe+Math.imul(dt,Kt)|0,Ue=Ue+Math.imul(lt,zt)|0,_e=_e+Math.imul(lt,Jt)|0,_e=_e+Math.imul(st,zt)|0,Qe=Qe+Math.imul(st,Jt)|0,Ue=Ue+Math.imul(it,Xt)|0,_e=_e+Math.imul(it,ir)|0,_e=_e+Math.imul(at,Xt)|0,Qe=Qe+Math.imul(at,ir)|0;var Gr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,Ue=Math.imul(Ct,$t),_e=Math.imul(Ct,jt),_e=_e+Math.imul(Rt,$t)|0,Qe=Math.imul(Rt,jt),Ue=Ue+Math.imul(wt,Ot)|0,_e=_e+Math.imul(wt,Lt)|0,_e=_e+Math.imul(St,Ot)|0,Qe=Qe+Math.imul(St,Lt)|0,Ue=Ue+Math.imul(ht,Ht)|0,_e=_e+Math.imul(ht,qt)|0,_e=_e+Math.imul(gt,Ht)|0,Qe=Qe+Math.imul(gt,qt)|0,Ue=Ue+Math.imul(xt,Vt)|0,_e=_e+Math.imul(xt,Gt)|0,_e=_e+Math.imul(yt,Vt)|0,Qe=Qe+Math.imul(yt,Gt)|0,Ue=Ue+Math.imul(pt,Yt)|0,_e=_e+Math.imul(pt,Kt)|0,_e=_e+Math.imul(mt,Yt)|0,Qe=Qe+Math.imul(mt,Kt)|0,Ue=Ue+Math.imul(ft,zt)|0,_e=_e+Math.imul(ft,Jt)|0,_e=_e+Math.imul(dt,zt)|0,Qe=Qe+Math.imul(dt,Jt)|0,Ue=Ue+Math.imul(lt,Xt)|0,_e=_e+Math.imul(lt,ir)|0,_e=_e+Math.imul(st,Xt)|0,Qe=Qe+Math.imul(st,ir)|0,Ue=Ue+Math.imul(it,er)|0,_e=_e+Math.imul(it,fr)|0,_e=_e+Math.imul(at,er)|0,Qe=Qe+Math.imul(at,fr)|0;var sn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(sn>>>26)|0,sn&=67108863,Ue=Math.imul(Dt,$t),_e=Math.imul(Dt,jt),_e=_e+Math.imul(Tt,$t)|0,Qe=Math.imul(Tt,jt),Ue=Ue+Math.imul(Ct,Ot)|0,_e=_e+Math.imul(Ct,Lt)|0,_e=_e+Math.imul(Rt,Ot)|0,Qe=Qe+Math.imul(Rt,Lt)|0,Ue=Ue+Math.imul(wt,Ht)|0,_e=_e+Math.imul(wt,qt)|0,_e=_e+Math.imul(St,Ht)|0,Qe=Qe+Math.imul(St,qt)|0,Ue=Ue+Math.imul(ht,Vt)|0,_e=_e+Math.imul(ht,Gt)|0,_e=_e+Math.imul(gt,Vt)|0,Qe=Qe+Math.imul(gt,Gt)|0,Ue=Ue+Math.imul(xt,Yt)|0,_e=_e+Math.imul(xt,Kt)|0,_e=_e+Math.imul(yt,Yt)|0,Qe=Qe+Math.imul(yt,Kt)|0,Ue=Ue+Math.imul(pt,zt)|0,_e=_e+Math.imul(pt,Jt)|0,_e=_e+Math.imul(mt,zt)|0,Qe=Qe+Math.imul(mt,Jt)|0,Ue=Ue+Math.imul(ft,Xt)|0,_e=_e+Math.imul(ft,ir)|0,_e=_e+Math.imul(dt,Xt)|0,Qe=Qe+Math.imul(dt,ir)|0,Ue=Ue+Math.imul(lt,er)|0,_e=_e+Math.imul(lt,fr)|0,_e=_e+Math.imul(st,er)|0,Qe=Qe+Math.imul(st,fr)|0,Ue=Ue+Math.imul(it,sr)|0,_e=_e+Math.imul(it,Ar)|0,_e=_e+Math.imul(at,sr)|0,Qe=Qe+Math.imul(at,Ar)|0;var ln=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(ln>>>26)|0,ln&=67108863,Ue=Math.imul(Mt,$t),_e=Math.imul(Mt,jt),_e=_e+Math.imul(kt,$t)|0,Qe=Math.imul(kt,jt),Ue=Ue+Math.imul(Dt,Ot)|0,_e=_e+Math.imul(Dt,Lt)|0,_e=_e+Math.imul(Tt,Ot)|0,Qe=Qe+Math.imul(Tt,Lt)|0,Ue=Ue+Math.imul(Ct,Ht)|0,_e=_e+Math.imul(Ct,qt)|0,_e=_e+Math.imul(Rt,Ht)|0,Qe=Qe+Math.imul(Rt,qt)|0,Ue=Ue+Math.imul(wt,Vt)|0,_e=_e+Math.imul(wt,Gt)|0,_e=_e+Math.imul(St,Vt)|0,Qe=Qe+Math.imul(St,Gt)|0,Ue=Ue+Math.imul(ht,Yt)|0,_e=_e+Math.imul(ht,Kt)|0,_e=_e+Math.imul(gt,Yt)|0,Qe=Qe+Math.imul(gt,Kt)|0,Ue=Ue+Math.imul(xt,zt)|0,_e=_e+Math.imul(xt,Jt)|0,_e=_e+Math.imul(yt,zt)|0,Qe=Qe+Math.imul(yt,Jt)|0,Ue=Ue+Math.imul(pt,Xt)|0,_e=_e+Math.imul(pt,ir)|0,_e=_e+Math.imul(mt,Xt)|0,Qe=Qe+Math.imul(mt,ir)|0,Ue=Ue+Math.imul(ft,er)|0,_e=_e+Math.imul(ft,fr)|0,_e=_e+Math.imul(dt,er)|0,Qe=Qe+Math.imul(dt,fr)|0,Ue=Ue+Math.imul(lt,sr)|0,_e=_e+Math.imul(lt,Ar)|0,_e=_e+Math.imul(st,sr)|0,Qe=Qe+Math.imul(st,Ar)|0,Ue=Ue+Math.imul(it,ar)|0,_e=_e+Math.imul(it,hr)|0,_e=_e+Math.imul(at,ar)|0,Qe=Qe+Math.imul(at,hr)|0;var hn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(hn>>>26)|0,hn&=67108863,Ue=Math.imul(Mt,Ot),_e=Math.imul(Mt,Lt),_e=_e+Math.imul(kt,Ot)|0,Qe=Math.imul(kt,Lt),Ue=Ue+Math.imul(Dt,Ht)|0,_e=_e+Math.imul(Dt,qt)|0,_e=_e+Math.imul(Tt,Ht)|0,Qe=Qe+Math.imul(Tt,qt)|0,Ue=Ue+Math.imul(Ct,Vt)|0,_e=_e+Math.imul(Ct,Gt)|0,_e=_e+Math.imul(Rt,Vt)|0,Qe=Qe+Math.imul(Rt,Gt)|0,Ue=Ue+Math.imul(wt,Yt)|0,_e=_e+Math.imul(wt,Kt)|0,_e=_e+Math.imul(St,Yt)|0,Qe=Qe+Math.imul(St,Kt)|0,Ue=Ue+Math.imul(ht,zt)|0,_e=_e+Math.imul(ht,Jt)|0,_e=_e+Math.imul(gt,zt)|0,Qe=Qe+Math.imul(gt,Jt)|0,Ue=Ue+Math.imul(xt,Xt)|0,_e=_e+Math.imul(xt,ir)|0,_e=_e+Math.imul(yt,Xt)|0,Qe=Qe+Math.imul(yt,ir)|0,Ue=Ue+Math.imul(pt,er)|0,_e=_e+Math.imul(pt,fr)|0,_e=_e+Math.imul(mt,er)|0,Qe=Qe+Math.imul(mt,fr)|0,Ue=Ue+Math.imul(ft,sr)|0,_e=_e+Math.imul(ft,Ar)|0,_e=_e+Math.imul(dt,sr)|0,Qe=Qe+Math.imul(dt,Ar)|0,Ue=Ue+Math.imul(lt,ar)|0,_e=_e+Math.imul(lt,hr)|0,_e=_e+Math.imul(st,ar)|0,Qe=Qe+Math.imul(st,hr)|0;var pn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(pn>>>26)|0,pn&=67108863,Ue=Math.imul(Mt,Ht),_e=Math.imul(Mt,qt),_e=_e+Math.imul(kt,Ht)|0,Qe=Math.imul(kt,qt),Ue=Ue+Math.imul(Dt,Vt)|0,_e=_e+Math.imul(Dt,Gt)|0,_e=_e+Math.imul(Tt,Vt)|0,Qe=Qe+Math.imul(Tt,Gt)|0,Ue=Ue+Math.imul(Ct,Yt)|0,_e=_e+Math.imul(Ct,Kt)|0,_e=_e+Math.imul(Rt,Yt)|0,Qe=Qe+Math.imul(Rt,Kt)|0,Ue=Ue+Math.imul(wt,zt)|0,_e=_e+Math.imul(wt,Jt)|0,_e=_e+Math.imul(St,zt)|0,Qe=Qe+Math.imul(St,Jt)|0,Ue=Ue+Math.imul(ht,Xt)|0,_e=_e+Math.imul(ht,ir)|0,_e=_e+Math.imul(gt,Xt)|0,Qe=Qe+Math.imul(gt,ir)|0,Ue=Ue+Math.imul(xt,er)|0,_e=_e+Math.imul(xt,fr)|0,_e=_e+Math.imul(yt,er)|0,Qe=Qe+Math.imul(yt,fr)|0,Ue=Ue+Math.imul(pt,sr)|0,_e=_e+Math.imul(pt,Ar)|0,_e=_e+Math.imul(mt,sr)|0,Qe=Qe+Math.imul(mt,Ar)|0,Ue=Ue+Math.imul(ft,ar)|0,_e=_e+Math.imul(ft,hr)|0,_e=_e+Math.imul(dt,ar)|0,Qe=Qe+Math.imul(dt,hr)|0;var Xr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,Ue=Math.imul(Mt,Vt),_e=Math.imul(Mt,Gt),_e=_e+Math.imul(kt,Vt)|0,Qe=Math.imul(kt,Gt),Ue=Ue+Math.imul(Dt,Yt)|0,_e=_e+Math.imul(Dt,Kt)|0,_e=_e+Math.imul(Tt,Yt)|0,Qe=Qe+Math.imul(Tt,Kt)|0,Ue=Ue+Math.imul(Ct,zt)|0,_e=_e+Math.imul(Ct,Jt)|0,_e=_e+Math.imul(Rt,zt)|0,Qe=Qe+Math.imul(Rt,Jt)|0,Ue=Ue+Math.imul(wt,Xt)|0,_e=_e+Math.imul(wt,ir)|0,_e=_e+Math.imul(St,Xt)|0,Qe=Qe+Math.imul(St,ir)|0,Ue=Ue+Math.imul(ht,er)|0,_e=_e+Math.imul(ht,fr)|0,_e=_e+Math.imul(gt,er)|0,Qe=Qe+Math.imul(gt,fr)|0,Ue=Ue+Math.imul(xt,sr)|0,_e=_e+Math.imul(xt,Ar)|0,_e=_e+Math.imul(yt,sr)|0,Qe=Qe+Math.imul(yt,Ar)|0,Ue=Ue+Math.imul(pt,ar)|0,_e=_e+Math.imul(pt,hr)|0,_e=_e+Math.imul(mt,ar)|0,Qe=Qe+Math.imul(mt,hr)|0;var yn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(yn>>>26)|0,yn&=67108863,Ue=Math.imul(Mt,Yt),_e=Math.imul(Mt,Kt),_e=_e+Math.imul(kt,Yt)|0,Qe=Math.imul(kt,Kt),Ue=Ue+Math.imul(Dt,zt)|0,_e=_e+Math.imul(Dt,Jt)|0,_e=_e+Math.imul(Tt,zt)|0,Qe=Qe+Math.imul(Tt,Jt)|0,Ue=Ue+Math.imul(Ct,Xt)|0,_e=_e+Math.imul(Ct,ir)|0,_e=_e+Math.imul(Rt,Xt)|0,Qe=Qe+Math.imul(Rt,ir)|0,Ue=Ue+Math.imul(wt,er)|0,_e=_e+Math.imul(wt,fr)|0,_e=_e+Math.imul(St,er)|0,Qe=Qe+Math.imul(St,fr)|0,Ue=Ue+Math.imul(ht,sr)|0,_e=_e+Math.imul(ht,Ar)|0,_e=_e+Math.imul(gt,sr)|0,Qe=Qe+Math.imul(gt,Ar)|0,Ue=Ue+Math.imul(xt,ar)|0,_e=_e+Math.imul(xt,hr)|0,_e=_e+Math.imul(yt,ar)|0,Qe=Qe+Math.imul(yt,hr)|0;var xn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(xn>>>26)|0,xn&=67108863,Ue=Math.imul(Mt,zt),_e=Math.imul(Mt,Jt),_e=_e+Math.imul(kt,zt)|0,Qe=Math.imul(kt,Jt),Ue=Ue+Math.imul(Dt,Xt)|0,_e=_e+Math.imul(Dt,ir)|0,_e=_e+Math.imul(Tt,Xt)|0,Qe=Qe+Math.imul(Tt,ir)|0,Ue=Ue+Math.imul(Ct,er)|0,_e=_e+Math.imul(Ct,fr)|0,_e=_e+Math.imul(Rt,er)|0,Qe=Qe+Math.imul(Rt,fr)|0,Ue=Ue+Math.imul(wt,sr)|0,_e=_e+Math.imul(wt,Ar)|0,_e=_e+Math.imul(St,sr)|0,Qe=Qe+Math.imul(St,Ar)|0,Ue=Ue+Math.imul(ht,ar)|0,_e=_e+Math.imul(ht,hr)|0,_e=_e+Math.imul(gt,ar)|0,Qe=Qe+Math.imul(gt,hr)|0;var dn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(dn>>>26)|0,dn&=67108863,Ue=Math.imul(Mt,Xt),_e=Math.imul(Mt,ir),_e=_e+Math.imul(kt,Xt)|0,Qe=Math.imul(kt,ir),Ue=Ue+Math.imul(Dt,er)|0,_e=_e+Math.imul(Dt,fr)|0,_e=_e+Math.imul(Tt,er)|0,Qe=Qe+Math.imul(Tt,fr)|0,Ue=Ue+Math.imul(Ct,sr)|0,_e=_e+Math.imul(Ct,Ar)|0,_e=_e+Math.imul(Rt,sr)|0,Qe=Qe+Math.imul(Rt,Ar)|0,Ue=Ue+Math.imul(wt,ar)|0,_e=_e+Math.imul(wt,hr)|0,_e=_e+Math.imul(St,ar)|0,Qe=Qe+Math.imul(St,hr)|0;var cn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(cn>>>26)|0,cn&=67108863,Ue=Math.imul(Mt,er),_e=Math.imul(Mt,fr),_e=_e+Math.imul(kt,er)|0,Qe=Math.imul(kt,fr),Ue=Ue+Math.imul(Dt,sr)|0,_e=_e+Math.imul(Dt,Ar)|0,_e=_e+Math.imul(Tt,sr)|0,Qe=Qe+Math.imul(Tt,Ar)|0,Ue=Ue+Math.imul(Ct,ar)|0,_e=_e+Math.imul(Ct,hr)|0,_e=_e+Math.imul(Rt,ar)|0,Qe=Qe+Math.imul(Rt,hr)|0;var wn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(wn>>>26)|0,wn&=67108863,Ue=Math.imul(Mt,sr),_e=Math.imul(Mt,Ar),_e=_e+Math.imul(kt,sr)|0,Qe=Math.imul(kt,Ar),Ue=Ue+Math.imul(Dt,ar)|0,_e=_e+Math.imul(Dt,hr)|0,_e=_e+Math.imul(Tt,ar)|0,Qe=Qe+Math.imul(Tt,hr)|0;var Cn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Ue=Math.imul(Mt,ar),_e=Math.imul(Mt,hr),_e=_e+Math.imul(kt,ar)|0,Qe=Math.imul(kt,hr);var Rr=(We+Ue|0)+((_e&8191)<<13)|0;return We=(Qe+(_e>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,qe[0]=Lr,qe[1]=Pr,qe[2]=Yr,qe[3]=Wr,qe[4]=Zr,qe[5]=Jr,qe[6]=Gr,qe[7]=sn,qe[8]=ln,qe[9]=hn,qe[10]=pn,qe[11]=Xr,qe[12]=yn,qe[13]=xn,qe[14]=dn,qe[15]=cn,qe[16]=wn,qe[17]=Cn,qe[18]=Rr,We!==0&&(qe[19]=We,Re.length++),Re};Math.imul||($e=Ne);function ke(Ge,ve,Be){Be.negative=ve.negative^Ge.negative,Be.length=Ge.length+ve.length;for(var Re=0,Ie=0,Fe=0;Fe<Be.length-1;Fe++){var qe=Ie;Ie=0;for(var We=Re&67108863,Ue=Math.min(Fe,ve.length-1),_e=Math.max(0,Fe-Ge.length+1);_e<=Ue;_e++){var Qe=Fe-_e,tt=Ge.words[Qe]|0,it=ve.words[_e]|0,at=tt*it,ot=at&67108863;qe=qe+(at/67108864|0)|0,ot=ot+We|0,We=ot&67108863,qe=qe+(ot>>>26)|0,Ie+=qe>>>26,qe&=67108863}Be.words[Fe]=We,Re=qe,qe=Ie}return Re!==0?Be.words[Fe]=Re:Be.length--,Be.strip()}function je(Ge,ve,Be){var Re=new Ke;return Re.mulp(Ge,ve,Be)}ue.prototype.mulTo=function(ve,Be){var Re,Ie=this.length+ve.length;return this.length===10&&ve.length===10?Re=$e(this,ve,Be):Ie<63?Re=Ne(this,ve,Be):Ie<1024?Re=ke(this,ve,Be):Re=je(this,ve,Be),Re};function Ke(Ge,ve){this.x=Ge,this.y=ve}Ke.prototype.makeRBT=function(ve){for(var Be=new Array(ve),Re=ue.prototype._countBits(ve)-1,Ie=0;Ie<ve;Ie++)Be[Ie]=this.revBin(Ie,Re,ve);return Be},Ke.prototype.revBin=function(ve,Be,Re){if(ve===0||ve===Re-1)return ve;for(var Ie=0,Fe=0;Fe<Be;Fe++)Ie|=(ve&1)<<Be-Fe-1,ve>>=1;return Ie},Ke.prototype.permute=function(ve,Be,Re,Ie,Fe,qe){for(var We=0;We<qe;We++)Ie[We]=Be[ve[We]],Fe[We]=Re[ve[We]]},Ke.prototype.transform=function(ve,Be,Re,Ie,Fe,qe){this.permute(qe,ve,Be,Re,Ie,Fe);for(var We=1;We<Fe;We<<=1)for(var Ue=We<<1,_e=Math.cos(2*Math.PI/Ue),Qe=Math.sin(2*Math.PI/Ue),tt=0;tt<Fe;tt+=Ue)for(var it=_e,at=Qe,ot=0;ot<We;ot++){var lt=Re[tt+ot],st=Ie[tt+ot],ut=Re[tt+ot+We],ft=Ie[tt+ot+We],dt=it*ut-at*ft;ft=it*ft+at*ut,ut=dt,Re[tt+ot]=lt+ut,Ie[tt+ot]=st+ft,Re[tt+ot+We]=lt-ut,Ie[tt+ot+We]=st-ft,ot!==Ue&&(dt=_e*it-Qe*at,at=_e*at+Qe*it,it=dt)}},Ke.prototype.guessLen13b=function(ve,Be){var Re=Math.max(Be,ve)|1,Ie=Re&1,Fe=0;for(Re=Re/2|0;Re;Re=Re>>>1)Fe++;return 1<<Fe+1+Ie},Ke.prototype.conjugate=function(ve,Be,Re){if(!(Re<=1))for(var Ie=0;Ie<Re/2;Ie++){var Fe=ve[Ie];ve[Ie]=ve[Re-Ie-1],ve[Re-Ie-1]=Fe,Fe=Be[Ie],Be[Ie]=-Be[Re-Ie-1],Be[Re-Ie-1]=-Fe}},Ke.prototype.normalize13b=function(ve,Be){for(var Re=0,Ie=0;Ie<Be/2;Ie++){var Fe=Math.round(ve[2*Ie+1]/Be)*8192+Math.round(ve[2*Ie]/Be)+Re;ve[Ie]=Fe&67108863,Fe<67108864?Re=0:Re=Fe/67108864|0}return ve},Ke.prototype.convert13b=function(ve,Be,Re,Ie){for(var Fe=0,qe=0;qe<Be;qe++)Fe=Fe+(ve[qe]|0),Re[2*qe]=Fe&8191,Fe=Fe>>>13,Re[2*qe+1]=Fe&8191,Fe=Fe>>>13;for(qe=2*Be;qe<Ie;++qe)Re[qe]=0;oe(Fe===0),oe((Fe&-8192)===0)},Ke.prototype.stub=function(ve){for(var Be=new Array(ve),Re=0;Re<ve;Re++)Be[Re]=0;return Be},Ke.prototype.mulp=function(ve,Be,Re){var Ie=2*this.guessLen13b(ve.length,Be.length),Fe=this.makeRBT(Ie),qe=this.stub(Ie),We=new Array(Ie),Ue=new Array(Ie),_e=new Array(Ie),Qe=new Array(Ie),tt=new Array(Ie),it=new Array(Ie),at=Re.words;at.length=Ie,this.convert13b(ve.words,ve.length,We,Ie),this.convert13b(Be.words,Be.length,Qe,Ie),this.transform(We,qe,Ue,_e,Ie,Fe),this.transform(Qe,qe,tt,it,Ie,Fe);for(var ot=0;ot<Ie;ot++){var lt=Ue[ot]*tt[ot]-_e[ot]*it[ot];_e[ot]=Ue[ot]*it[ot]+_e[ot]*tt[ot],Ue[ot]=lt}return this.conjugate(Ue,_e,Ie),this.transform(Ue,_e,at,qe,Ie,Fe),this.conjugate(at,qe,Ie),this.normalize13b(at,Ie),Re.negative=ve.negative^Be.negative,Re.length=ve.length+Be.length,Re.strip()},ue.prototype.mul=function(ve){var Be=new ue(null);return Be.words=new Array(this.length+ve.length),this.mulTo(ve,Be)},ue.prototype.mulf=function(ve){var Be=new ue(null);return Be.words=new Array(this.length+ve.length),je(this,ve,Be)},ue.prototype.imul=function(ve){return this.clone().mulTo(ve,this)},ue.prototype.imuln=function(ve){oe(typeof ve=="number"),oe(ve<67108864);for(var Be=0,Re=0;Re<this.length;Re++){var Ie=(this.words[Re]|0)*ve,Fe=(Ie&67108863)+(Be&67108863);Be>>=26,Be+=Ie/67108864|0,Be+=Fe>>>26,this.words[Re]=Fe&67108863}return Be!==0&&(this.words[Re]=Be,this.length++),this},ue.prototype.muln=function(ve){return this.clone().imuln(ve)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(ve){var Be=Te(ve);if(Be.length===0)return new ue(1);for(var Re=this,Ie=0;Ie<Be.length&&Be[Ie]===0;Ie++,Re=Re.sqr());if(++Ie<Be.length)for(var Fe=Re.sqr();Ie<Be.length;Ie++,Fe=Fe.sqr())Be[Ie]!==0&&(Re=Re.mul(Fe));return Re},ue.prototype.iushln=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26,Ie=67108863>>>26-Be<<26-Be,Fe;if(Be!==0){var qe=0;for(Fe=0;Fe<this.length;Fe++){var We=this.words[Fe]&Ie,Ue=(this.words[Fe]|0)-We<<Be;this.words[Fe]=Ue|qe,qe=We>>>26-Be}qe&&(this.words[Fe]=qe,this.length++)}if(Re!==0){for(Fe=this.length-1;Fe>=0;Fe--)this.words[Fe+Re]=this.words[Fe];for(Fe=0;Fe<Re;Fe++)this.words[Fe]=0;this.length+=Re}return this.strip()},ue.prototype.ishln=function(ve){return oe(this.negative===0),this.iushln(ve)},ue.prototype.iushrn=function(ve,Be,Re){oe(typeof ve=="number"&&ve>=0);var Ie;Be?Ie=(Be-Be%26)/26:Ie=0;var Fe=ve%26,qe=Math.min((ve-Fe)/26,this.length),We=67108863^67108863>>>Fe<<Fe,Ue=Re;if(Ie-=qe,Ie=Math.max(0,Ie),Ue){for(var _e=0;_e<qe;_e++)Ue.words[_e]=this.words[_e];Ue.length=qe}if(qe!==0)if(this.length>qe)for(this.length-=qe,_e=0;_e<this.length;_e++)this.words[_e]=this.words[_e+qe];else this.words[0]=0,this.length=1;var Qe=0;for(_e=this.length-1;_e>=0&&(Qe!==0||_e>=Ie);_e--){var tt=this.words[_e]|0;this.words[_e]=Qe<<26-Fe|tt>>>Fe,Qe=tt&We}return Ue&&Qe!==0&&(Ue.words[Ue.length++]=Qe),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},ue.prototype.ishrn=function(ve,Be,Re){return oe(this.negative===0),this.iushrn(ve,Be,Re)},ue.prototype.shln=function(ve){return this.clone().ishln(ve)},ue.prototype.ushln=function(ve){return this.clone().iushln(ve)},ue.prototype.shrn=function(ve){return this.clone().ishrn(ve)},ue.prototype.ushrn=function(ve){return this.clone().iushrn(ve)},ue.prototype.testn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26,Ie=1<<Be;if(this.length<=Re)return!1;var Fe=this.words[Re];return!!(Fe&Ie)},ue.prototype.imaskn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Re)return this;if(Be!==0&&Re++,this.length=Math.min(Re,this.length),Be!==0){var Ie=67108863^67108863>>>Be<<Be;this.words[this.length-1]&=Ie}return this.strip()},ue.prototype.maskn=function(ve){return this.clone().imaskn(ve)},ue.prototype.iaddn=function(ve){return oe(typeof ve=="number"),oe(ve<67108864),ve<0?this.isubn(-ve):this.negative!==0?this.length===1&&(this.words[0]|0)<ve?(this.words[0]=ve-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ve),this.negative=1,this):this._iaddn(ve)},ue.prototype._iaddn=function(ve){this.words[0]+=ve;for(var Be=0;Be<this.length&&this.words[Be]>=67108864;Be++)this.words[Be]-=67108864,Be===this.length-1?this.words[Be+1]=1:this.words[Be+1]++;return this.length=Math.max(this.length,Be+1),this},ue.prototype.isubn=function(ve){if(oe(typeof ve=="number"),oe(ve<67108864),ve<0)return this.iaddn(-ve);if(this.negative!==0)return this.negative=0,this.iaddn(ve),this.negative=1,this;if(this.words[0]-=ve,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Be=0;Be<this.length&&this.words[Be]<0;Be++)this.words[Be]+=67108864,this.words[Be+1]-=1;return this.strip()},ue.prototype.addn=function(ve){return this.clone().iaddn(ve)},ue.prototype.subn=function(ve){return this.clone().isubn(ve)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(ve,Be,Re){var Ie=ve.length+Re,Fe;this._expand(Ie);var qe,We=0;for(Fe=0;Fe<ve.length;Fe++){qe=(this.words[Fe+Re]|0)+We;var Ue=(ve.words[Fe]|0)*Be;qe-=Ue&67108863,We=(qe>>26)-(Ue/67108864|0),this.words[Fe+Re]=qe&67108863}for(;Fe<this.length-Re;Fe++)qe=(this.words[Fe+Re]|0)+We,We=qe>>26,this.words[Fe+Re]=qe&67108863;if(We===0)return this.strip();for(oe(We===-1),We=0,Fe=0;Fe<this.length;Fe++)qe=-(this.words[Fe]|0)+We,We=qe>>26,this.words[Fe]=qe&67108863;return this.negative=1,this.strip()},ue.prototype._wordDiv=function(ve,Be){var Re=this.length-ve.length,Ie=this.clone(),Fe=ve,qe=Fe.words[Fe.length-1]|0,We=this._countBits(qe);Re=26-We,Re!==0&&(Fe=Fe.ushln(Re),Ie.iushln(Re),qe=Fe.words[Fe.length-1]|0);var Ue=Ie.length-Fe.length,_e;if(Be!=="mod"){_e=new ue(null),_e.length=Ue+1,_e.words=new Array(_e.length);for(var Qe=0;Qe<_e.length;Qe++)_e.words[Qe]=0}var tt=Ie.clone()._ishlnsubmul(Fe,1,Ue);tt.negative===0&&(Ie=tt,_e&&(_e.words[Ue]=1));for(var it=Ue-1;it>=0;it--){var at=(Ie.words[Fe.length+it]|0)*67108864+(Ie.words[Fe.length+it-1]|0);for(at=Math.min(at/qe|0,67108863),Ie._ishlnsubmul(Fe,at,it);Ie.negative!==0;)at--,Ie.negative=0,Ie._ishlnsubmul(Fe,1,it),Ie.isZero()||(Ie.negative^=1);_e&&(_e.words[it]=at)}return _e&&_e.strip(),Ie.strip(),Be!=="div"&&Re!==0&&Ie.iushrn(Re),{div:_e||null,mod:Ie}},ue.prototype.divmod=function(ve,Be,Re){if(oe(!ve.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var Ie,Fe,qe;return this.negative!==0&&ve.negative===0?(qe=this.neg().divmod(ve,Be),Be!=="mod"&&(Ie=qe.div.neg()),Be!=="div"&&(Fe=qe.mod.neg(),Re&&Fe.negative!==0&&Fe.iadd(ve)),{div:Ie,mod:Fe}):this.negative===0&&ve.negative!==0?(qe=this.divmod(ve.neg(),Be),Be!=="mod"&&(Ie=qe.div.neg()),{div:Ie,mod:qe.mod}):this.negative&ve.negative?(qe=this.neg().divmod(ve.neg(),Be),Be!=="div"&&(Fe=qe.mod.neg(),Re&&Fe.negative!==0&&Fe.isub(ve)),{div:qe.div,mod:Fe}):ve.length>this.length||this.cmp(ve)<0?{div:new ue(0),mod:this}:ve.length===1?Be==="div"?{div:this.divn(ve.words[0]),mod:null}:Be==="mod"?{div:null,mod:new ue(this.modn(ve.words[0]))}:{div:this.divn(ve.words[0]),mod:new ue(this.modn(ve.words[0]))}:this._wordDiv(ve,Be)},ue.prototype.div=function(ve){return this.divmod(ve,"div",!1).div},ue.prototype.mod=function(ve){return this.divmod(ve,"mod",!1).mod},ue.prototype.umod=function(ve){return this.divmod(ve,"mod",!0).mod},ue.prototype.divRound=function(ve){var Be=this.divmod(ve);if(Be.mod.isZero())return Be.div;var Re=Be.div.negative!==0?Be.mod.isub(ve):Be.mod,Ie=ve.ushrn(1),Fe=ve.andln(1),qe=Re.cmp(Ie);return qe<0||Fe===1&&qe===0?Be.div:Be.div.negative!==0?Be.div.isubn(1):Be.div.iaddn(1)},ue.prototype.modn=function(ve){oe(ve<=67108863);for(var Be=(1<<26)%ve,Re=0,Ie=this.length-1;Ie>=0;Ie--)Re=(Be*Re+(this.words[Ie]|0))%ve;return Re},ue.prototype.idivn=function(ve){oe(ve<=67108863);for(var Be=0,Re=this.length-1;Re>=0;Re--){var Ie=(this.words[Re]|0)+Be*67108864;this.words[Re]=Ie/ve|0,Be=Ie%ve}return this.strip()},ue.prototype.divn=function(ve){return this.clone().idivn(ve)},ue.prototype.egcd=function(ve){oe(ve.negative===0),oe(!ve.isZero());var Be=this,Re=ve.clone();Be.negative!==0?Be=Be.umod(ve):Be=Be.clone();for(var Ie=new ue(1),Fe=new ue(0),qe=new ue(0),We=new ue(1),Ue=0;Be.isEven()&&Re.isEven();)Be.iushrn(1),Re.iushrn(1),++Ue;for(var _e=Re.clone(),Qe=Be.clone();!Be.isZero();){for(var tt=0,it=1;!(Be.words[0]&it)&&tt<26;++tt,it<<=1);if(tt>0)for(Be.iushrn(tt);tt-- >0;)(Ie.isOdd()||Fe.isOdd())&&(Ie.iadd(_e),Fe.isub(Qe)),Ie.iushrn(1),Fe.iushrn(1);for(var at=0,ot=1;!(Re.words[0]&ot)&&at<26;++at,ot<<=1);if(at>0)for(Re.iushrn(at);at-- >0;)(qe.isOdd()||We.isOdd())&&(qe.iadd(_e),We.isub(Qe)),qe.iushrn(1),We.iushrn(1);Be.cmp(Re)>=0?(Be.isub(Re),Ie.isub(qe),Fe.isub(We)):(Re.isub(Be),qe.isub(Ie),We.isub(Fe))}return{a:qe,b:We,gcd:Re.iushln(Ue)}},ue.prototype._invmp=function(ve){oe(ve.negative===0),oe(!ve.isZero());var Be=this,Re=ve.clone();Be.negative!==0?Be=Be.umod(ve):Be=Be.clone();for(var Ie=new ue(1),Fe=new ue(0),qe=Re.clone();Be.cmpn(1)>0&&Re.cmpn(1)>0;){for(var We=0,Ue=1;!(Be.words[0]&Ue)&&We<26;++We,Ue<<=1);if(We>0)for(Be.iushrn(We);We-- >0;)Ie.isOdd()&&Ie.iadd(qe),Ie.iushrn(1);for(var _e=0,Qe=1;!(Re.words[0]&Qe)&&_e<26;++_e,Qe<<=1);if(_e>0)for(Re.iushrn(_e);_e-- >0;)Fe.isOdd()&&Fe.iadd(qe),Fe.iushrn(1);Be.cmp(Re)>=0?(Be.isub(Re),Ie.isub(Fe)):(Re.isub(Be),Fe.isub(Ie))}var tt;return Be.cmpn(1)===0?tt=Ie:tt=Fe,tt.cmpn(0)<0&&tt.iadd(ve),tt},ue.prototype.gcd=function(ve){if(this.isZero())return ve.abs();if(ve.isZero())return this.abs();var Be=this.clone(),Re=ve.clone();Be.negative=0,Re.negative=0;for(var Ie=0;Be.isEven()&&Re.isEven();Ie++)Be.iushrn(1),Re.iushrn(1);do{for(;Be.isEven();)Be.iushrn(1);for(;Re.isEven();)Re.iushrn(1);var Fe=Be.cmp(Re);if(Fe<0){var qe=Be;Be=Re,Re=qe}else if(Fe===0||Re.cmpn(1)===0)break;Be.isub(Re)}while(!0);return Re.iushln(Ie)},ue.prototype.invm=function(ve){return this.egcd(ve).a.umod(ve)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(ve){return this.words[0]&ve},ue.prototype.bincn=function(ve){oe(typeof ve=="number");var Be=ve%26,Re=(ve-Be)/26,Ie=1<<Be;if(this.length<=Re)return this._expand(Re+1),this.words[Re]|=Ie,this;for(var Fe=Ie,qe=Re;Fe!==0&&qe<this.length;qe++){var We=this.words[qe]|0;We+=Fe,Fe=We>>>26,We&=67108863,this.words[qe]=We}return Fe!==0&&(this.words[qe]=Fe,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(ve){var Be=ve<0;if(this.negative!==0&&!Be)return-1;if(this.negative===0&&Be)return 1;this.strip();var Re;if(this.length>1)Re=1;else{Be&&(ve=-ve),oe(ve<=67108863,"Number is too big");var Ie=this.words[0]|0;Re=Ie===ve?0:Ie<ve?-1:1}return this.negative!==0?-Re|0:Re},ue.prototype.cmp=function(ve){if(this.negative!==0&&ve.negative===0)return-1;if(this.negative===0&&ve.negative!==0)return 1;var Be=this.ucmp(ve);return this.negative!==0?-Be|0:Be},ue.prototype.ucmp=function(ve){if(this.length>ve.length)return 1;if(this.length<ve.length)return-1;for(var Be=0,Re=this.length-1;Re>=0;Re--){var Ie=this.words[Re]|0,Fe=ve.words[Re]|0;if(Ie!==Fe){Ie<Fe?Be=-1:Ie>Fe&&(Be=1);break}}return Be},ue.prototype.gtn=function(ve){return this.cmpn(ve)===1},ue.prototype.gt=function(ve){return this.cmp(ve)===1},ue.prototype.gten=function(ve){return this.cmpn(ve)>=0},ue.prototype.gte=function(ve){return this.cmp(ve)>=0},ue.prototype.ltn=function(ve){return this.cmpn(ve)===-1},ue.prototype.lt=function(ve){return this.cmp(ve)===-1},ue.prototype.lten=function(ve){return this.cmpn(ve)<=0},ue.prototype.lte=function(ve){return this.cmp(ve)<=0},ue.prototype.eqn=function(ve){return this.cmpn(ve)===0},ue.prototype.eq=function(ve){return this.cmp(ve)===0},ue.red=function(ve){return new et(ve)},ue.prototype.toRed=function(ve){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),ve.convertTo(this)._forceRed(ve)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(ve){return this.red=ve,this},ue.prototype.forceRed=function(ve){return oe(!this.red,"Already a number in reduction context"),this._forceRed(ve)},ue.prototype.redAdd=function(ve){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,ve)},ue.prototype.redIAdd=function(ve){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ve)},ue.prototype.redSub=function(ve){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,ve)},ue.prototype.redISub=function(ve){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,ve)},ue.prototype.redShl=function(ve){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,ve)},ue.prototype.redMul=function(ve){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,ve),this.red.mul(this,ve)},ue.prototype.redIMul=function(ve){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,ve),this.red.imul(this,ve)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(ve){return oe(this.red&&!ve.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ve)};var Ye={k256:null,p224:null,p192:null,p25519:null};function ze(Ge,ve){this.name=Ge,this.p=new ue(ve,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ze.prototype._tmp=function(){var ve=new ue(null);return ve.words=new Array(Math.ceil(this.n/13)),ve},ze.prototype.ireduce=function(ve){var Be=ve,Re;do this.split(Be,this.tmp),Be=this.imulK(Be),Be=Be.iadd(this.tmp),Re=Be.bitLength();while(Re>this.n);var Ie=Re<this.n?-1:Be.ucmp(this.p);return Ie===0?(Be.words[0]=0,Be.length=1):Ie>0?Be.isub(this.p):Be.strip!==void 0?Be.strip():Be._strip(),Be},ze.prototype.split=function(ve,Be){ve.iushrn(this.n,0,Be)},ze.prototype.imulK=function(ve){return ve.imul(this.k)};function Xe(){ze.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(Xe,ze),Xe.prototype.split=function(ve,Be){for(var Re=4194303,Ie=Math.min(ve.length,9),Fe=0;Fe<Ie;Fe++)Be.words[Fe]=ve.words[Fe];if(Be.length=Ie,ve.length<=9){ve.words[0]=0,ve.length=1;return}var qe=ve.words[9];for(Be.words[Be.length++]=qe&Re,Fe=10;Fe<ve.length;Fe++){var We=ve.words[Fe]|0;ve.words[Fe-10]=(We&Re)<<4|qe>>>22,qe=We}qe>>>=22,ve.words[Fe-10]=qe,qe===0&&ve.length>10?ve.length-=10:ve.length-=9},Xe.prototype.imulK=function(ve){ve.words[ve.length]=0,ve.words[ve.length+1]=0,ve.length+=2;for(var Be=0,Re=0;Re<ve.length;Re++){var Ie=ve.words[Re]|0;Be+=Ie*977,ve.words[Re]=Be&67108863,Be=Ie*64+(Be/67108864|0)}return ve.words[ve.length-1]===0&&(ve.length--,ve.words[ve.length-1]===0&&ve.length--),ve};function Je(){ze.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(Je,ze);function rt(){ze.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(rt,ze);function Ze(){ze.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(Ze,ze),Ze.prototype.imulK=function(ve){for(var Be=0,Re=0;Re<ve.length;Re++){var Ie=(ve.words[Re]|0)*19+Be,Fe=Ie&67108863;Ie>>>=26,ve.words[Re]=Fe,Be=Ie}return Be!==0&&(ve.words[ve.length++]=Be),ve},ue._prime=function(ve){if(Ye[ve])return Ye[ve];var Be;if(ve==="k256")Be=new Xe;else if(ve==="p224")Be=new Je;else if(ve==="p192")Be=new rt;else if(ve==="p25519")Be=new Ze;else throw new Error("Unknown prime "+ve);return Ye[ve]=Be,Be};function et(Ge){if(typeof Ge=="string"){var ve=ue._prime(Ge);this.m=ve.p,this.prime=ve}else oe(Ge.gtn(1),"modulus must be greater than 1"),this.m=Ge,this.prime=null}et.prototype._verify1=function(ve){oe(ve.negative===0,"red works only with positives"),oe(ve.red,"red works only with red numbers")},et.prototype._verify2=function(ve,Be){oe((ve.negative|Be.negative)===0,"red works only with positives"),oe(ve.red&&ve.red===Be.red,"red works only with red numbers")},et.prototype.imod=function(ve){return this.prime?this.prime.ireduce(ve)._forceRed(this):ve.umod(this.m)._forceRed(this)},et.prototype.neg=function(ve){return ve.isZero()?ve.clone():this.m.sub(ve)._forceRed(this)},et.prototype.add=function(ve,Be){this._verify2(ve,Be);var Re=ve.add(Be);return Re.cmp(this.m)>=0&&Re.isub(this.m),Re._forceRed(this)},et.prototype.iadd=function(ve,Be){this._verify2(ve,Be);var Re=ve.iadd(Be);return Re.cmp(this.m)>=0&&Re.isub(this.m),Re},et.prototype.sub=function(ve,Be){this._verify2(ve,Be);var Re=ve.sub(Be);return Re.cmpn(0)<0&&Re.iadd(this.m),Re._forceRed(this)},et.prototype.isub=function(ve,Be){this._verify2(ve,Be);var Re=ve.isub(Be);return Re.cmpn(0)<0&&Re.iadd(this.m),Re},et.prototype.shl=function(ve,Be){return this._verify1(ve),this.imod(ve.ushln(Be))},et.prototype.imul=function(ve,Be){return this._verify2(ve,Be),this.imod(ve.imul(Be))},et.prototype.mul=function(ve,Be){return this._verify2(ve,Be),this.imod(ve.mul(Be))},et.prototype.isqr=function(ve){return this.imul(ve,ve.clone())},et.prototype.sqr=function(ve){return this.mul(ve,ve)},et.prototype.sqrt=function(ve){if(ve.isZero())return ve.clone();var Be=this.m.andln(3);if(oe(Be%2===1),Be===3){var Re=this.m.add(new ue(1)).iushrn(2);return this.pow(ve,Re)}for(var Ie=this.m.subn(1),Fe=0;!Ie.isZero()&&Ie.andln(1)===0;)Fe++,Ie.iushrn(1);oe(!Ie.isZero());var qe=new ue(1).toRed(this),We=qe.redNeg(),Ue=this.m.subn(1).iushrn(1),_e=this.m.bitLength();for(_e=new ue(2*_e*_e).toRed(this);this.pow(_e,Ue).cmp(We)!==0;)_e.redIAdd(We);for(var Qe=this.pow(_e,Ie),tt=this.pow(ve,Ie.addn(1).iushrn(1)),it=this.pow(ve,Ie),at=Fe;it.cmp(qe)!==0;){for(var ot=it,lt=0;ot.cmp(qe)!==0;lt++)ot=ot.redSqr();oe(lt<at);var st=this.pow(Qe,new ue(1).iushln(at-lt-1));tt=tt.redMul(st),Qe=st.redSqr(),it=it.redMul(Qe),at=lt}return tt},et.prototype.invm=function(ve){var Be=ve._invmp(this.m);return Be.negative!==0?(Be.negative=0,this.imod(Be).redNeg()):this.imod(Be)},et.prototype.pow=function(ve,Be){if(Be.isZero())return new ue(1).toRed(this);if(Be.cmpn(1)===0)return ve.clone();var Re=4,Ie=new Array(1<<Re);Ie[0]=new ue(1).toRed(this),Ie[1]=ve;for(var Fe=2;Fe<Ie.length;Fe++)Ie[Fe]=this.mul(Ie[Fe-1],ve);var qe=Ie[0],We=0,Ue=0,_e=Be.bitLength()%26;for(_e===0&&(_e=26),Fe=Be.length-1;Fe>=0;Fe--){for(var Qe=Be.words[Fe],tt=_e-1;tt>=0;tt--){var it=Qe>>tt&1;if(qe!==Ie[0]&&(qe=this.sqr(qe)),it===0&&We===0){Ue=0;continue}We<<=1,We|=it,Ue++,!(Ue!==Re&&(Fe!==0||tt!==0))&&(qe=this.mul(qe,Ie[We]),Ue=0,We=0)}_e=26}return qe},et.prototype.convertTo=function(ve){var Be=ve.umod(this.m);return Be===ve?Be.clone():Be},et.prototype.convertFrom=function(ve){var Be=ve.clone();return Be.red=null,Be},ue.mont=function(ve){return new nt(ve)};function nt(Ge){et.call(this,Ge),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(nt,et),nt.prototype.convertTo=function(ve){return this.imod(ve.ushln(this.shift))},nt.prototype.convertFrom=function(ve){var Be=this.imod(ve.mul(this.rinv));return Be.red=null,Be},nt.prototype.imul=function(ve,Be){if(ve.isZero()||Be.isZero())return ve.words[0]=0,ve.length=1,ve;var Re=ve.imul(Be),Ie=Re.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Fe=Re.isub(Ie).iushrn(this.shift),qe=Fe;return Fe.cmp(this.m)>=0?qe=Fe.isub(this.m):Fe.cmpn(0)<0&&(qe=Fe.iadd(this.m)),qe._forceRed(this)},nt.prototype.mul=function(ve,Be){if(ve.isZero()||Be.isZero())return new ue(0)._forceRed(this);var Re=ve.mul(Be),Ie=Re.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Fe=Re.isub(Ie).iushrn(this.shift),qe=Fe;return Fe.cmp(this.m)>=0?qe=Fe.isub(this.m):Fe.cmpn(0)<0&&(qe=Fe.iadd(this.m)),qe._forceRed(this)},nt.prototype.invm=function(ve){var Be=this.imod(ve._invmp(this.m).mul(this.r2));return Be._forceRed(this)}})(K,commonjsGlobal)}(bn$6)),bn$6.exports}var bn$5={exports:{}};bn$5.exports;var hasRequiredBn$5;function requireBn$5(){return hasRequiredBn$5||(hasRequiredBn$5=1,function(K){(function(J,ne){function oe(Ge,ve){if(!Ge)throw new Error(ve||"Assertion failed")}function ce(Ge,ve){Ge.super_=ve;var Be=function(){};Be.prototype=ve.prototype,Ge.prototype=new Be,Ge.prototype.constructor=Ge}function ue(Ge,ve,Be){if(ue.isBN(Ge))return Ge;this.negative=0,this.words=null,this.length=0,this.red=null,Ge!==null&&((ve==="le"||ve==="be")&&(Be=ve,ve=10),this._init(Ge||0,ve||10,Be||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(ve){return ve instanceof ue?!0:ve!==null&&typeof ve=="object"&&ve.constructor.wordSize===ue.wordSize&&Array.isArray(ve.words)},ue.max=function(ve,Be){return ve.cmp(Be)>0?ve:Be},ue.min=function(ve,Be){return ve.cmp(Be)<0?ve:Be},ue.prototype._init=function(ve,Be,Re){if(typeof ve=="number")return this._initNumber(ve,Be,Re);if(typeof ve=="object")return this._initArray(ve,Be,Re);Be==="hex"&&(Be=16),oe(Be===(Be|0)&&Be>=2&&Be<=36),ve=ve.toString().replace(/\s+/g,"");var Ie=0;ve[0]==="-"&&(Ie++,this.negative=1),Ie<ve.length&&(Be===16?this._parseHex(ve,Ie,Re):(this._parseBase(ve,Be,Ie),Re==="le"&&this._initArray(this.toArray(),Be,Re)))},ue.prototype._initNumber=function(ve,Be,Re){ve<0&&(this.negative=1,ve=-ve),ve<67108864?(this.words=[ve&67108863],this.length=1):ve<4503599627370496?(this.words=[ve&67108863,ve/67108864&67108863],this.length=2):(oe(ve<9007199254740992),this.words=[ve&67108863,ve/67108864&67108863,1],this.length=3),Re==="le"&&this._initArray(this.toArray(),Be,Re)},ue.prototype._initArray=function(ve,Be,Re){if(oe(typeof ve.length=="number"),ve.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ve.length/3),this.words=new Array(this.length);for(var Ie=0;Ie<this.length;Ie++)this.words[Ie]=0;var Fe,qe,We=0;if(Re==="be")for(Ie=ve.length-1,Fe=0;Ie>=0;Ie-=3)qe=ve[Ie]|ve[Ie-1]<<8|ve[Ie-2]<<16,this.words[Fe]|=qe<<We&67108863,this.words[Fe+1]=qe>>>26-We&67108863,We+=24,We>=26&&(We-=26,Fe++);else if(Re==="le")for(Ie=0,Fe=0;Ie<ve.length;Ie+=3)qe=ve[Ie]|ve[Ie+1]<<8|ve[Ie+2]<<16,this.words[Fe]|=qe<<We&67108863,this.words[Fe+1]=qe>>>26-We&67108863,We+=24,We>=26&&(We-=26,Fe++);return this.strip()};function pe(Ge,ve){var Be=Ge.charCodeAt(ve);return Be>=65&&Be<=70?Be-55:Be>=97&&Be<=102?Be-87:Be-48&15}function xe(Ge,ve,Be){var Re=pe(Ge,Be);return Be-1>=ve&&(Re|=pe(Ge,Be-1)<<4),Re}ue.prototype._parseHex=function(ve,Be,Re){this.length=Math.ceil((ve.length-Be)/6),this.words=new Array(this.length);for(var Ie=0;Ie<this.length;Ie++)this.words[Ie]=0;var Fe=0,qe=0,We;if(Re==="be")for(Ie=ve.length-1;Ie>=Be;Ie-=2)We=xe(ve,Be,Ie)<<Fe,this.words[qe]|=We&67108863,Fe>=18?(Fe-=18,qe+=1,this.words[qe]|=We>>>26):Fe+=8;else{var Ue=ve.length-Be;for(Ie=Ue%2===0?Be+1:Be;Ie<ve.length;Ie+=2)We=xe(ve,Be,Ie)<<Fe,this.words[qe]|=We&67108863,Fe>=18?(Fe-=18,qe+=1,this.words[qe]|=We>>>26):Fe+=8}this.strip()};function me(Ge,ve,Be,Re){for(var Ie=0,Fe=Math.min(Ge.length,Be),qe=ve;qe<Fe;qe++){var We=Ge.charCodeAt(qe)-48;Ie*=Re,We>=49?Ie+=We-49+10:We>=17?Ie+=We-17+10:Ie+=We}return Ie}ue.prototype._parseBase=function(ve,Be,Re){this.words=[0],this.length=1;for(var Ie=0,Fe=1;Fe<=67108863;Fe*=Be)Ie++;Ie--,Fe=Fe/Be|0;for(var qe=ve.length-Re,We=qe%Ie,Ue=Math.min(qe,qe-We)+Re,_e=0,Qe=Re;Qe<Ue;Qe+=Ie)_e=me(ve,Qe,Qe+Ie,Be),this.imuln(Fe),this.words[0]+_e<67108864?this.words[0]+=_e:this._iaddn(_e);if(We!==0){var tt=1;for(_e=me(ve,Qe,ve.length,Be),Qe=0;Qe<We;Qe++)tt*=Be;this.imuln(tt),this.words[0]+_e<67108864?this.words[0]+=_e:this._iaddn(_e)}this.strip()},ue.prototype.copy=function(ve){ve.words=new Array(this.length);for(var Be=0;Be<this.length;Be++)ve.words[Be]=this.words[Be];ve.length=this.length,ve.negative=this.negative,ve.red=this.red},ue.prototype.clone=function(){var ve=new ue(null);return this.copy(ve),ve},ue.prototype._expand=function(ve){for(;this.length<ve;)this.words[this.length++]=0;return this},ue.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},ue.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ge=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ye=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Se=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(ve,Be){ve=ve||10,Be=Be|0||1;var Re;if(ve===16||ve==="hex"){Re="";for(var Ie=0,Fe=0,qe=0;qe<this.length;qe++){var We=this.words[qe],Ue=((We<<Ie|Fe)&16777215).toString(16);Fe=We>>>24-Ie&16777215,Fe!==0||qe!==this.length-1?Re=ge[6-Ue.length]+Ue+Re:Re=Ue+Re,Ie+=2,Ie>=26&&(Ie-=26,qe--)}for(Fe!==0&&(Re=Fe.toString(16)+Re);Re.length%Be!==0;)Re="0"+Re;return this.negative!==0&&(Re="-"+Re),Re}if(ve===(ve|0)&&ve>=2&&ve<=36){var _e=ye[ve],Qe=Se[ve];Re="";var tt=this.clone();for(tt.negative=0;!tt.isZero();){var it=tt.modn(Qe).toString(ve);tt=tt.idivn(Qe),tt.isZero()?Re=it+Re:Re=ge[_e-it.length]+it+Re}for(this.isZero()&&(Re="0"+Re);Re.length%Be!==0;)Re="0"+Re;return this.negative!==0&&(Re="-"+Re),Re}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var ve=this.words[0];return this.length===2?ve+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ve+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ve:ve},ue.prototype.toJSON=function(){return this.toString(16)},ue.prototype.toBuffer=function(ve,Be){return oe(typeof Ae<"u"),this.toArrayLike(Ae,ve,Be)},ue.prototype.toArray=function(ve,Be){return this.toArrayLike(Array,ve,Be)},ue.prototype.toArrayLike=function(ve,Be,Re){var Ie=this.byteLength(),Fe=Re||Math.max(1,Ie);oe(Ie<=Fe,"byte array longer than desired length"),oe(Fe>0,"Requested array length <= 0"),this.strip();var qe=Be==="le",We=new ve(Fe),Ue,_e,Qe=this.clone();if(qe){for(_e=0;!Qe.isZero();_e++)Ue=Qe.andln(255),Qe.iushrn(8),We[_e]=Ue;for(;_e<Fe;_e++)We[_e]=0}else{for(_e=0;_e<Fe-Ie;_e++)We[_e]=0;for(_e=0;!Qe.isZero();_e++)Ue=Qe.andln(255),Qe.iushrn(8),We[Fe-_e-1]=Ue}return We},Math.clz32?ue.prototype._countBits=function(ve){return 32-Math.clz32(ve)}:ue.prototype._countBits=function(ve){var Be=ve,Re=0;return Be>=4096&&(Re+=13,Be>>>=13),Be>=64&&(Re+=7,Be>>>=7),Be>=8&&(Re+=4,Be>>>=4),Be>=2&&(Re+=2,Be>>>=2),Re+Be},ue.prototype._zeroBits=function(ve){if(ve===0)return 26;var Be=ve,Re=0;return Be&8191||(Re+=13,Be>>>=13),Be&127||(Re+=7,Be>>>=7),Be&15||(Re+=4,Be>>>=4),Be&3||(Re+=2,Be>>>=2),Be&1||Re++,Re},ue.prototype.bitLength=function(){var ve=this.words[this.length-1],Be=this._countBits(ve);return(this.length-1)*26+Be};function Te(Ge){for(var ve=new Array(Ge.bitLength()),Be=0;Be<ve.length;Be++){var Re=Be/26|0,Ie=Be%26;ve[Be]=(Ge.words[Re]&1<<Ie)>>>Ie}return ve}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ve=0,Be=0;Be<this.length;Be++){var Re=this._zeroBits(this.words[Be]);if(ve+=Re,Re!==26)break}return ve},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(ve){return this.negative!==0?this.abs().inotn(ve).iaddn(1):this.clone()},ue.prototype.fromTwos=function(ve){return this.testn(ve-1)?this.notn(ve).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(ve){for(;this.length<ve.length;)this.words[this.length++]=0;for(var Be=0;Be<ve.length;Be++)this.words[Be]=this.words[Be]|ve.words[Be];return this.strip()},ue.prototype.ior=function(ve){return oe((this.negative|ve.negative)===0),this.iuor(ve)},ue.prototype.or=function(ve){return this.length>ve.length?this.clone().ior(ve):ve.clone().ior(this)},ue.prototype.uor=function(ve){return this.length>ve.length?this.clone().iuor(ve):ve.clone().iuor(this)},ue.prototype.iuand=function(ve){var Be;this.length>ve.length?Be=ve:Be=this;for(var Re=0;Re<Be.length;Re++)this.words[Re]=this.words[Re]&ve.words[Re];return this.length=Be.length,this.strip()},ue.prototype.iand=function(ve){return oe((this.negative|ve.negative)===0),this.iuand(ve)},ue.prototype.and=function(ve){return this.length>ve.length?this.clone().iand(ve):ve.clone().iand(this)},ue.prototype.uand=function(ve){return this.length>ve.length?this.clone().iuand(ve):ve.clone().iuand(this)},ue.prototype.iuxor=function(ve){var Be,Re;this.length>ve.length?(Be=this,Re=ve):(Be=ve,Re=this);for(var Ie=0;Ie<Re.length;Ie++)this.words[Ie]=Be.words[Ie]^Re.words[Ie];if(this!==Be)for(;Ie<Be.length;Ie++)this.words[Ie]=Be.words[Ie];return this.length=Be.length,this.strip()},ue.prototype.ixor=function(ve){return oe((this.negative|ve.negative)===0),this.iuxor(ve)},ue.prototype.xor=function(ve){return this.length>ve.length?this.clone().ixor(ve):ve.clone().ixor(this)},ue.prototype.uxor=function(ve){return this.length>ve.length?this.clone().iuxor(ve):ve.clone().iuxor(this)},ue.prototype.inotn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=Math.ceil(ve/26)|0,Re=ve%26;this._expand(Be),Re>0&&Be--;for(var Ie=0;Ie<Be;Ie++)this.words[Ie]=~this.words[Ie]&67108863;return Re>0&&(this.words[Ie]=~this.words[Ie]&67108863>>26-Re),this.strip()},ue.prototype.notn=function(ve){return this.clone().inotn(ve)},ue.prototype.setn=function(ve,Be){oe(typeof ve=="number"&&ve>=0);var Re=ve/26|0,Ie=ve%26;return this._expand(Re+1),Be?this.words[Re]=this.words[Re]|1<<Ie:this.words[Re]=this.words[Re]&~(1<<Ie),this.strip()},ue.prototype.iadd=function(ve){var Be;if(this.negative!==0&&ve.negative===0)return this.negative=0,Be=this.isub(ve),this.negative^=1,this._normSign();if(this.negative===0&&ve.negative!==0)return ve.negative=0,Be=this.isub(ve),ve.negative=1,Be._normSign();var Re,Ie;this.length>ve.length?(Re=this,Ie=ve):(Re=ve,Ie=this);for(var Fe=0,qe=0;qe<Ie.length;qe++)Be=(Re.words[qe]|0)+(Ie.words[qe]|0)+Fe,this.words[qe]=Be&67108863,Fe=Be>>>26;for(;Fe!==0&&qe<Re.length;qe++)Be=(Re.words[qe]|0)+Fe,this.words[qe]=Be&67108863,Fe=Be>>>26;if(this.length=Re.length,Fe!==0)this.words[this.length]=Fe,this.length++;else if(Re!==this)for(;qe<Re.length;qe++)this.words[qe]=Re.words[qe];return this},ue.prototype.add=function(ve){var Be;return ve.negative!==0&&this.negative===0?(ve.negative=0,Be=this.sub(ve),ve.negative^=1,Be):ve.negative===0&&this.negative!==0?(this.negative=0,Be=ve.sub(this),this.negative=1,Be):this.length>ve.length?this.clone().iadd(ve):ve.clone().iadd(this)},ue.prototype.isub=function(ve){if(ve.negative!==0){ve.negative=0;var Be=this.iadd(ve);return ve.negative=1,Be._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ve),this.negative=1,this._normSign();var Re=this.cmp(ve);if(Re===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ie,Fe;Re>0?(Ie=this,Fe=ve):(Ie=ve,Fe=this);for(var qe=0,We=0;We<Fe.length;We++)Be=(Ie.words[We]|0)-(Fe.words[We]|0)+qe,qe=Be>>26,this.words[We]=Be&67108863;for(;qe!==0&&We<Ie.length;We++)Be=(Ie.words[We]|0)+qe,qe=Be>>26,this.words[We]=Be&67108863;if(qe===0&&We<Ie.length&&Ie!==this)for(;We<Ie.length;We++)this.words[We]=Ie.words[We];return this.length=Math.max(this.length,We),Ie!==this&&(this.negative=1),this.strip()},ue.prototype.sub=function(ve){return this.clone().isub(ve)};function Ne(Ge,ve,Be){Be.negative=ve.negative^Ge.negative;var Re=Ge.length+ve.length|0;Be.length=Re,Re=Re-1|0;var Ie=Ge.words[0]|0,Fe=ve.words[0]|0,qe=Ie*Fe,We=qe&67108863,Ue=qe/67108864|0;Be.words[0]=We;for(var _e=1;_e<Re;_e++){for(var Qe=Ue>>>26,tt=Ue&67108863,it=Math.min(_e,ve.length-1),at=Math.max(0,_e-Ge.length+1);at<=it;at++){var ot=_e-at|0;Ie=Ge.words[ot]|0,Fe=ve.words[at]|0,qe=Ie*Fe+tt,Qe+=qe/67108864|0,tt=qe&67108863}Be.words[_e]=tt|0,Ue=Qe|0}return Ue!==0?Be.words[_e]=Ue|0:Be.length--,Be.strip()}var $e=function(ve,Be,Re){var Ie=ve.words,Fe=Be.words,qe=Re.words,We=0,Ue,_e,Qe,tt=Ie[0]|0,it=tt&8191,at=tt>>>13,ot=Ie[1]|0,lt=ot&8191,st=ot>>>13,ut=Ie[2]|0,ft=ut&8191,dt=ut>>>13,Bt=Ie[3]|0,pt=Bt&8191,mt=Bt>>>13,bt=Ie[4]|0,xt=bt&8191,yt=bt>>>13,It=Ie[5]|0,ht=It&8191,gt=It>>>13,Pt=Ie[6]|0,wt=Pt&8191,St=Pt>>>13,Zt=Ie[7]|0,Ct=Zt&8191,Rt=Zt>>>13,dr=Ie[8]|0,Dt=dr&8191,Tt=dr>>>13,or=Ie[9]|0,Mt=or&8191,kt=or>>>13,ur=Fe[0]|0,$t=ur&8191,jt=ur>>>13,nr=Fe[1]|0,Ot=nr&8191,Lt=nr>>>13,lr=Fe[2]|0,Ht=lr&8191,qt=lr>>>13,tr=Fe[3]|0,Vt=tr&8191,Gt=tr>>>13,br=Fe[4]|0,Yt=br&8191,Kt=br>>>13,yr=Fe[5]|0,zt=yr&8191,Jt=yr>>>13,xr=Fe[6]|0,Xt=xr&8191,ir=xr>>>13,Mr=Fe[7]|0,er=Mr&8191,fr=Mr>>>13,Qr=Fe[8]|0,sr=Qr&8191,Ar=Qr>>>13,Kr=Fe[9]|0,ar=Kr&8191,hr=Kr>>>13;Re.negative=ve.negative^Be.negative,Re.length=19,Ue=Math.imul(it,$t),_e=Math.imul(it,jt),_e=_e+Math.imul(at,$t)|0,Qe=Math.imul(at,jt);var Lr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,Ue=Math.imul(lt,$t),_e=Math.imul(lt,jt),_e=_e+Math.imul(st,$t)|0,Qe=Math.imul(st,jt),Ue=Ue+Math.imul(it,Ot)|0,_e=_e+Math.imul(it,Lt)|0,_e=_e+Math.imul(at,Ot)|0,Qe=Qe+Math.imul(at,Lt)|0;var Pr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,Ue=Math.imul(ft,$t),_e=Math.imul(ft,jt),_e=_e+Math.imul(dt,$t)|0,Qe=Math.imul(dt,jt),Ue=Ue+Math.imul(lt,Ot)|0,_e=_e+Math.imul(lt,Lt)|0,_e=_e+Math.imul(st,Ot)|0,Qe=Qe+Math.imul(st,Lt)|0,Ue=Ue+Math.imul(it,Ht)|0,_e=_e+Math.imul(it,qt)|0,_e=_e+Math.imul(at,Ht)|0,Qe=Qe+Math.imul(at,qt)|0;var Yr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,Ue=Math.imul(pt,$t),_e=Math.imul(pt,jt),_e=_e+Math.imul(mt,$t)|0,Qe=Math.imul(mt,jt),Ue=Ue+Math.imul(ft,Ot)|0,_e=_e+Math.imul(ft,Lt)|0,_e=_e+Math.imul(dt,Ot)|0,Qe=Qe+Math.imul(dt,Lt)|0,Ue=Ue+Math.imul(lt,Ht)|0,_e=_e+Math.imul(lt,qt)|0,_e=_e+Math.imul(st,Ht)|0,Qe=Qe+Math.imul(st,qt)|0,Ue=Ue+Math.imul(it,Vt)|0,_e=_e+Math.imul(it,Gt)|0,_e=_e+Math.imul(at,Vt)|0,Qe=Qe+Math.imul(at,Gt)|0;var Wr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,Ue=Math.imul(xt,$t),_e=Math.imul(xt,jt),_e=_e+Math.imul(yt,$t)|0,Qe=Math.imul(yt,jt),Ue=Ue+Math.imul(pt,Ot)|0,_e=_e+Math.imul(pt,Lt)|0,_e=_e+Math.imul(mt,Ot)|0,Qe=Qe+Math.imul(mt,Lt)|0,Ue=Ue+Math.imul(ft,Ht)|0,_e=_e+Math.imul(ft,qt)|0,_e=_e+Math.imul(dt,Ht)|0,Qe=Qe+Math.imul(dt,qt)|0,Ue=Ue+Math.imul(lt,Vt)|0,_e=_e+Math.imul(lt,Gt)|0,_e=_e+Math.imul(st,Vt)|0,Qe=Qe+Math.imul(st,Gt)|0,Ue=Ue+Math.imul(it,Yt)|0,_e=_e+Math.imul(it,Kt)|0,_e=_e+Math.imul(at,Yt)|0,Qe=Qe+Math.imul(at,Kt)|0;var Zr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,Ue=Math.imul(ht,$t),_e=Math.imul(ht,jt),_e=_e+Math.imul(gt,$t)|0,Qe=Math.imul(gt,jt),Ue=Ue+Math.imul(xt,Ot)|0,_e=_e+Math.imul(xt,Lt)|0,_e=_e+Math.imul(yt,Ot)|0,Qe=Qe+Math.imul(yt,Lt)|0,Ue=Ue+Math.imul(pt,Ht)|0,_e=_e+Math.imul(pt,qt)|0,_e=_e+Math.imul(mt,Ht)|0,Qe=Qe+Math.imul(mt,qt)|0,Ue=Ue+Math.imul(ft,Vt)|0,_e=_e+Math.imul(ft,Gt)|0,_e=_e+Math.imul(dt,Vt)|0,Qe=Qe+Math.imul(dt,Gt)|0,Ue=Ue+Math.imul(lt,Yt)|0,_e=_e+Math.imul(lt,Kt)|0,_e=_e+Math.imul(st,Yt)|0,Qe=Qe+Math.imul(st,Kt)|0,Ue=Ue+Math.imul(it,zt)|0,_e=_e+Math.imul(it,Jt)|0,_e=_e+Math.imul(at,zt)|0,Qe=Qe+Math.imul(at,Jt)|0;var Jr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,Ue=Math.imul(wt,$t),_e=Math.imul(wt,jt),_e=_e+Math.imul(St,$t)|0,Qe=Math.imul(St,jt),Ue=Ue+Math.imul(ht,Ot)|0,_e=_e+Math.imul(ht,Lt)|0,_e=_e+Math.imul(gt,Ot)|0,Qe=Qe+Math.imul(gt,Lt)|0,Ue=Ue+Math.imul(xt,Ht)|0,_e=_e+Math.imul(xt,qt)|0,_e=_e+Math.imul(yt,Ht)|0,Qe=Qe+Math.imul(yt,qt)|0,Ue=Ue+Math.imul(pt,Vt)|0,_e=_e+Math.imul(pt,Gt)|0,_e=_e+Math.imul(mt,Vt)|0,Qe=Qe+Math.imul(mt,Gt)|0,Ue=Ue+Math.imul(ft,Yt)|0,_e=_e+Math.imul(ft,Kt)|0,_e=_e+Math.imul(dt,Yt)|0,Qe=Qe+Math.imul(dt,Kt)|0,Ue=Ue+Math.imul(lt,zt)|0,_e=_e+Math.imul(lt,Jt)|0,_e=_e+Math.imul(st,zt)|0,Qe=Qe+Math.imul(st,Jt)|0,Ue=Ue+Math.imul(it,Xt)|0,_e=_e+Math.imul(it,ir)|0,_e=_e+Math.imul(at,Xt)|0,Qe=Qe+Math.imul(at,ir)|0;var Gr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,Ue=Math.imul(Ct,$t),_e=Math.imul(Ct,jt),_e=_e+Math.imul(Rt,$t)|0,Qe=Math.imul(Rt,jt),Ue=Ue+Math.imul(wt,Ot)|0,_e=_e+Math.imul(wt,Lt)|0,_e=_e+Math.imul(St,Ot)|0,Qe=Qe+Math.imul(St,Lt)|0,Ue=Ue+Math.imul(ht,Ht)|0,_e=_e+Math.imul(ht,qt)|0,_e=_e+Math.imul(gt,Ht)|0,Qe=Qe+Math.imul(gt,qt)|0,Ue=Ue+Math.imul(xt,Vt)|0,_e=_e+Math.imul(xt,Gt)|0,_e=_e+Math.imul(yt,Vt)|0,Qe=Qe+Math.imul(yt,Gt)|0,Ue=Ue+Math.imul(pt,Yt)|0,_e=_e+Math.imul(pt,Kt)|0,_e=_e+Math.imul(mt,Yt)|0,Qe=Qe+Math.imul(mt,Kt)|0,Ue=Ue+Math.imul(ft,zt)|0,_e=_e+Math.imul(ft,Jt)|0,_e=_e+Math.imul(dt,zt)|0,Qe=Qe+Math.imul(dt,Jt)|0,Ue=Ue+Math.imul(lt,Xt)|0,_e=_e+Math.imul(lt,ir)|0,_e=_e+Math.imul(st,Xt)|0,Qe=Qe+Math.imul(st,ir)|0,Ue=Ue+Math.imul(it,er)|0,_e=_e+Math.imul(it,fr)|0,_e=_e+Math.imul(at,er)|0,Qe=Qe+Math.imul(at,fr)|0;var sn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(sn>>>26)|0,sn&=67108863,Ue=Math.imul(Dt,$t),_e=Math.imul(Dt,jt),_e=_e+Math.imul(Tt,$t)|0,Qe=Math.imul(Tt,jt),Ue=Ue+Math.imul(Ct,Ot)|0,_e=_e+Math.imul(Ct,Lt)|0,_e=_e+Math.imul(Rt,Ot)|0,Qe=Qe+Math.imul(Rt,Lt)|0,Ue=Ue+Math.imul(wt,Ht)|0,_e=_e+Math.imul(wt,qt)|0,_e=_e+Math.imul(St,Ht)|0,Qe=Qe+Math.imul(St,qt)|0,Ue=Ue+Math.imul(ht,Vt)|0,_e=_e+Math.imul(ht,Gt)|0,_e=_e+Math.imul(gt,Vt)|0,Qe=Qe+Math.imul(gt,Gt)|0,Ue=Ue+Math.imul(xt,Yt)|0,_e=_e+Math.imul(xt,Kt)|0,_e=_e+Math.imul(yt,Yt)|0,Qe=Qe+Math.imul(yt,Kt)|0,Ue=Ue+Math.imul(pt,zt)|0,_e=_e+Math.imul(pt,Jt)|0,_e=_e+Math.imul(mt,zt)|0,Qe=Qe+Math.imul(mt,Jt)|0,Ue=Ue+Math.imul(ft,Xt)|0,_e=_e+Math.imul(ft,ir)|0,_e=_e+Math.imul(dt,Xt)|0,Qe=Qe+Math.imul(dt,ir)|0,Ue=Ue+Math.imul(lt,er)|0,_e=_e+Math.imul(lt,fr)|0,_e=_e+Math.imul(st,er)|0,Qe=Qe+Math.imul(st,fr)|0,Ue=Ue+Math.imul(it,sr)|0,_e=_e+Math.imul(it,Ar)|0,_e=_e+Math.imul(at,sr)|0,Qe=Qe+Math.imul(at,Ar)|0;var ln=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(ln>>>26)|0,ln&=67108863,Ue=Math.imul(Mt,$t),_e=Math.imul(Mt,jt),_e=_e+Math.imul(kt,$t)|0,Qe=Math.imul(kt,jt),Ue=Ue+Math.imul(Dt,Ot)|0,_e=_e+Math.imul(Dt,Lt)|0,_e=_e+Math.imul(Tt,Ot)|0,Qe=Qe+Math.imul(Tt,Lt)|0,Ue=Ue+Math.imul(Ct,Ht)|0,_e=_e+Math.imul(Ct,qt)|0,_e=_e+Math.imul(Rt,Ht)|0,Qe=Qe+Math.imul(Rt,qt)|0,Ue=Ue+Math.imul(wt,Vt)|0,_e=_e+Math.imul(wt,Gt)|0,_e=_e+Math.imul(St,Vt)|0,Qe=Qe+Math.imul(St,Gt)|0,Ue=Ue+Math.imul(ht,Yt)|0,_e=_e+Math.imul(ht,Kt)|0,_e=_e+Math.imul(gt,Yt)|0,Qe=Qe+Math.imul(gt,Kt)|0,Ue=Ue+Math.imul(xt,zt)|0,_e=_e+Math.imul(xt,Jt)|0,_e=_e+Math.imul(yt,zt)|0,Qe=Qe+Math.imul(yt,Jt)|0,Ue=Ue+Math.imul(pt,Xt)|0,_e=_e+Math.imul(pt,ir)|0,_e=_e+Math.imul(mt,Xt)|0,Qe=Qe+Math.imul(mt,ir)|0,Ue=Ue+Math.imul(ft,er)|0,_e=_e+Math.imul(ft,fr)|0,_e=_e+Math.imul(dt,er)|0,Qe=Qe+Math.imul(dt,fr)|0,Ue=Ue+Math.imul(lt,sr)|0,_e=_e+Math.imul(lt,Ar)|0,_e=_e+Math.imul(st,sr)|0,Qe=Qe+Math.imul(st,Ar)|0,Ue=Ue+Math.imul(it,ar)|0,_e=_e+Math.imul(it,hr)|0,_e=_e+Math.imul(at,ar)|0,Qe=Qe+Math.imul(at,hr)|0;var hn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(hn>>>26)|0,hn&=67108863,Ue=Math.imul(Mt,Ot),_e=Math.imul(Mt,Lt),_e=_e+Math.imul(kt,Ot)|0,Qe=Math.imul(kt,Lt),Ue=Ue+Math.imul(Dt,Ht)|0,_e=_e+Math.imul(Dt,qt)|0,_e=_e+Math.imul(Tt,Ht)|0,Qe=Qe+Math.imul(Tt,qt)|0,Ue=Ue+Math.imul(Ct,Vt)|0,_e=_e+Math.imul(Ct,Gt)|0,_e=_e+Math.imul(Rt,Vt)|0,Qe=Qe+Math.imul(Rt,Gt)|0,Ue=Ue+Math.imul(wt,Yt)|0,_e=_e+Math.imul(wt,Kt)|0,_e=_e+Math.imul(St,Yt)|0,Qe=Qe+Math.imul(St,Kt)|0,Ue=Ue+Math.imul(ht,zt)|0,_e=_e+Math.imul(ht,Jt)|0,_e=_e+Math.imul(gt,zt)|0,Qe=Qe+Math.imul(gt,Jt)|0,Ue=Ue+Math.imul(xt,Xt)|0,_e=_e+Math.imul(xt,ir)|0,_e=_e+Math.imul(yt,Xt)|0,Qe=Qe+Math.imul(yt,ir)|0,Ue=Ue+Math.imul(pt,er)|0,_e=_e+Math.imul(pt,fr)|0,_e=_e+Math.imul(mt,er)|0,Qe=Qe+Math.imul(mt,fr)|0,Ue=Ue+Math.imul(ft,sr)|0,_e=_e+Math.imul(ft,Ar)|0,_e=_e+Math.imul(dt,sr)|0,Qe=Qe+Math.imul(dt,Ar)|0,Ue=Ue+Math.imul(lt,ar)|0,_e=_e+Math.imul(lt,hr)|0,_e=_e+Math.imul(st,ar)|0,Qe=Qe+Math.imul(st,hr)|0;var pn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(pn>>>26)|0,pn&=67108863,Ue=Math.imul(Mt,Ht),_e=Math.imul(Mt,qt),_e=_e+Math.imul(kt,Ht)|0,Qe=Math.imul(kt,qt),Ue=Ue+Math.imul(Dt,Vt)|0,_e=_e+Math.imul(Dt,Gt)|0,_e=_e+Math.imul(Tt,Vt)|0,Qe=Qe+Math.imul(Tt,Gt)|0,Ue=Ue+Math.imul(Ct,Yt)|0,_e=_e+Math.imul(Ct,Kt)|0,_e=_e+Math.imul(Rt,Yt)|0,Qe=Qe+Math.imul(Rt,Kt)|0,Ue=Ue+Math.imul(wt,zt)|0,_e=_e+Math.imul(wt,Jt)|0,_e=_e+Math.imul(St,zt)|0,Qe=Qe+Math.imul(St,Jt)|0,Ue=Ue+Math.imul(ht,Xt)|0,_e=_e+Math.imul(ht,ir)|0,_e=_e+Math.imul(gt,Xt)|0,Qe=Qe+Math.imul(gt,ir)|0,Ue=Ue+Math.imul(xt,er)|0,_e=_e+Math.imul(xt,fr)|0,_e=_e+Math.imul(yt,er)|0,Qe=Qe+Math.imul(yt,fr)|0,Ue=Ue+Math.imul(pt,sr)|0,_e=_e+Math.imul(pt,Ar)|0,_e=_e+Math.imul(mt,sr)|0,Qe=Qe+Math.imul(mt,Ar)|0,Ue=Ue+Math.imul(ft,ar)|0,_e=_e+Math.imul(ft,hr)|0,_e=_e+Math.imul(dt,ar)|0,Qe=Qe+Math.imul(dt,hr)|0;var Xr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,Ue=Math.imul(Mt,Vt),_e=Math.imul(Mt,Gt),_e=_e+Math.imul(kt,Vt)|0,Qe=Math.imul(kt,Gt),Ue=Ue+Math.imul(Dt,Yt)|0,_e=_e+Math.imul(Dt,Kt)|0,_e=_e+Math.imul(Tt,Yt)|0,Qe=Qe+Math.imul(Tt,Kt)|0,Ue=Ue+Math.imul(Ct,zt)|0,_e=_e+Math.imul(Ct,Jt)|0,_e=_e+Math.imul(Rt,zt)|0,Qe=Qe+Math.imul(Rt,Jt)|0,Ue=Ue+Math.imul(wt,Xt)|0,_e=_e+Math.imul(wt,ir)|0,_e=_e+Math.imul(St,Xt)|0,Qe=Qe+Math.imul(St,ir)|0,Ue=Ue+Math.imul(ht,er)|0,_e=_e+Math.imul(ht,fr)|0,_e=_e+Math.imul(gt,er)|0,Qe=Qe+Math.imul(gt,fr)|0,Ue=Ue+Math.imul(xt,sr)|0,_e=_e+Math.imul(xt,Ar)|0,_e=_e+Math.imul(yt,sr)|0,Qe=Qe+Math.imul(yt,Ar)|0,Ue=Ue+Math.imul(pt,ar)|0,_e=_e+Math.imul(pt,hr)|0,_e=_e+Math.imul(mt,ar)|0,Qe=Qe+Math.imul(mt,hr)|0;var yn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(yn>>>26)|0,yn&=67108863,Ue=Math.imul(Mt,Yt),_e=Math.imul(Mt,Kt),_e=_e+Math.imul(kt,Yt)|0,Qe=Math.imul(kt,Kt),Ue=Ue+Math.imul(Dt,zt)|0,_e=_e+Math.imul(Dt,Jt)|0,_e=_e+Math.imul(Tt,zt)|0,Qe=Qe+Math.imul(Tt,Jt)|0,Ue=Ue+Math.imul(Ct,Xt)|0,_e=_e+Math.imul(Ct,ir)|0,_e=_e+Math.imul(Rt,Xt)|0,Qe=Qe+Math.imul(Rt,ir)|0,Ue=Ue+Math.imul(wt,er)|0,_e=_e+Math.imul(wt,fr)|0,_e=_e+Math.imul(St,er)|0,Qe=Qe+Math.imul(St,fr)|0,Ue=Ue+Math.imul(ht,sr)|0,_e=_e+Math.imul(ht,Ar)|0,_e=_e+Math.imul(gt,sr)|0,Qe=Qe+Math.imul(gt,Ar)|0,Ue=Ue+Math.imul(xt,ar)|0,_e=_e+Math.imul(xt,hr)|0,_e=_e+Math.imul(yt,ar)|0,Qe=Qe+Math.imul(yt,hr)|0;var xn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(xn>>>26)|0,xn&=67108863,Ue=Math.imul(Mt,zt),_e=Math.imul(Mt,Jt),_e=_e+Math.imul(kt,zt)|0,Qe=Math.imul(kt,Jt),Ue=Ue+Math.imul(Dt,Xt)|0,_e=_e+Math.imul(Dt,ir)|0,_e=_e+Math.imul(Tt,Xt)|0,Qe=Qe+Math.imul(Tt,ir)|0,Ue=Ue+Math.imul(Ct,er)|0,_e=_e+Math.imul(Ct,fr)|0,_e=_e+Math.imul(Rt,er)|0,Qe=Qe+Math.imul(Rt,fr)|0,Ue=Ue+Math.imul(wt,sr)|0,_e=_e+Math.imul(wt,Ar)|0,_e=_e+Math.imul(St,sr)|0,Qe=Qe+Math.imul(St,Ar)|0,Ue=Ue+Math.imul(ht,ar)|0,_e=_e+Math.imul(ht,hr)|0,_e=_e+Math.imul(gt,ar)|0,Qe=Qe+Math.imul(gt,hr)|0;var dn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(dn>>>26)|0,dn&=67108863,Ue=Math.imul(Mt,Xt),_e=Math.imul(Mt,ir),_e=_e+Math.imul(kt,Xt)|0,Qe=Math.imul(kt,ir),Ue=Ue+Math.imul(Dt,er)|0,_e=_e+Math.imul(Dt,fr)|0,_e=_e+Math.imul(Tt,er)|0,Qe=Qe+Math.imul(Tt,fr)|0,Ue=Ue+Math.imul(Ct,sr)|0,_e=_e+Math.imul(Ct,Ar)|0,_e=_e+Math.imul(Rt,sr)|0,Qe=Qe+Math.imul(Rt,Ar)|0,Ue=Ue+Math.imul(wt,ar)|0,_e=_e+Math.imul(wt,hr)|0,_e=_e+Math.imul(St,ar)|0,Qe=Qe+Math.imul(St,hr)|0;var cn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(cn>>>26)|0,cn&=67108863,Ue=Math.imul(Mt,er),_e=Math.imul(Mt,fr),_e=_e+Math.imul(kt,er)|0,Qe=Math.imul(kt,fr),Ue=Ue+Math.imul(Dt,sr)|0,_e=_e+Math.imul(Dt,Ar)|0,_e=_e+Math.imul(Tt,sr)|0,Qe=Qe+Math.imul(Tt,Ar)|0,Ue=Ue+Math.imul(Ct,ar)|0,_e=_e+Math.imul(Ct,hr)|0,_e=_e+Math.imul(Rt,ar)|0,Qe=Qe+Math.imul(Rt,hr)|0;var wn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(wn>>>26)|0,wn&=67108863,Ue=Math.imul(Mt,sr),_e=Math.imul(Mt,Ar),_e=_e+Math.imul(kt,sr)|0,Qe=Math.imul(kt,Ar),Ue=Ue+Math.imul(Dt,ar)|0,_e=_e+Math.imul(Dt,hr)|0,_e=_e+Math.imul(Tt,ar)|0,Qe=Qe+Math.imul(Tt,hr)|0;var Cn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Ue=Math.imul(Mt,ar),_e=Math.imul(Mt,hr),_e=_e+Math.imul(kt,ar)|0,Qe=Math.imul(kt,hr);var Rr=(We+Ue|0)+((_e&8191)<<13)|0;return We=(Qe+(_e>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,qe[0]=Lr,qe[1]=Pr,qe[2]=Yr,qe[3]=Wr,qe[4]=Zr,qe[5]=Jr,qe[6]=Gr,qe[7]=sn,qe[8]=ln,qe[9]=hn,qe[10]=pn,qe[11]=Xr,qe[12]=yn,qe[13]=xn,qe[14]=dn,qe[15]=cn,qe[16]=wn,qe[17]=Cn,qe[18]=Rr,We!==0&&(qe[19]=We,Re.length++),Re};Math.imul||($e=Ne);function ke(Ge,ve,Be){Be.negative=ve.negative^Ge.negative,Be.length=Ge.length+ve.length;for(var Re=0,Ie=0,Fe=0;Fe<Be.length-1;Fe++){var qe=Ie;Ie=0;for(var We=Re&67108863,Ue=Math.min(Fe,ve.length-1),_e=Math.max(0,Fe-Ge.length+1);_e<=Ue;_e++){var Qe=Fe-_e,tt=Ge.words[Qe]|0,it=ve.words[_e]|0,at=tt*it,ot=at&67108863;qe=qe+(at/67108864|0)|0,ot=ot+We|0,We=ot&67108863,qe=qe+(ot>>>26)|0,Ie+=qe>>>26,qe&=67108863}Be.words[Fe]=We,Re=qe,qe=Ie}return Re!==0?Be.words[Fe]=Re:Be.length--,Be.strip()}function je(Ge,ve,Be){var Re=new Ke;return Re.mulp(Ge,ve,Be)}ue.prototype.mulTo=function(ve,Be){var Re,Ie=this.length+ve.length;return this.length===10&&ve.length===10?Re=$e(this,ve,Be):Ie<63?Re=Ne(this,ve,Be):Ie<1024?Re=ke(this,ve,Be):Re=je(this,ve,Be),Re};function Ke(Ge,ve){this.x=Ge,this.y=ve}Ke.prototype.makeRBT=function(ve){for(var Be=new Array(ve),Re=ue.prototype._countBits(ve)-1,Ie=0;Ie<ve;Ie++)Be[Ie]=this.revBin(Ie,Re,ve);return Be},Ke.prototype.revBin=function(ve,Be,Re){if(ve===0||ve===Re-1)return ve;for(var Ie=0,Fe=0;Fe<Be;Fe++)Ie|=(ve&1)<<Be-Fe-1,ve>>=1;return Ie},Ke.prototype.permute=function(ve,Be,Re,Ie,Fe,qe){for(var We=0;We<qe;We++)Ie[We]=Be[ve[We]],Fe[We]=Re[ve[We]]},Ke.prototype.transform=function(ve,Be,Re,Ie,Fe,qe){this.permute(qe,ve,Be,Re,Ie,Fe);for(var We=1;We<Fe;We<<=1)for(var Ue=We<<1,_e=Math.cos(2*Math.PI/Ue),Qe=Math.sin(2*Math.PI/Ue),tt=0;tt<Fe;tt+=Ue)for(var it=_e,at=Qe,ot=0;ot<We;ot++){var lt=Re[tt+ot],st=Ie[tt+ot],ut=Re[tt+ot+We],ft=Ie[tt+ot+We],dt=it*ut-at*ft;ft=it*ft+at*ut,ut=dt,Re[tt+ot]=lt+ut,Ie[tt+ot]=st+ft,Re[tt+ot+We]=lt-ut,Ie[tt+ot+We]=st-ft,ot!==Ue&&(dt=_e*it-Qe*at,at=_e*at+Qe*it,it=dt)}},Ke.prototype.guessLen13b=function(ve,Be){var Re=Math.max(Be,ve)|1,Ie=Re&1,Fe=0;for(Re=Re/2|0;Re;Re=Re>>>1)Fe++;return 1<<Fe+1+Ie},Ke.prototype.conjugate=function(ve,Be,Re){if(!(Re<=1))for(var Ie=0;Ie<Re/2;Ie++){var Fe=ve[Ie];ve[Ie]=ve[Re-Ie-1],ve[Re-Ie-1]=Fe,Fe=Be[Ie],Be[Ie]=-Be[Re-Ie-1],Be[Re-Ie-1]=-Fe}},Ke.prototype.normalize13b=function(ve,Be){for(var Re=0,Ie=0;Ie<Be/2;Ie++){var Fe=Math.round(ve[2*Ie+1]/Be)*8192+Math.round(ve[2*Ie]/Be)+Re;ve[Ie]=Fe&67108863,Fe<67108864?Re=0:Re=Fe/67108864|0}return ve},Ke.prototype.convert13b=function(ve,Be,Re,Ie){for(var Fe=0,qe=0;qe<Be;qe++)Fe=Fe+(ve[qe]|0),Re[2*qe]=Fe&8191,Fe=Fe>>>13,Re[2*qe+1]=Fe&8191,Fe=Fe>>>13;for(qe=2*Be;qe<Ie;++qe)Re[qe]=0;oe(Fe===0),oe((Fe&-8192)===0)},Ke.prototype.stub=function(ve){for(var Be=new Array(ve),Re=0;Re<ve;Re++)Be[Re]=0;return Be},Ke.prototype.mulp=function(ve,Be,Re){var Ie=2*this.guessLen13b(ve.length,Be.length),Fe=this.makeRBT(Ie),qe=this.stub(Ie),We=new Array(Ie),Ue=new Array(Ie),_e=new Array(Ie),Qe=new Array(Ie),tt=new Array(Ie),it=new Array(Ie),at=Re.words;at.length=Ie,this.convert13b(ve.words,ve.length,We,Ie),this.convert13b(Be.words,Be.length,Qe,Ie),this.transform(We,qe,Ue,_e,Ie,Fe),this.transform(Qe,qe,tt,it,Ie,Fe);for(var ot=0;ot<Ie;ot++){var lt=Ue[ot]*tt[ot]-_e[ot]*it[ot];_e[ot]=Ue[ot]*it[ot]+_e[ot]*tt[ot],Ue[ot]=lt}return this.conjugate(Ue,_e,Ie),this.transform(Ue,_e,at,qe,Ie,Fe),this.conjugate(at,qe,Ie),this.normalize13b(at,Ie),Re.negative=ve.negative^Be.negative,Re.length=ve.length+Be.length,Re.strip()},ue.prototype.mul=function(ve){var Be=new ue(null);return Be.words=new Array(this.length+ve.length),this.mulTo(ve,Be)},ue.prototype.mulf=function(ve){var Be=new ue(null);return Be.words=new Array(this.length+ve.length),je(this,ve,Be)},ue.prototype.imul=function(ve){return this.clone().mulTo(ve,this)},ue.prototype.imuln=function(ve){oe(typeof ve=="number"),oe(ve<67108864);for(var Be=0,Re=0;Re<this.length;Re++){var Ie=(this.words[Re]|0)*ve,Fe=(Ie&67108863)+(Be&67108863);Be>>=26,Be+=Ie/67108864|0,Be+=Fe>>>26,this.words[Re]=Fe&67108863}return Be!==0&&(this.words[Re]=Be,this.length++),this},ue.prototype.muln=function(ve){return this.clone().imuln(ve)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(ve){var Be=Te(ve);if(Be.length===0)return new ue(1);for(var Re=this,Ie=0;Ie<Be.length&&Be[Ie]===0;Ie++,Re=Re.sqr());if(++Ie<Be.length)for(var Fe=Re.sqr();Ie<Be.length;Ie++,Fe=Fe.sqr())Be[Ie]!==0&&(Re=Re.mul(Fe));return Re},ue.prototype.iushln=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26,Ie=67108863>>>26-Be<<26-Be,Fe;if(Be!==0){var qe=0;for(Fe=0;Fe<this.length;Fe++){var We=this.words[Fe]&Ie,Ue=(this.words[Fe]|0)-We<<Be;this.words[Fe]=Ue|qe,qe=We>>>26-Be}qe&&(this.words[Fe]=qe,this.length++)}if(Re!==0){for(Fe=this.length-1;Fe>=0;Fe--)this.words[Fe+Re]=this.words[Fe];for(Fe=0;Fe<Re;Fe++)this.words[Fe]=0;this.length+=Re}return this.strip()},ue.prototype.ishln=function(ve){return oe(this.negative===0),this.iushln(ve)},ue.prototype.iushrn=function(ve,Be,Re){oe(typeof ve=="number"&&ve>=0);var Ie;Be?Ie=(Be-Be%26)/26:Ie=0;var Fe=ve%26,qe=Math.min((ve-Fe)/26,this.length),We=67108863^67108863>>>Fe<<Fe,Ue=Re;if(Ie-=qe,Ie=Math.max(0,Ie),Ue){for(var _e=0;_e<qe;_e++)Ue.words[_e]=this.words[_e];Ue.length=qe}if(qe!==0)if(this.length>qe)for(this.length-=qe,_e=0;_e<this.length;_e++)this.words[_e]=this.words[_e+qe];else this.words[0]=0,this.length=1;var Qe=0;for(_e=this.length-1;_e>=0&&(Qe!==0||_e>=Ie);_e--){var tt=this.words[_e]|0;this.words[_e]=Qe<<26-Fe|tt>>>Fe,Qe=tt&We}return Ue&&Qe!==0&&(Ue.words[Ue.length++]=Qe),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},ue.prototype.ishrn=function(ve,Be,Re){return oe(this.negative===0),this.iushrn(ve,Be,Re)},ue.prototype.shln=function(ve){return this.clone().ishln(ve)},ue.prototype.ushln=function(ve){return this.clone().iushln(ve)},ue.prototype.shrn=function(ve){return this.clone().ishrn(ve)},ue.prototype.ushrn=function(ve){return this.clone().iushrn(ve)},ue.prototype.testn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26,Ie=1<<Be;if(this.length<=Re)return!1;var Fe=this.words[Re];return!!(Fe&Ie)},ue.prototype.imaskn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Re)return this;if(Be!==0&&Re++,this.length=Math.min(Re,this.length),Be!==0){var Ie=67108863^67108863>>>Be<<Be;this.words[this.length-1]&=Ie}return this.strip()},ue.prototype.maskn=function(ve){return this.clone().imaskn(ve)},ue.prototype.iaddn=function(ve){return oe(typeof ve=="number"),oe(ve<67108864),ve<0?this.isubn(-ve):this.negative!==0?this.length===1&&(this.words[0]|0)<ve?(this.words[0]=ve-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ve),this.negative=1,this):this._iaddn(ve)},ue.prototype._iaddn=function(ve){this.words[0]+=ve;for(var Be=0;Be<this.length&&this.words[Be]>=67108864;Be++)this.words[Be]-=67108864,Be===this.length-1?this.words[Be+1]=1:this.words[Be+1]++;return this.length=Math.max(this.length,Be+1),this},ue.prototype.isubn=function(ve){if(oe(typeof ve=="number"),oe(ve<67108864),ve<0)return this.iaddn(-ve);if(this.negative!==0)return this.negative=0,this.iaddn(ve),this.negative=1,this;if(this.words[0]-=ve,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Be=0;Be<this.length&&this.words[Be]<0;Be++)this.words[Be]+=67108864,this.words[Be+1]-=1;return this.strip()},ue.prototype.addn=function(ve){return this.clone().iaddn(ve)},ue.prototype.subn=function(ve){return this.clone().isubn(ve)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(ve,Be,Re){var Ie=ve.length+Re,Fe;this._expand(Ie);var qe,We=0;for(Fe=0;Fe<ve.length;Fe++){qe=(this.words[Fe+Re]|0)+We;var Ue=(ve.words[Fe]|0)*Be;qe-=Ue&67108863,We=(qe>>26)-(Ue/67108864|0),this.words[Fe+Re]=qe&67108863}for(;Fe<this.length-Re;Fe++)qe=(this.words[Fe+Re]|0)+We,We=qe>>26,this.words[Fe+Re]=qe&67108863;if(We===0)return this.strip();for(oe(We===-1),We=0,Fe=0;Fe<this.length;Fe++)qe=-(this.words[Fe]|0)+We,We=qe>>26,this.words[Fe]=qe&67108863;return this.negative=1,this.strip()},ue.prototype._wordDiv=function(ve,Be){var Re=this.length-ve.length,Ie=this.clone(),Fe=ve,qe=Fe.words[Fe.length-1]|0,We=this._countBits(qe);Re=26-We,Re!==0&&(Fe=Fe.ushln(Re),Ie.iushln(Re),qe=Fe.words[Fe.length-1]|0);var Ue=Ie.length-Fe.length,_e;if(Be!=="mod"){_e=new ue(null),_e.length=Ue+1,_e.words=new Array(_e.length);for(var Qe=0;Qe<_e.length;Qe++)_e.words[Qe]=0}var tt=Ie.clone()._ishlnsubmul(Fe,1,Ue);tt.negative===0&&(Ie=tt,_e&&(_e.words[Ue]=1));for(var it=Ue-1;it>=0;it--){var at=(Ie.words[Fe.length+it]|0)*67108864+(Ie.words[Fe.length+it-1]|0);for(at=Math.min(at/qe|0,67108863),Ie._ishlnsubmul(Fe,at,it);Ie.negative!==0;)at--,Ie.negative=0,Ie._ishlnsubmul(Fe,1,it),Ie.isZero()||(Ie.negative^=1);_e&&(_e.words[it]=at)}return _e&&_e.strip(),Ie.strip(),Be!=="div"&&Re!==0&&Ie.iushrn(Re),{div:_e||null,mod:Ie}},ue.prototype.divmod=function(ve,Be,Re){if(oe(!ve.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var Ie,Fe,qe;return this.negative!==0&&ve.negative===0?(qe=this.neg().divmod(ve,Be),Be!=="mod"&&(Ie=qe.div.neg()),Be!=="div"&&(Fe=qe.mod.neg(),Re&&Fe.negative!==0&&Fe.iadd(ve)),{div:Ie,mod:Fe}):this.negative===0&&ve.negative!==0?(qe=this.divmod(ve.neg(),Be),Be!=="mod"&&(Ie=qe.div.neg()),{div:Ie,mod:qe.mod}):this.negative&ve.negative?(qe=this.neg().divmod(ve.neg(),Be),Be!=="div"&&(Fe=qe.mod.neg(),Re&&Fe.negative!==0&&Fe.isub(ve)),{div:qe.div,mod:Fe}):ve.length>this.length||this.cmp(ve)<0?{div:new ue(0),mod:this}:ve.length===1?Be==="div"?{div:this.divn(ve.words[0]),mod:null}:Be==="mod"?{div:null,mod:new ue(this.modn(ve.words[0]))}:{div:this.divn(ve.words[0]),mod:new ue(this.modn(ve.words[0]))}:this._wordDiv(ve,Be)},ue.prototype.div=function(ve){return this.divmod(ve,"div",!1).div},ue.prototype.mod=function(ve){return this.divmod(ve,"mod",!1).mod},ue.prototype.umod=function(ve){return this.divmod(ve,"mod",!0).mod},ue.prototype.divRound=function(ve){var Be=this.divmod(ve);if(Be.mod.isZero())return Be.div;var Re=Be.div.negative!==0?Be.mod.isub(ve):Be.mod,Ie=ve.ushrn(1),Fe=ve.andln(1),qe=Re.cmp(Ie);return qe<0||Fe===1&&qe===0?Be.div:Be.div.negative!==0?Be.div.isubn(1):Be.div.iaddn(1)},ue.prototype.modn=function(ve){oe(ve<=67108863);for(var Be=(1<<26)%ve,Re=0,Ie=this.length-1;Ie>=0;Ie--)Re=(Be*Re+(this.words[Ie]|0))%ve;return Re},ue.prototype.idivn=function(ve){oe(ve<=67108863);for(var Be=0,Re=this.length-1;Re>=0;Re--){var Ie=(this.words[Re]|0)+Be*67108864;this.words[Re]=Ie/ve|0,Be=Ie%ve}return this.strip()},ue.prototype.divn=function(ve){return this.clone().idivn(ve)},ue.prototype.egcd=function(ve){oe(ve.negative===0),oe(!ve.isZero());var Be=this,Re=ve.clone();Be.negative!==0?Be=Be.umod(ve):Be=Be.clone();for(var Ie=new ue(1),Fe=new ue(0),qe=new ue(0),We=new ue(1),Ue=0;Be.isEven()&&Re.isEven();)Be.iushrn(1),Re.iushrn(1),++Ue;for(var _e=Re.clone(),Qe=Be.clone();!Be.isZero();){for(var tt=0,it=1;!(Be.words[0]&it)&&tt<26;++tt,it<<=1);if(tt>0)for(Be.iushrn(tt);tt-- >0;)(Ie.isOdd()||Fe.isOdd())&&(Ie.iadd(_e),Fe.isub(Qe)),Ie.iushrn(1),Fe.iushrn(1);for(var at=0,ot=1;!(Re.words[0]&ot)&&at<26;++at,ot<<=1);if(at>0)for(Re.iushrn(at);at-- >0;)(qe.isOdd()||We.isOdd())&&(qe.iadd(_e),We.isub(Qe)),qe.iushrn(1),We.iushrn(1);Be.cmp(Re)>=0?(Be.isub(Re),Ie.isub(qe),Fe.isub(We)):(Re.isub(Be),qe.isub(Ie),We.isub(Fe))}return{a:qe,b:We,gcd:Re.iushln(Ue)}},ue.prototype._invmp=function(ve){oe(ve.negative===0),oe(!ve.isZero());var Be=this,Re=ve.clone();Be.negative!==0?Be=Be.umod(ve):Be=Be.clone();for(var Ie=new ue(1),Fe=new ue(0),qe=Re.clone();Be.cmpn(1)>0&&Re.cmpn(1)>0;){for(var We=0,Ue=1;!(Be.words[0]&Ue)&&We<26;++We,Ue<<=1);if(We>0)for(Be.iushrn(We);We-- >0;)Ie.isOdd()&&Ie.iadd(qe),Ie.iushrn(1);for(var _e=0,Qe=1;!(Re.words[0]&Qe)&&_e<26;++_e,Qe<<=1);if(_e>0)for(Re.iushrn(_e);_e-- >0;)Fe.isOdd()&&Fe.iadd(qe),Fe.iushrn(1);Be.cmp(Re)>=0?(Be.isub(Re),Ie.isub(Fe)):(Re.isub(Be),Fe.isub(Ie))}var tt;return Be.cmpn(1)===0?tt=Ie:tt=Fe,tt.cmpn(0)<0&&tt.iadd(ve),tt},ue.prototype.gcd=function(ve){if(this.isZero())return ve.abs();if(ve.isZero())return this.abs();var Be=this.clone(),Re=ve.clone();Be.negative=0,Re.negative=0;for(var Ie=0;Be.isEven()&&Re.isEven();Ie++)Be.iushrn(1),Re.iushrn(1);do{for(;Be.isEven();)Be.iushrn(1);for(;Re.isEven();)Re.iushrn(1);var Fe=Be.cmp(Re);if(Fe<0){var qe=Be;Be=Re,Re=qe}else if(Fe===0||Re.cmpn(1)===0)break;Be.isub(Re)}while(!0);return Re.iushln(Ie)},ue.prototype.invm=function(ve){return this.egcd(ve).a.umod(ve)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(ve){return this.words[0]&ve},ue.prototype.bincn=function(ve){oe(typeof ve=="number");var Be=ve%26,Re=(ve-Be)/26,Ie=1<<Be;if(this.length<=Re)return this._expand(Re+1),this.words[Re]|=Ie,this;for(var Fe=Ie,qe=Re;Fe!==0&&qe<this.length;qe++){var We=this.words[qe]|0;We+=Fe,Fe=We>>>26,We&=67108863,this.words[qe]=We}return Fe!==0&&(this.words[qe]=Fe,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(ve){var Be=ve<0;if(this.negative!==0&&!Be)return-1;if(this.negative===0&&Be)return 1;this.strip();var Re;if(this.length>1)Re=1;else{Be&&(ve=-ve),oe(ve<=67108863,"Number is too big");var Ie=this.words[0]|0;Re=Ie===ve?0:Ie<ve?-1:1}return this.negative!==0?-Re|0:Re},ue.prototype.cmp=function(ve){if(this.negative!==0&&ve.negative===0)return-1;if(this.negative===0&&ve.negative!==0)return 1;var Be=this.ucmp(ve);return this.negative!==0?-Be|0:Be},ue.prototype.ucmp=function(ve){if(this.length>ve.length)return 1;if(this.length<ve.length)return-1;for(var Be=0,Re=this.length-1;Re>=0;Re--){var Ie=this.words[Re]|0,Fe=ve.words[Re]|0;if(Ie!==Fe){Ie<Fe?Be=-1:Ie>Fe&&(Be=1);break}}return Be},ue.prototype.gtn=function(ve){return this.cmpn(ve)===1},ue.prototype.gt=function(ve){return this.cmp(ve)===1},ue.prototype.gten=function(ve){return this.cmpn(ve)>=0},ue.prototype.gte=function(ve){return this.cmp(ve)>=0},ue.prototype.ltn=function(ve){return this.cmpn(ve)===-1},ue.prototype.lt=function(ve){return this.cmp(ve)===-1},ue.prototype.lten=function(ve){return this.cmpn(ve)<=0},ue.prototype.lte=function(ve){return this.cmp(ve)<=0},ue.prototype.eqn=function(ve){return this.cmpn(ve)===0},ue.prototype.eq=function(ve){return this.cmp(ve)===0},ue.red=function(ve){return new et(ve)},ue.prototype.toRed=function(ve){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),ve.convertTo(this)._forceRed(ve)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(ve){return this.red=ve,this},ue.prototype.forceRed=function(ve){return oe(!this.red,"Already a number in reduction context"),this._forceRed(ve)},ue.prototype.redAdd=function(ve){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,ve)},ue.prototype.redIAdd=function(ve){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ve)},ue.prototype.redSub=function(ve){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,ve)},ue.prototype.redISub=function(ve){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,ve)},ue.prototype.redShl=function(ve){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,ve)},ue.prototype.redMul=function(ve){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,ve),this.red.mul(this,ve)},ue.prototype.redIMul=function(ve){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,ve),this.red.imul(this,ve)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(ve){return oe(this.red&&!ve.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ve)};var Ye={k256:null,p224:null,p192:null,p25519:null};function ze(Ge,ve){this.name=Ge,this.p=new ue(ve,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ze.prototype._tmp=function(){var ve=new ue(null);return ve.words=new Array(Math.ceil(this.n/13)),ve},ze.prototype.ireduce=function(ve){var Be=ve,Re;do this.split(Be,this.tmp),Be=this.imulK(Be),Be=Be.iadd(this.tmp),Re=Be.bitLength();while(Re>this.n);var Ie=Re<this.n?-1:Be.ucmp(this.p);return Ie===0?(Be.words[0]=0,Be.length=1):Ie>0?Be.isub(this.p):Be.strip!==void 0?Be.strip():Be._strip(),Be},ze.prototype.split=function(ve,Be){ve.iushrn(this.n,0,Be)},ze.prototype.imulK=function(ve){return ve.imul(this.k)};function Xe(){ze.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(Xe,ze),Xe.prototype.split=function(ve,Be){for(var Re=4194303,Ie=Math.min(ve.length,9),Fe=0;Fe<Ie;Fe++)Be.words[Fe]=ve.words[Fe];if(Be.length=Ie,ve.length<=9){ve.words[0]=0,ve.length=1;return}var qe=ve.words[9];for(Be.words[Be.length++]=qe&Re,Fe=10;Fe<ve.length;Fe++){var We=ve.words[Fe]|0;ve.words[Fe-10]=(We&Re)<<4|qe>>>22,qe=We}qe>>>=22,ve.words[Fe-10]=qe,qe===0&&ve.length>10?ve.length-=10:ve.length-=9},Xe.prototype.imulK=function(ve){ve.words[ve.length]=0,ve.words[ve.length+1]=0,ve.length+=2;for(var Be=0,Re=0;Re<ve.length;Re++){var Ie=ve.words[Re]|0;Be+=Ie*977,ve.words[Re]=Be&67108863,Be=Ie*64+(Be/67108864|0)}return ve.words[ve.length-1]===0&&(ve.length--,ve.words[ve.length-1]===0&&ve.length--),ve};function Je(){ze.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(Je,ze);function rt(){ze.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(rt,ze);function Ze(){ze.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(Ze,ze),Ze.prototype.imulK=function(ve){for(var Be=0,Re=0;Re<ve.length;Re++){var Ie=(ve.words[Re]|0)*19+Be,Fe=Ie&67108863;Ie>>>=26,ve.words[Re]=Fe,Be=Ie}return Be!==0&&(ve.words[ve.length++]=Be),ve},ue._prime=function(ve){if(Ye[ve])return Ye[ve];var Be;if(ve==="k256")Be=new Xe;else if(ve==="p224")Be=new Je;else if(ve==="p192")Be=new rt;else if(ve==="p25519")Be=new Ze;else throw new Error("Unknown prime "+ve);return Ye[ve]=Be,Be};function et(Ge){if(typeof Ge=="string"){var ve=ue._prime(Ge);this.m=ve.p,this.prime=ve}else oe(Ge.gtn(1),"modulus must be greater than 1"),this.m=Ge,this.prime=null}et.prototype._verify1=function(ve){oe(ve.negative===0,"red works only with positives"),oe(ve.red,"red works only with red numbers")},et.prototype._verify2=function(ve,Be){oe((ve.negative|Be.negative)===0,"red works only with positives"),oe(ve.red&&ve.red===Be.red,"red works only with red numbers")},et.prototype.imod=function(ve){return this.prime?this.prime.ireduce(ve)._forceRed(this):ve.umod(this.m)._forceRed(this)},et.prototype.neg=function(ve){return ve.isZero()?ve.clone():this.m.sub(ve)._forceRed(this)},et.prototype.add=function(ve,Be){this._verify2(ve,Be);var Re=ve.add(Be);return Re.cmp(this.m)>=0&&Re.isub(this.m),Re._forceRed(this)},et.prototype.iadd=function(ve,Be){this._verify2(ve,Be);var Re=ve.iadd(Be);return Re.cmp(this.m)>=0&&Re.isub(this.m),Re},et.prototype.sub=function(ve,Be){this._verify2(ve,Be);var Re=ve.sub(Be);return Re.cmpn(0)<0&&Re.iadd(this.m),Re._forceRed(this)},et.prototype.isub=function(ve,Be){this._verify2(ve,Be);var Re=ve.isub(Be);return Re.cmpn(0)<0&&Re.iadd(this.m),Re},et.prototype.shl=function(ve,Be){return this._verify1(ve),this.imod(ve.ushln(Be))},et.prototype.imul=function(ve,Be){return this._verify2(ve,Be),this.imod(ve.imul(Be))},et.prototype.mul=function(ve,Be){return this._verify2(ve,Be),this.imod(ve.mul(Be))},et.prototype.isqr=function(ve){return this.imul(ve,ve.clone())},et.prototype.sqr=function(ve){return this.mul(ve,ve)},et.prototype.sqrt=function(ve){if(ve.isZero())return ve.clone();var Be=this.m.andln(3);if(oe(Be%2===1),Be===3){var Re=this.m.add(new ue(1)).iushrn(2);return this.pow(ve,Re)}for(var Ie=this.m.subn(1),Fe=0;!Ie.isZero()&&Ie.andln(1)===0;)Fe++,Ie.iushrn(1);oe(!Ie.isZero());var qe=new ue(1).toRed(this),We=qe.redNeg(),Ue=this.m.subn(1).iushrn(1),_e=this.m.bitLength();for(_e=new ue(2*_e*_e).toRed(this);this.pow(_e,Ue).cmp(We)!==0;)_e.redIAdd(We);for(var Qe=this.pow(_e,Ie),tt=this.pow(ve,Ie.addn(1).iushrn(1)),it=this.pow(ve,Ie),at=Fe;it.cmp(qe)!==0;){for(var ot=it,lt=0;ot.cmp(qe)!==0;lt++)ot=ot.redSqr();oe(lt<at);var st=this.pow(Qe,new ue(1).iushln(at-lt-1));tt=tt.redMul(st),Qe=st.redSqr(),it=it.redMul(Qe),at=lt}return tt},et.prototype.invm=function(ve){var Be=ve._invmp(this.m);return Be.negative!==0?(Be.negative=0,this.imod(Be).redNeg()):this.imod(Be)},et.prototype.pow=function(ve,Be){if(Be.isZero())return new ue(1).toRed(this);if(Be.cmpn(1)===0)return ve.clone();var Re=4,Ie=new Array(1<<Re);Ie[0]=new ue(1).toRed(this),Ie[1]=ve;for(var Fe=2;Fe<Ie.length;Fe++)Ie[Fe]=this.mul(Ie[Fe-1],ve);var qe=Ie[0],We=0,Ue=0,_e=Be.bitLength()%26;for(_e===0&&(_e=26),Fe=Be.length-1;Fe>=0;Fe--){for(var Qe=Be.words[Fe],tt=_e-1;tt>=0;tt--){var it=Qe>>tt&1;if(qe!==Ie[0]&&(qe=this.sqr(qe)),it===0&&We===0){Ue=0;continue}We<<=1,We|=it,Ue++,!(Ue!==Re&&(Fe!==0||tt!==0))&&(qe=this.mul(qe,Ie[We]),Ue=0,We=0)}_e=26}return qe},et.prototype.convertTo=function(ve){var Be=ve.umod(this.m);return Be===ve?Be.clone():Be},et.prototype.convertFrom=function(ve){var Be=ve.clone();return Be.red=null,Be},ue.mont=function(ve){return new nt(ve)};function nt(Ge){et.call(this,Ge),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(nt,et),nt.prototype.convertTo=function(ve){return this.imod(ve.ushln(this.shift))},nt.prototype.convertFrom=function(ve){var Be=this.imod(ve.mul(this.rinv));return Be.red=null,Be},nt.prototype.imul=function(ve,Be){if(ve.isZero()||Be.isZero())return ve.words[0]=0,ve.length=1,ve;var Re=ve.imul(Be),Ie=Re.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Fe=Re.isub(Ie).iushrn(this.shift),qe=Fe;return Fe.cmp(this.m)>=0?qe=Fe.isub(this.m):Fe.cmpn(0)<0&&(qe=Fe.iadd(this.m)),qe._forceRed(this)},nt.prototype.mul=function(ve,Be){if(ve.isZero()||Be.isZero())return new ue(0)._forceRed(this);var Re=ve.mul(Be),Ie=Re.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Fe=Re.isub(Ie).iushrn(this.shift),qe=Fe;return Fe.cmp(this.m)>=0?qe=Fe.isub(this.m):Fe.cmpn(0)<0&&(qe=Fe.iadd(this.m)),qe._forceRed(this)},nt.prototype.invm=function(ve){var Be=this.imod(ve._invmp(this.m).mul(this.r2));return Be._forceRed(this)}})(K,commonjsGlobal)}(bn$5)),bn$5.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var K;brorand.exports=function(ce){return K||(K=new J(null)),K.generate(ce)};function J(oe){this.rand=oe}if(brorand.exports.Rand=J,J.prototype.generate=function(ce){return this._rand(ce)},J.prototype._rand=function(ce){if(this.rand.getBytes)return this.rand.getBytes(ce);for(var ue=new Uint8Array(ce),Ae=0;Ae<ue.length;Ae++)ue[Ae]=this.rand.getByte();return ue},typeof self=="object")self.crypto&&self.crypto.getRandomValues?J.prototype._rand=function(ce){var ue=new Uint8Array(ce);return self.crypto.getRandomValues(ue),ue}:self.msCrypto&&self.msCrypto.getRandomValues?J.prototype._rand=function(ce){var ue=new Uint8Array(ce);return self.msCrypto.getRandomValues(ue),ue}:typeof window=="object"&&(J.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var ne=requireCryptoBrowserify();if(typeof ne.randomBytes!="function")throw new Error("Not supported");J.prototype._rand=function(ce){return ne.randomBytes(ce)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var K=requireBn$5(),J=requireBrorand();function ne(oe){this.rand=oe||new J.Rand}return mr=ne,ne.create=function(ce){return new ne(ce)},ne.prototype._randbelow=function(ce){var ue=ce.bitLength(),Ae=Math.ceil(ue/8);do var pe=new K(this.rand.generate(Ae));while(pe.cmp(ce)>=0);return pe},ne.prototype._randrange=function(ce,ue){var Ae=ue.sub(ce);return ce.add(this._randbelow(Ae))},ne.prototype.test=function(ce,ue,Ae){var pe=ce.bitLength(),xe=K.mont(ce),me=new K(1).toRed(xe);ue||(ue=Math.max(1,pe/48|0));for(var ge=ce.subn(1),ye=0;!ge.testn(ye);ye++);for(var Se=ce.shrn(ye),Te=ge.toRed(xe),Ne=!0;ue>0;ue--){var $e=this._randrange(new K(2),ge);Ae&&Ae($e);var ke=$e.toRed(xe).redPow(Se);if(!(ke.cmp(me)===0||ke.cmp(Te)===0)){for(var je=1;je<ye;je++){if(ke=ke.redSqr(),ke.cmp(me)===0)return!1;if(ke.cmp(Te)===0)break}if(je===ye)return!1}}return Ne},ne.prototype.getDivisor=function(ce,ue){var Ae=ce.bitLength(),pe=K.mont(ce),xe=new K(1).toRed(pe);ue||(ue=Math.max(1,Ae/48|0));for(var me=ce.subn(1),ge=0;!me.testn(ge);ge++);for(var ye=ce.shrn(ge),Se=me.toRed(pe);ue>0;ue--){var Te=this._randrange(new K(2),me),Ne=ce.gcd(Te);if(Ne.cmpn(1)!==0)return Ne;var $e=Te.toRed(pe).redPow(ye);if(!($e.cmp(xe)===0||$e.cmp(Se)===0)){for(var ke=1;ke<ge;ke++){if($e=$e.redSqr(),$e.cmp(xe)===0)return $e.fromRed().subn(1).gcd(ce);if($e.cmp(Se)===0)break}if(ke===ge)return $e=$e.redSqr(),$e.fromRed().subn(1).gcd(ce)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var K=requireBrowser$a();generatePrime=ke,ke.simpleSieve=Ne,ke.fermatTest=$e;var J=requireBn$6(),ne=new J(24),oe=requireMr(),ce=new oe,ue=new J(1),Ae=new J(2),pe=new J(5);new J(16),new J(8);var xe=new J(10),me=new J(3);new J(7);var ge=new J(11),ye=new J(4);new J(12);var Se=null;function Te(){if(Se!==null)return Se;var je=1048576,Ke=[];Ke[0]=2;for(var Ye=1,ze=3;ze<je;ze+=2){for(var Xe=Math.ceil(Math.sqrt(ze)),Je=0;Je<Ye&&Ke[Je]<=Xe&&ze%Ke[Je]!==0;Je++);Ye!==Je&&Ke[Je]<=Xe||(Ke[Ye++]=ze)}return Se=Ke,Ke}function Ne(je){for(var Ke=Te(),Ye=0;Ye<Ke.length;Ye++)if(je.modn(Ke[Ye])===0)return je.cmpn(Ke[Ye])===0;return!0}function $e(je){var Ke=J.mont(je);return Ae.toRed(Ke).redPow(je.subn(1)).fromRed().cmpn(1)===0}function ke(je,Ke){if(je<16)return Ke===2||Ke===5?new J([140,123]):new J([140,39]);Ke=new J(Ke);for(var Ye,ze;;){for(Ye=new J(K(Math.ceil(je/8)));Ye.bitLength()>je;)Ye.ishrn(1);if(Ye.isEven()&&Ye.iadd(ue),Ye.testn(1)||Ye.iadd(Ae),Ke.cmp(Ae)){if(!Ke.cmp(pe))for(;Ye.mod(xe).cmp(me);)Ye.iadd(ye)}else for(;Ye.mod(ne).cmp(ge);)Ye.iadd(ye);if(ze=Ye.shrn(1),Ne(ze)&&Ne(Ye)&&$e(ze)&&$e(Ye)&&ce.test(ze)&&ce.test(Ye))return Ye}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var K=requireBn$6(),J=requireMr(),ne=new J,oe=new K(24),ce=new K(11),ue=new K(10),Ae=new K(3),pe=new K(7),xe=requireGeneratePrime(),me=requireBrowser$a();dh=Ne;function ge(ke,je){return je=je||"utf8",Buffer.isBuffer(ke)||(ke=new Buffer(ke,je)),this._pub=new K(ke),this}function ye(ke,je){return je=je||"utf8",Buffer.isBuffer(ke)||(ke=new Buffer(ke,je)),this._priv=new K(ke),this}var Se={};function Te(ke,je){var Ke=je.toString("hex"),Ye=[Ke,ke.toString(16)].join("_");if(Ye in Se)return Se[Ye];var ze=0;if(ke.isEven()||!xe.simpleSieve||!xe.fermatTest(ke)||!ne.test(ke))return ze+=1,Ke==="02"||Ke==="05"?ze+=8:ze+=4,Se[Ye]=ze,ze;ne.test(ke.shrn(1))||(ze+=2);var Xe;switch(Ke){case"02":ke.mod(oe).cmp(ce)&&(ze+=8);break;case"05":Xe=ke.mod(ue),Xe.cmp(Ae)&&Xe.cmp(pe)&&(ze+=8);break;default:ze+=4}return Se[Ye]=ze,ze}function Ne(ke,je,Ke){this.setGenerator(je),this.__prime=new K(ke),this._prime=K.mont(this.__prime),this._primeLen=ke.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,Ke?(this.setPublicKey=ge,this.setPrivateKey=ye):this._primeCode=8}Object.defineProperty(Ne.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=Te(this.__prime,this.__gen)),this._primeCode}}),Ne.prototype.generateKeys=function(){return this._priv||(this._priv=new K(me(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},Ne.prototype.computeSecret=function(ke){ke=new K(ke),ke=ke.toRed(this._prime);var je=ke.redPow(this._priv).fromRed(),Ke=new Buffer(je.toArray()),Ye=this.getPrime();if(Ke.length<Ye.length){var ze=new Buffer(Ye.length-Ke.length);ze.fill(0),Ke=Buffer.concat([ze,Ke])}return Ke},Ne.prototype.getPublicKey=function(je){return $e(this._pub,je)},Ne.prototype.getPrivateKey=function(je){return $e(this._priv,je)},Ne.prototype.getPrime=function(ke){return $e(this.__prime,ke)},Ne.prototype.getGenerator=function(ke){return $e(this._gen,ke)},Ne.prototype.setGenerator=function(ke,je){return je=je||"utf8",Buffer.isBuffer(ke)||(ke=new Buffer(ke,je)),this.__gen=ke,this._gen=new K(ke),this};function $e(ke,je){var Ke=new Buffer(ke.toArray());return je?Ke.toString(je):Ke}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$4;hasRequiredBrowser$4=1;var K=requireGeneratePrime(),J=require$$1$1,ne=requireDh();function oe(Ae){var pe=new Buffer(J[Ae].prime,"hex"),xe=new Buffer(J[Ae].gen,"hex");return new ne(pe,xe)}var ce={binary:!0,hex:!0,base64:!0};function ue(Ae,pe,xe,me){return Buffer.isBuffer(pe)||ce[pe]===void 0?ue(Ae,"binary",pe,xe):(pe=pe||"binary",me=me||"binary",xe=xe||new Buffer([2]),Buffer.isBuffer(xe)||(xe=new Buffer(xe,me)),typeof Ae=="number"?new ne(K(Ae,xe),xe,!0):(Buffer.isBuffer(Ae)||(Ae=new Buffer(Ae,pe)),new ne(Ae,xe,!0)))}return browser$4.DiffieHellmanGroup=browser$4.createDiffieHellmanGroup=browser$4.getDiffieHellman=oe,browser$4.createDiffieHellman=browser$4.DiffieHellman=ue,browser$4}var readableBrowser={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;hasRequiredProcessNextickArgs=1,typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:K}:processNextickArgs.exports=process$1;function K(J,ne,oe,ce){if(typeof J!="function")throw new TypeError('"callback" argument must be a function');var ue=arguments.length,Ae,pe;switch(ue){case 0:case 1:return process$1.nextTick(J);case 2:return process$1.nextTick(function(){J.call(null,ne)});case 3:return process$1.nextTick(function(){J.call(null,ne,oe)});case 4:return process$1.nextTick(function(){J.call(null,ne,oe,ce)});default:for(Ae=new Array(ue-1),pe=0;pe<Ae.length;)Ae[pe++]=arguments[pe];return process$1.nextTick(function(){J.apply(null,Ae)})}}return processNextickArgs.exports}var isarray,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var K={}.toString;return isarray=Array.isArray||function(J){return K.call(J)=="[object Array]"},isarray}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(K,J){var ne=require$$0$1,oe=ne.Buffer;function ce(Ae,pe){for(var xe in Ae)pe[xe]=Ae[xe]}oe.from&&oe.alloc&&oe.allocUnsafe&&oe.allocUnsafeSlow?K.exports=ne:(ce(ne,J),J.Buffer=ue);function ue(Ae,pe,xe){return oe(Ae,pe,xe)}ce(oe,ue),ue.from=function(Ae,pe,xe){if(typeof Ae=="number")throw new TypeError("Argument must not be a number");return oe(Ae,pe,xe)},ue.alloc=function(Ae,pe,xe){if(typeof Ae!="number")throw new TypeError("Argument must be a number");var me=oe(Ae);return pe!==void 0?typeof xe=="string"?me.fill(pe,xe):me.fill(pe):me.fill(0),me},ue.allocUnsafe=function(Ae){if(typeof Ae!="number")throw new TypeError("Argument must be a number");return oe(Ae)},ue.allocUnsafeSlow=function(Ae){if(typeof Ae!="number")throw new TypeError("Argument must be a number");return ne.SlowBuffer(Ae)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var util$1={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$1;hasRequiredUtil=1;function K($e){return Array.isArray?Array.isArray($e):Ne($e)==="[object Array]"}util$1.isArray=K;function J($e){return typeof $e=="boolean"}util$1.isBoolean=J;function ne($e){return $e===null}util$1.isNull=ne;function oe($e){return $e==null}util$1.isNullOrUndefined=oe;function ce($e){return typeof $e=="number"}util$1.isNumber=ce;function ue($e){return typeof $e=="string"}util$1.isString=ue;function Ae($e){return typeof $e=="symbol"}util$1.isSymbol=Ae;function pe($e){return $e===void 0}util$1.isUndefined=pe;function xe($e){return Ne($e)==="[object RegExp]"}util$1.isRegExp=xe;function me($e){return typeof $e=="object"&&$e!==null}util$1.isObject=me;function ge($e){return Ne($e)==="[object Date]"}util$1.isDate=ge;function ye($e){return Ne($e)==="[object Error]"||$e instanceof Error}util$1.isError=ye;function Se($e){return typeof $e=="function"}util$1.isFunction=Se;function Te($e){return $e===null||typeof $e=="boolean"||typeof $e=="number"||typeof $e=="string"||typeof $e=="symbol"||typeof $e>"u"}util$1.isPrimitive=Te,util$1.isBuffer=require$$0$1.Buffer.isBuffer;function Ne($e){return Object.prototype.toString.call($e)}return util$1}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(K){function J(ue,Ae){if(!(ue instanceof Ae))throw new TypeError("Cannot call a class as a function")}var ne=requireSafeBuffer().Buffer,oe=requireUtil$1();function ce(ue,Ae,pe){ue.copy(Ae,pe)}K.exports=function(){function ue(){J(this,ue),this.head=null,this.tail=null,this.length=0}return ue.prototype.push=function(pe){var xe={data:pe,next:null};this.length>0?this.tail.next=xe:this.head=xe,this.tail=xe,++this.length},ue.prototype.unshift=function(pe){var xe={data:pe,next:this.head};this.length===0&&(this.tail=xe),this.head=xe,++this.length},ue.prototype.shift=function(){if(this.length!==0){var pe=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,pe}},ue.prototype.clear=function(){this.head=this.tail=null,this.length=0},ue.prototype.join=function(pe){if(this.length===0)return"";for(var xe=this.head,me=""+xe.data;xe=xe.next;)me+=pe+xe.data;return me},ue.prototype.concat=function(pe){if(this.length===0)return ne.alloc(0);for(var xe=ne.allocUnsafe(pe>>>0),me=this.head,ge=0;me;)ce(me.data,xe,ge),ge+=me.data.length,me=me.next;return xe},ue}(),oe&&oe.inspect&&oe.inspect.custom&&(K.exports.prototype[oe.inspect.custom]=function(){var ue=oe.inspect({length:this.length});return this.constructor.name+" "+ue})}(BufferList)),BufferList.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var K=requireProcessNextickArgs();function J(ce,ue){var Ae=this,pe=this._readableState&&this._readableState.destroyed,xe=this._writableState&&this._writableState.destroyed;return pe||xe?(ue?ue(ce):ce&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,K.nextTick(oe,this,ce)):K.nextTick(oe,this,ce)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(ce||null,function(me){!ue&&me?Ae._writableState?Ae._writableState.errorEmitted||(Ae._writableState.errorEmitted=!0,K.nextTick(oe,Ae,me)):K.nextTick(oe,Ae,me):ue&&ue(me)}),this)}function ne(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function oe(ce,ue){ce.emit("error",ue)}return destroy_1={destroy:J,undestroy:ne},destroy_1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var K=requireProcessNextickArgs();_stream_writable=$e;function J(qe){var We=this;this.next=null,this.entry=null,this.finish=function(){Fe(We,qe)}}var ne=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:K.nextTick,oe;$e.WritableState=Te;var ce=Object.create(requireUtil());ce.inherits=requireInherits_browser();var ue={deprecate:requireBrowser$b()},Ae=requireStreamBrowser(),pe=requireSafeBuffer().Buffer,xe=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function me(qe){return pe.from(qe)}function ge(qe){return pe.isBuffer(qe)||qe instanceof xe}var ye=requireDestroy();ce.inherits($e,Ae);function Se(){}function Te(qe,We){oe=oe||require_stream_duplex(),qe=qe||{};var Ue=We instanceof oe;this.objectMode=!!qe.objectMode,Ue&&(this.objectMode=this.objectMode||!!qe.writableObjectMode);var _e=qe.highWaterMark,Qe=qe.writableHighWaterMark,tt=this.objectMode?16:16*1024;_e||_e===0?this.highWaterMark=_e:Ue&&(Qe||Qe===0)?this.highWaterMark=Qe:this.highWaterMark=tt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var it=qe.decodeStrings===!1;this.decodeStrings=!it,this.defaultEncoding=qe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(at){rt(We,at)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new J(this)}Te.prototype.getBuffer=function(){for(var We=this.bufferedRequest,Ue=[];We;)Ue.push(We),We=We.next;return Ue},function(){try{Object.defineProperty(Te.prototype,"buffer",{get:ue.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Ne;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ne=Function.prototype[Symbol.hasInstance],Object.defineProperty($e,Symbol.hasInstance,{value:function(qe){return Ne.call(this,qe)?!0:this!==$e?!1:qe&&qe._writableState instanceof Te}})):Ne=function(qe){return qe instanceof this};function $e(qe){if(oe=oe||require_stream_duplex(),!Ne.call($e,this)&&!(this instanceof oe))return new $e(qe);this._writableState=new Te(qe,this),this.writable=!0,qe&&(typeof qe.write=="function"&&(this._write=qe.write),typeof qe.writev=="function"&&(this._writev=qe.writev),typeof qe.destroy=="function"&&(this._destroy=qe.destroy),typeof qe.final=="function"&&(this._final=qe.final)),Ae.call(this)}$e.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function ke(qe,We){var Ue=new Error("write after end");qe.emit("error",Ue),K.nextTick(We,Ue)}function je(qe,We,Ue,_e){var Qe=!0,tt=!1;return Ue===null?tt=new TypeError("May not write null values to stream"):typeof Ue!="string"&&Ue!==void 0&&!We.objectMode&&(tt=new TypeError("Invalid non-string/buffer chunk")),tt&&(qe.emit("error",tt),K.nextTick(_e,tt),Qe=!1),Qe}$e.prototype.write=function(qe,We,Ue){var _e=this._writableState,Qe=!1,tt=!_e.objectMode&&ge(qe);return tt&&!pe.isBuffer(qe)&&(qe=me(qe)),typeof We=="function"&&(Ue=We,We=null),tt?We="buffer":We||(We=_e.defaultEncoding),typeof Ue!="function"&&(Ue=Se),_e.ended?ke(this,Ue):(tt||je(this,_e,qe,Ue))&&(_e.pendingcb++,Qe=Ye(this,_e,tt,qe,We,Ue)),Qe},$e.prototype.cork=function(){var qe=this._writableState;qe.corked++},$e.prototype.uncork=function(){var qe=this._writableState;qe.corked&&(qe.corked--,!qe.writing&&!qe.corked&&!qe.bufferProcessing&&qe.bufferedRequest&&nt(this,qe))},$e.prototype.setDefaultEncoding=function(We){if(typeof We=="string"&&(We=We.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((We+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+We);return this._writableState.defaultEncoding=We,this};function Ke(qe,We,Ue){return!qe.objectMode&&qe.decodeStrings!==!1&&typeof We=="string"&&(We=pe.from(We,Ue)),We}Object.defineProperty($e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Ye(qe,We,Ue,_e,Qe,tt){if(!Ue){var it=Ke(We,_e,Qe);_e!==it&&(Ue=!0,Qe="buffer",_e=it)}var at=We.objectMode?1:_e.length;We.length+=at;var ot=We.length<We.highWaterMark;if(ot||(We.needDrain=!0),We.writing||We.corked){var lt=We.lastBufferedRequest;We.lastBufferedRequest={chunk:_e,encoding:Qe,isBuf:Ue,callback:tt,next:null},lt?lt.next=We.lastBufferedRequest:We.bufferedRequest=We.lastBufferedRequest,We.bufferedRequestCount+=1}else ze(qe,We,!1,at,_e,Qe,tt);return ot}function ze(qe,We,Ue,_e,Qe,tt,it){We.writelen=_e,We.writecb=it,We.writing=!0,We.sync=!0,Ue?qe._writev(Qe,We.onwrite):qe._write(Qe,tt,We.onwrite),We.sync=!1}function Xe(qe,We,Ue,_e,Qe){--We.pendingcb,Ue?(K.nextTick(Qe,_e),K.nextTick(Re,qe,We),qe._writableState.errorEmitted=!0,qe.emit("error",_e)):(Qe(_e),qe._writableState.errorEmitted=!0,qe.emit("error",_e),Re(qe,We))}function Je(qe){qe.writing=!1,qe.writecb=null,qe.length-=qe.writelen,qe.writelen=0}function rt(qe,We){var Ue=qe._writableState,_e=Ue.sync,Qe=Ue.writecb;if(Je(Ue),We)Xe(qe,Ue,_e,We,Qe);else{var tt=Ge(Ue);!tt&&!Ue.corked&&!Ue.bufferProcessing&&Ue.bufferedRequest&&nt(qe,Ue),_e?ne(Ze,qe,Ue,tt,Qe):Ze(qe,Ue,tt,Qe)}}function Ze(qe,We,Ue,_e){Ue||et(qe,We),We.pendingcb--,_e(),Re(qe,We)}function et(qe,We){We.length===0&&We.needDrain&&(We.needDrain=!1,qe.emit("drain"))}function nt(qe,We){We.bufferProcessing=!0;var Ue=We.bufferedRequest;if(qe._writev&&Ue&&Ue.next){var _e=We.bufferedRequestCount,Qe=new Array(_e),tt=We.corkedRequestsFree;tt.entry=Ue;for(var it=0,at=!0;Ue;)Qe[it]=Ue,Ue.isBuf||(at=!1),Ue=Ue.next,it+=1;Qe.allBuffers=at,ze(qe,We,!0,We.length,Qe,"",tt.finish),We.pendingcb++,We.lastBufferedRequest=null,tt.next?(We.corkedRequestsFree=tt.next,tt.next=null):We.corkedRequestsFree=new J(We),We.bufferedRequestCount=0}else{for(;Ue;){var ot=Ue.chunk,lt=Ue.encoding,st=Ue.callback,ut=We.objectMode?1:ot.length;if(ze(qe,We,!1,ut,ot,lt,st),Ue=Ue.next,We.bufferedRequestCount--,We.writing)break}Ue===null&&(We.lastBufferedRequest=null)}We.bufferedRequest=Ue,We.bufferProcessing=!1}$e.prototype._write=function(qe,We,Ue){Ue(new Error("_write() is not implemented"))},$e.prototype._writev=null,$e.prototype.end=function(qe,We,Ue){var _e=this._writableState;typeof qe=="function"?(Ue=qe,qe=null,We=null):typeof We=="function"&&(Ue=We,We=null),qe!=null&&this.write(qe,We),_e.corked&&(_e.corked=1,this.uncork()),_e.ending||Ie(this,_e,Ue)};function Ge(qe){return qe.ending&&qe.length===0&&qe.bufferedRequest===null&&!qe.finished&&!qe.writing}function ve(qe,We){qe._final(function(Ue){We.pendingcb--,Ue&&qe.emit("error",Ue),We.prefinished=!0,qe.emit("prefinish"),Re(qe,We)})}function Be(qe,We){!We.prefinished&&!We.finalCalled&&(typeof qe._final=="function"?(We.pendingcb++,We.finalCalled=!0,K.nextTick(ve,qe,We)):(We.prefinished=!0,qe.emit("prefinish")))}function Re(qe,We){var Ue=Ge(We);return Ue&&(Be(qe,We),We.pendingcb===0&&(We.finished=!0,qe.emit("finish"))),Ue}function Ie(qe,We,Ue){We.ending=!0,Re(qe,We),Ue&&(We.finished?K.nextTick(Ue):qe.once("finish",Ue)),We.ended=!0,qe.writable=!1}function Fe(qe,We,Ue){var _e=qe.entry;for(qe.entry=null;_e;){var Qe=_e.callback;We.pendingcb--,Qe(Ue),_e=_e.next}We.corkedRequestsFree.next=qe}return Object.defineProperty($e.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(qe){this._writableState&&(this._writableState.destroyed=qe)}}),$e.prototype.destroy=ye.destroy,$e.prototype._undestroy=ye.undestroy,$e.prototype._destroy=function(qe,We){this.end(),We(qe)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var K=requireProcessNextickArgs(),J=Object.keys||function(ye){var Se=[];for(var Te in ye)Se.push(Te);return Se};_stream_duplex=xe;var ne=Object.create(requireUtil());ne.inherits=requireInherits_browser();var oe=require_stream_readable(),ce=require_stream_writable();ne.inherits(xe,oe);for(var ue=J(ce.prototype),Ae=0;Ae<ue.length;Ae++){var pe=ue[Ae];xe.prototype[pe]||(xe.prototype[pe]=ce.prototype[pe])}function xe(ye){if(!(this instanceof xe))return new xe(ye);oe.call(this,ye),ce.call(this,ye),ye&&ye.readable===!1&&(this.readable=!1),ye&&ye.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,ye&&ye.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",me)}Object.defineProperty(xe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function me(){this.allowHalfOpen||this._writableState.ended||K.nextTick(ge,this)}function ge(ye){ye.end()}return Object.defineProperty(xe.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(ye){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=ye,this._writableState.destroyed=ye)}}),xe.prototype._destroy=function(ye,Se){this.push(null),this.end(),K.nextTick(Se,ye)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var K=requireProcessNextickArgs();_stream_readable=Ke;var J=requireIsarray(),ne;Ke.ReadableState=je,requireEvents().EventEmitter;var oe=function(st,ut){return st.listeners(ut).length},ce=requireStreamBrowser(),ue=requireSafeBuffer().Buffer,Ae=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function pe(st){return ue.from(st)}function xe(st){return ue.isBuffer(st)||st instanceof Ae}var me=Object.create(requireUtil());me.inherits=requireInherits_browser();var ge=requireUtil$1(),ye=void 0;ge&&ge.debuglog?ye=ge.debuglog("stream"):ye=function(){};var Se=requireBufferList(),Te=requireDestroy(),Ne;me.inherits(Ke,ce);var $e=["error","close","destroy","pause","resume"];function ke(st,ut,ft){if(typeof st.prependListener=="function")return st.prependListener(ut,ft);!st._events||!st._events[ut]?st.on(ut,ft):J(st._events[ut])?st._events[ut].unshift(ft):st._events[ut]=[ft,st._events[ut]]}function je(st,ut){ne=ne||require_stream_duplex(),st=st||{};var ft=ut instanceof ne;this.objectMode=!!st.objectMode,ft&&(this.objectMode=this.objectMode||!!st.readableObjectMode);var dt=st.highWaterMark,Bt=st.readableHighWaterMark,pt=this.objectMode?16:16*1024;dt||dt===0?this.highWaterMark=dt:ft&&(Bt||Bt===0)?this.highWaterMark=Bt:this.highWaterMark=pt,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Se,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=st.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,st.encoding&&(Ne||(Ne=requireString_decoder().StringDecoder),this.decoder=new Ne(st.encoding),this.encoding=st.encoding)}function Ke(st){if(ne=ne||require_stream_duplex(),!(this instanceof Ke))return new Ke(st);this._readableState=new je(st,this),this.readable=!0,st&&(typeof st.read=="function"&&(this._read=st.read),typeof st.destroy=="function"&&(this._destroy=st.destroy)),ce.call(this)}Object.defineProperty(Ke.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(st){this._readableState&&(this._readableState.destroyed=st)}}),Ke.prototype.destroy=Te.destroy,Ke.prototype._undestroy=Te.undestroy,Ke.prototype._destroy=function(st,ut){this.push(null),ut(st)},Ke.prototype.push=function(st,ut){var ft=this._readableState,dt;return ft.objectMode?dt=!0:typeof st=="string"&&(ut=ut||ft.defaultEncoding,ut!==ft.encoding&&(st=ue.from(st,ut),ut=""),dt=!0),Ye(this,st,ut,!1,dt)},Ke.prototype.unshift=function(st){return Ye(this,st,null,!0,!1)};function Ye(st,ut,ft,dt,Bt){var pt=st._readableState;if(ut===null)pt.reading=!1,nt(st,pt);else{var mt;Bt||(mt=Xe(pt,ut)),mt?st.emit("error",mt):pt.objectMode||ut&&ut.length>0?(typeof ut!="string"&&!pt.objectMode&&Object.getPrototypeOf(ut)!==ue.prototype&&(ut=pe(ut)),dt?pt.endEmitted?st.emit("error",new Error("stream.unshift() after end event")):ze(st,pt,ut,!0):pt.ended?st.emit("error",new Error("stream.push() after EOF")):(pt.reading=!1,pt.decoder&&!ft?(ut=pt.decoder.write(ut),pt.objectMode||ut.length!==0?ze(st,pt,ut,!1):Be(st,pt)):ze(st,pt,ut,!1))):dt||(pt.reading=!1)}return Je(pt)}function ze(st,ut,ft,dt){ut.flowing&&ut.length===0&&!ut.sync?(st.emit("data",ft),st.read(0)):(ut.length+=ut.objectMode?1:ft.length,dt?ut.buffer.unshift(ft):ut.buffer.push(ft),ut.needReadable&&Ge(st)),Be(st,ut)}function Xe(st,ut){var ft;return!xe(ut)&&typeof ut!="string"&&ut!==void 0&&!st.objectMode&&(ft=new TypeError("Invalid non-string/buffer chunk")),ft}function Je(st){return!st.ended&&(st.needReadable||st.length<st.highWaterMark||st.length===0)}Ke.prototype.isPaused=function(){return this._readableState.flowing===!1},Ke.prototype.setEncoding=function(st){return Ne||(Ne=requireString_decoder().StringDecoder),this._readableState.decoder=new Ne(st),this._readableState.encoding=st,this};var rt=8388608;function Ze(st){return st>=rt?st=rt:(st--,st|=st>>>1,st|=st>>>2,st|=st>>>4,st|=st>>>8,st|=st>>>16,st++),st}function et(st,ut){return st<=0||ut.length===0&&ut.ended?0:ut.objectMode?1:st!==st?ut.flowing&&ut.length?ut.buffer.head.data.length:ut.length:(st>ut.highWaterMark&&(ut.highWaterMark=Ze(st)),st<=ut.length?st:ut.ended?ut.length:(ut.needReadable=!0,0))}Ke.prototype.read=function(st){ye("read",st),st=parseInt(st,10);var ut=this._readableState,ft=st;if(st!==0&&(ut.emittedReadable=!1),st===0&&ut.needReadable&&(ut.length>=ut.highWaterMark||ut.ended))return ye("read: emitReadable",ut.length,ut.ended),ut.length===0&&ut.ended?at(this):Ge(this),null;if(st=et(st,ut),st===0&&ut.ended)return ut.length===0&&at(this),null;var dt=ut.needReadable;ye("need readable",dt),(ut.length===0||ut.length-st<ut.highWaterMark)&&(dt=!0,ye("length less than watermark",dt)),ut.ended||ut.reading?(dt=!1,ye("reading or ended",dt)):dt&&(ye("do read"),ut.reading=!0,ut.sync=!0,ut.length===0&&(ut.needReadable=!0),this._read(ut.highWaterMark),ut.sync=!1,ut.reading||(st=et(ft,ut)));var Bt;return st>0?Bt=_e(st,ut):Bt=null,Bt===null?(ut.needReadable=!0,st=0):ut.length-=st,ut.length===0&&(ut.ended||(ut.needReadable=!0),ft!==st&&ut.ended&&at(this)),Bt!==null&&this.emit("data",Bt),Bt};function nt(st,ut){if(!ut.ended){if(ut.decoder){var ft=ut.decoder.end();ft&&ft.length&&(ut.buffer.push(ft),ut.length+=ut.objectMode?1:ft.length)}ut.ended=!0,Ge(st)}}function Ge(st){var ut=st._readableState;ut.needReadable=!1,ut.emittedReadable||(ye("emitReadable",ut.flowing),ut.emittedReadable=!0,ut.sync?K.nextTick(ve,st):ve(st))}function ve(st){ye("emit readable"),st.emit("readable"),Ue(st)}function Be(st,ut){ut.readingMore||(ut.readingMore=!0,K.nextTick(Re,st,ut))}function Re(st,ut){for(var ft=ut.length;!ut.reading&&!ut.flowing&&!ut.ended&&ut.length<ut.highWaterMark&&(ye("maybeReadMore read 0"),st.read(0),ft!==ut.length);)ft=ut.length;ut.readingMore=!1}Ke.prototype._read=function(st){this.emit("error",new Error("_read() is not implemented"))},Ke.prototype.pipe=function(st,ut){var ft=this,dt=this._readableState;switch(dt.pipesCount){case 0:dt.pipes=st;break;case 1:dt.pipes=[dt.pipes,st];break;default:dt.pipes.push(st);break}dt.pipesCount+=1,ye("pipe count=%d opts=%j",dt.pipesCount,ut);var Bt=(!ut||ut.end!==!1)&&st!==process$1.stdout&&st!==process$1.stderr,pt=Bt?bt:Zt;dt.endEmitted?K.nextTick(pt):ft.once("end",pt),st.on("unpipe",mt);function mt(Ct,Rt){ye("onunpipe"),Ct===ft&&Rt&&Rt.hasUnpiped===!1&&(Rt.hasUnpiped=!0,It())}function bt(){ye("onend"),st.end()}var xt=Ie(ft);st.on("drain",xt);var yt=!1;function It(){ye("cleanup"),st.removeListener("close",wt),st.removeListener("finish",St),st.removeListener("drain",xt),st.removeListener("error",Pt),st.removeListener("unpipe",mt),ft.removeListener("end",bt),ft.removeListener("end",Zt),ft.removeListener("data",gt),yt=!0,dt.awaitDrain&&(!st._writableState||st._writableState.needDrain)&&xt()}var ht=!1;ft.on("data",gt);function gt(Ct){ye("ondata"),ht=!1;var Rt=st.write(Ct);Rt===!1&&!ht&&((dt.pipesCount===1&&dt.pipes===st||dt.pipesCount>1&&lt(dt.pipes,st)!==-1)&&!yt&&(ye("false write response, pause",dt.awaitDrain),dt.awaitDrain++,ht=!0),ft.pause())}function Pt(Ct){ye("onerror",Ct),Zt(),st.removeListener("error",Pt),oe(st,"error")===0&&st.emit("error",Ct)}ke(st,"error",Pt);function wt(){st.removeListener("finish",St),Zt()}st.once("close",wt);function St(){ye("onfinish"),st.removeListener("close",wt),Zt()}st.once("finish",St);function Zt(){ye("unpipe"),ft.unpipe(st)}return st.emit("pipe",ft),dt.flowing||(ye("pipe resume"),ft.resume()),st};function Ie(st){return function(){var ut=st._readableState;ye("pipeOnDrain",ut.awaitDrain),ut.awaitDrain&&ut.awaitDrain--,ut.awaitDrain===0&&oe(st,"data")&&(ut.flowing=!0,Ue(st))}}Ke.prototype.unpipe=function(st){var ut=this._readableState,ft={hasUnpiped:!1};if(ut.pipesCount===0)return this;if(ut.pipesCount===1)return st&&st!==ut.pipes?this:(st||(st=ut.pipes),ut.pipes=null,ut.pipesCount=0,ut.flowing=!1,st&&st.emit("unpipe",this,ft),this);if(!st){var dt=ut.pipes,Bt=ut.pipesCount;ut.pipes=null,ut.pipesCount=0,ut.flowing=!1;for(var pt=0;pt<Bt;pt++)dt[pt].emit("unpipe",this,{hasUnpiped:!1});return this}var mt=lt(ut.pipes,st);return mt===-1?this:(ut.pipes.splice(mt,1),ut.pipesCount-=1,ut.pipesCount===1&&(ut.pipes=ut.pipes[0]),st.emit("unpipe",this,ft),this)},Ke.prototype.on=function(st,ut){var ft=ce.prototype.on.call(this,st,ut);if(st==="data")this._readableState.flowing!==!1&&this.resume();else if(st==="readable"){var dt=this._readableState;!dt.endEmitted&&!dt.readableListening&&(dt.readableListening=dt.needReadable=!0,dt.emittedReadable=!1,dt.reading?dt.length&&Ge(this):K.nextTick(Fe,this))}return ft},Ke.prototype.addListener=Ke.prototype.on;function Fe(st){ye("readable nexttick read 0"),st.read(0)}Ke.prototype.resume=function(){var st=this._readableState;return st.flowing||(ye("resume"),st.flowing=!0,qe(this,st)),this};function qe(st,ut){ut.resumeScheduled||(ut.resumeScheduled=!0,K.nextTick(We,st,ut))}function We(st,ut){ut.reading||(ye("resume read 0"),st.read(0)),ut.resumeScheduled=!1,ut.awaitDrain=0,st.emit("resume"),Ue(st),ut.flowing&&!ut.reading&&st.read(0)}Ke.prototype.pause=function(){return ye("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ye("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Ue(st){var ut=st._readableState;for(ye("flow",ut.flowing);ut.flowing&&st.read()!==null;);}Ke.prototype.wrap=function(st){var ut=this,ft=this._readableState,dt=!1;st.on("end",function(){if(ye("wrapped end"),ft.decoder&&!ft.ended){var mt=ft.decoder.end();mt&&mt.length&&ut.push(mt)}ut.push(null)}),st.on("data",function(mt){if(ye("wrapped data"),ft.decoder&&(mt=ft.decoder.write(mt)),!(ft.objectMode&&mt==null)&&!(!ft.objectMode&&(!mt||!mt.length))){var bt=ut.push(mt);bt||(dt=!0,st.pause())}});for(var Bt in st)this[Bt]===void 0&&typeof st[Bt]=="function"&&(this[Bt]=function(mt){return function(){return st[mt].apply(st,arguments)}}(Bt));for(var pt=0;pt<$e.length;pt++)st.on($e[pt],this.emit.bind(this,$e[pt]));return this._read=function(mt){ye("wrapped _read",mt),dt&&(dt=!1,st.resume())},this},Object.defineProperty(Ke.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Ke._fromList=_e;function _e(st,ut){if(ut.length===0)return null;var ft;return ut.objectMode?ft=ut.buffer.shift():!st||st>=ut.length?(ut.decoder?ft=ut.buffer.join(""):ut.buffer.length===1?ft=ut.buffer.head.data:ft=ut.buffer.concat(ut.length),ut.buffer.clear()):ft=Qe(st,ut.buffer,ut.decoder),ft}function Qe(st,ut,ft){var dt;return st<ut.head.data.length?(dt=ut.head.data.slice(0,st),ut.head.data=ut.head.data.slice(st)):st===ut.head.data.length?dt=ut.shift():dt=ft?tt(st,ut):it(st,ut),dt}function tt(st,ut){var ft=ut.head,dt=1,Bt=ft.data;for(st-=Bt.length;ft=ft.next;){var pt=ft.data,mt=st>pt.length?pt.length:st;if(mt===pt.length?Bt+=pt:Bt+=pt.slice(0,st),st-=mt,st===0){mt===pt.length?(++dt,ft.next?ut.head=ft.next:ut.head=ut.tail=null):(ut.head=ft,ft.data=pt.slice(mt));break}++dt}return ut.length-=dt,Bt}function it(st,ut){var ft=ue.allocUnsafe(st),dt=ut.head,Bt=1;for(dt.data.copy(ft),st-=dt.data.length;dt=dt.next;){var pt=dt.data,mt=st>pt.length?pt.length:st;if(pt.copy(ft,ft.length-st,0,mt),st-=mt,st===0){mt===pt.length?(++Bt,dt.next?ut.head=dt.next:ut.head=ut.tail=null):(ut.head=dt,dt.data=pt.slice(mt));break}++Bt}return ut.length-=Bt,ft}function at(st){var ut=st._readableState;if(ut.length>0)throw new Error('"endReadable()" called on non-empty stream');ut.endEmitted||(ut.ended=!0,K.nextTick(ot,ut,st))}function ot(st,ut){!st.endEmitted&&st.length===0&&(st.endEmitted=!0,ut.readable=!1,ut.emit("end"))}function lt(st,ut){for(var ft=0,dt=st.length;ft<dt;ft++)if(st[ft]===ut)return ft;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=oe;var K=require_stream_duplex(),J=Object.create(requireUtil());J.inherits=requireInherits_browser(),J.inherits(oe,K);function ne(Ae,pe){var xe=this._transformState;xe.transforming=!1;var me=xe.writecb;if(!me)return this.emit("error",new Error("write callback called multiple times"));xe.writechunk=null,xe.writecb=null,pe!=null&&this.push(pe),me(Ae);var ge=this._readableState;ge.reading=!1,(ge.needReadable||ge.length<ge.highWaterMark)&&this._read(ge.highWaterMark)}function oe(Ae){if(!(this instanceof oe))return new oe(Ae);K.call(this,Ae),this._transformState={afterTransform:ne.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,Ae&&(typeof Ae.transform=="function"&&(this._transform=Ae.transform),typeof Ae.flush=="function"&&(this._flush=Ae.flush)),this.on("prefinish",ce)}function ce(){var Ae=this;typeof this._flush=="function"?this._flush(function(pe,xe){ue(Ae,pe,xe)}):ue(this,null,null)}oe.prototype.push=function(Ae,pe){return this._transformState.needTransform=!1,K.prototype.push.call(this,Ae,pe)},oe.prototype._transform=function(Ae,pe,xe){throw new Error("_transform() is not implemented")},oe.prototype._write=function(Ae,pe,xe){var me=this._transformState;if(me.writecb=xe,me.writechunk=Ae,me.writeencoding=pe,!me.transforming){var ge=this._readableState;(me.needTransform||ge.needReadable||ge.length<ge.highWaterMark)&&this._read(ge.highWaterMark)}},oe.prototype._read=function(Ae){var pe=this._transformState;pe.writechunk!==null&&pe.writecb&&!pe.transforming?(pe.transforming=!0,this._transform(pe.writechunk,pe.writeencoding,pe.afterTransform)):pe.needTransform=!0},oe.prototype._destroy=function(Ae,pe){var xe=this;K.prototype._destroy.call(this,Ae,function(me){pe(me),xe.emit("close")})};function ue(Ae,pe,xe){if(pe)return Ae.emit("error",pe);if(xe!=null&&Ae.push(xe),Ae._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(Ae._transformState.transforming)throw new Error("Calling transform done when still transforming");return Ae.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=ne;var K=require_stream_transform(),J=Object.create(requireUtil());J.inherits=requireInherits_browser(),J.inherits(ne,K);function ne(oe){if(!(this instanceof ne))return new ne(oe);K.call(this,oe)}return ne.prototype._transform=function(oe,ce,ue){ue(null,oe)},_stream_passthrough}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(K,J){J=K.exports=require_stream_readable(),J.Stream=J,J.Readable=J,J.Writable=require_stream_writable(),J.Duplex=require_stream_duplex(),J.Transform=require_stream_transform(),J.PassThrough=require_stream_passthrough()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var sign={exports:{}},bn$4={exports:{}};bn$4.exports;var hasRequiredBn$4;function requireBn$4(){return hasRequiredBn$4||(hasRequiredBn$4=1,function(K){(function(J,ne){function oe(Be,Re){if(!Be)throw new Error(Re||"Assertion failed")}function ce(Be,Re){Be.super_=Re;var Ie=function(){};Ie.prototype=Re.prototype,Be.prototype=new Ie,Be.prototype.constructor=Be}function ue(Be,Re,Ie){if(ue.isBN(Be))return Be;this.negative=0,this.words=null,this.length=0,this.red=null,Be!==null&&((Re==="le"||Re==="be")&&(Ie=Re,Re=10),this._init(Be||0,Re||10,Ie||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(Re){return Re instanceof ue?!0:Re!==null&&typeof Re=="object"&&Re.constructor.wordSize===ue.wordSize&&Array.isArray(Re.words)},ue.max=function(Re,Ie){return Re.cmp(Ie)>0?Re:Ie},ue.min=function(Re,Ie){return Re.cmp(Ie)<0?Re:Ie},ue.prototype._init=function(Re,Ie,Fe){if(typeof Re=="number")return this._initNumber(Re,Ie,Fe);if(typeof Re=="object")return this._initArray(Re,Ie,Fe);Ie==="hex"&&(Ie=16),oe(Ie===(Ie|0)&&Ie>=2&&Ie<=36),Re=Re.toString().replace(/\s+/g,"");var qe=0;Re[0]==="-"&&(qe++,this.negative=1),qe<Re.length&&(Ie===16?this._parseHex(Re,qe,Fe):(this._parseBase(Re,Ie,qe),Fe==="le"&&this._initArray(this.toArray(),Ie,Fe)))},ue.prototype._initNumber=function(Re,Ie,Fe){Re<0&&(this.negative=1,Re=-Re),Re<67108864?(this.words=[Re&67108863],this.length=1):Re<4503599627370496?(this.words=[Re&67108863,Re/67108864&67108863],this.length=2):(oe(Re<9007199254740992),this.words=[Re&67108863,Re/67108864&67108863,1],this.length=3),Fe==="le"&&this._initArray(this.toArray(),Ie,Fe)},ue.prototype._initArray=function(Re,Ie,Fe){if(oe(typeof Re.length=="number"),Re.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Re.length/3),this.words=new Array(this.length);for(var qe=0;qe<this.length;qe++)this.words[qe]=0;var We,Ue,_e=0;if(Fe==="be")for(qe=Re.length-1,We=0;qe>=0;qe-=3)Ue=Re[qe]|Re[qe-1]<<8|Re[qe-2]<<16,this.words[We]|=Ue<<_e&67108863,this.words[We+1]=Ue>>>26-_e&67108863,_e+=24,_e>=26&&(_e-=26,We++);else if(Fe==="le")for(qe=0,We=0;qe<Re.length;qe+=3)Ue=Re[qe]|Re[qe+1]<<8|Re[qe+2]<<16,this.words[We]|=Ue<<_e&67108863,this.words[We+1]=Ue>>>26-_e&67108863,_e+=24,_e>=26&&(_e-=26,We++);return this._strip()};function pe(Be,Re){var Ie=Be.charCodeAt(Re);if(Ie>=48&&Ie<=57)return Ie-48;if(Ie>=65&&Ie<=70)return Ie-55;if(Ie>=97&&Ie<=102)return Ie-87;oe(!1,"Invalid character in "+Be)}function xe(Be,Re,Ie){var Fe=pe(Be,Ie);return Ie-1>=Re&&(Fe|=pe(Be,Ie-1)<<4),Fe}ue.prototype._parseHex=function(Re,Ie,Fe){this.length=Math.ceil((Re.length-Ie)/6),this.words=new Array(this.length);for(var qe=0;qe<this.length;qe++)this.words[qe]=0;var We=0,Ue=0,_e;if(Fe==="be")for(qe=Re.length-1;qe>=Ie;qe-=2)_e=xe(Re,Ie,qe)<<We,this.words[Ue]|=_e&67108863,We>=18?(We-=18,Ue+=1,this.words[Ue]|=_e>>>26):We+=8;else{var Qe=Re.length-Ie;for(qe=Qe%2===0?Ie+1:Ie;qe<Re.length;qe+=2)_e=xe(Re,Ie,qe)<<We,this.words[Ue]|=_e&67108863,We>=18?(We-=18,Ue+=1,this.words[Ue]|=_e>>>26):We+=8}this._strip()};function me(Be,Re,Ie,Fe){for(var qe=0,We=0,Ue=Math.min(Be.length,Ie),_e=Re;_e<Ue;_e++){var Qe=Be.charCodeAt(_e)-48;qe*=Fe,Qe>=49?We=Qe-49+10:Qe>=17?We=Qe-17+10:We=Qe,oe(Qe>=0&&We<Fe,"Invalid character"),qe+=We}return qe}ue.prototype._parseBase=function(Re,Ie,Fe){this.words=[0],this.length=1;for(var qe=0,We=1;We<=67108863;We*=Ie)qe++;qe--,We=We/Ie|0;for(var Ue=Re.length-Fe,_e=Ue%qe,Qe=Math.min(Ue,Ue-_e)+Fe,tt=0,it=Fe;it<Qe;it+=qe)tt=me(Re,it,it+qe,Ie),this.imuln(We),this.words[0]+tt<67108864?this.words[0]+=tt:this._iaddn(tt);if(_e!==0){var at=1;for(tt=me(Re,it,Re.length,Ie),it=0;it<_e;it++)at*=Ie;this.imuln(at),this.words[0]+tt<67108864?this.words[0]+=tt:this._iaddn(tt)}this._strip()},ue.prototype.copy=function(Re){Re.words=new Array(this.length);for(var Ie=0;Ie<this.length;Ie++)Re.words[Ie]=this.words[Ie];Re.length=this.length,Re.negative=this.negative,Re.red=this.red};function ge(Be,Re){Be.words=Re.words,Be.length=Re.length,Be.negative=Re.negative,Be.red=Re.red}if(ue.prototype._move=function(Re){ge(Re,this)},ue.prototype.clone=function(){var Re=new ue(null);return this.copy(Re),Re},ue.prototype._expand=function(Re){for(;this.length<Re;)this.words[this.length++]=0;return this},ue.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{ue.prototype[Symbol.for("nodejs.util.inspect.custom")]=ye}catch{ue.prototype.inspect=ye}else ue.prototype.inspect=ye;function ye(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var Se=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Te=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Ne=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(Re,Ie){Re=Re||10,Ie=Ie|0||1;var Fe;if(Re===16||Re==="hex"){Fe="";for(var qe=0,We=0,Ue=0;Ue<this.length;Ue++){var _e=this.words[Ue],Qe=((_e<<qe|We)&16777215).toString(16);We=_e>>>24-qe&16777215,qe+=2,qe>=26&&(qe-=26,Ue--),We!==0||Ue!==this.length-1?Fe=Se[6-Qe.length]+Qe+Fe:Fe=Qe+Fe}for(We!==0&&(Fe=We.toString(16)+Fe);Fe.length%Ie!==0;)Fe="0"+Fe;return this.negative!==0&&(Fe="-"+Fe),Fe}if(Re===(Re|0)&&Re>=2&&Re<=36){var tt=Te[Re],it=Ne[Re];Fe="";var at=this.clone();for(at.negative=0;!at.isZero();){var ot=at.modrn(it).toString(Re);at=at.idivn(it),at.isZero()?Fe=ot+Fe:Fe=Se[tt-ot.length]+ot+Fe}for(this.isZero()&&(Fe="0"+Fe);Fe.length%Ie!==0;)Fe="0"+Fe;return this.negative!==0&&(Fe="-"+Fe),Fe}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var Re=this.words[0];return this.length===2?Re+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Re+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Re:Re},ue.prototype.toJSON=function(){return this.toString(16,2)},Ae&&(ue.prototype.toBuffer=function(Re,Ie){return this.toArrayLike(Ae,Re,Ie)}),ue.prototype.toArray=function(Re,Ie){return this.toArrayLike(Array,Re,Ie)};var $e=function(Re,Ie){return Re.allocUnsafe?Re.allocUnsafe(Ie):new Re(Ie)};ue.prototype.toArrayLike=function(Re,Ie,Fe){this._strip();var qe=this.byteLength(),We=Fe||Math.max(1,qe);oe(qe<=We,"byte array longer than desired length"),oe(We>0,"Requested array length <= 0");var Ue=$e(Re,We),_e=Ie==="le"?"LE":"BE";return this["_toArrayLike"+_e](Ue,qe),Ue},ue.prototype._toArrayLikeLE=function(Re,Ie){for(var Fe=0,qe=0,We=0,Ue=0;We<this.length;We++){var _e=this.words[We]<<Ue|qe;Re[Fe++]=_e&255,Fe<Re.length&&(Re[Fe++]=_e>>8&255),Fe<Re.length&&(Re[Fe++]=_e>>16&255),Ue===6?(Fe<Re.length&&(Re[Fe++]=_e>>24&255),qe=0,Ue=0):(qe=_e>>>24,Ue+=2)}if(Fe<Re.length)for(Re[Fe++]=qe;Fe<Re.length;)Re[Fe++]=0},ue.prototype._toArrayLikeBE=function(Re,Ie){for(var Fe=Re.length-1,qe=0,We=0,Ue=0;We<this.length;We++){var _e=this.words[We]<<Ue|qe;Re[Fe--]=_e&255,Fe>=0&&(Re[Fe--]=_e>>8&255),Fe>=0&&(Re[Fe--]=_e>>16&255),Ue===6?(Fe>=0&&(Re[Fe--]=_e>>24&255),qe=0,Ue=0):(qe=_e>>>24,Ue+=2)}if(Fe>=0)for(Re[Fe--]=qe;Fe>=0;)Re[Fe--]=0},Math.clz32?ue.prototype._countBits=function(Re){return 32-Math.clz32(Re)}:ue.prototype._countBits=function(Re){var Ie=Re,Fe=0;return Ie>=4096&&(Fe+=13,Ie>>>=13),Ie>=64&&(Fe+=7,Ie>>>=7),Ie>=8&&(Fe+=4,Ie>>>=4),Ie>=2&&(Fe+=2,Ie>>>=2),Fe+Ie},ue.prototype._zeroBits=function(Re){if(Re===0)return 26;var Ie=Re,Fe=0;return Ie&8191||(Fe+=13,Ie>>>=13),Ie&127||(Fe+=7,Ie>>>=7),Ie&15||(Fe+=4,Ie>>>=4),Ie&3||(Fe+=2,Ie>>>=2),Ie&1||Fe++,Fe},ue.prototype.bitLength=function(){var Re=this.words[this.length-1],Ie=this._countBits(Re);return(this.length-1)*26+Ie};function ke(Be){for(var Re=new Array(Be.bitLength()),Ie=0;Ie<Re.length;Ie++){var Fe=Ie/26|0,qe=Ie%26;Re[Ie]=Be.words[Fe]>>>qe&1}return Re}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Re=0,Ie=0;Ie<this.length;Ie++){var Fe=this._zeroBits(this.words[Ie]);if(Re+=Fe,Fe!==26)break}return Re},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(Re){return this.negative!==0?this.abs().inotn(Re).iaddn(1):this.clone()},ue.prototype.fromTwos=function(Re){return this.testn(Re-1)?this.notn(Re).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(Re){for(;this.length<Re.length;)this.words[this.length++]=0;for(var Ie=0;Ie<Re.length;Ie++)this.words[Ie]=this.words[Ie]|Re.words[Ie];return this._strip()},ue.prototype.ior=function(Re){return oe((this.negative|Re.negative)===0),this.iuor(Re)},ue.prototype.or=function(Re){return this.length>Re.length?this.clone().ior(Re):Re.clone().ior(this)},ue.prototype.uor=function(Re){return this.length>Re.length?this.clone().iuor(Re):Re.clone().iuor(this)},ue.prototype.iuand=function(Re){var Ie;this.length>Re.length?Ie=Re:Ie=this;for(var Fe=0;Fe<Ie.length;Fe++)this.words[Fe]=this.words[Fe]&Re.words[Fe];return this.length=Ie.length,this._strip()},ue.prototype.iand=function(Re){return oe((this.negative|Re.negative)===0),this.iuand(Re)},ue.prototype.and=function(Re){return this.length>Re.length?this.clone().iand(Re):Re.clone().iand(this)},ue.prototype.uand=function(Re){return this.length>Re.length?this.clone().iuand(Re):Re.clone().iuand(this)},ue.prototype.iuxor=function(Re){var Ie,Fe;this.length>Re.length?(Ie=this,Fe=Re):(Ie=Re,Fe=this);for(var qe=0;qe<Fe.length;qe++)this.words[qe]=Ie.words[qe]^Fe.words[qe];if(this!==Ie)for(;qe<Ie.length;qe++)this.words[qe]=Ie.words[qe];return this.length=Ie.length,this._strip()},ue.prototype.ixor=function(Re){return oe((this.negative|Re.negative)===0),this.iuxor(Re)},ue.prototype.xor=function(Re){return this.length>Re.length?this.clone().ixor(Re):Re.clone().ixor(this)},ue.prototype.uxor=function(Re){return this.length>Re.length?this.clone().iuxor(Re):Re.clone().iuxor(this)},ue.prototype.inotn=function(Re){oe(typeof Re=="number"&&Re>=0);var Ie=Math.ceil(Re/26)|0,Fe=Re%26;this._expand(Ie),Fe>0&&Ie--;for(var qe=0;qe<Ie;qe++)this.words[qe]=~this.words[qe]&67108863;return Fe>0&&(this.words[qe]=~this.words[qe]&67108863>>26-Fe),this._strip()},ue.prototype.notn=function(Re){return this.clone().inotn(Re)},ue.prototype.setn=function(Re,Ie){oe(typeof Re=="number"&&Re>=0);var Fe=Re/26|0,qe=Re%26;return this._expand(Fe+1),Ie?this.words[Fe]=this.words[Fe]|1<<qe:this.words[Fe]=this.words[Fe]&~(1<<qe),this._strip()},ue.prototype.iadd=function(Re){var Ie;if(this.negative!==0&&Re.negative===0)return this.negative=0,Ie=this.isub(Re),this.negative^=1,this._normSign();if(this.negative===0&&Re.negative!==0)return Re.negative=0,Ie=this.isub(Re),Re.negative=1,Ie._normSign();var Fe,qe;this.length>Re.length?(Fe=this,qe=Re):(Fe=Re,qe=this);for(var We=0,Ue=0;Ue<qe.length;Ue++)Ie=(Fe.words[Ue]|0)+(qe.words[Ue]|0)+We,this.words[Ue]=Ie&67108863,We=Ie>>>26;for(;We!==0&&Ue<Fe.length;Ue++)Ie=(Fe.words[Ue]|0)+We,this.words[Ue]=Ie&67108863,We=Ie>>>26;if(this.length=Fe.length,We!==0)this.words[this.length]=We,this.length++;else if(Fe!==this)for(;Ue<Fe.length;Ue++)this.words[Ue]=Fe.words[Ue];return this},ue.prototype.add=function(Re){var Ie;return Re.negative!==0&&this.negative===0?(Re.negative=0,Ie=this.sub(Re),Re.negative^=1,Ie):Re.negative===0&&this.negative!==0?(this.negative=0,Ie=Re.sub(this),this.negative=1,Ie):this.length>Re.length?this.clone().iadd(Re):Re.clone().iadd(this)},ue.prototype.isub=function(Re){if(Re.negative!==0){Re.negative=0;var Ie=this.iadd(Re);return Re.negative=1,Ie._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Re),this.negative=1,this._normSign();var Fe=this.cmp(Re);if(Fe===0)return this.negative=0,this.length=1,this.words[0]=0,this;var qe,We;Fe>0?(qe=this,We=Re):(qe=Re,We=this);for(var Ue=0,_e=0;_e<We.length;_e++)Ie=(qe.words[_e]|0)-(We.words[_e]|0)+Ue,Ue=Ie>>26,this.words[_e]=Ie&67108863;for(;Ue!==0&&_e<qe.length;_e++)Ie=(qe.words[_e]|0)+Ue,Ue=Ie>>26,this.words[_e]=Ie&67108863;if(Ue===0&&_e<qe.length&&qe!==this)for(;_e<qe.length;_e++)this.words[_e]=qe.words[_e];return this.length=Math.max(this.length,_e),qe!==this&&(this.negative=1),this._strip()},ue.prototype.sub=function(Re){return this.clone().isub(Re)};function je(Be,Re,Ie){Ie.negative=Re.negative^Be.negative;var Fe=Be.length+Re.length|0;Ie.length=Fe,Fe=Fe-1|0;var qe=Be.words[0]|0,We=Re.words[0]|0,Ue=qe*We,_e=Ue&67108863,Qe=Ue/67108864|0;Ie.words[0]=_e;for(var tt=1;tt<Fe;tt++){for(var it=Qe>>>26,at=Qe&67108863,ot=Math.min(tt,Re.length-1),lt=Math.max(0,tt-Be.length+1);lt<=ot;lt++){var st=tt-lt|0;qe=Be.words[st]|0,We=Re.words[lt]|0,Ue=qe*We+at,it+=Ue/67108864|0,at=Ue&67108863}Ie.words[tt]=at|0,Qe=it|0}return Qe!==0?Ie.words[tt]=Qe|0:Ie.length--,Ie._strip()}var Ke=function(Re,Ie,Fe){var qe=Re.words,We=Ie.words,Ue=Fe.words,_e=0,Qe,tt,it,at=qe[0]|0,ot=at&8191,lt=at>>>13,st=qe[1]|0,ut=st&8191,ft=st>>>13,dt=qe[2]|0,Bt=dt&8191,pt=dt>>>13,mt=qe[3]|0,bt=mt&8191,xt=mt>>>13,yt=qe[4]|0,It=yt&8191,ht=yt>>>13,gt=qe[5]|0,Pt=gt&8191,wt=gt>>>13,St=qe[6]|0,Zt=St&8191,Ct=St>>>13,Rt=qe[7]|0,dr=Rt&8191,Dt=Rt>>>13,Tt=qe[8]|0,or=Tt&8191,Mt=Tt>>>13,kt=qe[9]|0,ur=kt&8191,$t=kt>>>13,jt=We[0]|0,nr=jt&8191,Ot=jt>>>13,Lt=We[1]|0,lr=Lt&8191,Ht=Lt>>>13,qt=We[2]|0,tr=qt&8191,Vt=qt>>>13,Gt=We[3]|0,br=Gt&8191,Yt=Gt>>>13,Kt=We[4]|0,yr=Kt&8191,zt=Kt>>>13,Jt=We[5]|0,xr=Jt&8191,Xt=Jt>>>13,ir=We[6]|0,Mr=ir&8191,er=ir>>>13,fr=We[7]|0,Qr=fr&8191,sr=fr>>>13,Ar=We[8]|0,Kr=Ar&8191,ar=Ar>>>13,hr=We[9]|0,Lr=hr&8191,Pr=hr>>>13;Fe.negative=Re.negative^Ie.negative,Fe.length=19,Qe=Math.imul(ot,nr),tt=Math.imul(ot,Ot),tt=tt+Math.imul(lt,nr)|0,it=Math.imul(lt,Ot);var Yr=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,Qe=Math.imul(ut,nr),tt=Math.imul(ut,Ot),tt=tt+Math.imul(ft,nr)|0,it=Math.imul(ft,Ot),Qe=Qe+Math.imul(ot,lr)|0,tt=tt+Math.imul(ot,Ht)|0,tt=tt+Math.imul(lt,lr)|0,it=it+Math.imul(lt,Ht)|0;var Wr=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,Qe=Math.imul(Bt,nr),tt=Math.imul(Bt,Ot),tt=tt+Math.imul(pt,nr)|0,it=Math.imul(pt,Ot),Qe=Qe+Math.imul(ut,lr)|0,tt=tt+Math.imul(ut,Ht)|0,tt=tt+Math.imul(ft,lr)|0,it=it+Math.imul(ft,Ht)|0,Qe=Qe+Math.imul(ot,tr)|0,tt=tt+Math.imul(ot,Vt)|0,tt=tt+Math.imul(lt,tr)|0,it=it+Math.imul(lt,Vt)|0;var Zr=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,Qe=Math.imul(bt,nr),tt=Math.imul(bt,Ot),tt=tt+Math.imul(xt,nr)|0,it=Math.imul(xt,Ot),Qe=Qe+Math.imul(Bt,lr)|0,tt=tt+Math.imul(Bt,Ht)|0,tt=tt+Math.imul(pt,lr)|0,it=it+Math.imul(pt,Ht)|0,Qe=Qe+Math.imul(ut,tr)|0,tt=tt+Math.imul(ut,Vt)|0,tt=tt+Math.imul(ft,tr)|0,it=it+Math.imul(ft,Vt)|0,Qe=Qe+Math.imul(ot,br)|0,tt=tt+Math.imul(ot,Yt)|0,tt=tt+Math.imul(lt,br)|0,it=it+Math.imul(lt,Yt)|0;var Jr=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,Qe=Math.imul(It,nr),tt=Math.imul(It,Ot),tt=tt+Math.imul(ht,nr)|0,it=Math.imul(ht,Ot),Qe=Qe+Math.imul(bt,lr)|0,tt=tt+Math.imul(bt,Ht)|0,tt=tt+Math.imul(xt,lr)|0,it=it+Math.imul(xt,Ht)|0,Qe=Qe+Math.imul(Bt,tr)|0,tt=tt+Math.imul(Bt,Vt)|0,tt=tt+Math.imul(pt,tr)|0,it=it+Math.imul(pt,Vt)|0,Qe=Qe+Math.imul(ut,br)|0,tt=tt+Math.imul(ut,Yt)|0,tt=tt+Math.imul(ft,br)|0,it=it+Math.imul(ft,Yt)|0,Qe=Qe+Math.imul(ot,yr)|0,tt=tt+Math.imul(ot,zt)|0,tt=tt+Math.imul(lt,yr)|0,it=it+Math.imul(lt,zt)|0;var Gr=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,Qe=Math.imul(Pt,nr),tt=Math.imul(Pt,Ot),tt=tt+Math.imul(wt,nr)|0,it=Math.imul(wt,Ot),Qe=Qe+Math.imul(It,lr)|0,tt=tt+Math.imul(It,Ht)|0,tt=tt+Math.imul(ht,lr)|0,it=it+Math.imul(ht,Ht)|0,Qe=Qe+Math.imul(bt,tr)|0,tt=tt+Math.imul(bt,Vt)|0,tt=tt+Math.imul(xt,tr)|0,it=it+Math.imul(xt,Vt)|0,Qe=Qe+Math.imul(Bt,br)|0,tt=tt+Math.imul(Bt,Yt)|0,tt=tt+Math.imul(pt,br)|0,it=it+Math.imul(pt,Yt)|0,Qe=Qe+Math.imul(ut,yr)|0,tt=tt+Math.imul(ut,zt)|0,tt=tt+Math.imul(ft,yr)|0,it=it+Math.imul(ft,zt)|0,Qe=Qe+Math.imul(ot,xr)|0,tt=tt+Math.imul(ot,Xt)|0,tt=tt+Math.imul(lt,xr)|0,it=it+Math.imul(lt,Xt)|0;var sn=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(sn>>>26)|0,sn&=67108863,Qe=Math.imul(Zt,nr),tt=Math.imul(Zt,Ot),tt=tt+Math.imul(Ct,nr)|0,it=Math.imul(Ct,Ot),Qe=Qe+Math.imul(Pt,lr)|0,tt=tt+Math.imul(Pt,Ht)|0,tt=tt+Math.imul(wt,lr)|0,it=it+Math.imul(wt,Ht)|0,Qe=Qe+Math.imul(It,tr)|0,tt=tt+Math.imul(It,Vt)|0,tt=tt+Math.imul(ht,tr)|0,it=it+Math.imul(ht,Vt)|0,Qe=Qe+Math.imul(bt,br)|0,tt=tt+Math.imul(bt,Yt)|0,tt=tt+Math.imul(xt,br)|0,it=it+Math.imul(xt,Yt)|0,Qe=Qe+Math.imul(Bt,yr)|0,tt=tt+Math.imul(Bt,zt)|0,tt=tt+Math.imul(pt,yr)|0,it=it+Math.imul(pt,zt)|0,Qe=Qe+Math.imul(ut,xr)|0,tt=tt+Math.imul(ut,Xt)|0,tt=tt+Math.imul(ft,xr)|0,it=it+Math.imul(ft,Xt)|0,Qe=Qe+Math.imul(ot,Mr)|0,tt=tt+Math.imul(ot,er)|0,tt=tt+Math.imul(lt,Mr)|0,it=it+Math.imul(lt,er)|0;var ln=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(ln>>>26)|0,ln&=67108863,Qe=Math.imul(dr,nr),tt=Math.imul(dr,Ot),tt=tt+Math.imul(Dt,nr)|0,it=Math.imul(Dt,Ot),Qe=Qe+Math.imul(Zt,lr)|0,tt=tt+Math.imul(Zt,Ht)|0,tt=tt+Math.imul(Ct,lr)|0,it=it+Math.imul(Ct,Ht)|0,Qe=Qe+Math.imul(Pt,tr)|0,tt=tt+Math.imul(Pt,Vt)|0,tt=tt+Math.imul(wt,tr)|0,it=it+Math.imul(wt,Vt)|0,Qe=Qe+Math.imul(It,br)|0,tt=tt+Math.imul(It,Yt)|0,tt=tt+Math.imul(ht,br)|0,it=it+Math.imul(ht,Yt)|0,Qe=Qe+Math.imul(bt,yr)|0,tt=tt+Math.imul(bt,zt)|0,tt=tt+Math.imul(xt,yr)|0,it=it+Math.imul(xt,zt)|0,Qe=Qe+Math.imul(Bt,xr)|0,tt=tt+Math.imul(Bt,Xt)|0,tt=tt+Math.imul(pt,xr)|0,it=it+Math.imul(pt,Xt)|0,Qe=Qe+Math.imul(ut,Mr)|0,tt=tt+Math.imul(ut,er)|0,tt=tt+Math.imul(ft,Mr)|0,it=it+Math.imul(ft,er)|0,Qe=Qe+Math.imul(ot,Qr)|0,tt=tt+Math.imul(ot,sr)|0,tt=tt+Math.imul(lt,Qr)|0,it=it+Math.imul(lt,sr)|0;var hn=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(hn>>>26)|0,hn&=67108863,Qe=Math.imul(or,nr),tt=Math.imul(or,Ot),tt=tt+Math.imul(Mt,nr)|0,it=Math.imul(Mt,Ot),Qe=Qe+Math.imul(dr,lr)|0,tt=tt+Math.imul(dr,Ht)|0,tt=tt+Math.imul(Dt,lr)|0,it=it+Math.imul(Dt,Ht)|0,Qe=Qe+Math.imul(Zt,tr)|0,tt=tt+Math.imul(Zt,Vt)|0,tt=tt+Math.imul(Ct,tr)|0,it=it+Math.imul(Ct,Vt)|0,Qe=Qe+Math.imul(Pt,br)|0,tt=tt+Math.imul(Pt,Yt)|0,tt=tt+Math.imul(wt,br)|0,it=it+Math.imul(wt,Yt)|0,Qe=Qe+Math.imul(It,yr)|0,tt=tt+Math.imul(It,zt)|0,tt=tt+Math.imul(ht,yr)|0,it=it+Math.imul(ht,zt)|0,Qe=Qe+Math.imul(bt,xr)|0,tt=tt+Math.imul(bt,Xt)|0,tt=tt+Math.imul(xt,xr)|0,it=it+Math.imul(xt,Xt)|0,Qe=Qe+Math.imul(Bt,Mr)|0,tt=tt+Math.imul(Bt,er)|0,tt=tt+Math.imul(pt,Mr)|0,it=it+Math.imul(pt,er)|0,Qe=Qe+Math.imul(ut,Qr)|0,tt=tt+Math.imul(ut,sr)|0,tt=tt+Math.imul(ft,Qr)|0,it=it+Math.imul(ft,sr)|0,Qe=Qe+Math.imul(ot,Kr)|0,tt=tt+Math.imul(ot,ar)|0,tt=tt+Math.imul(lt,Kr)|0,it=it+Math.imul(lt,ar)|0;var pn=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(pn>>>26)|0,pn&=67108863,Qe=Math.imul(ur,nr),tt=Math.imul(ur,Ot),tt=tt+Math.imul($t,nr)|0,it=Math.imul($t,Ot),Qe=Qe+Math.imul(or,lr)|0,tt=tt+Math.imul(or,Ht)|0,tt=tt+Math.imul(Mt,lr)|0,it=it+Math.imul(Mt,Ht)|0,Qe=Qe+Math.imul(dr,tr)|0,tt=tt+Math.imul(dr,Vt)|0,tt=tt+Math.imul(Dt,tr)|0,it=it+Math.imul(Dt,Vt)|0,Qe=Qe+Math.imul(Zt,br)|0,tt=tt+Math.imul(Zt,Yt)|0,tt=tt+Math.imul(Ct,br)|0,it=it+Math.imul(Ct,Yt)|0,Qe=Qe+Math.imul(Pt,yr)|0,tt=tt+Math.imul(Pt,zt)|0,tt=tt+Math.imul(wt,yr)|0,it=it+Math.imul(wt,zt)|0,Qe=Qe+Math.imul(It,xr)|0,tt=tt+Math.imul(It,Xt)|0,tt=tt+Math.imul(ht,xr)|0,it=it+Math.imul(ht,Xt)|0,Qe=Qe+Math.imul(bt,Mr)|0,tt=tt+Math.imul(bt,er)|0,tt=tt+Math.imul(xt,Mr)|0,it=it+Math.imul(xt,er)|0,Qe=Qe+Math.imul(Bt,Qr)|0,tt=tt+Math.imul(Bt,sr)|0,tt=tt+Math.imul(pt,Qr)|0,it=it+Math.imul(pt,sr)|0,Qe=Qe+Math.imul(ut,Kr)|0,tt=tt+Math.imul(ut,ar)|0,tt=tt+Math.imul(ft,Kr)|0,it=it+Math.imul(ft,ar)|0,Qe=Qe+Math.imul(ot,Lr)|0,tt=tt+Math.imul(ot,Pr)|0,tt=tt+Math.imul(lt,Lr)|0,it=it+Math.imul(lt,Pr)|0;var Xr=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,Qe=Math.imul(ur,lr),tt=Math.imul(ur,Ht),tt=tt+Math.imul($t,lr)|0,it=Math.imul($t,Ht),Qe=Qe+Math.imul(or,tr)|0,tt=tt+Math.imul(or,Vt)|0,tt=tt+Math.imul(Mt,tr)|0,it=it+Math.imul(Mt,Vt)|0,Qe=Qe+Math.imul(dr,br)|0,tt=tt+Math.imul(dr,Yt)|0,tt=tt+Math.imul(Dt,br)|0,it=it+Math.imul(Dt,Yt)|0,Qe=Qe+Math.imul(Zt,yr)|0,tt=tt+Math.imul(Zt,zt)|0,tt=tt+Math.imul(Ct,yr)|0,it=it+Math.imul(Ct,zt)|0,Qe=Qe+Math.imul(Pt,xr)|0,tt=tt+Math.imul(Pt,Xt)|0,tt=tt+Math.imul(wt,xr)|0,it=it+Math.imul(wt,Xt)|0,Qe=Qe+Math.imul(It,Mr)|0,tt=tt+Math.imul(It,er)|0,tt=tt+Math.imul(ht,Mr)|0,it=it+Math.imul(ht,er)|0,Qe=Qe+Math.imul(bt,Qr)|0,tt=tt+Math.imul(bt,sr)|0,tt=tt+Math.imul(xt,Qr)|0,it=it+Math.imul(xt,sr)|0,Qe=Qe+Math.imul(Bt,Kr)|0,tt=tt+Math.imul(Bt,ar)|0,tt=tt+Math.imul(pt,Kr)|0,it=it+Math.imul(pt,ar)|0,Qe=Qe+Math.imul(ut,Lr)|0,tt=tt+Math.imul(ut,Pr)|0,tt=tt+Math.imul(ft,Lr)|0,it=it+Math.imul(ft,Pr)|0;var yn=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(yn>>>26)|0,yn&=67108863,Qe=Math.imul(ur,tr),tt=Math.imul(ur,Vt),tt=tt+Math.imul($t,tr)|0,it=Math.imul($t,Vt),Qe=Qe+Math.imul(or,br)|0,tt=tt+Math.imul(or,Yt)|0,tt=tt+Math.imul(Mt,br)|0,it=it+Math.imul(Mt,Yt)|0,Qe=Qe+Math.imul(dr,yr)|0,tt=tt+Math.imul(dr,zt)|0,tt=tt+Math.imul(Dt,yr)|0,it=it+Math.imul(Dt,zt)|0,Qe=Qe+Math.imul(Zt,xr)|0,tt=tt+Math.imul(Zt,Xt)|0,tt=tt+Math.imul(Ct,xr)|0,it=it+Math.imul(Ct,Xt)|0,Qe=Qe+Math.imul(Pt,Mr)|0,tt=tt+Math.imul(Pt,er)|0,tt=tt+Math.imul(wt,Mr)|0,it=it+Math.imul(wt,er)|0,Qe=Qe+Math.imul(It,Qr)|0,tt=tt+Math.imul(It,sr)|0,tt=tt+Math.imul(ht,Qr)|0,it=it+Math.imul(ht,sr)|0,Qe=Qe+Math.imul(bt,Kr)|0,tt=tt+Math.imul(bt,ar)|0,tt=tt+Math.imul(xt,Kr)|0,it=it+Math.imul(xt,ar)|0,Qe=Qe+Math.imul(Bt,Lr)|0,tt=tt+Math.imul(Bt,Pr)|0,tt=tt+Math.imul(pt,Lr)|0,it=it+Math.imul(pt,Pr)|0;var xn=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(xn>>>26)|0,xn&=67108863,Qe=Math.imul(ur,br),tt=Math.imul(ur,Yt),tt=tt+Math.imul($t,br)|0,it=Math.imul($t,Yt),Qe=Qe+Math.imul(or,yr)|0,tt=tt+Math.imul(or,zt)|0,tt=tt+Math.imul(Mt,yr)|0,it=it+Math.imul(Mt,zt)|0,Qe=Qe+Math.imul(dr,xr)|0,tt=tt+Math.imul(dr,Xt)|0,tt=tt+Math.imul(Dt,xr)|0,it=it+Math.imul(Dt,Xt)|0,Qe=Qe+Math.imul(Zt,Mr)|0,tt=tt+Math.imul(Zt,er)|0,tt=tt+Math.imul(Ct,Mr)|0,it=it+Math.imul(Ct,er)|0,Qe=Qe+Math.imul(Pt,Qr)|0,tt=tt+Math.imul(Pt,sr)|0,tt=tt+Math.imul(wt,Qr)|0,it=it+Math.imul(wt,sr)|0,Qe=Qe+Math.imul(It,Kr)|0,tt=tt+Math.imul(It,ar)|0,tt=tt+Math.imul(ht,Kr)|0,it=it+Math.imul(ht,ar)|0,Qe=Qe+Math.imul(bt,Lr)|0,tt=tt+Math.imul(bt,Pr)|0,tt=tt+Math.imul(xt,Lr)|0,it=it+Math.imul(xt,Pr)|0;var dn=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(dn>>>26)|0,dn&=67108863,Qe=Math.imul(ur,yr),tt=Math.imul(ur,zt),tt=tt+Math.imul($t,yr)|0,it=Math.imul($t,zt),Qe=Qe+Math.imul(or,xr)|0,tt=tt+Math.imul(or,Xt)|0,tt=tt+Math.imul(Mt,xr)|0,it=it+Math.imul(Mt,Xt)|0,Qe=Qe+Math.imul(dr,Mr)|0,tt=tt+Math.imul(dr,er)|0,tt=tt+Math.imul(Dt,Mr)|0,it=it+Math.imul(Dt,er)|0,Qe=Qe+Math.imul(Zt,Qr)|0,tt=tt+Math.imul(Zt,sr)|0,tt=tt+Math.imul(Ct,Qr)|0,it=it+Math.imul(Ct,sr)|0,Qe=Qe+Math.imul(Pt,Kr)|0,tt=tt+Math.imul(Pt,ar)|0,tt=tt+Math.imul(wt,Kr)|0,it=it+Math.imul(wt,ar)|0,Qe=Qe+Math.imul(It,Lr)|0,tt=tt+Math.imul(It,Pr)|0,tt=tt+Math.imul(ht,Lr)|0,it=it+Math.imul(ht,Pr)|0;var cn=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(cn>>>26)|0,cn&=67108863,Qe=Math.imul(ur,xr),tt=Math.imul(ur,Xt),tt=tt+Math.imul($t,xr)|0,it=Math.imul($t,Xt),Qe=Qe+Math.imul(or,Mr)|0,tt=tt+Math.imul(or,er)|0,tt=tt+Math.imul(Mt,Mr)|0,it=it+Math.imul(Mt,er)|0,Qe=Qe+Math.imul(dr,Qr)|0,tt=tt+Math.imul(dr,sr)|0,tt=tt+Math.imul(Dt,Qr)|0,it=it+Math.imul(Dt,sr)|0,Qe=Qe+Math.imul(Zt,Kr)|0,tt=tt+Math.imul(Zt,ar)|0,tt=tt+Math.imul(Ct,Kr)|0,it=it+Math.imul(Ct,ar)|0,Qe=Qe+Math.imul(Pt,Lr)|0,tt=tt+Math.imul(Pt,Pr)|0,tt=tt+Math.imul(wt,Lr)|0,it=it+Math.imul(wt,Pr)|0;var wn=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(wn>>>26)|0,wn&=67108863,Qe=Math.imul(ur,Mr),tt=Math.imul(ur,er),tt=tt+Math.imul($t,Mr)|0,it=Math.imul($t,er),Qe=Qe+Math.imul(or,Qr)|0,tt=tt+Math.imul(or,sr)|0,tt=tt+Math.imul(Mt,Qr)|0,it=it+Math.imul(Mt,sr)|0,Qe=Qe+Math.imul(dr,Kr)|0,tt=tt+Math.imul(dr,ar)|0,tt=tt+Math.imul(Dt,Kr)|0,it=it+Math.imul(Dt,ar)|0,Qe=Qe+Math.imul(Zt,Lr)|0,tt=tt+Math.imul(Zt,Pr)|0,tt=tt+Math.imul(Ct,Lr)|0,it=it+Math.imul(Ct,Pr)|0;var Cn=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Qe=Math.imul(ur,Qr),tt=Math.imul(ur,sr),tt=tt+Math.imul($t,Qr)|0,it=Math.imul($t,sr),Qe=Qe+Math.imul(or,Kr)|0,tt=tt+Math.imul(or,ar)|0,tt=tt+Math.imul(Mt,Kr)|0,it=it+Math.imul(Mt,ar)|0,Qe=Qe+Math.imul(dr,Lr)|0,tt=tt+Math.imul(dr,Pr)|0,tt=tt+Math.imul(Dt,Lr)|0,it=it+Math.imul(Dt,Pr)|0;var Rr=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,Qe=Math.imul(ur,Kr),tt=Math.imul(ur,ar),tt=tt+Math.imul($t,Kr)|0,it=Math.imul($t,ar),Qe=Qe+Math.imul(or,Lr)|0,tt=tt+Math.imul(or,Pr)|0,tt=tt+Math.imul(Mt,Lr)|0,it=it+Math.imul(Mt,Pr)|0;var Rn=(_e+Qe|0)+((tt&8191)<<13)|0;_e=(it+(tt>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Qe=Math.imul(ur,Lr),tt=Math.imul(ur,Pr),tt=tt+Math.imul($t,Lr)|0,it=Math.imul($t,Pr);var gn=(_e+Qe|0)+((tt&8191)<<13)|0;return _e=(it+(tt>>>13)|0)+(gn>>>26)|0,gn&=67108863,Ue[0]=Yr,Ue[1]=Wr,Ue[2]=Zr,Ue[3]=Jr,Ue[4]=Gr,Ue[5]=sn,Ue[6]=ln,Ue[7]=hn,Ue[8]=pn,Ue[9]=Xr,Ue[10]=yn,Ue[11]=xn,Ue[12]=dn,Ue[13]=cn,Ue[14]=wn,Ue[15]=Cn,Ue[16]=Rr,Ue[17]=Rn,Ue[18]=gn,_e!==0&&(Ue[19]=_e,Fe.length++),Fe};Math.imul||(Ke=je);function Ye(Be,Re,Ie){Ie.negative=Re.negative^Be.negative,Ie.length=Be.length+Re.length;for(var Fe=0,qe=0,We=0;We<Ie.length-1;We++){var Ue=qe;qe=0;for(var _e=Fe&67108863,Qe=Math.min(We,Re.length-1),tt=Math.max(0,We-Be.length+1);tt<=Qe;tt++){var it=We-tt,at=Be.words[it]|0,ot=Re.words[tt]|0,lt=at*ot,st=lt&67108863;Ue=Ue+(lt/67108864|0)|0,st=st+_e|0,_e=st&67108863,Ue=Ue+(st>>>26)|0,qe+=Ue>>>26,Ue&=67108863}Ie.words[We]=_e,Fe=Ue,Ue=qe}return Fe!==0?Ie.words[We]=Fe:Ie.length--,Ie._strip()}function ze(Be,Re,Ie){return Ye(Be,Re,Ie)}ue.prototype.mulTo=function(Re,Ie){var Fe,qe=this.length+Re.length;return this.length===10&&Re.length===10?Fe=Ke(this,Re,Ie):qe<63?Fe=je(this,Re,Ie):qe<1024?Fe=Ye(this,Re,Ie):Fe=ze(this,Re,Ie),Fe},ue.prototype.mul=function(Re){var Ie=new ue(null);return Ie.words=new Array(this.length+Re.length),this.mulTo(Re,Ie)},ue.prototype.mulf=function(Re){var Ie=new ue(null);return Ie.words=new Array(this.length+Re.length),ze(this,Re,Ie)},ue.prototype.imul=function(Re){return this.clone().mulTo(Re,this)},ue.prototype.imuln=function(Re){var Ie=Re<0;Ie&&(Re=-Re),oe(typeof Re=="number"),oe(Re<67108864);for(var Fe=0,qe=0;qe<this.length;qe++){var We=(this.words[qe]|0)*Re,Ue=(We&67108863)+(Fe&67108863);Fe>>=26,Fe+=We/67108864|0,Fe+=Ue>>>26,this.words[qe]=Ue&67108863}return Fe!==0&&(this.words[qe]=Fe,this.length++),Ie?this.ineg():this},ue.prototype.muln=function(Re){return this.clone().imuln(Re)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(Re){var Ie=ke(Re);if(Ie.length===0)return new ue(1);for(var Fe=this,qe=0;qe<Ie.length&&Ie[qe]===0;qe++,Fe=Fe.sqr());if(++qe<Ie.length)for(var We=Fe.sqr();qe<Ie.length;qe++,We=We.sqr())Ie[qe]!==0&&(Fe=Fe.mul(We));return Fe},ue.prototype.iushln=function(Re){oe(typeof Re=="number"&&Re>=0);var Ie=Re%26,Fe=(Re-Ie)/26,qe=67108863>>>26-Ie<<26-Ie,We;if(Ie!==0){var Ue=0;for(We=0;We<this.length;We++){var _e=this.words[We]&qe,Qe=(this.words[We]|0)-_e<<Ie;this.words[We]=Qe|Ue,Ue=_e>>>26-Ie}Ue&&(this.words[We]=Ue,this.length++)}if(Fe!==0){for(We=this.length-1;We>=0;We--)this.words[We+Fe]=this.words[We];for(We=0;We<Fe;We++)this.words[We]=0;this.length+=Fe}return this._strip()},ue.prototype.ishln=function(Re){return oe(this.negative===0),this.iushln(Re)},ue.prototype.iushrn=function(Re,Ie,Fe){oe(typeof Re=="number"&&Re>=0);var qe;Ie?qe=(Ie-Ie%26)/26:qe=0;var We=Re%26,Ue=Math.min((Re-We)/26,this.length),_e=67108863^67108863>>>We<<We,Qe=Fe;if(qe-=Ue,qe=Math.max(0,qe),Qe){for(var tt=0;tt<Ue;tt++)Qe.words[tt]=this.words[tt];Qe.length=Ue}if(Ue!==0)if(this.length>Ue)for(this.length-=Ue,tt=0;tt<this.length;tt++)this.words[tt]=this.words[tt+Ue];else this.words[0]=0,this.length=1;var it=0;for(tt=this.length-1;tt>=0&&(it!==0||tt>=qe);tt--){var at=this.words[tt]|0;this.words[tt]=it<<26-We|at>>>We,it=at&_e}return Qe&&it!==0&&(Qe.words[Qe.length++]=it),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},ue.prototype.ishrn=function(Re,Ie,Fe){return oe(this.negative===0),this.iushrn(Re,Ie,Fe)},ue.prototype.shln=function(Re){return this.clone().ishln(Re)},ue.prototype.ushln=function(Re){return this.clone().iushln(Re)},ue.prototype.shrn=function(Re){return this.clone().ishrn(Re)},ue.prototype.ushrn=function(Re){return this.clone().iushrn(Re)},ue.prototype.testn=function(Re){oe(typeof Re=="number"&&Re>=0);var Ie=Re%26,Fe=(Re-Ie)/26,qe=1<<Ie;if(this.length<=Fe)return!1;var We=this.words[Fe];return!!(We&qe)},ue.prototype.imaskn=function(Re){oe(typeof Re=="number"&&Re>=0);var Ie=Re%26,Fe=(Re-Ie)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Fe)return this;if(Ie!==0&&Fe++,this.length=Math.min(Fe,this.length),Ie!==0){var qe=67108863^67108863>>>Ie<<Ie;this.words[this.length-1]&=qe}return this._strip()},ue.prototype.maskn=function(Re){return this.clone().imaskn(Re)},ue.prototype.iaddn=function(Re){return oe(typeof Re=="number"),oe(Re<67108864),Re<0?this.isubn(-Re):this.negative!==0?this.length===1&&(this.words[0]|0)<=Re?(this.words[0]=Re-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Re),this.negative=1,this):this._iaddn(Re)},ue.prototype._iaddn=function(Re){this.words[0]+=Re;for(var Ie=0;Ie<this.length&&this.words[Ie]>=67108864;Ie++)this.words[Ie]-=67108864,Ie===this.length-1?this.words[Ie+1]=1:this.words[Ie+1]++;return this.length=Math.max(this.length,Ie+1),this},ue.prototype.isubn=function(Re){if(oe(typeof Re=="number"),oe(Re<67108864),Re<0)return this.iaddn(-Re);if(this.negative!==0)return this.negative=0,this.iaddn(Re),this.negative=1,this;if(this.words[0]-=Re,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Ie=0;Ie<this.length&&this.words[Ie]<0;Ie++)this.words[Ie]+=67108864,this.words[Ie+1]-=1;return this._strip()},ue.prototype.addn=function(Re){return this.clone().iaddn(Re)},ue.prototype.subn=function(Re){return this.clone().isubn(Re)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(Re,Ie,Fe){var qe=Re.length+Fe,We;this._expand(qe);var Ue,_e=0;for(We=0;We<Re.length;We++){Ue=(this.words[We+Fe]|0)+_e;var Qe=(Re.words[We]|0)*Ie;Ue-=Qe&67108863,_e=(Ue>>26)-(Qe/67108864|0),this.words[We+Fe]=Ue&67108863}for(;We<this.length-Fe;We++)Ue=(this.words[We+Fe]|0)+_e,_e=Ue>>26,this.words[We+Fe]=Ue&67108863;if(_e===0)return this._strip();for(oe(_e===-1),_e=0,We=0;We<this.length;We++)Ue=-(this.words[We]|0)+_e,_e=Ue>>26,this.words[We]=Ue&67108863;return this.negative=1,this._strip()},ue.prototype._wordDiv=function(Re,Ie){var Fe=this.length-Re.length,qe=this.clone(),We=Re,Ue=We.words[We.length-1]|0,_e=this._countBits(Ue);Fe=26-_e,Fe!==0&&(We=We.ushln(Fe),qe.iushln(Fe),Ue=We.words[We.length-1]|0);var Qe=qe.length-We.length,tt;if(Ie!=="mod"){tt=new ue(null),tt.length=Qe+1,tt.words=new Array(tt.length);for(var it=0;it<tt.length;it++)tt.words[it]=0}var at=qe.clone()._ishlnsubmul(We,1,Qe);at.negative===0&&(qe=at,tt&&(tt.words[Qe]=1));for(var ot=Qe-1;ot>=0;ot--){var lt=(qe.words[We.length+ot]|0)*67108864+(qe.words[We.length+ot-1]|0);for(lt=Math.min(lt/Ue|0,67108863),qe._ishlnsubmul(We,lt,ot);qe.negative!==0;)lt--,qe.negative=0,qe._ishlnsubmul(We,1,ot),qe.isZero()||(qe.negative^=1);tt&&(tt.words[ot]=lt)}return tt&&tt._strip(),qe._strip(),Ie!=="div"&&Fe!==0&&qe.iushrn(Fe),{div:tt||null,mod:qe}},ue.prototype.divmod=function(Re,Ie,Fe){if(oe(!Re.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var qe,We,Ue;return this.negative!==0&&Re.negative===0?(Ue=this.neg().divmod(Re,Ie),Ie!=="mod"&&(qe=Ue.div.neg()),Ie!=="div"&&(We=Ue.mod.neg(),Fe&&We.negative!==0&&We.iadd(Re)),{div:qe,mod:We}):this.negative===0&&Re.negative!==0?(Ue=this.divmod(Re.neg(),Ie),Ie!=="mod"&&(qe=Ue.div.neg()),{div:qe,mod:Ue.mod}):this.negative&Re.negative?(Ue=this.neg().divmod(Re.neg(),Ie),Ie!=="div"&&(We=Ue.mod.neg(),Fe&&We.negative!==0&&We.isub(Re)),{div:Ue.div,mod:We}):Re.length>this.length||this.cmp(Re)<0?{div:new ue(0),mod:this}:Re.length===1?Ie==="div"?{div:this.divn(Re.words[0]),mod:null}:Ie==="mod"?{div:null,mod:new ue(this.modrn(Re.words[0]))}:{div:this.divn(Re.words[0]),mod:new ue(this.modrn(Re.words[0]))}:this._wordDiv(Re,Ie)},ue.prototype.div=function(Re){return this.divmod(Re,"div",!1).div},ue.prototype.mod=function(Re){return this.divmod(Re,"mod",!1).mod},ue.prototype.umod=function(Re){return this.divmod(Re,"mod",!0).mod},ue.prototype.divRound=function(Re){var Ie=this.divmod(Re);if(Ie.mod.isZero())return Ie.div;var Fe=Ie.div.negative!==0?Ie.mod.isub(Re):Ie.mod,qe=Re.ushrn(1),We=Re.andln(1),Ue=Fe.cmp(qe);return Ue<0||We===1&&Ue===0?Ie.div:Ie.div.negative!==0?Ie.div.isubn(1):Ie.div.iaddn(1)},ue.prototype.modrn=function(Re){var Ie=Re<0;Ie&&(Re=-Re),oe(Re<=67108863);for(var Fe=(1<<26)%Re,qe=0,We=this.length-1;We>=0;We--)qe=(Fe*qe+(this.words[We]|0))%Re;return Ie?-qe:qe},ue.prototype.modn=function(Re){return this.modrn(Re)},ue.prototype.idivn=function(Re){var Ie=Re<0;Ie&&(Re=-Re),oe(Re<=67108863);for(var Fe=0,qe=this.length-1;qe>=0;qe--){var We=(this.words[qe]|0)+Fe*67108864;this.words[qe]=We/Re|0,Fe=We%Re}return this._strip(),Ie?this.ineg():this},ue.prototype.divn=function(Re){return this.clone().idivn(Re)},ue.prototype.egcd=function(Re){oe(Re.negative===0),oe(!Re.isZero());var Ie=this,Fe=Re.clone();Ie.negative!==0?Ie=Ie.umod(Re):Ie=Ie.clone();for(var qe=new ue(1),We=new ue(0),Ue=new ue(0),_e=new ue(1),Qe=0;Ie.isEven()&&Fe.isEven();)Ie.iushrn(1),Fe.iushrn(1),++Qe;for(var tt=Fe.clone(),it=Ie.clone();!Ie.isZero();){for(var at=0,ot=1;!(Ie.words[0]&ot)&&at<26;++at,ot<<=1);if(at>0)for(Ie.iushrn(at);at-- >0;)(qe.isOdd()||We.isOdd())&&(qe.iadd(tt),We.isub(it)),qe.iushrn(1),We.iushrn(1);for(var lt=0,st=1;!(Fe.words[0]&st)&&lt<26;++lt,st<<=1);if(lt>0)for(Fe.iushrn(lt);lt-- >0;)(Ue.isOdd()||_e.isOdd())&&(Ue.iadd(tt),_e.isub(it)),Ue.iushrn(1),_e.iushrn(1);Ie.cmp(Fe)>=0?(Ie.isub(Fe),qe.isub(Ue),We.isub(_e)):(Fe.isub(Ie),Ue.isub(qe),_e.isub(We))}return{a:Ue,b:_e,gcd:Fe.iushln(Qe)}},ue.prototype._invmp=function(Re){oe(Re.negative===0),oe(!Re.isZero());var Ie=this,Fe=Re.clone();Ie.negative!==0?Ie=Ie.umod(Re):Ie=Ie.clone();for(var qe=new ue(1),We=new ue(0),Ue=Fe.clone();Ie.cmpn(1)>0&&Fe.cmpn(1)>0;){for(var _e=0,Qe=1;!(Ie.words[0]&Qe)&&_e<26;++_e,Qe<<=1);if(_e>0)for(Ie.iushrn(_e);_e-- >0;)qe.isOdd()&&qe.iadd(Ue),qe.iushrn(1);for(var tt=0,it=1;!(Fe.words[0]&it)&&tt<26;++tt,it<<=1);if(tt>0)for(Fe.iushrn(tt);tt-- >0;)We.isOdd()&&We.iadd(Ue),We.iushrn(1);Ie.cmp(Fe)>=0?(Ie.isub(Fe),qe.isub(We)):(Fe.isub(Ie),We.isub(qe))}var at;return Ie.cmpn(1)===0?at=qe:at=We,at.cmpn(0)<0&&at.iadd(Re),at},ue.prototype.gcd=function(Re){if(this.isZero())return Re.abs();if(Re.isZero())return this.abs();var Ie=this.clone(),Fe=Re.clone();Ie.negative=0,Fe.negative=0;for(var qe=0;Ie.isEven()&&Fe.isEven();qe++)Ie.iushrn(1),Fe.iushrn(1);do{for(;Ie.isEven();)Ie.iushrn(1);for(;Fe.isEven();)Fe.iushrn(1);var We=Ie.cmp(Fe);if(We<0){var Ue=Ie;Ie=Fe,Fe=Ue}else if(We===0||Fe.cmpn(1)===0)break;Ie.isub(Fe)}while(!0);return Fe.iushln(qe)},ue.prototype.invm=function(Re){return this.egcd(Re).a.umod(Re)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(Re){return this.words[0]&Re},ue.prototype.bincn=function(Re){oe(typeof Re=="number");var Ie=Re%26,Fe=(Re-Ie)/26,qe=1<<Ie;if(this.length<=Fe)return this._expand(Fe+1),this.words[Fe]|=qe,this;for(var We=qe,Ue=Fe;We!==0&&Ue<this.length;Ue++){var _e=this.words[Ue]|0;_e+=We,We=_e>>>26,_e&=67108863,this.words[Ue]=_e}return We!==0&&(this.words[Ue]=We,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(Re){var Ie=Re<0;if(this.negative!==0&&!Ie)return-1;if(this.negative===0&&Ie)return 1;this._strip();var Fe;if(this.length>1)Fe=1;else{Ie&&(Re=-Re),oe(Re<=67108863,"Number is too big");var qe=this.words[0]|0;Fe=qe===Re?0:qe<Re?-1:1}return this.negative!==0?-Fe|0:Fe},ue.prototype.cmp=function(Re){if(this.negative!==0&&Re.negative===0)return-1;if(this.negative===0&&Re.negative!==0)return 1;var Ie=this.ucmp(Re);return this.negative!==0?-Ie|0:Ie},ue.prototype.ucmp=function(Re){if(this.length>Re.length)return 1;if(this.length<Re.length)return-1;for(var Ie=0,Fe=this.length-1;Fe>=0;Fe--){var qe=this.words[Fe]|0,We=Re.words[Fe]|0;if(qe!==We){qe<We?Ie=-1:qe>We&&(Ie=1);break}}return Ie},ue.prototype.gtn=function(Re){return this.cmpn(Re)===1},ue.prototype.gt=function(Re){return this.cmp(Re)===1},ue.prototype.gten=function(Re){return this.cmpn(Re)>=0},ue.prototype.gte=function(Re){return this.cmp(Re)>=0},ue.prototype.ltn=function(Re){return this.cmpn(Re)===-1},ue.prototype.lt=function(Re){return this.cmp(Re)===-1},ue.prototype.lten=function(Re){return this.cmpn(Re)<=0},ue.prototype.lte=function(Re){return this.cmp(Re)<=0},ue.prototype.eqn=function(Re){return this.cmpn(Re)===0},ue.prototype.eq=function(Re){return this.cmp(Re)===0},ue.red=function(Re){return new Ge(Re)},ue.prototype.toRed=function(Re){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),Re.convertTo(this)._forceRed(Re)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(Re){return this.red=Re,this},ue.prototype.forceRed=function(Re){return oe(!this.red,"Already a number in reduction context"),this._forceRed(Re)},ue.prototype.redAdd=function(Re){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,Re)},ue.prototype.redIAdd=function(Re){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Re)},ue.prototype.redSub=function(Re){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,Re)},ue.prototype.redISub=function(Re){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,Re)},ue.prototype.redShl=function(Re){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,Re)},ue.prototype.redMul=function(Re){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Re),this.red.mul(this,Re)},ue.prototype.redIMul=function(Re){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,Re),this.red.imul(this,Re)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(Re){return oe(this.red&&!Re.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Re)};var Xe={k256:null,p224:null,p192:null,p25519:null};function Je(Be,Re){this.name=Be,this.p=new ue(Re,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Je.prototype._tmp=function(){var Re=new ue(null);return Re.words=new Array(Math.ceil(this.n/13)),Re},Je.prototype.ireduce=function(Re){var Ie=Re,Fe;do this.split(Ie,this.tmp),Ie=this.imulK(Ie),Ie=Ie.iadd(this.tmp),Fe=Ie.bitLength();while(Fe>this.n);var qe=Fe<this.n?-1:Ie.ucmp(this.p);return qe===0?(Ie.words[0]=0,Ie.length=1):qe>0?Ie.isub(this.p):Ie.strip!==void 0?Ie.strip():Ie._strip(),Ie},Je.prototype.split=function(Re,Ie){Re.iushrn(this.n,0,Ie)},Je.prototype.imulK=function(Re){return Re.imul(this.k)};function rt(){Je.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(rt,Je),rt.prototype.split=function(Re,Ie){for(var Fe=4194303,qe=Math.min(Re.length,9),We=0;We<qe;We++)Ie.words[We]=Re.words[We];if(Ie.length=qe,Re.length<=9){Re.words[0]=0,Re.length=1;return}var Ue=Re.words[9];for(Ie.words[Ie.length++]=Ue&Fe,We=10;We<Re.length;We++){var _e=Re.words[We]|0;Re.words[We-10]=(_e&Fe)<<4|Ue>>>22,Ue=_e}Ue>>>=22,Re.words[We-10]=Ue,Ue===0&&Re.length>10?Re.length-=10:Re.length-=9},rt.prototype.imulK=function(Re){Re.words[Re.length]=0,Re.words[Re.length+1]=0,Re.length+=2;for(var Ie=0,Fe=0;Fe<Re.length;Fe++){var qe=Re.words[Fe]|0;Ie+=qe*977,Re.words[Fe]=Ie&67108863,Ie=qe*64+(Ie/67108864|0)}return Re.words[Re.length-1]===0&&(Re.length--,Re.words[Re.length-1]===0&&Re.length--),Re};function Ze(){Je.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(Ze,Je);function et(){Je.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(et,Je);function nt(){Je.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(nt,Je),nt.prototype.imulK=function(Re){for(var Ie=0,Fe=0;Fe<Re.length;Fe++){var qe=(Re.words[Fe]|0)*19+Ie,We=qe&67108863;qe>>>=26,Re.words[Fe]=We,Ie=qe}return Ie!==0&&(Re.words[Re.length++]=Ie),Re},ue._prime=function(Re){if(Xe[Re])return Xe[Re];var Ie;if(Re==="k256")Ie=new rt;else if(Re==="p224")Ie=new Ze;else if(Re==="p192")Ie=new et;else if(Re==="p25519")Ie=new nt;else throw new Error("Unknown prime "+Re);return Xe[Re]=Ie,Ie};function Ge(Be){if(typeof Be=="string"){var Re=ue._prime(Be);this.m=Re.p,this.prime=Re}else oe(Be.gtn(1),"modulus must be greater than 1"),this.m=Be,this.prime=null}Ge.prototype._verify1=function(Re){oe(Re.negative===0,"red works only with positives"),oe(Re.red,"red works only with red numbers")},Ge.prototype._verify2=function(Re,Ie){oe((Re.negative|Ie.negative)===0,"red works only with positives"),oe(Re.red&&Re.red===Ie.red,"red works only with red numbers")},Ge.prototype.imod=function(Re){return this.prime?this.prime.ireduce(Re)._forceRed(this):(ge(Re,Re.umod(this.m)._forceRed(this)),Re)},Ge.prototype.neg=function(Re){return Re.isZero()?Re.clone():this.m.sub(Re)._forceRed(this)},Ge.prototype.add=function(Re,Ie){this._verify2(Re,Ie);var Fe=Re.add(Ie);return Fe.cmp(this.m)>=0&&Fe.isub(this.m),Fe._forceRed(this)},Ge.prototype.iadd=function(Re,Ie){this._verify2(Re,Ie);var Fe=Re.iadd(Ie);return Fe.cmp(this.m)>=0&&Fe.isub(this.m),Fe},Ge.prototype.sub=function(Re,Ie){this._verify2(Re,Ie);var Fe=Re.sub(Ie);return Fe.cmpn(0)<0&&Fe.iadd(this.m),Fe._forceRed(this)},Ge.prototype.isub=function(Re,Ie){this._verify2(Re,Ie);var Fe=Re.isub(Ie);return Fe.cmpn(0)<0&&Fe.iadd(this.m),Fe},Ge.prototype.shl=function(Re,Ie){return this._verify1(Re),this.imod(Re.ushln(Ie))},Ge.prototype.imul=function(Re,Ie){return this._verify2(Re,Ie),this.imod(Re.imul(Ie))},Ge.prototype.mul=function(Re,Ie){return this._verify2(Re,Ie),this.imod(Re.mul(Ie))},Ge.prototype.isqr=function(Re){return this.imul(Re,Re.clone())},Ge.prototype.sqr=function(Re){return this.mul(Re,Re)},Ge.prototype.sqrt=function(Re){if(Re.isZero())return Re.clone();var Ie=this.m.andln(3);if(oe(Ie%2===1),Ie===3){var Fe=this.m.add(new ue(1)).iushrn(2);return this.pow(Re,Fe)}for(var qe=this.m.subn(1),We=0;!qe.isZero()&&qe.andln(1)===0;)We++,qe.iushrn(1);oe(!qe.isZero());var Ue=new ue(1).toRed(this),_e=Ue.redNeg(),Qe=this.m.subn(1).iushrn(1),tt=this.m.bitLength();for(tt=new ue(2*tt*tt).toRed(this);this.pow(tt,Qe).cmp(_e)!==0;)tt.redIAdd(_e);for(var it=this.pow(tt,qe),at=this.pow(Re,qe.addn(1).iushrn(1)),ot=this.pow(Re,qe),lt=We;ot.cmp(Ue)!==0;){for(var st=ot,ut=0;st.cmp(Ue)!==0;ut++)st=st.redSqr();oe(ut<lt);var ft=this.pow(it,new ue(1).iushln(lt-ut-1));at=at.redMul(ft),it=ft.redSqr(),ot=ot.redMul(it),lt=ut}return at},Ge.prototype.invm=function(Re){var Ie=Re._invmp(this.m);return Ie.negative!==0?(Ie.negative=0,this.imod(Ie).redNeg()):this.imod(Ie)},Ge.prototype.pow=function(Re,Ie){if(Ie.isZero())return new ue(1).toRed(this);if(Ie.cmpn(1)===0)return Re.clone();var Fe=4,qe=new Array(1<<Fe);qe[0]=new ue(1).toRed(this),qe[1]=Re;for(var We=2;We<qe.length;We++)qe[We]=this.mul(qe[We-1],Re);var Ue=qe[0],_e=0,Qe=0,tt=Ie.bitLength()%26;for(tt===0&&(tt=26),We=Ie.length-1;We>=0;We--){for(var it=Ie.words[We],at=tt-1;at>=0;at--){var ot=it>>at&1;if(Ue!==qe[0]&&(Ue=this.sqr(Ue)),ot===0&&_e===0){Qe=0;continue}_e<<=1,_e|=ot,Qe++,!(Qe!==Fe&&(We!==0||at!==0))&&(Ue=this.mul(Ue,qe[_e]),Qe=0,_e=0)}tt=26}return Ue},Ge.prototype.convertTo=function(Re){var Ie=Re.umod(this.m);return Ie===Re?Ie.clone():Ie},Ge.prototype.convertFrom=function(Re){var Ie=Re.clone();return Ie.red=null,Ie},ue.mont=function(Re){return new ve(Re)};function ve(Be){Ge.call(this,Be),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(ve,Ge),ve.prototype.convertTo=function(Re){return this.imod(Re.ushln(this.shift))},ve.prototype.convertFrom=function(Re){var Ie=this.imod(Re.mul(this.rinv));return Ie.red=null,Ie},ve.prototype.imul=function(Re,Ie){if(Re.isZero()||Ie.isZero())return Re.words[0]=0,Re.length=1,Re;var Fe=Re.imul(Ie),qe=Fe.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),We=Fe.isub(qe).iushrn(this.shift),Ue=We;return We.cmp(this.m)>=0?Ue=We.isub(this.m):We.cmpn(0)<0&&(Ue=We.iadd(this.m)),Ue._forceRed(this)},ve.prototype.mul=function(Re,Ie){if(Re.isZero()||Ie.isZero())return new ue(0)._forceRed(this);var Fe=Re.mul(Ie),qe=Fe.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),We=Fe.isub(qe).iushrn(this.shift),Ue=We;return We.cmp(this.m)>=0?Ue=We.isub(this.m):We.cmpn(0)<0&&(Ue=We.iadd(this.m)),Ue._forceRed(this)},ve.prototype.invm=function(Re){var Ie=this.imod(Re._invmp(this.m).mul(this.r2));return Ie._forceRed(this)}})(K,commonjsGlobal)}(bn$4)),bn$4.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var K=requireBn$4(),J=requireBrowser$a(),ne=requireSafeBuffer$1().Buffer;function oe(Ae){var pe=Ae.modulus.byteLength(),xe;do xe=new K(J(pe));while(xe.cmp(Ae.modulus)>=0||!xe.umod(Ae.prime1)||!xe.umod(Ae.prime2));return xe}function ce(Ae){var pe=oe(Ae),xe=pe.toRed(K.mont(Ae.modulus)).redPow(new K(Ae.publicExponent)).fromRed();return{blinder:xe,unblinder:pe.invm(Ae.modulus)}}function ue(Ae,pe){var xe=ce(pe),me=pe.modulus.byteLength(),ge=new K(Ae).mul(xe.blinder).umod(pe.modulus),ye=ge.toRed(K.mont(pe.prime1)),Se=ge.toRed(K.mont(pe.prime2)),Te=pe.coefficient,Ne=pe.prime1,$e=pe.prime2,ke=ye.redPow(pe.exponent1).fromRed(),je=Se.redPow(pe.exponent2).fromRed(),Ke=ke.isub(je).imul(Te).umod(Ne).imul($e);return je.iadd(Ke).imul(xe.unblinder).umod(pe.modulus).toArrayLike(ne,"be",me)}return ue.getr=oe,browserifyRsa=ue,browserifyRsa}var elliptic={};const name="elliptic",version="6.5.7",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0={name,version,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$2={},bn$3={exports:{}};bn$3.exports;var hasRequiredBn$3;function requireBn$3(){return hasRequiredBn$3||(hasRequiredBn$3=1,function(K){(function(J,ne){function oe(Ge,ve){if(!Ge)throw new Error(ve||"Assertion failed")}function ce(Ge,ve){Ge.super_=ve;var Be=function(){};Be.prototype=ve.prototype,Ge.prototype=new Be,Ge.prototype.constructor=Ge}function ue(Ge,ve,Be){if(ue.isBN(Ge))return Ge;this.negative=0,this.words=null,this.length=0,this.red=null,Ge!==null&&((ve==="le"||ve==="be")&&(Be=ve,ve=10),this._init(Ge||0,ve||10,Be||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(ve){return ve instanceof ue?!0:ve!==null&&typeof ve=="object"&&ve.constructor.wordSize===ue.wordSize&&Array.isArray(ve.words)},ue.max=function(ve,Be){return ve.cmp(Be)>0?ve:Be},ue.min=function(ve,Be){return ve.cmp(Be)<0?ve:Be},ue.prototype._init=function(ve,Be,Re){if(typeof ve=="number")return this._initNumber(ve,Be,Re);if(typeof ve=="object")return this._initArray(ve,Be,Re);Be==="hex"&&(Be=16),oe(Be===(Be|0)&&Be>=2&&Be<=36),ve=ve.toString().replace(/\s+/g,"");var Ie=0;ve[0]==="-"&&(Ie++,this.negative=1),Ie<ve.length&&(Be===16?this._parseHex(ve,Ie,Re):(this._parseBase(ve,Be,Ie),Re==="le"&&this._initArray(this.toArray(),Be,Re)))},ue.prototype._initNumber=function(ve,Be,Re){ve<0&&(this.negative=1,ve=-ve),ve<67108864?(this.words=[ve&67108863],this.length=1):ve<4503599627370496?(this.words=[ve&67108863,ve/67108864&67108863],this.length=2):(oe(ve<9007199254740992),this.words=[ve&67108863,ve/67108864&67108863,1],this.length=3),Re==="le"&&this._initArray(this.toArray(),Be,Re)},ue.prototype._initArray=function(ve,Be,Re){if(oe(typeof ve.length=="number"),ve.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ve.length/3),this.words=new Array(this.length);for(var Ie=0;Ie<this.length;Ie++)this.words[Ie]=0;var Fe,qe,We=0;if(Re==="be")for(Ie=ve.length-1,Fe=0;Ie>=0;Ie-=3)qe=ve[Ie]|ve[Ie-1]<<8|ve[Ie-2]<<16,this.words[Fe]|=qe<<We&67108863,this.words[Fe+1]=qe>>>26-We&67108863,We+=24,We>=26&&(We-=26,Fe++);else if(Re==="le")for(Ie=0,Fe=0;Ie<ve.length;Ie+=3)qe=ve[Ie]|ve[Ie+1]<<8|ve[Ie+2]<<16,this.words[Fe]|=qe<<We&67108863,this.words[Fe+1]=qe>>>26-We&67108863,We+=24,We>=26&&(We-=26,Fe++);return this.strip()};function pe(Ge,ve){var Be=Ge.charCodeAt(ve);return Be>=65&&Be<=70?Be-55:Be>=97&&Be<=102?Be-87:Be-48&15}function xe(Ge,ve,Be){var Re=pe(Ge,Be);return Be-1>=ve&&(Re|=pe(Ge,Be-1)<<4),Re}ue.prototype._parseHex=function(ve,Be,Re){this.length=Math.ceil((ve.length-Be)/6),this.words=new Array(this.length);for(var Ie=0;Ie<this.length;Ie++)this.words[Ie]=0;var Fe=0,qe=0,We;if(Re==="be")for(Ie=ve.length-1;Ie>=Be;Ie-=2)We=xe(ve,Be,Ie)<<Fe,this.words[qe]|=We&67108863,Fe>=18?(Fe-=18,qe+=1,this.words[qe]|=We>>>26):Fe+=8;else{var Ue=ve.length-Be;for(Ie=Ue%2===0?Be+1:Be;Ie<ve.length;Ie+=2)We=xe(ve,Be,Ie)<<Fe,this.words[qe]|=We&67108863,Fe>=18?(Fe-=18,qe+=1,this.words[qe]|=We>>>26):Fe+=8}this.strip()};function me(Ge,ve,Be,Re){for(var Ie=0,Fe=Math.min(Ge.length,Be),qe=ve;qe<Fe;qe++){var We=Ge.charCodeAt(qe)-48;Ie*=Re,We>=49?Ie+=We-49+10:We>=17?Ie+=We-17+10:Ie+=We}return Ie}ue.prototype._parseBase=function(ve,Be,Re){this.words=[0],this.length=1;for(var Ie=0,Fe=1;Fe<=67108863;Fe*=Be)Ie++;Ie--,Fe=Fe/Be|0;for(var qe=ve.length-Re,We=qe%Ie,Ue=Math.min(qe,qe-We)+Re,_e=0,Qe=Re;Qe<Ue;Qe+=Ie)_e=me(ve,Qe,Qe+Ie,Be),this.imuln(Fe),this.words[0]+_e<67108864?this.words[0]+=_e:this._iaddn(_e);if(We!==0){var tt=1;for(_e=me(ve,Qe,ve.length,Be),Qe=0;Qe<We;Qe++)tt*=Be;this.imuln(tt),this.words[0]+_e<67108864?this.words[0]+=_e:this._iaddn(_e)}this.strip()},ue.prototype.copy=function(ve){ve.words=new Array(this.length);for(var Be=0;Be<this.length;Be++)ve.words[Be]=this.words[Be];ve.length=this.length,ve.negative=this.negative,ve.red=this.red},ue.prototype.clone=function(){var ve=new ue(null);return this.copy(ve),ve},ue.prototype._expand=function(ve){for(;this.length<ve;)this.words[this.length++]=0;return this},ue.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},ue.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ge=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ye=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Se=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(ve,Be){ve=ve||10,Be=Be|0||1;var Re;if(ve===16||ve==="hex"){Re="";for(var Ie=0,Fe=0,qe=0;qe<this.length;qe++){var We=this.words[qe],Ue=((We<<Ie|Fe)&16777215).toString(16);Fe=We>>>24-Ie&16777215,Fe!==0||qe!==this.length-1?Re=ge[6-Ue.length]+Ue+Re:Re=Ue+Re,Ie+=2,Ie>=26&&(Ie-=26,qe--)}for(Fe!==0&&(Re=Fe.toString(16)+Re);Re.length%Be!==0;)Re="0"+Re;return this.negative!==0&&(Re="-"+Re),Re}if(ve===(ve|0)&&ve>=2&&ve<=36){var _e=ye[ve],Qe=Se[ve];Re="";var tt=this.clone();for(tt.negative=0;!tt.isZero();){var it=tt.modn(Qe).toString(ve);tt=tt.idivn(Qe),tt.isZero()?Re=it+Re:Re=ge[_e-it.length]+it+Re}for(this.isZero()&&(Re="0"+Re);Re.length%Be!==0;)Re="0"+Re;return this.negative!==0&&(Re="-"+Re),Re}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var ve=this.words[0];return this.length===2?ve+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ve+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ve:ve},ue.prototype.toJSON=function(){return this.toString(16)},ue.prototype.toBuffer=function(ve,Be){return oe(typeof Ae<"u"),this.toArrayLike(Ae,ve,Be)},ue.prototype.toArray=function(ve,Be){return this.toArrayLike(Array,ve,Be)},ue.prototype.toArrayLike=function(ve,Be,Re){var Ie=this.byteLength(),Fe=Re||Math.max(1,Ie);oe(Ie<=Fe,"byte array longer than desired length"),oe(Fe>0,"Requested array length <= 0"),this.strip();var qe=Be==="le",We=new ve(Fe),Ue,_e,Qe=this.clone();if(qe){for(_e=0;!Qe.isZero();_e++)Ue=Qe.andln(255),Qe.iushrn(8),We[_e]=Ue;for(;_e<Fe;_e++)We[_e]=0}else{for(_e=0;_e<Fe-Ie;_e++)We[_e]=0;for(_e=0;!Qe.isZero();_e++)Ue=Qe.andln(255),Qe.iushrn(8),We[Fe-_e-1]=Ue}return We},Math.clz32?ue.prototype._countBits=function(ve){return 32-Math.clz32(ve)}:ue.prototype._countBits=function(ve){var Be=ve,Re=0;return Be>=4096&&(Re+=13,Be>>>=13),Be>=64&&(Re+=7,Be>>>=7),Be>=8&&(Re+=4,Be>>>=4),Be>=2&&(Re+=2,Be>>>=2),Re+Be},ue.prototype._zeroBits=function(ve){if(ve===0)return 26;var Be=ve,Re=0;return Be&8191||(Re+=13,Be>>>=13),Be&127||(Re+=7,Be>>>=7),Be&15||(Re+=4,Be>>>=4),Be&3||(Re+=2,Be>>>=2),Be&1||Re++,Re},ue.prototype.bitLength=function(){var ve=this.words[this.length-1],Be=this._countBits(ve);return(this.length-1)*26+Be};function Te(Ge){for(var ve=new Array(Ge.bitLength()),Be=0;Be<ve.length;Be++){var Re=Be/26|0,Ie=Be%26;ve[Be]=(Ge.words[Re]&1<<Ie)>>>Ie}return ve}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ve=0,Be=0;Be<this.length;Be++){var Re=this._zeroBits(this.words[Be]);if(ve+=Re,Re!==26)break}return ve},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(ve){return this.negative!==0?this.abs().inotn(ve).iaddn(1):this.clone()},ue.prototype.fromTwos=function(ve){return this.testn(ve-1)?this.notn(ve).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(ve){for(;this.length<ve.length;)this.words[this.length++]=0;for(var Be=0;Be<ve.length;Be++)this.words[Be]=this.words[Be]|ve.words[Be];return this.strip()},ue.prototype.ior=function(ve){return oe((this.negative|ve.negative)===0),this.iuor(ve)},ue.prototype.or=function(ve){return this.length>ve.length?this.clone().ior(ve):ve.clone().ior(this)},ue.prototype.uor=function(ve){return this.length>ve.length?this.clone().iuor(ve):ve.clone().iuor(this)},ue.prototype.iuand=function(ve){var Be;this.length>ve.length?Be=ve:Be=this;for(var Re=0;Re<Be.length;Re++)this.words[Re]=this.words[Re]&ve.words[Re];return this.length=Be.length,this.strip()},ue.prototype.iand=function(ve){return oe((this.negative|ve.negative)===0),this.iuand(ve)},ue.prototype.and=function(ve){return this.length>ve.length?this.clone().iand(ve):ve.clone().iand(this)},ue.prototype.uand=function(ve){return this.length>ve.length?this.clone().iuand(ve):ve.clone().iuand(this)},ue.prototype.iuxor=function(ve){var Be,Re;this.length>ve.length?(Be=this,Re=ve):(Be=ve,Re=this);for(var Ie=0;Ie<Re.length;Ie++)this.words[Ie]=Be.words[Ie]^Re.words[Ie];if(this!==Be)for(;Ie<Be.length;Ie++)this.words[Ie]=Be.words[Ie];return this.length=Be.length,this.strip()},ue.prototype.ixor=function(ve){return oe((this.negative|ve.negative)===0),this.iuxor(ve)},ue.prototype.xor=function(ve){return this.length>ve.length?this.clone().ixor(ve):ve.clone().ixor(this)},ue.prototype.uxor=function(ve){return this.length>ve.length?this.clone().iuxor(ve):ve.clone().iuxor(this)},ue.prototype.inotn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=Math.ceil(ve/26)|0,Re=ve%26;this._expand(Be),Re>0&&Be--;for(var Ie=0;Ie<Be;Ie++)this.words[Ie]=~this.words[Ie]&67108863;return Re>0&&(this.words[Ie]=~this.words[Ie]&67108863>>26-Re),this.strip()},ue.prototype.notn=function(ve){return this.clone().inotn(ve)},ue.prototype.setn=function(ve,Be){oe(typeof ve=="number"&&ve>=0);var Re=ve/26|0,Ie=ve%26;return this._expand(Re+1),Be?this.words[Re]=this.words[Re]|1<<Ie:this.words[Re]=this.words[Re]&~(1<<Ie),this.strip()},ue.prototype.iadd=function(ve){var Be;if(this.negative!==0&&ve.negative===0)return this.negative=0,Be=this.isub(ve),this.negative^=1,this._normSign();if(this.negative===0&&ve.negative!==0)return ve.negative=0,Be=this.isub(ve),ve.negative=1,Be._normSign();var Re,Ie;this.length>ve.length?(Re=this,Ie=ve):(Re=ve,Ie=this);for(var Fe=0,qe=0;qe<Ie.length;qe++)Be=(Re.words[qe]|0)+(Ie.words[qe]|0)+Fe,this.words[qe]=Be&67108863,Fe=Be>>>26;for(;Fe!==0&&qe<Re.length;qe++)Be=(Re.words[qe]|0)+Fe,this.words[qe]=Be&67108863,Fe=Be>>>26;if(this.length=Re.length,Fe!==0)this.words[this.length]=Fe,this.length++;else if(Re!==this)for(;qe<Re.length;qe++)this.words[qe]=Re.words[qe];return this},ue.prototype.add=function(ve){var Be;return ve.negative!==0&&this.negative===0?(ve.negative=0,Be=this.sub(ve),ve.negative^=1,Be):ve.negative===0&&this.negative!==0?(this.negative=0,Be=ve.sub(this),this.negative=1,Be):this.length>ve.length?this.clone().iadd(ve):ve.clone().iadd(this)},ue.prototype.isub=function(ve){if(ve.negative!==0){ve.negative=0;var Be=this.iadd(ve);return ve.negative=1,Be._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ve),this.negative=1,this._normSign();var Re=this.cmp(ve);if(Re===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ie,Fe;Re>0?(Ie=this,Fe=ve):(Ie=ve,Fe=this);for(var qe=0,We=0;We<Fe.length;We++)Be=(Ie.words[We]|0)-(Fe.words[We]|0)+qe,qe=Be>>26,this.words[We]=Be&67108863;for(;qe!==0&&We<Ie.length;We++)Be=(Ie.words[We]|0)+qe,qe=Be>>26,this.words[We]=Be&67108863;if(qe===0&&We<Ie.length&&Ie!==this)for(;We<Ie.length;We++)this.words[We]=Ie.words[We];return this.length=Math.max(this.length,We),Ie!==this&&(this.negative=1),this.strip()},ue.prototype.sub=function(ve){return this.clone().isub(ve)};function Ne(Ge,ve,Be){Be.negative=ve.negative^Ge.negative;var Re=Ge.length+ve.length|0;Be.length=Re,Re=Re-1|0;var Ie=Ge.words[0]|0,Fe=ve.words[0]|0,qe=Ie*Fe,We=qe&67108863,Ue=qe/67108864|0;Be.words[0]=We;for(var _e=1;_e<Re;_e++){for(var Qe=Ue>>>26,tt=Ue&67108863,it=Math.min(_e,ve.length-1),at=Math.max(0,_e-Ge.length+1);at<=it;at++){var ot=_e-at|0;Ie=Ge.words[ot]|0,Fe=ve.words[at]|0,qe=Ie*Fe+tt,Qe+=qe/67108864|0,tt=qe&67108863}Be.words[_e]=tt|0,Ue=Qe|0}return Ue!==0?Be.words[_e]=Ue|0:Be.length--,Be.strip()}var $e=function(ve,Be,Re){var Ie=ve.words,Fe=Be.words,qe=Re.words,We=0,Ue,_e,Qe,tt=Ie[0]|0,it=tt&8191,at=tt>>>13,ot=Ie[1]|0,lt=ot&8191,st=ot>>>13,ut=Ie[2]|0,ft=ut&8191,dt=ut>>>13,Bt=Ie[3]|0,pt=Bt&8191,mt=Bt>>>13,bt=Ie[4]|0,xt=bt&8191,yt=bt>>>13,It=Ie[5]|0,ht=It&8191,gt=It>>>13,Pt=Ie[6]|0,wt=Pt&8191,St=Pt>>>13,Zt=Ie[7]|0,Ct=Zt&8191,Rt=Zt>>>13,dr=Ie[8]|0,Dt=dr&8191,Tt=dr>>>13,or=Ie[9]|0,Mt=or&8191,kt=or>>>13,ur=Fe[0]|0,$t=ur&8191,jt=ur>>>13,nr=Fe[1]|0,Ot=nr&8191,Lt=nr>>>13,lr=Fe[2]|0,Ht=lr&8191,qt=lr>>>13,tr=Fe[3]|0,Vt=tr&8191,Gt=tr>>>13,br=Fe[4]|0,Yt=br&8191,Kt=br>>>13,yr=Fe[5]|0,zt=yr&8191,Jt=yr>>>13,xr=Fe[6]|0,Xt=xr&8191,ir=xr>>>13,Mr=Fe[7]|0,er=Mr&8191,fr=Mr>>>13,Qr=Fe[8]|0,sr=Qr&8191,Ar=Qr>>>13,Kr=Fe[9]|0,ar=Kr&8191,hr=Kr>>>13;Re.negative=ve.negative^Be.negative,Re.length=19,Ue=Math.imul(it,$t),_e=Math.imul(it,jt),_e=_e+Math.imul(at,$t)|0,Qe=Math.imul(at,jt);var Lr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,Ue=Math.imul(lt,$t),_e=Math.imul(lt,jt),_e=_e+Math.imul(st,$t)|0,Qe=Math.imul(st,jt),Ue=Ue+Math.imul(it,Ot)|0,_e=_e+Math.imul(it,Lt)|0,_e=_e+Math.imul(at,Ot)|0,Qe=Qe+Math.imul(at,Lt)|0;var Pr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,Ue=Math.imul(ft,$t),_e=Math.imul(ft,jt),_e=_e+Math.imul(dt,$t)|0,Qe=Math.imul(dt,jt),Ue=Ue+Math.imul(lt,Ot)|0,_e=_e+Math.imul(lt,Lt)|0,_e=_e+Math.imul(st,Ot)|0,Qe=Qe+Math.imul(st,Lt)|0,Ue=Ue+Math.imul(it,Ht)|0,_e=_e+Math.imul(it,qt)|0,_e=_e+Math.imul(at,Ht)|0,Qe=Qe+Math.imul(at,qt)|0;var Yr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,Ue=Math.imul(pt,$t),_e=Math.imul(pt,jt),_e=_e+Math.imul(mt,$t)|0,Qe=Math.imul(mt,jt),Ue=Ue+Math.imul(ft,Ot)|0,_e=_e+Math.imul(ft,Lt)|0,_e=_e+Math.imul(dt,Ot)|0,Qe=Qe+Math.imul(dt,Lt)|0,Ue=Ue+Math.imul(lt,Ht)|0,_e=_e+Math.imul(lt,qt)|0,_e=_e+Math.imul(st,Ht)|0,Qe=Qe+Math.imul(st,qt)|0,Ue=Ue+Math.imul(it,Vt)|0,_e=_e+Math.imul(it,Gt)|0,_e=_e+Math.imul(at,Vt)|0,Qe=Qe+Math.imul(at,Gt)|0;var Wr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,Ue=Math.imul(xt,$t),_e=Math.imul(xt,jt),_e=_e+Math.imul(yt,$t)|0,Qe=Math.imul(yt,jt),Ue=Ue+Math.imul(pt,Ot)|0,_e=_e+Math.imul(pt,Lt)|0,_e=_e+Math.imul(mt,Ot)|0,Qe=Qe+Math.imul(mt,Lt)|0,Ue=Ue+Math.imul(ft,Ht)|0,_e=_e+Math.imul(ft,qt)|0,_e=_e+Math.imul(dt,Ht)|0,Qe=Qe+Math.imul(dt,qt)|0,Ue=Ue+Math.imul(lt,Vt)|0,_e=_e+Math.imul(lt,Gt)|0,_e=_e+Math.imul(st,Vt)|0,Qe=Qe+Math.imul(st,Gt)|0,Ue=Ue+Math.imul(it,Yt)|0,_e=_e+Math.imul(it,Kt)|0,_e=_e+Math.imul(at,Yt)|0,Qe=Qe+Math.imul(at,Kt)|0;var Zr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,Ue=Math.imul(ht,$t),_e=Math.imul(ht,jt),_e=_e+Math.imul(gt,$t)|0,Qe=Math.imul(gt,jt),Ue=Ue+Math.imul(xt,Ot)|0,_e=_e+Math.imul(xt,Lt)|0,_e=_e+Math.imul(yt,Ot)|0,Qe=Qe+Math.imul(yt,Lt)|0,Ue=Ue+Math.imul(pt,Ht)|0,_e=_e+Math.imul(pt,qt)|0,_e=_e+Math.imul(mt,Ht)|0,Qe=Qe+Math.imul(mt,qt)|0,Ue=Ue+Math.imul(ft,Vt)|0,_e=_e+Math.imul(ft,Gt)|0,_e=_e+Math.imul(dt,Vt)|0,Qe=Qe+Math.imul(dt,Gt)|0,Ue=Ue+Math.imul(lt,Yt)|0,_e=_e+Math.imul(lt,Kt)|0,_e=_e+Math.imul(st,Yt)|0,Qe=Qe+Math.imul(st,Kt)|0,Ue=Ue+Math.imul(it,zt)|0,_e=_e+Math.imul(it,Jt)|0,_e=_e+Math.imul(at,zt)|0,Qe=Qe+Math.imul(at,Jt)|0;var Jr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,Ue=Math.imul(wt,$t),_e=Math.imul(wt,jt),_e=_e+Math.imul(St,$t)|0,Qe=Math.imul(St,jt),Ue=Ue+Math.imul(ht,Ot)|0,_e=_e+Math.imul(ht,Lt)|0,_e=_e+Math.imul(gt,Ot)|0,Qe=Qe+Math.imul(gt,Lt)|0,Ue=Ue+Math.imul(xt,Ht)|0,_e=_e+Math.imul(xt,qt)|0,_e=_e+Math.imul(yt,Ht)|0,Qe=Qe+Math.imul(yt,qt)|0,Ue=Ue+Math.imul(pt,Vt)|0,_e=_e+Math.imul(pt,Gt)|0,_e=_e+Math.imul(mt,Vt)|0,Qe=Qe+Math.imul(mt,Gt)|0,Ue=Ue+Math.imul(ft,Yt)|0,_e=_e+Math.imul(ft,Kt)|0,_e=_e+Math.imul(dt,Yt)|0,Qe=Qe+Math.imul(dt,Kt)|0,Ue=Ue+Math.imul(lt,zt)|0,_e=_e+Math.imul(lt,Jt)|0,_e=_e+Math.imul(st,zt)|0,Qe=Qe+Math.imul(st,Jt)|0,Ue=Ue+Math.imul(it,Xt)|0,_e=_e+Math.imul(it,ir)|0,_e=_e+Math.imul(at,Xt)|0,Qe=Qe+Math.imul(at,ir)|0;var Gr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,Ue=Math.imul(Ct,$t),_e=Math.imul(Ct,jt),_e=_e+Math.imul(Rt,$t)|0,Qe=Math.imul(Rt,jt),Ue=Ue+Math.imul(wt,Ot)|0,_e=_e+Math.imul(wt,Lt)|0,_e=_e+Math.imul(St,Ot)|0,Qe=Qe+Math.imul(St,Lt)|0,Ue=Ue+Math.imul(ht,Ht)|0,_e=_e+Math.imul(ht,qt)|0,_e=_e+Math.imul(gt,Ht)|0,Qe=Qe+Math.imul(gt,qt)|0,Ue=Ue+Math.imul(xt,Vt)|0,_e=_e+Math.imul(xt,Gt)|0,_e=_e+Math.imul(yt,Vt)|0,Qe=Qe+Math.imul(yt,Gt)|0,Ue=Ue+Math.imul(pt,Yt)|0,_e=_e+Math.imul(pt,Kt)|0,_e=_e+Math.imul(mt,Yt)|0,Qe=Qe+Math.imul(mt,Kt)|0,Ue=Ue+Math.imul(ft,zt)|0,_e=_e+Math.imul(ft,Jt)|0,_e=_e+Math.imul(dt,zt)|0,Qe=Qe+Math.imul(dt,Jt)|0,Ue=Ue+Math.imul(lt,Xt)|0,_e=_e+Math.imul(lt,ir)|0,_e=_e+Math.imul(st,Xt)|0,Qe=Qe+Math.imul(st,ir)|0,Ue=Ue+Math.imul(it,er)|0,_e=_e+Math.imul(it,fr)|0,_e=_e+Math.imul(at,er)|0,Qe=Qe+Math.imul(at,fr)|0;var sn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(sn>>>26)|0,sn&=67108863,Ue=Math.imul(Dt,$t),_e=Math.imul(Dt,jt),_e=_e+Math.imul(Tt,$t)|0,Qe=Math.imul(Tt,jt),Ue=Ue+Math.imul(Ct,Ot)|0,_e=_e+Math.imul(Ct,Lt)|0,_e=_e+Math.imul(Rt,Ot)|0,Qe=Qe+Math.imul(Rt,Lt)|0,Ue=Ue+Math.imul(wt,Ht)|0,_e=_e+Math.imul(wt,qt)|0,_e=_e+Math.imul(St,Ht)|0,Qe=Qe+Math.imul(St,qt)|0,Ue=Ue+Math.imul(ht,Vt)|0,_e=_e+Math.imul(ht,Gt)|0,_e=_e+Math.imul(gt,Vt)|0,Qe=Qe+Math.imul(gt,Gt)|0,Ue=Ue+Math.imul(xt,Yt)|0,_e=_e+Math.imul(xt,Kt)|0,_e=_e+Math.imul(yt,Yt)|0,Qe=Qe+Math.imul(yt,Kt)|0,Ue=Ue+Math.imul(pt,zt)|0,_e=_e+Math.imul(pt,Jt)|0,_e=_e+Math.imul(mt,zt)|0,Qe=Qe+Math.imul(mt,Jt)|0,Ue=Ue+Math.imul(ft,Xt)|0,_e=_e+Math.imul(ft,ir)|0,_e=_e+Math.imul(dt,Xt)|0,Qe=Qe+Math.imul(dt,ir)|0,Ue=Ue+Math.imul(lt,er)|0,_e=_e+Math.imul(lt,fr)|0,_e=_e+Math.imul(st,er)|0,Qe=Qe+Math.imul(st,fr)|0,Ue=Ue+Math.imul(it,sr)|0,_e=_e+Math.imul(it,Ar)|0,_e=_e+Math.imul(at,sr)|0,Qe=Qe+Math.imul(at,Ar)|0;var ln=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(ln>>>26)|0,ln&=67108863,Ue=Math.imul(Mt,$t),_e=Math.imul(Mt,jt),_e=_e+Math.imul(kt,$t)|0,Qe=Math.imul(kt,jt),Ue=Ue+Math.imul(Dt,Ot)|0,_e=_e+Math.imul(Dt,Lt)|0,_e=_e+Math.imul(Tt,Ot)|0,Qe=Qe+Math.imul(Tt,Lt)|0,Ue=Ue+Math.imul(Ct,Ht)|0,_e=_e+Math.imul(Ct,qt)|0,_e=_e+Math.imul(Rt,Ht)|0,Qe=Qe+Math.imul(Rt,qt)|0,Ue=Ue+Math.imul(wt,Vt)|0,_e=_e+Math.imul(wt,Gt)|0,_e=_e+Math.imul(St,Vt)|0,Qe=Qe+Math.imul(St,Gt)|0,Ue=Ue+Math.imul(ht,Yt)|0,_e=_e+Math.imul(ht,Kt)|0,_e=_e+Math.imul(gt,Yt)|0,Qe=Qe+Math.imul(gt,Kt)|0,Ue=Ue+Math.imul(xt,zt)|0,_e=_e+Math.imul(xt,Jt)|0,_e=_e+Math.imul(yt,zt)|0,Qe=Qe+Math.imul(yt,Jt)|0,Ue=Ue+Math.imul(pt,Xt)|0,_e=_e+Math.imul(pt,ir)|0,_e=_e+Math.imul(mt,Xt)|0,Qe=Qe+Math.imul(mt,ir)|0,Ue=Ue+Math.imul(ft,er)|0,_e=_e+Math.imul(ft,fr)|0,_e=_e+Math.imul(dt,er)|0,Qe=Qe+Math.imul(dt,fr)|0,Ue=Ue+Math.imul(lt,sr)|0,_e=_e+Math.imul(lt,Ar)|0,_e=_e+Math.imul(st,sr)|0,Qe=Qe+Math.imul(st,Ar)|0,Ue=Ue+Math.imul(it,ar)|0,_e=_e+Math.imul(it,hr)|0,_e=_e+Math.imul(at,ar)|0,Qe=Qe+Math.imul(at,hr)|0;var hn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(hn>>>26)|0,hn&=67108863,Ue=Math.imul(Mt,Ot),_e=Math.imul(Mt,Lt),_e=_e+Math.imul(kt,Ot)|0,Qe=Math.imul(kt,Lt),Ue=Ue+Math.imul(Dt,Ht)|0,_e=_e+Math.imul(Dt,qt)|0,_e=_e+Math.imul(Tt,Ht)|0,Qe=Qe+Math.imul(Tt,qt)|0,Ue=Ue+Math.imul(Ct,Vt)|0,_e=_e+Math.imul(Ct,Gt)|0,_e=_e+Math.imul(Rt,Vt)|0,Qe=Qe+Math.imul(Rt,Gt)|0,Ue=Ue+Math.imul(wt,Yt)|0,_e=_e+Math.imul(wt,Kt)|0,_e=_e+Math.imul(St,Yt)|0,Qe=Qe+Math.imul(St,Kt)|0,Ue=Ue+Math.imul(ht,zt)|0,_e=_e+Math.imul(ht,Jt)|0,_e=_e+Math.imul(gt,zt)|0,Qe=Qe+Math.imul(gt,Jt)|0,Ue=Ue+Math.imul(xt,Xt)|0,_e=_e+Math.imul(xt,ir)|0,_e=_e+Math.imul(yt,Xt)|0,Qe=Qe+Math.imul(yt,ir)|0,Ue=Ue+Math.imul(pt,er)|0,_e=_e+Math.imul(pt,fr)|0,_e=_e+Math.imul(mt,er)|0,Qe=Qe+Math.imul(mt,fr)|0,Ue=Ue+Math.imul(ft,sr)|0,_e=_e+Math.imul(ft,Ar)|0,_e=_e+Math.imul(dt,sr)|0,Qe=Qe+Math.imul(dt,Ar)|0,Ue=Ue+Math.imul(lt,ar)|0,_e=_e+Math.imul(lt,hr)|0,_e=_e+Math.imul(st,ar)|0,Qe=Qe+Math.imul(st,hr)|0;var pn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(pn>>>26)|0,pn&=67108863,Ue=Math.imul(Mt,Ht),_e=Math.imul(Mt,qt),_e=_e+Math.imul(kt,Ht)|0,Qe=Math.imul(kt,qt),Ue=Ue+Math.imul(Dt,Vt)|0,_e=_e+Math.imul(Dt,Gt)|0,_e=_e+Math.imul(Tt,Vt)|0,Qe=Qe+Math.imul(Tt,Gt)|0,Ue=Ue+Math.imul(Ct,Yt)|0,_e=_e+Math.imul(Ct,Kt)|0,_e=_e+Math.imul(Rt,Yt)|0,Qe=Qe+Math.imul(Rt,Kt)|0,Ue=Ue+Math.imul(wt,zt)|0,_e=_e+Math.imul(wt,Jt)|0,_e=_e+Math.imul(St,zt)|0,Qe=Qe+Math.imul(St,Jt)|0,Ue=Ue+Math.imul(ht,Xt)|0,_e=_e+Math.imul(ht,ir)|0,_e=_e+Math.imul(gt,Xt)|0,Qe=Qe+Math.imul(gt,ir)|0,Ue=Ue+Math.imul(xt,er)|0,_e=_e+Math.imul(xt,fr)|0,_e=_e+Math.imul(yt,er)|0,Qe=Qe+Math.imul(yt,fr)|0,Ue=Ue+Math.imul(pt,sr)|0,_e=_e+Math.imul(pt,Ar)|0,_e=_e+Math.imul(mt,sr)|0,Qe=Qe+Math.imul(mt,Ar)|0,Ue=Ue+Math.imul(ft,ar)|0,_e=_e+Math.imul(ft,hr)|0,_e=_e+Math.imul(dt,ar)|0,Qe=Qe+Math.imul(dt,hr)|0;var Xr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,Ue=Math.imul(Mt,Vt),_e=Math.imul(Mt,Gt),_e=_e+Math.imul(kt,Vt)|0,Qe=Math.imul(kt,Gt),Ue=Ue+Math.imul(Dt,Yt)|0,_e=_e+Math.imul(Dt,Kt)|0,_e=_e+Math.imul(Tt,Yt)|0,Qe=Qe+Math.imul(Tt,Kt)|0,Ue=Ue+Math.imul(Ct,zt)|0,_e=_e+Math.imul(Ct,Jt)|0,_e=_e+Math.imul(Rt,zt)|0,Qe=Qe+Math.imul(Rt,Jt)|0,Ue=Ue+Math.imul(wt,Xt)|0,_e=_e+Math.imul(wt,ir)|0,_e=_e+Math.imul(St,Xt)|0,Qe=Qe+Math.imul(St,ir)|0,Ue=Ue+Math.imul(ht,er)|0,_e=_e+Math.imul(ht,fr)|0,_e=_e+Math.imul(gt,er)|0,Qe=Qe+Math.imul(gt,fr)|0,Ue=Ue+Math.imul(xt,sr)|0,_e=_e+Math.imul(xt,Ar)|0,_e=_e+Math.imul(yt,sr)|0,Qe=Qe+Math.imul(yt,Ar)|0,Ue=Ue+Math.imul(pt,ar)|0,_e=_e+Math.imul(pt,hr)|0,_e=_e+Math.imul(mt,ar)|0,Qe=Qe+Math.imul(mt,hr)|0;var yn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(yn>>>26)|0,yn&=67108863,Ue=Math.imul(Mt,Yt),_e=Math.imul(Mt,Kt),_e=_e+Math.imul(kt,Yt)|0,Qe=Math.imul(kt,Kt),Ue=Ue+Math.imul(Dt,zt)|0,_e=_e+Math.imul(Dt,Jt)|0,_e=_e+Math.imul(Tt,zt)|0,Qe=Qe+Math.imul(Tt,Jt)|0,Ue=Ue+Math.imul(Ct,Xt)|0,_e=_e+Math.imul(Ct,ir)|0,_e=_e+Math.imul(Rt,Xt)|0,Qe=Qe+Math.imul(Rt,ir)|0,Ue=Ue+Math.imul(wt,er)|0,_e=_e+Math.imul(wt,fr)|0,_e=_e+Math.imul(St,er)|0,Qe=Qe+Math.imul(St,fr)|0,Ue=Ue+Math.imul(ht,sr)|0,_e=_e+Math.imul(ht,Ar)|0,_e=_e+Math.imul(gt,sr)|0,Qe=Qe+Math.imul(gt,Ar)|0,Ue=Ue+Math.imul(xt,ar)|0,_e=_e+Math.imul(xt,hr)|0,_e=_e+Math.imul(yt,ar)|0,Qe=Qe+Math.imul(yt,hr)|0;var xn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(xn>>>26)|0,xn&=67108863,Ue=Math.imul(Mt,zt),_e=Math.imul(Mt,Jt),_e=_e+Math.imul(kt,zt)|0,Qe=Math.imul(kt,Jt),Ue=Ue+Math.imul(Dt,Xt)|0,_e=_e+Math.imul(Dt,ir)|0,_e=_e+Math.imul(Tt,Xt)|0,Qe=Qe+Math.imul(Tt,ir)|0,Ue=Ue+Math.imul(Ct,er)|0,_e=_e+Math.imul(Ct,fr)|0,_e=_e+Math.imul(Rt,er)|0,Qe=Qe+Math.imul(Rt,fr)|0,Ue=Ue+Math.imul(wt,sr)|0,_e=_e+Math.imul(wt,Ar)|0,_e=_e+Math.imul(St,sr)|0,Qe=Qe+Math.imul(St,Ar)|0,Ue=Ue+Math.imul(ht,ar)|0,_e=_e+Math.imul(ht,hr)|0,_e=_e+Math.imul(gt,ar)|0,Qe=Qe+Math.imul(gt,hr)|0;var dn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(dn>>>26)|0,dn&=67108863,Ue=Math.imul(Mt,Xt),_e=Math.imul(Mt,ir),_e=_e+Math.imul(kt,Xt)|0,Qe=Math.imul(kt,ir),Ue=Ue+Math.imul(Dt,er)|0,_e=_e+Math.imul(Dt,fr)|0,_e=_e+Math.imul(Tt,er)|0,Qe=Qe+Math.imul(Tt,fr)|0,Ue=Ue+Math.imul(Ct,sr)|0,_e=_e+Math.imul(Ct,Ar)|0,_e=_e+Math.imul(Rt,sr)|0,Qe=Qe+Math.imul(Rt,Ar)|0,Ue=Ue+Math.imul(wt,ar)|0,_e=_e+Math.imul(wt,hr)|0,_e=_e+Math.imul(St,ar)|0,Qe=Qe+Math.imul(St,hr)|0;var cn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(cn>>>26)|0,cn&=67108863,Ue=Math.imul(Mt,er),_e=Math.imul(Mt,fr),_e=_e+Math.imul(kt,er)|0,Qe=Math.imul(kt,fr),Ue=Ue+Math.imul(Dt,sr)|0,_e=_e+Math.imul(Dt,Ar)|0,_e=_e+Math.imul(Tt,sr)|0,Qe=Qe+Math.imul(Tt,Ar)|0,Ue=Ue+Math.imul(Ct,ar)|0,_e=_e+Math.imul(Ct,hr)|0,_e=_e+Math.imul(Rt,ar)|0,Qe=Qe+Math.imul(Rt,hr)|0;var wn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(wn>>>26)|0,wn&=67108863,Ue=Math.imul(Mt,sr),_e=Math.imul(Mt,Ar),_e=_e+Math.imul(kt,sr)|0,Qe=Math.imul(kt,Ar),Ue=Ue+Math.imul(Dt,ar)|0,_e=_e+Math.imul(Dt,hr)|0,_e=_e+Math.imul(Tt,ar)|0,Qe=Qe+Math.imul(Tt,hr)|0;var Cn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Ue=Math.imul(Mt,ar),_e=Math.imul(Mt,hr),_e=_e+Math.imul(kt,ar)|0,Qe=Math.imul(kt,hr);var Rr=(We+Ue|0)+((_e&8191)<<13)|0;return We=(Qe+(_e>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,qe[0]=Lr,qe[1]=Pr,qe[2]=Yr,qe[3]=Wr,qe[4]=Zr,qe[5]=Jr,qe[6]=Gr,qe[7]=sn,qe[8]=ln,qe[9]=hn,qe[10]=pn,qe[11]=Xr,qe[12]=yn,qe[13]=xn,qe[14]=dn,qe[15]=cn,qe[16]=wn,qe[17]=Cn,qe[18]=Rr,We!==0&&(qe[19]=We,Re.length++),Re};Math.imul||($e=Ne);function ke(Ge,ve,Be){Be.negative=ve.negative^Ge.negative,Be.length=Ge.length+ve.length;for(var Re=0,Ie=0,Fe=0;Fe<Be.length-1;Fe++){var qe=Ie;Ie=0;for(var We=Re&67108863,Ue=Math.min(Fe,ve.length-1),_e=Math.max(0,Fe-Ge.length+1);_e<=Ue;_e++){var Qe=Fe-_e,tt=Ge.words[Qe]|0,it=ve.words[_e]|0,at=tt*it,ot=at&67108863;qe=qe+(at/67108864|0)|0,ot=ot+We|0,We=ot&67108863,qe=qe+(ot>>>26)|0,Ie+=qe>>>26,qe&=67108863}Be.words[Fe]=We,Re=qe,qe=Ie}return Re!==0?Be.words[Fe]=Re:Be.length--,Be.strip()}function je(Ge,ve,Be){var Re=new Ke;return Re.mulp(Ge,ve,Be)}ue.prototype.mulTo=function(ve,Be){var Re,Ie=this.length+ve.length;return this.length===10&&ve.length===10?Re=$e(this,ve,Be):Ie<63?Re=Ne(this,ve,Be):Ie<1024?Re=ke(this,ve,Be):Re=je(this,ve,Be),Re};function Ke(Ge,ve){this.x=Ge,this.y=ve}Ke.prototype.makeRBT=function(ve){for(var Be=new Array(ve),Re=ue.prototype._countBits(ve)-1,Ie=0;Ie<ve;Ie++)Be[Ie]=this.revBin(Ie,Re,ve);return Be},Ke.prototype.revBin=function(ve,Be,Re){if(ve===0||ve===Re-1)return ve;for(var Ie=0,Fe=0;Fe<Be;Fe++)Ie|=(ve&1)<<Be-Fe-1,ve>>=1;return Ie},Ke.prototype.permute=function(ve,Be,Re,Ie,Fe,qe){for(var We=0;We<qe;We++)Ie[We]=Be[ve[We]],Fe[We]=Re[ve[We]]},Ke.prototype.transform=function(ve,Be,Re,Ie,Fe,qe){this.permute(qe,ve,Be,Re,Ie,Fe);for(var We=1;We<Fe;We<<=1)for(var Ue=We<<1,_e=Math.cos(2*Math.PI/Ue),Qe=Math.sin(2*Math.PI/Ue),tt=0;tt<Fe;tt+=Ue)for(var it=_e,at=Qe,ot=0;ot<We;ot++){var lt=Re[tt+ot],st=Ie[tt+ot],ut=Re[tt+ot+We],ft=Ie[tt+ot+We],dt=it*ut-at*ft;ft=it*ft+at*ut,ut=dt,Re[tt+ot]=lt+ut,Ie[tt+ot]=st+ft,Re[tt+ot+We]=lt-ut,Ie[tt+ot+We]=st-ft,ot!==Ue&&(dt=_e*it-Qe*at,at=_e*at+Qe*it,it=dt)}},Ke.prototype.guessLen13b=function(ve,Be){var Re=Math.max(Be,ve)|1,Ie=Re&1,Fe=0;for(Re=Re/2|0;Re;Re=Re>>>1)Fe++;return 1<<Fe+1+Ie},Ke.prototype.conjugate=function(ve,Be,Re){if(!(Re<=1))for(var Ie=0;Ie<Re/2;Ie++){var Fe=ve[Ie];ve[Ie]=ve[Re-Ie-1],ve[Re-Ie-1]=Fe,Fe=Be[Ie],Be[Ie]=-Be[Re-Ie-1],Be[Re-Ie-1]=-Fe}},Ke.prototype.normalize13b=function(ve,Be){for(var Re=0,Ie=0;Ie<Be/2;Ie++){var Fe=Math.round(ve[2*Ie+1]/Be)*8192+Math.round(ve[2*Ie]/Be)+Re;ve[Ie]=Fe&67108863,Fe<67108864?Re=0:Re=Fe/67108864|0}return ve},Ke.prototype.convert13b=function(ve,Be,Re,Ie){for(var Fe=0,qe=0;qe<Be;qe++)Fe=Fe+(ve[qe]|0),Re[2*qe]=Fe&8191,Fe=Fe>>>13,Re[2*qe+1]=Fe&8191,Fe=Fe>>>13;for(qe=2*Be;qe<Ie;++qe)Re[qe]=0;oe(Fe===0),oe((Fe&-8192)===0)},Ke.prototype.stub=function(ve){for(var Be=new Array(ve),Re=0;Re<ve;Re++)Be[Re]=0;return Be},Ke.prototype.mulp=function(ve,Be,Re){var Ie=2*this.guessLen13b(ve.length,Be.length),Fe=this.makeRBT(Ie),qe=this.stub(Ie),We=new Array(Ie),Ue=new Array(Ie),_e=new Array(Ie),Qe=new Array(Ie),tt=new Array(Ie),it=new Array(Ie),at=Re.words;at.length=Ie,this.convert13b(ve.words,ve.length,We,Ie),this.convert13b(Be.words,Be.length,Qe,Ie),this.transform(We,qe,Ue,_e,Ie,Fe),this.transform(Qe,qe,tt,it,Ie,Fe);for(var ot=0;ot<Ie;ot++){var lt=Ue[ot]*tt[ot]-_e[ot]*it[ot];_e[ot]=Ue[ot]*it[ot]+_e[ot]*tt[ot],Ue[ot]=lt}return this.conjugate(Ue,_e,Ie),this.transform(Ue,_e,at,qe,Ie,Fe),this.conjugate(at,qe,Ie),this.normalize13b(at,Ie),Re.negative=ve.negative^Be.negative,Re.length=ve.length+Be.length,Re.strip()},ue.prototype.mul=function(ve){var Be=new ue(null);return Be.words=new Array(this.length+ve.length),this.mulTo(ve,Be)},ue.prototype.mulf=function(ve){var Be=new ue(null);return Be.words=new Array(this.length+ve.length),je(this,ve,Be)},ue.prototype.imul=function(ve){return this.clone().mulTo(ve,this)},ue.prototype.imuln=function(ve){oe(typeof ve=="number"),oe(ve<67108864);for(var Be=0,Re=0;Re<this.length;Re++){var Ie=(this.words[Re]|0)*ve,Fe=(Ie&67108863)+(Be&67108863);Be>>=26,Be+=Ie/67108864|0,Be+=Fe>>>26,this.words[Re]=Fe&67108863}return Be!==0&&(this.words[Re]=Be,this.length++),this},ue.prototype.muln=function(ve){return this.clone().imuln(ve)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(ve){var Be=Te(ve);if(Be.length===0)return new ue(1);for(var Re=this,Ie=0;Ie<Be.length&&Be[Ie]===0;Ie++,Re=Re.sqr());if(++Ie<Be.length)for(var Fe=Re.sqr();Ie<Be.length;Ie++,Fe=Fe.sqr())Be[Ie]!==0&&(Re=Re.mul(Fe));return Re},ue.prototype.iushln=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26,Ie=67108863>>>26-Be<<26-Be,Fe;if(Be!==0){var qe=0;for(Fe=0;Fe<this.length;Fe++){var We=this.words[Fe]&Ie,Ue=(this.words[Fe]|0)-We<<Be;this.words[Fe]=Ue|qe,qe=We>>>26-Be}qe&&(this.words[Fe]=qe,this.length++)}if(Re!==0){for(Fe=this.length-1;Fe>=0;Fe--)this.words[Fe+Re]=this.words[Fe];for(Fe=0;Fe<Re;Fe++)this.words[Fe]=0;this.length+=Re}return this.strip()},ue.prototype.ishln=function(ve){return oe(this.negative===0),this.iushln(ve)},ue.prototype.iushrn=function(ve,Be,Re){oe(typeof ve=="number"&&ve>=0);var Ie;Be?Ie=(Be-Be%26)/26:Ie=0;var Fe=ve%26,qe=Math.min((ve-Fe)/26,this.length),We=67108863^67108863>>>Fe<<Fe,Ue=Re;if(Ie-=qe,Ie=Math.max(0,Ie),Ue){for(var _e=0;_e<qe;_e++)Ue.words[_e]=this.words[_e];Ue.length=qe}if(qe!==0)if(this.length>qe)for(this.length-=qe,_e=0;_e<this.length;_e++)this.words[_e]=this.words[_e+qe];else this.words[0]=0,this.length=1;var Qe=0;for(_e=this.length-1;_e>=0&&(Qe!==0||_e>=Ie);_e--){var tt=this.words[_e]|0;this.words[_e]=Qe<<26-Fe|tt>>>Fe,Qe=tt&We}return Ue&&Qe!==0&&(Ue.words[Ue.length++]=Qe),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},ue.prototype.ishrn=function(ve,Be,Re){return oe(this.negative===0),this.iushrn(ve,Be,Re)},ue.prototype.shln=function(ve){return this.clone().ishln(ve)},ue.prototype.ushln=function(ve){return this.clone().iushln(ve)},ue.prototype.shrn=function(ve){return this.clone().ishrn(ve)},ue.prototype.ushrn=function(ve){return this.clone().iushrn(ve)},ue.prototype.testn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26,Ie=1<<Be;if(this.length<=Re)return!1;var Fe=this.words[Re];return!!(Fe&Ie)},ue.prototype.imaskn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Re)return this;if(Be!==0&&Re++,this.length=Math.min(Re,this.length),Be!==0){var Ie=67108863^67108863>>>Be<<Be;this.words[this.length-1]&=Ie}return this.strip()},ue.prototype.maskn=function(ve){return this.clone().imaskn(ve)},ue.prototype.iaddn=function(ve){return oe(typeof ve=="number"),oe(ve<67108864),ve<0?this.isubn(-ve):this.negative!==0?this.length===1&&(this.words[0]|0)<ve?(this.words[0]=ve-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ve),this.negative=1,this):this._iaddn(ve)},ue.prototype._iaddn=function(ve){this.words[0]+=ve;for(var Be=0;Be<this.length&&this.words[Be]>=67108864;Be++)this.words[Be]-=67108864,Be===this.length-1?this.words[Be+1]=1:this.words[Be+1]++;return this.length=Math.max(this.length,Be+1),this},ue.prototype.isubn=function(ve){if(oe(typeof ve=="number"),oe(ve<67108864),ve<0)return this.iaddn(-ve);if(this.negative!==0)return this.negative=0,this.iaddn(ve),this.negative=1,this;if(this.words[0]-=ve,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Be=0;Be<this.length&&this.words[Be]<0;Be++)this.words[Be]+=67108864,this.words[Be+1]-=1;return this.strip()},ue.prototype.addn=function(ve){return this.clone().iaddn(ve)},ue.prototype.subn=function(ve){return this.clone().isubn(ve)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(ve,Be,Re){var Ie=ve.length+Re,Fe;this._expand(Ie);var qe,We=0;for(Fe=0;Fe<ve.length;Fe++){qe=(this.words[Fe+Re]|0)+We;var Ue=(ve.words[Fe]|0)*Be;qe-=Ue&67108863,We=(qe>>26)-(Ue/67108864|0),this.words[Fe+Re]=qe&67108863}for(;Fe<this.length-Re;Fe++)qe=(this.words[Fe+Re]|0)+We,We=qe>>26,this.words[Fe+Re]=qe&67108863;if(We===0)return this.strip();for(oe(We===-1),We=0,Fe=0;Fe<this.length;Fe++)qe=-(this.words[Fe]|0)+We,We=qe>>26,this.words[Fe]=qe&67108863;return this.negative=1,this.strip()},ue.prototype._wordDiv=function(ve,Be){var Re=this.length-ve.length,Ie=this.clone(),Fe=ve,qe=Fe.words[Fe.length-1]|0,We=this._countBits(qe);Re=26-We,Re!==0&&(Fe=Fe.ushln(Re),Ie.iushln(Re),qe=Fe.words[Fe.length-1]|0);var Ue=Ie.length-Fe.length,_e;if(Be!=="mod"){_e=new ue(null),_e.length=Ue+1,_e.words=new Array(_e.length);for(var Qe=0;Qe<_e.length;Qe++)_e.words[Qe]=0}var tt=Ie.clone()._ishlnsubmul(Fe,1,Ue);tt.negative===0&&(Ie=tt,_e&&(_e.words[Ue]=1));for(var it=Ue-1;it>=0;it--){var at=(Ie.words[Fe.length+it]|0)*67108864+(Ie.words[Fe.length+it-1]|0);for(at=Math.min(at/qe|0,67108863),Ie._ishlnsubmul(Fe,at,it);Ie.negative!==0;)at--,Ie.negative=0,Ie._ishlnsubmul(Fe,1,it),Ie.isZero()||(Ie.negative^=1);_e&&(_e.words[it]=at)}return _e&&_e.strip(),Ie.strip(),Be!=="div"&&Re!==0&&Ie.iushrn(Re),{div:_e||null,mod:Ie}},ue.prototype.divmod=function(ve,Be,Re){if(oe(!ve.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var Ie,Fe,qe;return this.negative!==0&&ve.negative===0?(qe=this.neg().divmod(ve,Be),Be!=="mod"&&(Ie=qe.div.neg()),Be!=="div"&&(Fe=qe.mod.neg(),Re&&Fe.negative!==0&&Fe.iadd(ve)),{div:Ie,mod:Fe}):this.negative===0&&ve.negative!==0?(qe=this.divmod(ve.neg(),Be),Be!=="mod"&&(Ie=qe.div.neg()),{div:Ie,mod:qe.mod}):this.negative&ve.negative?(qe=this.neg().divmod(ve.neg(),Be),Be!=="div"&&(Fe=qe.mod.neg(),Re&&Fe.negative!==0&&Fe.isub(ve)),{div:qe.div,mod:Fe}):ve.length>this.length||this.cmp(ve)<0?{div:new ue(0),mod:this}:ve.length===1?Be==="div"?{div:this.divn(ve.words[0]),mod:null}:Be==="mod"?{div:null,mod:new ue(this.modn(ve.words[0]))}:{div:this.divn(ve.words[0]),mod:new ue(this.modn(ve.words[0]))}:this._wordDiv(ve,Be)},ue.prototype.div=function(ve){return this.divmod(ve,"div",!1).div},ue.prototype.mod=function(ve){return this.divmod(ve,"mod",!1).mod},ue.prototype.umod=function(ve){return this.divmod(ve,"mod",!0).mod},ue.prototype.divRound=function(ve){var Be=this.divmod(ve);if(Be.mod.isZero())return Be.div;var Re=Be.div.negative!==0?Be.mod.isub(ve):Be.mod,Ie=ve.ushrn(1),Fe=ve.andln(1),qe=Re.cmp(Ie);return qe<0||Fe===1&&qe===0?Be.div:Be.div.negative!==0?Be.div.isubn(1):Be.div.iaddn(1)},ue.prototype.modn=function(ve){oe(ve<=67108863);for(var Be=(1<<26)%ve,Re=0,Ie=this.length-1;Ie>=0;Ie--)Re=(Be*Re+(this.words[Ie]|0))%ve;return Re},ue.prototype.idivn=function(ve){oe(ve<=67108863);for(var Be=0,Re=this.length-1;Re>=0;Re--){var Ie=(this.words[Re]|0)+Be*67108864;this.words[Re]=Ie/ve|0,Be=Ie%ve}return this.strip()},ue.prototype.divn=function(ve){return this.clone().idivn(ve)},ue.prototype.egcd=function(ve){oe(ve.negative===0),oe(!ve.isZero());var Be=this,Re=ve.clone();Be.negative!==0?Be=Be.umod(ve):Be=Be.clone();for(var Ie=new ue(1),Fe=new ue(0),qe=new ue(0),We=new ue(1),Ue=0;Be.isEven()&&Re.isEven();)Be.iushrn(1),Re.iushrn(1),++Ue;for(var _e=Re.clone(),Qe=Be.clone();!Be.isZero();){for(var tt=0,it=1;!(Be.words[0]&it)&&tt<26;++tt,it<<=1);if(tt>0)for(Be.iushrn(tt);tt-- >0;)(Ie.isOdd()||Fe.isOdd())&&(Ie.iadd(_e),Fe.isub(Qe)),Ie.iushrn(1),Fe.iushrn(1);for(var at=0,ot=1;!(Re.words[0]&ot)&&at<26;++at,ot<<=1);if(at>0)for(Re.iushrn(at);at-- >0;)(qe.isOdd()||We.isOdd())&&(qe.iadd(_e),We.isub(Qe)),qe.iushrn(1),We.iushrn(1);Be.cmp(Re)>=0?(Be.isub(Re),Ie.isub(qe),Fe.isub(We)):(Re.isub(Be),qe.isub(Ie),We.isub(Fe))}return{a:qe,b:We,gcd:Re.iushln(Ue)}},ue.prototype._invmp=function(ve){oe(ve.negative===0),oe(!ve.isZero());var Be=this,Re=ve.clone();Be.negative!==0?Be=Be.umod(ve):Be=Be.clone();for(var Ie=new ue(1),Fe=new ue(0),qe=Re.clone();Be.cmpn(1)>0&&Re.cmpn(1)>0;){for(var We=0,Ue=1;!(Be.words[0]&Ue)&&We<26;++We,Ue<<=1);if(We>0)for(Be.iushrn(We);We-- >0;)Ie.isOdd()&&Ie.iadd(qe),Ie.iushrn(1);for(var _e=0,Qe=1;!(Re.words[0]&Qe)&&_e<26;++_e,Qe<<=1);if(_e>0)for(Re.iushrn(_e);_e-- >0;)Fe.isOdd()&&Fe.iadd(qe),Fe.iushrn(1);Be.cmp(Re)>=0?(Be.isub(Re),Ie.isub(Fe)):(Re.isub(Be),Fe.isub(Ie))}var tt;return Be.cmpn(1)===0?tt=Ie:tt=Fe,tt.cmpn(0)<0&&tt.iadd(ve),tt},ue.prototype.gcd=function(ve){if(this.isZero())return ve.abs();if(ve.isZero())return this.abs();var Be=this.clone(),Re=ve.clone();Be.negative=0,Re.negative=0;for(var Ie=0;Be.isEven()&&Re.isEven();Ie++)Be.iushrn(1),Re.iushrn(1);do{for(;Be.isEven();)Be.iushrn(1);for(;Re.isEven();)Re.iushrn(1);var Fe=Be.cmp(Re);if(Fe<0){var qe=Be;Be=Re,Re=qe}else if(Fe===0||Re.cmpn(1)===0)break;Be.isub(Re)}while(!0);return Re.iushln(Ie)},ue.prototype.invm=function(ve){return this.egcd(ve).a.umod(ve)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(ve){return this.words[0]&ve},ue.prototype.bincn=function(ve){oe(typeof ve=="number");var Be=ve%26,Re=(ve-Be)/26,Ie=1<<Be;if(this.length<=Re)return this._expand(Re+1),this.words[Re]|=Ie,this;for(var Fe=Ie,qe=Re;Fe!==0&&qe<this.length;qe++){var We=this.words[qe]|0;We+=Fe,Fe=We>>>26,We&=67108863,this.words[qe]=We}return Fe!==0&&(this.words[qe]=Fe,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(ve){var Be=ve<0;if(this.negative!==0&&!Be)return-1;if(this.negative===0&&Be)return 1;this.strip();var Re;if(this.length>1)Re=1;else{Be&&(ve=-ve),oe(ve<=67108863,"Number is too big");var Ie=this.words[0]|0;Re=Ie===ve?0:Ie<ve?-1:1}return this.negative!==0?-Re|0:Re},ue.prototype.cmp=function(ve){if(this.negative!==0&&ve.negative===0)return-1;if(this.negative===0&&ve.negative!==0)return 1;var Be=this.ucmp(ve);return this.negative!==0?-Be|0:Be},ue.prototype.ucmp=function(ve){if(this.length>ve.length)return 1;if(this.length<ve.length)return-1;for(var Be=0,Re=this.length-1;Re>=0;Re--){var Ie=this.words[Re]|0,Fe=ve.words[Re]|0;if(Ie!==Fe){Ie<Fe?Be=-1:Ie>Fe&&(Be=1);break}}return Be},ue.prototype.gtn=function(ve){return this.cmpn(ve)===1},ue.prototype.gt=function(ve){return this.cmp(ve)===1},ue.prototype.gten=function(ve){return this.cmpn(ve)>=0},ue.prototype.gte=function(ve){return this.cmp(ve)>=0},ue.prototype.ltn=function(ve){return this.cmpn(ve)===-1},ue.prototype.lt=function(ve){return this.cmp(ve)===-1},ue.prototype.lten=function(ve){return this.cmpn(ve)<=0},ue.prototype.lte=function(ve){return this.cmp(ve)<=0},ue.prototype.eqn=function(ve){return this.cmpn(ve)===0},ue.prototype.eq=function(ve){return this.cmp(ve)===0},ue.red=function(ve){return new et(ve)},ue.prototype.toRed=function(ve){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),ve.convertTo(this)._forceRed(ve)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(ve){return this.red=ve,this},ue.prototype.forceRed=function(ve){return oe(!this.red,"Already a number in reduction context"),this._forceRed(ve)},ue.prototype.redAdd=function(ve){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,ve)},ue.prototype.redIAdd=function(ve){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ve)},ue.prototype.redSub=function(ve){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,ve)},ue.prototype.redISub=function(ve){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,ve)},ue.prototype.redShl=function(ve){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,ve)},ue.prototype.redMul=function(ve){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,ve),this.red.mul(this,ve)},ue.prototype.redIMul=function(ve){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,ve),this.red.imul(this,ve)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(ve){return oe(this.red&&!ve.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ve)};var Ye={k256:null,p224:null,p192:null,p25519:null};function ze(Ge,ve){this.name=Ge,this.p=new ue(ve,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ze.prototype._tmp=function(){var ve=new ue(null);return ve.words=new Array(Math.ceil(this.n/13)),ve},ze.prototype.ireduce=function(ve){var Be=ve,Re;do this.split(Be,this.tmp),Be=this.imulK(Be),Be=Be.iadd(this.tmp),Re=Be.bitLength();while(Re>this.n);var Ie=Re<this.n?-1:Be.ucmp(this.p);return Ie===0?(Be.words[0]=0,Be.length=1):Ie>0?Be.isub(this.p):Be.strip!==void 0?Be.strip():Be._strip(),Be},ze.prototype.split=function(ve,Be){ve.iushrn(this.n,0,Be)},ze.prototype.imulK=function(ve){return ve.imul(this.k)};function Xe(){ze.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(Xe,ze),Xe.prototype.split=function(ve,Be){for(var Re=4194303,Ie=Math.min(ve.length,9),Fe=0;Fe<Ie;Fe++)Be.words[Fe]=ve.words[Fe];if(Be.length=Ie,ve.length<=9){ve.words[0]=0,ve.length=1;return}var qe=ve.words[9];for(Be.words[Be.length++]=qe&Re,Fe=10;Fe<ve.length;Fe++){var We=ve.words[Fe]|0;ve.words[Fe-10]=(We&Re)<<4|qe>>>22,qe=We}qe>>>=22,ve.words[Fe-10]=qe,qe===0&&ve.length>10?ve.length-=10:ve.length-=9},Xe.prototype.imulK=function(ve){ve.words[ve.length]=0,ve.words[ve.length+1]=0,ve.length+=2;for(var Be=0,Re=0;Re<ve.length;Re++){var Ie=ve.words[Re]|0;Be+=Ie*977,ve.words[Re]=Be&67108863,Be=Ie*64+(Be/67108864|0)}return ve.words[ve.length-1]===0&&(ve.length--,ve.words[ve.length-1]===0&&ve.length--),ve};function Je(){ze.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(Je,ze);function rt(){ze.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(rt,ze);function Ze(){ze.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(Ze,ze),Ze.prototype.imulK=function(ve){for(var Be=0,Re=0;Re<ve.length;Re++){var Ie=(ve.words[Re]|0)*19+Be,Fe=Ie&67108863;Ie>>>=26,ve.words[Re]=Fe,Be=Ie}return Be!==0&&(ve.words[ve.length++]=Be),ve},ue._prime=function(ve){if(Ye[ve])return Ye[ve];var Be;if(ve==="k256")Be=new Xe;else if(ve==="p224")Be=new Je;else if(ve==="p192")Be=new rt;else if(ve==="p25519")Be=new Ze;else throw new Error("Unknown prime "+ve);return Ye[ve]=Be,Be};function et(Ge){if(typeof Ge=="string"){var ve=ue._prime(Ge);this.m=ve.p,this.prime=ve}else oe(Ge.gtn(1),"modulus must be greater than 1"),this.m=Ge,this.prime=null}et.prototype._verify1=function(ve){oe(ve.negative===0,"red works only with positives"),oe(ve.red,"red works only with red numbers")},et.prototype._verify2=function(ve,Be){oe((ve.negative|Be.negative)===0,"red works only with positives"),oe(ve.red&&ve.red===Be.red,"red works only with red numbers")},et.prototype.imod=function(ve){return this.prime?this.prime.ireduce(ve)._forceRed(this):ve.umod(this.m)._forceRed(this)},et.prototype.neg=function(ve){return ve.isZero()?ve.clone():this.m.sub(ve)._forceRed(this)},et.prototype.add=function(ve,Be){this._verify2(ve,Be);var Re=ve.add(Be);return Re.cmp(this.m)>=0&&Re.isub(this.m),Re._forceRed(this)},et.prototype.iadd=function(ve,Be){this._verify2(ve,Be);var Re=ve.iadd(Be);return Re.cmp(this.m)>=0&&Re.isub(this.m),Re},et.prototype.sub=function(ve,Be){this._verify2(ve,Be);var Re=ve.sub(Be);return Re.cmpn(0)<0&&Re.iadd(this.m),Re._forceRed(this)},et.prototype.isub=function(ve,Be){this._verify2(ve,Be);var Re=ve.isub(Be);return Re.cmpn(0)<0&&Re.iadd(this.m),Re},et.prototype.shl=function(ve,Be){return this._verify1(ve),this.imod(ve.ushln(Be))},et.prototype.imul=function(ve,Be){return this._verify2(ve,Be),this.imod(ve.imul(Be))},et.prototype.mul=function(ve,Be){return this._verify2(ve,Be),this.imod(ve.mul(Be))},et.prototype.isqr=function(ve){return this.imul(ve,ve.clone())},et.prototype.sqr=function(ve){return this.mul(ve,ve)},et.prototype.sqrt=function(ve){if(ve.isZero())return ve.clone();var Be=this.m.andln(3);if(oe(Be%2===1),Be===3){var Re=this.m.add(new ue(1)).iushrn(2);return this.pow(ve,Re)}for(var Ie=this.m.subn(1),Fe=0;!Ie.isZero()&&Ie.andln(1)===0;)Fe++,Ie.iushrn(1);oe(!Ie.isZero());var qe=new ue(1).toRed(this),We=qe.redNeg(),Ue=this.m.subn(1).iushrn(1),_e=this.m.bitLength();for(_e=new ue(2*_e*_e).toRed(this);this.pow(_e,Ue).cmp(We)!==0;)_e.redIAdd(We);for(var Qe=this.pow(_e,Ie),tt=this.pow(ve,Ie.addn(1).iushrn(1)),it=this.pow(ve,Ie),at=Fe;it.cmp(qe)!==0;){for(var ot=it,lt=0;ot.cmp(qe)!==0;lt++)ot=ot.redSqr();oe(lt<at);var st=this.pow(Qe,new ue(1).iushln(at-lt-1));tt=tt.redMul(st),Qe=st.redSqr(),it=it.redMul(Qe),at=lt}return tt},et.prototype.invm=function(ve){var Be=ve._invmp(this.m);return Be.negative!==0?(Be.negative=0,this.imod(Be).redNeg()):this.imod(Be)},et.prototype.pow=function(ve,Be){if(Be.isZero())return new ue(1).toRed(this);if(Be.cmpn(1)===0)return ve.clone();var Re=4,Ie=new Array(1<<Re);Ie[0]=new ue(1).toRed(this),Ie[1]=ve;for(var Fe=2;Fe<Ie.length;Fe++)Ie[Fe]=this.mul(Ie[Fe-1],ve);var qe=Ie[0],We=0,Ue=0,_e=Be.bitLength()%26;for(_e===0&&(_e=26),Fe=Be.length-1;Fe>=0;Fe--){for(var Qe=Be.words[Fe],tt=_e-1;tt>=0;tt--){var it=Qe>>tt&1;if(qe!==Ie[0]&&(qe=this.sqr(qe)),it===0&&We===0){Ue=0;continue}We<<=1,We|=it,Ue++,!(Ue!==Re&&(Fe!==0||tt!==0))&&(qe=this.mul(qe,Ie[We]),Ue=0,We=0)}_e=26}return qe},et.prototype.convertTo=function(ve){var Be=ve.umod(this.m);return Be===ve?Be.clone():Be},et.prototype.convertFrom=function(ve){var Be=ve.clone();return Be.red=null,Be},ue.mont=function(ve){return new nt(ve)};function nt(Ge){et.call(this,Ge),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(nt,et),nt.prototype.convertTo=function(ve){return this.imod(ve.ushln(this.shift))},nt.prototype.convertFrom=function(ve){var Be=this.imod(ve.mul(this.rinv));return Be.red=null,Be},nt.prototype.imul=function(ve,Be){if(ve.isZero()||Be.isZero())return ve.words[0]=0,ve.length=1,ve;var Re=ve.imul(Be),Ie=Re.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Fe=Re.isub(Ie).iushrn(this.shift),qe=Fe;return Fe.cmp(this.m)>=0?qe=Fe.isub(this.m):Fe.cmpn(0)<0&&(qe=Fe.iadd(this.m)),qe._forceRed(this)},nt.prototype.mul=function(ve,Be){if(ve.isZero()||Be.isZero())return new ue(0)._forceRed(this);var Re=ve.mul(Be),Ie=Re.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Fe=Re.isub(Ie).iushrn(this.shift),qe=Fe;return Fe.cmp(this.m)>=0?qe=Fe.isub(this.m):Fe.cmpn(0)<0&&(qe=Fe.iadd(this.m)),qe._forceRed(this)},nt.prototype.invm=function(ve){var Be=this.imod(ve._invmp(this.m).mul(this.r2));return Be._forceRed(this)}})(K,commonjsGlobal)}(bn$3)),bn$3.exports}var utils$1={},hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(K){var J=K;function ne(ue,Ae){if(Array.isArray(ue))return ue.slice();if(!ue)return[];var pe=[];if(typeof ue!="string"){for(var xe=0;xe<ue.length;xe++)pe[xe]=ue[xe]|0;return pe}if(Ae==="hex"){ue=ue.replace(/[^a-z0-9]+/ig,""),ue.length%2!==0&&(ue="0"+ue);for(var xe=0;xe<ue.length;xe+=2)pe.push(parseInt(ue[xe]+ue[xe+1],16))}else for(var xe=0;xe<ue.length;xe++){var me=ue.charCodeAt(xe),ge=me>>8,ye=me&255;ge?pe.push(ge,ye):pe.push(ye)}return pe}J.toArray=ne;function oe(ue){return ue.length===1?"0"+ue:ue}J.zero2=oe;function ce(ue){for(var Ae="",pe=0;pe<ue.length;pe++)Ae+=oe(ue[pe].toString(16));return Ae}J.toHex=ce,J.encode=function(Ae,pe){return pe==="hex"?ce(Ae):Ae}}(utils$1)),utils$1}var hasRequiredUtils$1;function requireUtils$1(){return hasRequiredUtils$1||(hasRequiredUtils$1=1,function(K){var J=K,ne=requireBn$3(),oe=requireMinimalisticAssert(),ce=requireUtils$2();J.assert=oe,J.toArray=ce.toArray,J.zero2=ce.zero2,J.toHex=ce.toHex,J.encode=ce.encode;function ue(ge,ye,Se){var Te=new Array(Math.max(ge.bitLength(),Se)+1),Ne;for(Ne=0;Ne<Te.length;Ne+=1)Te[Ne]=0;var $e=1<<ye+1,ke=ge.clone();for(Ne=0;Ne<Te.length;Ne++){var je,Ke=ke.andln($e-1);ke.isOdd()?(Ke>($e>>1)-1?je=($e>>1)-Ke:je=Ke,ke.isubn(je)):je=0,Te[Ne]=je,ke.iushrn(1)}return Te}J.getNAF=ue;function Ae(ge,ye){var Se=[[],[]];ge=ge.clone(),ye=ye.clone();for(var Te=0,Ne=0,$e;ge.cmpn(-Te)>0||ye.cmpn(-Ne)>0;){var ke=ge.andln(3)+Te&3,je=ye.andln(3)+Ne&3;ke===3&&(ke=-1),je===3&&(je=-1);var Ke;ke&1?($e=ge.andln(7)+Te&7,($e===3||$e===5)&&je===2?Ke=-ke:Ke=ke):Ke=0,Se[0].push(Ke);var Ye;je&1?($e=ye.andln(7)+Ne&7,($e===3||$e===5)&&ke===2?Ye=-je:Ye=je):Ye=0,Se[1].push(Ye),2*Te===Ke+1&&(Te=1-Te),2*Ne===Ye+1&&(Ne=1-Ne),ge.iushrn(1),ye.iushrn(1)}return Se}J.getJSF=Ae;function pe(ge,ye,Se){var Te="_"+ye;ge.prototype[ye]=function(){return this[Te]!==void 0?this[Te]:this[Te]=Se.call(this)}}J.cachedProperty=pe;function xe(ge){return typeof ge=="string"?J.toArray(ge,"hex"):ge}J.parseBytes=xe;function me(ge){return new ne(ge,"hex","le")}J.intFromLE=me}(utils$2)),utils$2}var curve={},base$1,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$1;hasRequiredBase$1=1;var K=requireBn$3(),J=requireUtils$1(),ne=J.getNAF,oe=J.getJSF,ce=J.assert;function ue(pe,xe){this.type=pe,this.p=new K(xe.p,16),this.red=xe.prime?K.red(xe.prime):K.mont(this.p),this.zero=new K(0).toRed(this.red),this.one=new K(1).toRed(this.red),this.two=new K(2).toRed(this.red),this.n=xe.n&&new K(xe.n,16),this.g=xe.g&&this.pointFromJSON(xe.g,xe.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var me=this.n&&this.p.div(this.n);!me||me.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$1=ue,ue.prototype.point=function(){throw new Error("Not implemented")},ue.prototype.validate=function(){throw new Error("Not implemented")},ue.prototype._fixedNafMul=function(xe,me){ce(xe.precomputed);var ge=xe._getDoubles(),ye=ne(me,1,this._bitLength),Se=(1<<ge.step+1)-(ge.step%2===0?2:1);Se/=3;var Te=[],Ne,$e;for(Ne=0;Ne<ye.length;Ne+=ge.step){$e=0;for(var ke=Ne+ge.step-1;ke>=Ne;ke--)$e=($e<<1)+ye[ke];Te.push($e)}for(var je=this.jpoint(null,null,null),Ke=this.jpoint(null,null,null),Ye=Se;Ye>0;Ye--){for(Ne=0;Ne<Te.length;Ne++)$e=Te[Ne],$e===Ye?Ke=Ke.mixedAdd(ge.points[Ne]):$e===-Ye&&(Ke=Ke.mixedAdd(ge.points[Ne].neg()));je=je.add(Ke)}return je.toP()},ue.prototype._wnafMul=function(xe,me){var ge=4,ye=xe._getNAFPoints(ge);ge=ye.wnd;for(var Se=ye.points,Te=ne(me,ge,this._bitLength),Ne=this.jpoint(null,null,null),$e=Te.length-1;$e>=0;$e--){for(var ke=0;$e>=0&&Te[$e]===0;$e--)ke++;if($e>=0&&ke++,Ne=Ne.dblp(ke),$e<0)break;var je=Te[$e];ce(je!==0),xe.type==="affine"?je>0?Ne=Ne.mixedAdd(Se[je-1>>1]):Ne=Ne.mixedAdd(Se[-je-1>>1].neg()):je>0?Ne=Ne.add(Se[je-1>>1]):Ne=Ne.add(Se[-je-1>>1].neg())}return xe.type==="affine"?Ne.toP():Ne},ue.prototype._wnafMulAdd=function(xe,me,ge,ye,Se){var Te=this._wnafT1,Ne=this._wnafT2,$e=this._wnafT3,ke=0,je,Ke,Ye;for(je=0;je<ye;je++){Ye=me[je];var ze=Ye._getNAFPoints(xe);Te[je]=ze.wnd,Ne[je]=ze.points}for(je=ye-1;je>=1;je-=2){var Xe=je-1,Je=je;if(Te[Xe]!==1||Te[Je]!==1){$e[Xe]=ne(ge[Xe],Te[Xe],this._bitLength),$e[Je]=ne(ge[Je],Te[Je],this._bitLength),ke=Math.max($e[Xe].length,ke),ke=Math.max($e[Je].length,ke);continue}var rt=[me[Xe],null,null,me[Je]];me[Xe].y.cmp(me[Je].y)===0?(rt[1]=me[Xe].add(me[Je]),rt[2]=me[Xe].toJ().mixedAdd(me[Je].neg())):me[Xe].y.cmp(me[Je].y.redNeg())===0?(rt[1]=me[Xe].toJ().mixedAdd(me[Je]),rt[2]=me[Xe].add(me[Je].neg())):(rt[1]=me[Xe].toJ().mixedAdd(me[Je]),rt[2]=me[Xe].toJ().mixedAdd(me[Je].neg()));var Ze=[-3,-1,-5,-7,0,7,5,1,3],et=oe(ge[Xe],ge[Je]);for(ke=Math.max(et[0].length,ke),$e[Xe]=new Array(ke),$e[Je]=new Array(ke),Ke=0;Ke<ke;Ke++){var nt=et[0][Ke]|0,Ge=et[1][Ke]|0;$e[Xe][Ke]=Ze[(nt+1)*3+(Ge+1)],$e[Je][Ke]=0,Ne[Xe]=rt}}var ve=this.jpoint(null,null,null),Be=this._wnafT4;for(je=ke;je>=0;je--){for(var Re=0;je>=0;){var Ie=!0;for(Ke=0;Ke<ye;Ke++)Be[Ke]=$e[Ke][je]|0,Be[Ke]!==0&&(Ie=!1);if(!Ie)break;Re++,je--}if(je>=0&&Re++,ve=ve.dblp(Re),je<0)break;for(Ke=0;Ke<ye;Ke++){var Fe=Be[Ke];Fe!==0&&(Fe>0?Ye=Ne[Ke][Fe-1>>1]:Fe<0&&(Ye=Ne[Ke][-Fe-1>>1].neg()),Ye.type==="affine"?ve=ve.mixedAdd(Ye):ve=ve.add(Ye))}}for(je=0;je<ye;je++)Ne[je]=null;return Se?ve:ve.toP()};function Ae(pe,xe){this.curve=pe,this.type=xe,this.precomputed=null}return ue.BasePoint=Ae,Ae.prototype.eq=function(){throw new Error("Not implemented")},Ae.prototype.validate=function(){return this.curve.validate(this)},ue.prototype.decodePoint=function(xe,me){xe=J.toArray(xe,me);var ge=this.p.byteLength();if((xe[0]===4||xe[0]===6||xe[0]===7)&&xe.length-1===2*ge){xe[0]===6?ce(xe[xe.length-1]%2===0):xe[0]===7&&ce(xe[xe.length-1]%2===1);var ye=this.point(xe.slice(1,1+ge),xe.slice(1+ge,1+2*ge));return ye}else if((xe[0]===2||xe[0]===3)&&xe.length-1===ge)return this.pointFromX(xe.slice(1,1+ge),xe[0]===3);throw new Error("Unknown point format")},Ae.prototype.encodeCompressed=function(xe){return this.encode(xe,!0)},Ae.prototype._encode=function(xe){var me=this.curve.p.byteLength(),ge=this.getX().toArray("be",me);return xe?[this.getY().isEven()?2:3].concat(ge):[4].concat(ge,this.getY().toArray("be",me))},Ae.prototype.encode=function(xe,me){return J.encode(this._encode(me),xe)},Ae.prototype.precompute=function(xe){if(this.precomputed)return this;var me={doubles:null,naf:null,beta:null};return me.naf=this._getNAFPoints(8),me.doubles=this._getDoubles(4,xe),me.beta=this._getBeta(),this.precomputed=me,this},Ae.prototype._hasDoubles=function(xe){if(!this.precomputed)return!1;var me=this.precomputed.doubles;return me?me.points.length>=Math.ceil((xe.bitLength()+1)/me.step):!1},Ae.prototype._getDoubles=function(xe,me){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var ge=[this],ye=this,Se=0;Se<me;Se+=xe){for(var Te=0;Te<xe;Te++)ye=ye.dbl();ge.push(ye)}return{step:xe,points:ge}},Ae.prototype._getNAFPoints=function(xe){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var me=[this],ge=(1<<xe)-1,ye=ge===1?null:this.dbl(),Se=1;Se<ge;Se++)me[Se]=me[Se-1].add(ye);return{wnd:xe,points:me}},Ae.prototype._getBeta=function(){return null},Ae.prototype.dblp=function(xe){for(var me=this,ge=0;ge<xe;ge++)me=me.dbl();return me},base$1}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var K=requireUtils$1(),J=requireBn$3(),ne=requireInherits_browser(),oe=requireBase$1(),ce=K.assert;function ue(xe){oe.call(this,"short",xe),this.a=new J(xe.a,16).toRed(this.red),this.b=new J(xe.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(xe),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}ne(ue,oe),short=ue,ue.prototype._getEndomorphism=function(me){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var ge,ye;if(me.beta)ge=new J(me.beta,16).toRed(this.red);else{var Se=this._getEndoRoots(this.p);ge=Se[0].cmp(Se[1])<0?Se[0]:Se[1],ge=ge.toRed(this.red)}if(me.lambda)ye=new J(me.lambda,16);else{var Te=this._getEndoRoots(this.n);this.g.mul(Te[0]).x.cmp(this.g.x.redMul(ge))===0?ye=Te[0]:(ye=Te[1],ce(this.g.mul(ye).x.cmp(this.g.x.redMul(ge))===0))}var Ne;return me.basis?Ne=me.basis.map(function($e){return{a:new J($e.a,16),b:new J($e.b,16)}}):Ne=this._getEndoBasis(ye),{beta:ge,lambda:ye,basis:Ne}}},ue.prototype._getEndoRoots=function(me){var ge=me===this.p?this.red:J.mont(me),ye=new J(2).toRed(ge).redInvm(),Se=ye.redNeg(),Te=new J(3).toRed(ge).redNeg().redSqrt().redMul(ye),Ne=Se.redAdd(Te).fromRed(),$e=Se.redSub(Te).fromRed();return[Ne,$e]},ue.prototype._getEndoBasis=function(me){for(var ge=this.n.ushrn(Math.floor(this.n.bitLength()/2)),ye=me,Se=this.n.clone(),Te=new J(1),Ne=new J(0),$e=new J(0),ke=new J(1),je,Ke,Ye,ze,Xe,Je,rt,Ze=0,et,nt;ye.cmpn(0)!==0;){var Ge=Se.div(ye);et=Se.sub(Ge.mul(ye)),nt=$e.sub(Ge.mul(Te));var ve=ke.sub(Ge.mul(Ne));if(!Ye&&et.cmp(ge)<0)je=rt.neg(),Ke=Te,Ye=et.neg(),ze=nt;else if(Ye&&++Ze===2)break;rt=et,Se=ye,ye=et,$e=Te,Te=nt,ke=Ne,Ne=ve}Xe=et.neg(),Je=nt;var Be=Ye.sqr().add(ze.sqr()),Re=Xe.sqr().add(Je.sqr());return Re.cmp(Be)>=0&&(Xe=je,Je=Ke),Ye.negative&&(Ye=Ye.neg(),ze=ze.neg()),Xe.negative&&(Xe=Xe.neg(),Je=Je.neg()),[{a:Ye,b:ze},{a:Xe,b:Je}]},ue.prototype._endoSplit=function(me){var ge=this.endo.basis,ye=ge[0],Se=ge[1],Te=Se.b.mul(me).divRound(this.n),Ne=ye.b.neg().mul(me).divRound(this.n),$e=Te.mul(ye.a),ke=Ne.mul(Se.a),je=Te.mul(ye.b),Ke=Ne.mul(Se.b),Ye=me.sub($e).sub(ke),ze=je.add(Ke).neg();return{k1:Ye,k2:ze}},ue.prototype.pointFromX=function(me,ge){me=new J(me,16),me.red||(me=me.toRed(this.red));var ye=me.redSqr().redMul(me).redIAdd(me.redMul(this.a)).redIAdd(this.b),Se=ye.redSqrt();if(Se.redSqr().redSub(ye).cmp(this.zero)!==0)throw new Error("invalid point");var Te=Se.fromRed().isOdd();return(ge&&!Te||!ge&&Te)&&(Se=Se.redNeg()),this.point(me,Se)},ue.prototype.validate=function(me){if(me.inf)return!0;var ge=me.x,ye=me.y,Se=this.a.redMul(ge),Te=ge.redSqr().redMul(ge).redIAdd(Se).redIAdd(this.b);return ye.redSqr().redISub(Te).cmpn(0)===0},ue.prototype._endoWnafMulAdd=function(me,ge,ye){for(var Se=this._endoWnafT1,Te=this._endoWnafT2,Ne=0;Ne<me.length;Ne++){var $e=this._endoSplit(ge[Ne]),ke=me[Ne],je=ke._getBeta();$e.k1.negative&&($e.k1.ineg(),ke=ke.neg(!0)),$e.k2.negative&&($e.k2.ineg(),je=je.neg(!0)),Se[Ne*2]=ke,Se[Ne*2+1]=je,Te[Ne*2]=$e.k1,Te[Ne*2+1]=$e.k2}for(var Ke=this._wnafMulAdd(1,Se,Te,Ne*2,ye),Ye=0;Ye<Ne*2;Ye++)Se[Ye]=null,Te[Ye]=null;return Ke};function Ae(xe,me,ge,ye){oe.BasePoint.call(this,xe,"affine"),me===null&&ge===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new J(me,16),this.y=new J(ge,16),ye&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}ne(Ae,oe.BasePoint),ue.prototype.point=function(me,ge,ye){return new Ae(this,me,ge,ye)},ue.prototype.pointFromJSON=function(me,ge){return Ae.fromJSON(this,me,ge)},Ae.prototype._getBeta=function(){if(this.curve.endo){var me=this.precomputed;if(me&&me.beta)return me.beta;var ge=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(me){var ye=this.curve,Se=function(Te){return ye.point(Te.x.redMul(ye.endo.beta),Te.y)};me.beta=ge,ge.precomputed={beta:null,naf:me.naf&&{wnd:me.naf.wnd,points:me.naf.points.map(Se)},doubles:me.doubles&&{step:me.doubles.step,points:me.doubles.points.map(Se)}}}return ge}},Ae.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Ae.fromJSON=function(me,ge,ye){typeof ge=="string"&&(ge=JSON.parse(ge));var Se=me.point(ge[0],ge[1],ye);if(!ge[2])return Se;function Te($e){return me.point($e[0],$e[1],ye)}var Ne=ge[2];return Se.precomputed={beta:null,doubles:Ne.doubles&&{step:Ne.doubles.step,points:[Se].concat(Ne.doubles.points.map(Te))},naf:Ne.naf&&{wnd:Ne.naf.wnd,points:[Se].concat(Ne.naf.points.map(Te))}},Se},Ae.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Ae.prototype.isInfinity=function(){return this.inf},Ae.prototype.add=function(me){if(this.inf)return me;if(me.inf)return this;if(this.eq(me))return this.dbl();if(this.neg().eq(me))return this.curve.point(null,null);if(this.x.cmp(me.x)===0)return this.curve.point(null,null);var ge=this.y.redSub(me.y);ge.cmpn(0)!==0&&(ge=ge.redMul(this.x.redSub(me.x).redInvm()));var ye=ge.redSqr().redISub(this.x).redISub(me.x),Se=ge.redMul(this.x.redSub(ye)).redISub(this.y);return this.curve.point(ye,Se)},Ae.prototype.dbl=function(){if(this.inf)return this;var me=this.y.redAdd(this.y);if(me.cmpn(0)===0)return this.curve.point(null,null);var ge=this.curve.a,ye=this.x.redSqr(),Se=me.redInvm(),Te=ye.redAdd(ye).redIAdd(ye).redIAdd(ge).redMul(Se),Ne=Te.redSqr().redISub(this.x.redAdd(this.x)),$e=Te.redMul(this.x.redSub(Ne)).redISub(this.y);return this.curve.point(Ne,$e)},Ae.prototype.getX=function(){return this.x.fromRed()},Ae.prototype.getY=function(){return this.y.fromRed()},Ae.prototype.mul=function(me){return me=new J(me,16),this.isInfinity()?this:this._hasDoubles(me)?this.curve._fixedNafMul(this,me):this.curve.endo?this.curve._endoWnafMulAdd([this],[me]):this.curve._wnafMul(this,me)},Ae.prototype.mulAdd=function(me,ge,ye){var Se=[this,ge],Te=[me,ye];return this.curve.endo?this.curve._endoWnafMulAdd(Se,Te):this.curve._wnafMulAdd(1,Se,Te,2)},Ae.prototype.jmulAdd=function(me,ge,ye){var Se=[this,ge],Te=[me,ye];return this.curve.endo?this.curve._endoWnafMulAdd(Se,Te,!0):this.curve._wnafMulAdd(1,Se,Te,2,!0)},Ae.prototype.eq=function(me){return this===me||this.inf===me.inf&&(this.inf||this.x.cmp(me.x)===0&&this.y.cmp(me.y)===0)},Ae.prototype.neg=function(me){if(this.inf)return this;var ge=this.curve.point(this.x,this.y.redNeg());if(me&&this.precomputed){var ye=this.precomputed,Se=function(Te){return Te.neg()};ge.precomputed={naf:ye.naf&&{wnd:ye.naf.wnd,points:ye.naf.points.map(Se)},doubles:ye.doubles&&{step:ye.doubles.step,points:ye.doubles.points.map(Se)}}}return ge},Ae.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var me=this.curve.jpoint(this.x,this.y,this.curve.one);return me};function pe(xe,me,ge,ye){oe.BasePoint.call(this,xe,"jacobian"),me===null&&ge===null&&ye===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new J(0)):(this.x=new J(me,16),this.y=new J(ge,16),this.z=new J(ye,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return ne(pe,oe.BasePoint),ue.prototype.jpoint=function(me,ge,ye){return new pe(this,me,ge,ye)},pe.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var me=this.z.redInvm(),ge=me.redSqr(),ye=this.x.redMul(ge),Se=this.y.redMul(ge).redMul(me);return this.curve.point(ye,Se)},pe.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},pe.prototype.add=function(me){if(this.isInfinity())return me;if(me.isInfinity())return this;var ge=me.z.redSqr(),ye=this.z.redSqr(),Se=this.x.redMul(ge),Te=me.x.redMul(ye),Ne=this.y.redMul(ge.redMul(me.z)),$e=me.y.redMul(ye.redMul(this.z)),ke=Se.redSub(Te),je=Ne.redSub($e);if(ke.cmpn(0)===0)return je.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var Ke=ke.redSqr(),Ye=Ke.redMul(ke),ze=Se.redMul(Ke),Xe=je.redSqr().redIAdd(Ye).redISub(ze).redISub(ze),Je=je.redMul(ze.redISub(Xe)).redISub(Ne.redMul(Ye)),rt=this.z.redMul(me.z).redMul(ke);return this.curve.jpoint(Xe,Je,rt)},pe.prototype.mixedAdd=function(me){if(this.isInfinity())return me.toJ();if(me.isInfinity())return this;var ge=this.z.redSqr(),ye=this.x,Se=me.x.redMul(ge),Te=this.y,Ne=me.y.redMul(ge).redMul(this.z),$e=ye.redSub(Se),ke=Te.redSub(Ne);if($e.cmpn(0)===0)return ke.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var je=$e.redSqr(),Ke=je.redMul($e),Ye=ye.redMul(je),ze=ke.redSqr().redIAdd(Ke).redISub(Ye).redISub(Ye),Xe=ke.redMul(Ye.redISub(ze)).redISub(Te.redMul(Ke)),Je=this.z.redMul($e);return this.curve.jpoint(ze,Xe,Je)},pe.prototype.dblp=function(me){if(me===0)return this;if(this.isInfinity())return this;if(!me)return this.dbl();var ge;if(this.curve.zeroA||this.curve.threeA){var ye=this;for(ge=0;ge<me;ge++)ye=ye.dbl();return ye}var Se=this.curve.a,Te=this.curve.tinv,Ne=this.x,$e=this.y,ke=this.z,je=ke.redSqr().redSqr(),Ke=$e.redAdd($e);for(ge=0;ge<me;ge++){var Ye=Ne.redSqr(),ze=Ke.redSqr(),Xe=ze.redSqr(),Je=Ye.redAdd(Ye).redIAdd(Ye).redIAdd(Se.redMul(je)),rt=Ne.redMul(ze),Ze=Je.redSqr().redISub(rt.redAdd(rt)),et=rt.redISub(Ze),nt=Je.redMul(et);nt=nt.redIAdd(nt).redISub(Xe);var Ge=Ke.redMul(ke);ge+1<me&&(je=je.redMul(Xe)),Ne=Ze,ke=Ge,Ke=nt}return this.curve.jpoint(Ne,Ke.redMul(Te),ke)},pe.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},pe.prototype._zeroDbl=function(){var me,ge,ye;if(this.zOne){var Se=this.x.redSqr(),Te=this.y.redSqr(),Ne=Te.redSqr(),$e=this.x.redAdd(Te).redSqr().redISub(Se).redISub(Ne);$e=$e.redIAdd($e);var ke=Se.redAdd(Se).redIAdd(Se),je=ke.redSqr().redISub($e).redISub($e),Ke=Ne.redIAdd(Ne);Ke=Ke.redIAdd(Ke),Ke=Ke.redIAdd(Ke),me=je,ge=ke.redMul($e.redISub(je)).redISub(Ke),ye=this.y.redAdd(this.y)}else{var Ye=this.x.redSqr(),ze=this.y.redSqr(),Xe=ze.redSqr(),Je=this.x.redAdd(ze).redSqr().redISub(Ye).redISub(Xe);Je=Je.redIAdd(Je);var rt=Ye.redAdd(Ye).redIAdd(Ye),Ze=rt.redSqr(),et=Xe.redIAdd(Xe);et=et.redIAdd(et),et=et.redIAdd(et),me=Ze.redISub(Je).redISub(Je),ge=rt.redMul(Je.redISub(me)).redISub(et),ye=this.y.redMul(this.z),ye=ye.redIAdd(ye)}return this.curve.jpoint(me,ge,ye)},pe.prototype._threeDbl=function(){var me,ge,ye;if(this.zOne){var Se=this.x.redSqr(),Te=this.y.redSqr(),Ne=Te.redSqr(),$e=this.x.redAdd(Te).redSqr().redISub(Se).redISub(Ne);$e=$e.redIAdd($e);var ke=Se.redAdd(Se).redIAdd(Se).redIAdd(this.curve.a),je=ke.redSqr().redISub($e).redISub($e);me=je;var Ke=Ne.redIAdd(Ne);Ke=Ke.redIAdd(Ke),Ke=Ke.redIAdd(Ke),ge=ke.redMul($e.redISub(je)).redISub(Ke),ye=this.y.redAdd(this.y)}else{var Ye=this.z.redSqr(),ze=this.y.redSqr(),Xe=this.x.redMul(ze),Je=this.x.redSub(Ye).redMul(this.x.redAdd(Ye));Je=Je.redAdd(Je).redIAdd(Je);var rt=Xe.redIAdd(Xe);rt=rt.redIAdd(rt);var Ze=rt.redAdd(rt);me=Je.redSqr().redISub(Ze),ye=this.y.redAdd(this.z).redSqr().redISub(ze).redISub(Ye);var et=ze.redSqr();et=et.redIAdd(et),et=et.redIAdd(et),et=et.redIAdd(et),ge=Je.redMul(rt.redISub(me)).redISub(et)}return this.curve.jpoint(me,ge,ye)},pe.prototype._dbl=function(){var me=this.curve.a,ge=this.x,ye=this.y,Se=this.z,Te=Se.redSqr().redSqr(),Ne=ge.redSqr(),$e=ye.redSqr(),ke=Ne.redAdd(Ne).redIAdd(Ne).redIAdd(me.redMul(Te)),je=ge.redAdd(ge);je=je.redIAdd(je);var Ke=je.redMul($e),Ye=ke.redSqr().redISub(Ke.redAdd(Ke)),ze=Ke.redISub(Ye),Xe=$e.redSqr();Xe=Xe.redIAdd(Xe),Xe=Xe.redIAdd(Xe),Xe=Xe.redIAdd(Xe);var Je=ke.redMul(ze).redISub(Xe),rt=ye.redAdd(ye).redMul(Se);return this.curve.jpoint(Ye,Je,rt)},pe.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var me=this.x.redSqr(),ge=this.y.redSqr(),ye=this.z.redSqr(),Se=ge.redSqr(),Te=me.redAdd(me).redIAdd(me),Ne=Te.redSqr(),$e=this.x.redAdd(ge).redSqr().redISub(me).redISub(Se);$e=$e.redIAdd($e),$e=$e.redAdd($e).redIAdd($e),$e=$e.redISub(Ne);var ke=$e.redSqr(),je=Se.redIAdd(Se);je=je.redIAdd(je),je=je.redIAdd(je),je=je.redIAdd(je);var Ke=Te.redIAdd($e).redSqr().redISub(Ne).redISub(ke).redISub(je),Ye=ge.redMul(Ke);Ye=Ye.redIAdd(Ye),Ye=Ye.redIAdd(Ye);var ze=this.x.redMul(ke).redISub(Ye);ze=ze.redIAdd(ze),ze=ze.redIAdd(ze);var Xe=this.y.redMul(Ke.redMul(je.redISub(Ke)).redISub($e.redMul(ke)));Xe=Xe.redIAdd(Xe),Xe=Xe.redIAdd(Xe),Xe=Xe.redIAdd(Xe);var Je=this.z.redAdd($e).redSqr().redISub(ye).redISub(ke);return this.curve.jpoint(ze,Xe,Je)},pe.prototype.mul=function(me,ge){return me=new J(me,ge),this.curve._wnafMul(this,me)},pe.prototype.eq=function(me){if(me.type==="affine")return this.eq(me.toJ());if(this===me)return!0;var ge=this.z.redSqr(),ye=me.z.redSqr();if(this.x.redMul(ye).redISub(me.x.redMul(ge)).cmpn(0)!==0)return!1;var Se=ge.redMul(this.z),Te=ye.redMul(me.z);return this.y.redMul(Te).redISub(me.y.redMul(Se)).cmpn(0)===0},pe.prototype.eqXToP=function(me){var ge=this.z.redSqr(),ye=me.toRed(this.curve.red).redMul(ge);if(this.x.cmp(ye)===0)return!0;for(var Se=me.clone(),Te=this.curve.redN.redMul(ge);;){if(Se.iadd(this.curve.n),Se.cmp(this.curve.p)>=0)return!1;if(ye.redIAdd(Te),this.x.cmp(ye)===0)return!0}},pe.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},pe.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var K=requireBn$3(),J=requireInherits_browser(),ne=requireBase$1(),oe=requireUtils$1();function ce(Ae){ne.call(this,"mont",Ae),this.a=new K(Ae.a,16).toRed(this.red),this.b=new K(Ae.b,16).toRed(this.red),this.i4=new K(4).toRed(this.red).redInvm(),this.two=new K(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}J(ce,ne),mont=ce,ce.prototype.validate=function(pe){var xe=pe.normalize().x,me=xe.redSqr(),ge=me.redMul(xe).redAdd(me.redMul(this.a)).redAdd(xe),ye=ge.redSqrt();return ye.redSqr().cmp(ge)===0};function ue(Ae,pe,xe){ne.BasePoint.call(this,Ae,"projective"),pe===null&&xe===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new K(pe,16),this.z=new K(xe,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return J(ue,ne.BasePoint),ce.prototype.decodePoint=function(pe,xe){return this.point(oe.toArray(pe,xe),1)},ce.prototype.point=function(pe,xe){return new ue(this,pe,xe)},ce.prototype.pointFromJSON=function(pe){return ue.fromJSON(this,pe)},ue.prototype.precompute=function(){},ue.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},ue.fromJSON=function(pe,xe){return new ue(pe,xe[0],xe[1]||pe.one)},ue.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},ue.prototype.isInfinity=function(){return this.z.cmpn(0)===0},ue.prototype.dbl=function(){var pe=this.x.redAdd(this.z),xe=pe.redSqr(),me=this.x.redSub(this.z),ge=me.redSqr(),ye=xe.redSub(ge),Se=xe.redMul(ge),Te=ye.redMul(ge.redAdd(this.curve.a24.redMul(ye)));return this.curve.point(Se,Te)},ue.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},ue.prototype.diffAdd=function(pe,xe){var me=this.x.redAdd(this.z),ge=this.x.redSub(this.z),ye=pe.x.redAdd(pe.z),Se=pe.x.redSub(pe.z),Te=Se.redMul(me),Ne=ye.redMul(ge),$e=xe.z.redMul(Te.redAdd(Ne).redSqr()),ke=xe.x.redMul(Te.redISub(Ne).redSqr());return this.curve.point($e,ke)},ue.prototype.mul=function(pe){for(var xe=pe.clone(),me=this,ge=this.curve.point(null,null),ye=this,Se=[];xe.cmpn(0)!==0;xe.iushrn(1))Se.push(xe.andln(1));for(var Te=Se.length-1;Te>=0;Te--)Se[Te]===0?(me=me.diffAdd(ge,ye),ge=ge.dbl()):(ge=me.diffAdd(ge,ye),me=me.dbl());return ge},ue.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},ue.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},ue.prototype.eq=function(pe){return this.getX().cmp(pe.getX())===0},ue.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},ue.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var K=requireUtils$1(),J=requireBn$3(),ne=requireInherits_browser(),oe=requireBase$1(),ce=K.assert;function ue(pe){this.twisted=(pe.a|0)!==1,this.mOneA=this.twisted&&(pe.a|0)===-1,this.extended=this.mOneA,oe.call(this,"edwards",pe),this.a=new J(pe.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new J(pe.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new J(pe.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),ce(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(pe.c|0)===1}ne(ue,oe),edwards=ue,ue.prototype._mulA=function(xe){return this.mOneA?xe.redNeg():this.a.redMul(xe)},ue.prototype._mulC=function(xe){return this.oneC?xe:this.c.redMul(xe)},ue.prototype.jpoint=function(xe,me,ge,ye){return this.point(xe,me,ge,ye)},ue.prototype.pointFromX=function(xe,me){xe=new J(xe,16),xe.red||(xe=xe.toRed(this.red));var ge=xe.redSqr(),ye=this.c2.redSub(this.a.redMul(ge)),Se=this.one.redSub(this.c2.redMul(this.d).redMul(ge)),Te=ye.redMul(Se.redInvm()),Ne=Te.redSqrt();if(Ne.redSqr().redSub(Te).cmp(this.zero)!==0)throw new Error("invalid point");var $e=Ne.fromRed().isOdd();return(me&&!$e||!me&&$e)&&(Ne=Ne.redNeg()),this.point(xe,Ne)},ue.prototype.pointFromY=function(xe,me){xe=new J(xe,16),xe.red||(xe=xe.toRed(this.red));var ge=xe.redSqr(),ye=ge.redSub(this.c2),Se=ge.redMul(this.d).redMul(this.c2).redSub(this.a),Te=ye.redMul(Se.redInvm());if(Te.cmp(this.zero)===0){if(me)throw new Error("invalid point");return this.point(this.zero,xe)}var Ne=Te.redSqrt();if(Ne.redSqr().redSub(Te).cmp(this.zero)!==0)throw new Error("invalid point");return Ne.fromRed().isOdd()!==me&&(Ne=Ne.redNeg()),this.point(Ne,xe)},ue.prototype.validate=function(xe){if(xe.isInfinity())return!0;xe.normalize();var me=xe.x.redSqr(),ge=xe.y.redSqr(),ye=me.redMul(this.a).redAdd(ge),Se=this.c2.redMul(this.one.redAdd(this.d.redMul(me).redMul(ge)));return ye.cmp(Se)===0};function Ae(pe,xe,me,ge,ye){oe.BasePoint.call(this,pe,"projective"),xe===null&&me===null&&ge===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new J(xe,16),this.y=new J(me,16),this.z=ge?new J(ge,16):this.curve.one,this.t=ye&&new J(ye,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return ne(Ae,oe.BasePoint),ue.prototype.pointFromJSON=function(xe){return Ae.fromJSON(this,xe)},ue.prototype.point=function(xe,me,ge,ye){return new Ae(this,xe,me,ge,ye)},Ae.fromJSON=function(xe,me){return new Ae(xe,me[0],me[1],me[2])},Ae.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Ae.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},Ae.prototype._extDbl=function(){var xe=this.x.redSqr(),me=this.y.redSqr(),ge=this.z.redSqr();ge=ge.redIAdd(ge);var ye=this.curve._mulA(xe),Se=this.x.redAdd(this.y).redSqr().redISub(xe).redISub(me),Te=ye.redAdd(me),Ne=Te.redSub(ge),$e=ye.redSub(me),ke=Se.redMul(Ne),je=Te.redMul($e),Ke=Se.redMul($e),Ye=Ne.redMul(Te);return this.curve.point(ke,je,Ye,Ke)},Ae.prototype._projDbl=function(){var xe=this.x.redAdd(this.y).redSqr(),me=this.x.redSqr(),ge=this.y.redSqr(),ye,Se,Te,Ne,$e,ke;if(this.curve.twisted){Ne=this.curve._mulA(me);var je=Ne.redAdd(ge);this.zOne?(ye=xe.redSub(me).redSub(ge).redMul(je.redSub(this.curve.two)),Se=je.redMul(Ne.redSub(ge)),Te=je.redSqr().redSub(je).redSub(je)):($e=this.z.redSqr(),ke=je.redSub($e).redISub($e),ye=xe.redSub(me).redISub(ge).redMul(ke),Se=je.redMul(Ne.redSub(ge)),Te=je.redMul(ke))}else Ne=me.redAdd(ge),$e=this.curve._mulC(this.z).redSqr(),ke=Ne.redSub($e).redSub($e),ye=this.curve._mulC(xe.redISub(Ne)).redMul(ke),Se=this.curve._mulC(Ne).redMul(me.redISub(ge)),Te=Ne.redMul(ke);return this.curve.point(ye,Se,Te)},Ae.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Ae.prototype._extAdd=function(xe){var me=this.y.redSub(this.x).redMul(xe.y.redSub(xe.x)),ge=this.y.redAdd(this.x).redMul(xe.y.redAdd(xe.x)),ye=this.t.redMul(this.curve.dd).redMul(xe.t),Se=this.z.redMul(xe.z.redAdd(xe.z)),Te=ge.redSub(me),Ne=Se.redSub(ye),$e=Se.redAdd(ye),ke=ge.redAdd(me),je=Te.redMul(Ne),Ke=$e.redMul(ke),Ye=Te.redMul(ke),ze=Ne.redMul($e);return this.curve.point(je,Ke,ze,Ye)},Ae.prototype._projAdd=function(xe){var me=this.z.redMul(xe.z),ge=me.redSqr(),ye=this.x.redMul(xe.x),Se=this.y.redMul(xe.y),Te=this.curve.d.redMul(ye).redMul(Se),Ne=ge.redSub(Te),$e=ge.redAdd(Te),ke=this.x.redAdd(this.y).redMul(xe.x.redAdd(xe.y)).redISub(ye).redISub(Se),je=me.redMul(Ne).redMul(ke),Ke,Ye;return this.curve.twisted?(Ke=me.redMul($e).redMul(Se.redSub(this.curve._mulA(ye))),Ye=Ne.redMul($e)):(Ke=me.redMul($e).redMul(Se.redSub(ye)),Ye=this.curve._mulC(Ne).redMul($e)),this.curve.point(je,Ke,Ye)},Ae.prototype.add=function(xe){return this.isInfinity()?xe:xe.isInfinity()?this:this.curve.extended?this._extAdd(xe):this._projAdd(xe)},Ae.prototype.mul=function(xe){return this._hasDoubles(xe)?this.curve._fixedNafMul(this,xe):this.curve._wnafMul(this,xe)},Ae.prototype.mulAdd=function(xe,me,ge){return this.curve._wnafMulAdd(1,[this,me],[xe,ge],2,!1)},Ae.prototype.jmulAdd=function(xe,me,ge){return this.curve._wnafMulAdd(1,[this,me],[xe,ge],2,!0)},Ae.prototype.normalize=function(){if(this.zOne)return this;var xe=this.z.redInvm();return this.x=this.x.redMul(xe),this.y=this.y.redMul(xe),this.t&&(this.t=this.t.redMul(xe)),this.z=this.curve.one,this.zOne=!0,this},Ae.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Ae.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Ae.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Ae.prototype.eq=function(xe){return this===xe||this.getX().cmp(xe.getX())===0&&this.getY().cmp(xe.getY())===0},Ae.prototype.eqXToP=function(xe){var me=xe.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(me)===0)return!0;for(var ge=xe.clone(),ye=this.curve.redN.redMul(this.z);;){if(ge.iadd(this.curve.n),ge.cmp(this.curve.p)>=0)return!1;if(me.redIAdd(ye),this.x.cmp(me)===0)return!0}},Ae.prototype.toP=Ae.prototype.normalize,Ae.prototype.mixedAdd=Ae.prototype.add,edwards}var hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,function(K){var J=K;J.base=requireBase$1(),J.short=requireShort(),J.mont=requireMont(),J.edwards=requireEdwards()}(curve)),curve}var curves={},hash$1={},utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;var K=requireMinimalisticAssert(),J=requireInherits_browser();utils.inherits=J;function ne(ve,Be){return(ve.charCodeAt(Be)&64512)!==55296||Be<0||Be+1>=ve.length?!1:(ve.charCodeAt(Be+1)&64512)===56320}function oe(ve,Be){if(Array.isArray(ve))return ve.slice();if(!ve)return[];var Re=[];if(typeof ve=="string")if(Be){if(Be==="hex")for(ve=ve.replace(/[^a-z0-9]+/ig,""),ve.length%2!==0&&(ve="0"+ve),Fe=0;Fe<ve.length;Fe+=2)Re.push(parseInt(ve[Fe]+ve[Fe+1],16))}else for(var Ie=0,Fe=0;Fe<ve.length;Fe++){var qe=ve.charCodeAt(Fe);qe<128?Re[Ie++]=qe:qe<2048?(Re[Ie++]=qe>>6|192,Re[Ie++]=qe&63|128):ne(ve,Fe)?(qe=65536+((qe&1023)<<10)+(ve.charCodeAt(++Fe)&1023),Re[Ie++]=qe>>18|240,Re[Ie++]=qe>>12&63|128,Re[Ie++]=qe>>6&63|128,Re[Ie++]=qe&63|128):(Re[Ie++]=qe>>12|224,Re[Ie++]=qe>>6&63|128,Re[Ie++]=qe&63|128)}else for(Fe=0;Fe<ve.length;Fe++)Re[Fe]=ve[Fe]|0;return Re}utils.toArray=oe;function ce(ve){for(var Be="",Re=0;Re<ve.length;Re++)Be+=pe(ve[Re].toString(16));return Be}utils.toHex=ce;function ue(ve){var Be=ve>>>24|ve>>>8&65280|ve<<8&16711680|(ve&255)<<24;return Be>>>0}utils.htonl=ue;function Ae(ve,Be){for(var Re="",Ie=0;Ie<ve.length;Ie++){var Fe=ve[Ie];Be==="little"&&(Fe=ue(Fe)),Re+=xe(Fe.toString(16))}return Re}utils.toHex32=Ae;function pe(ve){return ve.length===1?"0"+ve:ve}utils.zero2=pe;function xe(ve){return ve.length===7?"0"+ve:ve.length===6?"00"+ve:ve.length===5?"000"+ve:ve.length===4?"0000"+ve:ve.length===3?"00000"+ve:ve.length===2?"000000"+ve:ve.length===1?"0000000"+ve:ve}utils.zero8=xe;function me(ve,Be,Re,Ie){var Fe=Re-Be;K(Fe%4===0);for(var qe=new Array(Fe/4),We=0,Ue=Be;We<qe.length;We++,Ue+=4){var _e;Ie==="big"?_e=ve[Ue]<<24|ve[Ue+1]<<16|ve[Ue+2]<<8|ve[Ue+3]:_e=ve[Ue+3]<<24|ve[Ue+2]<<16|ve[Ue+1]<<8|ve[Ue],qe[We]=_e>>>0}return qe}utils.join32=me;function ge(ve,Be){for(var Re=new Array(ve.length*4),Ie=0,Fe=0;Ie<ve.length;Ie++,Fe+=4){var qe=ve[Ie];Be==="big"?(Re[Fe]=qe>>>24,Re[Fe+1]=qe>>>16&255,Re[Fe+2]=qe>>>8&255,Re[Fe+3]=qe&255):(Re[Fe+3]=qe>>>24,Re[Fe+2]=qe>>>16&255,Re[Fe+1]=qe>>>8&255,Re[Fe]=qe&255)}return Re}utils.split32=ge;function ye(ve,Be){return ve>>>Be|ve<<32-Be}utils.rotr32=ye;function Se(ve,Be){return ve<<Be|ve>>>32-Be}utils.rotl32=Se;function Te(ve,Be){return ve+Be>>>0}utils.sum32=Te;function Ne(ve,Be,Re){return ve+Be+Re>>>0}utils.sum32_3=Ne;function $e(ve,Be,Re,Ie){return ve+Be+Re+Ie>>>0}utils.sum32_4=$e;function ke(ve,Be,Re,Ie,Fe){return ve+Be+Re+Ie+Fe>>>0}utils.sum32_5=ke;function je(ve,Be,Re,Ie){var Fe=ve[Be],qe=ve[Be+1],We=Ie+qe>>>0,Ue=(We<Ie?1:0)+Re+Fe;ve[Be]=Ue>>>0,ve[Be+1]=We}utils.sum64=je;function Ke(ve,Be,Re,Ie){var Fe=Be+Ie>>>0,qe=(Fe<Be?1:0)+ve+Re;return qe>>>0}utils.sum64_hi=Ke;function Ye(ve,Be,Re,Ie){var Fe=Be+Ie;return Fe>>>0}utils.sum64_lo=Ye;function ze(ve,Be,Re,Ie,Fe,qe,We,Ue){var _e=0,Qe=Be;Qe=Qe+Ie>>>0,_e+=Qe<Be?1:0,Qe=Qe+qe>>>0,_e+=Qe<qe?1:0,Qe=Qe+Ue>>>0,_e+=Qe<Ue?1:0;var tt=ve+Re+Fe+We+_e;return tt>>>0}utils.sum64_4_hi=ze;function Xe(ve,Be,Re,Ie,Fe,qe,We,Ue){var _e=Be+Ie+qe+Ue;return _e>>>0}utils.sum64_4_lo=Xe;function Je(ve,Be,Re,Ie,Fe,qe,We,Ue,_e,Qe){var tt=0,it=Be;it=it+Ie>>>0,tt+=it<Be?1:0,it=it+qe>>>0,tt+=it<qe?1:0,it=it+Ue>>>0,tt+=it<Ue?1:0,it=it+Qe>>>0,tt+=it<Qe?1:0;var at=ve+Re+Fe+We+_e+tt;return at>>>0}utils.sum64_5_hi=Je;function rt(ve,Be,Re,Ie,Fe,qe,We,Ue,_e,Qe){var tt=Be+Ie+qe+Ue+Qe;return tt>>>0}utils.sum64_5_lo=rt;function Ze(ve,Be,Re){var Ie=Be<<32-Re|ve>>>Re;return Ie>>>0}utils.rotr64_hi=Ze;function et(ve,Be,Re){var Ie=ve<<32-Re|Be>>>Re;return Ie>>>0}utils.rotr64_lo=et;function nt(ve,Be,Re){return ve>>>Re}utils.shr64_hi=nt;function Ge(ve,Be,Re){var Ie=ve<<32-Re|Be>>>Re;return Ie>>>0}return utils.shr64_lo=Ge,utils}var common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var K=requireUtils(),J=requireMinimalisticAssert();function ne(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$1.BlockHash=ne,ne.prototype.update=function(ce,ue){if(ce=K.toArray(ce,ue),this.pending?this.pending=this.pending.concat(ce):this.pending=ce,this.pendingTotal+=ce.length,this.pending.length>=this._delta8){ce=this.pending;var Ae=ce.length%this._delta8;this.pending=ce.slice(ce.length-Ae,ce.length),this.pending.length===0&&(this.pending=null),ce=K.join32(ce,0,ce.length-Ae,this.endian);for(var pe=0;pe<ce.length;pe+=this._delta32)this._update(ce,pe,pe+this._delta32)}return this},ne.prototype.digest=function(ce){return this.update(this._pad()),J(this.pending===null),this._digest(ce)},ne.prototype._pad=function(){var ce=this.pendingTotal,ue=this._delta8,Ae=ue-(ce+this.padLength)%ue,pe=new Array(Ae+this.padLength);pe[0]=128;for(var xe=1;xe<Ae;xe++)pe[xe]=0;if(ce<<=3,this.endian==="big"){for(var me=8;me<this.padLength;me++)pe[xe++]=0;pe[xe++]=0,pe[xe++]=0,pe[xe++]=0,pe[xe++]=0,pe[xe++]=ce>>>24&255,pe[xe++]=ce>>>16&255,pe[xe++]=ce>>>8&255,pe[xe++]=ce&255}else for(pe[xe++]=ce&255,pe[xe++]=ce>>>8&255,pe[xe++]=ce>>>16&255,pe[xe++]=ce>>>24&255,pe[xe++]=0,pe[xe++]=0,pe[xe++]=0,pe[xe++]=0,me=8;me<this.padLength;me++)pe[xe++]=0;return pe},common$1}var sha={},common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var K=requireUtils(),J=K.rotr32;function ne(ge,ye,Se,Te){if(ge===0)return oe(ye,Se,Te);if(ge===1||ge===3)return ue(ye,Se,Te);if(ge===2)return ce(ye,Se,Te)}common.ft_1=ne;function oe(ge,ye,Se){return ge&ye^~ge&Se}common.ch32=oe;function ce(ge,ye,Se){return ge&ye^ge&Se^ye&Se}common.maj32=ce;function ue(ge,ye,Se){return ge^ye^Se}common.p32=ue;function Ae(ge){return J(ge,2)^J(ge,13)^J(ge,22)}common.s0_256=Ae;function pe(ge){return J(ge,6)^J(ge,11)^J(ge,25)}common.s1_256=pe;function xe(ge){return J(ge,7)^J(ge,18)^ge>>>3}common.g0_256=xe;function me(ge){return J(ge,17)^J(ge,19)^ge>>>10}return common.g1_256=me,common}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var K=requireUtils(),J=requireCommon$1(),ne=requireCommon(),oe=K.rotl32,ce=K.sum32,ue=K.sum32_5,Ae=ne.ft_1,pe=J.BlockHash,xe=[1518500249,1859775393,2400959708,3395469782];function me(){if(!(this instanceof me))return new me;pe.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return K.inherits(me,pe),_1=me,me.blockSize=512,me.outSize=160,me.hmacStrength=80,me.padLength=64,me.prototype._update=function(ye,Se){for(var Te=this.W,Ne=0;Ne<16;Ne++)Te[Ne]=ye[Se+Ne];for(;Ne<Te.length;Ne++)Te[Ne]=oe(Te[Ne-3]^Te[Ne-8]^Te[Ne-14]^Te[Ne-16],1);var $e=this.h[0],ke=this.h[1],je=this.h[2],Ke=this.h[3],Ye=this.h[4];for(Ne=0;Ne<Te.length;Ne++){var ze=~~(Ne/20),Xe=ue(oe($e,5),Ae(ze,ke,je,Ke),Ye,Te[Ne],xe[ze]);Ye=Ke,Ke=je,je=oe(ke,30),ke=$e,$e=Xe}this.h[0]=ce(this.h[0],$e),this.h[1]=ce(this.h[1],ke),this.h[2]=ce(this.h[2],je),this.h[3]=ce(this.h[3],Ke),this.h[4]=ce(this.h[4],Ye)},me.prototype._digest=function(ye){return ye==="hex"?K.toHex32(this.h,"big"):K.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var K=requireUtils(),J=requireCommon$1(),ne=requireCommon(),oe=requireMinimalisticAssert(),ce=K.sum32,ue=K.sum32_4,Ae=K.sum32_5,pe=ne.ch32,xe=ne.maj32,me=ne.s0_256,ge=ne.s1_256,ye=ne.g0_256,Se=ne.g1_256,Te=J.BlockHash,Ne=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function $e(){if(!(this instanceof $e))return new $e;Te.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Ne,this.W=new Array(64)}return K.inherits($e,Te),_256=$e,$e.blockSize=512,$e.outSize=256,$e.hmacStrength=192,$e.padLength=64,$e.prototype._update=function(je,Ke){for(var Ye=this.W,ze=0;ze<16;ze++)Ye[ze]=je[Ke+ze];for(;ze<Ye.length;ze++)Ye[ze]=ue(Se(Ye[ze-2]),Ye[ze-7],ye(Ye[ze-15]),Ye[ze-16]);var Xe=this.h[0],Je=this.h[1],rt=this.h[2],Ze=this.h[3],et=this.h[4],nt=this.h[5],Ge=this.h[6],ve=this.h[7];for(oe(this.k.length===Ye.length),ze=0;ze<Ye.length;ze++){var Be=Ae(ve,ge(et),pe(et,nt,Ge),this.k[ze],Ye[ze]),Re=ce(me(Xe),xe(Xe,Je,rt));ve=Ge,Ge=nt,nt=et,et=ce(Ze,Be),Ze=rt,rt=Je,Je=Xe,Xe=ce(Be,Re)}this.h[0]=ce(this.h[0],Xe),this.h[1]=ce(this.h[1],Je),this.h[2]=ce(this.h[2],rt),this.h[3]=ce(this.h[3],Ze),this.h[4]=ce(this.h[4],et),this.h[5]=ce(this.h[5],nt),this.h[6]=ce(this.h[6],Ge),this.h[7]=ce(this.h[7],ve)},$e.prototype._digest=function(je){return je==="hex"?K.toHex32(this.h,"big"):K.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var K=requireUtils(),J=require_256();function ne(){if(!(this instanceof ne))return new ne;J.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return K.inherits(ne,J),_224=ne,ne.blockSize=512,ne.outSize=224,ne.hmacStrength=192,ne.padLength=64,ne.prototype._digest=function(ce){return ce==="hex"?K.toHex32(this.h.slice(0,7),"big"):K.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var K=requireUtils(),J=requireCommon$1(),ne=requireMinimalisticAssert(),oe=K.rotr64_hi,ce=K.rotr64_lo,ue=K.shr64_hi,Ae=K.shr64_lo,pe=K.sum64,xe=K.sum64_hi,me=K.sum64_lo,ge=K.sum64_4_hi,ye=K.sum64_4_lo,Se=K.sum64_5_hi,Te=K.sum64_5_lo,Ne=J.BlockHash,$e=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ke(){if(!(this instanceof ke))return new ke;Ne.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=$e,this.W=new Array(160)}K.inherits(ke,Ne),_512=ke,ke.blockSize=1024,ke.outSize=512,ke.hmacStrength=192,ke.padLength=128,ke.prototype._prepareBlock=function(Re,Ie){for(var Fe=this.W,qe=0;qe<32;qe++)Fe[qe]=Re[Ie+qe];for(;qe<Fe.length;qe+=2){var We=Ge(Fe[qe-4],Fe[qe-3]),Ue=ve(Fe[qe-4],Fe[qe-3]),_e=Fe[qe-14],Qe=Fe[qe-13],tt=et(Fe[qe-30],Fe[qe-29]),it=nt(Fe[qe-30],Fe[qe-29]),at=Fe[qe-32],ot=Fe[qe-31];Fe[qe]=ge(We,Ue,_e,Qe,tt,it,at,ot),Fe[qe+1]=ye(We,Ue,_e,Qe,tt,it,at,ot)}},ke.prototype._update=function(Re,Ie){this._prepareBlock(Re,Ie);var Fe=this.W,qe=this.h[0],We=this.h[1],Ue=this.h[2],_e=this.h[3],Qe=this.h[4],tt=this.h[5],it=this.h[6],at=this.h[7],ot=this.h[8],lt=this.h[9],st=this.h[10],ut=this.h[11],ft=this.h[12],dt=this.h[13],Bt=this.h[14],pt=this.h[15];ne(this.k.length===Fe.length);for(var mt=0;mt<Fe.length;mt+=2){var bt=Bt,xt=pt,yt=rt(ot,lt),It=Ze(ot,lt),ht=je(ot,lt,st,ut,ft),gt=Ke(ot,lt,st,ut,ft,dt),Pt=this.k[mt],wt=this.k[mt+1],St=Fe[mt],Zt=Fe[mt+1],Ct=Se(bt,xt,yt,It,ht,gt,Pt,wt,St,Zt),Rt=Te(bt,xt,yt,It,ht,gt,Pt,wt,St,Zt);bt=Xe(qe,We),xt=Je(qe,We),yt=Ye(qe,We,Ue,_e,Qe),It=ze(qe,We,Ue,_e,Qe,tt);var dr=xe(bt,xt,yt,It),Dt=me(bt,xt,yt,It);Bt=ft,pt=dt,ft=st,dt=ut,st=ot,ut=lt,ot=xe(it,at,Ct,Rt),lt=me(at,at,Ct,Rt),it=Qe,at=tt,Qe=Ue,tt=_e,Ue=qe,_e=We,qe=xe(Ct,Rt,dr,Dt),We=me(Ct,Rt,dr,Dt)}pe(this.h,0,qe,We),pe(this.h,2,Ue,_e),pe(this.h,4,Qe,tt),pe(this.h,6,it,at),pe(this.h,8,ot,lt),pe(this.h,10,st,ut),pe(this.h,12,ft,dt),pe(this.h,14,Bt,pt)},ke.prototype._digest=function(Re){return Re==="hex"?K.toHex32(this.h,"big"):K.split32(this.h,"big")};function je(Be,Re,Ie,Fe,qe){var We=Be&Ie^~Be&qe;return We<0&&(We+=4294967296),We}function Ke(Be,Re,Ie,Fe,qe,We){var Ue=Re&Fe^~Re&We;return Ue<0&&(Ue+=4294967296),Ue}function Ye(Be,Re,Ie,Fe,qe){var We=Be&Ie^Be&qe^Ie&qe;return We<0&&(We+=4294967296),We}function ze(Be,Re,Ie,Fe,qe,We){var Ue=Re&Fe^Re&We^Fe&We;return Ue<0&&(Ue+=4294967296),Ue}function Xe(Be,Re){var Ie=oe(Be,Re,28),Fe=oe(Re,Be,2),qe=oe(Re,Be,7),We=Ie^Fe^qe;return We<0&&(We+=4294967296),We}function Je(Be,Re){var Ie=ce(Be,Re,28),Fe=ce(Re,Be,2),qe=ce(Re,Be,7),We=Ie^Fe^qe;return We<0&&(We+=4294967296),We}function rt(Be,Re){var Ie=oe(Be,Re,14),Fe=oe(Be,Re,18),qe=oe(Re,Be,9),We=Ie^Fe^qe;return We<0&&(We+=4294967296),We}function Ze(Be,Re){var Ie=ce(Be,Re,14),Fe=ce(Be,Re,18),qe=ce(Re,Be,9),We=Ie^Fe^qe;return We<0&&(We+=4294967296),We}function et(Be,Re){var Ie=oe(Be,Re,1),Fe=oe(Be,Re,8),qe=ue(Be,Re,7),We=Ie^Fe^qe;return We<0&&(We+=4294967296),We}function nt(Be,Re){var Ie=ce(Be,Re,1),Fe=ce(Be,Re,8),qe=Ae(Be,Re,7),We=Ie^Fe^qe;return We<0&&(We+=4294967296),We}function Ge(Be,Re){var Ie=oe(Be,Re,19),Fe=oe(Re,Be,29),qe=ue(Be,Re,6),We=Ie^Fe^qe;return We<0&&(We+=4294967296),We}function ve(Be,Re){var Ie=ce(Be,Re,19),Fe=ce(Re,Be,29),qe=Ae(Be,Re,6),We=Ie^Fe^qe;return We<0&&(We+=4294967296),We}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var K=requireUtils(),J=require_512();function ne(){if(!(this instanceof ne))return new ne;J.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return K.inherits(ne,J),_384=ne,ne.blockSize=1024,ne.outSize=384,ne.hmacStrength=192,ne.padLength=128,ne.prototype._digest=function(ce){return ce==="hex"?K.toHex32(this.h.slice(0,12),"big"):K.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var K=requireUtils(),J=requireCommon$1(),ne=K.rotl32,oe=K.sum32,ce=K.sum32_3,ue=K.sum32_4,Ae=J.BlockHash;function pe(){if(!(this instanceof pe))return new pe;Ae.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}K.inherits(pe,Ae),ripemd.ripemd160=pe,pe.blockSize=512,pe.outSize=160,pe.hmacStrength=192,pe.padLength=64,pe.prototype._update=function(ke,je){for(var Ke=this.h[0],Ye=this.h[1],ze=this.h[2],Xe=this.h[3],Je=this.h[4],rt=Ke,Ze=Ye,et=ze,nt=Xe,Ge=Je,ve=0;ve<80;ve++){var Be=oe(ne(ue(Ke,xe(ve,Ye,ze,Xe),ke[ye[ve]+je],me(ve)),Te[ve]),Je);Ke=Je,Je=Xe,Xe=ne(ze,10),ze=Ye,Ye=Be,Be=oe(ne(ue(rt,xe(79-ve,Ze,et,nt),ke[Se[ve]+je],ge(ve)),Ne[ve]),Ge),rt=Ge,Ge=nt,nt=ne(et,10),et=Ze,Ze=Be}Be=ce(this.h[1],ze,nt),this.h[1]=ce(this.h[2],Xe,Ge),this.h[2]=ce(this.h[3],Je,rt),this.h[3]=ce(this.h[4],Ke,Ze),this.h[4]=ce(this.h[0],Ye,et),this.h[0]=Be},pe.prototype._digest=function(ke){return ke==="hex"?K.toHex32(this.h,"little"):K.split32(this.h,"little")};function xe($e,ke,je,Ke){return $e<=15?ke^je^Ke:$e<=31?ke&je|~ke&Ke:$e<=47?(ke|~je)^Ke:$e<=63?ke&Ke|je&~Ke:ke^(je|~Ke)}function me($e){return $e<=15?0:$e<=31?1518500249:$e<=47?1859775393:$e<=63?2400959708:2840853838}function ge($e){return $e<=15?1352829926:$e<=31?1548603684:$e<=47?1836072691:$e<=63?2053994217:0}var ye=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Se=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Te=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Ne=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac,hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac;hasRequiredHmac=1;var K=requireUtils(),J=requireMinimalisticAssert();function ne(oe,ce,ue){if(!(this instanceof ne))return new ne(oe,ce,ue);this.Hash=oe,this.blockSize=oe.blockSize/8,this.outSize=oe.outSize/8,this.inner=null,this.outer=null,this._init(K.toArray(ce,ue))}return hmac=ne,ne.prototype._init=function(ce){ce.length>this.blockSize&&(ce=new this.Hash().update(ce).digest()),J(ce.length<=this.blockSize);for(var ue=ce.length;ue<this.blockSize;ue++)ce.push(0);for(ue=0;ue<ce.length;ue++)ce[ue]^=54;for(this.inner=new this.Hash().update(ce),ue=0;ue<ce.length;ue++)ce[ue]^=106;this.outer=new this.Hash().update(ce)},ne.prototype.update=function(ce,ue){return this.inner.update(ce,ue),this},ne.prototype.digest=function(ce){return this.outer.update(this.inner.digest()),this.outer.digest(ce)},hmac}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(K){var J=K;J.utils=requireUtils(),J.common=requireCommon$1(),J.sha=requireSha(),J.ripemd=requireRipemd(),J.hmac=requireHmac(),J.sha1=J.sha.sha1,J.sha256=J.sha.sha256,J.sha224=J.sha.sha224,J.sha384=J.sha.sha384,J.sha512=J.sha.sha512,J.ripemd160=J.ripemd.ripemd160}(hash$1)),hash$1}var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(K){var J=K,ne=requireHash(),oe=requireCurve(),ce=requireUtils$1(),ue=ce.assert;function Ae(me){me.type==="short"?this.curve=new oe.short(me):me.type==="edwards"?this.curve=new oe.edwards(me):this.curve=new oe.mont(me),this.g=this.curve.g,this.n=this.curve.n,this.hash=me.hash,ue(this.g.validate(),"Invalid curve"),ue(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}J.PresetCurve=Ae;function pe(me,ge){Object.defineProperty(J,me,{configurable:!0,enumerable:!0,get:function(){var ye=new Ae(ge);return Object.defineProperty(J,me,{configurable:!0,enumerable:!0,value:ye}),ye}})}pe("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ne.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),pe("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ne.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),pe("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ne.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),pe("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ne.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),pe("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ne.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),pe("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ne.sha256,gRed:!1,g:["9"]}),pe("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ne.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var xe;try{xe=requireSecp256k1()}catch{xe=void 0}pe("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ne.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",xe]})}(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var K=requireHash(),J=requireUtils$2(),ne=requireMinimalisticAssert();function oe(ce){if(!(this instanceof oe))return new oe(ce);this.hash=ce.hash,this.predResist=!!ce.predResist,this.outLen=this.hash.outSize,this.minEntropy=ce.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var ue=J.toArray(ce.entropy,ce.entropyEnc||"hex"),Ae=J.toArray(ce.nonce,ce.nonceEnc||"hex"),pe=J.toArray(ce.pers,ce.persEnc||"hex");ne(ue.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(ue,Ae,pe)}return hmacDrbg=oe,oe.prototype._init=function(ue,Ae,pe){var xe=ue.concat(Ae).concat(pe);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var me=0;me<this.V.length;me++)this.K[me]=0,this.V[me]=1;this._update(xe),this._reseed=1,this.reseedInterval=281474976710656},oe.prototype._hmac=function(){return new K.hmac(this.hash,this.K)},oe.prototype._update=function(ue){var Ae=this._hmac().update(this.V).update([0]);ue&&(Ae=Ae.update(ue)),this.K=Ae.digest(),this.V=this._hmac().update(this.V).digest(),ue&&(this.K=this._hmac().update(this.V).update([1]).update(ue).digest(),this.V=this._hmac().update(this.V).digest())},oe.prototype.reseed=function(ue,Ae,pe,xe){typeof Ae!="string"&&(xe=pe,pe=Ae,Ae=null),ue=J.toArray(ue,Ae),pe=J.toArray(pe,xe),ne(ue.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(ue.concat(pe||[])),this._reseed=1},oe.prototype.generate=function(ue,Ae,pe,xe){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof Ae!="string"&&(xe=pe,pe=Ae,Ae=null),pe&&(pe=J.toArray(pe,xe||"hex"),this._update(pe));for(var me=[];me.length<ue;)this.V=this._hmac().update(this.V).digest(),me=me.concat(this.V);var ge=me.slice(0,ue);return this._update(pe),this._reseed++,J.encode(ge,Ae)},hmacDrbg}var key$2,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$2;hasRequiredKey$1=1;var K=requireBn$3(),J=requireUtils$1(),ne=J.assert;function oe(ce,ue){this.ec=ce,this.priv=null,this.pub=null,ue.priv&&this._importPrivate(ue.priv,ue.privEnc),ue.pub&&this._importPublic(ue.pub,ue.pubEnc)}return key$2=oe,oe.fromPublic=function(ue,Ae,pe){return Ae instanceof oe?Ae:new oe(ue,{pub:Ae,pubEnc:pe})},oe.fromPrivate=function(ue,Ae,pe){return Ae instanceof oe?Ae:new oe(ue,{priv:Ae,privEnc:pe})},oe.prototype.validate=function(){var ue=this.getPublic();return ue.isInfinity()?{result:!1,reason:"Invalid public key"}:ue.validate()?ue.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},oe.prototype.getPublic=function(ue,Ae){return typeof ue=="string"&&(Ae=ue,ue=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),Ae?this.pub.encode(Ae,ue):this.pub},oe.prototype.getPrivate=function(ue){return ue==="hex"?this.priv.toString(16,2):this.priv},oe.prototype._importPrivate=function(ue,Ae){this.priv=new K(ue,Ae||16),this.priv=this.priv.umod(this.ec.curve.n)},oe.prototype._importPublic=function(ue,Ae){if(ue.x||ue.y){this.ec.curve.type==="mont"?ne(ue.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&ne(ue.x&&ue.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(ue.x,ue.y);return}this.pub=this.ec.curve.decodePoint(ue,Ae)},oe.prototype.derive=function(ue){return ue.validate()||ne(ue.validate(),"public point not validated"),ue.mul(this.priv).getX()},oe.prototype.sign=function(ue,Ae,pe){return this.ec.sign(ue,this,Ae,pe)},oe.prototype.verify=function(ue,Ae){return this.ec.verify(ue,Ae,this)},oe.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$2}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var K=requireBn$3(),J=requireUtils$1(),ne=J.assert;function oe(xe,me){if(xe instanceof oe)return xe;this._importDER(xe,me)||(ne(xe.r&&xe.s,"Signature without r or s"),this.r=new K(xe.r,16),this.s=new K(xe.s,16),xe.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=xe.recoveryParam)}signature$1=oe;function ce(){this.place=0}function ue(xe,me){var ge=xe[me.place++];if(!(ge&128))return ge;var ye=ge&15;if(ye===0||ye>4||xe[me.place]===0)return!1;for(var Se=0,Te=0,Ne=me.place;Te<ye;Te++,Ne++)Se<<=8,Se|=xe[Ne],Se>>>=0;return Se<=127?!1:(me.place=Ne,Se)}function Ae(xe){for(var me=0,ge=xe.length-1;!xe[me]&&!(xe[me+1]&128)&&me<ge;)me++;return me===0?xe:xe.slice(me)}oe.prototype._importDER=function(me,ge){me=J.toArray(me,ge);var ye=new ce;if(me[ye.place++]!==48)return!1;var Se=ue(me,ye);if(Se===!1||Se+ye.place!==me.length||me[ye.place++]!==2)return!1;var Te=ue(me,ye);if(Te===!1||me[ye.place]&128)return!1;var Ne=me.slice(ye.place,Te+ye.place);if(ye.place+=Te,me[ye.place++]!==2)return!1;var $e=ue(me,ye);if($e===!1||me.length!==$e+ye.place||me[ye.place]&128)return!1;var ke=me.slice(ye.place,$e+ye.place);if(Ne[0]===0)if(Ne[1]&128)Ne=Ne.slice(1);else return!1;if(ke[0]===0)if(ke[1]&128)ke=ke.slice(1);else return!1;return this.r=new K(Ne),this.s=new K(ke),this.recoveryParam=null,!0};function pe(xe,me){if(me<128){xe.push(me);return}var ge=1+(Math.log(me)/Math.LN2>>>3);for(xe.push(ge|128);--ge;)xe.push(me>>>(ge<<3)&255);xe.push(me)}return oe.prototype.toDER=function(me){var ge=this.r.toArray(),ye=this.s.toArray();for(ge[0]&128&&(ge=[0].concat(ge)),ye[0]&128&&(ye=[0].concat(ye)),ge=Ae(ge),ye=Ae(ye);!ye[0]&&!(ye[1]&128);)ye=ye.slice(1);var Se=[2];pe(Se,ge.length),Se=Se.concat(ge),Se.push(2),pe(Se,ye.length);var Te=Se.concat(ye),Ne=[48];return pe(Ne,Te.length),Ne=Ne.concat(Te),J.encode(Ne,me)},signature$1}var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var K=requireBn$3(),J=requireHmacDrbg(),ne=requireUtils$1(),oe=requireCurves(),ce=requireBrorand(),ue=ne.assert,Ae=requireKey$1(),pe=requireSignature$1();function xe(me){if(!(this instanceof xe))return new xe(me);typeof me=="string"&&(ue(Object.prototype.hasOwnProperty.call(oe,me),"Unknown curve "+me),me=oe[me]),me instanceof oe.PresetCurve&&(me={curve:me}),this.curve=me.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=me.curve.g,this.g.precompute(me.curve.n.bitLength()+1),this.hash=me.hash||me.curve.hash}return ec=xe,xe.prototype.keyPair=function(ge){return new Ae(this,ge)},xe.prototype.keyFromPrivate=function(ge,ye){return Ae.fromPrivate(this,ge,ye)},xe.prototype.keyFromPublic=function(ge,ye){return Ae.fromPublic(this,ge,ye)},xe.prototype.genKeyPair=function(ge){ge||(ge={});for(var ye=new J({hash:this.hash,pers:ge.pers,persEnc:ge.persEnc||"utf8",entropy:ge.entropy||ce(this.hash.hmacStrength),entropyEnc:ge.entropy&&ge.entropyEnc||"utf8",nonce:this.n.toArray()}),Se=this.n.byteLength(),Te=this.n.sub(new K(2));;){var Ne=new K(ye.generate(Se));if(!(Ne.cmp(Te)>0))return Ne.iaddn(1),this.keyFromPrivate(Ne)}},xe.prototype._truncateToN=function(ge,ye){var Se=ge.byteLength()*8-this.n.bitLength();return Se>0&&(ge=ge.ushrn(Se)),!ye&&ge.cmp(this.n)>=0?ge.sub(this.n):ge},xe.prototype.sign=function(ge,ye,Se,Te){typeof Se=="object"&&(Te=Se,Se=null),Te||(Te={}),ye=this.keyFromPrivate(ye,Se),ge=this._truncateToN(new K(ge,16));for(var Ne=this.n.byteLength(),$e=ye.getPrivate().toArray("be",Ne),ke=ge.toArray("be",Ne),je=new J({hash:this.hash,entropy:$e,nonce:ke,pers:Te.pers,persEnc:Te.persEnc||"utf8"}),Ke=this.n.sub(new K(1)),Ye=0;;Ye++){var ze=Te.k?Te.k(Ye):new K(je.generate(this.n.byteLength()));if(ze=this._truncateToN(ze,!0),!(ze.cmpn(1)<=0||ze.cmp(Ke)>=0)){var Xe=this.g.mul(ze);if(!Xe.isInfinity()){var Je=Xe.getX(),rt=Je.umod(this.n);if(rt.cmpn(0)!==0){var Ze=ze.invm(this.n).mul(rt.mul(ye.getPrivate()).iadd(ge));if(Ze=Ze.umod(this.n),Ze.cmpn(0)!==0){var et=(Xe.getY().isOdd()?1:0)|(Je.cmp(rt)!==0?2:0);return Te.canonical&&Ze.cmp(this.nh)>0&&(Ze=this.n.sub(Ze),et^=1),new pe({r:rt,s:Ze,recoveryParam:et})}}}}}},xe.prototype.verify=function(ge,ye,Se,Te){ge=this._truncateToN(new K(ge,16)),Se=this.keyFromPublic(Se,Te),ye=new pe(ye,"hex");var Ne=ye.r,$e=ye.s;if(Ne.cmpn(1)<0||Ne.cmp(this.n)>=0||$e.cmpn(1)<0||$e.cmp(this.n)>=0)return!1;var ke=$e.invm(this.n),je=ke.mul(ge).umod(this.n),Ke=ke.mul(Ne).umod(this.n),Ye;return this.curve._maxwellTrick?(Ye=this.g.jmulAdd(je,Se.getPublic(),Ke),Ye.isInfinity()?!1:Ye.eqXToP(Ne)):(Ye=this.g.mulAdd(je,Se.getPublic(),Ke),Ye.isInfinity()?!1:Ye.getX().umod(this.n).cmp(Ne)===0)},xe.prototype.recoverPubKey=function(me,ge,ye,Se){ue((3&ye)===ye,"The recovery param is more than two bits"),ge=new pe(ge,Se);var Te=this.n,Ne=new K(me),$e=ge.r,ke=ge.s,je=ye&1,Ke=ye>>1;if($e.cmp(this.curve.p.umod(this.curve.n))>=0&&Ke)throw new Error("Unable to find sencond key candinate");Ke?$e=this.curve.pointFromX($e.add(this.curve.n),je):$e=this.curve.pointFromX($e,je);var Ye=ge.r.invm(Te),ze=Te.sub(Ne).mul(Ye).umod(Te),Xe=ke.mul(Ye).umod(Te);return this.g.mulAdd(ze,$e,Xe)},xe.prototype.getKeyRecoveryParam=function(me,ge,ye,Se){if(ge=new pe(ge,Se),ge.recoveryParam!==null)return ge.recoveryParam;for(var Te=0;Te<4;Te++){var Ne;try{Ne=this.recoverPubKey(me,ge,Te)}catch{continue}if(Ne.eq(ye))return Te}throw new Error("Unable to find valid recovery factor")},ec}var key$1,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key$1;hasRequiredKey=1;var K=requireUtils$1(),J=K.assert,ne=K.parseBytes,oe=K.cachedProperty;function ce(ue,Ae){this.eddsa=ue,this._secret=ne(Ae.secret),ue.isPoint(Ae.pub)?this._pub=Ae.pub:this._pubBytes=ne(Ae.pub)}return ce.fromPublic=function(Ae,pe){return pe instanceof ce?pe:new ce(Ae,{pub:pe})},ce.fromSecret=function(Ae,pe){return pe instanceof ce?pe:new ce(Ae,{secret:pe})},ce.prototype.secret=function(){return this._secret},oe(ce,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),oe(ce,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),oe(ce,"privBytes",function(){var Ae=this.eddsa,pe=this.hash(),xe=Ae.encodingLength-1,me=pe.slice(0,Ae.encodingLength);return me[0]&=248,me[xe]&=127,me[xe]|=64,me}),oe(ce,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),oe(ce,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),oe(ce,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),ce.prototype.sign=function(Ae){return J(this._secret,"KeyPair can only verify"),this.eddsa.sign(Ae,this)},ce.prototype.verify=function(Ae,pe){return this.eddsa.verify(Ae,pe,this)},ce.prototype.getSecret=function(Ae){return J(this._secret,"KeyPair is public only"),K.encode(this.secret(),Ae)},ce.prototype.getPublic=function(Ae){return K.encode(this.pubBytes(),Ae)},key$1=ce,key$1}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var K=requireBn$3(),J=requireUtils$1(),ne=J.assert,oe=J.cachedProperty,ce=J.parseBytes;function ue(Ae,pe){this.eddsa=Ae,typeof pe!="object"&&(pe=ce(pe)),Array.isArray(pe)&&(ne(pe.length===Ae.encodingLength*2,"Signature has invalid size"),pe={R:pe.slice(0,Ae.encodingLength),S:pe.slice(Ae.encodingLength)}),ne(pe.R&&pe.S,"Signature without R or S"),Ae.isPoint(pe.R)&&(this._R=pe.R),pe.S instanceof K&&(this._S=pe.S),this._Rencoded=Array.isArray(pe.R)?pe.R:pe.Rencoded,this._Sencoded=Array.isArray(pe.S)?pe.S:pe.Sencoded}return oe(ue,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),oe(ue,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),oe(ue,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),oe(ue,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),ue.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},ue.prototype.toHex=function(){return J.encode(this.toBytes(),"hex").toUpperCase()},signature=ue,signature}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var K=requireHash(),J=requireCurves(),ne=requireUtils$1(),oe=ne.assert,ce=ne.parseBytes,ue=requireKey(),Ae=requireSignature();function pe(xe){if(oe(xe==="ed25519","only tested with ed25519 so far"),!(this instanceof pe))return new pe(xe);xe=J[xe].curve,this.curve=xe,this.g=xe.g,this.g.precompute(xe.n.bitLength()+1),this.pointClass=xe.point().constructor,this.encodingLength=Math.ceil(xe.n.bitLength()/8),this.hash=K.sha512}return eddsa=pe,pe.prototype.sign=function(me,ge){me=ce(me);var ye=this.keyFromSecret(ge),Se=this.hashInt(ye.messagePrefix(),me),Te=this.g.mul(Se),Ne=this.encodePoint(Te),$e=this.hashInt(Ne,ye.pubBytes(),me).mul(ye.priv()),ke=Se.add($e).umod(this.curve.n);return this.makeSignature({R:Te,S:ke,Rencoded:Ne})},pe.prototype.verify=function(me,ge,ye){if(me=ce(me),ge=this.makeSignature(ge),ge.S().gte(ge.eddsa.curve.n)||ge.S().isNeg())return!1;var Se=this.keyFromPublic(ye),Te=this.hashInt(ge.Rencoded(),Se.pubBytes(),me),Ne=this.g.mul(ge.S()),$e=ge.R().add(Se.pub().mul(Te));return $e.eq(Ne)},pe.prototype.hashInt=function(){for(var me=this.hash(),ge=0;ge<arguments.length;ge++)me.update(arguments[ge]);return ne.intFromLE(me.digest()).umod(this.curve.n)},pe.prototype.keyFromPublic=function(me){return ue.fromPublic(this,me)},pe.prototype.keyFromSecret=function(me){return ue.fromSecret(this,me)},pe.prototype.makeSignature=function(me){return me instanceof Ae?me:new Ae(this,me)},pe.prototype.encodePoint=function(me){var ge=me.getY().toArray("le",this.encodingLength);return ge[this.encodingLength-1]|=me.getX().isOdd()?128:0,ge},pe.prototype.decodePoint=function(me){me=ne.parseBytes(me);var ge=me.length-1,ye=me.slice(0,ge).concat(me[ge]&-129),Se=(me[ge]&128)!==0,Te=ne.intFromLE(ye);return this.curve.pointFromY(Te,Se)},pe.prototype.encodeInt=function(me){return me.toArray("le",this.encodingLength)},pe.prototype.decodeInt=function(me){return ne.intFromLE(me)},pe.prototype.isPoint=function(me){return me instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(K){var J=K;J.version=require$$0.version,J.utils=requireUtils$1(),J.rand=requireBrorand(),J.curve=requireCurve(),J.curves=requireCurves(),J.ec=requireEc(),J.eddsa=requireEddsa()}(elliptic)),elliptic}var asn1$9={},asn1$8={},bn$2={exports:{}};bn$2.exports;var hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,function(K){(function(J,ne){function oe(Ge,ve){if(!Ge)throw new Error(ve||"Assertion failed")}function ce(Ge,ve){Ge.super_=ve;var Be=function(){};Be.prototype=ve.prototype,Ge.prototype=new Be,Ge.prototype.constructor=Ge}function ue(Ge,ve,Be){if(ue.isBN(Ge))return Ge;this.negative=0,this.words=null,this.length=0,this.red=null,Ge!==null&&((ve==="le"||ve==="be")&&(Be=ve,ve=10),this._init(Ge||0,ve||10,Be||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(ve){return ve instanceof ue?!0:ve!==null&&typeof ve=="object"&&ve.constructor.wordSize===ue.wordSize&&Array.isArray(ve.words)},ue.max=function(ve,Be){return ve.cmp(Be)>0?ve:Be},ue.min=function(ve,Be){return ve.cmp(Be)<0?ve:Be},ue.prototype._init=function(ve,Be,Re){if(typeof ve=="number")return this._initNumber(ve,Be,Re);if(typeof ve=="object")return this._initArray(ve,Be,Re);Be==="hex"&&(Be=16),oe(Be===(Be|0)&&Be>=2&&Be<=36),ve=ve.toString().replace(/\s+/g,"");var Ie=0;ve[0]==="-"&&(Ie++,this.negative=1),Ie<ve.length&&(Be===16?this._parseHex(ve,Ie,Re):(this._parseBase(ve,Be,Ie),Re==="le"&&this._initArray(this.toArray(),Be,Re)))},ue.prototype._initNumber=function(ve,Be,Re){ve<0&&(this.negative=1,ve=-ve),ve<67108864?(this.words=[ve&67108863],this.length=1):ve<4503599627370496?(this.words=[ve&67108863,ve/67108864&67108863],this.length=2):(oe(ve<9007199254740992),this.words=[ve&67108863,ve/67108864&67108863,1],this.length=3),Re==="le"&&this._initArray(this.toArray(),Be,Re)},ue.prototype._initArray=function(ve,Be,Re){if(oe(typeof ve.length=="number"),ve.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ve.length/3),this.words=new Array(this.length);for(var Ie=0;Ie<this.length;Ie++)this.words[Ie]=0;var Fe,qe,We=0;if(Re==="be")for(Ie=ve.length-1,Fe=0;Ie>=0;Ie-=3)qe=ve[Ie]|ve[Ie-1]<<8|ve[Ie-2]<<16,this.words[Fe]|=qe<<We&67108863,this.words[Fe+1]=qe>>>26-We&67108863,We+=24,We>=26&&(We-=26,Fe++);else if(Re==="le")for(Ie=0,Fe=0;Ie<ve.length;Ie+=3)qe=ve[Ie]|ve[Ie+1]<<8|ve[Ie+2]<<16,this.words[Fe]|=qe<<We&67108863,this.words[Fe+1]=qe>>>26-We&67108863,We+=24,We>=26&&(We-=26,Fe++);return this.strip()};function pe(Ge,ve){var Be=Ge.charCodeAt(ve);return Be>=65&&Be<=70?Be-55:Be>=97&&Be<=102?Be-87:Be-48&15}function xe(Ge,ve,Be){var Re=pe(Ge,Be);return Be-1>=ve&&(Re|=pe(Ge,Be-1)<<4),Re}ue.prototype._parseHex=function(ve,Be,Re){this.length=Math.ceil((ve.length-Be)/6),this.words=new Array(this.length);for(var Ie=0;Ie<this.length;Ie++)this.words[Ie]=0;var Fe=0,qe=0,We;if(Re==="be")for(Ie=ve.length-1;Ie>=Be;Ie-=2)We=xe(ve,Be,Ie)<<Fe,this.words[qe]|=We&67108863,Fe>=18?(Fe-=18,qe+=1,this.words[qe]|=We>>>26):Fe+=8;else{var Ue=ve.length-Be;for(Ie=Ue%2===0?Be+1:Be;Ie<ve.length;Ie+=2)We=xe(ve,Be,Ie)<<Fe,this.words[qe]|=We&67108863,Fe>=18?(Fe-=18,qe+=1,this.words[qe]|=We>>>26):Fe+=8}this.strip()};function me(Ge,ve,Be,Re){for(var Ie=0,Fe=Math.min(Ge.length,Be),qe=ve;qe<Fe;qe++){var We=Ge.charCodeAt(qe)-48;Ie*=Re,We>=49?Ie+=We-49+10:We>=17?Ie+=We-17+10:Ie+=We}return Ie}ue.prototype._parseBase=function(ve,Be,Re){this.words=[0],this.length=1;for(var Ie=0,Fe=1;Fe<=67108863;Fe*=Be)Ie++;Ie--,Fe=Fe/Be|0;for(var qe=ve.length-Re,We=qe%Ie,Ue=Math.min(qe,qe-We)+Re,_e=0,Qe=Re;Qe<Ue;Qe+=Ie)_e=me(ve,Qe,Qe+Ie,Be),this.imuln(Fe),this.words[0]+_e<67108864?this.words[0]+=_e:this._iaddn(_e);if(We!==0){var tt=1;for(_e=me(ve,Qe,ve.length,Be),Qe=0;Qe<We;Qe++)tt*=Be;this.imuln(tt),this.words[0]+_e<67108864?this.words[0]+=_e:this._iaddn(_e)}this.strip()},ue.prototype.copy=function(ve){ve.words=new Array(this.length);for(var Be=0;Be<this.length;Be++)ve.words[Be]=this.words[Be];ve.length=this.length,ve.negative=this.negative,ve.red=this.red},ue.prototype.clone=function(){var ve=new ue(null);return this.copy(ve),ve},ue.prototype._expand=function(ve){for(;this.length<ve;)this.words[this.length++]=0;return this},ue.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},ue.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ge=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ye=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Se=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(ve,Be){ve=ve||10,Be=Be|0||1;var Re;if(ve===16||ve==="hex"){Re="";for(var Ie=0,Fe=0,qe=0;qe<this.length;qe++){var We=this.words[qe],Ue=((We<<Ie|Fe)&16777215).toString(16);Fe=We>>>24-Ie&16777215,Fe!==0||qe!==this.length-1?Re=ge[6-Ue.length]+Ue+Re:Re=Ue+Re,Ie+=2,Ie>=26&&(Ie-=26,qe--)}for(Fe!==0&&(Re=Fe.toString(16)+Re);Re.length%Be!==0;)Re="0"+Re;return this.negative!==0&&(Re="-"+Re),Re}if(ve===(ve|0)&&ve>=2&&ve<=36){var _e=ye[ve],Qe=Se[ve];Re="";var tt=this.clone();for(tt.negative=0;!tt.isZero();){var it=tt.modn(Qe).toString(ve);tt=tt.idivn(Qe),tt.isZero()?Re=it+Re:Re=ge[_e-it.length]+it+Re}for(this.isZero()&&(Re="0"+Re);Re.length%Be!==0;)Re="0"+Re;return this.negative!==0&&(Re="-"+Re),Re}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var ve=this.words[0];return this.length===2?ve+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ve+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ve:ve},ue.prototype.toJSON=function(){return this.toString(16)},ue.prototype.toBuffer=function(ve,Be){return oe(typeof Ae<"u"),this.toArrayLike(Ae,ve,Be)},ue.prototype.toArray=function(ve,Be){return this.toArrayLike(Array,ve,Be)},ue.prototype.toArrayLike=function(ve,Be,Re){var Ie=this.byteLength(),Fe=Re||Math.max(1,Ie);oe(Ie<=Fe,"byte array longer than desired length"),oe(Fe>0,"Requested array length <= 0"),this.strip();var qe=Be==="le",We=new ve(Fe),Ue,_e,Qe=this.clone();if(qe){for(_e=0;!Qe.isZero();_e++)Ue=Qe.andln(255),Qe.iushrn(8),We[_e]=Ue;for(;_e<Fe;_e++)We[_e]=0}else{for(_e=0;_e<Fe-Ie;_e++)We[_e]=0;for(_e=0;!Qe.isZero();_e++)Ue=Qe.andln(255),Qe.iushrn(8),We[Fe-_e-1]=Ue}return We},Math.clz32?ue.prototype._countBits=function(ve){return 32-Math.clz32(ve)}:ue.prototype._countBits=function(ve){var Be=ve,Re=0;return Be>=4096&&(Re+=13,Be>>>=13),Be>=64&&(Re+=7,Be>>>=7),Be>=8&&(Re+=4,Be>>>=4),Be>=2&&(Re+=2,Be>>>=2),Re+Be},ue.prototype._zeroBits=function(ve){if(ve===0)return 26;var Be=ve,Re=0;return Be&8191||(Re+=13,Be>>>=13),Be&127||(Re+=7,Be>>>=7),Be&15||(Re+=4,Be>>>=4),Be&3||(Re+=2,Be>>>=2),Be&1||Re++,Re},ue.prototype.bitLength=function(){var ve=this.words[this.length-1],Be=this._countBits(ve);return(this.length-1)*26+Be};function Te(Ge){for(var ve=new Array(Ge.bitLength()),Be=0;Be<ve.length;Be++){var Re=Be/26|0,Ie=Be%26;ve[Be]=(Ge.words[Re]&1<<Ie)>>>Ie}return ve}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ve=0,Be=0;Be<this.length;Be++){var Re=this._zeroBits(this.words[Be]);if(ve+=Re,Re!==26)break}return ve},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(ve){return this.negative!==0?this.abs().inotn(ve).iaddn(1):this.clone()},ue.prototype.fromTwos=function(ve){return this.testn(ve-1)?this.notn(ve).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(ve){for(;this.length<ve.length;)this.words[this.length++]=0;for(var Be=0;Be<ve.length;Be++)this.words[Be]=this.words[Be]|ve.words[Be];return this.strip()},ue.prototype.ior=function(ve){return oe((this.negative|ve.negative)===0),this.iuor(ve)},ue.prototype.or=function(ve){return this.length>ve.length?this.clone().ior(ve):ve.clone().ior(this)},ue.prototype.uor=function(ve){return this.length>ve.length?this.clone().iuor(ve):ve.clone().iuor(this)},ue.prototype.iuand=function(ve){var Be;this.length>ve.length?Be=ve:Be=this;for(var Re=0;Re<Be.length;Re++)this.words[Re]=this.words[Re]&ve.words[Re];return this.length=Be.length,this.strip()},ue.prototype.iand=function(ve){return oe((this.negative|ve.negative)===0),this.iuand(ve)},ue.prototype.and=function(ve){return this.length>ve.length?this.clone().iand(ve):ve.clone().iand(this)},ue.prototype.uand=function(ve){return this.length>ve.length?this.clone().iuand(ve):ve.clone().iuand(this)},ue.prototype.iuxor=function(ve){var Be,Re;this.length>ve.length?(Be=this,Re=ve):(Be=ve,Re=this);for(var Ie=0;Ie<Re.length;Ie++)this.words[Ie]=Be.words[Ie]^Re.words[Ie];if(this!==Be)for(;Ie<Be.length;Ie++)this.words[Ie]=Be.words[Ie];return this.length=Be.length,this.strip()},ue.prototype.ixor=function(ve){return oe((this.negative|ve.negative)===0),this.iuxor(ve)},ue.prototype.xor=function(ve){return this.length>ve.length?this.clone().ixor(ve):ve.clone().ixor(this)},ue.prototype.uxor=function(ve){return this.length>ve.length?this.clone().iuxor(ve):ve.clone().iuxor(this)},ue.prototype.inotn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=Math.ceil(ve/26)|0,Re=ve%26;this._expand(Be),Re>0&&Be--;for(var Ie=0;Ie<Be;Ie++)this.words[Ie]=~this.words[Ie]&67108863;return Re>0&&(this.words[Ie]=~this.words[Ie]&67108863>>26-Re),this.strip()},ue.prototype.notn=function(ve){return this.clone().inotn(ve)},ue.prototype.setn=function(ve,Be){oe(typeof ve=="number"&&ve>=0);var Re=ve/26|0,Ie=ve%26;return this._expand(Re+1),Be?this.words[Re]=this.words[Re]|1<<Ie:this.words[Re]=this.words[Re]&~(1<<Ie),this.strip()},ue.prototype.iadd=function(ve){var Be;if(this.negative!==0&&ve.negative===0)return this.negative=0,Be=this.isub(ve),this.negative^=1,this._normSign();if(this.negative===0&&ve.negative!==0)return ve.negative=0,Be=this.isub(ve),ve.negative=1,Be._normSign();var Re,Ie;this.length>ve.length?(Re=this,Ie=ve):(Re=ve,Ie=this);for(var Fe=0,qe=0;qe<Ie.length;qe++)Be=(Re.words[qe]|0)+(Ie.words[qe]|0)+Fe,this.words[qe]=Be&67108863,Fe=Be>>>26;for(;Fe!==0&&qe<Re.length;qe++)Be=(Re.words[qe]|0)+Fe,this.words[qe]=Be&67108863,Fe=Be>>>26;if(this.length=Re.length,Fe!==0)this.words[this.length]=Fe,this.length++;else if(Re!==this)for(;qe<Re.length;qe++)this.words[qe]=Re.words[qe];return this},ue.prototype.add=function(ve){var Be;return ve.negative!==0&&this.negative===0?(ve.negative=0,Be=this.sub(ve),ve.negative^=1,Be):ve.negative===0&&this.negative!==0?(this.negative=0,Be=ve.sub(this),this.negative=1,Be):this.length>ve.length?this.clone().iadd(ve):ve.clone().iadd(this)},ue.prototype.isub=function(ve){if(ve.negative!==0){ve.negative=0;var Be=this.iadd(ve);return ve.negative=1,Be._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ve),this.negative=1,this._normSign();var Re=this.cmp(ve);if(Re===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ie,Fe;Re>0?(Ie=this,Fe=ve):(Ie=ve,Fe=this);for(var qe=0,We=0;We<Fe.length;We++)Be=(Ie.words[We]|0)-(Fe.words[We]|0)+qe,qe=Be>>26,this.words[We]=Be&67108863;for(;qe!==0&&We<Ie.length;We++)Be=(Ie.words[We]|0)+qe,qe=Be>>26,this.words[We]=Be&67108863;if(qe===0&&We<Ie.length&&Ie!==this)for(;We<Ie.length;We++)this.words[We]=Ie.words[We];return this.length=Math.max(this.length,We),Ie!==this&&(this.negative=1),this.strip()},ue.prototype.sub=function(ve){return this.clone().isub(ve)};function Ne(Ge,ve,Be){Be.negative=ve.negative^Ge.negative;var Re=Ge.length+ve.length|0;Be.length=Re,Re=Re-1|0;var Ie=Ge.words[0]|0,Fe=ve.words[0]|0,qe=Ie*Fe,We=qe&67108863,Ue=qe/67108864|0;Be.words[0]=We;for(var _e=1;_e<Re;_e++){for(var Qe=Ue>>>26,tt=Ue&67108863,it=Math.min(_e,ve.length-1),at=Math.max(0,_e-Ge.length+1);at<=it;at++){var ot=_e-at|0;Ie=Ge.words[ot]|0,Fe=ve.words[at]|0,qe=Ie*Fe+tt,Qe+=qe/67108864|0,tt=qe&67108863}Be.words[_e]=tt|0,Ue=Qe|0}return Ue!==0?Be.words[_e]=Ue|0:Be.length--,Be.strip()}var $e=function(ve,Be,Re){var Ie=ve.words,Fe=Be.words,qe=Re.words,We=0,Ue,_e,Qe,tt=Ie[0]|0,it=tt&8191,at=tt>>>13,ot=Ie[1]|0,lt=ot&8191,st=ot>>>13,ut=Ie[2]|0,ft=ut&8191,dt=ut>>>13,Bt=Ie[3]|0,pt=Bt&8191,mt=Bt>>>13,bt=Ie[4]|0,xt=bt&8191,yt=bt>>>13,It=Ie[5]|0,ht=It&8191,gt=It>>>13,Pt=Ie[6]|0,wt=Pt&8191,St=Pt>>>13,Zt=Ie[7]|0,Ct=Zt&8191,Rt=Zt>>>13,dr=Ie[8]|0,Dt=dr&8191,Tt=dr>>>13,or=Ie[9]|0,Mt=or&8191,kt=or>>>13,ur=Fe[0]|0,$t=ur&8191,jt=ur>>>13,nr=Fe[1]|0,Ot=nr&8191,Lt=nr>>>13,lr=Fe[2]|0,Ht=lr&8191,qt=lr>>>13,tr=Fe[3]|0,Vt=tr&8191,Gt=tr>>>13,br=Fe[4]|0,Yt=br&8191,Kt=br>>>13,yr=Fe[5]|0,zt=yr&8191,Jt=yr>>>13,xr=Fe[6]|0,Xt=xr&8191,ir=xr>>>13,Mr=Fe[7]|0,er=Mr&8191,fr=Mr>>>13,Qr=Fe[8]|0,sr=Qr&8191,Ar=Qr>>>13,Kr=Fe[9]|0,ar=Kr&8191,hr=Kr>>>13;Re.negative=ve.negative^Be.negative,Re.length=19,Ue=Math.imul(it,$t),_e=Math.imul(it,jt),_e=_e+Math.imul(at,$t)|0,Qe=Math.imul(at,jt);var Lr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,Ue=Math.imul(lt,$t),_e=Math.imul(lt,jt),_e=_e+Math.imul(st,$t)|0,Qe=Math.imul(st,jt),Ue=Ue+Math.imul(it,Ot)|0,_e=_e+Math.imul(it,Lt)|0,_e=_e+Math.imul(at,Ot)|0,Qe=Qe+Math.imul(at,Lt)|0;var Pr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,Ue=Math.imul(ft,$t),_e=Math.imul(ft,jt),_e=_e+Math.imul(dt,$t)|0,Qe=Math.imul(dt,jt),Ue=Ue+Math.imul(lt,Ot)|0,_e=_e+Math.imul(lt,Lt)|0,_e=_e+Math.imul(st,Ot)|0,Qe=Qe+Math.imul(st,Lt)|0,Ue=Ue+Math.imul(it,Ht)|0,_e=_e+Math.imul(it,qt)|0,_e=_e+Math.imul(at,Ht)|0,Qe=Qe+Math.imul(at,qt)|0;var Yr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,Ue=Math.imul(pt,$t),_e=Math.imul(pt,jt),_e=_e+Math.imul(mt,$t)|0,Qe=Math.imul(mt,jt),Ue=Ue+Math.imul(ft,Ot)|0,_e=_e+Math.imul(ft,Lt)|0,_e=_e+Math.imul(dt,Ot)|0,Qe=Qe+Math.imul(dt,Lt)|0,Ue=Ue+Math.imul(lt,Ht)|0,_e=_e+Math.imul(lt,qt)|0,_e=_e+Math.imul(st,Ht)|0,Qe=Qe+Math.imul(st,qt)|0,Ue=Ue+Math.imul(it,Vt)|0,_e=_e+Math.imul(it,Gt)|0,_e=_e+Math.imul(at,Vt)|0,Qe=Qe+Math.imul(at,Gt)|0;var Wr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,Ue=Math.imul(xt,$t),_e=Math.imul(xt,jt),_e=_e+Math.imul(yt,$t)|0,Qe=Math.imul(yt,jt),Ue=Ue+Math.imul(pt,Ot)|0,_e=_e+Math.imul(pt,Lt)|0,_e=_e+Math.imul(mt,Ot)|0,Qe=Qe+Math.imul(mt,Lt)|0,Ue=Ue+Math.imul(ft,Ht)|0,_e=_e+Math.imul(ft,qt)|0,_e=_e+Math.imul(dt,Ht)|0,Qe=Qe+Math.imul(dt,qt)|0,Ue=Ue+Math.imul(lt,Vt)|0,_e=_e+Math.imul(lt,Gt)|0,_e=_e+Math.imul(st,Vt)|0,Qe=Qe+Math.imul(st,Gt)|0,Ue=Ue+Math.imul(it,Yt)|0,_e=_e+Math.imul(it,Kt)|0,_e=_e+Math.imul(at,Yt)|0,Qe=Qe+Math.imul(at,Kt)|0;var Zr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,Ue=Math.imul(ht,$t),_e=Math.imul(ht,jt),_e=_e+Math.imul(gt,$t)|0,Qe=Math.imul(gt,jt),Ue=Ue+Math.imul(xt,Ot)|0,_e=_e+Math.imul(xt,Lt)|0,_e=_e+Math.imul(yt,Ot)|0,Qe=Qe+Math.imul(yt,Lt)|0,Ue=Ue+Math.imul(pt,Ht)|0,_e=_e+Math.imul(pt,qt)|0,_e=_e+Math.imul(mt,Ht)|0,Qe=Qe+Math.imul(mt,qt)|0,Ue=Ue+Math.imul(ft,Vt)|0,_e=_e+Math.imul(ft,Gt)|0,_e=_e+Math.imul(dt,Vt)|0,Qe=Qe+Math.imul(dt,Gt)|0,Ue=Ue+Math.imul(lt,Yt)|0,_e=_e+Math.imul(lt,Kt)|0,_e=_e+Math.imul(st,Yt)|0,Qe=Qe+Math.imul(st,Kt)|0,Ue=Ue+Math.imul(it,zt)|0,_e=_e+Math.imul(it,Jt)|0,_e=_e+Math.imul(at,zt)|0,Qe=Qe+Math.imul(at,Jt)|0;var Jr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,Ue=Math.imul(wt,$t),_e=Math.imul(wt,jt),_e=_e+Math.imul(St,$t)|0,Qe=Math.imul(St,jt),Ue=Ue+Math.imul(ht,Ot)|0,_e=_e+Math.imul(ht,Lt)|0,_e=_e+Math.imul(gt,Ot)|0,Qe=Qe+Math.imul(gt,Lt)|0,Ue=Ue+Math.imul(xt,Ht)|0,_e=_e+Math.imul(xt,qt)|0,_e=_e+Math.imul(yt,Ht)|0,Qe=Qe+Math.imul(yt,qt)|0,Ue=Ue+Math.imul(pt,Vt)|0,_e=_e+Math.imul(pt,Gt)|0,_e=_e+Math.imul(mt,Vt)|0,Qe=Qe+Math.imul(mt,Gt)|0,Ue=Ue+Math.imul(ft,Yt)|0,_e=_e+Math.imul(ft,Kt)|0,_e=_e+Math.imul(dt,Yt)|0,Qe=Qe+Math.imul(dt,Kt)|0,Ue=Ue+Math.imul(lt,zt)|0,_e=_e+Math.imul(lt,Jt)|0,_e=_e+Math.imul(st,zt)|0,Qe=Qe+Math.imul(st,Jt)|0,Ue=Ue+Math.imul(it,Xt)|0,_e=_e+Math.imul(it,ir)|0,_e=_e+Math.imul(at,Xt)|0,Qe=Qe+Math.imul(at,ir)|0;var Gr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,Ue=Math.imul(Ct,$t),_e=Math.imul(Ct,jt),_e=_e+Math.imul(Rt,$t)|0,Qe=Math.imul(Rt,jt),Ue=Ue+Math.imul(wt,Ot)|0,_e=_e+Math.imul(wt,Lt)|0,_e=_e+Math.imul(St,Ot)|0,Qe=Qe+Math.imul(St,Lt)|0,Ue=Ue+Math.imul(ht,Ht)|0,_e=_e+Math.imul(ht,qt)|0,_e=_e+Math.imul(gt,Ht)|0,Qe=Qe+Math.imul(gt,qt)|0,Ue=Ue+Math.imul(xt,Vt)|0,_e=_e+Math.imul(xt,Gt)|0,_e=_e+Math.imul(yt,Vt)|0,Qe=Qe+Math.imul(yt,Gt)|0,Ue=Ue+Math.imul(pt,Yt)|0,_e=_e+Math.imul(pt,Kt)|0,_e=_e+Math.imul(mt,Yt)|0,Qe=Qe+Math.imul(mt,Kt)|0,Ue=Ue+Math.imul(ft,zt)|0,_e=_e+Math.imul(ft,Jt)|0,_e=_e+Math.imul(dt,zt)|0,Qe=Qe+Math.imul(dt,Jt)|0,Ue=Ue+Math.imul(lt,Xt)|0,_e=_e+Math.imul(lt,ir)|0,_e=_e+Math.imul(st,Xt)|0,Qe=Qe+Math.imul(st,ir)|0,Ue=Ue+Math.imul(it,er)|0,_e=_e+Math.imul(it,fr)|0,_e=_e+Math.imul(at,er)|0,Qe=Qe+Math.imul(at,fr)|0;var sn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(sn>>>26)|0,sn&=67108863,Ue=Math.imul(Dt,$t),_e=Math.imul(Dt,jt),_e=_e+Math.imul(Tt,$t)|0,Qe=Math.imul(Tt,jt),Ue=Ue+Math.imul(Ct,Ot)|0,_e=_e+Math.imul(Ct,Lt)|0,_e=_e+Math.imul(Rt,Ot)|0,Qe=Qe+Math.imul(Rt,Lt)|0,Ue=Ue+Math.imul(wt,Ht)|0,_e=_e+Math.imul(wt,qt)|0,_e=_e+Math.imul(St,Ht)|0,Qe=Qe+Math.imul(St,qt)|0,Ue=Ue+Math.imul(ht,Vt)|0,_e=_e+Math.imul(ht,Gt)|0,_e=_e+Math.imul(gt,Vt)|0,Qe=Qe+Math.imul(gt,Gt)|0,Ue=Ue+Math.imul(xt,Yt)|0,_e=_e+Math.imul(xt,Kt)|0,_e=_e+Math.imul(yt,Yt)|0,Qe=Qe+Math.imul(yt,Kt)|0,Ue=Ue+Math.imul(pt,zt)|0,_e=_e+Math.imul(pt,Jt)|0,_e=_e+Math.imul(mt,zt)|0,Qe=Qe+Math.imul(mt,Jt)|0,Ue=Ue+Math.imul(ft,Xt)|0,_e=_e+Math.imul(ft,ir)|0,_e=_e+Math.imul(dt,Xt)|0,Qe=Qe+Math.imul(dt,ir)|0,Ue=Ue+Math.imul(lt,er)|0,_e=_e+Math.imul(lt,fr)|0,_e=_e+Math.imul(st,er)|0,Qe=Qe+Math.imul(st,fr)|0,Ue=Ue+Math.imul(it,sr)|0,_e=_e+Math.imul(it,Ar)|0,_e=_e+Math.imul(at,sr)|0,Qe=Qe+Math.imul(at,Ar)|0;var ln=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(ln>>>26)|0,ln&=67108863,Ue=Math.imul(Mt,$t),_e=Math.imul(Mt,jt),_e=_e+Math.imul(kt,$t)|0,Qe=Math.imul(kt,jt),Ue=Ue+Math.imul(Dt,Ot)|0,_e=_e+Math.imul(Dt,Lt)|0,_e=_e+Math.imul(Tt,Ot)|0,Qe=Qe+Math.imul(Tt,Lt)|0,Ue=Ue+Math.imul(Ct,Ht)|0,_e=_e+Math.imul(Ct,qt)|0,_e=_e+Math.imul(Rt,Ht)|0,Qe=Qe+Math.imul(Rt,qt)|0,Ue=Ue+Math.imul(wt,Vt)|0,_e=_e+Math.imul(wt,Gt)|0,_e=_e+Math.imul(St,Vt)|0,Qe=Qe+Math.imul(St,Gt)|0,Ue=Ue+Math.imul(ht,Yt)|0,_e=_e+Math.imul(ht,Kt)|0,_e=_e+Math.imul(gt,Yt)|0,Qe=Qe+Math.imul(gt,Kt)|0,Ue=Ue+Math.imul(xt,zt)|0,_e=_e+Math.imul(xt,Jt)|0,_e=_e+Math.imul(yt,zt)|0,Qe=Qe+Math.imul(yt,Jt)|0,Ue=Ue+Math.imul(pt,Xt)|0,_e=_e+Math.imul(pt,ir)|0,_e=_e+Math.imul(mt,Xt)|0,Qe=Qe+Math.imul(mt,ir)|0,Ue=Ue+Math.imul(ft,er)|0,_e=_e+Math.imul(ft,fr)|0,_e=_e+Math.imul(dt,er)|0,Qe=Qe+Math.imul(dt,fr)|0,Ue=Ue+Math.imul(lt,sr)|0,_e=_e+Math.imul(lt,Ar)|0,_e=_e+Math.imul(st,sr)|0,Qe=Qe+Math.imul(st,Ar)|0,Ue=Ue+Math.imul(it,ar)|0,_e=_e+Math.imul(it,hr)|0,_e=_e+Math.imul(at,ar)|0,Qe=Qe+Math.imul(at,hr)|0;var hn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(hn>>>26)|0,hn&=67108863,Ue=Math.imul(Mt,Ot),_e=Math.imul(Mt,Lt),_e=_e+Math.imul(kt,Ot)|0,Qe=Math.imul(kt,Lt),Ue=Ue+Math.imul(Dt,Ht)|0,_e=_e+Math.imul(Dt,qt)|0,_e=_e+Math.imul(Tt,Ht)|0,Qe=Qe+Math.imul(Tt,qt)|0,Ue=Ue+Math.imul(Ct,Vt)|0,_e=_e+Math.imul(Ct,Gt)|0,_e=_e+Math.imul(Rt,Vt)|0,Qe=Qe+Math.imul(Rt,Gt)|0,Ue=Ue+Math.imul(wt,Yt)|0,_e=_e+Math.imul(wt,Kt)|0,_e=_e+Math.imul(St,Yt)|0,Qe=Qe+Math.imul(St,Kt)|0,Ue=Ue+Math.imul(ht,zt)|0,_e=_e+Math.imul(ht,Jt)|0,_e=_e+Math.imul(gt,zt)|0,Qe=Qe+Math.imul(gt,Jt)|0,Ue=Ue+Math.imul(xt,Xt)|0,_e=_e+Math.imul(xt,ir)|0,_e=_e+Math.imul(yt,Xt)|0,Qe=Qe+Math.imul(yt,ir)|0,Ue=Ue+Math.imul(pt,er)|0,_e=_e+Math.imul(pt,fr)|0,_e=_e+Math.imul(mt,er)|0,Qe=Qe+Math.imul(mt,fr)|0,Ue=Ue+Math.imul(ft,sr)|0,_e=_e+Math.imul(ft,Ar)|0,_e=_e+Math.imul(dt,sr)|0,Qe=Qe+Math.imul(dt,Ar)|0,Ue=Ue+Math.imul(lt,ar)|0,_e=_e+Math.imul(lt,hr)|0,_e=_e+Math.imul(st,ar)|0,Qe=Qe+Math.imul(st,hr)|0;var pn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(pn>>>26)|0,pn&=67108863,Ue=Math.imul(Mt,Ht),_e=Math.imul(Mt,qt),_e=_e+Math.imul(kt,Ht)|0,Qe=Math.imul(kt,qt),Ue=Ue+Math.imul(Dt,Vt)|0,_e=_e+Math.imul(Dt,Gt)|0,_e=_e+Math.imul(Tt,Vt)|0,Qe=Qe+Math.imul(Tt,Gt)|0,Ue=Ue+Math.imul(Ct,Yt)|0,_e=_e+Math.imul(Ct,Kt)|0,_e=_e+Math.imul(Rt,Yt)|0,Qe=Qe+Math.imul(Rt,Kt)|0,Ue=Ue+Math.imul(wt,zt)|0,_e=_e+Math.imul(wt,Jt)|0,_e=_e+Math.imul(St,zt)|0,Qe=Qe+Math.imul(St,Jt)|0,Ue=Ue+Math.imul(ht,Xt)|0,_e=_e+Math.imul(ht,ir)|0,_e=_e+Math.imul(gt,Xt)|0,Qe=Qe+Math.imul(gt,ir)|0,Ue=Ue+Math.imul(xt,er)|0,_e=_e+Math.imul(xt,fr)|0,_e=_e+Math.imul(yt,er)|0,Qe=Qe+Math.imul(yt,fr)|0,Ue=Ue+Math.imul(pt,sr)|0,_e=_e+Math.imul(pt,Ar)|0,_e=_e+Math.imul(mt,sr)|0,Qe=Qe+Math.imul(mt,Ar)|0,Ue=Ue+Math.imul(ft,ar)|0,_e=_e+Math.imul(ft,hr)|0,_e=_e+Math.imul(dt,ar)|0,Qe=Qe+Math.imul(dt,hr)|0;var Xr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,Ue=Math.imul(Mt,Vt),_e=Math.imul(Mt,Gt),_e=_e+Math.imul(kt,Vt)|0,Qe=Math.imul(kt,Gt),Ue=Ue+Math.imul(Dt,Yt)|0,_e=_e+Math.imul(Dt,Kt)|0,_e=_e+Math.imul(Tt,Yt)|0,Qe=Qe+Math.imul(Tt,Kt)|0,Ue=Ue+Math.imul(Ct,zt)|0,_e=_e+Math.imul(Ct,Jt)|0,_e=_e+Math.imul(Rt,zt)|0,Qe=Qe+Math.imul(Rt,Jt)|0,Ue=Ue+Math.imul(wt,Xt)|0,_e=_e+Math.imul(wt,ir)|0,_e=_e+Math.imul(St,Xt)|0,Qe=Qe+Math.imul(St,ir)|0,Ue=Ue+Math.imul(ht,er)|0,_e=_e+Math.imul(ht,fr)|0,_e=_e+Math.imul(gt,er)|0,Qe=Qe+Math.imul(gt,fr)|0,Ue=Ue+Math.imul(xt,sr)|0,_e=_e+Math.imul(xt,Ar)|0,_e=_e+Math.imul(yt,sr)|0,Qe=Qe+Math.imul(yt,Ar)|0,Ue=Ue+Math.imul(pt,ar)|0,_e=_e+Math.imul(pt,hr)|0,_e=_e+Math.imul(mt,ar)|0,Qe=Qe+Math.imul(mt,hr)|0;var yn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(yn>>>26)|0,yn&=67108863,Ue=Math.imul(Mt,Yt),_e=Math.imul(Mt,Kt),_e=_e+Math.imul(kt,Yt)|0,Qe=Math.imul(kt,Kt),Ue=Ue+Math.imul(Dt,zt)|0,_e=_e+Math.imul(Dt,Jt)|0,_e=_e+Math.imul(Tt,zt)|0,Qe=Qe+Math.imul(Tt,Jt)|0,Ue=Ue+Math.imul(Ct,Xt)|0,_e=_e+Math.imul(Ct,ir)|0,_e=_e+Math.imul(Rt,Xt)|0,Qe=Qe+Math.imul(Rt,ir)|0,Ue=Ue+Math.imul(wt,er)|0,_e=_e+Math.imul(wt,fr)|0,_e=_e+Math.imul(St,er)|0,Qe=Qe+Math.imul(St,fr)|0,Ue=Ue+Math.imul(ht,sr)|0,_e=_e+Math.imul(ht,Ar)|0,_e=_e+Math.imul(gt,sr)|0,Qe=Qe+Math.imul(gt,Ar)|0,Ue=Ue+Math.imul(xt,ar)|0,_e=_e+Math.imul(xt,hr)|0,_e=_e+Math.imul(yt,ar)|0,Qe=Qe+Math.imul(yt,hr)|0;var xn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(xn>>>26)|0,xn&=67108863,Ue=Math.imul(Mt,zt),_e=Math.imul(Mt,Jt),_e=_e+Math.imul(kt,zt)|0,Qe=Math.imul(kt,Jt),Ue=Ue+Math.imul(Dt,Xt)|0,_e=_e+Math.imul(Dt,ir)|0,_e=_e+Math.imul(Tt,Xt)|0,Qe=Qe+Math.imul(Tt,ir)|0,Ue=Ue+Math.imul(Ct,er)|0,_e=_e+Math.imul(Ct,fr)|0,_e=_e+Math.imul(Rt,er)|0,Qe=Qe+Math.imul(Rt,fr)|0,Ue=Ue+Math.imul(wt,sr)|0,_e=_e+Math.imul(wt,Ar)|0,_e=_e+Math.imul(St,sr)|0,Qe=Qe+Math.imul(St,Ar)|0,Ue=Ue+Math.imul(ht,ar)|0,_e=_e+Math.imul(ht,hr)|0,_e=_e+Math.imul(gt,ar)|0,Qe=Qe+Math.imul(gt,hr)|0;var dn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(dn>>>26)|0,dn&=67108863,Ue=Math.imul(Mt,Xt),_e=Math.imul(Mt,ir),_e=_e+Math.imul(kt,Xt)|0,Qe=Math.imul(kt,ir),Ue=Ue+Math.imul(Dt,er)|0,_e=_e+Math.imul(Dt,fr)|0,_e=_e+Math.imul(Tt,er)|0,Qe=Qe+Math.imul(Tt,fr)|0,Ue=Ue+Math.imul(Ct,sr)|0,_e=_e+Math.imul(Ct,Ar)|0,_e=_e+Math.imul(Rt,sr)|0,Qe=Qe+Math.imul(Rt,Ar)|0,Ue=Ue+Math.imul(wt,ar)|0,_e=_e+Math.imul(wt,hr)|0,_e=_e+Math.imul(St,ar)|0,Qe=Qe+Math.imul(St,hr)|0;var cn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(cn>>>26)|0,cn&=67108863,Ue=Math.imul(Mt,er),_e=Math.imul(Mt,fr),_e=_e+Math.imul(kt,er)|0,Qe=Math.imul(kt,fr),Ue=Ue+Math.imul(Dt,sr)|0,_e=_e+Math.imul(Dt,Ar)|0,_e=_e+Math.imul(Tt,sr)|0,Qe=Qe+Math.imul(Tt,Ar)|0,Ue=Ue+Math.imul(Ct,ar)|0,_e=_e+Math.imul(Ct,hr)|0,_e=_e+Math.imul(Rt,ar)|0,Qe=Qe+Math.imul(Rt,hr)|0;var wn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(wn>>>26)|0,wn&=67108863,Ue=Math.imul(Mt,sr),_e=Math.imul(Mt,Ar),_e=_e+Math.imul(kt,sr)|0,Qe=Math.imul(kt,Ar),Ue=Ue+Math.imul(Dt,ar)|0,_e=_e+Math.imul(Dt,hr)|0,_e=_e+Math.imul(Tt,ar)|0,Qe=Qe+Math.imul(Tt,hr)|0;var Cn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Ue=Math.imul(Mt,ar),_e=Math.imul(Mt,hr),_e=_e+Math.imul(kt,ar)|0,Qe=Math.imul(kt,hr);var Rr=(We+Ue|0)+((_e&8191)<<13)|0;return We=(Qe+(_e>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,qe[0]=Lr,qe[1]=Pr,qe[2]=Yr,qe[3]=Wr,qe[4]=Zr,qe[5]=Jr,qe[6]=Gr,qe[7]=sn,qe[8]=ln,qe[9]=hn,qe[10]=pn,qe[11]=Xr,qe[12]=yn,qe[13]=xn,qe[14]=dn,qe[15]=cn,qe[16]=wn,qe[17]=Cn,qe[18]=Rr,We!==0&&(qe[19]=We,Re.length++),Re};Math.imul||($e=Ne);function ke(Ge,ve,Be){Be.negative=ve.negative^Ge.negative,Be.length=Ge.length+ve.length;for(var Re=0,Ie=0,Fe=0;Fe<Be.length-1;Fe++){var qe=Ie;Ie=0;for(var We=Re&67108863,Ue=Math.min(Fe,ve.length-1),_e=Math.max(0,Fe-Ge.length+1);_e<=Ue;_e++){var Qe=Fe-_e,tt=Ge.words[Qe]|0,it=ve.words[_e]|0,at=tt*it,ot=at&67108863;qe=qe+(at/67108864|0)|0,ot=ot+We|0,We=ot&67108863,qe=qe+(ot>>>26)|0,Ie+=qe>>>26,qe&=67108863}Be.words[Fe]=We,Re=qe,qe=Ie}return Re!==0?Be.words[Fe]=Re:Be.length--,Be.strip()}function je(Ge,ve,Be){var Re=new Ke;return Re.mulp(Ge,ve,Be)}ue.prototype.mulTo=function(ve,Be){var Re,Ie=this.length+ve.length;return this.length===10&&ve.length===10?Re=$e(this,ve,Be):Ie<63?Re=Ne(this,ve,Be):Ie<1024?Re=ke(this,ve,Be):Re=je(this,ve,Be),Re};function Ke(Ge,ve){this.x=Ge,this.y=ve}Ke.prototype.makeRBT=function(ve){for(var Be=new Array(ve),Re=ue.prototype._countBits(ve)-1,Ie=0;Ie<ve;Ie++)Be[Ie]=this.revBin(Ie,Re,ve);return Be},Ke.prototype.revBin=function(ve,Be,Re){if(ve===0||ve===Re-1)return ve;for(var Ie=0,Fe=0;Fe<Be;Fe++)Ie|=(ve&1)<<Be-Fe-1,ve>>=1;return Ie},Ke.prototype.permute=function(ve,Be,Re,Ie,Fe,qe){for(var We=0;We<qe;We++)Ie[We]=Be[ve[We]],Fe[We]=Re[ve[We]]},Ke.prototype.transform=function(ve,Be,Re,Ie,Fe,qe){this.permute(qe,ve,Be,Re,Ie,Fe);for(var We=1;We<Fe;We<<=1)for(var Ue=We<<1,_e=Math.cos(2*Math.PI/Ue),Qe=Math.sin(2*Math.PI/Ue),tt=0;tt<Fe;tt+=Ue)for(var it=_e,at=Qe,ot=0;ot<We;ot++){var lt=Re[tt+ot],st=Ie[tt+ot],ut=Re[tt+ot+We],ft=Ie[tt+ot+We],dt=it*ut-at*ft;ft=it*ft+at*ut,ut=dt,Re[tt+ot]=lt+ut,Ie[tt+ot]=st+ft,Re[tt+ot+We]=lt-ut,Ie[tt+ot+We]=st-ft,ot!==Ue&&(dt=_e*it-Qe*at,at=_e*at+Qe*it,it=dt)}},Ke.prototype.guessLen13b=function(ve,Be){var Re=Math.max(Be,ve)|1,Ie=Re&1,Fe=0;for(Re=Re/2|0;Re;Re=Re>>>1)Fe++;return 1<<Fe+1+Ie},Ke.prototype.conjugate=function(ve,Be,Re){if(!(Re<=1))for(var Ie=0;Ie<Re/2;Ie++){var Fe=ve[Ie];ve[Ie]=ve[Re-Ie-1],ve[Re-Ie-1]=Fe,Fe=Be[Ie],Be[Ie]=-Be[Re-Ie-1],Be[Re-Ie-1]=-Fe}},Ke.prototype.normalize13b=function(ve,Be){for(var Re=0,Ie=0;Ie<Be/2;Ie++){var Fe=Math.round(ve[2*Ie+1]/Be)*8192+Math.round(ve[2*Ie]/Be)+Re;ve[Ie]=Fe&67108863,Fe<67108864?Re=0:Re=Fe/67108864|0}return ve},Ke.prototype.convert13b=function(ve,Be,Re,Ie){for(var Fe=0,qe=0;qe<Be;qe++)Fe=Fe+(ve[qe]|0),Re[2*qe]=Fe&8191,Fe=Fe>>>13,Re[2*qe+1]=Fe&8191,Fe=Fe>>>13;for(qe=2*Be;qe<Ie;++qe)Re[qe]=0;oe(Fe===0),oe((Fe&-8192)===0)},Ke.prototype.stub=function(ve){for(var Be=new Array(ve),Re=0;Re<ve;Re++)Be[Re]=0;return Be},Ke.prototype.mulp=function(ve,Be,Re){var Ie=2*this.guessLen13b(ve.length,Be.length),Fe=this.makeRBT(Ie),qe=this.stub(Ie),We=new Array(Ie),Ue=new Array(Ie),_e=new Array(Ie),Qe=new Array(Ie),tt=new Array(Ie),it=new Array(Ie),at=Re.words;at.length=Ie,this.convert13b(ve.words,ve.length,We,Ie),this.convert13b(Be.words,Be.length,Qe,Ie),this.transform(We,qe,Ue,_e,Ie,Fe),this.transform(Qe,qe,tt,it,Ie,Fe);for(var ot=0;ot<Ie;ot++){var lt=Ue[ot]*tt[ot]-_e[ot]*it[ot];_e[ot]=Ue[ot]*it[ot]+_e[ot]*tt[ot],Ue[ot]=lt}return this.conjugate(Ue,_e,Ie),this.transform(Ue,_e,at,qe,Ie,Fe),this.conjugate(at,qe,Ie),this.normalize13b(at,Ie),Re.negative=ve.negative^Be.negative,Re.length=ve.length+Be.length,Re.strip()},ue.prototype.mul=function(ve){var Be=new ue(null);return Be.words=new Array(this.length+ve.length),this.mulTo(ve,Be)},ue.prototype.mulf=function(ve){var Be=new ue(null);return Be.words=new Array(this.length+ve.length),je(this,ve,Be)},ue.prototype.imul=function(ve){return this.clone().mulTo(ve,this)},ue.prototype.imuln=function(ve){oe(typeof ve=="number"),oe(ve<67108864);for(var Be=0,Re=0;Re<this.length;Re++){var Ie=(this.words[Re]|0)*ve,Fe=(Ie&67108863)+(Be&67108863);Be>>=26,Be+=Ie/67108864|0,Be+=Fe>>>26,this.words[Re]=Fe&67108863}return Be!==0&&(this.words[Re]=Be,this.length++),this},ue.prototype.muln=function(ve){return this.clone().imuln(ve)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(ve){var Be=Te(ve);if(Be.length===0)return new ue(1);for(var Re=this,Ie=0;Ie<Be.length&&Be[Ie]===0;Ie++,Re=Re.sqr());if(++Ie<Be.length)for(var Fe=Re.sqr();Ie<Be.length;Ie++,Fe=Fe.sqr())Be[Ie]!==0&&(Re=Re.mul(Fe));return Re},ue.prototype.iushln=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26,Ie=67108863>>>26-Be<<26-Be,Fe;if(Be!==0){var qe=0;for(Fe=0;Fe<this.length;Fe++){var We=this.words[Fe]&Ie,Ue=(this.words[Fe]|0)-We<<Be;this.words[Fe]=Ue|qe,qe=We>>>26-Be}qe&&(this.words[Fe]=qe,this.length++)}if(Re!==0){for(Fe=this.length-1;Fe>=0;Fe--)this.words[Fe+Re]=this.words[Fe];for(Fe=0;Fe<Re;Fe++)this.words[Fe]=0;this.length+=Re}return this.strip()},ue.prototype.ishln=function(ve){return oe(this.negative===0),this.iushln(ve)},ue.prototype.iushrn=function(ve,Be,Re){oe(typeof ve=="number"&&ve>=0);var Ie;Be?Ie=(Be-Be%26)/26:Ie=0;var Fe=ve%26,qe=Math.min((ve-Fe)/26,this.length),We=67108863^67108863>>>Fe<<Fe,Ue=Re;if(Ie-=qe,Ie=Math.max(0,Ie),Ue){for(var _e=0;_e<qe;_e++)Ue.words[_e]=this.words[_e];Ue.length=qe}if(qe!==0)if(this.length>qe)for(this.length-=qe,_e=0;_e<this.length;_e++)this.words[_e]=this.words[_e+qe];else this.words[0]=0,this.length=1;var Qe=0;for(_e=this.length-1;_e>=0&&(Qe!==0||_e>=Ie);_e--){var tt=this.words[_e]|0;this.words[_e]=Qe<<26-Fe|tt>>>Fe,Qe=tt&We}return Ue&&Qe!==0&&(Ue.words[Ue.length++]=Qe),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},ue.prototype.ishrn=function(ve,Be,Re){return oe(this.negative===0),this.iushrn(ve,Be,Re)},ue.prototype.shln=function(ve){return this.clone().ishln(ve)},ue.prototype.ushln=function(ve){return this.clone().iushln(ve)},ue.prototype.shrn=function(ve){return this.clone().ishrn(ve)},ue.prototype.ushrn=function(ve){return this.clone().iushrn(ve)},ue.prototype.testn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26,Ie=1<<Be;if(this.length<=Re)return!1;var Fe=this.words[Re];return!!(Fe&Ie)},ue.prototype.imaskn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Re)return this;if(Be!==0&&Re++,this.length=Math.min(Re,this.length),Be!==0){var Ie=67108863^67108863>>>Be<<Be;this.words[this.length-1]&=Ie}return this.strip()},ue.prototype.maskn=function(ve){return this.clone().imaskn(ve)},ue.prototype.iaddn=function(ve){return oe(typeof ve=="number"),oe(ve<67108864),ve<0?this.isubn(-ve):this.negative!==0?this.length===1&&(this.words[0]|0)<ve?(this.words[0]=ve-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ve),this.negative=1,this):this._iaddn(ve)},ue.prototype._iaddn=function(ve){this.words[0]+=ve;for(var Be=0;Be<this.length&&this.words[Be]>=67108864;Be++)this.words[Be]-=67108864,Be===this.length-1?this.words[Be+1]=1:this.words[Be+1]++;return this.length=Math.max(this.length,Be+1),this},ue.prototype.isubn=function(ve){if(oe(typeof ve=="number"),oe(ve<67108864),ve<0)return this.iaddn(-ve);if(this.negative!==0)return this.negative=0,this.iaddn(ve),this.negative=1,this;if(this.words[0]-=ve,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Be=0;Be<this.length&&this.words[Be]<0;Be++)this.words[Be]+=67108864,this.words[Be+1]-=1;return this.strip()},ue.prototype.addn=function(ve){return this.clone().iaddn(ve)},ue.prototype.subn=function(ve){return this.clone().isubn(ve)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(ve,Be,Re){var Ie=ve.length+Re,Fe;this._expand(Ie);var qe,We=0;for(Fe=0;Fe<ve.length;Fe++){qe=(this.words[Fe+Re]|0)+We;var Ue=(ve.words[Fe]|0)*Be;qe-=Ue&67108863,We=(qe>>26)-(Ue/67108864|0),this.words[Fe+Re]=qe&67108863}for(;Fe<this.length-Re;Fe++)qe=(this.words[Fe+Re]|0)+We,We=qe>>26,this.words[Fe+Re]=qe&67108863;if(We===0)return this.strip();for(oe(We===-1),We=0,Fe=0;Fe<this.length;Fe++)qe=-(this.words[Fe]|0)+We,We=qe>>26,this.words[Fe]=qe&67108863;return this.negative=1,this.strip()},ue.prototype._wordDiv=function(ve,Be){var Re=this.length-ve.length,Ie=this.clone(),Fe=ve,qe=Fe.words[Fe.length-1]|0,We=this._countBits(qe);Re=26-We,Re!==0&&(Fe=Fe.ushln(Re),Ie.iushln(Re),qe=Fe.words[Fe.length-1]|0);var Ue=Ie.length-Fe.length,_e;if(Be!=="mod"){_e=new ue(null),_e.length=Ue+1,_e.words=new Array(_e.length);for(var Qe=0;Qe<_e.length;Qe++)_e.words[Qe]=0}var tt=Ie.clone()._ishlnsubmul(Fe,1,Ue);tt.negative===0&&(Ie=tt,_e&&(_e.words[Ue]=1));for(var it=Ue-1;it>=0;it--){var at=(Ie.words[Fe.length+it]|0)*67108864+(Ie.words[Fe.length+it-1]|0);for(at=Math.min(at/qe|0,67108863),Ie._ishlnsubmul(Fe,at,it);Ie.negative!==0;)at--,Ie.negative=0,Ie._ishlnsubmul(Fe,1,it),Ie.isZero()||(Ie.negative^=1);_e&&(_e.words[it]=at)}return _e&&_e.strip(),Ie.strip(),Be!=="div"&&Re!==0&&Ie.iushrn(Re),{div:_e||null,mod:Ie}},ue.prototype.divmod=function(ve,Be,Re){if(oe(!ve.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var Ie,Fe,qe;return this.negative!==0&&ve.negative===0?(qe=this.neg().divmod(ve,Be),Be!=="mod"&&(Ie=qe.div.neg()),Be!=="div"&&(Fe=qe.mod.neg(),Re&&Fe.negative!==0&&Fe.iadd(ve)),{div:Ie,mod:Fe}):this.negative===0&&ve.negative!==0?(qe=this.divmod(ve.neg(),Be),Be!=="mod"&&(Ie=qe.div.neg()),{div:Ie,mod:qe.mod}):this.negative&ve.negative?(qe=this.neg().divmod(ve.neg(),Be),Be!=="div"&&(Fe=qe.mod.neg(),Re&&Fe.negative!==0&&Fe.isub(ve)),{div:qe.div,mod:Fe}):ve.length>this.length||this.cmp(ve)<0?{div:new ue(0),mod:this}:ve.length===1?Be==="div"?{div:this.divn(ve.words[0]),mod:null}:Be==="mod"?{div:null,mod:new ue(this.modn(ve.words[0]))}:{div:this.divn(ve.words[0]),mod:new ue(this.modn(ve.words[0]))}:this._wordDiv(ve,Be)},ue.prototype.div=function(ve){return this.divmod(ve,"div",!1).div},ue.prototype.mod=function(ve){return this.divmod(ve,"mod",!1).mod},ue.prototype.umod=function(ve){return this.divmod(ve,"mod",!0).mod},ue.prototype.divRound=function(ve){var Be=this.divmod(ve);if(Be.mod.isZero())return Be.div;var Re=Be.div.negative!==0?Be.mod.isub(ve):Be.mod,Ie=ve.ushrn(1),Fe=ve.andln(1),qe=Re.cmp(Ie);return qe<0||Fe===1&&qe===0?Be.div:Be.div.negative!==0?Be.div.isubn(1):Be.div.iaddn(1)},ue.prototype.modn=function(ve){oe(ve<=67108863);for(var Be=(1<<26)%ve,Re=0,Ie=this.length-1;Ie>=0;Ie--)Re=(Be*Re+(this.words[Ie]|0))%ve;return Re},ue.prototype.idivn=function(ve){oe(ve<=67108863);for(var Be=0,Re=this.length-1;Re>=0;Re--){var Ie=(this.words[Re]|0)+Be*67108864;this.words[Re]=Ie/ve|0,Be=Ie%ve}return this.strip()},ue.prototype.divn=function(ve){return this.clone().idivn(ve)},ue.prototype.egcd=function(ve){oe(ve.negative===0),oe(!ve.isZero());var Be=this,Re=ve.clone();Be.negative!==0?Be=Be.umod(ve):Be=Be.clone();for(var Ie=new ue(1),Fe=new ue(0),qe=new ue(0),We=new ue(1),Ue=0;Be.isEven()&&Re.isEven();)Be.iushrn(1),Re.iushrn(1),++Ue;for(var _e=Re.clone(),Qe=Be.clone();!Be.isZero();){for(var tt=0,it=1;!(Be.words[0]&it)&&tt<26;++tt,it<<=1);if(tt>0)for(Be.iushrn(tt);tt-- >0;)(Ie.isOdd()||Fe.isOdd())&&(Ie.iadd(_e),Fe.isub(Qe)),Ie.iushrn(1),Fe.iushrn(1);for(var at=0,ot=1;!(Re.words[0]&ot)&&at<26;++at,ot<<=1);if(at>0)for(Re.iushrn(at);at-- >0;)(qe.isOdd()||We.isOdd())&&(qe.iadd(_e),We.isub(Qe)),qe.iushrn(1),We.iushrn(1);Be.cmp(Re)>=0?(Be.isub(Re),Ie.isub(qe),Fe.isub(We)):(Re.isub(Be),qe.isub(Ie),We.isub(Fe))}return{a:qe,b:We,gcd:Re.iushln(Ue)}},ue.prototype._invmp=function(ve){oe(ve.negative===0),oe(!ve.isZero());var Be=this,Re=ve.clone();Be.negative!==0?Be=Be.umod(ve):Be=Be.clone();for(var Ie=new ue(1),Fe=new ue(0),qe=Re.clone();Be.cmpn(1)>0&&Re.cmpn(1)>0;){for(var We=0,Ue=1;!(Be.words[0]&Ue)&&We<26;++We,Ue<<=1);if(We>0)for(Be.iushrn(We);We-- >0;)Ie.isOdd()&&Ie.iadd(qe),Ie.iushrn(1);for(var _e=0,Qe=1;!(Re.words[0]&Qe)&&_e<26;++_e,Qe<<=1);if(_e>0)for(Re.iushrn(_e);_e-- >0;)Fe.isOdd()&&Fe.iadd(qe),Fe.iushrn(1);Be.cmp(Re)>=0?(Be.isub(Re),Ie.isub(Fe)):(Re.isub(Be),Fe.isub(Ie))}var tt;return Be.cmpn(1)===0?tt=Ie:tt=Fe,tt.cmpn(0)<0&&tt.iadd(ve),tt},ue.prototype.gcd=function(ve){if(this.isZero())return ve.abs();if(ve.isZero())return this.abs();var Be=this.clone(),Re=ve.clone();Be.negative=0,Re.negative=0;for(var Ie=0;Be.isEven()&&Re.isEven();Ie++)Be.iushrn(1),Re.iushrn(1);do{for(;Be.isEven();)Be.iushrn(1);for(;Re.isEven();)Re.iushrn(1);var Fe=Be.cmp(Re);if(Fe<0){var qe=Be;Be=Re,Re=qe}else if(Fe===0||Re.cmpn(1)===0)break;Be.isub(Re)}while(!0);return Re.iushln(Ie)},ue.prototype.invm=function(ve){return this.egcd(ve).a.umod(ve)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(ve){return this.words[0]&ve},ue.prototype.bincn=function(ve){oe(typeof ve=="number");var Be=ve%26,Re=(ve-Be)/26,Ie=1<<Be;if(this.length<=Re)return this._expand(Re+1),this.words[Re]|=Ie,this;for(var Fe=Ie,qe=Re;Fe!==0&&qe<this.length;qe++){var We=this.words[qe]|0;We+=Fe,Fe=We>>>26,We&=67108863,this.words[qe]=We}return Fe!==0&&(this.words[qe]=Fe,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(ve){var Be=ve<0;if(this.negative!==0&&!Be)return-1;if(this.negative===0&&Be)return 1;this.strip();var Re;if(this.length>1)Re=1;else{Be&&(ve=-ve),oe(ve<=67108863,"Number is too big");var Ie=this.words[0]|0;Re=Ie===ve?0:Ie<ve?-1:1}return this.negative!==0?-Re|0:Re},ue.prototype.cmp=function(ve){if(this.negative!==0&&ve.negative===0)return-1;if(this.negative===0&&ve.negative!==0)return 1;var Be=this.ucmp(ve);return this.negative!==0?-Be|0:Be},ue.prototype.ucmp=function(ve){if(this.length>ve.length)return 1;if(this.length<ve.length)return-1;for(var Be=0,Re=this.length-1;Re>=0;Re--){var Ie=this.words[Re]|0,Fe=ve.words[Re]|0;if(Ie!==Fe){Ie<Fe?Be=-1:Ie>Fe&&(Be=1);break}}return Be},ue.prototype.gtn=function(ve){return this.cmpn(ve)===1},ue.prototype.gt=function(ve){return this.cmp(ve)===1},ue.prototype.gten=function(ve){return this.cmpn(ve)>=0},ue.prototype.gte=function(ve){return this.cmp(ve)>=0},ue.prototype.ltn=function(ve){return this.cmpn(ve)===-1},ue.prototype.lt=function(ve){return this.cmp(ve)===-1},ue.prototype.lten=function(ve){return this.cmpn(ve)<=0},ue.prototype.lte=function(ve){return this.cmp(ve)<=0},ue.prototype.eqn=function(ve){return this.cmpn(ve)===0},ue.prototype.eq=function(ve){return this.cmp(ve)===0},ue.red=function(ve){return new et(ve)},ue.prototype.toRed=function(ve){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),ve.convertTo(this)._forceRed(ve)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(ve){return this.red=ve,this},ue.prototype.forceRed=function(ve){return oe(!this.red,"Already a number in reduction context"),this._forceRed(ve)},ue.prototype.redAdd=function(ve){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,ve)},ue.prototype.redIAdd=function(ve){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ve)},ue.prototype.redSub=function(ve){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,ve)},ue.prototype.redISub=function(ve){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,ve)},ue.prototype.redShl=function(ve){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,ve)},ue.prototype.redMul=function(ve){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,ve),this.red.mul(this,ve)},ue.prototype.redIMul=function(ve){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,ve),this.red.imul(this,ve)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(ve){return oe(this.red&&!ve.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ve)};var Ye={k256:null,p224:null,p192:null,p25519:null};function ze(Ge,ve){this.name=Ge,this.p=new ue(ve,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ze.prototype._tmp=function(){var ve=new ue(null);return ve.words=new Array(Math.ceil(this.n/13)),ve},ze.prototype.ireduce=function(ve){var Be=ve,Re;do this.split(Be,this.tmp),Be=this.imulK(Be),Be=Be.iadd(this.tmp),Re=Be.bitLength();while(Re>this.n);var Ie=Re<this.n?-1:Be.ucmp(this.p);return Ie===0?(Be.words[0]=0,Be.length=1):Ie>0?Be.isub(this.p):Be.strip!==void 0?Be.strip():Be._strip(),Be},ze.prototype.split=function(ve,Be){ve.iushrn(this.n,0,Be)},ze.prototype.imulK=function(ve){return ve.imul(this.k)};function Xe(){ze.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(Xe,ze),Xe.prototype.split=function(ve,Be){for(var Re=4194303,Ie=Math.min(ve.length,9),Fe=0;Fe<Ie;Fe++)Be.words[Fe]=ve.words[Fe];if(Be.length=Ie,ve.length<=9){ve.words[0]=0,ve.length=1;return}var qe=ve.words[9];for(Be.words[Be.length++]=qe&Re,Fe=10;Fe<ve.length;Fe++){var We=ve.words[Fe]|0;ve.words[Fe-10]=(We&Re)<<4|qe>>>22,qe=We}qe>>>=22,ve.words[Fe-10]=qe,qe===0&&ve.length>10?ve.length-=10:ve.length-=9},Xe.prototype.imulK=function(ve){ve.words[ve.length]=0,ve.words[ve.length+1]=0,ve.length+=2;for(var Be=0,Re=0;Re<ve.length;Re++){var Ie=ve.words[Re]|0;Be+=Ie*977,ve.words[Re]=Be&67108863,Be=Ie*64+(Be/67108864|0)}return ve.words[ve.length-1]===0&&(ve.length--,ve.words[ve.length-1]===0&&ve.length--),ve};function Je(){ze.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(Je,ze);function rt(){ze.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(rt,ze);function Ze(){ze.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(Ze,ze),Ze.prototype.imulK=function(ve){for(var Be=0,Re=0;Re<ve.length;Re++){var Ie=(ve.words[Re]|0)*19+Be,Fe=Ie&67108863;Ie>>>=26,ve.words[Re]=Fe,Be=Ie}return Be!==0&&(ve.words[ve.length++]=Be),ve},ue._prime=function(ve){if(Ye[ve])return Ye[ve];var Be;if(ve==="k256")Be=new Xe;else if(ve==="p224")Be=new Je;else if(ve==="p192")Be=new rt;else if(ve==="p25519")Be=new Ze;else throw new Error("Unknown prime "+ve);return Ye[ve]=Be,Be};function et(Ge){if(typeof Ge=="string"){var ve=ue._prime(Ge);this.m=ve.p,this.prime=ve}else oe(Ge.gtn(1),"modulus must be greater than 1"),this.m=Ge,this.prime=null}et.prototype._verify1=function(ve){oe(ve.negative===0,"red works only with positives"),oe(ve.red,"red works only with red numbers")},et.prototype._verify2=function(ve,Be){oe((ve.negative|Be.negative)===0,"red works only with positives"),oe(ve.red&&ve.red===Be.red,"red works only with red numbers")},et.prototype.imod=function(ve){return this.prime?this.prime.ireduce(ve)._forceRed(this):ve.umod(this.m)._forceRed(this)},et.prototype.neg=function(ve){return ve.isZero()?ve.clone():this.m.sub(ve)._forceRed(this)},et.prototype.add=function(ve,Be){this._verify2(ve,Be);var Re=ve.add(Be);return Re.cmp(this.m)>=0&&Re.isub(this.m),Re._forceRed(this)},et.prototype.iadd=function(ve,Be){this._verify2(ve,Be);var Re=ve.iadd(Be);return Re.cmp(this.m)>=0&&Re.isub(this.m),Re},et.prototype.sub=function(ve,Be){this._verify2(ve,Be);var Re=ve.sub(Be);return Re.cmpn(0)<0&&Re.iadd(this.m),Re._forceRed(this)},et.prototype.isub=function(ve,Be){this._verify2(ve,Be);var Re=ve.isub(Be);return Re.cmpn(0)<0&&Re.iadd(this.m),Re},et.prototype.shl=function(ve,Be){return this._verify1(ve),this.imod(ve.ushln(Be))},et.prototype.imul=function(ve,Be){return this._verify2(ve,Be),this.imod(ve.imul(Be))},et.prototype.mul=function(ve,Be){return this._verify2(ve,Be),this.imod(ve.mul(Be))},et.prototype.isqr=function(ve){return this.imul(ve,ve.clone())},et.prototype.sqr=function(ve){return this.mul(ve,ve)},et.prototype.sqrt=function(ve){if(ve.isZero())return ve.clone();var Be=this.m.andln(3);if(oe(Be%2===1),Be===3){var Re=this.m.add(new ue(1)).iushrn(2);return this.pow(ve,Re)}for(var Ie=this.m.subn(1),Fe=0;!Ie.isZero()&&Ie.andln(1)===0;)Fe++,Ie.iushrn(1);oe(!Ie.isZero());var qe=new ue(1).toRed(this),We=qe.redNeg(),Ue=this.m.subn(1).iushrn(1),_e=this.m.bitLength();for(_e=new ue(2*_e*_e).toRed(this);this.pow(_e,Ue).cmp(We)!==0;)_e.redIAdd(We);for(var Qe=this.pow(_e,Ie),tt=this.pow(ve,Ie.addn(1).iushrn(1)),it=this.pow(ve,Ie),at=Fe;it.cmp(qe)!==0;){for(var ot=it,lt=0;ot.cmp(qe)!==0;lt++)ot=ot.redSqr();oe(lt<at);var st=this.pow(Qe,new ue(1).iushln(at-lt-1));tt=tt.redMul(st),Qe=st.redSqr(),it=it.redMul(Qe),at=lt}return tt},et.prototype.invm=function(ve){var Be=ve._invmp(this.m);return Be.negative!==0?(Be.negative=0,this.imod(Be).redNeg()):this.imod(Be)},et.prototype.pow=function(ve,Be){if(Be.isZero())return new ue(1).toRed(this);if(Be.cmpn(1)===0)return ve.clone();var Re=4,Ie=new Array(1<<Re);Ie[0]=new ue(1).toRed(this),Ie[1]=ve;for(var Fe=2;Fe<Ie.length;Fe++)Ie[Fe]=this.mul(Ie[Fe-1],ve);var qe=Ie[0],We=0,Ue=0,_e=Be.bitLength()%26;for(_e===0&&(_e=26),Fe=Be.length-1;Fe>=0;Fe--){for(var Qe=Be.words[Fe],tt=_e-1;tt>=0;tt--){var it=Qe>>tt&1;if(qe!==Ie[0]&&(qe=this.sqr(qe)),it===0&&We===0){Ue=0;continue}We<<=1,We|=it,Ue++,!(Ue!==Re&&(Fe!==0||tt!==0))&&(qe=this.mul(qe,Ie[We]),Ue=0,We=0)}_e=26}return qe},et.prototype.convertTo=function(ve){var Be=ve.umod(this.m);return Be===ve?Be.clone():Be},et.prototype.convertFrom=function(ve){var Be=ve.clone();return Be.red=null,Be},ue.mont=function(ve){return new nt(ve)};function nt(Ge){et.call(this,Ge),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(nt,et),nt.prototype.convertTo=function(ve){return this.imod(ve.ushln(this.shift))},nt.prototype.convertFrom=function(ve){var Be=this.imod(ve.mul(this.rinv));return Be.red=null,Be},nt.prototype.imul=function(ve,Be){if(ve.isZero()||Be.isZero())return ve.words[0]=0,ve.length=1,ve;var Re=ve.imul(Be),Ie=Re.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Fe=Re.isub(Ie).iushrn(this.shift),qe=Fe;return Fe.cmp(this.m)>=0?qe=Fe.isub(this.m):Fe.cmpn(0)<0&&(qe=Fe.iadd(this.m)),qe._forceRed(this)},nt.prototype.mul=function(ve,Be){if(ve.isZero()||Be.isZero())return new ue(0)._forceRed(this);var Re=ve.mul(Be),Ie=Re.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Fe=Re.isub(Ie).iushrn(this.shift),qe=Fe;return Fe.cmp(this.m)>=0?qe=Fe.isub(this.m):Fe.cmpn(0)<0&&(qe=Fe.iadd(this.m)),qe._forceRed(this)},nt.prototype.invm=function(ve){var Be=this.imod(ve._invmp(this.m).mul(this.r2));return Be._forceRed(this)}})(K,commonjsGlobal)}(bn$2)),bn$2.exports}var api={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(K,J){if(K.indexOf)return K.indexOf(J);for(var ne=0;ne<K.length;ne++)if(K[ne]===J)return ne;return-1},Object_keys=function(K){if(Object.keys)return Object.keys(K);var J=[];for(var ne in K)J.push(ne);return J},forEach=function(K,J){if(K.forEach)return K.forEach(J);for(var ne=0;ne<K.length;ne++)J(K[ne],ne,K)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(K,J,ne){Object.defineProperty(K,J,{writable:!0,enumerable:!1,configurable:!0,value:ne})}}catch{return function(J,ne,oe){J[ne]=oe}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(J){if(!(this instanceof Script))return new Script(J);this.code=J};Script.prototype.runInContext=function(K){if(!(K instanceof Context))throw new TypeError("needs a 'context' argument.");var J=document.createElement("iframe");J.style||(J.style={}),J.style.display="none",document.body.appendChild(J);var ne=J.contentWindow,oe=ne.eval,ce=ne.execScript;!oe&&ce&&(ce.call(ne,"null"),oe=ne.eval),forEach(Object_keys(K),function(pe){ne[pe]=K[pe]}),forEach(globals,function(pe){K[pe]&&(ne[pe]=K[pe])});var ue=Object_keys(ne),Ae=oe.call(ne,this.code);return forEach(Object_keys(ne),function(pe){(pe in K||indexOf(ue,pe)===-1)&&(K[pe]=ne[pe])}),forEach(globals,function(pe){pe in K||defineProp(K,pe,ne[pe])}),document.body.removeChild(J),Ae},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(K){var J=Script.createContext(K),ne=this.runInContext(J);return K&&forEach(Object_keys(J),function(oe){K[oe]=J[oe]}),ne},forEach(Object_keys(Script.prototype),function(K){exports[K]=Script[K]=function(J){var ne=Script(J);return ne[K].apply(ne,[].slice.call(arguments,1))}}),exports.isContext=function(K){return K instanceof Context},exports.createScript=function(K){return exports.Script(K)},exports.createContext=Script.createContext=function(K){var J=new Context;return typeof K=="object"&&forEach(Object_keys(K),function(ne){J[ne]=K[ne]}),J}}(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(K){var J=requireAsn1$1(),ne=requireInherits_browser(),oe=K;oe.define=function(Ae,pe){return new ce(Ae,pe)};function ce(ue,Ae){this.name=ue,this.body=Ae,this.decoders={},this.encoders={}}ce.prototype._createNamed=function(Ae){var pe;try{pe=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{pe=function(me){this._initNamed(me)}}return ne(pe,Ae),pe.prototype._initNamed=function(me){Ae.call(this,me)},new pe(this)},ce.prototype._getDecoder=function(Ae){return Ae=Ae||"der",this.decoders.hasOwnProperty(Ae)||(this.decoders[Ae]=this._createNamed(J.decoders[Ae])),this.decoders[Ae]},ce.prototype.decode=function(Ae,pe,xe){return this._getDecoder(pe).decode(Ae,xe)},ce.prototype._getEncoder=function(Ae){return Ae=Ae||"der",this.encoders.hasOwnProperty(Ae)||(this.encoders[Ae]=this._createNamed(J.encoders[Ae])),this.encoders[Ae]},ce.prototype.encode=function(Ae,pe,xe){return this._getEncoder(pe).encode(Ae,xe)}}(api)),api}var base={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var K=requireInherits_browser();function J(oe){this._reporterState={obj:null,path:[],options:oe||{},errors:[]}}reporter.Reporter=J,J.prototype.isError=function(ce){return ce instanceof ne},J.prototype.save=function(){var ce=this._reporterState;return{obj:ce.obj,pathLen:ce.path.length}},J.prototype.restore=function(ce){var ue=this._reporterState;ue.obj=ce.obj,ue.path=ue.path.slice(0,ce.pathLen)},J.prototype.enterKey=function(ce){return this._reporterState.path.push(ce)},J.prototype.exitKey=function(ce){var ue=this._reporterState;ue.path=ue.path.slice(0,ce-1)},J.prototype.leaveKey=function(ce,ue,Ae){var pe=this._reporterState;this.exitKey(ce),pe.obj!==null&&(pe.obj[ue]=Ae)},J.prototype.path=function(){return this._reporterState.path.join("/")},J.prototype.enterObject=function(){var ce=this._reporterState,ue=ce.obj;return ce.obj={},ue},J.prototype.leaveObject=function(ce){var ue=this._reporterState,Ae=ue.obj;return ue.obj=ce,Ae},J.prototype.error=function(ce){var ue,Ae=this._reporterState,pe=ce instanceof ne;if(pe?ue=ce:ue=new ne(Ae.path.map(function(xe){return"["+JSON.stringify(xe)+"]"}).join(""),ce.message||ce,ce.stack),!Ae.options.partial)throw ue;return pe||Ae.errors.push(ue),ue},J.prototype.wrapResult=function(ce){var ue=this._reporterState;return ue.options.partial?{result:this.isError(ce)?null:ce,errors:ue.errors}:ce};function ne(oe,ce){this.path=oe,this.rethrow(ce)}return K(ne,Error),ne.prototype.rethrow=function(ce){if(this.message=ce+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ne),!this.stack)try{throw new Error(this.message)}catch(ue){this.stack=ue.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var K=requireInherits_browser(),J=requireBase().Reporter,ne=require$$0$1.Buffer;function oe(ue,Ae){if(J.call(this,Ae),!ne.isBuffer(ue)){this.error("Input not Buffer");return}this.base=ue,this.offset=0,this.length=ue.length}K(oe,J),buffer.DecoderBuffer=oe,oe.prototype.save=function(){return{offset:this.offset,reporter:J.prototype.save.call(this)}},oe.prototype.restore=function(Ae){var pe=new oe(this.base);return pe.offset=Ae.offset,pe.length=this.offset,this.offset=Ae.offset,J.prototype.restore.call(this,Ae.reporter),pe},oe.prototype.isEmpty=function(){return this.offset===this.length},oe.prototype.readUInt8=function(Ae){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(Ae||"DecoderBuffer overrun")},oe.prototype.skip=function(Ae,pe){if(!(this.offset+Ae<=this.length))return this.error(pe||"DecoderBuffer overrun");var xe=new oe(this.base);return xe._reporterState=this._reporterState,xe.offset=this.offset,xe.length=this.offset+Ae,this.offset+=Ae,xe},oe.prototype.raw=function(Ae){return this.base.slice(Ae?Ae.offset:this.offset,this.length)};function ce(ue,Ae){if(Array.isArray(ue))this.length=0,this.value=ue.map(function(pe){return pe instanceof ce||(pe=new ce(pe,Ae)),this.length+=pe.length,pe},this);else if(typeof ue=="number"){if(!(0<=ue&&ue<=255))return Ae.error("non-byte EncoderBuffer value");this.value=ue,this.length=1}else if(typeof ue=="string")this.value=ue,this.length=ne.byteLength(ue);else if(ne.isBuffer(ue))this.value=ue,this.length=ue.length;else return Ae.error("Unsupported type: "+typeof ue)}return buffer.EncoderBuffer=ce,ce.prototype.join=function(Ae,pe){return Ae||(Ae=new ne(this.length)),pe||(pe=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(xe){xe.join(Ae,pe),pe+=xe.length}):(typeof this.value=="number"?Ae[pe]=this.value:typeof this.value=="string"?Ae.write(this.value,pe):ne.isBuffer(this.value)&&this.value.copy(Ae,pe),pe+=this.length)),Ae},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var K=requireBase().Reporter,J=requireBase().EncoderBuffer,ne=requireBase().DecoderBuffer,oe=requireMinimalisticAssert(),ce=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],ue=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(ce),Ae=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function pe(me,ge){var ye={};this._baseState=ye,ye.enc=me,ye.parent=ge||null,ye.children=null,ye.tag=null,ye.args=null,ye.reverseArgs=null,ye.choice=null,ye.optional=!1,ye.any=!1,ye.obj=!1,ye.use=null,ye.useDecoder=null,ye.key=null,ye.default=null,ye.explicit=null,ye.implicit=null,ye.contains=null,ye.parent||(ye.children=[],this._wrap())}node=pe;var xe=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return pe.prototype.clone=function(){var ge=this._baseState,ye={};xe.forEach(function(Te){ye[Te]=ge[Te]});var Se=new this.constructor(ye.parent);return Se._baseState=ye,Se},pe.prototype._wrap=function(){var ge=this._baseState;ue.forEach(function(ye){this[ye]=function(){var Te=new this.constructor(this);return ge.children.push(Te),Te[ye].apply(Te,arguments)}},this)},pe.prototype._init=function(ge){var ye=this._baseState;oe(ye.parent===null),ge.call(this),ye.children=ye.children.filter(function(Se){return Se._baseState.parent===this},this),oe.equal(ye.children.length,1,"Root node can have only one child")},pe.prototype._useArgs=function(ge){var ye=this._baseState,Se=ge.filter(function(Te){return Te instanceof this.constructor},this);ge=ge.filter(function(Te){return!(Te instanceof this.constructor)},this),Se.length!==0&&(oe(ye.children===null),ye.children=Se,Se.forEach(function(Te){Te._baseState.parent=this},this)),ge.length!==0&&(oe(ye.args===null),ye.args=ge,ye.reverseArgs=ge.map(function(Te){if(typeof Te!="object"||Te.constructor!==Object)return Te;var Ne={};return Object.keys(Te).forEach(function($e){$e==($e|0)&&($e|=0);var ke=Te[$e];Ne[ke]=$e}),Ne}))},Ae.forEach(function(me){pe.prototype[me]=function(){var ye=this._baseState;throw new Error(me+" not implemented for encoding: "+ye.enc)}}),ce.forEach(function(me){pe.prototype[me]=function(){var ye=this._baseState,Se=Array.prototype.slice.call(arguments);return oe(ye.tag===null),ye.tag=me,this._useArgs(Se),this}}),pe.prototype.use=function(ge){oe(ge);var ye=this._baseState;return oe(ye.use===null),ye.use=ge,this},pe.prototype.optional=function(){var ge=this._baseState;return ge.optional=!0,this},pe.prototype.def=function(ge){var ye=this._baseState;return oe(ye.default===null),ye.default=ge,ye.optional=!0,this},pe.prototype.explicit=function(ge){var ye=this._baseState;return oe(ye.explicit===null&&ye.implicit===null),ye.explicit=ge,this},pe.prototype.implicit=function(ge){var ye=this._baseState;return oe(ye.explicit===null&&ye.implicit===null),ye.implicit=ge,this},pe.prototype.obj=function(){var ge=this._baseState,ye=Array.prototype.slice.call(arguments);return ge.obj=!0,ye.length!==0&&this._useArgs(ye),this},pe.prototype.key=function(ge){var ye=this._baseState;return oe(ye.key===null),ye.key=ge,this},pe.prototype.any=function(){var ge=this._baseState;return ge.any=!0,this},pe.prototype.choice=function(ge){var ye=this._baseState;return oe(ye.choice===null),ye.choice=ge,this._useArgs(Object.keys(ge).map(function(Se){return ge[Se]})),this},pe.prototype.contains=function(ge){var ye=this._baseState;return oe(ye.use===null),ye.contains=ge,this},pe.prototype._decode=function(ge,ye){var Se=this._baseState;if(Se.parent===null)return ge.wrapResult(Se.children[0]._decode(ge,ye));var Te=Se.default,Ne=!0,$e=null;if(Se.key!==null&&($e=ge.enterKey(Se.key)),Se.optional){var ke=null;if(Se.explicit!==null?ke=Se.explicit:Se.implicit!==null?ke=Se.implicit:Se.tag!==null&&(ke=Se.tag),ke===null&&!Se.any){var je=ge.save();try{Se.choice===null?this._decodeGeneric(Se.tag,ge,ye):this._decodeChoice(ge,ye),Ne=!0}catch{Ne=!1}ge.restore(je)}else if(Ne=this._peekTag(ge,ke,Se.any),ge.isError(Ne))return Ne}var Ke;if(Se.obj&&Ne&&(Ke=ge.enterObject()),Ne){if(Se.explicit!==null){var Ye=this._decodeTag(ge,Se.explicit);if(ge.isError(Ye))return Ye;ge=Ye}var ze=ge.offset;if(Se.use===null&&Se.choice===null){if(Se.any)var je=ge.save();var Xe=this._decodeTag(ge,Se.implicit!==null?Se.implicit:Se.tag,Se.any);if(ge.isError(Xe))return Xe;Se.any?Te=ge.raw(je):ge=Xe}if(ye&&ye.track&&Se.tag!==null&&ye.track(ge.path(),ze,ge.length,"tagged"),ye&&ye.track&&Se.tag!==null&&ye.track(ge.path(),ge.offset,ge.length,"content"),Se.any?Te=Te:Se.choice===null?Te=this._decodeGeneric(Se.tag,ge,ye):Te=this._decodeChoice(ge,ye),ge.isError(Te))return Te;if(!Se.any&&Se.choice===null&&Se.children!==null&&Se.children.forEach(function(Ze){Ze._decode(ge,ye)}),Se.contains&&(Se.tag==="octstr"||Se.tag==="bitstr")){var Je=new ne(Te);Te=this._getUse(Se.contains,ge._reporterState.obj)._decode(Je,ye)}}return Se.obj&&Ne&&(Te=ge.leaveObject(Ke)),Se.key!==null&&(Te!==null||Ne===!0)?ge.leaveKey($e,Se.key,Te):$e!==null&&ge.exitKey($e),Te},pe.prototype._decodeGeneric=function(ge,ye,Se){var Te=this._baseState;return ge==="seq"||ge==="set"?null:ge==="seqof"||ge==="setof"?this._decodeList(ye,ge,Te.args[0],Se):/str$/.test(ge)?this._decodeStr(ye,ge,Se):ge==="objid"&&Te.args?this._decodeObjid(ye,Te.args[0],Te.args[1],Se):ge==="objid"?this._decodeObjid(ye,null,null,Se):ge==="gentime"||ge==="utctime"?this._decodeTime(ye,ge,Se):ge==="null_"?this._decodeNull(ye,Se):ge==="bool"?this._decodeBool(ye,Se):ge==="objDesc"?this._decodeStr(ye,ge,Se):ge==="int"||ge==="enum"?this._decodeInt(ye,Te.args&&Te.args[0],Se):Te.use!==null?this._getUse(Te.use,ye._reporterState.obj)._decode(ye,Se):ye.error("unknown tag: "+ge)},pe.prototype._getUse=function(ge,ye){var Se=this._baseState;return Se.useDecoder=this._use(ge,ye),oe(Se.useDecoder._baseState.parent===null),Se.useDecoder=Se.useDecoder._baseState.children[0],Se.implicit!==Se.useDecoder._baseState.implicit&&(Se.useDecoder=Se.useDecoder.clone(),Se.useDecoder._baseState.implicit=Se.implicit),Se.useDecoder},pe.prototype._decodeChoice=function(ge,ye){var Se=this._baseState,Te=null,Ne=!1;return Object.keys(Se.choice).some(function($e){var ke=ge.save(),je=Se.choice[$e];try{var Ke=je._decode(ge,ye);if(ge.isError(Ke))return!1;Te={type:$e,value:Ke},Ne=!0}catch{return ge.restore(ke),!1}return!0},this),Ne?Te:ge.error("Choice not matched")},pe.prototype._createEncoderBuffer=function(ge){return new J(ge,this.reporter)},pe.prototype._encode=function(ge,ye,Se){var Te=this._baseState;if(!(Te.default!==null&&Te.default===ge)){var Ne=this._encodeValue(ge,ye,Se);if(Ne!==void 0&&!this._skipDefault(Ne,ye,Se))return Ne}},pe.prototype._encodeValue=function(ge,ye,Se){var Te=this._baseState;if(Te.parent===null)return Te.children[0]._encode(ge,ye||new K);var je=null;if(this.reporter=ye,Te.optional&&ge===void 0)if(Te.default!==null)ge=Te.default;else return;var Ne=null,$e=!1;if(Te.any)je=this._createEncoderBuffer(ge);else if(Te.choice)je=this._encodeChoice(ge,ye);else if(Te.contains)Ne=this._getUse(Te.contains,Se)._encode(ge,ye),$e=!0;else if(Te.children)Ne=Te.children.map(function(ze){if(ze._baseState.tag==="null_")return ze._encode(null,ye,ge);if(ze._baseState.key===null)return ye.error("Child should have a key");var Xe=ye.enterKey(ze._baseState.key);if(typeof ge!="object")return ye.error("Child expected, but input is not object");var Je=ze._encode(ge[ze._baseState.key],ye,ge);return ye.leaveKey(Xe),Je},this).filter(function(ze){return ze}),Ne=this._createEncoderBuffer(Ne);else if(Te.tag==="seqof"||Te.tag==="setof"){if(!(Te.args&&Te.args.length===1))return ye.error("Too many args for : "+Te.tag);if(!Array.isArray(ge))return ye.error("seqof/setof, but data is not Array");var ke=this.clone();ke._baseState.implicit=null,Ne=this._createEncoderBuffer(ge.map(function(ze){var Xe=this._baseState;return this._getUse(Xe.args[0],ge)._encode(ze,ye)},ke))}else Te.use!==null?je=this._getUse(Te.use,Se)._encode(ge,ye):(Ne=this._encodePrimitive(Te.tag,ge),$e=!0);var je;if(!Te.any&&Te.choice===null){var Ke=Te.implicit!==null?Te.implicit:Te.tag,Ye=Te.implicit===null?"universal":"context";Ke===null?Te.use===null&&ye.error("Tag could be omitted only for .use()"):Te.use===null&&(je=this._encodeComposite(Ke,$e,Ye,Ne))}return Te.explicit!==null&&(je=this._encodeComposite(Te.explicit,!1,"context",je)),je},pe.prototype._encodeChoice=function(ge,ye){var Se=this._baseState,Te=Se.choice[ge.type];return Te||oe(!1,ge.type+" not found in "+JSON.stringify(Object.keys(Se.choice))),Te._encode(ge.value,ye)},pe.prototype._encodePrimitive=function(ge,ye){var Se=this._baseState;if(/str$/.test(ge))return this._encodeStr(ye,ge);if(ge==="objid"&&Se.args)return this._encodeObjid(ye,Se.reverseArgs[0],Se.args[1]);if(ge==="objid")return this._encodeObjid(ye,null,null);if(ge==="gentime"||ge==="utctime")return this._encodeTime(ye,ge);if(ge==="null_")return this._encodeNull();if(ge==="int"||ge==="enum")return this._encodeInt(ye,Se.args&&Se.reverseArgs[0]);if(ge==="bool")return this._encodeBool(ye);if(ge==="objDesc")return this._encodeStr(ye,ge);throw new Error("Unsupported tag: "+ge)},pe.prototype._isNumstr=function(ge){return/^[0-9 ]*$/.test(ge)},pe.prototype._isPrintstr=function(ge){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(ge)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(K){var J=K;J.Reporter=requireReporter().Reporter,J.DecoderBuffer=requireBuffer().DecoderBuffer,J.EncoderBuffer=requireBuffer().EncoderBuffer,J.Node=requireNode()}(base)),base}var constants={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(K){var J=requireConstants();K.tagClass={0:"universal",1:"application",2:"context",3:"private"},K.tagClassByName=J._reverse(K.tagClass),K.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},K.tagByName=J._reverse(K.tag)}(der)),der}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(K){var J=K;J._reverse=function(oe){var ce={};return Object.keys(oe).forEach(function(ue){(ue|0)==ue&&(ue=ue|0);var Ae=oe[ue];ce[Ae]=ue}),ce},J.der=requireDer$2()}(constants)),constants}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var K=requireInherits_browser(),J=requireAsn1$1(),ne=J.base,oe=J.bignum,ce=J.constants.der;function ue(me){this.enc="der",this.name=me.name,this.entity=me,this.tree=new Ae,this.tree._init(me.body)}der_1$1=ue,ue.prototype.decode=function(ge,ye){return ge instanceof ne.DecoderBuffer||(ge=new ne.DecoderBuffer(ge,ye)),this.tree._decode(ge,ye)};function Ae(me){ne.Node.call(this,"der",me)}K(Ae,ne.Node),Ae.prototype._peekTag=function(ge,ye,Se){if(ge.isEmpty())return!1;var Te=ge.save(),Ne=pe(ge,'Failed to peek tag: "'+ye+'"');return ge.isError(Ne)?Ne:(ge.restore(Te),Ne.tag===ye||Ne.tagStr===ye||Ne.tagStr+"of"===ye||Se)},Ae.prototype._decodeTag=function(ge,ye,Se){var Te=pe(ge,'Failed to decode tag of "'+ye+'"');if(ge.isError(Te))return Te;var Ne=xe(ge,Te.primitive,'Failed to get length of "'+ye+'"');if(ge.isError(Ne))return Ne;if(!Se&&Te.tag!==ye&&Te.tagStr!==ye&&Te.tagStr+"of"!==ye)return ge.error('Failed to match tag: "'+ye+'"');if(Te.primitive||Ne!==null)return ge.skip(Ne,'Failed to match body of: "'+ye+'"');var $e=ge.save(),ke=this._skipUntilEnd(ge,'Failed to skip indefinite length body: "'+this.tag+'"');return ge.isError(ke)?ke:(Ne=ge.offset-$e.offset,ge.restore($e),ge.skip(Ne,'Failed to match body of: "'+ye+'"'))},Ae.prototype._skipUntilEnd=function(ge,ye){for(;;){var Se=pe(ge,ye);if(ge.isError(Se))return Se;var Te=xe(ge,Se.primitive,ye);if(ge.isError(Te))return Te;var Ne;if(Se.primitive||Te!==null?Ne=ge.skip(Te):Ne=this._skipUntilEnd(ge,ye),ge.isError(Ne))return Ne;if(Se.tagStr==="end")break}},Ae.prototype._decodeList=function(ge,ye,Se,Te){for(var Ne=[];!ge.isEmpty();){var $e=this._peekTag(ge,"end");if(ge.isError($e))return $e;var ke=Se.decode(ge,"der",Te);if(ge.isError(ke)&&$e)break;Ne.push(ke)}return Ne},Ae.prototype._decodeStr=function(ge,ye){if(ye==="bitstr"){var Se=ge.readUInt8();return ge.isError(Se)?Se:{unused:Se,data:ge.raw()}}else if(ye==="bmpstr"){var Te=ge.raw();if(Te.length%2===1)return ge.error("Decoding of string type: bmpstr length mismatch");for(var Ne="",$e=0;$e<Te.length/2;$e++)Ne+=String.fromCharCode(Te.readUInt16BE($e*2));return Ne}else if(ye==="numstr"){var ke=ge.raw().toString("ascii");return this._isNumstr(ke)?ke:ge.error("Decoding of string type: numstr unsupported characters")}else{if(ye==="octstr")return ge.raw();if(ye==="objDesc")return ge.raw();if(ye==="printstr"){var je=ge.raw().toString("ascii");return this._isPrintstr(je)?je:ge.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(ye)?ge.raw().toString():ge.error("Decoding of string type: "+ye+" unsupported")}},Ae.prototype._decodeObjid=function(ge,ye,Se){for(var Te,Ne=[],$e=0;!ge.isEmpty();){var ke=ge.readUInt8();$e<<=7,$e|=ke&127,ke&128||(Ne.push($e),$e=0)}ke&128&&Ne.push($e);var je=Ne[0]/40|0,Ke=Ne[0]%40;if(Se?Te=Ne:Te=[je,Ke].concat(Ne.slice(1)),ye){var Ye=ye[Te.join(" ")];Ye===void 0&&(Ye=ye[Te.join(".")]),Ye!==void 0&&(Te=Ye)}return Te},Ae.prototype._decodeTime=function(ge,ye){var Se=ge.raw().toString();if(ye==="gentime")var Te=Se.slice(0,4)|0,Ne=Se.slice(4,6)|0,$e=Se.slice(6,8)|0,ke=Se.slice(8,10)|0,je=Se.slice(10,12)|0,Ke=Se.slice(12,14)|0;else if(ye==="utctime"){var Te=Se.slice(0,2)|0,Ne=Se.slice(2,4)|0,$e=Se.slice(4,6)|0,ke=Se.slice(6,8)|0,je=Se.slice(8,10)|0,Ke=Se.slice(10,12)|0;Te<70?Te=2e3+Te:Te=1900+Te}else return ge.error("Decoding "+ye+" time is not supported yet");return Date.UTC(Te,Ne-1,$e,ke,je,Ke,0)},Ae.prototype._decodeNull=function(ge){return null},Ae.prototype._decodeBool=function(ge){var ye=ge.readUInt8();return ge.isError(ye)?ye:ye!==0},Ae.prototype._decodeInt=function(ge,ye){var Se=ge.raw(),Te=new oe(Se);return ye&&(Te=ye[Te.toString(10)]||Te),Te},Ae.prototype._use=function(ge,ye){return typeof ge=="function"&&(ge=ge(ye)),ge._getDecoder("der").tree};function pe(me,ge){var ye=me.readUInt8(ge);if(me.isError(ye))return ye;var Se=ce.tagClass[ye>>6],Te=(ye&32)===0;if((ye&31)===31){var Ne=ye;for(ye=0;(Ne&128)===128;){if(Ne=me.readUInt8(ge),me.isError(Ne))return Ne;ye<<=7,ye|=Ne&127}}else ye&=31;var $e=ce.tag[ye];return{cls:Se,primitive:Te,tag:ye,tagStr:$e}}function xe(me,ge,ye){var Se=me.readUInt8(ye);if(me.isError(Se))return Se;if(!ge&&Se===128)return null;if(!(Se&128))return Se;var Te=Se&127;if(Te>4)return me.error("length octect is too long");Se=0;for(var Ne=0;Ne<Te;Ne++){Se<<=8;var $e=me.readUInt8(ye);if(me.isError($e))return $e;Se|=$e}return Se}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var K=requireInherits_browser(),J=require$$0$1.Buffer,ne=requireDer$1();function oe(ce){ne.call(this,ce),this.enc="pem"}return K(oe,ne),pem$1=oe,oe.prototype.decode=function(ue,Ae){for(var pe=ue.toString().split(/[\r\n]+/g),xe=Ae.label.toUpperCase(),me=/^-----(BEGIN|END) ([^-]+)-----$/,ge=-1,ye=-1,Se=0;Se<pe.length;Se++){var Te=pe[Se].match(me);if(Te!==null&&Te[2]===xe)if(ge===-1){if(Te[1]!=="BEGIN")break;ge=Se}else{if(Te[1]!=="END")break;ye=Se;break}}if(ge===-1||ye===-1)throw new Error("PEM section not found for: "+xe);var Ne=pe.slice(ge+1,ye).join("");Ne.replace(/[^a-z0-9\+\/=]+/gi,"");var $e=new J(Ne,"base64");return ne.prototype.decode.call(this,$e,Ae)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(K){var J=K;J.der=requireDer$1(),J.pem=requirePem$1()}(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var K=requireInherits_browser(),J=require$$0$1.Buffer,ne=requireAsn1$1(),oe=ne.base,ce=ne.constants.der;function ue(me){this.enc="der",this.name=me.name,this.entity=me,this.tree=new Ae,this.tree._init(me.body)}der_1=ue,ue.prototype.encode=function(ge,ye){return this.tree._encode(ge,ye).join()};function Ae(me){oe.Node.call(this,"der",me)}K(Ae,oe.Node),Ae.prototype._encodeComposite=function(ge,ye,Se,Te){var Ne=xe(ge,ye,Se,this.reporter);if(Te.length<128){var je=new J(2);return je[0]=Ne,je[1]=Te.length,this._createEncoderBuffer([je,Te])}for(var $e=1,ke=Te.length;ke>=256;ke>>=8)$e++;var je=new J(2+$e);je[0]=Ne,je[1]=128|$e;for(var ke=1+$e,Ke=Te.length;Ke>0;ke--,Ke>>=8)je[ke]=Ke&255;return this._createEncoderBuffer([je,Te])},Ae.prototype._encodeStr=function(ge,ye){if(ye==="bitstr")return this._createEncoderBuffer([ge.unused|0,ge.data]);if(ye==="bmpstr"){for(var Se=new J(ge.length*2),Te=0;Te<ge.length;Te++)Se.writeUInt16BE(ge.charCodeAt(Te),Te*2);return this._createEncoderBuffer(Se)}else return ye==="numstr"?this._isNumstr(ge)?this._createEncoderBuffer(ge):this.reporter.error("Encoding of string type: numstr supports only digits and space"):ye==="printstr"?this._isPrintstr(ge)?this._createEncoderBuffer(ge):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(ye)?this._createEncoderBuffer(ge):ye==="objDesc"?this._createEncoderBuffer(ge):this.reporter.error("Encoding of string type: "+ye+" unsupported")},Ae.prototype._encodeObjid=function(ge,ye,Se){if(typeof ge=="string"){if(!ye)return this.reporter.error("string objid given, but no values map found");if(!ye.hasOwnProperty(ge))return this.reporter.error("objid not found in values map");ge=ye[ge].split(/[\s\.]+/g);for(var Te=0;Te<ge.length;Te++)ge[Te]|=0}else if(Array.isArray(ge)){ge=ge.slice();for(var Te=0;Te<ge.length;Te++)ge[Te]|=0}if(!Array.isArray(ge))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(ge));if(!Se){if(ge[1]>=40)return this.reporter.error("Second objid identifier OOB");ge.splice(0,2,ge[0]*40+ge[1])}for(var Ne=0,Te=0;Te<ge.length;Te++){var $e=ge[Te];for(Ne++;$e>=128;$e>>=7)Ne++}for(var ke=new J(Ne),je=ke.length-1,Te=ge.length-1;Te>=0;Te--){var $e=ge[Te];for(ke[je--]=$e&127;($e>>=7)>0;)ke[je--]=128|$e&127}return this._createEncoderBuffer(ke)};function pe(me){return me<10?"0"+me:me}Ae.prototype._encodeTime=function(ge,ye){var Se,Te=new Date(ge);return ye==="gentime"?Se=[pe(Te.getFullYear()),pe(Te.getUTCMonth()+1),pe(Te.getUTCDate()),pe(Te.getUTCHours()),pe(Te.getUTCMinutes()),pe(Te.getUTCSeconds()),"Z"].join(""):ye==="utctime"?Se=[pe(Te.getFullYear()%100),pe(Te.getUTCMonth()+1),pe(Te.getUTCDate()),pe(Te.getUTCHours()),pe(Te.getUTCMinutes()),pe(Te.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+ye+" time is not supported yet"),this._encodeStr(Se,"octstr")},Ae.prototype._encodeNull=function(){return this._createEncoderBuffer("")},Ae.prototype._encodeInt=function(ge,ye){if(typeof ge=="string"){if(!ye)return this.reporter.error("String int or enum given, but no values map");if(!ye.hasOwnProperty(ge))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(ge));ge=ye[ge]}if(typeof ge!="number"&&!J.isBuffer(ge)){var Se=ge.toArray();!ge.sign&&Se[0]&128&&Se.unshift(0),ge=new J(Se)}if(J.isBuffer(ge)){var Te=ge.length;ge.length===0&&Te++;var $e=new J(Te);return ge.copy($e),ge.length===0&&($e[0]=0),this._createEncoderBuffer($e)}if(ge<128)return this._createEncoderBuffer(ge);if(ge<256)return this._createEncoderBuffer([0,ge]);for(var Te=1,Ne=ge;Ne>=256;Ne>>=8)Te++;for(var $e=new Array(Te),Ne=$e.length-1;Ne>=0;Ne--)$e[Ne]=ge&255,ge>>=8;return $e[0]&128&&$e.unshift(0),this._createEncoderBuffer(new J($e))},Ae.prototype._encodeBool=function(ge){return this._createEncoderBuffer(ge?255:0)},Ae.prototype._use=function(ge,ye){return typeof ge=="function"&&(ge=ge(ye)),ge._getEncoder("der").tree},Ae.prototype._skipDefault=function(ge,ye,Se){var Te=this._baseState,Ne;if(Te.default===null)return!1;var $e=ge.join();if(Te.defaultBuffer===void 0&&(Te.defaultBuffer=this._encodeValue(Te.default,ye,Se).join()),$e.length!==Te.defaultBuffer.length)return!1;for(Ne=0;Ne<$e.length;Ne++)if($e[Ne]!==Te.defaultBuffer[Ne])return!1;return!0};function xe(me,ge,ye,Se){var Te;if(me==="seqof"?me="seq":me==="setof"&&(me="set"),ce.tagByName.hasOwnProperty(me))Te=ce.tagByName[me];else if(typeof me=="number"&&(me|0)===me)Te=me;else return Se.error("Unknown tag: "+me);return Te>=31?Se.error("Multi-octet tag encoding unsupported"):(ge||(Te|=32),Te|=ce.tagClassByName[ye||"universal"]<<6,Te)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var K=requireInherits_browser(),J=requireDer();function ne(oe){J.call(this,oe),this.enc="pem"}return K(ne,J),pem=ne,ne.prototype.encode=function(ce,ue){for(var Ae=J.prototype.encode.call(this,ce),pe=Ae.toString("base64"),xe=["-----BEGIN "+ue.label+"-----"],me=0;me<pe.length;me+=64)xe.push(pe.slice(me,me+64));return xe.push("-----END "+ue.label+"-----"),xe.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(K){var J=K;J.der=requireDer(),J.pem=requirePem()}(encoders)),encoders}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(K){var J=K;J.bignum=requireBn$2(),J.define=requireApi().define,J.base=requireBase(),J.constants=requireConstants(),J.decoders=requireDecoders(),J.encoders=requireEncoders()}(asn1$8)),asn1$8}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var K=requireAsn1$1(),J=K.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),ne=K.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),oe=K.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),ce=K.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(oe),this.key("subjectPublicKey").bitstr())}),ue=K.define("RelativeDistinguishedName",function(){this.setof(ne)}),Ae=K.define("RDNSequence",function(){this.seqof(ue)}),pe=K.define("Name",function(){this.choice({rdnSequence:this.use(Ae)})}),xe=K.define("Validity",function(){this.seq().obj(this.key("notBefore").use(J),this.key("notAfter").use(J))}),me=K.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),ge=K.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(oe),this.key("issuer").use(pe),this.key("validity").use(xe),this.key("subject").use(pe),this.key("subjectPublicKeyInfo").use(ce),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(me).optional())}),ye=K.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(ge),this.key("signatureAlgorithm").use(oe),this.key("signatureValue").bitstr())});return certificate=ye,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$9;hasRequiredAsn1=1;var K=requireAsn1$1();asn1$9.certificate=requireCertificate();var J=K.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$9.RSAPrivateKey=J;var ne=K.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$9.RSAPublicKey=ne;var oe=K.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),ce=K.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(oe),this.key("subjectPublicKey").bitstr())});asn1$9.PublicKey=ce;var ue=K.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(oe),this.key("subjectPrivateKey").octstr())});asn1$9.PrivateKey=ue;var Ae=K.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$9.EncryptedPrivateKey=Ae;var pe=K.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$9.DSAPrivateKey=pe,asn1$9.DSAparam=K.define("DSAparam",function(){this.int()});var xe=K.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),me=K.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(xe),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$9.ECPrivateKey=me,asn1$9.signature=K.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$9}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var K=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,J=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,ne=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,oe=requireEvp_bytestokey(),ce=requireBrowser$6(),ue=requireSafeBuffer$1().Buffer;return fixProc=function(Ae,pe){var xe=Ae.toString(),me=xe.match(K),ge;if(me){var Se="aes"+me[1],Te=ue.from(me[2],"hex"),Ne=ue.from(me[3].replace(/[\r\n]/g,""),"base64"),$e=oe(pe,Te.slice(0,8),parseInt(me[1],10)).key,ke=[],je=ce.createDecipheriv(Se,$e,Te);ke.push(je.update(Ne)),ke.push(je.final()),ge=ue.concat(ke)}else{var ye=xe.match(ne);ge=ue.from(ye[2].replace(/[\r\n]/g,""),"base64")}var Ke=xe.match(J)[1];return{tag:Ke,data:ge}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var K=requireAsn1(),J=require$$1,ne=requireFixProc(),oe=requireBrowser$6(),ce=requireBrowser$7(),ue=requireSafeBuffer$1().Buffer;function Ae(xe,me){var ge=xe.algorithm.decrypt.kde.kdeparams.salt,ye=parseInt(xe.algorithm.decrypt.kde.kdeparams.iters.toString(),10),Se=J[xe.algorithm.decrypt.cipher.algo.join(".")],Te=xe.algorithm.decrypt.cipher.iv,Ne=xe.subjectPrivateKey,$e=parseInt(Se.split("-")[1],10)/8,ke=ce.pbkdf2Sync(me,ge,ye,$e,"sha1"),je=oe.createDecipheriv(Se,ke,Te),Ke=[];return Ke.push(je.update(Ne)),Ke.push(je.final()),ue.concat(Ke)}function pe(xe){var me;typeof xe=="object"&&!ue.isBuffer(xe)&&(me=xe.passphrase,xe=xe.key),typeof xe=="string"&&(xe=ue.from(xe));var ge=ne(xe,me),ye=ge.tag,Se=ge.data,Te,Ne;switch(ye){case"CERTIFICATE":Ne=K.certificate.decode(Se,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(Ne||(Ne=K.PublicKey.decode(Se,"der")),Te=Ne.algorithm.algorithm.join("."),Te){case"1.2.840.113549.1.1.1":return K.RSAPublicKey.decode(Ne.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return Ne.subjectPrivateKey=Ne.subjectPublicKey,{type:"ec",data:Ne};case"1.2.840.10040.4.1":return Ne.algorithm.params.pub_key=K.DSAparam.decode(Ne.subjectPublicKey.data,"der"),{type:"dsa",data:Ne.algorithm.params};default:throw new Error("unknown key id "+Te)}case"ENCRYPTED PRIVATE KEY":Se=K.EncryptedPrivateKey.decode(Se,"der"),Se=Ae(Se,me);case"PRIVATE KEY":switch(Ne=K.PrivateKey.decode(Se,"der"),Te=Ne.algorithm.algorithm.join("."),Te){case"1.2.840.113549.1.1.1":return K.RSAPrivateKey.decode(Ne.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:Ne.algorithm.curve,privateKey:K.ECPrivateKey.decode(Ne.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return Ne.algorithm.params.priv_key=K.DSAparam.decode(Ne.subjectPrivateKey,"der"),{type:"dsa",params:Ne.algorithm.params};default:throw new Error("unknown key id "+Te)}case"RSA PUBLIC KEY":return K.RSAPublicKey.decode(Se,"der");case"RSA PRIVATE KEY":return K.RSAPrivateKey.decode(Se,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:K.DSAPrivateKey.decode(Se,"der")};case"EC PRIVATE KEY":return Se=K.ECPrivateKey.decode(Se,"der"),{curve:Se.parameters.value,privateKey:Se.privateKey};default:throw new Error("unknown key type "+ye)}}return pe.signature=K.signature,parseAsn1=pe,parseAsn1}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign.exports;hasRequiredSign=1;var K=requireSafeBuffer$1().Buffer,J=requireBrowser$8(),ne=requireBrowserifyRsa(),oe=requireElliptic().ec,ce=requireBn$4(),ue=requireParseAsn1(),Ae=require$$4,pe=1;function xe(je,Ke,Ye,ze,Xe){var Je=ue(Ke);if(Je.curve){if(ze!=="ecdsa"&&ze!=="ecdsa/rsa")throw new Error("wrong private key type");return me(je,Je)}else if(Je.type==="dsa"){if(ze!=="dsa")throw new Error("wrong private key type");return ge(je,Je,Ye)}if(ze!=="rsa"&&ze!=="ecdsa/rsa")throw new Error("wrong private key type");if(Ke.padding!==void 0&&Ke.padding!==pe)throw new Error("illegal or unsupported padding mode");je=K.concat([Xe,je]);for(var rt=Je.modulus.byteLength(),Ze=[0,1];je.length+Ze.length+1<rt;)Ze.push(255);Ze.push(0);for(var et=-1;++et<je.length;)Ze.push(je[et]);var nt=ne(Ze,Je);return nt}function me(je,Ke){var Ye=Ae[Ke.curve.join(".")];if(!Ye)throw new Error("unknown curve "+Ke.curve.join("."));var ze=new oe(Ye),Xe=ze.keyFromPrivate(Ke.privateKey),Je=Xe.sign(je);return K.from(Je.toDER())}function ge(je,Ke,Ye){for(var ze=Ke.params.priv_key,Xe=Ke.params.p,Je=Ke.params.q,rt=Ke.params.g,Ze=new ce(0),et,nt=Te(je,Je).mod(Je),Ge=!1,ve=Se(ze,Je,je,Ye);Ge===!1;)et=$e(Je,ve,Ye),Ze=ke(rt,et,Xe,Je),Ge=et.invm(Je).imul(nt.add(ze.mul(Ze))).mod(Je),Ge.cmpn(0)===0&&(Ge=!1,Ze=new ce(0));return ye(Ze,Ge)}function ye(je,Ke){je=je.toArray(),Ke=Ke.toArray(),je[0]&128&&(je=[0].concat(je)),Ke[0]&128&&(Ke=[0].concat(Ke));var Ye=je.length+Ke.length+4,ze=[48,Ye,2,je.length];return ze=ze.concat(je,[2,Ke.length],Ke),K.from(ze)}function Se(je,Ke,Ye,ze){if(je=K.from(je.toArray()),je.length<Ke.byteLength()){var Xe=K.alloc(Ke.byteLength()-je.length);je=K.concat([Xe,je])}var Je=Ye.length,rt=Ne(Ye,Ke),Ze=K.alloc(Je);Ze.fill(1);var et=K.alloc(Je);return et=J(ze,et).update(Ze).update(K.from([0])).update(je).update(rt).digest(),Ze=J(ze,et).update(Ze).digest(),et=J(ze,et).update(Ze).update(K.from([1])).update(je).update(rt).digest(),Ze=J(ze,et).update(Ze).digest(),{k:et,v:Ze}}function Te(je,Ke){var Ye=new ce(je),ze=(je.length<<3)-Ke.bitLength();return ze>0&&Ye.ishrn(ze),Ye}function Ne(je,Ke){je=Te(je,Ke),je=je.mod(Ke);var Ye=K.from(je.toArray());if(Ye.length<Ke.byteLength()){var ze=K.alloc(Ke.byteLength()-Ye.length);Ye=K.concat([ze,Ye])}return Ye}function $e(je,Ke,Ye){var ze,Xe;do{for(ze=K.alloc(0);ze.length*8<je.bitLength();)Ke.v=J(Ye,Ke.k).update(Ke.v).digest(),ze=K.concat([ze,Ke.v]);Xe=Te(ze,je),Ke.k=J(Ye,Ke.k).update(Ke.v).update(K.from([0])).digest(),Ke.v=J(Ye,Ke.k).update(Ke.v).digest()}while(Xe.cmp(je)!==-1);return Xe}function ke(je,Ke,Ye,ze){return je.toRed(ce.mont(Ye)).redPow(Ke).fromRed().mod(ze)}return sign.exports=xe,sign.exports.getKey=Se,sign.exports.makeKey=$e,sign.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var K=requireSafeBuffer$1().Buffer,J=requireBn$4(),ne=requireElliptic().ec,oe=requireParseAsn1(),ce=require$$4;function ue(me,ge,ye,Se,Te){var Ne=oe(ye);if(Ne.type==="ec"){if(Se!=="ecdsa"&&Se!=="ecdsa/rsa")throw new Error("wrong public key type");return Ae(me,ge,Ne)}else if(Ne.type==="dsa"){if(Se!=="dsa")throw new Error("wrong public key type");return pe(me,ge,Ne)}if(Se!=="rsa"&&Se!=="ecdsa/rsa")throw new Error("wrong public key type");ge=K.concat([Te,ge]);for(var $e=Ne.modulus.byteLength(),ke=[1],je=0;ge.length+ke.length+2<$e;)ke.push(255),je+=1;ke.push(0);for(var Ke=-1;++Ke<ge.length;)ke.push(ge[Ke]);ke=K.from(ke);var Ye=J.mont(Ne.modulus);me=new J(me).toRed(Ye),me=me.redPow(new J(Ne.publicExponent)),me=K.from(me.fromRed().toArray());var ze=je<8?1:0;for($e=Math.min(me.length,ke.length),me.length!==ke.length&&(ze=1),Ke=-1;++Ke<$e;)ze|=me[Ke]^ke[Ke];return ze===0}function Ae(me,ge,ye){var Se=ce[ye.data.algorithm.curve.join(".")];if(!Se)throw new Error("unknown curve "+ye.data.algorithm.curve.join("."));var Te=new ne(Se),Ne=ye.data.subjectPrivateKey.data;return Te.verify(ge,me,Ne)}function pe(me,ge,ye){var Se=ye.data.p,Te=ye.data.q,Ne=ye.data.g,$e=ye.data.pub_key,ke=oe.signature.decode(me,"der"),je=ke.s,Ke=ke.r;xe(je,Te),xe(Ke,Te);var Ye=J.mont(Se),ze=je.invm(Te),Xe=Ne.toRed(Ye).redPow(new J(ge).mul(ze).mod(Te)).fromRed().mul($e.toRed(Ye).redPow(Ke.mul(ze).mod(Te)).fromRed()).mod(Se).mod(Te);return Xe.cmp(Ke)===0}function xe(me,ge){if(me.cmpn(0)<=0)throw new Error("invalid sig");if(me.cmp(ge)>=0)throw new Error("invalid sig")}return verify_1=ue,verify_1}var browser$3,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$3;hasRequiredBrowser$3=1;var K=requireSafeBuffer$1().Buffer,J=requireBrowser$9(),ne=requireReadableBrowser(),oe=requireInherits_browser(),ce=requireSign(),ue=requireVerify(),Ae=require$$6;Object.keys(Ae).forEach(function(ye){Ae[ye].id=K.from(Ae[ye].id,"hex"),Ae[ye.toLowerCase()]=Ae[ye]});function pe(ye){ne.Writable.call(this);var Se=Ae[ye];if(!Se)throw new Error("Unknown message digest");this._hashType=Se.hash,this._hash=J(Se.hash),this._tag=Se.id,this._signType=Se.sign}oe(pe,ne.Writable),pe.prototype._write=function(Se,Te,Ne){this._hash.update(Se),Ne()},pe.prototype.update=function(Se,Te){return this._hash.update(typeof Se=="string"?K.from(Se,Te):Se),this},pe.prototype.sign=function(Se,Te){this.end();var Ne=this._hash.digest(),$e=ce(Ne,Se,this._hashType,this._signType,this._tag);return Te?$e.toString(Te):$e};function xe(ye){ne.Writable.call(this);var Se=Ae[ye];if(!Se)throw new Error("Unknown message digest");this._hash=J(Se.hash),this._tag=Se.id,this._signType=Se.sign}oe(xe,ne.Writable),xe.prototype._write=function(Se,Te,Ne){this._hash.update(Se),Ne()},xe.prototype.update=function(Se,Te){return this._hash.update(typeof Se=="string"?K.from(Se,Te):Se),this},xe.prototype.verify=function(Se,Te,Ne){var $e=typeof Te=="string"?K.from(Te,Ne):Te;this.end();var ke=this._hash.digest();return ue($e,ke,Se,this._signType,this._tag)};function me(ye){return new pe(ye)}function ge(ye){return new xe(ye)}return browser$3={Sign:me,Verify:ge,createSign:me,createVerify:ge},browser$3}var bn$1={exports:{}};bn$1.exports;var hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(K){(function(J,ne){function oe(Ge,ve){if(!Ge)throw new Error(ve||"Assertion failed")}function ce(Ge,ve){Ge.super_=ve;var Be=function(){};Be.prototype=ve.prototype,Ge.prototype=new Be,Ge.prototype.constructor=Ge}function ue(Ge,ve,Be){if(ue.isBN(Ge))return Ge;this.negative=0,this.words=null,this.length=0,this.red=null,Ge!==null&&((ve==="le"||ve==="be")&&(Be=ve,ve=10),this._init(Ge||0,ve||10,Be||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(ve){return ve instanceof ue?!0:ve!==null&&typeof ve=="object"&&ve.constructor.wordSize===ue.wordSize&&Array.isArray(ve.words)},ue.max=function(ve,Be){return ve.cmp(Be)>0?ve:Be},ue.min=function(ve,Be){return ve.cmp(Be)<0?ve:Be},ue.prototype._init=function(ve,Be,Re){if(typeof ve=="number")return this._initNumber(ve,Be,Re);if(typeof ve=="object")return this._initArray(ve,Be,Re);Be==="hex"&&(Be=16),oe(Be===(Be|0)&&Be>=2&&Be<=36),ve=ve.toString().replace(/\s+/g,"");var Ie=0;ve[0]==="-"&&(Ie++,this.negative=1),Ie<ve.length&&(Be===16?this._parseHex(ve,Ie,Re):(this._parseBase(ve,Be,Ie),Re==="le"&&this._initArray(this.toArray(),Be,Re)))},ue.prototype._initNumber=function(ve,Be,Re){ve<0&&(this.negative=1,ve=-ve),ve<67108864?(this.words=[ve&67108863],this.length=1):ve<4503599627370496?(this.words=[ve&67108863,ve/67108864&67108863],this.length=2):(oe(ve<9007199254740992),this.words=[ve&67108863,ve/67108864&67108863,1],this.length=3),Re==="le"&&this._initArray(this.toArray(),Be,Re)},ue.prototype._initArray=function(ve,Be,Re){if(oe(typeof ve.length=="number"),ve.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ve.length/3),this.words=new Array(this.length);for(var Ie=0;Ie<this.length;Ie++)this.words[Ie]=0;var Fe,qe,We=0;if(Re==="be")for(Ie=ve.length-1,Fe=0;Ie>=0;Ie-=3)qe=ve[Ie]|ve[Ie-1]<<8|ve[Ie-2]<<16,this.words[Fe]|=qe<<We&67108863,this.words[Fe+1]=qe>>>26-We&67108863,We+=24,We>=26&&(We-=26,Fe++);else if(Re==="le")for(Ie=0,Fe=0;Ie<ve.length;Ie+=3)qe=ve[Ie]|ve[Ie+1]<<8|ve[Ie+2]<<16,this.words[Fe]|=qe<<We&67108863,this.words[Fe+1]=qe>>>26-We&67108863,We+=24,We>=26&&(We-=26,Fe++);return this.strip()};function pe(Ge,ve){var Be=Ge.charCodeAt(ve);return Be>=65&&Be<=70?Be-55:Be>=97&&Be<=102?Be-87:Be-48&15}function xe(Ge,ve,Be){var Re=pe(Ge,Be);return Be-1>=ve&&(Re|=pe(Ge,Be-1)<<4),Re}ue.prototype._parseHex=function(ve,Be,Re){this.length=Math.ceil((ve.length-Be)/6),this.words=new Array(this.length);for(var Ie=0;Ie<this.length;Ie++)this.words[Ie]=0;var Fe=0,qe=0,We;if(Re==="be")for(Ie=ve.length-1;Ie>=Be;Ie-=2)We=xe(ve,Be,Ie)<<Fe,this.words[qe]|=We&67108863,Fe>=18?(Fe-=18,qe+=1,this.words[qe]|=We>>>26):Fe+=8;else{var Ue=ve.length-Be;for(Ie=Ue%2===0?Be+1:Be;Ie<ve.length;Ie+=2)We=xe(ve,Be,Ie)<<Fe,this.words[qe]|=We&67108863,Fe>=18?(Fe-=18,qe+=1,this.words[qe]|=We>>>26):Fe+=8}this.strip()};function me(Ge,ve,Be,Re){for(var Ie=0,Fe=Math.min(Ge.length,Be),qe=ve;qe<Fe;qe++){var We=Ge.charCodeAt(qe)-48;Ie*=Re,We>=49?Ie+=We-49+10:We>=17?Ie+=We-17+10:Ie+=We}return Ie}ue.prototype._parseBase=function(ve,Be,Re){this.words=[0],this.length=1;for(var Ie=0,Fe=1;Fe<=67108863;Fe*=Be)Ie++;Ie--,Fe=Fe/Be|0;for(var qe=ve.length-Re,We=qe%Ie,Ue=Math.min(qe,qe-We)+Re,_e=0,Qe=Re;Qe<Ue;Qe+=Ie)_e=me(ve,Qe,Qe+Ie,Be),this.imuln(Fe),this.words[0]+_e<67108864?this.words[0]+=_e:this._iaddn(_e);if(We!==0){var tt=1;for(_e=me(ve,Qe,ve.length,Be),Qe=0;Qe<We;Qe++)tt*=Be;this.imuln(tt),this.words[0]+_e<67108864?this.words[0]+=_e:this._iaddn(_e)}this.strip()},ue.prototype.copy=function(ve){ve.words=new Array(this.length);for(var Be=0;Be<this.length;Be++)ve.words[Be]=this.words[Be];ve.length=this.length,ve.negative=this.negative,ve.red=this.red},ue.prototype.clone=function(){var ve=new ue(null);return this.copy(ve),ve},ue.prototype._expand=function(ve){for(;this.length<ve;)this.words[this.length++]=0;return this},ue.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},ue.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ge=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ye=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Se=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(ve,Be){ve=ve||10,Be=Be|0||1;var Re;if(ve===16||ve==="hex"){Re="";for(var Ie=0,Fe=0,qe=0;qe<this.length;qe++){var We=this.words[qe],Ue=((We<<Ie|Fe)&16777215).toString(16);Fe=We>>>24-Ie&16777215,Fe!==0||qe!==this.length-1?Re=ge[6-Ue.length]+Ue+Re:Re=Ue+Re,Ie+=2,Ie>=26&&(Ie-=26,qe--)}for(Fe!==0&&(Re=Fe.toString(16)+Re);Re.length%Be!==0;)Re="0"+Re;return this.negative!==0&&(Re="-"+Re),Re}if(ve===(ve|0)&&ve>=2&&ve<=36){var _e=ye[ve],Qe=Se[ve];Re="";var tt=this.clone();for(tt.negative=0;!tt.isZero();){var it=tt.modn(Qe).toString(ve);tt=tt.idivn(Qe),tt.isZero()?Re=it+Re:Re=ge[_e-it.length]+it+Re}for(this.isZero()&&(Re="0"+Re);Re.length%Be!==0;)Re="0"+Re;return this.negative!==0&&(Re="-"+Re),Re}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var ve=this.words[0];return this.length===2?ve+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ve+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ve:ve},ue.prototype.toJSON=function(){return this.toString(16)},ue.prototype.toBuffer=function(ve,Be){return oe(typeof Ae<"u"),this.toArrayLike(Ae,ve,Be)},ue.prototype.toArray=function(ve,Be){return this.toArrayLike(Array,ve,Be)},ue.prototype.toArrayLike=function(ve,Be,Re){var Ie=this.byteLength(),Fe=Re||Math.max(1,Ie);oe(Ie<=Fe,"byte array longer than desired length"),oe(Fe>0,"Requested array length <= 0"),this.strip();var qe=Be==="le",We=new ve(Fe),Ue,_e,Qe=this.clone();if(qe){for(_e=0;!Qe.isZero();_e++)Ue=Qe.andln(255),Qe.iushrn(8),We[_e]=Ue;for(;_e<Fe;_e++)We[_e]=0}else{for(_e=0;_e<Fe-Ie;_e++)We[_e]=0;for(_e=0;!Qe.isZero();_e++)Ue=Qe.andln(255),Qe.iushrn(8),We[Fe-_e-1]=Ue}return We},Math.clz32?ue.prototype._countBits=function(ve){return 32-Math.clz32(ve)}:ue.prototype._countBits=function(ve){var Be=ve,Re=0;return Be>=4096&&(Re+=13,Be>>>=13),Be>=64&&(Re+=7,Be>>>=7),Be>=8&&(Re+=4,Be>>>=4),Be>=2&&(Re+=2,Be>>>=2),Re+Be},ue.prototype._zeroBits=function(ve){if(ve===0)return 26;var Be=ve,Re=0;return Be&8191||(Re+=13,Be>>>=13),Be&127||(Re+=7,Be>>>=7),Be&15||(Re+=4,Be>>>=4),Be&3||(Re+=2,Be>>>=2),Be&1||Re++,Re},ue.prototype.bitLength=function(){var ve=this.words[this.length-1],Be=this._countBits(ve);return(this.length-1)*26+Be};function Te(Ge){for(var ve=new Array(Ge.bitLength()),Be=0;Be<ve.length;Be++){var Re=Be/26|0,Ie=Be%26;ve[Be]=(Ge.words[Re]&1<<Ie)>>>Ie}return ve}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ve=0,Be=0;Be<this.length;Be++){var Re=this._zeroBits(this.words[Be]);if(ve+=Re,Re!==26)break}return ve},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(ve){return this.negative!==0?this.abs().inotn(ve).iaddn(1):this.clone()},ue.prototype.fromTwos=function(ve){return this.testn(ve-1)?this.notn(ve).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(ve){for(;this.length<ve.length;)this.words[this.length++]=0;for(var Be=0;Be<ve.length;Be++)this.words[Be]=this.words[Be]|ve.words[Be];return this.strip()},ue.prototype.ior=function(ve){return oe((this.negative|ve.negative)===0),this.iuor(ve)},ue.prototype.or=function(ve){return this.length>ve.length?this.clone().ior(ve):ve.clone().ior(this)},ue.prototype.uor=function(ve){return this.length>ve.length?this.clone().iuor(ve):ve.clone().iuor(this)},ue.prototype.iuand=function(ve){var Be;this.length>ve.length?Be=ve:Be=this;for(var Re=0;Re<Be.length;Re++)this.words[Re]=this.words[Re]&ve.words[Re];return this.length=Be.length,this.strip()},ue.prototype.iand=function(ve){return oe((this.negative|ve.negative)===0),this.iuand(ve)},ue.prototype.and=function(ve){return this.length>ve.length?this.clone().iand(ve):ve.clone().iand(this)},ue.prototype.uand=function(ve){return this.length>ve.length?this.clone().iuand(ve):ve.clone().iuand(this)},ue.prototype.iuxor=function(ve){var Be,Re;this.length>ve.length?(Be=this,Re=ve):(Be=ve,Re=this);for(var Ie=0;Ie<Re.length;Ie++)this.words[Ie]=Be.words[Ie]^Re.words[Ie];if(this!==Be)for(;Ie<Be.length;Ie++)this.words[Ie]=Be.words[Ie];return this.length=Be.length,this.strip()},ue.prototype.ixor=function(ve){return oe((this.negative|ve.negative)===0),this.iuxor(ve)},ue.prototype.xor=function(ve){return this.length>ve.length?this.clone().ixor(ve):ve.clone().ixor(this)},ue.prototype.uxor=function(ve){return this.length>ve.length?this.clone().iuxor(ve):ve.clone().iuxor(this)},ue.prototype.inotn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=Math.ceil(ve/26)|0,Re=ve%26;this._expand(Be),Re>0&&Be--;for(var Ie=0;Ie<Be;Ie++)this.words[Ie]=~this.words[Ie]&67108863;return Re>0&&(this.words[Ie]=~this.words[Ie]&67108863>>26-Re),this.strip()},ue.prototype.notn=function(ve){return this.clone().inotn(ve)},ue.prototype.setn=function(ve,Be){oe(typeof ve=="number"&&ve>=0);var Re=ve/26|0,Ie=ve%26;return this._expand(Re+1),Be?this.words[Re]=this.words[Re]|1<<Ie:this.words[Re]=this.words[Re]&~(1<<Ie),this.strip()},ue.prototype.iadd=function(ve){var Be;if(this.negative!==0&&ve.negative===0)return this.negative=0,Be=this.isub(ve),this.negative^=1,this._normSign();if(this.negative===0&&ve.negative!==0)return ve.negative=0,Be=this.isub(ve),ve.negative=1,Be._normSign();var Re,Ie;this.length>ve.length?(Re=this,Ie=ve):(Re=ve,Ie=this);for(var Fe=0,qe=0;qe<Ie.length;qe++)Be=(Re.words[qe]|0)+(Ie.words[qe]|0)+Fe,this.words[qe]=Be&67108863,Fe=Be>>>26;for(;Fe!==0&&qe<Re.length;qe++)Be=(Re.words[qe]|0)+Fe,this.words[qe]=Be&67108863,Fe=Be>>>26;if(this.length=Re.length,Fe!==0)this.words[this.length]=Fe,this.length++;else if(Re!==this)for(;qe<Re.length;qe++)this.words[qe]=Re.words[qe];return this},ue.prototype.add=function(ve){var Be;return ve.negative!==0&&this.negative===0?(ve.negative=0,Be=this.sub(ve),ve.negative^=1,Be):ve.negative===0&&this.negative!==0?(this.negative=0,Be=ve.sub(this),this.negative=1,Be):this.length>ve.length?this.clone().iadd(ve):ve.clone().iadd(this)},ue.prototype.isub=function(ve){if(ve.negative!==0){ve.negative=0;var Be=this.iadd(ve);return ve.negative=1,Be._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ve),this.negative=1,this._normSign();var Re=this.cmp(ve);if(Re===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ie,Fe;Re>0?(Ie=this,Fe=ve):(Ie=ve,Fe=this);for(var qe=0,We=0;We<Fe.length;We++)Be=(Ie.words[We]|0)-(Fe.words[We]|0)+qe,qe=Be>>26,this.words[We]=Be&67108863;for(;qe!==0&&We<Ie.length;We++)Be=(Ie.words[We]|0)+qe,qe=Be>>26,this.words[We]=Be&67108863;if(qe===0&&We<Ie.length&&Ie!==this)for(;We<Ie.length;We++)this.words[We]=Ie.words[We];return this.length=Math.max(this.length,We),Ie!==this&&(this.negative=1),this.strip()},ue.prototype.sub=function(ve){return this.clone().isub(ve)};function Ne(Ge,ve,Be){Be.negative=ve.negative^Ge.negative;var Re=Ge.length+ve.length|0;Be.length=Re,Re=Re-1|0;var Ie=Ge.words[0]|0,Fe=ve.words[0]|0,qe=Ie*Fe,We=qe&67108863,Ue=qe/67108864|0;Be.words[0]=We;for(var _e=1;_e<Re;_e++){for(var Qe=Ue>>>26,tt=Ue&67108863,it=Math.min(_e,ve.length-1),at=Math.max(0,_e-Ge.length+1);at<=it;at++){var ot=_e-at|0;Ie=Ge.words[ot]|0,Fe=ve.words[at]|0,qe=Ie*Fe+tt,Qe+=qe/67108864|0,tt=qe&67108863}Be.words[_e]=tt|0,Ue=Qe|0}return Ue!==0?Be.words[_e]=Ue|0:Be.length--,Be.strip()}var $e=function(ve,Be,Re){var Ie=ve.words,Fe=Be.words,qe=Re.words,We=0,Ue,_e,Qe,tt=Ie[0]|0,it=tt&8191,at=tt>>>13,ot=Ie[1]|0,lt=ot&8191,st=ot>>>13,ut=Ie[2]|0,ft=ut&8191,dt=ut>>>13,Bt=Ie[3]|0,pt=Bt&8191,mt=Bt>>>13,bt=Ie[4]|0,xt=bt&8191,yt=bt>>>13,It=Ie[5]|0,ht=It&8191,gt=It>>>13,Pt=Ie[6]|0,wt=Pt&8191,St=Pt>>>13,Zt=Ie[7]|0,Ct=Zt&8191,Rt=Zt>>>13,dr=Ie[8]|0,Dt=dr&8191,Tt=dr>>>13,or=Ie[9]|0,Mt=or&8191,kt=or>>>13,ur=Fe[0]|0,$t=ur&8191,jt=ur>>>13,nr=Fe[1]|0,Ot=nr&8191,Lt=nr>>>13,lr=Fe[2]|0,Ht=lr&8191,qt=lr>>>13,tr=Fe[3]|0,Vt=tr&8191,Gt=tr>>>13,br=Fe[4]|0,Yt=br&8191,Kt=br>>>13,yr=Fe[5]|0,zt=yr&8191,Jt=yr>>>13,xr=Fe[6]|0,Xt=xr&8191,ir=xr>>>13,Mr=Fe[7]|0,er=Mr&8191,fr=Mr>>>13,Qr=Fe[8]|0,sr=Qr&8191,Ar=Qr>>>13,Kr=Fe[9]|0,ar=Kr&8191,hr=Kr>>>13;Re.negative=ve.negative^Be.negative,Re.length=19,Ue=Math.imul(it,$t),_e=Math.imul(it,jt),_e=_e+Math.imul(at,$t)|0,Qe=Math.imul(at,jt);var Lr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,Ue=Math.imul(lt,$t),_e=Math.imul(lt,jt),_e=_e+Math.imul(st,$t)|0,Qe=Math.imul(st,jt),Ue=Ue+Math.imul(it,Ot)|0,_e=_e+Math.imul(it,Lt)|0,_e=_e+Math.imul(at,Ot)|0,Qe=Qe+Math.imul(at,Lt)|0;var Pr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,Ue=Math.imul(ft,$t),_e=Math.imul(ft,jt),_e=_e+Math.imul(dt,$t)|0,Qe=Math.imul(dt,jt),Ue=Ue+Math.imul(lt,Ot)|0,_e=_e+Math.imul(lt,Lt)|0,_e=_e+Math.imul(st,Ot)|0,Qe=Qe+Math.imul(st,Lt)|0,Ue=Ue+Math.imul(it,Ht)|0,_e=_e+Math.imul(it,qt)|0,_e=_e+Math.imul(at,Ht)|0,Qe=Qe+Math.imul(at,qt)|0;var Yr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,Ue=Math.imul(pt,$t),_e=Math.imul(pt,jt),_e=_e+Math.imul(mt,$t)|0,Qe=Math.imul(mt,jt),Ue=Ue+Math.imul(ft,Ot)|0,_e=_e+Math.imul(ft,Lt)|0,_e=_e+Math.imul(dt,Ot)|0,Qe=Qe+Math.imul(dt,Lt)|0,Ue=Ue+Math.imul(lt,Ht)|0,_e=_e+Math.imul(lt,qt)|0,_e=_e+Math.imul(st,Ht)|0,Qe=Qe+Math.imul(st,qt)|0,Ue=Ue+Math.imul(it,Vt)|0,_e=_e+Math.imul(it,Gt)|0,_e=_e+Math.imul(at,Vt)|0,Qe=Qe+Math.imul(at,Gt)|0;var Wr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,Ue=Math.imul(xt,$t),_e=Math.imul(xt,jt),_e=_e+Math.imul(yt,$t)|0,Qe=Math.imul(yt,jt),Ue=Ue+Math.imul(pt,Ot)|0,_e=_e+Math.imul(pt,Lt)|0,_e=_e+Math.imul(mt,Ot)|0,Qe=Qe+Math.imul(mt,Lt)|0,Ue=Ue+Math.imul(ft,Ht)|0,_e=_e+Math.imul(ft,qt)|0,_e=_e+Math.imul(dt,Ht)|0,Qe=Qe+Math.imul(dt,qt)|0,Ue=Ue+Math.imul(lt,Vt)|0,_e=_e+Math.imul(lt,Gt)|0,_e=_e+Math.imul(st,Vt)|0,Qe=Qe+Math.imul(st,Gt)|0,Ue=Ue+Math.imul(it,Yt)|0,_e=_e+Math.imul(it,Kt)|0,_e=_e+Math.imul(at,Yt)|0,Qe=Qe+Math.imul(at,Kt)|0;var Zr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,Ue=Math.imul(ht,$t),_e=Math.imul(ht,jt),_e=_e+Math.imul(gt,$t)|0,Qe=Math.imul(gt,jt),Ue=Ue+Math.imul(xt,Ot)|0,_e=_e+Math.imul(xt,Lt)|0,_e=_e+Math.imul(yt,Ot)|0,Qe=Qe+Math.imul(yt,Lt)|0,Ue=Ue+Math.imul(pt,Ht)|0,_e=_e+Math.imul(pt,qt)|0,_e=_e+Math.imul(mt,Ht)|0,Qe=Qe+Math.imul(mt,qt)|0,Ue=Ue+Math.imul(ft,Vt)|0,_e=_e+Math.imul(ft,Gt)|0,_e=_e+Math.imul(dt,Vt)|0,Qe=Qe+Math.imul(dt,Gt)|0,Ue=Ue+Math.imul(lt,Yt)|0,_e=_e+Math.imul(lt,Kt)|0,_e=_e+Math.imul(st,Yt)|0,Qe=Qe+Math.imul(st,Kt)|0,Ue=Ue+Math.imul(it,zt)|0,_e=_e+Math.imul(it,Jt)|0,_e=_e+Math.imul(at,zt)|0,Qe=Qe+Math.imul(at,Jt)|0;var Jr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,Ue=Math.imul(wt,$t),_e=Math.imul(wt,jt),_e=_e+Math.imul(St,$t)|0,Qe=Math.imul(St,jt),Ue=Ue+Math.imul(ht,Ot)|0,_e=_e+Math.imul(ht,Lt)|0,_e=_e+Math.imul(gt,Ot)|0,Qe=Qe+Math.imul(gt,Lt)|0,Ue=Ue+Math.imul(xt,Ht)|0,_e=_e+Math.imul(xt,qt)|0,_e=_e+Math.imul(yt,Ht)|0,Qe=Qe+Math.imul(yt,qt)|0,Ue=Ue+Math.imul(pt,Vt)|0,_e=_e+Math.imul(pt,Gt)|0,_e=_e+Math.imul(mt,Vt)|0,Qe=Qe+Math.imul(mt,Gt)|0,Ue=Ue+Math.imul(ft,Yt)|0,_e=_e+Math.imul(ft,Kt)|0,_e=_e+Math.imul(dt,Yt)|0,Qe=Qe+Math.imul(dt,Kt)|0,Ue=Ue+Math.imul(lt,zt)|0,_e=_e+Math.imul(lt,Jt)|0,_e=_e+Math.imul(st,zt)|0,Qe=Qe+Math.imul(st,Jt)|0,Ue=Ue+Math.imul(it,Xt)|0,_e=_e+Math.imul(it,ir)|0,_e=_e+Math.imul(at,Xt)|0,Qe=Qe+Math.imul(at,ir)|0;var Gr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,Ue=Math.imul(Ct,$t),_e=Math.imul(Ct,jt),_e=_e+Math.imul(Rt,$t)|0,Qe=Math.imul(Rt,jt),Ue=Ue+Math.imul(wt,Ot)|0,_e=_e+Math.imul(wt,Lt)|0,_e=_e+Math.imul(St,Ot)|0,Qe=Qe+Math.imul(St,Lt)|0,Ue=Ue+Math.imul(ht,Ht)|0,_e=_e+Math.imul(ht,qt)|0,_e=_e+Math.imul(gt,Ht)|0,Qe=Qe+Math.imul(gt,qt)|0,Ue=Ue+Math.imul(xt,Vt)|0,_e=_e+Math.imul(xt,Gt)|0,_e=_e+Math.imul(yt,Vt)|0,Qe=Qe+Math.imul(yt,Gt)|0,Ue=Ue+Math.imul(pt,Yt)|0,_e=_e+Math.imul(pt,Kt)|0,_e=_e+Math.imul(mt,Yt)|0,Qe=Qe+Math.imul(mt,Kt)|0,Ue=Ue+Math.imul(ft,zt)|0,_e=_e+Math.imul(ft,Jt)|0,_e=_e+Math.imul(dt,zt)|0,Qe=Qe+Math.imul(dt,Jt)|0,Ue=Ue+Math.imul(lt,Xt)|0,_e=_e+Math.imul(lt,ir)|0,_e=_e+Math.imul(st,Xt)|0,Qe=Qe+Math.imul(st,ir)|0,Ue=Ue+Math.imul(it,er)|0,_e=_e+Math.imul(it,fr)|0,_e=_e+Math.imul(at,er)|0,Qe=Qe+Math.imul(at,fr)|0;var sn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(sn>>>26)|0,sn&=67108863,Ue=Math.imul(Dt,$t),_e=Math.imul(Dt,jt),_e=_e+Math.imul(Tt,$t)|0,Qe=Math.imul(Tt,jt),Ue=Ue+Math.imul(Ct,Ot)|0,_e=_e+Math.imul(Ct,Lt)|0,_e=_e+Math.imul(Rt,Ot)|0,Qe=Qe+Math.imul(Rt,Lt)|0,Ue=Ue+Math.imul(wt,Ht)|0,_e=_e+Math.imul(wt,qt)|0,_e=_e+Math.imul(St,Ht)|0,Qe=Qe+Math.imul(St,qt)|0,Ue=Ue+Math.imul(ht,Vt)|0,_e=_e+Math.imul(ht,Gt)|0,_e=_e+Math.imul(gt,Vt)|0,Qe=Qe+Math.imul(gt,Gt)|0,Ue=Ue+Math.imul(xt,Yt)|0,_e=_e+Math.imul(xt,Kt)|0,_e=_e+Math.imul(yt,Yt)|0,Qe=Qe+Math.imul(yt,Kt)|0,Ue=Ue+Math.imul(pt,zt)|0,_e=_e+Math.imul(pt,Jt)|0,_e=_e+Math.imul(mt,zt)|0,Qe=Qe+Math.imul(mt,Jt)|0,Ue=Ue+Math.imul(ft,Xt)|0,_e=_e+Math.imul(ft,ir)|0,_e=_e+Math.imul(dt,Xt)|0,Qe=Qe+Math.imul(dt,ir)|0,Ue=Ue+Math.imul(lt,er)|0,_e=_e+Math.imul(lt,fr)|0,_e=_e+Math.imul(st,er)|0,Qe=Qe+Math.imul(st,fr)|0,Ue=Ue+Math.imul(it,sr)|0,_e=_e+Math.imul(it,Ar)|0,_e=_e+Math.imul(at,sr)|0,Qe=Qe+Math.imul(at,Ar)|0;var ln=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(ln>>>26)|0,ln&=67108863,Ue=Math.imul(Mt,$t),_e=Math.imul(Mt,jt),_e=_e+Math.imul(kt,$t)|0,Qe=Math.imul(kt,jt),Ue=Ue+Math.imul(Dt,Ot)|0,_e=_e+Math.imul(Dt,Lt)|0,_e=_e+Math.imul(Tt,Ot)|0,Qe=Qe+Math.imul(Tt,Lt)|0,Ue=Ue+Math.imul(Ct,Ht)|0,_e=_e+Math.imul(Ct,qt)|0,_e=_e+Math.imul(Rt,Ht)|0,Qe=Qe+Math.imul(Rt,qt)|0,Ue=Ue+Math.imul(wt,Vt)|0,_e=_e+Math.imul(wt,Gt)|0,_e=_e+Math.imul(St,Vt)|0,Qe=Qe+Math.imul(St,Gt)|0,Ue=Ue+Math.imul(ht,Yt)|0,_e=_e+Math.imul(ht,Kt)|0,_e=_e+Math.imul(gt,Yt)|0,Qe=Qe+Math.imul(gt,Kt)|0,Ue=Ue+Math.imul(xt,zt)|0,_e=_e+Math.imul(xt,Jt)|0,_e=_e+Math.imul(yt,zt)|0,Qe=Qe+Math.imul(yt,Jt)|0,Ue=Ue+Math.imul(pt,Xt)|0,_e=_e+Math.imul(pt,ir)|0,_e=_e+Math.imul(mt,Xt)|0,Qe=Qe+Math.imul(mt,ir)|0,Ue=Ue+Math.imul(ft,er)|0,_e=_e+Math.imul(ft,fr)|0,_e=_e+Math.imul(dt,er)|0,Qe=Qe+Math.imul(dt,fr)|0,Ue=Ue+Math.imul(lt,sr)|0,_e=_e+Math.imul(lt,Ar)|0,_e=_e+Math.imul(st,sr)|0,Qe=Qe+Math.imul(st,Ar)|0,Ue=Ue+Math.imul(it,ar)|0,_e=_e+Math.imul(it,hr)|0,_e=_e+Math.imul(at,ar)|0,Qe=Qe+Math.imul(at,hr)|0;var hn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(hn>>>26)|0,hn&=67108863,Ue=Math.imul(Mt,Ot),_e=Math.imul(Mt,Lt),_e=_e+Math.imul(kt,Ot)|0,Qe=Math.imul(kt,Lt),Ue=Ue+Math.imul(Dt,Ht)|0,_e=_e+Math.imul(Dt,qt)|0,_e=_e+Math.imul(Tt,Ht)|0,Qe=Qe+Math.imul(Tt,qt)|0,Ue=Ue+Math.imul(Ct,Vt)|0,_e=_e+Math.imul(Ct,Gt)|0,_e=_e+Math.imul(Rt,Vt)|0,Qe=Qe+Math.imul(Rt,Gt)|0,Ue=Ue+Math.imul(wt,Yt)|0,_e=_e+Math.imul(wt,Kt)|0,_e=_e+Math.imul(St,Yt)|0,Qe=Qe+Math.imul(St,Kt)|0,Ue=Ue+Math.imul(ht,zt)|0,_e=_e+Math.imul(ht,Jt)|0,_e=_e+Math.imul(gt,zt)|0,Qe=Qe+Math.imul(gt,Jt)|0,Ue=Ue+Math.imul(xt,Xt)|0,_e=_e+Math.imul(xt,ir)|0,_e=_e+Math.imul(yt,Xt)|0,Qe=Qe+Math.imul(yt,ir)|0,Ue=Ue+Math.imul(pt,er)|0,_e=_e+Math.imul(pt,fr)|0,_e=_e+Math.imul(mt,er)|0,Qe=Qe+Math.imul(mt,fr)|0,Ue=Ue+Math.imul(ft,sr)|0,_e=_e+Math.imul(ft,Ar)|0,_e=_e+Math.imul(dt,sr)|0,Qe=Qe+Math.imul(dt,Ar)|0,Ue=Ue+Math.imul(lt,ar)|0,_e=_e+Math.imul(lt,hr)|0,_e=_e+Math.imul(st,ar)|0,Qe=Qe+Math.imul(st,hr)|0;var pn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(pn>>>26)|0,pn&=67108863,Ue=Math.imul(Mt,Ht),_e=Math.imul(Mt,qt),_e=_e+Math.imul(kt,Ht)|0,Qe=Math.imul(kt,qt),Ue=Ue+Math.imul(Dt,Vt)|0,_e=_e+Math.imul(Dt,Gt)|0,_e=_e+Math.imul(Tt,Vt)|0,Qe=Qe+Math.imul(Tt,Gt)|0,Ue=Ue+Math.imul(Ct,Yt)|0,_e=_e+Math.imul(Ct,Kt)|0,_e=_e+Math.imul(Rt,Yt)|0,Qe=Qe+Math.imul(Rt,Kt)|0,Ue=Ue+Math.imul(wt,zt)|0,_e=_e+Math.imul(wt,Jt)|0,_e=_e+Math.imul(St,zt)|0,Qe=Qe+Math.imul(St,Jt)|0,Ue=Ue+Math.imul(ht,Xt)|0,_e=_e+Math.imul(ht,ir)|0,_e=_e+Math.imul(gt,Xt)|0,Qe=Qe+Math.imul(gt,ir)|0,Ue=Ue+Math.imul(xt,er)|0,_e=_e+Math.imul(xt,fr)|0,_e=_e+Math.imul(yt,er)|0,Qe=Qe+Math.imul(yt,fr)|0,Ue=Ue+Math.imul(pt,sr)|0,_e=_e+Math.imul(pt,Ar)|0,_e=_e+Math.imul(mt,sr)|0,Qe=Qe+Math.imul(mt,Ar)|0,Ue=Ue+Math.imul(ft,ar)|0,_e=_e+Math.imul(ft,hr)|0,_e=_e+Math.imul(dt,ar)|0,Qe=Qe+Math.imul(dt,hr)|0;var Xr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,Ue=Math.imul(Mt,Vt),_e=Math.imul(Mt,Gt),_e=_e+Math.imul(kt,Vt)|0,Qe=Math.imul(kt,Gt),Ue=Ue+Math.imul(Dt,Yt)|0,_e=_e+Math.imul(Dt,Kt)|0,_e=_e+Math.imul(Tt,Yt)|0,Qe=Qe+Math.imul(Tt,Kt)|0,Ue=Ue+Math.imul(Ct,zt)|0,_e=_e+Math.imul(Ct,Jt)|0,_e=_e+Math.imul(Rt,zt)|0,Qe=Qe+Math.imul(Rt,Jt)|0,Ue=Ue+Math.imul(wt,Xt)|0,_e=_e+Math.imul(wt,ir)|0,_e=_e+Math.imul(St,Xt)|0,Qe=Qe+Math.imul(St,ir)|0,Ue=Ue+Math.imul(ht,er)|0,_e=_e+Math.imul(ht,fr)|0,_e=_e+Math.imul(gt,er)|0,Qe=Qe+Math.imul(gt,fr)|0,Ue=Ue+Math.imul(xt,sr)|0,_e=_e+Math.imul(xt,Ar)|0,_e=_e+Math.imul(yt,sr)|0,Qe=Qe+Math.imul(yt,Ar)|0,Ue=Ue+Math.imul(pt,ar)|0,_e=_e+Math.imul(pt,hr)|0,_e=_e+Math.imul(mt,ar)|0,Qe=Qe+Math.imul(mt,hr)|0;var yn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(yn>>>26)|0,yn&=67108863,Ue=Math.imul(Mt,Yt),_e=Math.imul(Mt,Kt),_e=_e+Math.imul(kt,Yt)|0,Qe=Math.imul(kt,Kt),Ue=Ue+Math.imul(Dt,zt)|0,_e=_e+Math.imul(Dt,Jt)|0,_e=_e+Math.imul(Tt,zt)|0,Qe=Qe+Math.imul(Tt,Jt)|0,Ue=Ue+Math.imul(Ct,Xt)|0,_e=_e+Math.imul(Ct,ir)|0,_e=_e+Math.imul(Rt,Xt)|0,Qe=Qe+Math.imul(Rt,ir)|0,Ue=Ue+Math.imul(wt,er)|0,_e=_e+Math.imul(wt,fr)|0,_e=_e+Math.imul(St,er)|0,Qe=Qe+Math.imul(St,fr)|0,Ue=Ue+Math.imul(ht,sr)|0,_e=_e+Math.imul(ht,Ar)|0,_e=_e+Math.imul(gt,sr)|0,Qe=Qe+Math.imul(gt,Ar)|0,Ue=Ue+Math.imul(xt,ar)|0,_e=_e+Math.imul(xt,hr)|0,_e=_e+Math.imul(yt,ar)|0,Qe=Qe+Math.imul(yt,hr)|0;var xn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(xn>>>26)|0,xn&=67108863,Ue=Math.imul(Mt,zt),_e=Math.imul(Mt,Jt),_e=_e+Math.imul(kt,zt)|0,Qe=Math.imul(kt,Jt),Ue=Ue+Math.imul(Dt,Xt)|0,_e=_e+Math.imul(Dt,ir)|0,_e=_e+Math.imul(Tt,Xt)|0,Qe=Qe+Math.imul(Tt,ir)|0,Ue=Ue+Math.imul(Ct,er)|0,_e=_e+Math.imul(Ct,fr)|0,_e=_e+Math.imul(Rt,er)|0,Qe=Qe+Math.imul(Rt,fr)|0,Ue=Ue+Math.imul(wt,sr)|0,_e=_e+Math.imul(wt,Ar)|0,_e=_e+Math.imul(St,sr)|0,Qe=Qe+Math.imul(St,Ar)|0,Ue=Ue+Math.imul(ht,ar)|0,_e=_e+Math.imul(ht,hr)|0,_e=_e+Math.imul(gt,ar)|0,Qe=Qe+Math.imul(gt,hr)|0;var dn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(dn>>>26)|0,dn&=67108863,Ue=Math.imul(Mt,Xt),_e=Math.imul(Mt,ir),_e=_e+Math.imul(kt,Xt)|0,Qe=Math.imul(kt,ir),Ue=Ue+Math.imul(Dt,er)|0,_e=_e+Math.imul(Dt,fr)|0,_e=_e+Math.imul(Tt,er)|0,Qe=Qe+Math.imul(Tt,fr)|0,Ue=Ue+Math.imul(Ct,sr)|0,_e=_e+Math.imul(Ct,Ar)|0,_e=_e+Math.imul(Rt,sr)|0,Qe=Qe+Math.imul(Rt,Ar)|0,Ue=Ue+Math.imul(wt,ar)|0,_e=_e+Math.imul(wt,hr)|0,_e=_e+Math.imul(St,ar)|0,Qe=Qe+Math.imul(St,hr)|0;var cn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(cn>>>26)|0,cn&=67108863,Ue=Math.imul(Mt,er),_e=Math.imul(Mt,fr),_e=_e+Math.imul(kt,er)|0,Qe=Math.imul(kt,fr),Ue=Ue+Math.imul(Dt,sr)|0,_e=_e+Math.imul(Dt,Ar)|0,_e=_e+Math.imul(Tt,sr)|0,Qe=Qe+Math.imul(Tt,Ar)|0,Ue=Ue+Math.imul(Ct,ar)|0,_e=_e+Math.imul(Ct,hr)|0,_e=_e+Math.imul(Rt,ar)|0,Qe=Qe+Math.imul(Rt,hr)|0;var wn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(wn>>>26)|0,wn&=67108863,Ue=Math.imul(Mt,sr),_e=Math.imul(Mt,Ar),_e=_e+Math.imul(kt,sr)|0,Qe=Math.imul(kt,Ar),Ue=Ue+Math.imul(Dt,ar)|0,_e=_e+Math.imul(Dt,hr)|0,_e=_e+Math.imul(Tt,ar)|0,Qe=Qe+Math.imul(Tt,hr)|0;var Cn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Ue=Math.imul(Mt,ar),_e=Math.imul(Mt,hr),_e=_e+Math.imul(kt,ar)|0,Qe=Math.imul(kt,hr);var Rr=(We+Ue|0)+((_e&8191)<<13)|0;return We=(Qe+(_e>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,qe[0]=Lr,qe[1]=Pr,qe[2]=Yr,qe[3]=Wr,qe[4]=Zr,qe[5]=Jr,qe[6]=Gr,qe[7]=sn,qe[8]=ln,qe[9]=hn,qe[10]=pn,qe[11]=Xr,qe[12]=yn,qe[13]=xn,qe[14]=dn,qe[15]=cn,qe[16]=wn,qe[17]=Cn,qe[18]=Rr,We!==0&&(qe[19]=We,Re.length++),Re};Math.imul||($e=Ne);function ke(Ge,ve,Be){Be.negative=ve.negative^Ge.negative,Be.length=Ge.length+ve.length;for(var Re=0,Ie=0,Fe=0;Fe<Be.length-1;Fe++){var qe=Ie;Ie=0;for(var We=Re&67108863,Ue=Math.min(Fe,ve.length-1),_e=Math.max(0,Fe-Ge.length+1);_e<=Ue;_e++){var Qe=Fe-_e,tt=Ge.words[Qe]|0,it=ve.words[_e]|0,at=tt*it,ot=at&67108863;qe=qe+(at/67108864|0)|0,ot=ot+We|0,We=ot&67108863,qe=qe+(ot>>>26)|0,Ie+=qe>>>26,qe&=67108863}Be.words[Fe]=We,Re=qe,qe=Ie}return Re!==0?Be.words[Fe]=Re:Be.length--,Be.strip()}function je(Ge,ve,Be){var Re=new Ke;return Re.mulp(Ge,ve,Be)}ue.prototype.mulTo=function(ve,Be){var Re,Ie=this.length+ve.length;return this.length===10&&ve.length===10?Re=$e(this,ve,Be):Ie<63?Re=Ne(this,ve,Be):Ie<1024?Re=ke(this,ve,Be):Re=je(this,ve,Be),Re};function Ke(Ge,ve){this.x=Ge,this.y=ve}Ke.prototype.makeRBT=function(ve){for(var Be=new Array(ve),Re=ue.prototype._countBits(ve)-1,Ie=0;Ie<ve;Ie++)Be[Ie]=this.revBin(Ie,Re,ve);return Be},Ke.prototype.revBin=function(ve,Be,Re){if(ve===0||ve===Re-1)return ve;for(var Ie=0,Fe=0;Fe<Be;Fe++)Ie|=(ve&1)<<Be-Fe-1,ve>>=1;return Ie},Ke.prototype.permute=function(ve,Be,Re,Ie,Fe,qe){for(var We=0;We<qe;We++)Ie[We]=Be[ve[We]],Fe[We]=Re[ve[We]]},Ke.prototype.transform=function(ve,Be,Re,Ie,Fe,qe){this.permute(qe,ve,Be,Re,Ie,Fe);for(var We=1;We<Fe;We<<=1)for(var Ue=We<<1,_e=Math.cos(2*Math.PI/Ue),Qe=Math.sin(2*Math.PI/Ue),tt=0;tt<Fe;tt+=Ue)for(var it=_e,at=Qe,ot=0;ot<We;ot++){var lt=Re[tt+ot],st=Ie[tt+ot],ut=Re[tt+ot+We],ft=Ie[tt+ot+We],dt=it*ut-at*ft;ft=it*ft+at*ut,ut=dt,Re[tt+ot]=lt+ut,Ie[tt+ot]=st+ft,Re[tt+ot+We]=lt-ut,Ie[tt+ot+We]=st-ft,ot!==Ue&&(dt=_e*it-Qe*at,at=_e*at+Qe*it,it=dt)}},Ke.prototype.guessLen13b=function(ve,Be){var Re=Math.max(Be,ve)|1,Ie=Re&1,Fe=0;for(Re=Re/2|0;Re;Re=Re>>>1)Fe++;return 1<<Fe+1+Ie},Ke.prototype.conjugate=function(ve,Be,Re){if(!(Re<=1))for(var Ie=0;Ie<Re/2;Ie++){var Fe=ve[Ie];ve[Ie]=ve[Re-Ie-1],ve[Re-Ie-1]=Fe,Fe=Be[Ie],Be[Ie]=-Be[Re-Ie-1],Be[Re-Ie-1]=-Fe}},Ke.prototype.normalize13b=function(ve,Be){for(var Re=0,Ie=0;Ie<Be/2;Ie++){var Fe=Math.round(ve[2*Ie+1]/Be)*8192+Math.round(ve[2*Ie]/Be)+Re;ve[Ie]=Fe&67108863,Fe<67108864?Re=0:Re=Fe/67108864|0}return ve},Ke.prototype.convert13b=function(ve,Be,Re,Ie){for(var Fe=0,qe=0;qe<Be;qe++)Fe=Fe+(ve[qe]|0),Re[2*qe]=Fe&8191,Fe=Fe>>>13,Re[2*qe+1]=Fe&8191,Fe=Fe>>>13;for(qe=2*Be;qe<Ie;++qe)Re[qe]=0;oe(Fe===0),oe((Fe&-8192)===0)},Ke.prototype.stub=function(ve){for(var Be=new Array(ve),Re=0;Re<ve;Re++)Be[Re]=0;return Be},Ke.prototype.mulp=function(ve,Be,Re){var Ie=2*this.guessLen13b(ve.length,Be.length),Fe=this.makeRBT(Ie),qe=this.stub(Ie),We=new Array(Ie),Ue=new Array(Ie),_e=new Array(Ie),Qe=new Array(Ie),tt=new Array(Ie),it=new Array(Ie),at=Re.words;at.length=Ie,this.convert13b(ve.words,ve.length,We,Ie),this.convert13b(Be.words,Be.length,Qe,Ie),this.transform(We,qe,Ue,_e,Ie,Fe),this.transform(Qe,qe,tt,it,Ie,Fe);for(var ot=0;ot<Ie;ot++){var lt=Ue[ot]*tt[ot]-_e[ot]*it[ot];_e[ot]=Ue[ot]*it[ot]+_e[ot]*tt[ot],Ue[ot]=lt}return this.conjugate(Ue,_e,Ie),this.transform(Ue,_e,at,qe,Ie,Fe),this.conjugate(at,qe,Ie),this.normalize13b(at,Ie),Re.negative=ve.negative^Be.negative,Re.length=ve.length+Be.length,Re.strip()},ue.prototype.mul=function(ve){var Be=new ue(null);return Be.words=new Array(this.length+ve.length),this.mulTo(ve,Be)},ue.prototype.mulf=function(ve){var Be=new ue(null);return Be.words=new Array(this.length+ve.length),je(this,ve,Be)},ue.prototype.imul=function(ve){return this.clone().mulTo(ve,this)},ue.prototype.imuln=function(ve){oe(typeof ve=="number"),oe(ve<67108864);for(var Be=0,Re=0;Re<this.length;Re++){var Ie=(this.words[Re]|0)*ve,Fe=(Ie&67108863)+(Be&67108863);Be>>=26,Be+=Ie/67108864|0,Be+=Fe>>>26,this.words[Re]=Fe&67108863}return Be!==0&&(this.words[Re]=Be,this.length++),this},ue.prototype.muln=function(ve){return this.clone().imuln(ve)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(ve){var Be=Te(ve);if(Be.length===0)return new ue(1);for(var Re=this,Ie=0;Ie<Be.length&&Be[Ie]===0;Ie++,Re=Re.sqr());if(++Ie<Be.length)for(var Fe=Re.sqr();Ie<Be.length;Ie++,Fe=Fe.sqr())Be[Ie]!==0&&(Re=Re.mul(Fe));return Re},ue.prototype.iushln=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26,Ie=67108863>>>26-Be<<26-Be,Fe;if(Be!==0){var qe=0;for(Fe=0;Fe<this.length;Fe++){var We=this.words[Fe]&Ie,Ue=(this.words[Fe]|0)-We<<Be;this.words[Fe]=Ue|qe,qe=We>>>26-Be}qe&&(this.words[Fe]=qe,this.length++)}if(Re!==0){for(Fe=this.length-1;Fe>=0;Fe--)this.words[Fe+Re]=this.words[Fe];for(Fe=0;Fe<Re;Fe++)this.words[Fe]=0;this.length+=Re}return this.strip()},ue.prototype.ishln=function(ve){return oe(this.negative===0),this.iushln(ve)},ue.prototype.iushrn=function(ve,Be,Re){oe(typeof ve=="number"&&ve>=0);var Ie;Be?Ie=(Be-Be%26)/26:Ie=0;var Fe=ve%26,qe=Math.min((ve-Fe)/26,this.length),We=67108863^67108863>>>Fe<<Fe,Ue=Re;if(Ie-=qe,Ie=Math.max(0,Ie),Ue){for(var _e=0;_e<qe;_e++)Ue.words[_e]=this.words[_e];Ue.length=qe}if(qe!==0)if(this.length>qe)for(this.length-=qe,_e=0;_e<this.length;_e++)this.words[_e]=this.words[_e+qe];else this.words[0]=0,this.length=1;var Qe=0;for(_e=this.length-1;_e>=0&&(Qe!==0||_e>=Ie);_e--){var tt=this.words[_e]|0;this.words[_e]=Qe<<26-Fe|tt>>>Fe,Qe=tt&We}return Ue&&Qe!==0&&(Ue.words[Ue.length++]=Qe),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},ue.prototype.ishrn=function(ve,Be,Re){return oe(this.negative===0),this.iushrn(ve,Be,Re)},ue.prototype.shln=function(ve){return this.clone().ishln(ve)},ue.prototype.ushln=function(ve){return this.clone().iushln(ve)},ue.prototype.shrn=function(ve){return this.clone().ishrn(ve)},ue.prototype.ushrn=function(ve){return this.clone().iushrn(ve)},ue.prototype.testn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26,Ie=1<<Be;if(this.length<=Re)return!1;var Fe=this.words[Re];return!!(Fe&Ie)},ue.prototype.imaskn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Re)return this;if(Be!==0&&Re++,this.length=Math.min(Re,this.length),Be!==0){var Ie=67108863^67108863>>>Be<<Be;this.words[this.length-1]&=Ie}return this.strip()},ue.prototype.maskn=function(ve){return this.clone().imaskn(ve)},ue.prototype.iaddn=function(ve){return oe(typeof ve=="number"),oe(ve<67108864),ve<0?this.isubn(-ve):this.negative!==0?this.length===1&&(this.words[0]|0)<ve?(this.words[0]=ve-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ve),this.negative=1,this):this._iaddn(ve)},ue.prototype._iaddn=function(ve){this.words[0]+=ve;for(var Be=0;Be<this.length&&this.words[Be]>=67108864;Be++)this.words[Be]-=67108864,Be===this.length-1?this.words[Be+1]=1:this.words[Be+1]++;return this.length=Math.max(this.length,Be+1),this},ue.prototype.isubn=function(ve){if(oe(typeof ve=="number"),oe(ve<67108864),ve<0)return this.iaddn(-ve);if(this.negative!==0)return this.negative=0,this.iaddn(ve),this.negative=1,this;if(this.words[0]-=ve,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Be=0;Be<this.length&&this.words[Be]<0;Be++)this.words[Be]+=67108864,this.words[Be+1]-=1;return this.strip()},ue.prototype.addn=function(ve){return this.clone().iaddn(ve)},ue.prototype.subn=function(ve){return this.clone().isubn(ve)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(ve,Be,Re){var Ie=ve.length+Re,Fe;this._expand(Ie);var qe,We=0;for(Fe=0;Fe<ve.length;Fe++){qe=(this.words[Fe+Re]|0)+We;var Ue=(ve.words[Fe]|0)*Be;qe-=Ue&67108863,We=(qe>>26)-(Ue/67108864|0),this.words[Fe+Re]=qe&67108863}for(;Fe<this.length-Re;Fe++)qe=(this.words[Fe+Re]|0)+We,We=qe>>26,this.words[Fe+Re]=qe&67108863;if(We===0)return this.strip();for(oe(We===-1),We=0,Fe=0;Fe<this.length;Fe++)qe=-(this.words[Fe]|0)+We,We=qe>>26,this.words[Fe]=qe&67108863;return this.negative=1,this.strip()},ue.prototype._wordDiv=function(ve,Be){var Re=this.length-ve.length,Ie=this.clone(),Fe=ve,qe=Fe.words[Fe.length-1]|0,We=this._countBits(qe);Re=26-We,Re!==0&&(Fe=Fe.ushln(Re),Ie.iushln(Re),qe=Fe.words[Fe.length-1]|0);var Ue=Ie.length-Fe.length,_e;if(Be!=="mod"){_e=new ue(null),_e.length=Ue+1,_e.words=new Array(_e.length);for(var Qe=0;Qe<_e.length;Qe++)_e.words[Qe]=0}var tt=Ie.clone()._ishlnsubmul(Fe,1,Ue);tt.negative===0&&(Ie=tt,_e&&(_e.words[Ue]=1));for(var it=Ue-1;it>=0;it--){var at=(Ie.words[Fe.length+it]|0)*67108864+(Ie.words[Fe.length+it-1]|0);for(at=Math.min(at/qe|0,67108863),Ie._ishlnsubmul(Fe,at,it);Ie.negative!==0;)at--,Ie.negative=0,Ie._ishlnsubmul(Fe,1,it),Ie.isZero()||(Ie.negative^=1);_e&&(_e.words[it]=at)}return _e&&_e.strip(),Ie.strip(),Be!=="div"&&Re!==0&&Ie.iushrn(Re),{div:_e||null,mod:Ie}},ue.prototype.divmod=function(ve,Be,Re){if(oe(!ve.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var Ie,Fe,qe;return this.negative!==0&&ve.negative===0?(qe=this.neg().divmod(ve,Be),Be!=="mod"&&(Ie=qe.div.neg()),Be!=="div"&&(Fe=qe.mod.neg(),Re&&Fe.negative!==0&&Fe.iadd(ve)),{div:Ie,mod:Fe}):this.negative===0&&ve.negative!==0?(qe=this.divmod(ve.neg(),Be),Be!=="mod"&&(Ie=qe.div.neg()),{div:Ie,mod:qe.mod}):this.negative&ve.negative?(qe=this.neg().divmod(ve.neg(),Be),Be!=="div"&&(Fe=qe.mod.neg(),Re&&Fe.negative!==0&&Fe.isub(ve)),{div:qe.div,mod:Fe}):ve.length>this.length||this.cmp(ve)<0?{div:new ue(0),mod:this}:ve.length===1?Be==="div"?{div:this.divn(ve.words[0]),mod:null}:Be==="mod"?{div:null,mod:new ue(this.modn(ve.words[0]))}:{div:this.divn(ve.words[0]),mod:new ue(this.modn(ve.words[0]))}:this._wordDiv(ve,Be)},ue.prototype.div=function(ve){return this.divmod(ve,"div",!1).div},ue.prototype.mod=function(ve){return this.divmod(ve,"mod",!1).mod},ue.prototype.umod=function(ve){return this.divmod(ve,"mod",!0).mod},ue.prototype.divRound=function(ve){var Be=this.divmod(ve);if(Be.mod.isZero())return Be.div;var Re=Be.div.negative!==0?Be.mod.isub(ve):Be.mod,Ie=ve.ushrn(1),Fe=ve.andln(1),qe=Re.cmp(Ie);return qe<0||Fe===1&&qe===0?Be.div:Be.div.negative!==0?Be.div.isubn(1):Be.div.iaddn(1)},ue.prototype.modn=function(ve){oe(ve<=67108863);for(var Be=(1<<26)%ve,Re=0,Ie=this.length-1;Ie>=0;Ie--)Re=(Be*Re+(this.words[Ie]|0))%ve;return Re},ue.prototype.idivn=function(ve){oe(ve<=67108863);for(var Be=0,Re=this.length-1;Re>=0;Re--){var Ie=(this.words[Re]|0)+Be*67108864;this.words[Re]=Ie/ve|0,Be=Ie%ve}return this.strip()},ue.prototype.divn=function(ve){return this.clone().idivn(ve)},ue.prototype.egcd=function(ve){oe(ve.negative===0),oe(!ve.isZero());var Be=this,Re=ve.clone();Be.negative!==0?Be=Be.umod(ve):Be=Be.clone();for(var Ie=new ue(1),Fe=new ue(0),qe=new ue(0),We=new ue(1),Ue=0;Be.isEven()&&Re.isEven();)Be.iushrn(1),Re.iushrn(1),++Ue;for(var _e=Re.clone(),Qe=Be.clone();!Be.isZero();){for(var tt=0,it=1;!(Be.words[0]&it)&&tt<26;++tt,it<<=1);if(tt>0)for(Be.iushrn(tt);tt-- >0;)(Ie.isOdd()||Fe.isOdd())&&(Ie.iadd(_e),Fe.isub(Qe)),Ie.iushrn(1),Fe.iushrn(1);for(var at=0,ot=1;!(Re.words[0]&ot)&&at<26;++at,ot<<=1);if(at>0)for(Re.iushrn(at);at-- >0;)(qe.isOdd()||We.isOdd())&&(qe.iadd(_e),We.isub(Qe)),qe.iushrn(1),We.iushrn(1);Be.cmp(Re)>=0?(Be.isub(Re),Ie.isub(qe),Fe.isub(We)):(Re.isub(Be),qe.isub(Ie),We.isub(Fe))}return{a:qe,b:We,gcd:Re.iushln(Ue)}},ue.prototype._invmp=function(ve){oe(ve.negative===0),oe(!ve.isZero());var Be=this,Re=ve.clone();Be.negative!==0?Be=Be.umod(ve):Be=Be.clone();for(var Ie=new ue(1),Fe=new ue(0),qe=Re.clone();Be.cmpn(1)>0&&Re.cmpn(1)>0;){for(var We=0,Ue=1;!(Be.words[0]&Ue)&&We<26;++We,Ue<<=1);if(We>0)for(Be.iushrn(We);We-- >0;)Ie.isOdd()&&Ie.iadd(qe),Ie.iushrn(1);for(var _e=0,Qe=1;!(Re.words[0]&Qe)&&_e<26;++_e,Qe<<=1);if(_e>0)for(Re.iushrn(_e);_e-- >0;)Fe.isOdd()&&Fe.iadd(qe),Fe.iushrn(1);Be.cmp(Re)>=0?(Be.isub(Re),Ie.isub(Fe)):(Re.isub(Be),Fe.isub(Ie))}var tt;return Be.cmpn(1)===0?tt=Ie:tt=Fe,tt.cmpn(0)<0&&tt.iadd(ve),tt},ue.prototype.gcd=function(ve){if(this.isZero())return ve.abs();if(ve.isZero())return this.abs();var Be=this.clone(),Re=ve.clone();Be.negative=0,Re.negative=0;for(var Ie=0;Be.isEven()&&Re.isEven();Ie++)Be.iushrn(1),Re.iushrn(1);do{for(;Be.isEven();)Be.iushrn(1);for(;Re.isEven();)Re.iushrn(1);var Fe=Be.cmp(Re);if(Fe<0){var qe=Be;Be=Re,Re=qe}else if(Fe===0||Re.cmpn(1)===0)break;Be.isub(Re)}while(!0);return Re.iushln(Ie)},ue.prototype.invm=function(ve){return this.egcd(ve).a.umod(ve)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(ve){return this.words[0]&ve},ue.prototype.bincn=function(ve){oe(typeof ve=="number");var Be=ve%26,Re=(ve-Be)/26,Ie=1<<Be;if(this.length<=Re)return this._expand(Re+1),this.words[Re]|=Ie,this;for(var Fe=Ie,qe=Re;Fe!==0&&qe<this.length;qe++){var We=this.words[qe]|0;We+=Fe,Fe=We>>>26,We&=67108863,this.words[qe]=We}return Fe!==0&&(this.words[qe]=Fe,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(ve){var Be=ve<0;if(this.negative!==0&&!Be)return-1;if(this.negative===0&&Be)return 1;this.strip();var Re;if(this.length>1)Re=1;else{Be&&(ve=-ve),oe(ve<=67108863,"Number is too big");var Ie=this.words[0]|0;Re=Ie===ve?0:Ie<ve?-1:1}return this.negative!==0?-Re|0:Re},ue.prototype.cmp=function(ve){if(this.negative!==0&&ve.negative===0)return-1;if(this.negative===0&&ve.negative!==0)return 1;var Be=this.ucmp(ve);return this.negative!==0?-Be|0:Be},ue.prototype.ucmp=function(ve){if(this.length>ve.length)return 1;if(this.length<ve.length)return-1;for(var Be=0,Re=this.length-1;Re>=0;Re--){var Ie=this.words[Re]|0,Fe=ve.words[Re]|0;if(Ie!==Fe){Ie<Fe?Be=-1:Ie>Fe&&(Be=1);break}}return Be},ue.prototype.gtn=function(ve){return this.cmpn(ve)===1},ue.prototype.gt=function(ve){return this.cmp(ve)===1},ue.prototype.gten=function(ve){return this.cmpn(ve)>=0},ue.prototype.gte=function(ve){return this.cmp(ve)>=0},ue.prototype.ltn=function(ve){return this.cmpn(ve)===-1},ue.prototype.lt=function(ve){return this.cmp(ve)===-1},ue.prototype.lten=function(ve){return this.cmpn(ve)<=0},ue.prototype.lte=function(ve){return this.cmp(ve)<=0},ue.prototype.eqn=function(ve){return this.cmpn(ve)===0},ue.prototype.eq=function(ve){return this.cmp(ve)===0},ue.red=function(ve){return new et(ve)},ue.prototype.toRed=function(ve){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),ve.convertTo(this)._forceRed(ve)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(ve){return this.red=ve,this},ue.prototype.forceRed=function(ve){return oe(!this.red,"Already a number in reduction context"),this._forceRed(ve)},ue.prototype.redAdd=function(ve){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,ve)},ue.prototype.redIAdd=function(ve){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ve)},ue.prototype.redSub=function(ve){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,ve)},ue.prototype.redISub=function(ve){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,ve)},ue.prototype.redShl=function(ve){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,ve)},ue.prototype.redMul=function(ve){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,ve),this.red.mul(this,ve)},ue.prototype.redIMul=function(ve){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,ve),this.red.imul(this,ve)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(ve){return oe(this.red&&!ve.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ve)};var Ye={k256:null,p224:null,p192:null,p25519:null};function ze(Ge,ve){this.name=Ge,this.p=new ue(ve,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ze.prototype._tmp=function(){var ve=new ue(null);return ve.words=new Array(Math.ceil(this.n/13)),ve},ze.prototype.ireduce=function(ve){var Be=ve,Re;do this.split(Be,this.tmp),Be=this.imulK(Be),Be=Be.iadd(this.tmp),Re=Be.bitLength();while(Re>this.n);var Ie=Re<this.n?-1:Be.ucmp(this.p);return Ie===0?(Be.words[0]=0,Be.length=1):Ie>0?Be.isub(this.p):Be.strip!==void 0?Be.strip():Be._strip(),Be},ze.prototype.split=function(ve,Be){ve.iushrn(this.n,0,Be)},ze.prototype.imulK=function(ve){return ve.imul(this.k)};function Xe(){ze.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(Xe,ze),Xe.prototype.split=function(ve,Be){for(var Re=4194303,Ie=Math.min(ve.length,9),Fe=0;Fe<Ie;Fe++)Be.words[Fe]=ve.words[Fe];if(Be.length=Ie,ve.length<=9){ve.words[0]=0,ve.length=1;return}var qe=ve.words[9];for(Be.words[Be.length++]=qe&Re,Fe=10;Fe<ve.length;Fe++){var We=ve.words[Fe]|0;ve.words[Fe-10]=(We&Re)<<4|qe>>>22,qe=We}qe>>>=22,ve.words[Fe-10]=qe,qe===0&&ve.length>10?ve.length-=10:ve.length-=9},Xe.prototype.imulK=function(ve){ve.words[ve.length]=0,ve.words[ve.length+1]=0,ve.length+=2;for(var Be=0,Re=0;Re<ve.length;Re++){var Ie=ve.words[Re]|0;Be+=Ie*977,ve.words[Re]=Be&67108863,Be=Ie*64+(Be/67108864|0)}return ve.words[ve.length-1]===0&&(ve.length--,ve.words[ve.length-1]===0&&ve.length--),ve};function Je(){ze.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(Je,ze);function rt(){ze.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(rt,ze);function Ze(){ze.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(Ze,ze),Ze.prototype.imulK=function(ve){for(var Be=0,Re=0;Re<ve.length;Re++){var Ie=(ve.words[Re]|0)*19+Be,Fe=Ie&67108863;Ie>>>=26,ve.words[Re]=Fe,Be=Ie}return Be!==0&&(ve.words[ve.length++]=Be),ve},ue._prime=function(ve){if(Ye[ve])return Ye[ve];var Be;if(ve==="k256")Be=new Xe;else if(ve==="p224")Be=new Je;else if(ve==="p192")Be=new rt;else if(ve==="p25519")Be=new Ze;else throw new Error("Unknown prime "+ve);return Ye[ve]=Be,Be};function et(Ge){if(typeof Ge=="string"){var ve=ue._prime(Ge);this.m=ve.p,this.prime=ve}else oe(Ge.gtn(1),"modulus must be greater than 1"),this.m=Ge,this.prime=null}et.prototype._verify1=function(ve){oe(ve.negative===0,"red works only with positives"),oe(ve.red,"red works only with red numbers")},et.prototype._verify2=function(ve,Be){oe((ve.negative|Be.negative)===0,"red works only with positives"),oe(ve.red&&ve.red===Be.red,"red works only with red numbers")},et.prototype.imod=function(ve){return this.prime?this.prime.ireduce(ve)._forceRed(this):ve.umod(this.m)._forceRed(this)},et.prototype.neg=function(ve){return ve.isZero()?ve.clone():this.m.sub(ve)._forceRed(this)},et.prototype.add=function(ve,Be){this._verify2(ve,Be);var Re=ve.add(Be);return Re.cmp(this.m)>=0&&Re.isub(this.m),Re._forceRed(this)},et.prototype.iadd=function(ve,Be){this._verify2(ve,Be);var Re=ve.iadd(Be);return Re.cmp(this.m)>=0&&Re.isub(this.m),Re},et.prototype.sub=function(ve,Be){this._verify2(ve,Be);var Re=ve.sub(Be);return Re.cmpn(0)<0&&Re.iadd(this.m),Re._forceRed(this)},et.prototype.isub=function(ve,Be){this._verify2(ve,Be);var Re=ve.isub(Be);return Re.cmpn(0)<0&&Re.iadd(this.m),Re},et.prototype.shl=function(ve,Be){return this._verify1(ve),this.imod(ve.ushln(Be))},et.prototype.imul=function(ve,Be){return this._verify2(ve,Be),this.imod(ve.imul(Be))},et.prototype.mul=function(ve,Be){return this._verify2(ve,Be),this.imod(ve.mul(Be))},et.prototype.isqr=function(ve){return this.imul(ve,ve.clone())},et.prototype.sqr=function(ve){return this.mul(ve,ve)},et.prototype.sqrt=function(ve){if(ve.isZero())return ve.clone();var Be=this.m.andln(3);if(oe(Be%2===1),Be===3){var Re=this.m.add(new ue(1)).iushrn(2);return this.pow(ve,Re)}for(var Ie=this.m.subn(1),Fe=0;!Ie.isZero()&&Ie.andln(1)===0;)Fe++,Ie.iushrn(1);oe(!Ie.isZero());var qe=new ue(1).toRed(this),We=qe.redNeg(),Ue=this.m.subn(1).iushrn(1),_e=this.m.bitLength();for(_e=new ue(2*_e*_e).toRed(this);this.pow(_e,Ue).cmp(We)!==0;)_e.redIAdd(We);for(var Qe=this.pow(_e,Ie),tt=this.pow(ve,Ie.addn(1).iushrn(1)),it=this.pow(ve,Ie),at=Fe;it.cmp(qe)!==0;){for(var ot=it,lt=0;ot.cmp(qe)!==0;lt++)ot=ot.redSqr();oe(lt<at);var st=this.pow(Qe,new ue(1).iushln(at-lt-1));tt=tt.redMul(st),Qe=st.redSqr(),it=it.redMul(Qe),at=lt}return tt},et.prototype.invm=function(ve){var Be=ve._invmp(this.m);return Be.negative!==0?(Be.negative=0,this.imod(Be).redNeg()):this.imod(Be)},et.prototype.pow=function(ve,Be){if(Be.isZero())return new ue(1).toRed(this);if(Be.cmpn(1)===0)return ve.clone();var Re=4,Ie=new Array(1<<Re);Ie[0]=new ue(1).toRed(this),Ie[1]=ve;for(var Fe=2;Fe<Ie.length;Fe++)Ie[Fe]=this.mul(Ie[Fe-1],ve);var qe=Ie[0],We=0,Ue=0,_e=Be.bitLength()%26;for(_e===0&&(_e=26),Fe=Be.length-1;Fe>=0;Fe--){for(var Qe=Be.words[Fe],tt=_e-1;tt>=0;tt--){var it=Qe>>tt&1;if(qe!==Ie[0]&&(qe=this.sqr(qe)),it===0&&We===0){Ue=0;continue}We<<=1,We|=it,Ue++,!(Ue!==Re&&(Fe!==0||tt!==0))&&(qe=this.mul(qe,Ie[We]),Ue=0,We=0)}_e=26}return qe},et.prototype.convertTo=function(ve){var Be=ve.umod(this.m);return Be===ve?Be.clone():Be},et.prototype.convertFrom=function(ve){var Be=ve.clone();return Be.red=null,Be},ue.mont=function(ve){return new nt(ve)};function nt(Ge){et.call(this,Ge),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(nt,et),nt.prototype.convertTo=function(ve){return this.imod(ve.ushln(this.shift))},nt.prototype.convertFrom=function(ve){var Be=this.imod(ve.mul(this.rinv));return Be.red=null,Be},nt.prototype.imul=function(ve,Be){if(ve.isZero()||Be.isZero())return ve.words[0]=0,ve.length=1,ve;var Re=ve.imul(Be),Ie=Re.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Fe=Re.isub(Ie).iushrn(this.shift),qe=Fe;return Fe.cmp(this.m)>=0?qe=Fe.isub(this.m):Fe.cmpn(0)<0&&(qe=Fe.iadd(this.m)),qe._forceRed(this)},nt.prototype.mul=function(ve,Be){if(ve.isZero()||Be.isZero())return new ue(0)._forceRed(this);var Re=ve.mul(Be),Ie=Re.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Fe=Re.isub(Ie).iushrn(this.shift),qe=Fe;return Fe.cmp(this.m)>=0?qe=Fe.isub(this.m):Fe.cmpn(0)<0&&(qe=Fe.iadd(this.m)),qe._forceRed(this)},nt.prototype.invm=function(ve){var Be=this.imod(ve._invmp(this.m).mul(this.r2));return Be._forceRed(this)}})(K,commonjsGlobal)}(bn$1)),bn$1.exports}var browser$2,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$2;hasRequiredBrowser$2=1;var K=requireElliptic(),J=requireBn$1();browser$2=function(Ae){return new oe(Ae)};var ne={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};ne.p224=ne.secp224r1,ne.p256=ne.secp256r1=ne.prime256v1,ne.p192=ne.secp192r1=ne.prime192v1,ne.p384=ne.secp384r1,ne.p521=ne.secp521r1;function oe(ue){this.curveType=ne[ue],this.curveType||(this.curveType={name:ue}),this.curve=new K.ec(this.curveType.name),this.keys=void 0}oe.prototype.generateKeys=function(ue,Ae){return this.keys=this.curve.genKeyPair(),this.getPublicKey(ue,Ae)},oe.prototype.computeSecret=function(ue,Ae,pe){Ae=Ae||"utf8",Buffer.isBuffer(ue)||(ue=new Buffer(ue,Ae));var xe=this.curve.keyFromPublic(ue).getPublic(),me=xe.mul(this.keys.getPrivate()).getX();return ce(me,pe,this.curveType.byteLength)},oe.prototype.getPublicKey=function(ue,Ae){var pe=this.keys.getPublic(Ae==="compressed",!0);return Ae==="hybrid"&&(pe[pe.length-1]%2?pe[0]=7:pe[0]=6),ce(pe,ue)},oe.prototype.getPrivateKey=function(ue){return ce(this.keys.getPrivate(),ue)},oe.prototype.setPublicKey=function(ue,Ae){return Ae=Ae||"utf8",Buffer.isBuffer(ue)||(ue=new Buffer(ue,Ae)),this.keys._importPublic(ue),this},oe.prototype.setPrivateKey=function(ue,Ae){Ae=Ae||"utf8",Buffer.isBuffer(ue)||(ue=new Buffer(ue,Ae));var pe=new J(ue);return pe=pe.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(pe),this};function ce(ue,Ae,pe){Array.isArray(ue)||(ue=ue.toArray());var xe=new Buffer(ue);if(pe&&xe.length<pe){var me=new Buffer(pe-xe.length);me.fill(0),xe=Buffer.concat([me,xe])}return Ae?xe.toString(Ae):xe}return browser$2}var browser$1={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var K=requireBrowser$9(),J=requireSafeBuffer$1().Buffer;mgf=function(oe,ce){for(var ue=J.alloc(0),Ae=0,pe;ue.length<ce;)pe=ne(Ae++),ue=J.concat([ue,K("sha1").update(oe).update(pe).digest()]);return ue.slice(0,ce)};function ne(oe){var ce=J.allocUnsafe(4);return ce.writeUInt32BE(oe,0),ce}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function(J,ne){for(var oe=J.length,ce=-1;++ce<oe;)J[ce]^=ne[ce];return J}),xor}var bn={exports:{}};bn.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(K){(function(J,ne){function oe(Ge,ve){if(!Ge)throw new Error(ve||"Assertion failed")}function ce(Ge,ve){Ge.super_=ve;var Be=function(){};Be.prototype=ve.prototype,Ge.prototype=new Be,Ge.prototype.constructor=Ge}function ue(Ge,ve,Be){if(ue.isBN(Ge))return Ge;this.negative=0,this.words=null,this.length=0,this.red=null,Ge!==null&&((ve==="le"||ve==="be")&&(Be=ve,ve=10),this._init(Ge||0,ve||10,Be||"be"))}typeof J=="object"?J.exports=ue:ne.BN=ue,ue.BN=ue,ue.wordSize=26;var Ae;try{typeof window<"u"&&typeof window.Buffer<"u"?Ae=window.Buffer:Ae=require$$0$1.Buffer}catch{}ue.isBN=function(ve){return ve instanceof ue?!0:ve!==null&&typeof ve=="object"&&ve.constructor.wordSize===ue.wordSize&&Array.isArray(ve.words)},ue.max=function(ve,Be){return ve.cmp(Be)>0?ve:Be},ue.min=function(ve,Be){return ve.cmp(Be)<0?ve:Be},ue.prototype._init=function(ve,Be,Re){if(typeof ve=="number")return this._initNumber(ve,Be,Re);if(typeof ve=="object")return this._initArray(ve,Be,Re);Be==="hex"&&(Be=16),oe(Be===(Be|0)&&Be>=2&&Be<=36),ve=ve.toString().replace(/\s+/g,"");var Ie=0;ve[0]==="-"&&(Ie++,this.negative=1),Ie<ve.length&&(Be===16?this._parseHex(ve,Ie,Re):(this._parseBase(ve,Be,Ie),Re==="le"&&this._initArray(this.toArray(),Be,Re)))},ue.prototype._initNumber=function(ve,Be,Re){ve<0&&(this.negative=1,ve=-ve),ve<67108864?(this.words=[ve&67108863],this.length=1):ve<4503599627370496?(this.words=[ve&67108863,ve/67108864&67108863],this.length=2):(oe(ve<9007199254740992),this.words=[ve&67108863,ve/67108864&67108863,1],this.length=3),Re==="le"&&this._initArray(this.toArray(),Be,Re)},ue.prototype._initArray=function(ve,Be,Re){if(oe(typeof ve.length=="number"),ve.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ve.length/3),this.words=new Array(this.length);for(var Ie=0;Ie<this.length;Ie++)this.words[Ie]=0;var Fe,qe,We=0;if(Re==="be")for(Ie=ve.length-1,Fe=0;Ie>=0;Ie-=3)qe=ve[Ie]|ve[Ie-1]<<8|ve[Ie-2]<<16,this.words[Fe]|=qe<<We&67108863,this.words[Fe+1]=qe>>>26-We&67108863,We+=24,We>=26&&(We-=26,Fe++);else if(Re==="le")for(Ie=0,Fe=0;Ie<ve.length;Ie+=3)qe=ve[Ie]|ve[Ie+1]<<8|ve[Ie+2]<<16,this.words[Fe]|=qe<<We&67108863,this.words[Fe+1]=qe>>>26-We&67108863,We+=24,We>=26&&(We-=26,Fe++);return this.strip()};function pe(Ge,ve){var Be=Ge.charCodeAt(ve);return Be>=65&&Be<=70?Be-55:Be>=97&&Be<=102?Be-87:Be-48&15}function xe(Ge,ve,Be){var Re=pe(Ge,Be);return Be-1>=ve&&(Re|=pe(Ge,Be-1)<<4),Re}ue.prototype._parseHex=function(ve,Be,Re){this.length=Math.ceil((ve.length-Be)/6),this.words=new Array(this.length);for(var Ie=0;Ie<this.length;Ie++)this.words[Ie]=0;var Fe=0,qe=0,We;if(Re==="be")for(Ie=ve.length-1;Ie>=Be;Ie-=2)We=xe(ve,Be,Ie)<<Fe,this.words[qe]|=We&67108863,Fe>=18?(Fe-=18,qe+=1,this.words[qe]|=We>>>26):Fe+=8;else{var Ue=ve.length-Be;for(Ie=Ue%2===0?Be+1:Be;Ie<ve.length;Ie+=2)We=xe(ve,Be,Ie)<<Fe,this.words[qe]|=We&67108863,Fe>=18?(Fe-=18,qe+=1,this.words[qe]|=We>>>26):Fe+=8}this.strip()};function me(Ge,ve,Be,Re){for(var Ie=0,Fe=Math.min(Ge.length,Be),qe=ve;qe<Fe;qe++){var We=Ge.charCodeAt(qe)-48;Ie*=Re,We>=49?Ie+=We-49+10:We>=17?Ie+=We-17+10:Ie+=We}return Ie}ue.prototype._parseBase=function(ve,Be,Re){this.words=[0],this.length=1;for(var Ie=0,Fe=1;Fe<=67108863;Fe*=Be)Ie++;Ie--,Fe=Fe/Be|0;for(var qe=ve.length-Re,We=qe%Ie,Ue=Math.min(qe,qe-We)+Re,_e=0,Qe=Re;Qe<Ue;Qe+=Ie)_e=me(ve,Qe,Qe+Ie,Be),this.imuln(Fe),this.words[0]+_e<67108864?this.words[0]+=_e:this._iaddn(_e);if(We!==0){var tt=1;for(_e=me(ve,Qe,ve.length,Be),Qe=0;Qe<We;Qe++)tt*=Be;this.imuln(tt),this.words[0]+_e<67108864?this.words[0]+=_e:this._iaddn(_e)}this.strip()},ue.prototype.copy=function(ve){ve.words=new Array(this.length);for(var Be=0;Be<this.length;Be++)ve.words[Be]=this.words[Be];ve.length=this.length,ve.negative=this.negative,ve.red=this.red},ue.prototype.clone=function(){var ve=new ue(null);return this.copy(ve),ve},ue.prototype._expand=function(ve){for(;this.length<ve;)this.words[this.length++]=0;return this},ue.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},ue.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},ue.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ge=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],ye=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Se=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];ue.prototype.toString=function(ve,Be){ve=ve||10,Be=Be|0||1;var Re;if(ve===16||ve==="hex"){Re="";for(var Ie=0,Fe=0,qe=0;qe<this.length;qe++){var We=this.words[qe],Ue=((We<<Ie|Fe)&16777215).toString(16);Fe=We>>>24-Ie&16777215,Fe!==0||qe!==this.length-1?Re=ge[6-Ue.length]+Ue+Re:Re=Ue+Re,Ie+=2,Ie>=26&&(Ie-=26,qe--)}for(Fe!==0&&(Re=Fe.toString(16)+Re);Re.length%Be!==0;)Re="0"+Re;return this.negative!==0&&(Re="-"+Re),Re}if(ve===(ve|0)&&ve>=2&&ve<=36){var _e=ye[ve],Qe=Se[ve];Re="";var tt=this.clone();for(tt.negative=0;!tt.isZero();){var it=tt.modn(Qe).toString(ve);tt=tt.idivn(Qe),tt.isZero()?Re=it+Re:Re=ge[_e-it.length]+it+Re}for(this.isZero()&&(Re="0"+Re);Re.length%Be!==0;)Re="0"+Re;return this.negative!==0&&(Re="-"+Re),Re}oe(!1,"Base should be between 2 and 36")},ue.prototype.toNumber=function(){var ve=this.words[0];return this.length===2?ve+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ve+=4503599627370496+this.words[1]*67108864:this.length>2&&oe(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ve:ve},ue.prototype.toJSON=function(){return this.toString(16)},ue.prototype.toBuffer=function(ve,Be){return oe(typeof Ae<"u"),this.toArrayLike(Ae,ve,Be)},ue.prototype.toArray=function(ve,Be){return this.toArrayLike(Array,ve,Be)},ue.prototype.toArrayLike=function(ve,Be,Re){var Ie=this.byteLength(),Fe=Re||Math.max(1,Ie);oe(Ie<=Fe,"byte array longer than desired length"),oe(Fe>0,"Requested array length <= 0"),this.strip();var qe=Be==="le",We=new ve(Fe),Ue,_e,Qe=this.clone();if(qe){for(_e=0;!Qe.isZero();_e++)Ue=Qe.andln(255),Qe.iushrn(8),We[_e]=Ue;for(;_e<Fe;_e++)We[_e]=0}else{for(_e=0;_e<Fe-Ie;_e++)We[_e]=0;for(_e=0;!Qe.isZero();_e++)Ue=Qe.andln(255),Qe.iushrn(8),We[Fe-_e-1]=Ue}return We},Math.clz32?ue.prototype._countBits=function(ve){return 32-Math.clz32(ve)}:ue.prototype._countBits=function(ve){var Be=ve,Re=0;return Be>=4096&&(Re+=13,Be>>>=13),Be>=64&&(Re+=7,Be>>>=7),Be>=8&&(Re+=4,Be>>>=4),Be>=2&&(Re+=2,Be>>>=2),Re+Be},ue.prototype._zeroBits=function(ve){if(ve===0)return 26;var Be=ve,Re=0;return Be&8191||(Re+=13,Be>>>=13),Be&127||(Re+=7,Be>>>=7),Be&15||(Re+=4,Be>>>=4),Be&3||(Re+=2,Be>>>=2),Be&1||Re++,Re},ue.prototype.bitLength=function(){var ve=this.words[this.length-1],Be=this._countBits(ve);return(this.length-1)*26+Be};function Te(Ge){for(var ve=new Array(Ge.bitLength()),Be=0;Be<ve.length;Be++){var Re=Be/26|0,Ie=Be%26;ve[Be]=(Ge.words[Re]&1<<Ie)>>>Ie}return ve}ue.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ve=0,Be=0;Be<this.length;Be++){var Re=this._zeroBits(this.words[Be]);if(ve+=Re,Re!==26)break}return ve},ue.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},ue.prototype.toTwos=function(ve){return this.negative!==0?this.abs().inotn(ve).iaddn(1):this.clone()},ue.prototype.fromTwos=function(ve){return this.testn(ve-1)?this.notn(ve).iaddn(1).ineg():this.clone()},ue.prototype.isNeg=function(){return this.negative!==0},ue.prototype.neg=function(){return this.clone().ineg()},ue.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},ue.prototype.iuor=function(ve){for(;this.length<ve.length;)this.words[this.length++]=0;for(var Be=0;Be<ve.length;Be++)this.words[Be]=this.words[Be]|ve.words[Be];return this.strip()},ue.prototype.ior=function(ve){return oe((this.negative|ve.negative)===0),this.iuor(ve)},ue.prototype.or=function(ve){return this.length>ve.length?this.clone().ior(ve):ve.clone().ior(this)},ue.prototype.uor=function(ve){return this.length>ve.length?this.clone().iuor(ve):ve.clone().iuor(this)},ue.prototype.iuand=function(ve){var Be;this.length>ve.length?Be=ve:Be=this;for(var Re=0;Re<Be.length;Re++)this.words[Re]=this.words[Re]&ve.words[Re];return this.length=Be.length,this.strip()},ue.prototype.iand=function(ve){return oe((this.negative|ve.negative)===0),this.iuand(ve)},ue.prototype.and=function(ve){return this.length>ve.length?this.clone().iand(ve):ve.clone().iand(this)},ue.prototype.uand=function(ve){return this.length>ve.length?this.clone().iuand(ve):ve.clone().iuand(this)},ue.prototype.iuxor=function(ve){var Be,Re;this.length>ve.length?(Be=this,Re=ve):(Be=ve,Re=this);for(var Ie=0;Ie<Re.length;Ie++)this.words[Ie]=Be.words[Ie]^Re.words[Ie];if(this!==Be)for(;Ie<Be.length;Ie++)this.words[Ie]=Be.words[Ie];return this.length=Be.length,this.strip()},ue.prototype.ixor=function(ve){return oe((this.negative|ve.negative)===0),this.iuxor(ve)},ue.prototype.xor=function(ve){return this.length>ve.length?this.clone().ixor(ve):ve.clone().ixor(this)},ue.prototype.uxor=function(ve){return this.length>ve.length?this.clone().iuxor(ve):ve.clone().iuxor(this)},ue.prototype.inotn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=Math.ceil(ve/26)|0,Re=ve%26;this._expand(Be),Re>0&&Be--;for(var Ie=0;Ie<Be;Ie++)this.words[Ie]=~this.words[Ie]&67108863;return Re>0&&(this.words[Ie]=~this.words[Ie]&67108863>>26-Re),this.strip()},ue.prototype.notn=function(ve){return this.clone().inotn(ve)},ue.prototype.setn=function(ve,Be){oe(typeof ve=="number"&&ve>=0);var Re=ve/26|0,Ie=ve%26;return this._expand(Re+1),Be?this.words[Re]=this.words[Re]|1<<Ie:this.words[Re]=this.words[Re]&~(1<<Ie),this.strip()},ue.prototype.iadd=function(ve){var Be;if(this.negative!==0&&ve.negative===0)return this.negative=0,Be=this.isub(ve),this.negative^=1,this._normSign();if(this.negative===0&&ve.negative!==0)return ve.negative=0,Be=this.isub(ve),ve.negative=1,Be._normSign();var Re,Ie;this.length>ve.length?(Re=this,Ie=ve):(Re=ve,Ie=this);for(var Fe=0,qe=0;qe<Ie.length;qe++)Be=(Re.words[qe]|0)+(Ie.words[qe]|0)+Fe,this.words[qe]=Be&67108863,Fe=Be>>>26;for(;Fe!==0&&qe<Re.length;qe++)Be=(Re.words[qe]|0)+Fe,this.words[qe]=Be&67108863,Fe=Be>>>26;if(this.length=Re.length,Fe!==0)this.words[this.length]=Fe,this.length++;else if(Re!==this)for(;qe<Re.length;qe++)this.words[qe]=Re.words[qe];return this},ue.prototype.add=function(ve){var Be;return ve.negative!==0&&this.negative===0?(ve.negative=0,Be=this.sub(ve),ve.negative^=1,Be):ve.negative===0&&this.negative!==0?(this.negative=0,Be=ve.sub(this),this.negative=1,Be):this.length>ve.length?this.clone().iadd(ve):ve.clone().iadd(this)},ue.prototype.isub=function(ve){if(ve.negative!==0){ve.negative=0;var Be=this.iadd(ve);return ve.negative=1,Be._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ve),this.negative=1,this._normSign();var Re=this.cmp(ve);if(Re===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ie,Fe;Re>0?(Ie=this,Fe=ve):(Ie=ve,Fe=this);for(var qe=0,We=0;We<Fe.length;We++)Be=(Ie.words[We]|0)-(Fe.words[We]|0)+qe,qe=Be>>26,this.words[We]=Be&67108863;for(;qe!==0&&We<Ie.length;We++)Be=(Ie.words[We]|0)+qe,qe=Be>>26,this.words[We]=Be&67108863;if(qe===0&&We<Ie.length&&Ie!==this)for(;We<Ie.length;We++)this.words[We]=Ie.words[We];return this.length=Math.max(this.length,We),Ie!==this&&(this.negative=1),this.strip()},ue.prototype.sub=function(ve){return this.clone().isub(ve)};function Ne(Ge,ve,Be){Be.negative=ve.negative^Ge.negative;var Re=Ge.length+ve.length|0;Be.length=Re,Re=Re-1|0;var Ie=Ge.words[0]|0,Fe=ve.words[0]|0,qe=Ie*Fe,We=qe&67108863,Ue=qe/67108864|0;Be.words[0]=We;for(var _e=1;_e<Re;_e++){for(var Qe=Ue>>>26,tt=Ue&67108863,it=Math.min(_e,ve.length-1),at=Math.max(0,_e-Ge.length+1);at<=it;at++){var ot=_e-at|0;Ie=Ge.words[ot]|0,Fe=ve.words[at]|0,qe=Ie*Fe+tt,Qe+=qe/67108864|0,tt=qe&67108863}Be.words[_e]=tt|0,Ue=Qe|0}return Ue!==0?Be.words[_e]=Ue|0:Be.length--,Be.strip()}var $e=function(ve,Be,Re){var Ie=ve.words,Fe=Be.words,qe=Re.words,We=0,Ue,_e,Qe,tt=Ie[0]|0,it=tt&8191,at=tt>>>13,ot=Ie[1]|0,lt=ot&8191,st=ot>>>13,ut=Ie[2]|0,ft=ut&8191,dt=ut>>>13,Bt=Ie[3]|0,pt=Bt&8191,mt=Bt>>>13,bt=Ie[4]|0,xt=bt&8191,yt=bt>>>13,It=Ie[5]|0,ht=It&8191,gt=It>>>13,Pt=Ie[6]|0,wt=Pt&8191,St=Pt>>>13,Zt=Ie[7]|0,Ct=Zt&8191,Rt=Zt>>>13,dr=Ie[8]|0,Dt=dr&8191,Tt=dr>>>13,or=Ie[9]|0,Mt=or&8191,kt=or>>>13,ur=Fe[0]|0,$t=ur&8191,jt=ur>>>13,nr=Fe[1]|0,Ot=nr&8191,Lt=nr>>>13,lr=Fe[2]|0,Ht=lr&8191,qt=lr>>>13,tr=Fe[3]|0,Vt=tr&8191,Gt=tr>>>13,br=Fe[4]|0,Yt=br&8191,Kt=br>>>13,yr=Fe[5]|0,zt=yr&8191,Jt=yr>>>13,xr=Fe[6]|0,Xt=xr&8191,ir=xr>>>13,Mr=Fe[7]|0,er=Mr&8191,fr=Mr>>>13,Qr=Fe[8]|0,sr=Qr&8191,Ar=Qr>>>13,Kr=Fe[9]|0,ar=Kr&8191,hr=Kr>>>13;Re.negative=ve.negative^Be.negative,Re.length=19,Ue=Math.imul(it,$t),_e=Math.imul(it,jt),_e=_e+Math.imul(at,$t)|0,Qe=Math.imul(at,jt);var Lr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,Ue=Math.imul(lt,$t),_e=Math.imul(lt,jt),_e=_e+Math.imul(st,$t)|0,Qe=Math.imul(st,jt),Ue=Ue+Math.imul(it,Ot)|0,_e=_e+Math.imul(it,Lt)|0,_e=_e+Math.imul(at,Ot)|0,Qe=Qe+Math.imul(at,Lt)|0;var Pr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,Ue=Math.imul(ft,$t),_e=Math.imul(ft,jt),_e=_e+Math.imul(dt,$t)|0,Qe=Math.imul(dt,jt),Ue=Ue+Math.imul(lt,Ot)|0,_e=_e+Math.imul(lt,Lt)|0,_e=_e+Math.imul(st,Ot)|0,Qe=Qe+Math.imul(st,Lt)|0,Ue=Ue+Math.imul(it,Ht)|0,_e=_e+Math.imul(it,qt)|0,_e=_e+Math.imul(at,Ht)|0,Qe=Qe+Math.imul(at,qt)|0;var Yr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,Ue=Math.imul(pt,$t),_e=Math.imul(pt,jt),_e=_e+Math.imul(mt,$t)|0,Qe=Math.imul(mt,jt),Ue=Ue+Math.imul(ft,Ot)|0,_e=_e+Math.imul(ft,Lt)|0,_e=_e+Math.imul(dt,Ot)|0,Qe=Qe+Math.imul(dt,Lt)|0,Ue=Ue+Math.imul(lt,Ht)|0,_e=_e+Math.imul(lt,qt)|0,_e=_e+Math.imul(st,Ht)|0,Qe=Qe+Math.imul(st,qt)|0,Ue=Ue+Math.imul(it,Vt)|0,_e=_e+Math.imul(it,Gt)|0,_e=_e+Math.imul(at,Vt)|0,Qe=Qe+Math.imul(at,Gt)|0;var Wr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,Ue=Math.imul(xt,$t),_e=Math.imul(xt,jt),_e=_e+Math.imul(yt,$t)|0,Qe=Math.imul(yt,jt),Ue=Ue+Math.imul(pt,Ot)|0,_e=_e+Math.imul(pt,Lt)|0,_e=_e+Math.imul(mt,Ot)|0,Qe=Qe+Math.imul(mt,Lt)|0,Ue=Ue+Math.imul(ft,Ht)|0,_e=_e+Math.imul(ft,qt)|0,_e=_e+Math.imul(dt,Ht)|0,Qe=Qe+Math.imul(dt,qt)|0,Ue=Ue+Math.imul(lt,Vt)|0,_e=_e+Math.imul(lt,Gt)|0,_e=_e+Math.imul(st,Vt)|0,Qe=Qe+Math.imul(st,Gt)|0,Ue=Ue+Math.imul(it,Yt)|0,_e=_e+Math.imul(it,Kt)|0,_e=_e+Math.imul(at,Yt)|0,Qe=Qe+Math.imul(at,Kt)|0;var Zr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,Ue=Math.imul(ht,$t),_e=Math.imul(ht,jt),_e=_e+Math.imul(gt,$t)|0,Qe=Math.imul(gt,jt),Ue=Ue+Math.imul(xt,Ot)|0,_e=_e+Math.imul(xt,Lt)|0,_e=_e+Math.imul(yt,Ot)|0,Qe=Qe+Math.imul(yt,Lt)|0,Ue=Ue+Math.imul(pt,Ht)|0,_e=_e+Math.imul(pt,qt)|0,_e=_e+Math.imul(mt,Ht)|0,Qe=Qe+Math.imul(mt,qt)|0,Ue=Ue+Math.imul(ft,Vt)|0,_e=_e+Math.imul(ft,Gt)|0,_e=_e+Math.imul(dt,Vt)|0,Qe=Qe+Math.imul(dt,Gt)|0,Ue=Ue+Math.imul(lt,Yt)|0,_e=_e+Math.imul(lt,Kt)|0,_e=_e+Math.imul(st,Yt)|0,Qe=Qe+Math.imul(st,Kt)|0,Ue=Ue+Math.imul(it,zt)|0,_e=_e+Math.imul(it,Jt)|0,_e=_e+Math.imul(at,zt)|0,Qe=Qe+Math.imul(at,Jt)|0;var Jr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,Ue=Math.imul(wt,$t),_e=Math.imul(wt,jt),_e=_e+Math.imul(St,$t)|0,Qe=Math.imul(St,jt),Ue=Ue+Math.imul(ht,Ot)|0,_e=_e+Math.imul(ht,Lt)|0,_e=_e+Math.imul(gt,Ot)|0,Qe=Qe+Math.imul(gt,Lt)|0,Ue=Ue+Math.imul(xt,Ht)|0,_e=_e+Math.imul(xt,qt)|0,_e=_e+Math.imul(yt,Ht)|0,Qe=Qe+Math.imul(yt,qt)|0,Ue=Ue+Math.imul(pt,Vt)|0,_e=_e+Math.imul(pt,Gt)|0,_e=_e+Math.imul(mt,Vt)|0,Qe=Qe+Math.imul(mt,Gt)|0,Ue=Ue+Math.imul(ft,Yt)|0,_e=_e+Math.imul(ft,Kt)|0,_e=_e+Math.imul(dt,Yt)|0,Qe=Qe+Math.imul(dt,Kt)|0,Ue=Ue+Math.imul(lt,zt)|0,_e=_e+Math.imul(lt,Jt)|0,_e=_e+Math.imul(st,zt)|0,Qe=Qe+Math.imul(st,Jt)|0,Ue=Ue+Math.imul(it,Xt)|0,_e=_e+Math.imul(it,ir)|0,_e=_e+Math.imul(at,Xt)|0,Qe=Qe+Math.imul(at,ir)|0;var Gr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,Ue=Math.imul(Ct,$t),_e=Math.imul(Ct,jt),_e=_e+Math.imul(Rt,$t)|0,Qe=Math.imul(Rt,jt),Ue=Ue+Math.imul(wt,Ot)|0,_e=_e+Math.imul(wt,Lt)|0,_e=_e+Math.imul(St,Ot)|0,Qe=Qe+Math.imul(St,Lt)|0,Ue=Ue+Math.imul(ht,Ht)|0,_e=_e+Math.imul(ht,qt)|0,_e=_e+Math.imul(gt,Ht)|0,Qe=Qe+Math.imul(gt,qt)|0,Ue=Ue+Math.imul(xt,Vt)|0,_e=_e+Math.imul(xt,Gt)|0,_e=_e+Math.imul(yt,Vt)|0,Qe=Qe+Math.imul(yt,Gt)|0,Ue=Ue+Math.imul(pt,Yt)|0,_e=_e+Math.imul(pt,Kt)|0,_e=_e+Math.imul(mt,Yt)|0,Qe=Qe+Math.imul(mt,Kt)|0,Ue=Ue+Math.imul(ft,zt)|0,_e=_e+Math.imul(ft,Jt)|0,_e=_e+Math.imul(dt,zt)|0,Qe=Qe+Math.imul(dt,Jt)|0,Ue=Ue+Math.imul(lt,Xt)|0,_e=_e+Math.imul(lt,ir)|0,_e=_e+Math.imul(st,Xt)|0,Qe=Qe+Math.imul(st,ir)|0,Ue=Ue+Math.imul(it,er)|0,_e=_e+Math.imul(it,fr)|0,_e=_e+Math.imul(at,er)|0,Qe=Qe+Math.imul(at,fr)|0;var sn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(sn>>>26)|0,sn&=67108863,Ue=Math.imul(Dt,$t),_e=Math.imul(Dt,jt),_e=_e+Math.imul(Tt,$t)|0,Qe=Math.imul(Tt,jt),Ue=Ue+Math.imul(Ct,Ot)|0,_e=_e+Math.imul(Ct,Lt)|0,_e=_e+Math.imul(Rt,Ot)|0,Qe=Qe+Math.imul(Rt,Lt)|0,Ue=Ue+Math.imul(wt,Ht)|0,_e=_e+Math.imul(wt,qt)|0,_e=_e+Math.imul(St,Ht)|0,Qe=Qe+Math.imul(St,qt)|0,Ue=Ue+Math.imul(ht,Vt)|0,_e=_e+Math.imul(ht,Gt)|0,_e=_e+Math.imul(gt,Vt)|0,Qe=Qe+Math.imul(gt,Gt)|0,Ue=Ue+Math.imul(xt,Yt)|0,_e=_e+Math.imul(xt,Kt)|0,_e=_e+Math.imul(yt,Yt)|0,Qe=Qe+Math.imul(yt,Kt)|0,Ue=Ue+Math.imul(pt,zt)|0,_e=_e+Math.imul(pt,Jt)|0,_e=_e+Math.imul(mt,zt)|0,Qe=Qe+Math.imul(mt,Jt)|0,Ue=Ue+Math.imul(ft,Xt)|0,_e=_e+Math.imul(ft,ir)|0,_e=_e+Math.imul(dt,Xt)|0,Qe=Qe+Math.imul(dt,ir)|0,Ue=Ue+Math.imul(lt,er)|0,_e=_e+Math.imul(lt,fr)|0,_e=_e+Math.imul(st,er)|0,Qe=Qe+Math.imul(st,fr)|0,Ue=Ue+Math.imul(it,sr)|0,_e=_e+Math.imul(it,Ar)|0,_e=_e+Math.imul(at,sr)|0,Qe=Qe+Math.imul(at,Ar)|0;var ln=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(ln>>>26)|0,ln&=67108863,Ue=Math.imul(Mt,$t),_e=Math.imul(Mt,jt),_e=_e+Math.imul(kt,$t)|0,Qe=Math.imul(kt,jt),Ue=Ue+Math.imul(Dt,Ot)|0,_e=_e+Math.imul(Dt,Lt)|0,_e=_e+Math.imul(Tt,Ot)|0,Qe=Qe+Math.imul(Tt,Lt)|0,Ue=Ue+Math.imul(Ct,Ht)|0,_e=_e+Math.imul(Ct,qt)|0,_e=_e+Math.imul(Rt,Ht)|0,Qe=Qe+Math.imul(Rt,qt)|0,Ue=Ue+Math.imul(wt,Vt)|0,_e=_e+Math.imul(wt,Gt)|0,_e=_e+Math.imul(St,Vt)|0,Qe=Qe+Math.imul(St,Gt)|0,Ue=Ue+Math.imul(ht,Yt)|0,_e=_e+Math.imul(ht,Kt)|0,_e=_e+Math.imul(gt,Yt)|0,Qe=Qe+Math.imul(gt,Kt)|0,Ue=Ue+Math.imul(xt,zt)|0,_e=_e+Math.imul(xt,Jt)|0,_e=_e+Math.imul(yt,zt)|0,Qe=Qe+Math.imul(yt,Jt)|0,Ue=Ue+Math.imul(pt,Xt)|0,_e=_e+Math.imul(pt,ir)|0,_e=_e+Math.imul(mt,Xt)|0,Qe=Qe+Math.imul(mt,ir)|0,Ue=Ue+Math.imul(ft,er)|0,_e=_e+Math.imul(ft,fr)|0,_e=_e+Math.imul(dt,er)|0,Qe=Qe+Math.imul(dt,fr)|0,Ue=Ue+Math.imul(lt,sr)|0,_e=_e+Math.imul(lt,Ar)|0,_e=_e+Math.imul(st,sr)|0,Qe=Qe+Math.imul(st,Ar)|0,Ue=Ue+Math.imul(it,ar)|0,_e=_e+Math.imul(it,hr)|0,_e=_e+Math.imul(at,ar)|0,Qe=Qe+Math.imul(at,hr)|0;var hn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(hn>>>26)|0,hn&=67108863,Ue=Math.imul(Mt,Ot),_e=Math.imul(Mt,Lt),_e=_e+Math.imul(kt,Ot)|0,Qe=Math.imul(kt,Lt),Ue=Ue+Math.imul(Dt,Ht)|0,_e=_e+Math.imul(Dt,qt)|0,_e=_e+Math.imul(Tt,Ht)|0,Qe=Qe+Math.imul(Tt,qt)|0,Ue=Ue+Math.imul(Ct,Vt)|0,_e=_e+Math.imul(Ct,Gt)|0,_e=_e+Math.imul(Rt,Vt)|0,Qe=Qe+Math.imul(Rt,Gt)|0,Ue=Ue+Math.imul(wt,Yt)|0,_e=_e+Math.imul(wt,Kt)|0,_e=_e+Math.imul(St,Yt)|0,Qe=Qe+Math.imul(St,Kt)|0,Ue=Ue+Math.imul(ht,zt)|0,_e=_e+Math.imul(ht,Jt)|0,_e=_e+Math.imul(gt,zt)|0,Qe=Qe+Math.imul(gt,Jt)|0,Ue=Ue+Math.imul(xt,Xt)|0,_e=_e+Math.imul(xt,ir)|0,_e=_e+Math.imul(yt,Xt)|0,Qe=Qe+Math.imul(yt,ir)|0,Ue=Ue+Math.imul(pt,er)|0,_e=_e+Math.imul(pt,fr)|0,_e=_e+Math.imul(mt,er)|0,Qe=Qe+Math.imul(mt,fr)|0,Ue=Ue+Math.imul(ft,sr)|0,_e=_e+Math.imul(ft,Ar)|0,_e=_e+Math.imul(dt,sr)|0,Qe=Qe+Math.imul(dt,Ar)|0,Ue=Ue+Math.imul(lt,ar)|0,_e=_e+Math.imul(lt,hr)|0,_e=_e+Math.imul(st,ar)|0,Qe=Qe+Math.imul(st,hr)|0;var pn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(pn>>>26)|0,pn&=67108863,Ue=Math.imul(Mt,Ht),_e=Math.imul(Mt,qt),_e=_e+Math.imul(kt,Ht)|0,Qe=Math.imul(kt,qt),Ue=Ue+Math.imul(Dt,Vt)|0,_e=_e+Math.imul(Dt,Gt)|0,_e=_e+Math.imul(Tt,Vt)|0,Qe=Qe+Math.imul(Tt,Gt)|0,Ue=Ue+Math.imul(Ct,Yt)|0,_e=_e+Math.imul(Ct,Kt)|0,_e=_e+Math.imul(Rt,Yt)|0,Qe=Qe+Math.imul(Rt,Kt)|0,Ue=Ue+Math.imul(wt,zt)|0,_e=_e+Math.imul(wt,Jt)|0,_e=_e+Math.imul(St,zt)|0,Qe=Qe+Math.imul(St,Jt)|0,Ue=Ue+Math.imul(ht,Xt)|0,_e=_e+Math.imul(ht,ir)|0,_e=_e+Math.imul(gt,Xt)|0,Qe=Qe+Math.imul(gt,ir)|0,Ue=Ue+Math.imul(xt,er)|0,_e=_e+Math.imul(xt,fr)|0,_e=_e+Math.imul(yt,er)|0,Qe=Qe+Math.imul(yt,fr)|0,Ue=Ue+Math.imul(pt,sr)|0,_e=_e+Math.imul(pt,Ar)|0,_e=_e+Math.imul(mt,sr)|0,Qe=Qe+Math.imul(mt,Ar)|0,Ue=Ue+Math.imul(ft,ar)|0,_e=_e+Math.imul(ft,hr)|0,_e=_e+Math.imul(dt,ar)|0,Qe=Qe+Math.imul(dt,hr)|0;var Xr=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,Ue=Math.imul(Mt,Vt),_e=Math.imul(Mt,Gt),_e=_e+Math.imul(kt,Vt)|0,Qe=Math.imul(kt,Gt),Ue=Ue+Math.imul(Dt,Yt)|0,_e=_e+Math.imul(Dt,Kt)|0,_e=_e+Math.imul(Tt,Yt)|0,Qe=Qe+Math.imul(Tt,Kt)|0,Ue=Ue+Math.imul(Ct,zt)|0,_e=_e+Math.imul(Ct,Jt)|0,_e=_e+Math.imul(Rt,zt)|0,Qe=Qe+Math.imul(Rt,Jt)|0,Ue=Ue+Math.imul(wt,Xt)|0,_e=_e+Math.imul(wt,ir)|0,_e=_e+Math.imul(St,Xt)|0,Qe=Qe+Math.imul(St,ir)|0,Ue=Ue+Math.imul(ht,er)|0,_e=_e+Math.imul(ht,fr)|0,_e=_e+Math.imul(gt,er)|0,Qe=Qe+Math.imul(gt,fr)|0,Ue=Ue+Math.imul(xt,sr)|0,_e=_e+Math.imul(xt,Ar)|0,_e=_e+Math.imul(yt,sr)|0,Qe=Qe+Math.imul(yt,Ar)|0,Ue=Ue+Math.imul(pt,ar)|0,_e=_e+Math.imul(pt,hr)|0,_e=_e+Math.imul(mt,ar)|0,Qe=Qe+Math.imul(mt,hr)|0;var yn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(yn>>>26)|0,yn&=67108863,Ue=Math.imul(Mt,Yt),_e=Math.imul(Mt,Kt),_e=_e+Math.imul(kt,Yt)|0,Qe=Math.imul(kt,Kt),Ue=Ue+Math.imul(Dt,zt)|0,_e=_e+Math.imul(Dt,Jt)|0,_e=_e+Math.imul(Tt,zt)|0,Qe=Qe+Math.imul(Tt,Jt)|0,Ue=Ue+Math.imul(Ct,Xt)|0,_e=_e+Math.imul(Ct,ir)|0,_e=_e+Math.imul(Rt,Xt)|0,Qe=Qe+Math.imul(Rt,ir)|0,Ue=Ue+Math.imul(wt,er)|0,_e=_e+Math.imul(wt,fr)|0,_e=_e+Math.imul(St,er)|0,Qe=Qe+Math.imul(St,fr)|0,Ue=Ue+Math.imul(ht,sr)|0,_e=_e+Math.imul(ht,Ar)|0,_e=_e+Math.imul(gt,sr)|0,Qe=Qe+Math.imul(gt,Ar)|0,Ue=Ue+Math.imul(xt,ar)|0,_e=_e+Math.imul(xt,hr)|0,_e=_e+Math.imul(yt,ar)|0,Qe=Qe+Math.imul(yt,hr)|0;var xn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(xn>>>26)|0,xn&=67108863,Ue=Math.imul(Mt,zt),_e=Math.imul(Mt,Jt),_e=_e+Math.imul(kt,zt)|0,Qe=Math.imul(kt,Jt),Ue=Ue+Math.imul(Dt,Xt)|0,_e=_e+Math.imul(Dt,ir)|0,_e=_e+Math.imul(Tt,Xt)|0,Qe=Qe+Math.imul(Tt,ir)|0,Ue=Ue+Math.imul(Ct,er)|0,_e=_e+Math.imul(Ct,fr)|0,_e=_e+Math.imul(Rt,er)|0,Qe=Qe+Math.imul(Rt,fr)|0,Ue=Ue+Math.imul(wt,sr)|0,_e=_e+Math.imul(wt,Ar)|0,_e=_e+Math.imul(St,sr)|0,Qe=Qe+Math.imul(St,Ar)|0,Ue=Ue+Math.imul(ht,ar)|0,_e=_e+Math.imul(ht,hr)|0,_e=_e+Math.imul(gt,ar)|0,Qe=Qe+Math.imul(gt,hr)|0;var dn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(dn>>>26)|0,dn&=67108863,Ue=Math.imul(Mt,Xt),_e=Math.imul(Mt,ir),_e=_e+Math.imul(kt,Xt)|0,Qe=Math.imul(kt,ir),Ue=Ue+Math.imul(Dt,er)|0,_e=_e+Math.imul(Dt,fr)|0,_e=_e+Math.imul(Tt,er)|0,Qe=Qe+Math.imul(Tt,fr)|0,Ue=Ue+Math.imul(Ct,sr)|0,_e=_e+Math.imul(Ct,Ar)|0,_e=_e+Math.imul(Rt,sr)|0,Qe=Qe+Math.imul(Rt,Ar)|0,Ue=Ue+Math.imul(wt,ar)|0,_e=_e+Math.imul(wt,hr)|0,_e=_e+Math.imul(St,ar)|0,Qe=Qe+Math.imul(St,hr)|0;var cn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(cn>>>26)|0,cn&=67108863,Ue=Math.imul(Mt,er),_e=Math.imul(Mt,fr),_e=_e+Math.imul(kt,er)|0,Qe=Math.imul(kt,fr),Ue=Ue+Math.imul(Dt,sr)|0,_e=_e+Math.imul(Dt,Ar)|0,_e=_e+Math.imul(Tt,sr)|0,Qe=Qe+Math.imul(Tt,Ar)|0,Ue=Ue+Math.imul(Ct,ar)|0,_e=_e+Math.imul(Ct,hr)|0,_e=_e+Math.imul(Rt,ar)|0,Qe=Qe+Math.imul(Rt,hr)|0;var wn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(wn>>>26)|0,wn&=67108863,Ue=Math.imul(Mt,sr),_e=Math.imul(Mt,Ar),_e=_e+Math.imul(kt,sr)|0,Qe=Math.imul(kt,Ar),Ue=Ue+Math.imul(Dt,ar)|0,_e=_e+Math.imul(Dt,hr)|0,_e=_e+Math.imul(Tt,ar)|0,Qe=Qe+Math.imul(Tt,hr)|0;var Cn=(We+Ue|0)+((_e&8191)<<13)|0;We=(Qe+(_e>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Ue=Math.imul(Mt,ar),_e=Math.imul(Mt,hr),_e=_e+Math.imul(kt,ar)|0,Qe=Math.imul(kt,hr);var Rr=(We+Ue|0)+((_e&8191)<<13)|0;return We=(Qe+(_e>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,qe[0]=Lr,qe[1]=Pr,qe[2]=Yr,qe[3]=Wr,qe[4]=Zr,qe[5]=Jr,qe[6]=Gr,qe[7]=sn,qe[8]=ln,qe[9]=hn,qe[10]=pn,qe[11]=Xr,qe[12]=yn,qe[13]=xn,qe[14]=dn,qe[15]=cn,qe[16]=wn,qe[17]=Cn,qe[18]=Rr,We!==0&&(qe[19]=We,Re.length++),Re};Math.imul||($e=Ne);function ke(Ge,ve,Be){Be.negative=ve.negative^Ge.negative,Be.length=Ge.length+ve.length;for(var Re=0,Ie=0,Fe=0;Fe<Be.length-1;Fe++){var qe=Ie;Ie=0;for(var We=Re&67108863,Ue=Math.min(Fe,ve.length-1),_e=Math.max(0,Fe-Ge.length+1);_e<=Ue;_e++){var Qe=Fe-_e,tt=Ge.words[Qe]|0,it=ve.words[_e]|0,at=tt*it,ot=at&67108863;qe=qe+(at/67108864|0)|0,ot=ot+We|0,We=ot&67108863,qe=qe+(ot>>>26)|0,Ie+=qe>>>26,qe&=67108863}Be.words[Fe]=We,Re=qe,qe=Ie}return Re!==0?Be.words[Fe]=Re:Be.length--,Be.strip()}function je(Ge,ve,Be){var Re=new Ke;return Re.mulp(Ge,ve,Be)}ue.prototype.mulTo=function(ve,Be){var Re,Ie=this.length+ve.length;return this.length===10&&ve.length===10?Re=$e(this,ve,Be):Ie<63?Re=Ne(this,ve,Be):Ie<1024?Re=ke(this,ve,Be):Re=je(this,ve,Be),Re};function Ke(Ge,ve){this.x=Ge,this.y=ve}Ke.prototype.makeRBT=function(ve){for(var Be=new Array(ve),Re=ue.prototype._countBits(ve)-1,Ie=0;Ie<ve;Ie++)Be[Ie]=this.revBin(Ie,Re,ve);return Be},Ke.prototype.revBin=function(ve,Be,Re){if(ve===0||ve===Re-1)return ve;for(var Ie=0,Fe=0;Fe<Be;Fe++)Ie|=(ve&1)<<Be-Fe-1,ve>>=1;return Ie},Ke.prototype.permute=function(ve,Be,Re,Ie,Fe,qe){for(var We=0;We<qe;We++)Ie[We]=Be[ve[We]],Fe[We]=Re[ve[We]]},Ke.prototype.transform=function(ve,Be,Re,Ie,Fe,qe){this.permute(qe,ve,Be,Re,Ie,Fe);for(var We=1;We<Fe;We<<=1)for(var Ue=We<<1,_e=Math.cos(2*Math.PI/Ue),Qe=Math.sin(2*Math.PI/Ue),tt=0;tt<Fe;tt+=Ue)for(var it=_e,at=Qe,ot=0;ot<We;ot++){var lt=Re[tt+ot],st=Ie[tt+ot],ut=Re[tt+ot+We],ft=Ie[tt+ot+We],dt=it*ut-at*ft;ft=it*ft+at*ut,ut=dt,Re[tt+ot]=lt+ut,Ie[tt+ot]=st+ft,Re[tt+ot+We]=lt-ut,Ie[tt+ot+We]=st-ft,ot!==Ue&&(dt=_e*it-Qe*at,at=_e*at+Qe*it,it=dt)}},Ke.prototype.guessLen13b=function(ve,Be){var Re=Math.max(Be,ve)|1,Ie=Re&1,Fe=0;for(Re=Re/2|0;Re;Re=Re>>>1)Fe++;return 1<<Fe+1+Ie},Ke.prototype.conjugate=function(ve,Be,Re){if(!(Re<=1))for(var Ie=0;Ie<Re/2;Ie++){var Fe=ve[Ie];ve[Ie]=ve[Re-Ie-1],ve[Re-Ie-1]=Fe,Fe=Be[Ie],Be[Ie]=-Be[Re-Ie-1],Be[Re-Ie-1]=-Fe}},Ke.prototype.normalize13b=function(ve,Be){for(var Re=0,Ie=0;Ie<Be/2;Ie++){var Fe=Math.round(ve[2*Ie+1]/Be)*8192+Math.round(ve[2*Ie]/Be)+Re;ve[Ie]=Fe&67108863,Fe<67108864?Re=0:Re=Fe/67108864|0}return ve},Ke.prototype.convert13b=function(ve,Be,Re,Ie){for(var Fe=0,qe=0;qe<Be;qe++)Fe=Fe+(ve[qe]|0),Re[2*qe]=Fe&8191,Fe=Fe>>>13,Re[2*qe+1]=Fe&8191,Fe=Fe>>>13;for(qe=2*Be;qe<Ie;++qe)Re[qe]=0;oe(Fe===0),oe((Fe&-8192)===0)},Ke.prototype.stub=function(ve){for(var Be=new Array(ve),Re=0;Re<ve;Re++)Be[Re]=0;return Be},Ke.prototype.mulp=function(ve,Be,Re){var Ie=2*this.guessLen13b(ve.length,Be.length),Fe=this.makeRBT(Ie),qe=this.stub(Ie),We=new Array(Ie),Ue=new Array(Ie),_e=new Array(Ie),Qe=new Array(Ie),tt=new Array(Ie),it=new Array(Ie),at=Re.words;at.length=Ie,this.convert13b(ve.words,ve.length,We,Ie),this.convert13b(Be.words,Be.length,Qe,Ie),this.transform(We,qe,Ue,_e,Ie,Fe),this.transform(Qe,qe,tt,it,Ie,Fe);for(var ot=0;ot<Ie;ot++){var lt=Ue[ot]*tt[ot]-_e[ot]*it[ot];_e[ot]=Ue[ot]*it[ot]+_e[ot]*tt[ot],Ue[ot]=lt}return this.conjugate(Ue,_e,Ie),this.transform(Ue,_e,at,qe,Ie,Fe),this.conjugate(at,qe,Ie),this.normalize13b(at,Ie),Re.negative=ve.negative^Be.negative,Re.length=ve.length+Be.length,Re.strip()},ue.prototype.mul=function(ve){var Be=new ue(null);return Be.words=new Array(this.length+ve.length),this.mulTo(ve,Be)},ue.prototype.mulf=function(ve){var Be=new ue(null);return Be.words=new Array(this.length+ve.length),je(this,ve,Be)},ue.prototype.imul=function(ve){return this.clone().mulTo(ve,this)},ue.prototype.imuln=function(ve){oe(typeof ve=="number"),oe(ve<67108864);for(var Be=0,Re=0;Re<this.length;Re++){var Ie=(this.words[Re]|0)*ve,Fe=(Ie&67108863)+(Be&67108863);Be>>=26,Be+=Ie/67108864|0,Be+=Fe>>>26,this.words[Re]=Fe&67108863}return Be!==0&&(this.words[Re]=Be,this.length++),this},ue.prototype.muln=function(ve){return this.clone().imuln(ve)},ue.prototype.sqr=function(){return this.mul(this)},ue.prototype.isqr=function(){return this.imul(this.clone())},ue.prototype.pow=function(ve){var Be=Te(ve);if(Be.length===0)return new ue(1);for(var Re=this,Ie=0;Ie<Be.length&&Be[Ie]===0;Ie++,Re=Re.sqr());if(++Ie<Be.length)for(var Fe=Re.sqr();Ie<Be.length;Ie++,Fe=Fe.sqr())Be[Ie]!==0&&(Re=Re.mul(Fe));return Re},ue.prototype.iushln=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26,Ie=67108863>>>26-Be<<26-Be,Fe;if(Be!==0){var qe=0;for(Fe=0;Fe<this.length;Fe++){var We=this.words[Fe]&Ie,Ue=(this.words[Fe]|0)-We<<Be;this.words[Fe]=Ue|qe,qe=We>>>26-Be}qe&&(this.words[Fe]=qe,this.length++)}if(Re!==0){for(Fe=this.length-1;Fe>=0;Fe--)this.words[Fe+Re]=this.words[Fe];for(Fe=0;Fe<Re;Fe++)this.words[Fe]=0;this.length+=Re}return this.strip()},ue.prototype.ishln=function(ve){return oe(this.negative===0),this.iushln(ve)},ue.prototype.iushrn=function(ve,Be,Re){oe(typeof ve=="number"&&ve>=0);var Ie;Be?Ie=(Be-Be%26)/26:Ie=0;var Fe=ve%26,qe=Math.min((ve-Fe)/26,this.length),We=67108863^67108863>>>Fe<<Fe,Ue=Re;if(Ie-=qe,Ie=Math.max(0,Ie),Ue){for(var _e=0;_e<qe;_e++)Ue.words[_e]=this.words[_e];Ue.length=qe}if(qe!==0)if(this.length>qe)for(this.length-=qe,_e=0;_e<this.length;_e++)this.words[_e]=this.words[_e+qe];else this.words[0]=0,this.length=1;var Qe=0;for(_e=this.length-1;_e>=0&&(Qe!==0||_e>=Ie);_e--){var tt=this.words[_e]|0;this.words[_e]=Qe<<26-Fe|tt>>>Fe,Qe=tt&We}return Ue&&Qe!==0&&(Ue.words[Ue.length++]=Qe),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},ue.prototype.ishrn=function(ve,Be,Re){return oe(this.negative===0),this.iushrn(ve,Be,Re)},ue.prototype.shln=function(ve){return this.clone().ishln(ve)},ue.prototype.ushln=function(ve){return this.clone().iushln(ve)},ue.prototype.shrn=function(ve){return this.clone().ishrn(ve)},ue.prototype.ushrn=function(ve){return this.clone().iushrn(ve)},ue.prototype.testn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26,Ie=1<<Be;if(this.length<=Re)return!1;var Fe=this.words[Re];return!!(Fe&Ie)},ue.prototype.imaskn=function(ve){oe(typeof ve=="number"&&ve>=0);var Be=ve%26,Re=(ve-Be)/26;if(oe(this.negative===0,"imaskn works only with positive numbers"),this.length<=Re)return this;if(Be!==0&&Re++,this.length=Math.min(Re,this.length),Be!==0){var Ie=67108863^67108863>>>Be<<Be;this.words[this.length-1]&=Ie}return this.strip()},ue.prototype.maskn=function(ve){return this.clone().imaskn(ve)},ue.prototype.iaddn=function(ve){return oe(typeof ve=="number"),oe(ve<67108864),ve<0?this.isubn(-ve):this.negative!==0?this.length===1&&(this.words[0]|0)<ve?(this.words[0]=ve-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ve),this.negative=1,this):this._iaddn(ve)},ue.prototype._iaddn=function(ve){this.words[0]+=ve;for(var Be=0;Be<this.length&&this.words[Be]>=67108864;Be++)this.words[Be]-=67108864,Be===this.length-1?this.words[Be+1]=1:this.words[Be+1]++;return this.length=Math.max(this.length,Be+1),this},ue.prototype.isubn=function(ve){if(oe(typeof ve=="number"),oe(ve<67108864),ve<0)return this.iaddn(-ve);if(this.negative!==0)return this.negative=0,this.iaddn(ve),this.negative=1,this;if(this.words[0]-=ve,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Be=0;Be<this.length&&this.words[Be]<0;Be++)this.words[Be]+=67108864,this.words[Be+1]-=1;return this.strip()},ue.prototype.addn=function(ve){return this.clone().iaddn(ve)},ue.prototype.subn=function(ve){return this.clone().isubn(ve)},ue.prototype.iabs=function(){return this.negative=0,this},ue.prototype.abs=function(){return this.clone().iabs()},ue.prototype._ishlnsubmul=function(ve,Be,Re){var Ie=ve.length+Re,Fe;this._expand(Ie);var qe,We=0;for(Fe=0;Fe<ve.length;Fe++){qe=(this.words[Fe+Re]|0)+We;var Ue=(ve.words[Fe]|0)*Be;qe-=Ue&67108863,We=(qe>>26)-(Ue/67108864|0),this.words[Fe+Re]=qe&67108863}for(;Fe<this.length-Re;Fe++)qe=(this.words[Fe+Re]|0)+We,We=qe>>26,this.words[Fe+Re]=qe&67108863;if(We===0)return this.strip();for(oe(We===-1),We=0,Fe=0;Fe<this.length;Fe++)qe=-(this.words[Fe]|0)+We,We=qe>>26,this.words[Fe]=qe&67108863;return this.negative=1,this.strip()},ue.prototype._wordDiv=function(ve,Be){var Re=this.length-ve.length,Ie=this.clone(),Fe=ve,qe=Fe.words[Fe.length-1]|0,We=this._countBits(qe);Re=26-We,Re!==0&&(Fe=Fe.ushln(Re),Ie.iushln(Re),qe=Fe.words[Fe.length-1]|0);var Ue=Ie.length-Fe.length,_e;if(Be!=="mod"){_e=new ue(null),_e.length=Ue+1,_e.words=new Array(_e.length);for(var Qe=0;Qe<_e.length;Qe++)_e.words[Qe]=0}var tt=Ie.clone()._ishlnsubmul(Fe,1,Ue);tt.negative===0&&(Ie=tt,_e&&(_e.words[Ue]=1));for(var it=Ue-1;it>=0;it--){var at=(Ie.words[Fe.length+it]|0)*67108864+(Ie.words[Fe.length+it-1]|0);for(at=Math.min(at/qe|0,67108863),Ie._ishlnsubmul(Fe,at,it);Ie.negative!==0;)at--,Ie.negative=0,Ie._ishlnsubmul(Fe,1,it),Ie.isZero()||(Ie.negative^=1);_e&&(_e.words[it]=at)}return _e&&_e.strip(),Ie.strip(),Be!=="div"&&Re!==0&&Ie.iushrn(Re),{div:_e||null,mod:Ie}},ue.prototype.divmod=function(ve,Be,Re){if(oe(!ve.isZero()),this.isZero())return{div:new ue(0),mod:new ue(0)};var Ie,Fe,qe;return this.negative!==0&&ve.negative===0?(qe=this.neg().divmod(ve,Be),Be!=="mod"&&(Ie=qe.div.neg()),Be!=="div"&&(Fe=qe.mod.neg(),Re&&Fe.negative!==0&&Fe.iadd(ve)),{div:Ie,mod:Fe}):this.negative===0&&ve.negative!==0?(qe=this.divmod(ve.neg(),Be),Be!=="mod"&&(Ie=qe.div.neg()),{div:Ie,mod:qe.mod}):this.negative&ve.negative?(qe=this.neg().divmod(ve.neg(),Be),Be!=="div"&&(Fe=qe.mod.neg(),Re&&Fe.negative!==0&&Fe.isub(ve)),{div:qe.div,mod:Fe}):ve.length>this.length||this.cmp(ve)<0?{div:new ue(0),mod:this}:ve.length===1?Be==="div"?{div:this.divn(ve.words[0]),mod:null}:Be==="mod"?{div:null,mod:new ue(this.modn(ve.words[0]))}:{div:this.divn(ve.words[0]),mod:new ue(this.modn(ve.words[0]))}:this._wordDiv(ve,Be)},ue.prototype.div=function(ve){return this.divmod(ve,"div",!1).div},ue.prototype.mod=function(ve){return this.divmod(ve,"mod",!1).mod},ue.prototype.umod=function(ve){return this.divmod(ve,"mod",!0).mod},ue.prototype.divRound=function(ve){var Be=this.divmod(ve);if(Be.mod.isZero())return Be.div;var Re=Be.div.negative!==0?Be.mod.isub(ve):Be.mod,Ie=ve.ushrn(1),Fe=ve.andln(1),qe=Re.cmp(Ie);return qe<0||Fe===1&&qe===0?Be.div:Be.div.negative!==0?Be.div.isubn(1):Be.div.iaddn(1)},ue.prototype.modn=function(ve){oe(ve<=67108863);for(var Be=(1<<26)%ve,Re=0,Ie=this.length-1;Ie>=0;Ie--)Re=(Be*Re+(this.words[Ie]|0))%ve;return Re},ue.prototype.idivn=function(ve){oe(ve<=67108863);for(var Be=0,Re=this.length-1;Re>=0;Re--){var Ie=(this.words[Re]|0)+Be*67108864;this.words[Re]=Ie/ve|0,Be=Ie%ve}return this.strip()},ue.prototype.divn=function(ve){return this.clone().idivn(ve)},ue.prototype.egcd=function(ve){oe(ve.negative===0),oe(!ve.isZero());var Be=this,Re=ve.clone();Be.negative!==0?Be=Be.umod(ve):Be=Be.clone();for(var Ie=new ue(1),Fe=new ue(0),qe=new ue(0),We=new ue(1),Ue=0;Be.isEven()&&Re.isEven();)Be.iushrn(1),Re.iushrn(1),++Ue;for(var _e=Re.clone(),Qe=Be.clone();!Be.isZero();){for(var tt=0,it=1;!(Be.words[0]&it)&&tt<26;++tt,it<<=1);if(tt>0)for(Be.iushrn(tt);tt-- >0;)(Ie.isOdd()||Fe.isOdd())&&(Ie.iadd(_e),Fe.isub(Qe)),Ie.iushrn(1),Fe.iushrn(1);for(var at=0,ot=1;!(Re.words[0]&ot)&&at<26;++at,ot<<=1);if(at>0)for(Re.iushrn(at);at-- >0;)(qe.isOdd()||We.isOdd())&&(qe.iadd(_e),We.isub(Qe)),qe.iushrn(1),We.iushrn(1);Be.cmp(Re)>=0?(Be.isub(Re),Ie.isub(qe),Fe.isub(We)):(Re.isub(Be),qe.isub(Ie),We.isub(Fe))}return{a:qe,b:We,gcd:Re.iushln(Ue)}},ue.prototype._invmp=function(ve){oe(ve.negative===0),oe(!ve.isZero());var Be=this,Re=ve.clone();Be.negative!==0?Be=Be.umod(ve):Be=Be.clone();for(var Ie=new ue(1),Fe=new ue(0),qe=Re.clone();Be.cmpn(1)>0&&Re.cmpn(1)>0;){for(var We=0,Ue=1;!(Be.words[0]&Ue)&&We<26;++We,Ue<<=1);if(We>0)for(Be.iushrn(We);We-- >0;)Ie.isOdd()&&Ie.iadd(qe),Ie.iushrn(1);for(var _e=0,Qe=1;!(Re.words[0]&Qe)&&_e<26;++_e,Qe<<=1);if(_e>0)for(Re.iushrn(_e);_e-- >0;)Fe.isOdd()&&Fe.iadd(qe),Fe.iushrn(1);Be.cmp(Re)>=0?(Be.isub(Re),Ie.isub(Fe)):(Re.isub(Be),Fe.isub(Ie))}var tt;return Be.cmpn(1)===0?tt=Ie:tt=Fe,tt.cmpn(0)<0&&tt.iadd(ve),tt},ue.prototype.gcd=function(ve){if(this.isZero())return ve.abs();if(ve.isZero())return this.abs();var Be=this.clone(),Re=ve.clone();Be.negative=0,Re.negative=0;for(var Ie=0;Be.isEven()&&Re.isEven();Ie++)Be.iushrn(1),Re.iushrn(1);do{for(;Be.isEven();)Be.iushrn(1);for(;Re.isEven();)Re.iushrn(1);var Fe=Be.cmp(Re);if(Fe<0){var qe=Be;Be=Re,Re=qe}else if(Fe===0||Re.cmpn(1)===0)break;Be.isub(Re)}while(!0);return Re.iushln(Ie)},ue.prototype.invm=function(ve){return this.egcd(ve).a.umod(ve)},ue.prototype.isEven=function(){return(this.words[0]&1)===0},ue.prototype.isOdd=function(){return(this.words[0]&1)===1},ue.prototype.andln=function(ve){return this.words[0]&ve},ue.prototype.bincn=function(ve){oe(typeof ve=="number");var Be=ve%26,Re=(ve-Be)/26,Ie=1<<Be;if(this.length<=Re)return this._expand(Re+1),this.words[Re]|=Ie,this;for(var Fe=Ie,qe=Re;Fe!==0&&qe<this.length;qe++){var We=this.words[qe]|0;We+=Fe,Fe=We>>>26,We&=67108863,this.words[qe]=We}return Fe!==0&&(this.words[qe]=Fe,this.length++),this},ue.prototype.isZero=function(){return this.length===1&&this.words[0]===0},ue.prototype.cmpn=function(ve){var Be=ve<0;if(this.negative!==0&&!Be)return-1;if(this.negative===0&&Be)return 1;this.strip();var Re;if(this.length>1)Re=1;else{Be&&(ve=-ve),oe(ve<=67108863,"Number is too big");var Ie=this.words[0]|0;Re=Ie===ve?0:Ie<ve?-1:1}return this.negative!==0?-Re|0:Re},ue.prototype.cmp=function(ve){if(this.negative!==0&&ve.negative===0)return-1;if(this.negative===0&&ve.negative!==0)return 1;var Be=this.ucmp(ve);return this.negative!==0?-Be|0:Be},ue.prototype.ucmp=function(ve){if(this.length>ve.length)return 1;if(this.length<ve.length)return-1;for(var Be=0,Re=this.length-1;Re>=0;Re--){var Ie=this.words[Re]|0,Fe=ve.words[Re]|0;if(Ie!==Fe){Ie<Fe?Be=-1:Ie>Fe&&(Be=1);break}}return Be},ue.prototype.gtn=function(ve){return this.cmpn(ve)===1},ue.prototype.gt=function(ve){return this.cmp(ve)===1},ue.prototype.gten=function(ve){return this.cmpn(ve)>=0},ue.prototype.gte=function(ve){return this.cmp(ve)>=0},ue.prototype.ltn=function(ve){return this.cmpn(ve)===-1},ue.prototype.lt=function(ve){return this.cmp(ve)===-1},ue.prototype.lten=function(ve){return this.cmpn(ve)<=0},ue.prototype.lte=function(ve){return this.cmp(ve)<=0},ue.prototype.eqn=function(ve){return this.cmpn(ve)===0},ue.prototype.eq=function(ve){return this.cmp(ve)===0},ue.red=function(ve){return new et(ve)},ue.prototype.toRed=function(ve){return oe(!this.red,"Already a number in reduction context"),oe(this.negative===0,"red works only with positives"),ve.convertTo(this)._forceRed(ve)},ue.prototype.fromRed=function(){return oe(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},ue.prototype._forceRed=function(ve){return this.red=ve,this},ue.prototype.forceRed=function(ve){return oe(!this.red,"Already a number in reduction context"),this._forceRed(ve)},ue.prototype.redAdd=function(ve){return oe(this.red,"redAdd works only with red numbers"),this.red.add(this,ve)},ue.prototype.redIAdd=function(ve){return oe(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ve)},ue.prototype.redSub=function(ve){return oe(this.red,"redSub works only with red numbers"),this.red.sub(this,ve)},ue.prototype.redISub=function(ve){return oe(this.red,"redISub works only with red numbers"),this.red.isub(this,ve)},ue.prototype.redShl=function(ve){return oe(this.red,"redShl works only with red numbers"),this.red.shl(this,ve)},ue.prototype.redMul=function(ve){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,ve),this.red.mul(this,ve)},ue.prototype.redIMul=function(ve){return oe(this.red,"redMul works only with red numbers"),this.red._verify2(this,ve),this.red.imul(this,ve)},ue.prototype.redSqr=function(){return oe(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},ue.prototype.redISqr=function(){return oe(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},ue.prototype.redSqrt=function(){return oe(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},ue.prototype.redInvm=function(){return oe(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},ue.prototype.redNeg=function(){return oe(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},ue.prototype.redPow=function(ve){return oe(this.red&&!ve.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ve)};var Ye={k256:null,p224:null,p192:null,p25519:null};function ze(Ge,ve){this.name=Ge,this.p=new ue(ve,16),this.n=this.p.bitLength(),this.k=new ue(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ze.prototype._tmp=function(){var ve=new ue(null);return ve.words=new Array(Math.ceil(this.n/13)),ve},ze.prototype.ireduce=function(ve){var Be=ve,Re;do this.split(Be,this.tmp),Be=this.imulK(Be),Be=Be.iadd(this.tmp),Re=Be.bitLength();while(Re>this.n);var Ie=Re<this.n?-1:Be.ucmp(this.p);return Ie===0?(Be.words[0]=0,Be.length=1):Ie>0?Be.isub(this.p):Be.strip!==void 0?Be.strip():Be._strip(),Be},ze.prototype.split=function(ve,Be){ve.iushrn(this.n,0,Be)},ze.prototype.imulK=function(ve){return ve.imul(this.k)};function Xe(){ze.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ce(Xe,ze),Xe.prototype.split=function(ve,Be){for(var Re=4194303,Ie=Math.min(ve.length,9),Fe=0;Fe<Ie;Fe++)Be.words[Fe]=ve.words[Fe];if(Be.length=Ie,ve.length<=9){ve.words[0]=0,ve.length=1;return}var qe=ve.words[9];for(Be.words[Be.length++]=qe&Re,Fe=10;Fe<ve.length;Fe++){var We=ve.words[Fe]|0;ve.words[Fe-10]=(We&Re)<<4|qe>>>22,qe=We}qe>>>=22,ve.words[Fe-10]=qe,qe===0&&ve.length>10?ve.length-=10:ve.length-=9},Xe.prototype.imulK=function(ve){ve.words[ve.length]=0,ve.words[ve.length+1]=0,ve.length+=2;for(var Be=0,Re=0;Re<ve.length;Re++){var Ie=ve.words[Re]|0;Be+=Ie*977,ve.words[Re]=Be&67108863,Be=Ie*64+(Be/67108864|0)}return ve.words[ve.length-1]===0&&(ve.length--,ve.words[ve.length-1]===0&&ve.length--),ve};function Je(){ze.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ce(Je,ze);function rt(){ze.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ce(rt,ze);function Ze(){ze.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ce(Ze,ze),Ze.prototype.imulK=function(ve){for(var Be=0,Re=0;Re<ve.length;Re++){var Ie=(ve.words[Re]|0)*19+Be,Fe=Ie&67108863;Ie>>>=26,ve.words[Re]=Fe,Be=Ie}return Be!==0&&(ve.words[ve.length++]=Be),ve},ue._prime=function(ve){if(Ye[ve])return Ye[ve];var Be;if(ve==="k256")Be=new Xe;else if(ve==="p224")Be=new Je;else if(ve==="p192")Be=new rt;else if(ve==="p25519")Be=new Ze;else throw new Error("Unknown prime "+ve);return Ye[ve]=Be,Be};function et(Ge){if(typeof Ge=="string"){var ve=ue._prime(Ge);this.m=ve.p,this.prime=ve}else oe(Ge.gtn(1),"modulus must be greater than 1"),this.m=Ge,this.prime=null}et.prototype._verify1=function(ve){oe(ve.negative===0,"red works only with positives"),oe(ve.red,"red works only with red numbers")},et.prototype._verify2=function(ve,Be){oe((ve.negative|Be.negative)===0,"red works only with positives"),oe(ve.red&&ve.red===Be.red,"red works only with red numbers")},et.prototype.imod=function(ve){return this.prime?this.prime.ireduce(ve)._forceRed(this):ve.umod(this.m)._forceRed(this)},et.prototype.neg=function(ve){return ve.isZero()?ve.clone():this.m.sub(ve)._forceRed(this)},et.prototype.add=function(ve,Be){this._verify2(ve,Be);var Re=ve.add(Be);return Re.cmp(this.m)>=0&&Re.isub(this.m),Re._forceRed(this)},et.prototype.iadd=function(ve,Be){this._verify2(ve,Be);var Re=ve.iadd(Be);return Re.cmp(this.m)>=0&&Re.isub(this.m),Re},et.prototype.sub=function(ve,Be){this._verify2(ve,Be);var Re=ve.sub(Be);return Re.cmpn(0)<0&&Re.iadd(this.m),Re._forceRed(this)},et.prototype.isub=function(ve,Be){this._verify2(ve,Be);var Re=ve.isub(Be);return Re.cmpn(0)<0&&Re.iadd(this.m),Re},et.prototype.shl=function(ve,Be){return this._verify1(ve),this.imod(ve.ushln(Be))},et.prototype.imul=function(ve,Be){return this._verify2(ve,Be),this.imod(ve.imul(Be))},et.prototype.mul=function(ve,Be){return this._verify2(ve,Be),this.imod(ve.mul(Be))},et.prototype.isqr=function(ve){return this.imul(ve,ve.clone())},et.prototype.sqr=function(ve){return this.mul(ve,ve)},et.prototype.sqrt=function(ve){if(ve.isZero())return ve.clone();var Be=this.m.andln(3);if(oe(Be%2===1),Be===3){var Re=this.m.add(new ue(1)).iushrn(2);return this.pow(ve,Re)}for(var Ie=this.m.subn(1),Fe=0;!Ie.isZero()&&Ie.andln(1)===0;)Fe++,Ie.iushrn(1);oe(!Ie.isZero());var qe=new ue(1).toRed(this),We=qe.redNeg(),Ue=this.m.subn(1).iushrn(1),_e=this.m.bitLength();for(_e=new ue(2*_e*_e).toRed(this);this.pow(_e,Ue).cmp(We)!==0;)_e.redIAdd(We);for(var Qe=this.pow(_e,Ie),tt=this.pow(ve,Ie.addn(1).iushrn(1)),it=this.pow(ve,Ie),at=Fe;it.cmp(qe)!==0;){for(var ot=it,lt=0;ot.cmp(qe)!==0;lt++)ot=ot.redSqr();oe(lt<at);var st=this.pow(Qe,new ue(1).iushln(at-lt-1));tt=tt.redMul(st),Qe=st.redSqr(),it=it.redMul(Qe),at=lt}return tt},et.prototype.invm=function(ve){var Be=ve._invmp(this.m);return Be.negative!==0?(Be.negative=0,this.imod(Be).redNeg()):this.imod(Be)},et.prototype.pow=function(ve,Be){if(Be.isZero())return new ue(1).toRed(this);if(Be.cmpn(1)===0)return ve.clone();var Re=4,Ie=new Array(1<<Re);Ie[0]=new ue(1).toRed(this),Ie[1]=ve;for(var Fe=2;Fe<Ie.length;Fe++)Ie[Fe]=this.mul(Ie[Fe-1],ve);var qe=Ie[0],We=0,Ue=0,_e=Be.bitLength()%26;for(_e===0&&(_e=26),Fe=Be.length-1;Fe>=0;Fe--){for(var Qe=Be.words[Fe],tt=_e-1;tt>=0;tt--){var it=Qe>>tt&1;if(qe!==Ie[0]&&(qe=this.sqr(qe)),it===0&&We===0){Ue=0;continue}We<<=1,We|=it,Ue++,!(Ue!==Re&&(Fe!==0||tt!==0))&&(qe=this.mul(qe,Ie[We]),Ue=0,We=0)}_e=26}return qe},et.prototype.convertTo=function(ve){var Be=ve.umod(this.m);return Be===ve?Be.clone():Be},et.prototype.convertFrom=function(ve){var Be=ve.clone();return Be.red=null,Be},ue.mont=function(ve){return new nt(ve)};function nt(Ge){et.call(this,Ge),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new ue(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ce(nt,et),nt.prototype.convertTo=function(ve){return this.imod(ve.ushln(this.shift))},nt.prototype.convertFrom=function(ve){var Be=this.imod(ve.mul(this.rinv));return Be.red=null,Be},nt.prototype.imul=function(ve,Be){if(ve.isZero()||Be.isZero())return ve.words[0]=0,ve.length=1,ve;var Re=ve.imul(Be),Ie=Re.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Fe=Re.isub(Ie).iushrn(this.shift),qe=Fe;return Fe.cmp(this.m)>=0?qe=Fe.isub(this.m):Fe.cmpn(0)<0&&(qe=Fe.iadd(this.m)),qe._forceRed(this)},nt.prototype.mul=function(ve,Be){if(ve.isZero()||Be.isZero())return new ue(0)._forceRed(this);var Re=ve.mul(Be),Ie=Re.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Fe=Re.isub(Ie).iushrn(this.shift),qe=Fe;return Fe.cmp(this.m)>=0?qe=Fe.isub(this.m):Fe.cmpn(0)<0&&(qe=Fe.iadd(this.m)),qe._forceRed(this)},nt.prototype.invm=function(ve){var Be=this.imod(ve._invmp(this.m).mul(this.r2));return Be._forceRed(this)}})(K,commonjsGlobal)}(bn)),bn.exports}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var K=requireBn(),J=requireSafeBuffer$1().Buffer;function ne(oe,ce){return J.from(oe.toRed(K.mont(ce.modulus)).redPow(new K(ce.publicExponent)).fromRed().toArray())}return withPublic_1=ne,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var K=requireParseAsn1(),J=requireBrowser$a(),ne=requireBrowser$9(),oe=requireMgf(),ce=requireXor(),ue=requireBn(),Ae=requireWithPublic(),pe=requireBrowserifyRsa(),xe=requireSafeBuffer$1().Buffer;publicEncrypt=function(Te,Ne,$e){var ke;Te.padding?ke=Te.padding:$e?ke=1:ke=4;var je=K(Te),Ke;if(ke===4)Ke=me(je,Ne);else if(ke===1)Ke=ge(je,Ne,$e);else if(ke===3){if(Ke=new ue(Ne),Ke.cmp(je.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return $e?pe(Ke,je):Ae(Ke,je)};function me(Se,Te){var Ne=Se.modulus.byteLength(),$e=Te.length,ke=ne("sha1").update(xe.alloc(0)).digest(),je=ke.length,Ke=2*je;if($e>Ne-Ke-2)throw new Error("message too long");var Ye=xe.alloc(Ne-$e-Ke-2),ze=Ne-je-1,Xe=J(je),Je=ce(xe.concat([ke,Ye,xe.alloc(1,1),Te],ze),oe(Xe,ze)),rt=ce(Xe,oe(Je,je));return new ue(xe.concat([xe.alloc(1),rt,Je],Ne))}function ge(Se,Te,Ne){var $e=Te.length,ke=Se.modulus.byteLength();if($e>ke-11)throw new Error("message too long");var je;return Ne?je=xe.alloc(ke-$e-3,255):je=ye(ke-$e-3),new ue(xe.concat([xe.from([0,Ne?1:2]),je,xe.alloc(1),Te],ke))}function ye(Se){for(var Te=xe.allocUnsafe(Se),Ne=0,$e=J(Se*2),ke=0,je;Ne<Se;)ke===$e.length&&($e=J(Se*2),ke=0),je=$e[ke++],je&&(Te[Ne++]=je);return Te}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var K=requireParseAsn1(),J=requireMgf(),ne=requireXor(),oe=requireBn(),ce=requireBrowserifyRsa(),ue=requireBrowser$9(),Ae=requireWithPublic(),pe=requireSafeBuffer$1().Buffer;privateDecrypt=function(Se,Te,Ne){var $e;Se.padding?$e=Se.padding:Ne?$e=1:$e=4;var ke=K(Se),je=ke.modulus.byteLength();if(Te.length>je||new oe(Te).cmp(ke.modulus)>=0)throw new Error("decryption error");var Ke;Ne?Ke=Ae(new oe(Te),ke):Ke=ce(Te,ke);var Ye=pe.alloc(je-Ke.length);if(Ke=pe.concat([Ye,Ke],je),$e===4)return xe(ke,Ke);if($e===1)return me(ke,Ke,Ne);if($e===3)return Ke;throw new Error("unknown padding")};function xe(ye,Se){var Te=ye.modulus.byteLength(),Ne=ue("sha1").update(pe.alloc(0)).digest(),$e=Ne.length;if(Se[0]!==0)throw new Error("decryption error");var ke=Se.slice(1,$e+1),je=Se.slice($e+1),Ke=ne(ke,J(je,$e)),Ye=ne(je,J(Ke,Te-$e-1));if(ge(Ne,Ye.slice(0,$e)))throw new Error("decryption error");for(var ze=$e;Ye[ze]===0;)ze++;if(Ye[ze++]!==1)throw new Error("decryption error");return Ye.slice(ze)}function me(ye,Se,Te){for(var Ne=Se.slice(0,2),$e=2,ke=0;Se[$e++]!==0;)if($e>=Se.length){ke++;break}var je=Se.slice(2,$e-1);if((Ne.toString("hex")!=="0002"&&!Te||Ne.toString("hex")!=="0001"&&Te)&&ke++,je.length<8&&ke++,ke)throw new Error("decryption error");return Se.slice($e)}function ge(ye,Se){ye=pe.from(ye),Se=pe.from(Se);var Te=0,Ne=ye.length;ye.length!==Se.length&&(Te++,Ne=Math.min(ye.length,Se.length));for(var $e=-1;++$e<Ne;)Te+=ye[$e]^Se[$e];return Te}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(K){K.publicEncrypt=requirePublicEncrypt(),K.privateDecrypt=requirePrivateDecrypt(),K.privateEncrypt=function(ne,oe){return K.publicEncrypt(ne,oe,!0)},K.publicDecrypt=function(ne,oe){return K.privateDecrypt(ne,oe,!0)}}(browser$1)),browser$1}var browser={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1;function K(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var J=requireSafeBuffer$1(),ne=requireBrowser$a(),oe=J.Buffer,ce=J.kMaxLength,ue=commonjsGlobal.crypto||commonjsGlobal.msCrypto,Ae=Math.pow(2,32)-1;function pe(Se,Te){if(typeof Se!="number"||Se!==Se)throw new TypeError("offset must be a number");if(Se>Ae||Se<0)throw new TypeError("offset must be a uint32");if(Se>ce||Se>Te)throw new RangeError("offset out of range")}function xe(Se,Te,Ne){if(typeof Se!="number"||Se!==Se)throw new TypeError("size must be a number");if(Se>Ae||Se<0)throw new TypeError("size must be a uint32");if(Se+Te>Ne||Se>ce)throw new RangeError("buffer too small")}ue&&ue.getRandomValues||!process$1.browser?(browser.randomFill=me,browser.randomFillSync=ye):(browser.randomFill=K,browser.randomFillSync=K);function me(Se,Te,Ne,$e){if(!oe.isBuffer(Se)&&!(Se instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof Te=="function")$e=Te,Te=0,Ne=Se.length;else if(typeof Ne=="function")$e=Ne,Ne=Se.length-Te;else if(typeof $e!="function")throw new TypeError('"cb" argument must be a function');return pe(Te,Se.length),xe(Ne,Te,Se.length),ge(Se,Te,Ne,$e)}function ge(Se,Te,Ne,$e){if(process$1.browser){var ke=Se.buffer,je=new Uint8Array(ke,Te,Ne);if(ue.getRandomValues(je),$e){process$1.nextTick(function(){$e(null,Se)});return}return Se}if($e){ne(Ne,function(Ye,ze){if(Ye)return $e(Ye);ze.copy(Se,Te),$e(null,Se)});return}var Ke=ne(Ne);return Ke.copy(Se,Te),Se}function ye(Se,Te,Ne){if(typeof Te>"u"&&(Te=0),!oe.isBuffer(Se)&&!(Se instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return pe(Te,Se.length),Ne===void 0&&(Ne=Se.length-Te),xe(Ne,Te,Se.length),ge(Se,Te,Ne)}return browser}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$a(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var K=requireAlgos(),J=Object.keys(K),ne=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(J);cryptoBrowserify.getHashes=function(){return ne};var oe=requireBrowser$7();cryptoBrowserify.pbkdf2=oe.pbkdf2,cryptoBrowserify.pbkdf2Sync=oe.pbkdf2Sync;var ce=requireBrowser$5();cryptoBrowserify.Cipher=ce.Cipher,cryptoBrowserify.createCipher=ce.createCipher,cryptoBrowserify.Cipheriv=ce.Cipheriv,cryptoBrowserify.createCipheriv=ce.createCipheriv,cryptoBrowserify.Decipher=ce.Decipher,cryptoBrowserify.createDecipher=ce.createDecipher,cryptoBrowserify.Decipheriv=ce.Decipheriv,cryptoBrowserify.createDecipheriv=ce.createDecipheriv,cryptoBrowserify.getCiphers=ce.getCiphers,cryptoBrowserify.listCiphers=ce.listCiphers;var ue=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=ue.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=ue.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=ue.getDiffieHellman,cryptoBrowserify.createDiffieHellman=ue.createDiffieHellman,cryptoBrowserify.DiffieHellman=ue.DiffieHellman;var Ae=requireBrowser$3();cryptoBrowserify.createSign=Ae.createSign,cryptoBrowserify.Sign=Ae.Sign,cryptoBrowserify.createVerify=Ae.createVerify,cryptoBrowserify.Verify=Ae.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var pe=requireBrowser$1();cryptoBrowserify.publicEncrypt=pe.publicEncrypt,cryptoBrowserify.privateEncrypt=pe.privateEncrypt,cryptoBrowserify.publicDecrypt=pe.publicDecrypt,cryptoBrowserify.privateDecrypt=pe.privateDecrypt;var xe=requireBrowser();return cryptoBrowserify.randomFill=xe.randomFill,cryptoBrowserify.randomFillSync=xe.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var forge$r=forge$D,pkcs5=forge$r.pkcs5=forge$r.pkcs5||{},crypto$1;forge$r.util.isNodejs&&!forge$r.options.usePureJavaScript&&(crypto$1=requireCryptoBrowserify());forge$r.pbkdf2=pkcs5.pbkdf2=function(K,J,ne,oe,ce,ue){if(typeof ce=="function"&&(ue=ce,ce=null),forge$r.util.isNodejs&&!forge$r.options.usePureJavaScript&&crypto$1.pbkdf2&&(ce===null||typeof ce!="object")&&(crypto$1.pbkdf2Sync.length>4||!ce||ce==="sha1"))return typeof ce!="string"&&(ce="sha1"),K=Buffer.from(K,"binary"),J=Buffer.from(J,"binary"),ue?crypto$1.pbkdf2Sync.length===4?crypto$1.pbkdf2(K,J,ne,oe,function(Ye,ze){if(Ye)return ue(Ye);ue(null,ze.toString("binary"))}):crypto$1.pbkdf2(K,J,ne,oe,ce,function(Ye,ze){if(Ye)return ue(Ye);ue(null,ze.toString("binary"))}):crypto$1.pbkdf2Sync.length===4?crypto$1.pbkdf2Sync(K,J,ne,oe).toString("binary"):crypto$1.pbkdf2Sync(K,J,ne,oe,ce).toString("binary");if((typeof ce>"u"||ce===null)&&(ce="sha1"),typeof ce=="string"){if(!(ce in forge$r.md.algorithms))throw new Error("Unknown hash algorithm: "+ce);ce=forge$r.md[ce].create()}var Ae=ce.digestLength;if(oe>4294967295*Ae){var pe=new Error("Derived key is too long.");if(ue)return ue(pe);throw pe}var xe=Math.ceil(oe/Ae),me=oe-(xe-1)*Ae,ge=forge$r.hmac.create();ge.start(ce,K);var ye="",Se,Te,Ne;if(!ue){for(var $e=1;$e<=xe;++$e){ge.start(null,null),ge.update(J),ge.update(forge$r.util.int32ToBytes($e)),Se=Ne=ge.digest().getBytes();for(var ke=2;ke<=ne;++ke)ge.start(null,null),ge.update(Ne),Te=ge.digest().getBytes(),Se=forge$r.util.xorBytes(Se,Te,Ae),Ne=Te;ye+=$e<xe?Se:Se.substr(0,me)}return ye}var $e=1,ke;function je(){if($e>xe)return ue(null,ye);ge.start(null,null),ge.update(J),ge.update(forge$r.util.int32ToBytes($e)),Se=Ne=ge.digest().getBytes(),ke=2,Ke()}function Ke(){if(ke<=ne)return ge.start(null,null),ge.update(Ne),Te=ge.digest().getBytes(),Se=forge$r.util.xorBytes(Se,Te,Ae),Ne=Te,++ke,forge$r.util.setImmediate(Ke);ye+=$e<xe?Se:Se.substr(0,me),++$e,je()}je()};var forge$q=forge$D,sha256=forge$q.sha256=forge$q.sha256||{};forge$q.md.sha256=forge$q.md.algorithms.sha256=sha256;sha256.create=function(){_initialized$2||_init$2();var K=null,J=forge$q.util.createBuffer(),ne=new Array(64),oe={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return oe.start=function(){oe.messageLength=0,oe.fullMessageLength=oe.messageLength64=[];for(var ce=oe.messageLengthSize/4,ue=0;ue<ce;++ue)oe.fullMessageLength.push(0);return J=forge$q.util.createBuffer(),K={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},oe},oe.start(),oe.update=function(ce,ue){ue==="utf8"&&(ce=forge$q.util.encodeUtf8(ce));var Ae=ce.length;oe.messageLength+=Ae,Ae=[Ae/4294967296>>>0,Ae>>>0];for(var pe=oe.fullMessageLength.length-1;pe>=0;--pe)oe.fullMessageLength[pe]+=Ae[1],Ae[1]=Ae[0]+(oe.fullMessageLength[pe]/4294967296>>>0),oe.fullMessageLength[pe]=oe.fullMessageLength[pe]>>>0,Ae[0]=Ae[1]/4294967296>>>0;return J.putBytes(ce),_update$2(K,ne,J),(J.read>2048||J.length()===0)&&J.compact(),oe},oe.digest=function(){var ce=forge$q.util.createBuffer();ce.putBytes(J.bytes());var ue=oe.fullMessageLength[oe.fullMessageLength.length-1]+oe.messageLengthSize,Ae=ue&oe.blockLength-1;ce.putBytes(_padding$2.substr(0,oe.blockLength-Ae));for(var pe,xe,me=oe.fullMessageLength[0]*8,ge=0;ge<oe.fullMessageLength.length-1;++ge)pe=oe.fullMessageLength[ge+1]*8,xe=pe/4294967296>>>0,me+=xe,ce.putInt32(me>>>0),me=pe>>>0;ce.putInt32(me);var ye={h0:K.h0,h1:K.h1,h2:K.h2,h3:K.h3,h4:K.h4,h5:K.h5,h6:K.h6,h7:K.h7};_update$2(ye,ne,ce);var Se=forge$q.util.createBuffer();return Se.putInt32(ye.h0),Se.putInt32(ye.h1),Se.putInt32(ye.h2),Se.putInt32(ye.h3),Se.putInt32(ye.h4),Se.putInt32(ye.h5),Se.putInt32(ye.h6),Se.putInt32(ye.h7),Se},oe};var _padding$2=null,_initialized$2=!1,_k$1=null;function _init$2(){_padding$2="",_padding$2+=forge$q.util.fillString("\0",64),_k$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized$2=!0}function _update$2(K,J,ne){for(var oe,ce,ue,Ae,pe,xe,me,ge,ye,Se,Te,Ne,$e,ke,je,Ke=ne.length();Ke>=64;){for(me=0;me<16;++me)J[me]=ne.getInt32();for(;me<64;++me)oe=J[me-2],oe=(oe>>>17|oe<<15)^(oe>>>19|oe<<13)^oe>>>10,ce=J[me-15],ce=(ce>>>7|ce<<25)^(ce>>>18|ce<<14)^ce>>>3,J[me]=oe+J[me-7]+ce+J[me-16]|0;for(ge=K.h0,ye=K.h1,Se=K.h2,Te=K.h3,Ne=K.h4,$e=K.h5,ke=K.h6,je=K.h7,me=0;me<64;++me)Ae=(Ne>>>6|Ne<<26)^(Ne>>>11|Ne<<21)^(Ne>>>25|Ne<<7),pe=ke^Ne&($e^ke),ue=(ge>>>2|ge<<30)^(ge>>>13|ge<<19)^(ge>>>22|ge<<10),xe=ge&ye|Se&(ge^ye),oe=je+Ae+pe+_k$1[me]+J[me],ce=ue+xe,je=ke,ke=$e,$e=Ne,Ne=Te+oe>>>0,Te=Se,Se=ye,ye=ge,ge=oe+ce>>>0;K.h0=K.h0+ge|0,K.h1=K.h1+ye|0,K.h2=K.h2+Se|0,K.h3=K.h3+Te|0,K.h4=K.h4+Ne|0,K.h5=K.h5+$e|0,K.h6=K.h6+ke|0,K.h7=K.h7+je|0,Ke-=64}}var forge$p=forge$D,_crypto$1=null;forge$p.util.isNodejs&&!forge$p.options.usePureJavaScript&&!process$1.versions["node-webkit"]&&(_crypto$1=requireCryptoBrowserify());var prng=forge$p.prng=forge$p.prng||{};prng.create=function(K){for(var J={plugin:K,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},ne=K.md,oe=new Array(32),ce=0;ce<32;++ce)oe[ce]=ne.create();J.pools=oe,J.pool=0,J.generate=function(me,ge){if(!ge)return J.generateSync(me);var ye=J.plugin.cipher,Se=J.plugin.increment,Te=J.plugin.formatKey,Ne=J.plugin.formatSeed,$e=forge$p.util.createBuffer();J.key=null,ke();function ke(je){if(je)return ge(je);if($e.length()>=me)return ge(null,$e.getBytes(me));if(J.generated>1048575&&(J.key=null),J.key===null)return forge$p.util.nextTick(function(){ue(ke)});var Ke=ye(J.key,J.seed);J.generated+=Ke.length,$e.putBytes(Ke),J.key=Te(ye(J.key,Se(J.seed))),J.seed=Ne(ye(J.key,J.seed)),forge$p.util.setImmediate(ke)}},J.generateSync=function(me){var ge=J.plugin.cipher,ye=J.plugin.increment,Se=J.plugin.formatKey,Te=J.plugin.formatSeed;J.key=null;for(var Ne=forge$p.util.createBuffer();Ne.length()<me;){J.generated>1048575&&(J.key=null),J.key===null&&Ae();var $e=ge(J.key,J.seed);J.generated+=$e.length,Ne.putBytes($e),J.key=Se(ge(J.key,ye(J.seed))),J.seed=Te(ge(J.key,J.seed))}return Ne.getBytes(me)};function ue(me){if(J.pools[0].messageLength>=32)return pe(),me();var ge=32-J.pools[0].messageLength<<5;J.seedFile(ge,function(ye,Se){if(ye)return me(ye);J.collect(Se),pe(),me()})}function Ae(){if(J.pools[0].messageLength>=32)return pe();var me=32-J.pools[0].messageLength<<5;J.collect(J.seedFileSync(me)),pe()}function pe(){J.reseeds=J.reseeds===4294967295?0:J.reseeds+1;var me=J.plugin.md.create();me.update(J.keyBytes);for(var ge=1,ye=0;ye<32;++ye)J.reseeds%ge===0&&(me.update(J.pools[ye].digest().getBytes()),J.pools[ye].start()),ge=ge<<1;J.keyBytes=me.digest().getBytes(),me.start(),me.update(J.keyBytes);var Se=me.digest().getBytes();J.key=J.plugin.formatKey(J.keyBytes),J.seed=J.plugin.formatSeed(Se),J.generated=0}function xe(me){var ge=null,ye=forge$p.util.globalScope,Se=ye.crypto||ye.msCrypto;Se&&Se.getRandomValues&&(ge=function(Xe){return Se.getRandomValues(Xe)});var Te=forge$p.util.createBuffer();if(ge)for(;Te.length()<me;){var Ne=Math.max(1,Math.min(me-Te.length(),65536)/4),$e=new Uint32Array(Math.floor(Ne));try{ge($e);for(var ke=0;ke<$e.length;++ke)Te.putInt32($e[ke])}catch(Xe){if(!(typeof QuotaExceededError<"u"&&Xe instanceof QuotaExceededError))throw Xe}}if(Te.length()<me)for(var je,Ke,Ye,ze=Math.floor(Math.random()*65536);Te.length()<me;){Ke=16807*(ze&65535),je=16807*(ze>>16),Ke+=(je&32767)<<16,Ke+=je>>15,Ke=(Ke&2147483647)+(Ke>>31),ze=Ke&4294967295;for(var ke=0;ke<3;++ke)Ye=ze>>>(ke<<3),Ye^=Math.floor(Math.random()*256),Te.putByte(Ye&255)}return Te.getBytes(me)}return _crypto$1?(J.seedFile=function(me,ge){_crypto$1.randomBytes(me,function(ye,Se){if(ye)return ge(ye);ge(null,Se.toString())})},J.seedFileSync=function(me){return _crypto$1.randomBytes(me).toString()}):(J.seedFile=function(me,ge){try{ge(null,xe(me))}catch(ye){ge(ye)}},J.seedFileSync=xe),J.collect=function(me){for(var ge=me.length,ye=0;ye<ge;++ye)J.pools[J.pool].update(me.substr(ye,1)),J.pool=J.pool===31?0:J.pool+1},J.collectInt=function(me,ge){for(var ye="",Se=0;Se<ge;Se+=8)ye+=String.fromCharCode(me>>Se&255);J.collect(ye)},J.registerWorker=function(me){if(me===self)J.seedFile=function(ye,Se){function Te(Ne){var $e=Ne.data;$e.forge&&$e.forge.prng&&(self.removeEventListener("message",Te),Se($e.forge.prng.err,$e.forge.prng.bytes))}self.addEventListener("message",Te),self.postMessage({forge:{prng:{needed:ye}}})};else{var ge=function(ye){var Se=ye.data;Se.forge&&Se.forge.prng&&J.seedFile(Se.forge.prng.needed,function(Te,Ne){me.postMessage({forge:{prng:{err:Te,bytes:Ne}}})})};me.addEventListener("message",ge)}},J};var forge$o=forge$D;(function(){if(forge$o.random&&forge$o.random.getBytes){forge$o.random;return}(function(K){var J={},ne=new Array(4),oe=forge$o.util.createBuffer();J.formatKey=function(ye){var Se=forge$o.util.createBuffer(ye);return ye=new Array(4),ye[0]=Se.getInt32(),ye[1]=Se.getInt32(),ye[2]=Se.getInt32(),ye[3]=Se.getInt32(),forge$o.aes._expandKey(ye,!1)},J.formatSeed=function(ye){var Se=forge$o.util.createBuffer(ye);return ye=new Array(4),ye[0]=Se.getInt32(),ye[1]=Se.getInt32(),ye[2]=Se.getInt32(),ye[3]=Se.getInt32(),ye},J.cipher=function(ye,Se){return forge$o.aes._updateBlock(ye,Se,ne,!1),oe.putInt32(ne[0]),oe.putInt32(ne[1]),oe.putInt32(ne[2]),oe.putInt32(ne[3]),oe.getBytes()},J.increment=function(ye){return++ye[3],ye},J.md=forge$o.md.sha256;function ce(){var ye=forge$o.prng.create(J);return ye.getBytes=function(Se,Te){return ye.generate(Se,Te)},ye.getBytesSync=function(Se){return ye.generate(Se)},ye}var ue=ce(),Ae=null,pe=forge$o.util.globalScope,xe=pe.crypto||pe.msCrypto;if(xe&&xe.getRandomValues&&(Ae=function(ye){return xe.getRandomValues(ye)}),forge$o.options.usePureJavaScript||!forge$o.util.isNodejs&&!Ae){if(ue.collectInt(+new Date,32),typeof navigator<"u"){var me="";for(var ge in navigator)try{typeof navigator[ge]=="string"&&(me+=navigator[ge])}catch{}ue.collect(me),me=null}K&&(K().mousemove(function(ye){ue.collectInt(ye.clientX,16),ue.collectInt(ye.clientY,16)}),K().keypress(function(ye){ue.collectInt(ye.charCode,8)}))}if(!forge$o.random)forge$o.random=ue;else for(var ge in ue)forge$o.random[ge]=ue[ge];forge$o.random.createInstance=ce,forge$o.random})(typeof jQuery<"u"?jQuery:null)})();var forge$n=forge$D,piTable=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],rol=function(K,J){return K<<J&65535|(K&65535)>>16-J},ror=function(K,J){return(K&65535)>>J|K<<16-J&65535};forge$n.rc2=forge$n.rc2||{};forge$n.rc2.expandKey=function(K,J){typeof K=="string"&&(K=forge$n.util.createBuffer(K)),J=J||128;var ne=K,oe=K.length(),ce=J,ue=Math.ceil(ce/8),Ae=255>>(ce&7),pe;for(pe=oe;pe<128;pe++)ne.putByte(piTable[ne.at(pe-1)+ne.at(pe-oe)&255]);for(ne.setAt(128-ue,piTable[ne.at(128-ue)&Ae]),pe=127-ue;pe>=0;pe--)ne.setAt(pe,piTable[ne.at(pe+1)^ne.at(pe+ue)]);return ne};var createCipher=function(K,J,ne){var oe=!1,ce=null,ue=null,Ae=null,pe,xe,me,ge,ye=[];for(K=forge$n.rc2.expandKey(K,J),me=0;me<64;me++)ye.push(K.getInt16Le());ne?(pe=function(Ne){for(me=0;me<4;me++)Ne[me]+=ye[ge]+(Ne[(me+3)%4]&Ne[(me+2)%4])+(~Ne[(me+3)%4]&Ne[(me+1)%4]),Ne[me]=rol(Ne[me],s[me]),ge++},xe=function(Ne){for(me=0;me<4;me++)Ne[me]+=ye[Ne[(me+3)%4]&63]}):(pe=function(Ne){for(me=3;me>=0;me--)Ne[me]=ror(Ne[me],s[me]),Ne[me]-=ye[ge]+(Ne[(me+3)%4]&Ne[(me+2)%4])+(~Ne[(me+3)%4]&Ne[(me+1)%4]),ge--},xe=function(Ne){for(me=3;me>=0;me--)Ne[me]-=ye[Ne[(me+3)%4]&63]});var Se=function(Ne){var $e=[];for(me=0;me<4;me++){var ke=ce.getInt16Le();Ae!==null&&(ne?ke^=Ae.getInt16Le():Ae.putInt16Le(ke)),$e.push(ke&65535)}ge=ne?0:63;for(var je=0;je<Ne.length;je++)for(var Ke=0;Ke<Ne[je][0];Ke++)Ne[je][1]($e);for(me=0;me<4;me++)Ae!==null&&(ne?Ae.putInt16Le($e[me]):$e[me]^=Ae.getInt16Le()),ue.putInt16Le($e[me])},Te=null;return Te={start:function(Ne,$e){Ne&&typeof Ne=="string"&&(Ne=forge$n.util.createBuffer(Ne)),oe=!1,ce=forge$n.util.createBuffer(),ue=$e||new forge$n.util.createBuffer,Ae=Ne,Te.output=ue},update:function(Ne){for(oe||ce.putBuffer(Ne);ce.length()>=8;)Se([[5,pe],[1,xe],[6,pe],[1,xe],[5,pe]])},finish:function(Ne){var $e=!0;if(ne)if(Ne)$e=Ne(8,ce,!ne);else{var ke=ce.length()===8?8:8-ce.length();ce.fillWithByte(ke,ke)}if($e&&(oe=!0,Te.update()),!ne&&($e=ce.length()===0,$e))if(Ne)$e=Ne(8,ue,!ne);else{var je=ue.length(),Ke=ue.at(je-1);Ke>je?$e=!1:ue.truncate(Ke)}return $e}},Te};forge$n.rc2.startEncrypting=function(K,J,ne){var oe=forge$n.rc2.createEncryptionCipher(K,128);return oe.start(J,ne),oe};forge$n.rc2.createEncryptionCipher=function(K,J){return createCipher(K,J,!0)};forge$n.rc2.startDecrypting=function(K,J,ne){var oe=forge$n.rc2.createDecryptionCipher(K,128);return oe.start(J,ne),oe};forge$n.rc2.createDecryptionCipher=function(K,J){return createCipher(K,J,!1)};var forge$m=forge$D;forge$m.jsbn=forge$m.jsbn||{};var dbits;function BigInteger$4(K,J,ne){this.data=[],K!=null&&(typeof K=="number"?this.fromNumber(K,J,ne):J==null&&typeof K!="string"?this.fromString(K,256):this.fromString(K,J))}forge$m.jsbn.BigInteger=BigInteger$4;function nbi(){return new BigInteger$4(null)}function am1(K,J,ne,oe,ce,ue){for(;--ue>=0;){var Ae=J*this.data[K++]+ne.data[oe]+ce;ce=Math.floor(Ae/67108864),ne.data[oe++]=Ae&67108863}return ce}function am2(K,J,ne,oe,ce,ue){for(var Ae=J&32767,pe=J>>15;--ue>=0;){var xe=this.data[K]&32767,me=this.data[K++]>>15,ge=pe*xe+me*Ae;xe=Ae*xe+((ge&32767)<<15)+ne.data[oe]+(ce&1073741823),ce=(xe>>>30)+(ge>>>15)+pe*me+(ce>>>30),ne.data[oe++]=xe&1073741823}return ce}function am3(K,J,ne,oe,ce,ue){for(var Ae=J&16383,pe=J>>14;--ue>=0;){var xe=this.data[K]&16383,me=this.data[K++]>>14,ge=pe*xe+me*Ae;xe=Ae*xe+((ge&16383)<<14)+ne.data[oe]+ce,ce=(xe>>28)+(ge>>14)+pe*me,ne.data[oe++]=xe&268435455}return ce}typeof navigator>"u"?(BigInteger$4.prototype.am=am3,dbits=28):navigator.appName=="Microsoft Internet Explorer"?(BigInteger$4.prototype.am=am2,dbits=30):navigator.appName!="Netscape"?(BigInteger$4.prototype.am=am1,dbits=26):(BigInteger$4.prototype.am=am3,dbits=28);BigInteger$4.prototype.DB=dbits;BigInteger$4.prototype.DM=(1<<dbits)-1;BigInteger$4.prototype.DV=1<<dbits;var BI_FP=52;BigInteger$4.prototype.FV=Math.pow(2,BI_FP);BigInteger$4.prototype.F1=BI_FP-dbits;BigInteger$4.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;rr=48;for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr=97;for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr=65;for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(K){return BI_RM.charAt(K)}function intAt(K,J){var ne=BI_RC[K.charCodeAt(J)];return ne??-1}function bnpCopyTo(K){for(var J=this.t-1;J>=0;--J)K.data[J]=this.data[J];K.t=this.t,K.s=this.s}function bnpFromInt(K){this.t=1,this.s=K<0?-1:0,K>0?this.data[0]=K:K<-1?this.data[0]=K+this.DV:this.t=0}function nbv(K){var J=nbi();return J.fromInt(K),J}function bnpFromString(K,J){var ne;if(J==16)ne=4;else if(J==8)ne=3;else if(J==256)ne=8;else if(J==2)ne=1;else if(J==32)ne=5;else if(J==4)ne=2;else{this.fromRadix(K,J);return}this.t=0,this.s=0;for(var oe=K.length,ce=!1,ue=0;--oe>=0;){var Ae=ne==8?K[oe]&255:intAt(K,oe);if(Ae<0){K.charAt(oe)=="-"&&(ce=!0);continue}ce=!1,ue==0?this.data[this.t++]=Ae:ue+ne>this.DB?(this.data[this.t-1]|=(Ae&(1<<this.DB-ue)-1)<<ue,this.data[this.t++]=Ae>>this.DB-ue):this.data[this.t-1]|=Ae<<ue,ue+=ne,ue>=this.DB&&(ue-=this.DB)}ne==8&&K[0]&128&&(this.s=-1,ue>0&&(this.data[this.t-1]|=(1<<this.DB-ue)-1<<ue)),this.clamp(),ce&&BigInteger$4.ZERO.subTo(this,this)}function bnpClamp(){for(var K=this.s&this.DM;this.t>0&&this.data[this.t-1]==K;)--this.t}function bnToString(K){if(this.s<0)return"-"+this.negate().toString(K);var J;if(K==16)J=4;else if(K==8)J=3;else if(K==2)J=1;else if(K==32)J=5;else if(K==4)J=2;else return this.toRadix(K);var ne=(1<<J)-1,oe,ce=!1,ue="",Ae=this.t,pe=this.DB-Ae*this.DB%J;if(Ae-- >0)for(pe<this.DB&&(oe=this.data[Ae]>>pe)>0&&(ce=!0,ue=int2char(oe));Ae>=0;)pe<J?(oe=(this.data[Ae]&(1<<pe)-1)<<J-pe,oe|=this.data[--Ae]>>(pe+=this.DB-J)):(oe=this.data[Ae]>>(pe-=J)&ne,pe<=0&&(pe+=this.DB,--Ae)),oe>0&&(ce=!0),ce&&(ue+=int2char(oe));return ce?ue:"0"}function bnNegate(){var K=nbi();return BigInteger$4.ZERO.subTo(this,K),K}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(K){var J=this.s-K.s;if(J!=0)return J;var ne=this.t;if(J=ne-K.t,J!=0)return this.s<0?-J:J;for(;--ne>=0;)if((J=this.data[ne]-K.data[ne])!=0)return J;return 0}function nbits(K){var J=1,ne;return(ne=K>>>16)!=0&&(K=ne,J+=16),(ne=K>>8)!=0&&(K=ne,J+=8),(ne=K>>4)!=0&&(K=ne,J+=4),(ne=K>>2)!=0&&(K=ne,J+=2),(ne=K>>1)!=0&&(K=ne,J+=1),J}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this.data[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(K,J){var ne;for(ne=this.t-1;ne>=0;--ne)J.data[ne+K]=this.data[ne];for(ne=K-1;ne>=0;--ne)J.data[ne]=0;J.t=this.t+K,J.s=this.s}function bnpDRShiftTo(K,J){for(var ne=K;ne<this.t;++ne)J.data[ne-K]=this.data[ne];J.t=Math.max(this.t-K,0),J.s=this.s}function bnpLShiftTo(K,J){var ne=K%this.DB,oe=this.DB-ne,ce=(1<<oe)-1,ue=Math.floor(K/this.DB),Ae=this.s<<ne&this.DM,pe;for(pe=this.t-1;pe>=0;--pe)J.data[pe+ue+1]=this.data[pe]>>oe|Ae,Ae=(this.data[pe]&ce)<<ne;for(pe=ue-1;pe>=0;--pe)J.data[pe]=0;J.data[ue]=Ae,J.t=this.t+ue+1,J.s=this.s,J.clamp()}function bnpRShiftTo(K,J){J.s=this.s;var ne=Math.floor(K/this.DB);if(ne>=this.t){J.t=0;return}var oe=K%this.DB,ce=this.DB-oe,ue=(1<<oe)-1;J.data[0]=this.data[ne]>>oe;for(var Ae=ne+1;Ae<this.t;++Ae)J.data[Ae-ne-1]|=(this.data[Ae]&ue)<<ce,J.data[Ae-ne]=this.data[Ae]>>oe;oe>0&&(J.data[this.t-ne-1]|=(this.s&ue)<<ce),J.t=this.t-ne,J.clamp()}function bnpSubTo(K,J){for(var ne=0,oe=0,ce=Math.min(K.t,this.t);ne<ce;)oe+=this.data[ne]-K.data[ne],J.data[ne++]=oe&this.DM,oe>>=this.DB;if(K.t<this.t){for(oe-=K.s;ne<this.t;)oe+=this.data[ne],J.data[ne++]=oe&this.DM,oe>>=this.DB;oe+=this.s}else{for(oe+=this.s;ne<K.t;)oe-=K.data[ne],J.data[ne++]=oe&this.DM,oe>>=this.DB;oe-=K.s}J.s=oe<0?-1:0,oe<-1?J.data[ne++]=this.DV+oe:oe>0&&(J.data[ne++]=oe),J.t=ne,J.clamp()}function bnpMultiplyTo(K,J){var ne=this.abs(),oe=K.abs(),ce=ne.t;for(J.t=ce+oe.t;--ce>=0;)J.data[ce]=0;for(ce=0;ce<oe.t;++ce)J.data[ce+ne.t]=ne.am(0,oe.data[ce],J,ce,0,ne.t);J.s=0,J.clamp(),this.s!=K.s&&BigInteger$4.ZERO.subTo(J,J)}function bnpSquareTo(K){for(var J=this.abs(),ne=K.t=2*J.t;--ne>=0;)K.data[ne]=0;for(ne=0;ne<J.t-1;++ne){var oe=J.am(ne,J.data[ne],K,2*ne,0,1);(K.data[ne+J.t]+=J.am(ne+1,2*J.data[ne],K,2*ne+1,oe,J.t-ne-1))>=J.DV&&(K.data[ne+J.t]-=J.DV,K.data[ne+J.t+1]=1)}K.t>0&&(K.data[K.t-1]+=J.am(ne,J.data[ne],K,2*ne,0,1)),K.s=0,K.clamp()}function bnpDivRemTo(K,J,ne){var oe=K.abs();if(!(oe.t<=0)){var ce=this.abs();if(ce.t<oe.t){J!=null&&J.fromInt(0),ne!=null&&this.copyTo(ne);return}ne==null&&(ne=nbi());var ue=nbi(),Ae=this.s,pe=K.s,xe=this.DB-nbits(oe.data[oe.t-1]);xe>0?(oe.lShiftTo(xe,ue),ce.lShiftTo(xe,ne)):(oe.copyTo(ue),ce.copyTo(ne));var me=ue.t,ge=ue.data[me-1];if(ge!=0){var ye=ge*(1<<this.F1)+(me>1?ue.data[me-2]>>this.F2:0),Se=this.FV/ye,Te=(1<<this.F1)/ye,Ne=1<<this.F2,$e=ne.t,ke=$e-me,je=J??nbi();for(ue.dlShiftTo(ke,je),ne.compareTo(je)>=0&&(ne.data[ne.t++]=1,ne.subTo(je,ne)),BigInteger$4.ONE.dlShiftTo(me,je),je.subTo(ue,ue);ue.t<me;)ue.data[ue.t++]=0;for(;--ke>=0;){var Ke=ne.data[--$e]==ge?this.DM:Math.floor(ne.data[$e]*Se+(ne.data[$e-1]+Ne)*Te);if((ne.data[$e]+=ue.am(0,Ke,ne,ke,0,me))<Ke)for(ue.dlShiftTo(ke,je),ne.subTo(je,ne);ne.data[$e]<--Ke;)ne.subTo(je,ne)}J!=null&&(ne.drShiftTo(me,J),Ae!=pe&&BigInteger$4.ZERO.subTo(J,J)),ne.t=me,ne.clamp(),xe>0&&ne.rShiftTo(xe,ne),Ae<0&&BigInteger$4.ZERO.subTo(ne,ne)}}}function bnMod(K){var J=nbi();return this.abs().divRemTo(K,null,J),this.s<0&&J.compareTo(BigInteger$4.ZERO)>0&&K.subTo(J,J),J}function Classic(K){this.m=K}function cConvert(K){return K.s<0||K.compareTo(this.m)>=0?K.mod(this.m):K}function cRevert(K){return K}function cReduce(K){K.divRemTo(this.m,null,K)}function cMulTo(K,J,ne){K.multiplyTo(J,ne),this.reduce(ne)}function cSqrTo(K,J){K.squareTo(J),this.reduce(J)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var K=this.data[0];if(!(K&1))return 0;var J=K&3;return J=J*(2-(K&15)*J)&15,J=J*(2-(K&255)*J)&255,J=J*(2-((K&65535)*J&65535))&65535,J=J*(2-K*J%this.DV)%this.DV,J>0?this.DV-J:-J}function Montgomery(K){this.m=K,this.mp=K.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<K.DB-15)-1,this.mt2=2*K.t}function montConvert(K){var J=nbi();return K.abs().dlShiftTo(this.m.t,J),J.divRemTo(this.m,null,J),K.s<0&&J.compareTo(BigInteger$4.ZERO)>0&&this.m.subTo(J,J),J}function montRevert(K){var J=nbi();return K.copyTo(J),this.reduce(J),J}function montReduce(K){for(;K.t<=this.mt2;)K.data[K.t++]=0;for(var J=0;J<this.m.t;++J){var ne=K.data[J]&32767,oe=ne*this.mpl+((ne*this.mph+(K.data[J]>>15)*this.mpl&this.um)<<15)&K.DM;for(ne=J+this.m.t,K.data[ne]+=this.m.am(0,oe,K,J,0,this.m.t);K.data[ne]>=K.DV;)K.data[ne]-=K.DV,K.data[++ne]++}K.clamp(),K.drShiftTo(this.m.t,K),K.compareTo(this.m)>=0&&K.subTo(this.m,K)}function montSqrTo(K,J){K.squareTo(J),this.reduce(J)}function montMulTo(K,J,ne){K.multiplyTo(J,ne),this.reduce(ne)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this.data[0]&1:this.s)==0}function bnpExp(K,J){if(K>4294967295||K<1)return BigInteger$4.ONE;var ne=nbi(),oe=nbi(),ce=J.convert(this),ue=nbits(K)-1;for(ce.copyTo(ne);--ue>=0;)if(J.sqrTo(ne,oe),(K&1<<ue)>0)J.mulTo(oe,ce,ne);else{var Ae=ne;ne=oe,oe=Ae}return J.revert(ne)}function bnModPowInt(K,J){var ne;return K<256||J.isEven()?ne=new Classic(J):ne=new Montgomery(J),this.exp(K,ne)}BigInteger$4.prototype.copyTo=bnpCopyTo;BigInteger$4.prototype.fromInt=bnpFromInt;BigInteger$4.prototype.fromString=bnpFromString;BigInteger$4.prototype.clamp=bnpClamp;BigInteger$4.prototype.dlShiftTo=bnpDLShiftTo;BigInteger$4.prototype.drShiftTo=bnpDRShiftTo;BigInteger$4.prototype.lShiftTo=bnpLShiftTo;BigInteger$4.prototype.rShiftTo=bnpRShiftTo;BigInteger$4.prototype.subTo=bnpSubTo;BigInteger$4.prototype.multiplyTo=bnpMultiplyTo;BigInteger$4.prototype.squareTo=bnpSquareTo;BigInteger$4.prototype.divRemTo=bnpDivRemTo;BigInteger$4.prototype.invDigit=bnpInvDigit;BigInteger$4.prototype.isEven=bnpIsEven;BigInteger$4.prototype.exp=bnpExp;BigInteger$4.prototype.toString=bnToString;BigInteger$4.prototype.negate=bnNegate;BigInteger$4.prototype.abs=bnAbs;BigInteger$4.prototype.compareTo=bnCompareTo;BigInteger$4.prototype.bitLength=bnBitLength;BigInteger$4.prototype.mod=bnMod;BigInteger$4.prototype.modPowInt=bnModPowInt;BigInteger$4.ZERO=nbv(0);BigInteger$4.ONE=nbv(1);function bnClone(){var K=nbi();return this.copyTo(K),K}function bnIntValue(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function bnByteValue(){return this.t==0?this.s:this.data[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this.data[0]<<16>>16}function bnpChunkSize(K){return Math.floor(Math.LN2*this.DB/Math.log(K))}function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function bnpToRadix(K){if(K==null&&(K=10),this.signum()==0||K<2||K>36)return"0";var J=this.chunkSize(K),ne=Math.pow(K,J),oe=nbv(ne),ce=nbi(),ue=nbi(),Ae="";for(this.divRemTo(oe,ce,ue);ce.signum()>0;)Ae=(ne+ue.intValue()).toString(K).substr(1)+Ae,ce.divRemTo(oe,ce,ue);return ue.intValue().toString(K)+Ae}function bnpFromRadix(K,J){this.fromInt(0),J==null&&(J=10);for(var ne=this.chunkSize(J),oe=Math.pow(J,ne),ce=!1,ue=0,Ae=0,pe=0;pe<K.length;++pe){var xe=intAt(K,pe);if(xe<0){K.charAt(pe)=="-"&&this.signum()==0&&(ce=!0);continue}Ae=J*Ae+xe,++ue>=ne&&(this.dMultiply(oe),this.dAddOffset(Ae,0),ue=0,Ae=0)}ue>0&&(this.dMultiply(Math.pow(J,ue)),this.dAddOffset(Ae,0)),ce&&BigInteger$4.ZERO.subTo(this,this)}function bnpFromNumber(K,J,ne){if(typeof J=="number")if(K<2)this.fromInt(1);else for(this.fromNumber(K,ne),this.testBit(K-1)||this.bitwiseTo(BigInteger$4.ONE.shiftLeft(K-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(J);)this.dAddOffset(2,0),this.bitLength()>K&&this.subTo(BigInteger$4.ONE.shiftLeft(K-1),this);else{var oe=new Array,ce=K&7;oe.length=(K>>3)+1,J.nextBytes(oe),ce>0?oe[0]&=(1<<ce)-1:oe[0]=0,this.fromString(oe,256)}}function bnToByteArray(){var K=this.t,J=new Array;J[0]=this.s;var ne=this.DB-K*this.DB%8,oe,ce=0;if(K-- >0)for(ne<this.DB&&(oe=this.data[K]>>ne)!=(this.s&this.DM)>>ne&&(J[ce++]=oe|this.s<<this.DB-ne);K>=0;)ne<8?(oe=(this.data[K]&(1<<ne)-1)<<8-ne,oe|=this.data[--K]>>(ne+=this.DB-8)):(oe=this.data[K]>>(ne-=8)&255,ne<=0&&(ne+=this.DB,--K)),oe&128&&(oe|=-256),ce==0&&(this.s&128)!=(oe&128)&&++ce,(ce>0||oe!=this.s)&&(J[ce++]=oe);return J}function bnEquals(K){return this.compareTo(K)==0}function bnMin(K){return this.compareTo(K)<0?this:K}function bnMax(K){return this.compareTo(K)>0?this:K}function bnpBitwiseTo(K,J,ne){var oe,ce,ue=Math.min(K.t,this.t);for(oe=0;oe<ue;++oe)ne.data[oe]=J(this.data[oe],K.data[oe]);if(K.t<this.t){for(ce=K.s&this.DM,oe=ue;oe<this.t;++oe)ne.data[oe]=J(this.data[oe],ce);ne.t=this.t}else{for(ce=this.s&this.DM,oe=ue;oe<K.t;++oe)ne.data[oe]=J(ce,K.data[oe]);ne.t=K.t}ne.s=J(this.s,K.s),ne.clamp()}function op_and(K,J){return K&J}function bnAnd(K){var J=nbi();return this.bitwiseTo(K,op_and,J),J}function op_or(K,J){return K|J}function bnOr(K){var J=nbi();return this.bitwiseTo(K,op_or,J),J}function op_xor(K,J){return K^J}function bnXor(K){var J=nbi();return this.bitwiseTo(K,op_xor,J),J}function op_andnot(K,J){return K&~J}function bnAndNot(K){var J=nbi();return this.bitwiseTo(K,op_andnot,J),J}function bnNot(){for(var K=nbi(),J=0;J<this.t;++J)K.data[J]=this.DM&~this.data[J];return K.t=this.t,K.s=~this.s,K}function bnShiftLeft(K){var J=nbi();return K<0?this.rShiftTo(-K,J):this.lShiftTo(K,J),J}function bnShiftRight(K){var J=nbi();return K<0?this.lShiftTo(-K,J):this.rShiftTo(K,J),J}function lbit(K){if(K==0)return-1;var J=0;return K&65535||(K>>=16,J+=16),K&255||(K>>=8,J+=8),K&15||(K>>=4,J+=4),K&3||(K>>=2,J+=2),K&1||++J,J}function bnGetLowestSetBit(){for(var K=0;K<this.t;++K)if(this.data[K]!=0)return K*this.DB+lbit(this.data[K]);return this.s<0?this.t*this.DB:-1}function cbit(K){for(var J=0;K!=0;)K&=K-1,++J;return J}function bnBitCount(){for(var K=0,J=this.s&this.DM,ne=0;ne<this.t;++ne)K+=cbit(this.data[ne]^J);return K}function bnTestBit(K){var J=Math.floor(K/this.DB);return J>=this.t?this.s!=0:(this.data[J]&1<<K%this.DB)!=0}function bnpChangeBit(K,J){var ne=BigInteger$4.ONE.shiftLeft(K);return this.bitwiseTo(ne,J,ne),ne}function bnSetBit(K){return this.changeBit(K,op_or)}function bnClearBit(K){return this.changeBit(K,op_andnot)}function bnFlipBit(K){return this.changeBit(K,op_xor)}function bnpAddTo(K,J){for(var ne=0,oe=0,ce=Math.min(K.t,this.t);ne<ce;)oe+=this.data[ne]+K.data[ne],J.data[ne++]=oe&this.DM,oe>>=this.DB;if(K.t<this.t){for(oe+=K.s;ne<this.t;)oe+=this.data[ne],J.data[ne++]=oe&this.DM,oe>>=this.DB;oe+=this.s}else{for(oe+=this.s;ne<K.t;)oe+=K.data[ne],J.data[ne++]=oe&this.DM,oe>>=this.DB;oe+=K.s}J.s=oe<0?-1:0,oe>0?J.data[ne++]=oe:oe<-1&&(J.data[ne++]=this.DV+oe),J.t=ne,J.clamp()}function bnAdd(K){var J=nbi();return this.addTo(K,J),J}function bnSubtract(K){var J=nbi();return this.subTo(K,J),J}function bnMultiply(K){var J=nbi();return this.multiplyTo(K,J),J}function bnDivide(K){var J=nbi();return this.divRemTo(K,J,null),J}function bnRemainder(K){var J=nbi();return this.divRemTo(K,null,J),J}function bnDivideAndRemainder(K){var J=nbi(),ne=nbi();return this.divRemTo(K,J,ne),new Array(J,ne)}function bnpDMultiply(K){this.data[this.t]=this.am(0,K-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(K,J){if(K!=0){for(;this.t<=J;)this.data[this.t++]=0;for(this.data[J]+=K;this.data[J]>=this.DV;)this.data[J]-=this.DV,++J>=this.t&&(this.data[this.t++]=0),++this.data[J]}}function NullExp(){}function nNop(K){return K}function nMulTo(K,J,ne){K.multiplyTo(J,ne)}function nSqrTo(K,J){K.squareTo(J)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(K){return this.exp(K,new NullExp)}function bnpMultiplyLowerTo(K,J,ne){var oe=Math.min(this.t+K.t,J);for(ne.s=0,ne.t=oe;oe>0;)ne.data[--oe]=0;var ce;for(ce=ne.t-this.t;oe<ce;++oe)ne.data[oe+this.t]=this.am(0,K.data[oe],ne,oe,0,this.t);for(ce=Math.min(K.t,J);oe<ce;++oe)this.am(0,K.data[oe],ne,oe,0,J-oe);ne.clamp()}function bnpMultiplyUpperTo(K,J,ne){--J;var oe=ne.t=this.t+K.t-J;for(ne.s=0;--oe>=0;)ne.data[oe]=0;for(oe=Math.max(J-this.t,0);oe<K.t;++oe)ne.data[this.t+oe-J]=this.am(J-oe,K.data[oe],ne,0,0,this.t+oe-J);ne.clamp(),ne.drShiftTo(1,ne)}function Barrett(K){this.r2=nbi(),this.q3=nbi(),BigInteger$4.ONE.dlShiftTo(2*K.t,this.r2),this.mu=this.r2.divide(K),this.m=K}function barrettConvert(K){if(K.s<0||K.t>2*this.m.t)return K.mod(this.m);if(K.compareTo(this.m)<0)return K;var J=nbi();return K.copyTo(J),this.reduce(J),J}function barrettRevert(K){return K}function barrettReduce(K){for(K.drShiftTo(this.m.t-1,this.r2),K.t>this.m.t+1&&(K.t=this.m.t+1,K.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);K.compareTo(this.r2)<0;)K.dAddOffset(1,this.m.t+1);for(K.subTo(this.r2,K);K.compareTo(this.m)>=0;)K.subTo(this.m,K)}function barrettSqrTo(K,J){K.squareTo(J),this.reduce(J)}function barrettMulTo(K,J,ne){K.multiplyTo(J,ne),this.reduce(ne)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(K,J){var ne=K.bitLength(),oe,ce=nbv(1),ue;if(ne<=0)return ce;ne<18?oe=1:ne<48?oe=3:ne<144?oe=4:ne<768?oe=5:oe=6,ne<8?ue=new Classic(J):J.isEven()?ue=new Barrett(J):ue=new Montgomery(J);var Ae=new Array,pe=3,xe=oe-1,me=(1<<oe)-1;if(Ae[1]=ue.convert(this),oe>1){var ge=nbi();for(ue.sqrTo(Ae[1],ge);pe<=me;)Ae[pe]=nbi(),ue.mulTo(ge,Ae[pe-2],Ae[pe]),pe+=2}var ye=K.t-1,Se,Te=!0,Ne=nbi(),$e;for(ne=nbits(K.data[ye])-1;ye>=0;){for(ne>=xe?Se=K.data[ye]>>ne-xe&me:(Se=(K.data[ye]&(1<<ne+1)-1)<<xe-ne,ye>0&&(Se|=K.data[ye-1]>>this.DB+ne-xe)),pe=oe;!(Se&1);)Se>>=1,--pe;if((ne-=pe)<0&&(ne+=this.DB,--ye),Te)Ae[Se].copyTo(ce),Te=!1;else{for(;pe>1;)ue.sqrTo(ce,Ne),ue.sqrTo(Ne,ce),pe-=2;pe>0?ue.sqrTo(ce,Ne):($e=ce,ce=Ne,Ne=$e),ue.mulTo(Ne,Ae[Se],ce)}for(;ye>=0&&!(K.data[ye]&1<<ne);)ue.sqrTo(ce,Ne),$e=ce,ce=Ne,Ne=$e,--ne<0&&(ne=this.DB-1,--ye)}return ue.revert(ce)}function bnGCD(K){var J=this.s<0?this.negate():this.clone(),ne=K.s<0?K.negate():K.clone();if(J.compareTo(ne)<0){var oe=J;J=ne,ne=oe}var ce=J.getLowestSetBit(),ue=ne.getLowestSetBit();if(ue<0)return J;for(ce<ue&&(ue=ce),ue>0&&(J.rShiftTo(ue,J),ne.rShiftTo(ue,ne));J.signum()>0;)(ce=J.getLowestSetBit())>0&&J.rShiftTo(ce,J),(ce=ne.getLowestSetBit())>0&&ne.rShiftTo(ce,ne),J.compareTo(ne)>=0?(J.subTo(ne,J),J.rShiftTo(1,J)):(ne.subTo(J,ne),ne.rShiftTo(1,ne));return ue>0&&ne.lShiftTo(ue,ne),ne}function bnpModInt(K){if(K<=0)return 0;var J=this.DV%K,ne=this.s<0?K-1:0;if(this.t>0)if(J==0)ne=this.data[0]%K;else for(var oe=this.t-1;oe>=0;--oe)ne=(J*ne+this.data[oe])%K;return ne}function bnModInverse(K){var J=K.isEven();if(this.isEven()&&J||K.signum()==0)return BigInteger$4.ZERO;for(var ne=K.clone(),oe=this.clone(),ce=nbv(1),ue=nbv(0),Ae=nbv(0),pe=nbv(1);ne.signum()!=0;){for(;ne.isEven();)ne.rShiftTo(1,ne),J?((!ce.isEven()||!ue.isEven())&&(ce.addTo(this,ce),ue.subTo(K,ue)),ce.rShiftTo(1,ce)):ue.isEven()||ue.subTo(K,ue),ue.rShiftTo(1,ue);for(;oe.isEven();)oe.rShiftTo(1,oe),J?((!Ae.isEven()||!pe.isEven())&&(Ae.addTo(this,Ae),pe.subTo(K,pe)),Ae.rShiftTo(1,Ae)):pe.isEven()||pe.subTo(K,pe),pe.rShiftTo(1,pe);ne.compareTo(oe)>=0?(ne.subTo(oe,ne),J&&ce.subTo(Ae,ce),ue.subTo(pe,ue)):(oe.subTo(ne,oe),J&&Ae.subTo(ce,Ae),pe.subTo(ue,pe))}if(oe.compareTo(BigInteger$4.ONE)!=0)return BigInteger$4.ZERO;if(pe.compareTo(K)>=0)return pe.subtract(K);if(pe.signum()<0)pe.addTo(K,pe);else return pe;return pe.signum()<0?pe.add(K):pe}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(K){var J,ne=this.abs();if(ne.t==1&&ne.data[0]<=lowprimes[lowprimes.length-1]){for(J=0;J<lowprimes.length;++J)if(ne.data[0]==lowprimes[J])return!0;return!1}if(ne.isEven())return!1;for(J=1;J<lowprimes.length;){for(var oe=lowprimes[J],ce=J+1;ce<lowprimes.length&&oe<lplim;)oe*=lowprimes[ce++];for(oe=ne.modInt(oe);J<ce;)if(oe%lowprimes[J++]==0)return!1}return ne.millerRabin(K)}function bnpMillerRabin(K){var J=this.subtract(BigInteger$4.ONE),ne=J.getLowestSetBit();if(ne<=0)return!1;for(var oe=J.shiftRight(ne),ce=bnGetPrng(),ue,Ae=0;Ae<K;++Ae){do ue=new BigInteger$4(this.bitLength(),ce);while(ue.compareTo(BigInteger$4.ONE)<=0||ue.compareTo(J)>=0);var pe=ue.modPow(oe,this);if(pe.compareTo(BigInteger$4.ONE)!=0&&pe.compareTo(J)!=0){for(var xe=1;xe++<ne&&pe.compareTo(J)!=0;)if(pe=pe.modPowInt(2,this),pe.compareTo(BigInteger$4.ONE)==0)return!1;if(pe.compareTo(J)!=0)return!1}}return!0}function bnGetPrng(){return{nextBytes:function(K){for(var J=0;J<K.length;++J)K[J]=Math.floor(Math.random()*256)}}}BigInteger$4.prototype.chunkSize=bnpChunkSize;BigInteger$4.prototype.toRadix=bnpToRadix;BigInteger$4.prototype.fromRadix=bnpFromRadix;BigInteger$4.prototype.fromNumber=bnpFromNumber;BigInteger$4.prototype.bitwiseTo=bnpBitwiseTo;BigInteger$4.prototype.changeBit=bnpChangeBit;BigInteger$4.prototype.addTo=bnpAddTo;BigInteger$4.prototype.dMultiply=bnpDMultiply;BigInteger$4.prototype.dAddOffset=bnpDAddOffset;BigInteger$4.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger$4.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger$4.prototype.modInt=bnpModInt;BigInteger$4.prototype.millerRabin=bnpMillerRabin;BigInteger$4.prototype.clone=bnClone;BigInteger$4.prototype.intValue=bnIntValue;BigInteger$4.prototype.byteValue=bnByteValue;BigInteger$4.prototype.shortValue=bnShortValue;BigInteger$4.prototype.signum=bnSigNum;BigInteger$4.prototype.toByteArray=bnToByteArray;BigInteger$4.prototype.equals=bnEquals;BigInteger$4.prototype.min=bnMin;BigInteger$4.prototype.max=bnMax;BigInteger$4.prototype.and=bnAnd;BigInteger$4.prototype.or=bnOr;BigInteger$4.prototype.xor=bnXor;BigInteger$4.prototype.andNot=bnAndNot;BigInteger$4.prototype.not=bnNot;BigInteger$4.prototype.shiftLeft=bnShiftLeft;BigInteger$4.prototype.shiftRight=bnShiftRight;BigInteger$4.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger$4.prototype.bitCount=bnBitCount;BigInteger$4.prototype.testBit=bnTestBit;BigInteger$4.prototype.setBit=bnSetBit;BigInteger$4.prototype.clearBit=bnClearBit;BigInteger$4.prototype.flipBit=bnFlipBit;BigInteger$4.prototype.add=bnAdd;BigInteger$4.prototype.subtract=bnSubtract;BigInteger$4.prototype.multiply=bnMultiply;BigInteger$4.prototype.divide=bnDivide;BigInteger$4.prototype.remainder=bnRemainder;BigInteger$4.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger$4.prototype.modPow=bnModPow;BigInteger$4.prototype.modInverse=bnModInverse;BigInteger$4.prototype.pow=bnPow;BigInteger$4.prototype.gcd=bnGCD;BigInteger$4.prototype.isProbablePrime=bnIsProbablePrime;var forge$l=forge$D,sha1=forge$l.sha1=forge$l.sha1||{};forge$l.md.sha1=forge$l.md.algorithms.sha1=sha1;sha1.create=function(){_initialized$1||_init$1();var K=null,J=forge$l.util.createBuffer(),ne=new Array(80),oe={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return oe.start=function(){oe.messageLength=0,oe.fullMessageLength=oe.messageLength64=[];for(var ce=oe.messageLengthSize/4,ue=0;ue<ce;++ue)oe.fullMessageLength.push(0);return J=forge$l.util.createBuffer(),K={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},oe},oe.start(),oe.update=function(ce,ue){ue==="utf8"&&(ce=forge$l.util.encodeUtf8(ce));var Ae=ce.length;oe.messageLength+=Ae,Ae=[Ae/4294967296>>>0,Ae>>>0];for(var pe=oe.fullMessageLength.length-1;pe>=0;--pe)oe.fullMessageLength[pe]+=Ae[1],Ae[1]=Ae[0]+(oe.fullMessageLength[pe]/4294967296>>>0),oe.fullMessageLength[pe]=oe.fullMessageLength[pe]>>>0,Ae[0]=Ae[1]/4294967296>>>0;return J.putBytes(ce),_update$1(K,ne,J),(J.read>2048||J.length()===0)&&J.compact(),oe},oe.digest=function(){var ce=forge$l.util.createBuffer();ce.putBytes(J.bytes());var ue=oe.fullMessageLength[oe.fullMessageLength.length-1]+oe.messageLengthSize,Ae=ue&oe.blockLength-1;ce.putBytes(_padding$1.substr(0,oe.blockLength-Ae));for(var pe,xe,me=oe.fullMessageLength[0]*8,ge=0;ge<oe.fullMessageLength.length-1;++ge)pe=oe.fullMessageLength[ge+1]*8,xe=pe/4294967296>>>0,me+=xe,ce.putInt32(me>>>0),me=pe>>>0;ce.putInt32(me);var ye={h0:K.h0,h1:K.h1,h2:K.h2,h3:K.h3,h4:K.h4};_update$1(ye,ne,ce);var Se=forge$l.util.createBuffer();return Se.putInt32(ye.h0),Se.putInt32(ye.h1),Se.putInt32(ye.h2),Se.putInt32(ye.h3),Se.putInt32(ye.h4),Se},oe};var _padding$1=null,_initialized$1=!1;function _init$1(){_padding$1="",_padding$1+=forge$l.util.fillString("\0",64),_initialized$1=!0}function _update$1(K,J,ne){for(var oe,ce,ue,Ae,pe,xe,me,ge,ye=ne.length();ye>=64;){for(ce=K.h0,ue=K.h1,Ae=K.h2,pe=K.h3,xe=K.h4,ge=0;ge<16;++ge)oe=ne.getInt32(),J[ge]=oe,me=pe^ue&(Ae^pe),oe=(ce<<5|ce>>>27)+me+xe+1518500249+oe,xe=pe,pe=Ae,Ae=(ue<<30|ue>>>2)>>>0,ue=ce,ce=oe;for(;ge<20;++ge)oe=J[ge-3]^J[ge-8]^J[ge-14]^J[ge-16],oe=oe<<1|oe>>>31,J[ge]=oe,me=pe^ue&(Ae^pe),oe=(ce<<5|ce>>>27)+me+xe+1518500249+oe,xe=pe,pe=Ae,Ae=(ue<<30|ue>>>2)>>>0,ue=ce,ce=oe;for(;ge<32;++ge)oe=J[ge-3]^J[ge-8]^J[ge-14]^J[ge-16],oe=oe<<1|oe>>>31,J[ge]=oe,me=ue^Ae^pe,oe=(ce<<5|ce>>>27)+me+xe+1859775393+oe,xe=pe,pe=Ae,Ae=(ue<<30|ue>>>2)>>>0,ue=ce,ce=oe;for(;ge<40;++ge)oe=J[ge-6]^J[ge-16]^J[ge-28]^J[ge-32],oe=oe<<2|oe>>>30,J[ge]=oe,me=ue^Ae^pe,oe=(ce<<5|ce>>>27)+me+xe+1859775393+oe,xe=pe,pe=Ae,Ae=(ue<<30|ue>>>2)>>>0,ue=ce,ce=oe;for(;ge<60;++ge)oe=J[ge-6]^J[ge-16]^J[ge-28]^J[ge-32],oe=oe<<2|oe>>>30,J[ge]=oe,me=ue&Ae|pe&(ue^Ae),oe=(ce<<5|ce>>>27)+me+xe+2400959708+oe,xe=pe,pe=Ae,Ae=(ue<<30|ue>>>2)>>>0,ue=ce,ce=oe;for(;ge<80;++ge)oe=J[ge-6]^J[ge-16]^J[ge-28]^J[ge-32],oe=oe<<2|oe>>>30,J[ge]=oe,me=ue^Ae^pe,oe=(ce<<5|ce>>>27)+me+xe+3395469782+oe,xe=pe,pe=Ae,Ae=(ue<<30|ue>>>2)>>>0,ue=ce,ce=oe;K.h0=K.h0+ce|0,K.h1=K.h1+ue|0,K.h2=K.h2+Ae|0,K.h3=K.h3+pe|0,K.h4=K.h4+xe|0,ye-=64}}var forge$k=forge$D,pkcs1=forge$k.pkcs1=forge$k.pkcs1||{};pkcs1.encode_rsa_oaep=function(K,J,ne){var oe,ce,ue,Ae;typeof ne=="string"?(oe=ne,ce=arguments[3]||void 0,ue=arguments[4]||void 0):ne&&(oe=ne.label||void 0,ce=ne.seed||void 0,ue=ne.md||void 0,ne.mgf1&&ne.mgf1.md&&(Ae=ne.mgf1.md)),ue?ue.start():ue=forge$k.md.sha1.create(),Ae||(Ae=ue);var pe=Math.ceil(K.n.bitLength()/8),xe=pe-2*ue.digestLength-2;if(J.length>xe){var me=new Error("RSAES-OAEP input message length is too long.");throw me.length=J.length,me.maxLength=xe,me}oe||(oe=""),ue.update(oe,"raw");for(var ge=ue.digest(),ye="",Se=xe-J.length,Te=0;Te<Se;Te++)ye+="\0";var Ne=ge.getBytes()+ye+""+J;if(!ce)ce=forge$k.random.getBytes(ue.digestLength);else if(ce.length!==ue.digestLength){var me=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw me.seedLength=ce.length,me.digestLength=ue.digestLength,me}var $e=rsa_mgf1(ce,pe-ue.digestLength-1,Ae),ke=forge$k.util.xorBytes(Ne,$e,Ne.length),je=rsa_mgf1(ke,ue.digestLength,Ae),Ke=forge$k.util.xorBytes(ce,je,ce.length);return"\0"+Ke+ke};pkcs1.decode_rsa_oaep=function(K,J,ne){var oe,ce,ue;typeof ne=="string"?(oe=ne,ce=arguments[3]||void 0):ne&&(oe=ne.label||void 0,ce=ne.md||void 0,ne.mgf1&&ne.mgf1.md&&(ue=ne.mgf1.md));var Ae=Math.ceil(K.n.bitLength()/8);if(J.length!==Ae){var ke=new Error("RSAES-OAEP encoded message length is invalid.");throw ke.length=J.length,ke.expectedLength=Ae,ke}if(ce===void 0?ce=forge$k.md.sha1.create():ce.start(),ue||(ue=ce),Ae<2*ce.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");oe||(oe=""),ce.update(oe,"raw");for(var pe=ce.digest().getBytes(),xe=J.charAt(0),me=J.substring(1,ce.digestLength+1),ge=J.substring(1+ce.digestLength),ye=rsa_mgf1(ge,ce.digestLength,ue),Se=forge$k.util.xorBytes(me,ye,me.length),Te=rsa_mgf1(Se,Ae-ce.digestLength-1,ue),Ne=forge$k.util.xorBytes(ge,Te,ge.length),$e=Ne.substring(0,ce.digestLength),ke=xe!=="\0",je=0;je<ce.digestLength;++je)ke|=pe.charAt(je)!==$e.charAt(je);for(var Ke=1,Ye=ce.digestLength,ze=ce.digestLength;ze<Ne.length;ze++){var Xe=Ne.charCodeAt(ze),Je=Xe&1^1,rt=Ke?65534:0;ke|=Xe&rt,Ke=Ke&Je,Ye+=Ke}if(ke||Ne.charCodeAt(Ye)!==1)throw new Error("Invalid RSAES-OAEP padding.");return Ne.substring(Ye+1)};function rsa_mgf1(K,J,ne){ne||(ne=forge$k.md.sha1.create());for(var oe="",ce=Math.ceil(J/ne.digestLength),ue=0;ue<ce;++ue){var Ae=String.fromCharCode(ue>>24&255,ue>>16&255,ue>>8&255,ue&255);ne.start(),ne.update(K+Ae),oe+=ne.digest().getBytes()}return oe.substring(0,J)}var forge$j=forge$D;(function(){if(forge$j.prime){forge$j.prime;return}var K=forge$j.prime=forge$j.prime||{},J=forge$j.jsbn.BigInteger,ne=[6,4,2,4,2,4,6,2],oe=new J(null);oe.fromInt(30);var ce=function(ye,Se){return ye|Se};K.generateProbablePrime=function(ye,Se,Te){typeof Se=="function"&&(Te=Se,Se={}),Se=Se||{};var Ne=Se.algorithm||"PRIMEINC";typeof Ne=="string"&&(Ne={name:Ne}),Ne.options=Ne.options||{};var $e=Se.prng||forge$j.random,ke={nextBytes:function(je){for(var Ke=$e.getBytesSync(je.length),Ye=0;Ye<je.length;++Ye)je[Ye]=Ke.charCodeAt(Ye)}};if(Ne.name==="PRIMEINC")return ue(ye,ke,Ne.options,Te);throw new Error("Invalid prime generation algorithm: "+Ne.name)};function ue(ye,Se,Te,Ne){return"workers"in Te?xe(ye,Se,Te,Ne):Ae(ye,Se,Te,Ne)}function Ae(ye,Se,Te,Ne){var $e=me(ye,Se),ke=0,je=ge($e.bitLength());"millerRabinTests"in Te&&(je=Te.millerRabinTests);var Ke=10;"maxBlockTime"in Te&&(Ke=Te.maxBlockTime),pe($e,ye,Se,ke,je,Ke,Ne)}function pe(ye,Se,Te,Ne,$e,ke,je){var Ke=+new Date;do{if(ye.bitLength()>Se&&(ye=me(Se,Te)),ye.isProbablePrime($e))return je(null,ye);ye.dAddOffset(ne[Ne++%8],0)}while(ke<0||+new Date-Ke<ke);forge$j.util.setImmediate(function(){pe(ye,Se,Te,Ne,$e,ke,je)})}function xe(ye,Se,Te,Ne){if(typeof Worker>"u")return Ae(ye,Se,Te,Ne);var $e=me(ye,Se),ke=Te.workers,je=Te.workLoad||100,Ke=je*30/8,Ye=Te.workerScript||"forge/prime.worker.js";if(ke===-1)return forge$j.util.estimateCores(function(Xe,Je){Xe&&(Je=2),ke=Je-1,ze()});ze();function ze(){ke=Math.max(1,ke);for(var Xe=[],Je=0;Je<ke;++Je)Xe[Je]=new Worker(Ye);for(var Je=0;Je<ke;++Je)Xe[Je].addEventListener("message",Ze);var rt=!1;function Ze(et){if(!rt){var nt=et.data;if(nt.found){for(var Ge=0;Ge<Xe.length;++Ge)Xe[Ge].terminate();return rt=!0,Ne(null,new J(nt.prime,16))}$e.bitLength()>ye&&($e=me(ye,Se));var ve=$e.toString(16);et.target.postMessage({hex:ve,workLoad:je}),$e.dAddOffset(Ke,0)}}}}function me(ye,Se){var Te=new J(ye,Se),Ne=ye-1;return Te.testBit(Ne)||Te.bitwiseTo(J.ONE.shiftLeft(Ne),ce,Te),Te.dAddOffset(31-Te.mod(oe).byteValue(),0),Te}function ge(ye){return ye<=100?27:ye<=150?18:ye<=200?15:ye<=250?12:ye<=300?9:ye<=350?8:ye<=400?7:ye<=500?6:ye<=600?5:ye<=800?4:ye<=1250?3:2}})();var forge$i=forge$D;if(typeof BigInteger$3>"u")var BigInteger$3=forge$i.jsbn.BigInteger;var _crypto=forge$i.util.isNodejs?requireCryptoBrowserify():null,asn1$7=forge$i.asn1,util=forge$i.util;forge$i.pki=forge$i.pki||{};forge$i.pki.rsa=forge$i.rsa=forge$i.rsa||{};var pki$4=forge$i.pki,GCD_30_DELTA=[6,4,2,4,2,4,6,2],privateKeyValidator$1={name:"PrivateKeyInfo",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},rsaPrivateKeyValidator={name:"RSAPrivateKey",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},rsaPublicKeyValidator={name:"RSAPublicKey",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},publicKeyValidator$2=forge$i.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},digestInfoValidator={name:"DigestInfo",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},emsaPkcs1v15encode=function(K){var J;if(K.algorithm in pki$4.oids)J=pki$4.oids[K.algorithm];else{var ne=new Error("Unknown message digest algorithm.");throw ne.algorithm=K.algorithm,ne}var oe=asn1$7.oidToDer(J).getBytes(),ce=asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[]),ue=asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[]);ue.value.push(asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OID,!1,oe)),ue.value.push(asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.NULL,!1,""));var Ae=asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OCTETSTRING,!1,K.digest().getBytes());return ce.value.push(ue),ce.value.push(Ae),asn1$7.toDer(ce).getBytes()},_modPow=function(K,J,ne){if(ne)return K.modPow(J.e,J.n);if(!J.p||!J.q)return K.modPow(J.d,J.n);J.dP||(J.dP=J.d.mod(J.p.subtract(BigInteger$3.ONE))),J.dQ||(J.dQ=J.d.mod(J.q.subtract(BigInteger$3.ONE))),J.qInv||(J.qInv=J.q.modInverse(J.p));var oe;do oe=new BigInteger$3(forge$i.util.bytesToHex(forge$i.random.getBytes(J.n.bitLength()/8)),16);while(oe.compareTo(J.n)>=0||!oe.gcd(J.n).equals(BigInteger$3.ONE));K=K.multiply(oe.modPow(J.e,J.n)).mod(J.n);for(var ce=K.mod(J.p).modPow(J.dP,J.p),ue=K.mod(J.q).modPow(J.dQ,J.q);ce.compareTo(ue)<0;)ce=ce.add(J.p);var Ae=ce.subtract(ue).multiply(J.qInv).mod(J.p).multiply(J.q).add(ue);return Ae=Ae.multiply(oe.modInverse(J.n)).mod(J.n),Ae};pki$4.rsa.encrypt=function(K,J,ne){var oe=ne,ce,ue=Math.ceil(J.n.bitLength()/8);ne!==!1&&ne!==!0?(oe=ne===2,ce=_encodePkcs1_v1_5(K,J,ne)):(ce=forge$i.util.createBuffer(),ce.putBytes(K));for(var Ae=new BigInteger$3(ce.toHex(),16),pe=_modPow(Ae,J,oe),xe=pe.toString(16),me=forge$i.util.createBuffer(),ge=ue-Math.ceil(xe.length/2);ge>0;)me.putByte(0),--ge;return me.putBytes(forge$i.util.hexToBytes(xe)),me.getBytes()};pki$4.rsa.decrypt=function(K,J,ne,oe){var ce=Math.ceil(J.n.bitLength()/8);if(K.length!==ce){var ue=new Error("Encrypted message length is invalid.");throw ue.length=K.length,ue.expected=ce,ue}var Ae=new BigInteger$3(forge$i.util.createBuffer(K).toHex(),16);if(Ae.compareTo(J.n)>=0)throw new Error("Encrypted message is invalid.");for(var pe=_modPow(Ae,J,ne),xe=pe.toString(16),me=forge$i.util.createBuffer(),ge=ce-Math.ceil(xe.length/2);ge>0;)me.putByte(0),--ge;return me.putBytes(forge$i.util.hexToBytes(xe)),oe!==!1?_decodePkcs1_v1_5(me.getBytes(),J,ne):me.getBytes()};pki$4.rsa.createKeyPairGenerationState=function(K,J,ne){typeof K=="string"&&(K=parseInt(K,10)),K=K||2048,ne=ne||{};var oe=ne.prng||forge$i.random,ce={nextBytes:function(pe){for(var xe=oe.getBytesSync(pe.length),me=0;me<pe.length;++me)pe[me]=xe.charCodeAt(me)}},ue=ne.algorithm||"PRIMEINC",Ae;if(ue==="PRIMEINC")Ae={algorithm:ue,state:0,bits:K,rng:ce,eInt:J||65537,e:new BigInteger$3(null),p:null,q:null,qBits:K>>1,pBits:K-(K>>1),pqState:0,num:null,keys:null},Ae.e.fromInt(Ae.eInt);else throw new Error("Invalid key generation algorithm: "+ue);return Ae};pki$4.rsa.stepKeyPairGenerationState=function(K,J){"algorithm"in K||(K.algorithm="PRIMEINC");var ne=new BigInteger$3(null);ne.fromInt(30);for(var oe=0,ce=function(ye,Se){return ye|Se},ue=+new Date,Ae,pe=0;K.keys===null&&(J<=0||pe<J);){if(K.state===0){var xe=K.p===null?K.pBits:K.qBits,me=xe-1;K.pqState===0?(K.num=new BigInteger$3(xe,K.rng),K.num.testBit(me)||K.num.bitwiseTo(BigInteger$3.ONE.shiftLeft(me),ce,K.num),K.num.dAddOffset(31-K.num.mod(ne).byteValue(),0),oe=0,++K.pqState):K.pqState===1?K.num.bitLength()>xe?K.pqState=0:K.num.isProbablePrime(_getMillerRabinTests(K.num.bitLength()))?++K.pqState:K.num.dAddOffset(GCD_30_DELTA[oe++%8],0):K.pqState===2?K.pqState=K.num.subtract(BigInteger$3.ONE).gcd(K.e).compareTo(BigInteger$3.ONE)===0?3:0:K.pqState===3&&(K.pqState=0,K.p===null?K.p=K.num:K.q=K.num,K.p!==null&&K.q!==null&&++K.state,K.num=null)}else if(K.state===1)K.p.compareTo(K.q)<0&&(K.num=K.p,K.p=K.q,K.q=K.num),++K.state;else if(K.state===2)K.p1=K.p.subtract(BigInteger$3.ONE),K.q1=K.q.subtract(BigInteger$3.ONE),K.phi=K.p1.multiply(K.q1),++K.state;else if(K.state===3)K.phi.gcd(K.e).compareTo(BigInteger$3.ONE)===0?++K.state:(K.p=null,K.q=null,K.state=0);else if(K.state===4)K.n=K.p.multiply(K.q),K.n.bitLength()===K.bits?++K.state:(K.q=null,K.state=0);else if(K.state===5){var ge=K.e.modInverse(K.phi);K.keys={privateKey:pki$4.rsa.setPrivateKey(K.n,K.e,ge,K.p,K.q,ge.mod(K.p1),ge.mod(K.q1),K.q.modInverse(K.p)),publicKey:pki$4.rsa.setPublicKey(K.n,K.e)}}Ae=+new Date,pe+=Ae-ue,ue=Ae}return K.keys!==null};pki$4.rsa.generateKeyPair=function(K,J,ne,oe){if(arguments.length===1?typeof K=="object"?(ne=K,K=void 0):typeof K=="function"&&(oe=K,K=void 0):arguments.length===2?typeof K=="number"?typeof J=="function"?(oe=J,J=void 0):typeof J!="number"&&(ne=J,J=void 0):(ne=K,oe=J,K=void 0,J=void 0):arguments.length===3&&(typeof J=="number"?typeof ne=="function"&&(oe=ne,ne=void 0):(oe=ne,ne=J,J=void 0)),ne=ne||{},K===void 0&&(K=ne.bits||2048),J===void 0&&(J=ne.e||65537),!forge$i.options.usePureJavaScript&&!ne.prng&&K>=256&&K<=16384&&(J===65537||J===3)){if(oe){if(_detectNodeCrypto("generateKeyPair"))return _crypto.generateKeyPair("rsa",{modulusLength:K,publicExponent:J,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(pe,xe,me){if(pe)return oe(pe);oe(null,{privateKey:pki$4.privateKeyFromPem(me),publicKey:pki$4.publicKeyFromPem(xe)})});if(_detectSubtleCrypto("generateKey")&&_detectSubtleCrypto("exportKey"))return util.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:K,publicExponent:_intToUint8Array(J),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(pe){return util.globalScope.crypto.subtle.exportKey("pkcs8",pe.privateKey)}).then(void 0,function(pe){oe(pe)}).then(function(pe){if(pe){var xe=pki$4.privateKeyFromAsn1(asn1$7.fromDer(forge$i.util.createBuffer(pe)));oe(null,{privateKey:xe,publicKey:pki$4.setRsaPublicKey(xe.n,xe.e)})}});if(_detectSubtleMsCrypto("generateKey")&&_detectSubtleMsCrypto("exportKey")){var ce=util.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:K,publicExponent:_intToUint8Array(J),hash:{name:"SHA-256"}},!0,["sign","verify"]);ce.oncomplete=function(pe){var xe=pe.target.result,me=util.globalScope.msCrypto.subtle.exportKey("pkcs8",xe.privateKey);me.oncomplete=function(ge){var ye=ge.target.result,Se=pki$4.privateKeyFromAsn1(asn1$7.fromDer(forge$i.util.createBuffer(ye)));oe(null,{privateKey:Se,publicKey:pki$4.setRsaPublicKey(Se.n,Se.e)})},me.onerror=function(ge){oe(ge)}},ce.onerror=function(pe){oe(pe)};return}}else if(_detectNodeCrypto("generateKeyPairSync")){var ue=_crypto.generateKeyPairSync("rsa",{modulusLength:K,publicExponent:J,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:pki$4.privateKeyFromPem(ue.privateKey),publicKey:pki$4.publicKeyFromPem(ue.publicKey)}}}var Ae=pki$4.rsa.createKeyPairGenerationState(K,J,ne);if(!oe)return pki$4.rsa.stepKeyPairGenerationState(Ae,0),Ae.keys;_generateKeyPair(Ae,ne,oe)};pki$4.setRsaPublicKey=pki$4.rsa.setPublicKey=function(K,J){var ne={n:K,e:J};return ne.encrypt=function(oe,ce,ue){if(typeof ce=="string"?ce=ce.toUpperCase():ce===void 0&&(ce="RSAES-PKCS1-V1_5"),ce==="RSAES-PKCS1-V1_5")ce={encode:function(pe,xe,me){return _encodePkcs1_v1_5(pe,xe,2).getBytes()}};else if(ce==="RSA-OAEP"||ce==="RSAES-OAEP")ce={encode:function(pe,xe){return forge$i.pkcs1.encode_rsa_oaep(xe,pe,ue)}};else if(["RAW","NONE","NULL",null].indexOf(ce)!==-1)ce={encode:function(pe){return pe}};else if(typeof ce=="string")throw new Error('Unsupported encryption scheme: "'+ce+'".');var Ae=ce.encode(oe,ne,!0);return pki$4.rsa.encrypt(Ae,ne,!0)},ne.verify=function(oe,ce,ue,Ae){typeof ue=="string"?ue=ue.toUpperCase():ue===void 0&&(ue="RSASSA-PKCS1-V1_5"),Ae===void 0&&(Ae={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in Ae||(Ae._parseAllDigestBytes=!0),ue==="RSASSA-PKCS1-V1_5"?ue={verify:function(xe,me){me=_decodePkcs1_v1_5(me,ne,!0);var ge=asn1$7.fromDer(me,{parseAllBytes:Ae._parseAllDigestBytes}),ye={},Se=[];if(!asn1$7.validate(ge,digestInfoValidator,ye,Se)){var Te=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw Te.errors=Se,Te}var Ne=asn1$7.derToOid(ye.algorithmIdentifier);if(!(Ne===forge$i.oids.md2||Ne===forge$i.oids.md5||Ne===forge$i.oids.sha1||Ne===forge$i.oids.sha224||Ne===forge$i.oids.sha256||Ne===forge$i.oids.sha384||Ne===forge$i.oids.sha512||Ne===forge$i.oids["sha512-224"]||Ne===forge$i.oids["sha512-256"])){var Te=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw Te.oid=Ne,Te}if((Ne===forge$i.oids.md2||Ne===forge$i.oids.md5)&&!("parameters"in ye))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return xe===ye.digest}}:(ue==="NONE"||ue==="NULL"||ue===null)&&(ue={verify:function(xe,me){return me=_decodePkcs1_v1_5(me,ne,!0),xe===me}});var pe=pki$4.rsa.decrypt(ce,ne,!0,!1);return ue.verify(oe,pe,ne.n.bitLength())},ne};pki$4.setRsaPrivateKey=pki$4.rsa.setPrivateKey=function(K,J,ne,oe,ce,ue,Ae,pe){var xe={n:K,e:J,d:ne,p:oe,q:ce,dP:ue,dQ:Ae,qInv:pe};return xe.decrypt=function(me,ge,ye){typeof ge=="string"?ge=ge.toUpperCase():ge===void 0&&(ge="RSAES-PKCS1-V1_5");var Se=pki$4.rsa.decrypt(me,xe,!1,!1);if(ge==="RSAES-PKCS1-V1_5")ge={decode:_decodePkcs1_v1_5};else if(ge==="RSA-OAEP"||ge==="RSAES-OAEP")ge={decode:function(Te,Ne){return forge$i.pkcs1.decode_rsa_oaep(Ne,Te,ye)}};else if(["RAW","NONE","NULL",null].indexOf(ge)!==-1)ge={decode:function(Te){return Te}};else throw new Error('Unsupported encryption scheme: "'+ge+'".');return ge.decode(Se,xe,!1)},xe.sign=function(me,ge){var ye=!1;typeof ge=="string"&&(ge=ge.toUpperCase()),ge===void 0||ge==="RSASSA-PKCS1-V1_5"?(ge={encode:emsaPkcs1v15encode},ye=1):(ge==="NONE"||ge==="NULL"||ge===null)&&(ge={encode:function(){return me}},ye=1);var Se=ge.encode(me,xe.n.bitLength());return pki$4.rsa.encrypt(Se,xe,ye)},xe};pki$4.wrapRsaPrivateKey=function(K){return asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,asn1$7.integerToDer(0).getBytes()),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OID,!1,asn1$7.oidToDer(pki$4.oids.rsaEncryption).getBytes()),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.NULL,!1,"")]),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OCTETSTRING,!1,asn1$7.toDer(K).getBytes())])};pki$4.privateKeyFromAsn1=function(K){var J={},ne=[];if(asn1$7.validate(K,privateKeyValidator$1,J,ne)&&(K=asn1$7.fromDer(forge$i.util.createBuffer(J.privateKey))),J={},ne=[],!asn1$7.validate(K,rsaPrivateKeyValidator,J,ne)){var oe=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw oe.errors=ne,oe}var ce,ue,Ae,pe,xe,me,ge,ye;return ce=forge$i.util.createBuffer(J.privateKeyModulus).toHex(),ue=forge$i.util.createBuffer(J.privateKeyPublicExponent).toHex(),Ae=forge$i.util.createBuffer(J.privateKeyPrivateExponent).toHex(),pe=forge$i.util.createBuffer(J.privateKeyPrime1).toHex(),xe=forge$i.util.createBuffer(J.privateKeyPrime2).toHex(),me=forge$i.util.createBuffer(J.privateKeyExponent1).toHex(),ge=forge$i.util.createBuffer(J.privateKeyExponent2).toHex(),ye=forge$i.util.createBuffer(J.privateKeyCoefficient).toHex(),pki$4.setRsaPrivateKey(new BigInteger$3(ce,16),new BigInteger$3(ue,16),new BigInteger$3(Ae,16),new BigInteger$3(pe,16),new BigInteger$3(xe,16),new BigInteger$3(me,16),new BigInteger$3(ge,16),new BigInteger$3(ye,16))};pki$4.privateKeyToAsn1=pki$4.privateKeyToRSAPrivateKey=function(K){return asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,asn1$7.integerToDer(0).getBytes()),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.n)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.e)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.d)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.p)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.q)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.dP)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.dQ)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.qInv))])};pki$4.publicKeyFromAsn1=function(K){var J={},ne=[];if(asn1$7.validate(K,publicKeyValidator$2,J,ne)){var oe=asn1$7.derToOid(J.publicKeyOid);if(oe!==pki$4.oids.rsaEncryption){var ce=new Error("Cannot read public key. Unknown OID.");throw ce.oid=oe,ce}K=J.rsaPublicKey}if(ne=[],!asn1$7.validate(K,rsaPublicKeyValidator,J,ne)){var ce=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw ce.errors=ne,ce}var ue=forge$i.util.createBuffer(J.publicKeyModulus).toHex(),Ae=forge$i.util.createBuffer(J.publicKeyExponent).toHex();return pki$4.setRsaPublicKey(new BigInteger$3(ue,16),new BigInteger$3(Ae,16))};pki$4.publicKeyToAsn1=pki$4.publicKeyToSubjectPublicKeyInfo=function(K){return asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OID,!1,asn1$7.oidToDer(pki$4.oids.rsaEncryption).getBytes()),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.NULL,!1,"")]),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.BITSTRING,!1,[pki$4.publicKeyToRSAPublicKey(K)])])};pki$4.publicKeyToRSAPublicKey=function(K){return asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.n)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(K.e))])};function _encodePkcs1_v1_5(K,J,ne){var oe=forge$i.util.createBuffer(),ce=Math.ceil(J.n.bitLength()/8);if(K.length>ce-11){var ue=new Error("Message is too long for PKCS#1 v1.5 padding.");throw ue.length=K.length,ue.max=ce-11,ue}oe.putByte(0),oe.putByte(ne);var Ae=ce-3-K.length,pe;if(ne===0||ne===1){pe=ne===0?0:255;for(var xe=0;xe<Ae;++xe)oe.putByte(pe)}else for(;Ae>0;){for(var me=0,ge=forge$i.random.getBytes(Ae),xe=0;xe<Ae;++xe)pe=ge.charCodeAt(xe),pe===0?++me:oe.putByte(pe);Ae=me}return oe.putByte(0),oe.putBytes(K),oe}function _decodePkcs1_v1_5(K,J,ne,oe){var ce=Math.ceil(J.n.bitLength()/8),ue=forge$i.util.createBuffer(K),Ae=ue.getByte(),pe=ue.getByte();if(Ae!==0||ne&&pe!==0&&pe!==1||!ne&&pe!=2||ne&&pe===0&&typeof oe>"u")throw new Error("Encryption block is invalid.");var xe=0;if(pe===0){xe=ce-3-oe;for(var me=0;me<xe;++me)if(ue.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(pe===1)for(xe=0;ue.length()>1;){if(ue.getByte()!==255){--ue.read;break}++xe}else if(pe===2)for(xe=0;ue.length()>1;){if(ue.getByte()===0){--ue.read;break}++xe}var ge=ue.getByte();if(ge!==0||xe!==ce-3-ue.length())throw new Error("Encryption block is invalid.");return ue.getBytes()}function _generateKeyPair(K,J,ne){typeof J=="function"&&(ne=J,J={}),J=J||{};var oe={algorithm:{name:J.algorithm||"PRIMEINC",options:{workers:J.workers||2,workLoad:J.workLoad||100,workerScript:J.workerScript}}};"prng"in J&&(oe.prng=J.prng),ce();function ce(){ue(K.pBits,function(pe,xe){if(pe)return ne(pe);if(K.p=xe,K.q!==null)return Ae(pe,K.q);ue(K.qBits,Ae)})}function ue(pe,xe){forge$i.prime.generateProbablePrime(pe,oe,xe)}function Ae(pe,xe){if(pe)return ne(pe);if(K.q=xe,K.p.compareTo(K.q)<0){var me=K.p;K.p=K.q,K.q=me}if(K.p.subtract(BigInteger$3.ONE).gcd(K.e).compareTo(BigInteger$3.ONE)!==0){K.p=null,ce();return}if(K.q.subtract(BigInteger$3.ONE).gcd(K.e).compareTo(BigInteger$3.ONE)!==0){K.q=null,ue(K.qBits,Ae);return}if(K.p1=K.p.subtract(BigInteger$3.ONE),K.q1=K.q.subtract(BigInteger$3.ONE),K.phi=K.p1.multiply(K.q1),K.phi.gcd(K.e).compareTo(BigInteger$3.ONE)!==0){K.p=K.q=null,ce();return}if(K.n=K.p.multiply(K.q),K.n.bitLength()!==K.bits){K.q=null,ue(K.qBits,Ae);return}var ge=K.e.modInverse(K.phi);K.keys={privateKey:pki$4.rsa.setPrivateKey(K.n,K.e,ge,K.p,K.q,ge.mod(K.p1),ge.mod(K.q1),K.q.modInverse(K.p)),publicKey:pki$4.rsa.setPublicKey(K.n,K.e)},ne(null,K.keys)}}function _bnToBytes(K){var J=K.toString(16);J[0]>="8"&&(J="00"+J);var ne=forge$i.util.hexToBytes(J);return ne.length>1&&(ne.charCodeAt(0)===0&&!(ne.charCodeAt(1)&128)||ne.charCodeAt(0)===255&&(ne.charCodeAt(1)&128)===128)?ne.substr(1):ne}function _getMillerRabinTests(K){return K<=100?27:K<=150?18:K<=200?15:K<=250?12:K<=300?9:K<=350?8:K<=400?7:K<=500?6:K<=600?5:K<=800?4:K<=1250?3:2}function _detectNodeCrypto(K){return forge$i.util.isNodejs&&typeof _crypto[K]=="function"}function _detectSubtleCrypto(K){return typeof util.globalScope<"u"&&typeof util.globalScope.crypto=="object"&&typeof util.globalScope.crypto.subtle=="object"&&typeof util.globalScope.crypto.subtle[K]=="function"}function _detectSubtleMsCrypto(K){return typeof util.globalScope<"u"&&typeof util.globalScope.msCrypto=="object"&&typeof util.globalScope.msCrypto.subtle=="object"&&typeof util.globalScope.msCrypto.subtle[K]=="function"}function _intToUint8Array(K){for(var J=forge$i.util.hexToBytes(K.toString(16)),ne=new Uint8Array(J.length),oe=0;oe<J.length;++oe)ne[oe]=J.charCodeAt(oe);return ne}var forge$h=forge$D;if(typeof BigInteger$2>"u")var BigInteger$2=forge$h.jsbn.BigInteger;var asn1$6=forge$h.asn1,pki$3=forge$h.pki=forge$h.pki||{};pki$3.pbe=forge$h.pbe=forge$h.pbe||{};var oids$1=pki$3.oids,encryptedPrivateKeyValidator={name:"EncryptedPrivateKeyInfo",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},PBES2AlgorithmsValidator={name:"PBES2Algorithms",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pkcs12PbeParamsValidator={name:"pkcs-12PbeParams",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.INTEGER,constructed:!1,capture:"iterations"}]};pki$3.encryptPrivateKeyInfo=function(K,J,ne){ne=ne||{},ne.saltSize=ne.saltSize||8,ne.count=ne.count||2048,ne.algorithm=ne.algorithm||"aes128",ne.prfAlgorithm=ne.prfAlgorithm||"sha1";var oe=forge$h.random.getBytesSync(ne.saltSize),ce=ne.count,ue=asn1$6.integerToDer(ce),Ae,pe,xe;if(ne.algorithm.indexOf("aes")===0||ne.algorithm==="des"){var me,ge,ye;switch(ne.algorithm){case"aes128":Ae=16,me=16,ge=oids$1["aes128-CBC"],ye=forge$h.aes.createEncryptionCipher;break;case"aes192":Ae=24,me=16,ge=oids$1["aes192-CBC"],ye=forge$h.aes.createEncryptionCipher;break;case"aes256":Ae=32,me=16,ge=oids$1["aes256-CBC"],ye=forge$h.aes.createEncryptionCipher;break;case"des":Ae=8,me=8,ge=oids$1.desCBC,ye=forge$h.des.createEncryptionCipher;break;default:var Se=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw Se.algorithm=ne.algorithm,Se}var Te="hmacWith"+ne.prfAlgorithm.toUpperCase(),Ne=prfAlgorithmToMessageDigest(Te),$e=forge$h.pkcs5.pbkdf2(J,oe,ce,Ae,Ne),ke=forge$h.random.getBytesSync(me),je=ye($e);je.start(ke),je.update(asn1$6.toDer(K)),je.finish(),xe=je.output.getBytes();var Ke=createPbkdf2Params(oe,ue,Ae,Te);pe=asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(oids$1.pkcs5PBES2).getBytes()),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(oids$1.pkcs5PBKDF2).getBytes()),Ke]),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(ge).getBytes()),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OCTETSTRING,!1,ke)])])])}else if(ne.algorithm==="3des"){Ae=24;var Ye=new forge$h.util.ByteBuffer(oe),$e=pki$3.pbe.generatePkcs12Key(J,Ye,1,ce,Ae),ke=pki$3.pbe.generatePkcs12Key(J,Ye,2,ce,Ae),je=forge$h.des.createEncryptionCipher($e);je.start(ke),je.update(asn1$6.toDer(K)),je.finish(),xe=je.output.getBytes(),pe=asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(oids$1["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OCTETSTRING,!1,oe),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.INTEGER,!1,ue.getBytes())])])}else{var Se=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw Se.algorithm=ne.algorithm,Se}var ze=asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[pe,asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OCTETSTRING,!1,xe)]);return ze};pki$3.decryptPrivateKeyInfo=function(K,J){var ne=null,oe={},ce=[];if(!asn1$6.validate(K,encryptedPrivateKeyValidator,oe,ce)){var ue=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw ue.errors=ce,ue}var Ae=asn1$6.derToOid(oe.encryptionOid),pe=pki$3.pbe.getCipher(Ae,oe.encryptionParams,J),xe=forge$h.util.createBuffer(oe.encryptedData);return pe.update(xe),pe.finish()&&(ne=asn1$6.fromDer(pe.output)),ne};pki$3.encryptedPrivateKeyToPem=function(K,J){var ne={type:"ENCRYPTED PRIVATE KEY",body:asn1$6.toDer(K).getBytes()};return forge$h.pem.encode(ne,{maxline:J})};pki$3.encryptedPrivateKeyFromPem=function(K){var J=forge$h.pem.decode(K)[0];if(J.type!=="ENCRYPTED PRIVATE KEY"){var ne=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw ne.headerType=J.type,ne}if(J.procType&&J.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return asn1$6.fromDer(J.body)};pki$3.encryptRsaPrivateKey=function(K,J,ne){if(ne=ne||{},!ne.legacy){var oe=pki$3.wrapRsaPrivateKey(pki$3.privateKeyToAsn1(K));return oe=pki$3.encryptPrivateKeyInfo(oe,J,ne),pki$3.encryptedPrivateKeyToPem(oe)}var ce,ue,Ae,pe;switch(ne.algorithm){case"aes128":ce="AES-128-CBC",Ae=16,ue=forge$h.random.getBytesSync(16),pe=forge$h.aes.createEncryptionCipher;break;case"aes192":ce="AES-192-CBC",Ae=24,ue=forge$h.random.getBytesSync(16),pe=forge$h.aes.createEncryptionCipher;break;case"aes256":ce="AES-256-CBC",Ae=32,ue=forge$h.random.getBytesSync(16),pe=forge$h.aes.createEncryptionCipher;break;case"3des":ce="DES-EDE3-CBC",Ae=24,ue=forge$h.random.getBytesSync(8),pe=forge$h.des.createEncryptionCipher;break;case"des":ce="DES-CBC",Ae=8,ue=forge$h.random.getBytesSync(8),pe=forge$h.des.createEncryptionCipher;break;default:var xe=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+ne.algorithm+'".');throw xe.algorithm=ne.algorithm,xe}var me=forge$h.pbe.opensslDeriveBytes(J,ue.substr(0,8),Ae),ge=pe(me);ge.start(ue),ge.update(asn1$6.toDer(pki$3.privateKeyToAsn1(K))),ge.finish();var ye={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:ce,parameters:forge$h.util.bytesToHex(ue).toUpperCase()},body:ge.output.getBytes()};return forge$h.pem.encode(ye)};pki$3.decryptRsaPrivateKey=function(K,J){var ne=null,oe=forge$h.pem.decode(K)[0];if(oe.type!=="ENCRYPTED PRIVATE KEY"&&oe.type!=="PRIVATE KEY"&&oe.type!=="RSA PRIVATE KEY"){var ce=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw ce.headerType=ce,ce}if(oe.procType&&oe.procType.type==="ENCRYPTED"){var ue,Ae;switch(oe.dekInfo.algorithm){case"DES-CBC":ue=8,Ae=forge$h.des.createDecryptionCipher;break;case"DES-EDE3-CBC":ue=24,Ae=forge$h.des.createDecryptionCipher;break;case"AES-128-CBC":ue=16,Ae=forge$h.aes.createDecryptionCipher;break;case"AES-192-CBC":ue=24,Ae=forge$h.aes.createDecryptionCipher;break;case"AES-256-CBC":ue=32,Ae=forge$h.aes.createDecryptionCipher;break;case"RC2-40-CBC":ue=5,Ae=function(ye){return forge$h.rc2.createDecryptionCipher(ye,40)};break;case"RC2-64-CBC":ue=8,Ae=function(ye){return forge$h.rc2.createDecryptionCipher(ye,64)};break;case"RC2-128-CBC":ue=16,Ae=function(ye){return forge$h.rc2.createDecryptionCipher(ye,128)};break;default:var ce=new Error('Could not decrypt private key; unsupported encryption algorithm "'+oe.dekInfo.algorithm+'".');throw ce.algorithm=oe.dekInfo.algorithm,ce}var pe=forge$h.util.hexToBytes(oe.dekInfo.parameters),xe=forge$h.pbe.opensslDeriveBytes(J,pe.substr(0,8),ue),me=Ae(xe);if(me.start(pe),me.update(forge$h.util.createBuffer(oe.body)),me.finish())ne=me.output.getBytes();else return ne}else ne=oe.body;return oe.type==="ENCRYPTED PRIVATE KEY"?ne=pki$3.decryptPrivateKeyInfo(asn1$6.fromDer(ne),J):ne=asn1$6.fromDer(ne),ne!==null&&(ne=pki$3.privateKeyFromAsn1(ne)),ne};pki$3.pbe.generatePkcs12Key=function(K,J,ne,oe,ce,ue){var Ae,pe;if(typeof ue>"u"||ue===null){if(!("sha1"in forge$h.md))throw new Error('"sha1" hash algorithm unavailable.');ue=forge$h.md.sha1.create()}var xe=ue.digestLength,me=ue.blockLength,ge=new forge$h.util.ByteBuffer,ye=new forge$h.util.ByteBuffer;if(K!=null){for(pe=0;pe<K.length;pe++)ye.putInt16(K.charCodeAt(pe));ye.putInt16(0)}var Se=ye.length(),Te=J.length(),Ne=new forge$h.util.ByteBuffer;Ne.fillWithByte(ne,me);var $e=me*Math.ceil(Te/me),ke=new forge$h.util.ByteBuffer;for(pe=0;pe<$e;pe++)ke.putByte(J.at(pe%Te));var je=me*Math.ceil(Se/me),Ke=new forge$h.util.ByteBuffer;for(pe=0;pe<je;pe++)Ke.putByte(ye.at(pe%Se));var Ye=ke;Ye.putBuffer(Ke);for(var ze=Math.ceil(ce/xe),Xe=1;Xe<=ze;Xe++){var Je=new forge$h.util.ByteBuffer;Je.putBytes(Ne.bytes()),Je.putBytes(Ye.bytes());for(var rt=0;rt<oe;rt++)ue.start(),ue.update(Je.getBytes()),Je=ue.digest();var Ze=new forge$h.util.ByteBuffer;for(pe=0;pe<me;pe++)Ze.putByte(Je.at(pe%xe));var et=Math.ceil(Te/me)+Math.ceil(Se/me),nt=new forge$h.util.ByteBuffer;for(Ae=0;Ae<et;Ae++){var Ge=new forge$h.util.ByteBuffer(Ye.getBytes(me)),ve=511;for(pe=Ze.length()-1;pe>=0;pe--)ve=ve>>8,ve+=Ze.at(pe)+Ge.at(pe),Ge.setAt(pe,ve&255);nt.putBuffer(Ge)}Ye=nt,ge.putBuffer(Je)}return ge.truncate(ge.length()-ce),ge};pki$3.pbe.getCipher=function(K,J,ne){switch(K){case pki$3.oids.pkcs5PBES2:return pki$3.pbe.getCipherForPBES2(K,J,ne);case pki$3.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pki$3.oids["pbewithSHAAnd40BitRC2-CBC"]:return pki$3.pbe.getCipherForPKCS12PBE(K,J,ne);default:var oe=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw oe.oid=K,oe.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],oe}};pki$3.pbe.getCipherForPBES2=function(K,J,ne){var oe={},ce=[];if(!asn1$6.validate(J,PBES2AlgorithmsValidator,oe,ce)){var ue=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw ue.errors=ce,ue}if(K=asn1$6.derToOid(oe.kdfOid),K!==pki$3.oids.pkcs5PBKDF2){var ue=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw ue.oid=K,ue.supportedOids=["pkcs5PBKDF2"],ue}if(K=asn1$6.derToOid(oe.encOid),K!==pki$3.oids["aes128-CBC"]&&K!==pki$3.oids["aes192-CBC"]&&K!==pki$3.oids["aes256-CBC"]&&K!==pki$3.oids["des-EDE3-CBC"]&&K!==pki$3.oids.desCBC){var ue=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw ue.oid=K,ue.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],ue}var Ae=oe.kdfSalt,pe=forge$h.util.createBuffer(oe.kdfIterationCount);pe=pe.getInt(pe.length()<<3);var xe,me;switch(pki$3.oids[K]){case"aes128-CBC":xe=16,me=forge$h.aes.createDecryptionCipher;break;case"aes192-CBC":xe=24,me=forge$h.aes.createDecryptionCipher;break;case"aes256-CBC":xe=32,me=forge$h.aes.createDecryptionCipher;break;case"des-EDE3-CBC":xe=24,me=forge$h.des.createDecryptionCipher;break;case"desCBC":xe=8,me=forge$h.des.createDecryptionCipher;break}var ge=prfOidToMessageDigest(oe.prfOid),ye=forge$h.pkcs5.pbkdf2(ne,Ae,pe,xe,ge),Se=oe.encIv,Te=me(ye);return Te.start(Se),Te};pki$3.pbe.getCipherForPKCS12PBE=function(K,J,ne){var oe={},ce=[];if(!asn1$6.validate(J,pkcs12PbeParamsValidator,oe,ce)){var ue=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw ue.errors=ce,ue}var Ae=forge$h.util.createBuffer(oe.salt),pe=forge$h.util.createBuffer(oe.iterations);pe=pe.getInt(pe.length()<<3);var xe,me,ge;switch(K){case pki$3.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:xe=24,me=8,ge=forge$h.des.startDecrypting;break;case pki$3.oids["pbewithSHAAnd40BitRC2-CBC"]:xe=5,me=8,ge=function($e,ke){var je=forge$h.rc2.createDecryptionCipher($e,40);return je.start(ke,null),je};break;default:var ue=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw ue.oid=K,ue}var ye=prfOidToMessageDigest(oe.prfOid),Se=pki$3.pbe.generatePkcs12Key(ne,Ae,1,pe,xe,ye);ye.start();var Te=pki$3.pbe.generatePkcs12Key(ne,Ae,2,pe,me,ye);return ge(Se,Te)};pki$3.pbe.opensslDeriveBytes=function(K,J,ne,oe){if(typeof oe>"u"||oe===null){if(!("md5"in forge$h.md))throw new Error('"md5" hash algorithm unavailable.');oe=forge$h.md.md5.create()}J===null&&(J="");for(var ce=[hash(oe,K+J)],ue=16,Ae=1;ue<ne;++Ae,ue+=16)ce.push(hash(oe,ce[Ae-1]+K+J));return ce.join("").substr(0,ne)};function hash(K,J){return K.start().update(J).digest().getBytes()}function prfOidToMessageDigest(K){var J;if(!K)J="hmacWithSHA1";else if(J=pki$3.oids[asn1$6.derToOid(K)],!J){var ne=new Error("Unsupported PRF OID.");throw ne.oid=K,ne.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],ne}return prfAlgorithmToMessageDigest(J)}function prfAlgorithmToMessageDigest(K){var J=forge$h.md;switch(K){case"hmacWithSHA224":J=forge$h.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":K=K.substr(8).toLowerCase();break;default:var ne=new Error("Unsupported PRF algorithm.");throw ne.algorithm=K,ne.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],ne}if(!J||!(K in J))throw new Error("Unknown hash algorithm: "+K);return J[K].create()}function createPbkdf2Params(K,J,ne,oe){var ce=asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OCTETSTRING,!1,K),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.INTEGER,!1,J.getBytes())]);return oe!=="hmacWithSHA1"&&ce.value.push(asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.INTEGER,!1,forge$h.util.hexToBytes(ne.toString(16))),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(pki$3.oids[oe]).getBytes()),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.NULL,!1,"")])),ce}var forge$g=forge$D,asn1$5=forge$g.asn1,p7v=forge$g.pkcs7asn1=forge$g.pkcs7asn1||{};forge$g.pkcs7=forge$g.pkcs7||{};forge$g.pkcs7.asn1=p7v;var contentInfoValidator$1={name:"ContentInfo",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};p7v.contentInfoValidator=contentInfoValidator$1;var encryptedContentInfoValidator={name:"EncryptedContentInfo",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:asn1$5.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};p7v.envelopedDataValidator={name:"EnvelopedData",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(encryptedContentInfoValidator)};p7v.encryptedDataValidator={name:"EncryptedData",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"version"}].concat(encryptedContentInfoValidator)};var signerValidator={name:"SignerInfo",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:asn1$5.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};p7v.signedDataValidator={name:"SignedData",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},contentInfoValidator$1,{name:"SignedData.Certificates",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SET,capture:"signerInfos",optional:!0,value:[signerValidator]}]};p7v.recipientInfoValidator={name:"RecipientInfo",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:asn1$5.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};var forge$f=forge$D;forge$f.mgf=forge$f.mgf||{};var mgf1=forge$f.mgf.mgf1=forge$f.mgf1=forge$f.mgf1||{};mgf1.create=function(K){var J={generate:function(ne,oe){for(var ce=new forge$f.util.ByteBuffer,ue=Math.ceil(oe/K.digestLength),Ae=0;Ae<ue;Ae++){var pe=new forge$f.util.ByteBuffer;pe.putInt32(Ae),K.start(),K.update(ne+pe.getBytes()),ce.putBuffer(K.digest())}return ce.truncate(ce.length()-oe),ce.getBytes()}};return J};var forge$e=forge$D;forge$e.mgf=forge$e.mgf||{};forge$e.mgf.mgf1=forge$e.mgf1;var forge$d=forge$D,pss=forge$d.pss=forge$d.pss||{};pss.create=function(K){arguments.length===3&&(K={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var J=K.md,ne=K.mgf,oe=J.digestLength,ce=K.salt||null;typeof ce=="string"&&(ce=forge$d.util.createBuffer(ce));var ue;if("saltLength"in K)ue=K.saltLength;else if(ce!==null)ue=ce.length();else throw new Error("Salt length not specified or specific salt not given.");if(ce!==null&&ce.length()!==ue)throw new Error("Given salt length does not match length of given salt.");var Ae=K.prng||forge$d.random,pe={};return pe.encode=function(xe,me){var ge,ye=me-1,Se=Math.ceil(ye/8),Te=xe.digest().getBytes();if(Se<oe+ue+2)throw new Error("Message is too long to encrypt.");var Ne;ce===null?Ne=Ae.getBytesSync(ue):Ne=ce.bytes();var $e=new forge$d.util.ByteBuffer;$e.fillWithByte(0,8),$e.putBytes(Te),$e.putBytes(Ne),J.start(),J.update($e.getBytes());var ke=J.digest().getBytes(),je=new forge$d.util.ByteBuffer;je.fillWithByte(0,Se-ue-oe-2),je.putByte(1),je.putBytes(Ne);var Ke=je.getBytes(),Ye=Se-oe-1,ze=ne.generate(ke,Ye),Xe="";for(ge=0;ge<Ye;ge++)Xe+=String.fromCharCode(Ke.charCodeAt(ge)^ze.charCodeAt(ge));var Je=65280>>8*Se-ye&255;return Xe=String.fromCharCode(Xe.charCodeAt(0)&~Je)+Xe.substr(1),Xe+ke+""},pe.verify=function(xe,me,ge){var ye,Se=ge-1,Te=Math.ceil(Se/8);if(me=me.substr(-Te),Te<oe+ue+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(me.charCodeAt(Te-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var Ne=Te-oe-1,$e=me.substr(0,Ne),ke=me.substr(Ne,oe),je=65280>>8*Te-Se&255;if($e.charCodeAt(0)&je)throw new Error("Bits beyond keysize not zero as expected.");var Ke=ne.generate(ke,Ne),Ye="";for(ye=0;ye<Ne;ye++)Ye+=String.fromCharCode($e.charCodeAt(ye)^Ke.charCodeAt(ye));Ye=String.fromCharCode(Ye.charCodeAt(0)&~je)+Ye.substr(1);var ze=Te-oe-ue-2;for(ye=0;ye<ze;ye++)if(Ye.charCodeAt(ye)!==0)throw new Error("Leftmost octets not zero as expected");if(Ye.charCodeAt(ze)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var Xe=Ye.substr(-ue),Je=new forge$d.util.ByteBuffer;Je.fillWithByte(0,8),Je.putBytes(xe),Je.putBytes(Xe),J.start(),J.update(Je.getBytes());var rt=J.digest().getBytes();return ke===rt},pe};var forge$c=forge$D,asn1$4=forge$c.asn1,pki$2=forge$c.pki=forge$c.pki||{},oids=pki$2.oids,_shortNames={};_shortNames.CN=oids.commonName;_shortNames.commonName="CN";_shortNames.C=oids.countryName;_shortNames.countryName="C";_shortNames.L=oids.localityName;_shortNames.localityName="L";_shortNames.ST=oids.stateOrProvinceName;_shortNames.stateOrProvinceName="ST";_shortNames.O=oids.organizationName;_shortNames.organizationName="O";_shortNames.OU=oids.organizationalUnitName;_shortNames.organizationalUnitName="OU";_shortNames.E=oids.emailAddress;_shortNames.emailAddress="E";var publicKeyValidator$1=forge$c.pki.rsa.publicKeyValidator,x509CertificateValidator={name:"Certificate",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:asn1$4.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},publicKeyValidator$1,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:asn1$4.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},rsassaPssParameterValidator={name:"rsapss",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},certificationRequestInfoValidator={name:"CertificationRequestInfo",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},publicKeyValidator$1,{name:"CertificationRequestInfo.attributes",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SET,constructed:!0}]}]}]},certificationRequestValidator={name:"CertificationRequest",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[certificationRequestInfoValidator,{name:"CertificationRequest.signatureAlgorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:asn1$4.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};pki$2.RDNAttributesAsArray=function(K,J){for(var ne=[],oe,ce,ue,Ae=0;Ae<K.value.length;++Ae){oe=K.value[Ae];for(var pe=0;pe<oe.value.length;++pe)ue={},ce=oe.value[pe],ue.type=asn1$4.derToOid(ce.value[0].value),ue.value=ce.value[1].value,ue.valueTagClass=ce.value[1].type,ue.type in oids&&(ue.name=oids[ue.type],ue.name in _shortNames&&(ue.shortName=_shortNames[ue.name])),J&&(J.update(ue.type),J.update(ue.value)),ne.push(ue)}return ne};pki$2.CRIAttributesAsArray=function(K){for(var J=[],ne=0;ne<K.length;++ne)for(var oe=K[ne],ce=asn1$4.derToOid(oe.value[0].value),ue=oe.value[1].value,Ae=0;Ae<ue.length;++Ae){var pe={};if(pe.type=ce,pe.value=ue[Ae].value,pe.valueTagClass=ue[Ae].type,pe.type in oids&&(pe.name=oids[pe.type],pe.name in _shortNames&&(pe.shortName=_shortNames[pe.name])),pe.type===oids.extensionRequest){pe.extensions=[];for(var xe=0;xe<pe.value.length;++xe)pe.extensions.push(pki$2.certificateExtensionFromAsn1(pe.value[xe]))}J.push(pe)}return J};function _getAttribute(K,J){typeof J=="string"&&(J={shortName:J});for(var ne=null,oe,ce=0;ne===null&&ce<K.attributes.length;++ce)oe=K.attributes[ce],(J.type&&J.type===oe.type||J.name&&J.name===oe.name||J.shortName&&J.shortName===oe.shortName)&&(ne=oe);return ne}var _readSignatureParameters=function(K,J,ne){var oe={};if(K!==oids["RSASSA-PSS"])return oe;ne&&(oe={hash:{algorithmOid:oids.sha1},mgf:{algorithmOid:oids.mgf1,hash:{algorithmOid:oids.sha1}},saltLength:20});var ce={},ue=[];if(!asn1$4.validate(J,rsassaPssParameterValidator,ce,ue)){var Ae=new Error("Cannot read RSASSA-PSS parameter block.");throw Ae.errors=ue,Ae}return ce.hashOid!==void 0&&(oe.hash=oe.hash||{},oe.hash.algorithmOid=asn1$4.derToOid(ce.hashOid)),ce.maskGenOid!==void 0&&(oe.mgf=oe.mgf||{},oe.mgf.algorithmOid=asn1$4.derToOid(ce.maskGenOid),oe.mgf.hash=oe.mgf.hash||{},oe.mgf.hash.algorithmOid=asn1$4.derToOid(ce.maskGenHashOid)),ce.saltLength!==void 0&&(oe.saltLength=ce.saltLength.charCodeAt(0)),oe},_createSignatureDigest=function(K){switch(oids[K.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return forge$c.md.sha1.create();case"md5WithRSAEncryption":return forge$c.md.md5.create();case"sha256WithRSAEncryption":return forge$c.md.sha256.create();case"sha384WithRSAEncryption":return forge$c.md.sha384.create();case"sha512WithRSAEncryption":return forge$c.md.sha512.create();case"RSASSA-PSS":return forge$c.md.sha256.create();default:var J=new Error("Could not compute "+K.type+" digest. Unknown signature OID.");throw J.signatureOid=K.signatureOid,J}},_verifySignature=function(K){var J=K.certificate,ne;switch(J.signatureOid){case oids.sha1WithRSAEncryption:case oids.sha1WithRSASignature:break;case oids["RSASSA-PSS"]:var oe,ce;if(oe=oids[J.signatureParameters.mgf.hash.algorithmOid],oe===void 0||forge$c.md[oe]===void 0){var ue=new Error("Unsupported MGF hash function.");throw ue.oid=J.signatureParameters.mgf.hash.algorithmOid,ue.name=oe,ue}if(ce=oids[J.signatureParameters.mgf.algorithmOid],ce===void 0||forge$c.mgf[ce]===void 0){var ue=new Error("Unsupported MGF function.");throw ue.oid=J.signatureParameters.mgf.algorithmOid,ue.name=ce,ue}if(ce=forge$c.mgf[ce].create(forge$c.md[oe].create()),oe=oids[J.signatureParameters.hash.algorithmOid],oe===void 0||forge$c.md[oe]===void 0){var ue=new Error("Unsupported RSASSA-PSS hash function.");throw ue.oid=J.signatureParameters.hash.algorithmOid,ue.name=oe,ue}ne=forge$c.pss.create(forge$c.md[oe].create(),ce,J.signatureParameters.saltLength);break}return J.publicKey.verify(K.md.digest().getBytes(),K.signature,ne)};pki$2.certificateFromPem=function(K,J,ne){var oe=forge$c.pem.decode(K)[0];if(oe.type!=="CERTIFICATE"&&oe.type!=="X509 CERTIFICATE"&&oe.type!=="TRUSTED CERTIFICATE"){var ce=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw ce.headerType=oe.type,ce}if(oe.procType&&oe.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var ue=asn1$4.fromDer(oe.body,ne);return pki$2.certificateFromAsn1(ue,J)};pki$2.certificateToPem=function(K,J){var ne={type:"CERTIFICATE",body:asn1$4.toDer(pki$2.certificateToAsn1(K)).getBytes()};return forge$c.pem.encode(ne,{maxline:J})};pki$2.publicKeyFromPem=function(K){var J=forge$c.pem.decode(K)[0];if(J.type!=="PUBLIC KEY"&&J.type!=="RSA PUBLIC KEY"){var ne=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw ne.headerType=J.type,ne}if(J.procType&&J.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var oe=asn1$4.fromDer(J.body);return pki$2.publicKeyFromAsn1(oe)};pki$2.publicKeyToPem=function(K,J){var ne={type:"PUBLIC KEY",body:asn1$4.toDer(pki$2.publicKeyToAsn1(K)).getBytes()};return forge$c.pem.encode(ne,{maxline:J})};pki$2.publicKeyToRSAPublicKeyPem=function(K,J){var ne={type:"RSA PUBLIC KEY",body:asn1$4.toDer(pki$2.publicKeyToRSAPublicKey(K)).getBytes()};return forge$c.pem.encode(ne,{maxline:J})};pki$2.getPublicKeyFingerprint=function(K,J){J=J||{};var ne=J.md||forge$c.md.sha1.create(),oe=J.type||"RSAPublicKey",ce;switch(oe){case"RSAPublicKey":ce=asn1$4.toDer(pki$2.publicKeyToRSAPublicKey(K)).getBytes();break;case"SubjectPublicKeyInfo":ce=asn1$4.toDer(pki$2.publicKeyToAsn1(K)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+J.type+'".')}ne.start(),ne.update(ce);var ue=ne.digest();if(J.encoding==="hex"){var Ae=ue.toHex();return J.delimiter?Ae.match(/.{2}/g).join(J.delimiter):Ae}else{if(J.encoding==="binary")return ue.getBytes();if(J.encoding)throw new Error('Unknown encoding "'+J.encoding+'".')}return ue};pki$2.certificationRequestFromPem=function(K,J,ne){var oe=forge$c.pem.decode(K)[0];if(oe.type!=="CERTIFICATE REQUEST"){var ce=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw ce.headerType=oe.type,ce}if(oe.procType&&oe.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var ue=asn1$4.fromDer(oe.body,ne);return pki$2.certificationRequestFromAsn1(ue,J)};pki$2.certificationRequestToPem=function(K,J){var ne={type:"CERTIFICATE REQUEST",body:asn1$4.toDer(pki$2.certificationRequestToAsn1(K)).getBytes()};return forge$c.pem.encode(ne,{maxline:J})};pki$2.createCertificate=function(){var K={};return K.version=2,K.serialNumber="00",K.signatureOid=null,K.signature=null,K.siginfo={},K.siginfo.algorithmOid=null,K.validity={},K.validity.notBefore=new Date,K.validity.notAfter=new Date,K.issuer={},K.issuer.getField=function(J){return _getAttribute(K.issuer,J)},K.issuer.addField=function(J){_fillMissingFields([J]),K.issuer.attributes.push(J)},K.issuer.attributes=[],K.issuer.hash=null,K.subject={},K.subject.getField=function(J){return _getAttribute(K.subject,J)},K.subject.addField=function(J){_fillMissingFields([J]),K.subject.attributes.push(J)},K.subject.attributes=[],K.subject.hash=null,K.extensions=[],K.publicKey=null,K.md=null,K.setSubject=function(J,ne){_fillMissingFields(J),K.subject.attributes=J,delete K.subject.uniqueId,ne&&(K.subject.uniqueId=ne),K.subject.hash=null},K.setIssuer=function(J,ne){_fillMissingFields(J),K.issuer.attributes=J,delete K.issuer.uniqueId,ne&&(K.issuer.uniqueId=ne),K.issuer.hash=null},K.setExtensions=function(J){for(var ne=0;ne<J.length;++ne)_fillMissingExtensionFields(J[ne],{cert:K});K.extensions=J},K.getExtension=function(J){typeof J=="string"&&(J={name:J});for(var ne=null,oe,ce=0;ne===null&&ce<K.extensions.length;++ce)oe=K.extensions[ce],(J.id&&oe.id===J.id||J.name&&oe.name===J.name)&&(ne=oe);return ne},K.sign=function(J,ne){K.md=ne||forge$c.md.sha1.create();var oe=oids[K.md.algorithm+"WithRSAEncryption"];if(!oe){var ce=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw ce.algorithm=K.md.algorithm,ce}K.signatureOid=K.siginfo.algorithmOid=oe,K.tbsCertificate=pki$2.getTBSCertificate(K);var ue=asn1$4.toDer(K.tbsCertificate);K.md.update(ue.getBytes()),K.signature=J.sign(K.md)},K.verify=function(J){var ne=!1;if(!K.issued(J)){var oe=J.issuer,ce=K.subject,ue=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw ue.expectedIssuer=ce.attributes,ue.actualIssuer=oe.attributes,ue}var Ae=J.md;if(Ae===null){Ae=_createSignatureDigest({signatureOid:J.signatureOid,type:"certificate"});var pe=J.tbsCertificate||pki$2.getTBSCertificate(J),xe=asn1$4.toDer(pe);Ae.update(xe.getBytes())}return Ae!==null&&(ne=_verifySignature({certificate:K,md:Ae,signature:J.signature})),ne},K.isIssuer=function(J){var ne=!1,oe=K.issuer,ce=J.subject;if(oe.hash&&ce.hash)ne=oe.hash===ce.hash;else if(oe.attributes.length===ce.attributes.length){ne=!0;for(var ue,Ae,pe=0;ne&&pe<oe.attributes.length;++pe)ue=oe.attributes[pe],Ae=ce.attributes[pe],(ue.type!==Ae.type||ue.value!==Ae.value)&&(ne=!1)}return ne},K.issued=function(J){return J.isIssuer(K)},K.generateSubjectKeyIdentifier=function(){return pki$2.getPublicKeyFingerprint(K.publicKey,{type:"RSAPublicKey"})},K.verifySubjectKeyIdentifier=function(){for(var J=oids.subjectKeyIdentifier,ne=0;ne<K.extensions.length;++ne){var oe=K.extensions[ne];if(oe.id===J){var ce=K.generateSubjectKeyIdentifier().getBytes();return forge$c.util.hexToBytes(oe.subjectKeyIdentifier)===ce}}return!1},K};pki$2.certificateFromAsn1=function(K,J){var ne={},oe=[];if(!asn1$4.validate(K,x509CertificateValidator,ne,oe)){var ce=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw ce.errors=oe,ce}var ue=asn1$4.derToOid(ne.publicKeyOid);if(ue!==pki$2.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var Ae=pki$2.createCertificate();Ae.version=ne.certVersion?ne.certVersion.charCodeAt(0):0;var pe=forge$c.util.createBuffer(ne.certSerialNumber);Ae.serialNumber=pe.toHex(),Ae.signatureOid=forge$c.asn1.derToOid(ne.certSignatureOid),Ae.signatureParameters=_readSignatureParameters(Ae.signatureOid,ne.certSignatureParams,!0),Ae.siginfo.algorithmOid=forge$c.asn1.derToOid(ne.certinfoSignatureOid),Ae.siginfo.parameters=_readSignatureParameters(Ae.siginfo.algorithmOid,ne.certinfoSignatureParams,!1),Ae.signature=ne.certSignature;var xe=[];if(ne.certValidity1UTCTime!==void 0&&xe.push(asn1$4.utcTimeToDate(ne.certValidity1UTCTime)),ne.certValidity2GeneralizedTime!==void 0&&xe.push(asn1$4.generalizedTimeToDate(ne.certValidity2GeneralizedTime)),ne.certValidity3UTCTime!==void 0&&xe.push(asn1$4.utcTimeToDate(ne.certValidity3UTCTime)),ne.certValidity4GeneralizedTime!==void 0&&xe.push(asn1$4.generalizedTimeToDate(ne.certValidity4GeneralizedTime)),xe.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(xe.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(Ae.validity.notBefore=xe[0],Ae.validity.notAfter=xe[1],Ae.tbsCertificate=ne.tbsCertificate,J){Ae.md=_createSignatureDigest({signatureOid:Ae.signatureOid,type:"certificate"});var me=asn1$4.toDer(Ae.tbsCertificate);Ae.md.update(me.getBytes())}var ge=forge$c.md.sha1.create(),ye=asn1$4.toDer(ne.certIssuer);ge.update(ye.getBytes()),Ae.issuer.getField=function(Ne){return _getAttribute(Ae.issuer,Ne)},Ae.issuer.addField=function(Ne){_fillMissingFields([Ne]),Ae.issuer.attributes.push(Ne)},Ae.issuer.attributes=pki$2.RDNAttributesAsArray(ne.certIssuer),ne.certIssuerUniqueId&&(Ae.issuer.uniqueId=ne.certIssuerUniqueId),Ae.issuer.hash=ge.digest().toHex();var Se=forge$c.md.sha1.create(),Te=asn1$4.toDer(ne.certSubject);return Se.update(Te.getBytes()),Ae.subject.getField=function(Ne){return _getAttribute(Ae.subject,Ne)},Ae.subject.addField=function(Ne){_fillMissingFields([Ne]),Ae.subject.attributes.push(Ne)},Ae.subject.attributes=pki$2.RDNAttributesAsArray(ne.certSubject),ne.certSubjectUniqueId&&(Ae.subject.uniqueId=ne.certSubjectUniqueId),Ae.subject.hash=Se.digest().toHex(),ne.certExtensions?Ae.extensions=pki$2.certificateExtensionsFromAsn1(ne.certExtensions):Ae.extensions=[],Ae.publicKey=pki$2.publicKeyFromAsn1(ne.subjectPublicKeyInfo),Ae};pki$2.certificateExtensionsFromAsn1=function(K){for(var J=[],ne=0;ne<K.value.length;++ne)for(var oe=K.value[ne],ce=0;ce<oe.value.length;++ce)J.push(pki$2.certificateExtensionFromAsn1(oe.value[ce]));return J};pki$2.certificateExtensionFromAsn1=function(K){var J={};if(J.id=asn1$4.derToOid(K.value[0].value),J.critical=!1,K.value[1].type===asn1$4.Type.BOOLEAN?(J.critical=K.value[1].value.charCodeAt(0)!==0,J.value=K.value[2].value):J.value=K.value[1].value,J.id in oids){if(J.name=oids[J.id],J.name==="keyUsage"){var ne=asn1$4.fromDer(J.value),oe=0,ce=0;ne.value.length>1&&(oe=ne.value.charCodeAt(1),ce=ne.value.length>2?ne.value.charCodeAt(2):0),J.digitalSignature=(oe&128)===128,J.nonRepudiation=(oe&64)===64,J.keyEncipherment=(oe&32)===32,J.dataEncipherment=(oe&16)===16,J.keyAgreement=(oe&8)===8,J.keyCertSign=(oe&4)===4,J.cRLSign=(oe&2)===2,J.encipherOnly=(oe&1)===1,J.decipherOnly=(ce&128)===128}else if(J.name==="basicConstraints"){var ne=asn1$4.fromDer(J.value);ne.value.length>0&&ne.value[0].type===asn1$4.Type.BOOLEAN?J.cA=ne.value[0].value.charCodeAt(0)!==0:J.cA=!1;var ue=null;ne.value.length>0&&ne.value[0].type===asn1$4.Type.INTEGER?ue=ne.value[0].value:ne.value.length>1&&(ue=ne.value[1].value),ue!==null&&(J.pathLenConstraint=asn1$4.derToInteger(ue))}else if(J.name==="extKeyUsage")for(var ne=asn1$4.fromDer(J.value),Ae=0;Ae<ne.value.length;++Ae){var pe=asn1$4.derToOid(ne.value[Ae].value);pe in oids?J[oids[pe]]=!0:J[pe]=!0}else if(J.name==="nsCertType"){var ne=asn1$4.fromDer(J.value),oe=0;ne.value.length>1&&(oe=ne.value.charCodeAt(1)),J.client=(oe&128)===128,J.server=(oe&64)===64,J.email=(oe&32)===32,J.objsign=(oe&16)===16,J.reserved=(oe&8)===8,J.sslCA=(oe&4)===4,J.emailCA=(oe&2)===2,J.objCA=(oe&1)===1}else if(J.name==="subjectAltName"||J.name==="issuerAltName"){J.altNames=[];for(var xe,ne=asn1$4.fromDer(J.value),me=0;me<ne.value.length;++me){xe=ne.value[me];var ge={type:xe.type,value:xe.value};switch(J.altNames.push(ge),xe.type){case 1:case 2:case 6:break;case 7:ge.ip=forge$c.util.bytesToIP(xe.value);break;case 8:ge.oid=asn1$4.derToOid(xe.value);break}}}else if(J.name==="subjectKeyIdentifier"){var ne=asn1$4.fromDer(J.value);J.subjectKeyIdentifier=forge$c.util.bytesToHex(ne.value)}}return J};pki$2.certificationRequestFromAsn1=function(K,J){var ne={},oe=[];if(!asn1$4.validate(K,certificationRequestValidator,ne,oe)){var ce=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw ce.errors=oe,ce}var ue=asn1$4.derToOid(ne.publicKeyOid);if(ue!==pki$2.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var Ae=pki$2.createCertificationRequest();if(Ae.version=ne.csrVersion?ne.csrVersion.charCodeAt(0):0,Ae.signatureOid=forge$c.asn1.derToOid(ne.csrSignatureOid),Ae.signatureParameters=_readSignatureParameters(Ae.signatureOid,ne.csrSignatureParams,!0),Ae.siginfo.algorithmOid=forge$c.asn1.derToOid(ne.csrSignatureOid),Ae.siginfo.parameters=_readSignatureParameters(Ae.siginfo.algorithmOid,ne.csrSignatureParams,!1),Ae.signature=ne.csrSignature,Ae.certificationRequestInfo=ne.certificationRequestInfo,J){Ae.md=_createSignatureDigest({signatureOid:Ae.signatureOid,type:"certification request"});var pe=asn1$4.toDer(Ae.certificationRequestInfo);Ae.md.update(pe.getBytes())}var xe=forge$c.md.sha1.create();return Ae.subject.getField=function(me){return _getAttribute(Ae.subject,me)},Ae.subject.addField=function(me){_fillMissingFields([me]),Ae.subject.attributes.push(me)},Ae.subject.attributes=pki$2.RDNAttributesAsArray(ne.certificationRequestInfoSubject,xe),Ae.subject.hash=xe.digest().toHex(),Ae.publicKey=pki$2.publicKeyFromAsn1(ne.subjectPublicKeyInfo),Ae.getAttribute=function(me){return _getAttribute(Ae,me)},Ae.addAttribute=function(me){_fillMissingFields([me]),Ae.attributes.push(me)},Ae.attributes=pki$2.CRIAttributesAsArray(ne.certificationRequestInfoAttributes||[]),Ae};pki$2.createCertificationRequest=function(){var K={};return K.version=0,K.signatureOid=null,K.signature=null,K.siginfo={},K.siginfo.algorithmOid=null,K.subject={},K.subject.getField=function(J){return _getAttribute(K.subject,J)},K.subject.addField=function(J){_fillMissingFields([J]),K.subject.attributes.push(J)},K.subject.attributes=[],K.subject.hash=null,K.publicKey=null,K.attributes=[],K.getAttribute=function(J){return _getAttribute(K,J)},K.addAttribute=function(J){_fillMissingFields([J]),K.attributes.push(J)},K.md=null,K.setSubject=function(J){_fillMissingFields(J),K.subject.attributes=J,K.subject.hash=null},K.setAttributes=function(J){_fillMissingFields(J),K.attributes=J},K.sign=function(J,ne){K.md=ne||forge$c.md.sha1.create();var oe=oids[K.md.algorithm+"WithRSAEncryption"];if(!oe){var ce=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw ce.algorithm=K.md.algorithm,ce}K.signatureOid=K.siginfo.algorithmOid=oe,K.certificationRequestInfo=pki$2.getCertificationRequestInfo(K);var ue=asn1$4.toDer(K.certificationRequestInfo);K.md.update(ue.getBytes()),K.signature=J.sign(K.md)},K.verify=function(){var J=!1,ne=K.md;if(ne===null){ne=_createSignatureDigest({signatureOid:K.signatureOid,type:"certification request"});var oe=K.certificationRequestInfo||pki$2.getCertificationRequestInfo(K),ce=asn1$4.toDer(oe);ne.update(ce.getBytes())}return ne!==null&&(J=_verifySignature({certificate:K,md:ne,signature:K.signature})),J},K};function _dnToAsn1(K){for(var J=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]),ne,oe,ce=K.attributes,ue=0;ue<ce.length;++ue){ne=ce[ue];var Ae=ne.value,pe=asn1$4.Type.PRINTABLESTRING;"valueTagClass"in ne&&(pe=ne.valueTagClass,pe===asn1$4.Type.UTF8&&(Ae=forge$c.util.encodeUtf8(Ae))),oe=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SET,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(ne.type).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,pe,!1,Ae)])]),J.value.push(oe)}return J}function _fillMissingFields(K){for(var J,ne=0;ne<K.length;++ne){if(J=K[ne],typeof J.name>"u"&&(J.type&&J.type in pki$2.oids?J.name=pki$2.oids[J.type]:J.shortName&&J.shortName in _shortNames&&(J.name=pki$2.oids[_shortNames[J.shortName]])),typeof J.type>"u")if(J.name&&J.name in pki$2.oids)J.type=pki$2.oids[J.name];else{var oe=new Error("Attribute type not specified.");throw oe.attribute=J,oe}if(typeof J.shortName>"u"&&J.name&&J.name in _shortNames&&(J.shortName=_shortNames[J.name]),J.type===oids.extensionRequest&&(J.valueConstructed=!0,J.valueTagClass=asn1$4.Type.SEQUENCE,!J.value&&J.extensions)){J.value=[];for(var ce=0;ce<J.extensions.length;++ce)J.value.push(pki$2.certificateExtensionToAsn1(_fillMissingExtensionFields(J.extensions[ce])))}if(typeof J.value>"u"){var oe=new Error("Attribute value not specified.");throw oe.attribute=J,oe}}}function _fillMissingExtensionFields(K,J){if(J=J||{},typeof K.name>"u"&&K.id&&K.id in pki$2.oids&&(K.name=pki$2.oids[K.id]),typeof K.id>"u")if(K.name&&K.name in pki$2.oids)K.id=pki$2.oids[K.name];else{var ne=new Error("Extension ID not specified.");throw ne.extension=K,ne}if(typeof K.value<"u")return K;if(K.name==="keyUsage"){var oe=0,ce=0,ue=0;K.digitalSignature&&(ce|=128,oe=7),K.nonRepudiation&&(ce|=64,oe=6),K.keyEncipherment&&(ce|=32,oe=5),K.dataEncipherment&&(ce|=16,oe=4),K.keyAgreement&&(ce|=8,oe=3),K.keyCertSign&&(ce|=4,oe=2),K.cRLSign&&(ce|=2,oe=1),K.encipherOnly&&(ce|=1,oe=0),K.decipherOnly&&(ue|=128,oe=7);var Ae=String.fromCharCode(oe);ue!==0?Ae+=String.fromCharCode(ce)+String.fromCharCode(ue):ce!==0&&(Ae+=String.fromCharCode(ce)),K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,Ae)}else if(K.name==="basicConstraints")K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]),K.cA&&K.value.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BOOLEAN,!1,"")),"pathLenConstraint"in K&&K.value.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(K.pathLenConstraint).getBytes()));else if(K.name==="extKeyUsage"){K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);var pe=K.value.value;for(var xe in K)K[xe]===!0&&(xe in oids?pe.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(oids[xe]).getBytes())):xe.indexOf(".")!==-1&&pe.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(xe).getBytes())))}else if(K.name==="nsCertType"){var oe=0,ce=0;K.client&&(ce|=128,oe=7),K.server&&(ce|=64,oe=6),K.email&&(ce|=32,oe=5),K.objsign&&(ce|=16,oe=4),K.reserved&&(ce|=8,oe=3),K.sslCA&&(ce|=4,oe=2),K.emailCA&&(ce|=2,oe=1),K.objCA&&(ce|=1,oe=0);var Ae=String.fromCharCode(oe);ce!==0&&(Ae+=String.fromCharCode(ce)),K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,Ae)}else if(K.name==="subjectAltName"||K.name==="issuerAltName"){K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);for(var me,ge=0;ge<K.altNames.length;++ge){me=K.altNames[ge];var Ae=me.value;if(me.type===7&&me.ip){if(Ae=forge$c.util.bytesFromIP(me.ip),Ae===null){var ne=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw ne.extension=K,ne}}else me.type===8&&(me.oid?Ae=asn1$4.oidToDer(asn1$4.oidToDer(me.oid)):Ae=asn1$4.oidToDer(Ae));K.value.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,me.type,!1,Ae))}}else if(K.name==="nsComment"&&J.cert){if(!/^[\x00-\x7F]*$/.test(K.comment)||K.comment.length<1||K.comment.length>128)throw new Error('Invalid "nsComment" content.');K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.IA5STRING,!1,K.comment)}else if(K.name==="subjectKeyIdentifier"&&J.cert){var ye=J.cert.generateSubjectKeyIdentifier();K.subjectKeyIdentifier=ye.toHex(),K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OCTETSTRING,!1,ye.getBytes())}else if(K.name==="authorityKeyIdentifier"&&J.cert){K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);var pe=K.value.value;if(K.keyIdentifier){var Se=K.keyIdentifier===!0?J.cert.generateSubjectKeyIdentifier().getBytes():K.keyIdentifier;pe.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!1,Se))}if(K.authorityCertIssuer){var Te=[asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,4,!0,[_dnToAsn1(K.authorityCertIssuer===!0?J.cert.issuer:K.authorityCertIssuer)])];pe.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,1,!0,Te))}if(K.serialNumber){var Ne=forge$c.util.hexToBytes(K.serialNumber===!0?J.cert.serialNumber:K.serialNumber);pe.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,2,!1,Ne))}}else if(K.name==="cRLDistributionPoints"){K.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);for(var pe=K.value.value,$e=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]),ke=asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[]),me,ge=0;ge<K.altNames.length;++ge){me=K.altNames[ge];var Ae=me.value;if(me.type===7&&me.ip){if(Ae=forge$c.util.bytesFromIP(me.ip),Ae===null){var ne=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw ne.extension=K,ne}}else me.type===8&&(me.oid?Ae=asn1$4.oidToDer(asn1$4.oidToDer(me.oid)):Ae=asn1$4.oidToDer(Ae));ke.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,me.type,!1,Ae))}$e.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[ke])),pe.push($e)}if(typeof K.value>"u"){var ne=new Error("Extension value not specified.");throw ne.extension=K,ne}return K}function _signatureParametersToAsn1(K,J){switch(K){case oids["RSASSA-PSS"]:var ne=[];return J.hash.algorithmOid!==void 0&&ne.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(J.hash.algorithmOid).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.NULL,!1,"")])])),J.mgf.algorithmOid!==void 0&&ne.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,1,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(J.mgf.algorithmOid).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(J.mgf.hash.algorithmOid).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.NULL,!1,"")])])])),J.saltLength!==void 0&&ne.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,2,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(J.saltLength).getBytes())])),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,ne);default:return asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.NULL,!1,"")}}function _CRIAttributesToAsn1(K){var J=asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[]);if(K.attributes.length===0)return J;for(var ne=K.attributes,oe=0;oe<ne.length;++oe){var ce=ne[oe],ue=ce.value,Ae=asn1$4.Type.UTF8;"valueTagClass"in ce&&(Ae=ce.valueTagClass),Ae===asn1$4.Type.UTF8&&(ue=forge$c.util.encodeUtf8(ue));var pe=!1;"valueConstructed"in ce&&(pe=ce.valueConstructed);var xe=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(ce.type).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SET,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,Ae,pe,ue)])]);J.value.push(xe)}return J}var jan_1_1950=new Date("1950-01-01T00:00:00Z"),jan_1_2050=new Date("2050-01-01T00:00:00Z");function _dateToAsn1(K){return K>=jan_1_1950&&K<jan_1_2050?asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.UTCTIME,!1,asn1$4.dateToUtcTime(K)):asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.GENERALIZEDTIME,!1,asn1$4.dateToGeneralizedTime(K))}pki$2.getTBSCertificate=function(K){var J=_dateToAsn1(K.validity.notBefore),ne=_dateToAsn1(K.validity.notAfter),oe=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(K.version).getBytes())]),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,forge$c.util.hexToBytes(K.serialNumber)),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(K.siginfo.algorithmOid).getBytes()),_signatureParametersToAsn1(K.siginfo.algorithmOid,K.siginfo.parameters)]),_dnToAsn1(K.issuer),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[J,ne]),_dnToAsn1(K.subject),pki$2.publicKeyToAsn1(K.publicKey)]);return K.issuer.uniqueId&&oe.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,1,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,"\0"+K.issuer.uniqueId)])),K.subject.uniqueId&&oe.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,2,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,"\0"+K.subject.uniqueId)])),K.extensions.length>0&&oe.value.push(pki$2.certificateExtensionsToAsn1(K.extensions)),oe};pki$2.getCertificationRequestInfo=function(K){var J=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(K.version).getBytes()),_dnToAsn1(K.subject),pki$2.publicKeyToAsn1(K.publicKey),_CRIAttributesToAsn1(K)]);return J};pki$2.distinguishedNameToAsn1=function(K){return _dnToAsn1(K)};pki$2.certificateToAsn1=function(K){var J=K.tbsCertificate||pki$2.getTBSCertificate(K);return asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[J,asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(K.signatureOid).getBytes()),_signatureParametersToAsn1(K.signatureOid,K.signatureParameters)]),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,"\0"+K.signature)])};pki$2.certificateExtensionsToAsn1=function(K){var J=asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,3,!0,[]),ne=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);J.value.push(ne);for(var oe=0;oe<K.length;++oe)ne.value.push(pki$2.certificateExtensionToAsn1(K[oe]));return J};pki$2.certificateExtensionToAsn1=function(K){var J=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);J.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(K.id).getBytes())),K.critical&&J.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BOOLEAN,!1,""));var ne=K.value;return typeof K.value!="string"&&(ne=asn1$4.toDer(ne).getBytes()),J.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OCTETSTRING,!1,ne)),J};pki$2.certificationRequestToAsn1=function(K){var J=K.certificationRequestInfo||pki$2.getCertificationRequestInfo(K);return asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[J,asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(K.signatureOid).getBytes()),_signatureParametersToAsn1(K.signatureOid,K.signatureParameters)]),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,"\0"+K.signature)])};pki$2.createCaStore=function(K){var J={certs:{}};J.getIssuer=function(Ae){var pe=ne(Ae.issuer);return pe},J.addCertificate=function(Ae){if(typeof Ae=="string"&&(Ae=forge$c.pki.certificateFromPem(Ae)),oe(Ae.subject),!J.hasCertificate(Ae))if(Ae.subject.hash in J.certs){var pe=J.certs[Ae.subject.hash];forge$c.util.isArray(pe)||(pe=[pe]),pe.push(Ae),J.certs[Ae.subject.hash]=pe}else J.certs[Ae.subject.hash]=Ae},J.hasCertificate=function(Ae){typeof Ae=="string"&&(Ae=forge$c.pki.certificateFromPem(Ae));var pe=ne(Ae.subject);if(!pe)return!1;forge$c.util.isArray(pe)||(pe=[pe]);for(var xe=asn1$4.toDer(pki$2.certificateToAsn1(Ae)).getBytes(),me=0;me<pe.length;++me){var ge=asn1$4.toDer(pki$2.certificateToAsn1(pe[me])).getBytes();if(xe===ge)return!0}return!1},J.listAllCertificates=function(){var Ae=[];for(var pe in J.certs)if(J.certs.hasOwnProperty(pe)){var xe=J.certs[pe];if(!forge$c.util.isArray(xe))Ae.push(xe);else for(var me=0;me<xe.length;++me)Ae.push(xe[me])}return Ae},J.removeCertificate=function(Ae){var pe;if(typeof Ae=="string"&&(Ae=forge$c.pki.certificateFromPem(Ae)),oe(Ae.subject),!J.hasCertificate(Ae))return null;var xe=ne(Ae.subject);if(!forge$c.util.isArray(xe))return pe=J.certs[Ae.subject.hash],delete J.certs[Ae.subject.hash],pe;for(var me=asn1$4.toDer(pki$2.certificateToAsn1(Ae)).getBytes(),ge=0;ge<xe.length;++ge){var ye=asn1$4.toDer(pki$2.certificateToAsn1(xe[ge])).getBytes();me===ye&&(pe=xe[ge],xe.splice(ge,1))}return xe.length===0&&delete J.certs[Ae.subject.hash],pe};function ne(Ae){return oe(Ae),J.certs[Ae.hash]||null}function oe(Ae){if(!Ae.hash){var pe=forge$c.md.sha1.create();Ae.attributes=pki$2.RDNAttributesAsArray(_dnToAsn1(Ae),pe),Ae.hash=pe.digest().toHex()}}if(K)for(var ce=0;ce<K.length;++ce){var ue=K[ce];J.addCertificate(ue)}return J};pki$2.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};pki$2.verifyCertificateChain=function(K,J,ne){typeof ne=="function"&&(ne={verify:ne}),ne=ne||{},J=J.slice(0);var oe=J.slice(0),ce=ne.validityCheckDate;typeof ce>"u"&&(ce=new Date);var ue=!0,Ae=null,pe=0;do{var xe=J.shift(),me=null,ge=!1;if(ce&&(ce<xe.validity.notBefore||ce>xe.validity.notAfter)&&(Ae={message:"Certificate is not valid yet or has expired.",error:pki$2.certificateError.certificate_expired,notBefore:xe.validity.notBefore,notAfter:xe.validity.notAfter,now:ce}),Ae===null){if(me=J[0]||K.getIssuer(xe),me===null&&xe.isIssuer(xe)&&(ge=!0,me=xe),me){var ye=me;forge$c.util.isArray(ye)||(ye=[ye]);for(var Se=!1;!Se&&ye.length>0;){me=ye.shift();try{Se=me.verify(xe)}catch{}}Se||(Ae={message:"Certificate signature is invalid.",error:pki$2.certificateError.bad_certificate})}Ae===null&&(!me||ge)&&!K.hasCertificate(xe)&&(Ae={message:"Certificate is not trusted.",error:pki$2.certificateError.unknown_ca})}if(Ae===null&&me&&!xe.isIssuer(me)&&(Ae={message:"Certificate issuer is invalid.",error:pki$2.certificateError.bad_certificate}),Ae===null)for(var Te={keyUsage:!0,basicConstraints:!0},Ne=0;Ae===null&&Ne<xe.extensions.length;++Ne){var $e=xe.extensions[Ne];$e.critical&&!($e.name in Te)&&(Ae={message:"Certificate has an unsupported critical extension.",error:pki$2.certificateError.unsupported_certificate})}if(Ae===null&&(!ue||J.length===0&&(!me||ge))){var ke=xe.getExtension("basicConstraints"),je=xe.getExtension("keyUsage");if(je!==null&&(!je.keyCertSign||ke===null)&&(Ae={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:pki$2.certificateError.bad_certificate}),Ae===null&&ke!==null&&!ke.cA&&(Ae={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:pki$2.certificateError.bad_certificate}),Ae===null&&je!==null&&"pathLenConstraint"in ke){var Ke=pe-1;Ke>ke.pathLenConstraint&&(Ae={message:"Certificate basicConstraints pathLenConstraint violated.",error:pki$2.certificateError.bad_certificate})}}var Ye=Ae===null?!0:Ae.error,ze=ne.verify?ne.verify(Ye,pe,oe):Ye;if(ze===!0)Ae=null;else throw Ye===!0&&(Ae={message:"The application rejected the certificate.",error:pki$2.certificateError.bad_certificate}),(ze||ze===0)&&(typeof ze=="object"&&!forge$c.util.isArray(ze)?(ze.message&&(Ae.message=ze.message),ze.error&&(Ae.error=ze.error)):typeof ze=="string"&&(Ae.error=ze)),Ae;ue=!1,++pe}while(J.length>0);return!0};var forge$b=forge$D,asn1$3=forge$b.asn1,pki$1=forge$b.pki,p12=forge$b.pkcs12=forge$b.pkcs12||{},contentInfoValidator={name:"ContentInfo",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:asn1$3.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},pfxValidator={name:"PFX",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.INTEGER,constructed:!1,capture:"version"},contentInfoValidator,{name:"PFX.macData",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:asn1$3.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},safeBagValidator={name:"SafeBag",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:asn1$3.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},attributeValidator={name:"Attribute",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SET,constructed:!0,capture:"values"}]},certBagValidator={name:"CertBag",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:asn1$3.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function _getBagsByAttribute(K,J,ne,oe){for(var ce=[],ue=0;ue<K.length;ue++)for(var Ae=0;Ae<K[ue].safeBags.length;Ae++){var pe=K[ue].safeBags[Ae];if(!(oe!==void 0&&pe.type!==oe)){if(J===null){ce.push(pe);continue}pe.attributes[J]!==void 0&&pe.attributes[J].indexOf(ne)>=0&&ce.push(pe)}}return ce}p12.pkcs12FromAsn1=function(K,J,ne){typeof J=="string"?(ne=J,J=!0):J===void 0&&(J=!0);var oe={},ce=[];if(!asn1$3.validate(K,pfxValidator,oe,ce)){var ue=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw ue.errors=ue,ue}var Ae={version:oe.version.charCodeAt(0),safeContents:[],getBags:function(ke){var je={},Ke;return"localKeyId"in ke?Ke=ke.localKeyId:"localKeyIdHex"in ke&&(Ke=forge$b.util.hexToBytes(ke.localKeyIdHex)),Ke===void 0&&!("friendlyName"in ke)&&"bagType"in ke&&(je[ke.bagType]=_getBagsByAttribute(Ae.safeContents,null,null,ke.bagType)),Ke!==void 0&&(je.localKeyId=_getBagsByAttribute(Ae.safeContents,"localKeyId",Ke,ke.bagType)),"friendlyName"in ke&&(je.friendlyName=_getBagsByAttribute(Ae.safeContents,"friendlyName",ke.friendlyName,ke.bagType)),je},getBagsByFriendlyName:function(ke,je){return _getBagsByAttribute(Ae.safeContents,"friendlyName",ke,je)},getBagsByLocalKeyId:function(ke,je){return _getBagsByAttribute(Ae.safeContents,"localKeyId",ke,je)}};if(oe.version.charCodeAt(0)!==3){var ue=new Error("PKCS#12 PFX of version other than 3 not supported.");throw ue.version=oe.version.charCodeAt(0),ue}if(asn1$3.derToOid(oe.contentType)!==pki$1.oids.data){var ue=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw ue.oid=asn1$3.derToOid(oe.contentType),ue}var pe=oe.content.value[0];if(pe.tagClass!==asn1$3.Class.UNIVERSAL||pe.type!==asn1$3.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(pe=_decodePkcs7Data(pe),oe.mac){var xe=null,me=0,ge=asn1$3.derToOid(oe.macAlgorithm);switch(ge){case pki$1.oids.sha1:xe=forge$b.md.sha1.create(),me=20;break;case pki$1.oids.sha256:xe=forge$b.md.sha256.create(),me=32;break;case pki$1.oids.sha384:xe=forge$b.md.sha384.create(),me=48;break;case pki$1.oids.sha512:xe=forge$b.md.sha512.create(),me=64;break;case pki$1.oids.md5:xe=forge$b.md.md5.create(),me=16;break}if(xe===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+ge);var ye=new forge$b.util.ByteBuffer(oe.macSalt),Se="macIterations"in oe?parseInt(forge$b.util.bytesToHex(oe.macIterations),16):1,Te=p12.generateKey(ne,ye,3,Se,me,xe),Ne=forge$b.hmac.create();Ne.start(xe,Te),Ne.update(pe.value);var $e=Ne.getMac();if($e.getBytes()!==oe.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return _decodeAuthenticatedSafe(Ae,pe.value,J,ne),Ae};function _decodePkcs7Data(K){if(K.composed||K.constructed){for(var J=forge$b.util.createBuffer(),ne=0;ne<K.value.length;++ne)J.putBytes(K.value[ne].value);K.composed=K.constructed=!1,K.value=J.getBytes()}return K}function _decodeAuthenticatedSafe(K,J,ne,oe){if(J=asn1$3.fromDer(J,ne),J.tagClass!==asn1$3.Class.UNIVERSAL||J.type!==asn1$3.Type.SEQUENCE||J.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var ce=0;ce<J.value.length;ce++){var ue=J.value[ce],Ae={},pe=[];if(!asn1$3.validate(ue,contentInfoValidator,Ae,pe)){var xe=new Error("Cannot read ContentInfo.");throw xe.errors=pe,xe}var me={encrypted:!1},ge=null,ye=Ae.content.value[0];switch(asn1$3.derToOid(Ae.contentType)){case pki$1.oids.data:if(ye.tagClass!==asn1$3.Class.UNIVERSAL||ye.type!==asn1$3.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");ge=_decodePkcs7Data(ye).value;break;case pki$1.oids.encryptedData:ge=_decryptSafeContents(ye,oe),me.encrypted=!0;break;default:var xe=new Error("Unsupported PKCS#12 contentType.");throw xe.contentType=asn1$3.derToOid(Ae.contentType),xe}me.safeBags=_decodeSafeContents(ge,ne,oe),K.safeContents.push(me)}}function _decryptSafeContents(K,J){var ne={},oe=[];if(!asn1$3.validate(K,forge$b.pkcs7.asn1.encryptedDataValidator,ne,oe)){var ce=new Error("Cannot read EncryptedContentInfo.");throw ce.errors=oe,ce}var ue=asn1$3.derToOid(ne.contentType);if(ue!==pki$1.oids.data){var ce=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw ce.oid=ue,ce}ue=asn1$3.derToOid(ne.encAlgorithm);var Ae=pki$1.pbe.getCipher(ue,ne.encParameter,J),pe=_decodePkcs7Data(ne.encryptedContentAsn1),xe=forge$b.util.createBuffer(pe.value);if(Ae.update(xe),!Ae.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return Ae.output.getBytes()}function _decodeSafeContents(K,J,ne){if(!J&&K.length===0)return[];if(K=asn1$3.fromDer(K,J),K.tagClass!==asn1$3.Class.UNIVERSAL||K.type!==asn1$3.Type.SEQUENCE||K.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var oe=[],ce=0;ce<K.value.length;ce++){var ue=K.value[ce],Ae={},pe=[];if(!asn1$3.validate(ue,safeBagValidator,Ae,pe)){var xe=new Error("Cannot read SafeBag.");throw xe.errors=pe,xe}var me={type:asn1$3.derToOid(Ae.bagId),attributes:_decodeBagAttributes(Ae.bagAttributes)};oe.push(me);var ge,ye,Se=Ae.bagValue.value[0];switch(me.type){case pki$1.oids.pkcs8ShroudedKeyBag:if(Se=pki$1.decryptPrivateKeyInfo(Se,ne),Se===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case pki$1.oids.keyBag:try{me.key=pki$1.privateKeyFromAsn1(Se)}catch{me.key=null,me.asn1=Se}continue;case pki$1.oids.certBag:ge=certBagValidator,ye=function(){if(asn1$3.derToOid(Ae.certId)!==pki$1.oids.x509Certificate){var Ne=new Error("Unsupported certificate type, only X.509 supported.");throw Ne.oid=asn1$3.derToOid(Ae.certId),Ne}var $e=asn1$3.fromDer(Ae.cert,J);try{me.cert=pki$1.certificateFromAsn1($e,!0)}catch{me.cert=null,me.asn1=$e}};break;default:var xe=new Error("Unsupported PKCS#12 SafeBag type.");throw xe.oid=me.type,xe}if(ge!==void 0&&!asn1$3.validate(Se,ge,Ae,pe)){var xe=new Error("Cannot read PKCS#12 "+ge.name);throw xe.errors=pe,xe}ye()}return oe}function _decodeBagAttributes(K){var J={};if(K!==void 0)for(var ne=0;ne<K.length;++ne){var oe={},ce=[];if(!asn1$3.validate(K[ne],attributeValidator,oe,ce)){var ue=new Error("Cannot read PKCS#12 BagAttribute.");throw ue.errors=ce,ue}var Ae=asn1$3.derToOid(oe.oid);if(pki$1.oids[Ae]!==void 0){J[pki$1.oids[Ae]]=[];for(var pe=0;pe<oe.values.length;++pe)J[pki$1.oids[Ae]].push(oe.values[pe].value)}}return J}p12.toPkcs12Asn1=function(K,J,ne,oe){oe=oe||{},oe.saltSize=oe.saltSize||8,oe.count=oe.count||2048,oe.algorithm=oe.algorithm||oe.encAlgorithm||"aes128","useMac"in oe||(oe.useMac=!0),"localKeyId"in oe||(oe.localKeyId=null),"generateLocalKeyId"in oe||(oe.generateLocalKeyId=!0);var ce=oe.localKeyId,ue;if(ce!==null)ce=forge$b.util.hexToBytes(ce);else if(oe.generateLocalKeyId)if(J){var Ae=forge$b.util.isArray(J)?J[0]:J;typeof Ae=="string"&&(Ae=pki$1.certificateFromPem(Ae));var pe=forge$b.md.sha1.create();pe.update(asn1$3.toDer(pki$1.certificateToAsn1(Ae)).getBytes()),ce=pe.digest().getBytes()}else ce=forge$b.random.getBytes(20);var xe=[];ce!==null&&xe.push(asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.localKeyId).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SET,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,ce)])])),"friendlyName"in oe&&xe.push(asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.friendlyName).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SET,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.BMPSTRING,!1,oe.friendlyName)])])),xe.length>0&&(ue=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SET,!0,xe));var me=[],ge=[];J!==null&&(forge$b.util.isArray(J)?ge=J:ge=[J]);for(var ye=[],Se=0;Se<ge.length;++Se){J=ge[Se],typeof J=="string"&&(J=pki$1.certificateFromPem(J));var Te=Se===0?ue:void 0,Ne=pki$1.certificateToAsn1(J),$e=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.certBag).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.x509Certificate).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,asn1$3.toDer(Ne).getBytes())])])]),Te]);ye.push($e)}if(ye.length>0){var ke=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,ye),je=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.data).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,asn1$3.toDer(ke).getBytes())])]);me.push(je)}var Ke=null;if(K!==null){var Ye=pki$1.wrapRsaPrivateKey(pki$1.privateKeyToAsn1(K));ne===null?Ke=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.keyBag).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[Ye]),ue]):Ke=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.pkcs8ShroudedKeyBag).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[pki$1.encryptPrivateKeyInfo(Ye,ne,oe)]),ue]);var ze=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[Ke]),Xe=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.data).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,asn1$3.toDer(ze).getBytes())])]);me.push(Xe)}var Je=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,me),rt;if(oe.useMac){var pe=forge$b.md.sha1.create(),Ze=new forge$b.util.ByteBuffer(forge$b.random.getBytes(oe.saltSize)),et=oe.count,K=p12.generateKey(ne,Ze,3,et,20),nt=forge$b.hmac.create();nt.start(pe,K),nt.update(asn1$3.toDer(Je).getBytes());var Ge=nt.getMac();rt=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.sha1).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.NULL,!1,"")]),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,Ge.getBytes())]),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,Ze.getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.INTEGER,!1,asn1$3.integerToDer(et).getBytes())])}return asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.INTEGER,!1,asn1$3.integerToDer(3).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.data).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,asn1$3.toDer(Je).getBytes())])]),rt])};p12.generateKey=forge$b.pbe.generatePkcs12Key;var forge$a=forge$D,asn1$2=forge$a.asn1,pki=forge$a.pki=forge$a.pki||{};pki.pemToDer=function(K){var J=forge$a.pem.decode(K)[0];if(J.procType&&J.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return forge$a.util.createBuffer(J.body)};pki.privateKeyFromPem=function(K){var J=forge$a.pem.decode(K)[0];if(J.type!=="PRIVATE KEY"&&J.type!=="RSA PRIVATE KEY"){var ne=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw ne.headerType=J.type,ne}if(J.procType&&J.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var oe=asn1$2.fromDer(J.body);return pki.privateKeyFromAsn1(oe)};pki.privateKeyToPem=function(K,J){var ne={type:"RSA PRIVATE KEY",body:asn1$2.toDer(pki.privateKeyToAsn1(K)).getBytes()};return forge$a.pem.encode(ne,{maxline:J})};pki.privateKeyInfoToPem=function(K,J){var ne={type:"PRIVATE KEY",body:asn1$2.toDer(K).getBytes()};return forge$a.pem.encode(ne,{maxline:J})};var forge$9=forge$D,prf_TLS1=function(K,J,ne,oe){var ce=forge$9.util.createBuffer(),ue=K.length>>1,Ae=ue+(K.length&1),pe=K.substr(0,Ae),xe=K.substr(ue,Ae),me=forge$9.util.createBuffer(),ge=forge$9.hmac.create();ne=J+ne;var ye=Math.ceil(oe/16),Se=Math.ceil(oe/20);ge.start("MD5",pe);var Te=forge$9.util.createBuffer();me.putBytes(ne);for(var Ne=0;Ne<ye;++Ne)ge.start(null,null),ge.update(me.getBytes()),me.putBuffer(ge.digest()),ge.start(null,null),ge.update(me.bytes()+ne),Te.putBuffer(ge.digest());ge.start("SHA1",xe);var $e=forge$9.util.createBuffer();me.clear(),me.putBytes(ne);for(var Ne=0;Ne<Se;++Ne)ge.start(null,null),ge.update(me.getBytes()),me.putBuffer(ge.digest()),ge.start(null,null),ge.update(me.bytes()+ne),$e.putBuffer(ge.digest());return ce.putBytes(forge$9.util.xorBytes(Te.getBytes(),$e.getBytes(),oe)),ce},hmac_sha1=function(K,J,ne){var oe=forge$9.hmac.create();oe.start("SHA1",K);var ce=forge$9.util.createBuffer();return ce.putInt32(J[0]),ce.putInt32(J[1]),ce.putByte(ne.type),ce.putByte(ne.version.major),ce.putByte(ne.version.minor),ce.putInt16(ne.length),ce.putBytes(ne.fragment.bytes()),oe.update(ce.getBytes()),oe.digest().getBytes()},deflate=function(K,J,ne){var oe=!1;try{var ce=K.deflate(J.fragment.getBytes());J.fragment=forge$9.util.createBuffer(ce),J.length=ce.length,oe=!0}catch{}return oe},inflate=function(K,J,ne){var oe=!1;try{var ce=K.inflate(J.fragment.getBytes());J.fragment=forge$9.util.createBuffer(ce),J.length=ce.length,oe=!0}catch{}return oe},readVector=function(K,J){var ne=0;switch(J){case 1:ne=K.getByte();break;case 2:ne=K.getInt16();break;case 3:ne=K.getInt24();break;case 4:ne=K.getInt32();break}return forge$9.util.createBuffer(K.getBytes(ne))},writeVector=function(K,J,ne){K.putInt(ne.length(),J<<3),K.putBuffer(ne)},tls$1={};tls$1.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};tls$1.SupportedVersions=[tls$1.Versions.TLS_1_1,tls$1.Versions.TLS_1_0];tls$1.Version=tls$1.SupportedVersions[0];tls$1.MaxFragment=15360;tls$1.ConnectionEnd={server:0,client:1};tls$1.PRFAlgorithm={tls_prf_sha256:0};tls$1.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};tls$1.CipherType={stream:0,block:1,aead:2};tls$1.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};tls$1.CompressionMethod={none:0,deflate:1};tls$1.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};tls$1.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};tls$1.Alert={};tls$1.Alert.Level={warning:1,fatal:2};tls$1.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};tls$1.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};tls$1.CipherSuites={};tls$1.getCipherSuite=function(K){var J=null;for(var ne in tls$1.CipherSuites){var oe=tls$1.CipherSuites[ne];if(oe.id[0]===K.charCodeAt(0)&&oe.id[1]===K.charCodeAt(1)){J=oe;break}}return J};tls$1.handleUnexpected=function(K,J){var ne=!K.open&&K.entity===tls$1.ConnectionEnd.client;ne||K.error(K,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.unexpected_message}})};tls$1.handleHelloRequest=function(K,J,ne){!K.handshaking&&K.handshakes>0&&(tls$1.queue(K,tls$1.createAlert(K,{level:tls$1.Alert.Level.warning,description:tls$1.Alert.Description.no_renegotiation})),tls$1.flush(K)),K.process()};tls$1.parseHelloMessage=function(K,J,ne){var oe=null,ce=K.entity===tls$1.ConnectionEnd.client;if(ne<38)K.error(K,{message:ce?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});else{var ue=J.fragment,Ae=ue.length();if(oe={version:{major:ue.getByte(),minor:ue.getByte()},random:forge$9.util.createBuffer(ue.getBytes(32)),session_id:readVector(ue,1),extensions:[]},ce?(oe.cipher_suite=ue.getBytes(2),oe.compression_method=ue.getByte()):(oe.cipher_suites=readVector(ue,2),oe.compression_methods=readVector(ue,1)),Ae=ne-(Ae-ue.length()),Ae>0){for(var pe=readVector(ue,2);pe.length()>0;)oe.extensions.push({type:[pe.getByte(),pe.getByte()],data:readVector(pe,2)});if(!ce)for(var xe=0;xe<oe.extensions.length;++xe){var me=oe.extensions[xe];if(me.type[0]===0&&me.type[1]===0)for(var ge=readVector(me.data,2);ge.length()>0;){var ye=ge.getByte();if(ye!==0)break;K.session.extensions.server_name.serverNameList.push(readVector(ge,2).getBytes())}}}if(K.session.version&&(oe.version.major!==K.session.version.major||oe.version.minor!==K.session.version.minor))return K.error(K,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.protocol_version}});if(ce)K.session.cipherSuite=tls$1.getCipherSuite(oe.cipher_suite);else for(var Se=forge$9.util.createBuffer(oe.cipher_suites.bytes());Se.length()>0&&(K.session.cipherSuite=tls$1.getCipherSuite(Se.getBytes(2)),K.session.cipherSuite===null););if(K.session.cipherSuite===null)return K.error(K,{message:"No cipher suites in common.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.handshake_failure},cipherSuite:forge$9.util.bytesToHex(oe.cipher_suite)});ce?K.session.compressionMethod=oe.compression_method:K.session.compressionMethod=tls$1.CompressionMethod.none}return oe};tls$1.createSecurityParameters=function(K,J){var ne=K.entity===tls$1.ConnectionEnd.client,oe=J.random.bytes(),ce=ne?K.session.sp.client_random:oe,ue=ne?oe:tls$1.createRandom().getBytes();K.session.sp={entity:K.entity,prf_algorithm:tls$1.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:K.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:ce,server_random:ue}};tls$1.handleServerHello=function(K,J,ne){var oe=tls$1.parseHelloMessage(K,J,ne);if(!K.fail){if(oe.version.minor<=K.version.minor)K.version.minor=oe.version.minor;else return K.error(K,{message:"Incompatible TLS version.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.protocol_version}});K.session.version=K.version;var ce=oe.session_id.bytes();ce.length>0&&ce===K.session.id?(K.expect=SCC,K.session.resuming=!0,K.session.sp.server_random=oe.random.bytes()):(K.expect=SCE,K.session.resuming=!1,tls$1.createSecurityParameters(K,oe)),K.session.id=ce,K.process()}};tls$1.handleClientHello=function(K,J,ne){var oe=tls$1.parseHelloMessage(K,J,ne);if(!K.fail){var ce=oe.session_id.bytes(),ue=null;if(K.sessionCache&&(ue=K.sessionCache.getSession(ce),ue===null?ce="":(ue.version.major!==oe.version.major||ue.version.minor>oe.version.minor)&&(ue=null,ce="")),ce.length===0&&(ce=forge$9.random.getBytes(32)),K.session.id=ce,K.session.clientHelloVersion=oe.version,K.session.sp={},ue)K.version=K.session.version=ue.version,K.session.sp=ue.sp;else{for(var Ae,pe=1;pe<tls$1.SupportedVersions.length&&(Ae=tls$1.SupportedVersions[pe],!(Ae.minor<=oe.version.minor));++pe);K.version={major:Ae.major,minor:Ae.minor},K.session.version=K.version}ue!==null?(K.expect=CCC,K.session.resuming=!0,K.session.sp.client_random=oe.random.bytes()):(K.expect=K.verifyClient!==!1?CCE:CKE,K.session.resuming=!1,tls$1.createSecurityParameters(K,oe)),K.open=!0,tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createServerHello(K)})),K.session.resuming?(tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.change_cipher_spec,data:tls$1.createChangeCipherSpec()})),K.state.pending=tls$1.createConnectionState(K),K.state.current.write=K.state.pending.write,tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createFinished(K)}))):(tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createCertificate(K)})),K.fail||(tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createServerKeyExchange(K)})),K.verifyClient!==!1&&tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createCertificateRequest(K)})),tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createServerHelloDone(K)})))),tls$1.flush(K),K.process()}};tls$1.handleCertificate=function(K,J,ne){if(ne<3)return K.error(K,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});var oe=J.fragment,ce={certificate_list:readVector(oe,3)},ue,Ae,pe=[];try{for(;ce.certificate_list.length()>0;)ue=readVector(ce.certificate_list,3),Ae=forge$9.asn1.fromDer(ue),ue=forge$9.pki.certificateFromAsn1(Ae,!0),pe.push(ue)}catch(me){return K.error(K,{message:"Could not parse certificate list.",cause:me,send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.bad_certificate}})}var xe=K.entity===tls$1.ConnectionEnd.client;(xe||K.verifyClient===!0)&&pe.length===0?K.error(K,{message:xe?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}}):pe.length===0?K.expect=xe?SKE:CKE:(xe?K.session.serverCertificate=pe[0]:K.session.clientCertificate=pe[0],tls$1.verifyCertificateChain(K,pe)&&(K.expect=xe?SKE:CKE)),K.process()};tls$1.handleServerKeyExchange=function(K,J,ne){if(ne>0)return K.error(K,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.unsupported_certificate}});K.expect=SCR,K.process()};tls$1.handleClientKeyExchange=function(K,J,ne){if(ne<48)return K.error(K,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.unsupported_certificate}});var oe=J.fragment,ce={enc_pre_master_secret:readVector(oe,2).getBytes()},ue=null;if(K.getPrivateKey)try{ue=K.getPrivateKey(K,K.session.serverCertificate),ue=forge$9.pki.privateKeyFromPem(ue)}catch(xe){K.error(K,{message:"Could not get private key.",cause:xe,send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}})}if(ue===null)return K.error(K,{message:"No private key set.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}});try{var Ae=K.session.sp;Ae.pre_master_secret=ue.decrypt(ce.enc_pre_master_secret);var pe=K.session.clientHelloVersion;if(pe.major!==Ae.pre_master_secret.charCodeAt(0)||pe.minor!==Ae.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{Ae.pre_master_secret=forge$9.random.getBytes(48)}K.expect=CCC,K.session.clientCertificate!==null&&(K.expect=CCV),K.process()};tls$1.handleCertificateRequest=function(K,J,ne){if(ne<3)return K.error(K,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});var oe=J.fragment,ce={certificate_types:readVector(oe,1),certificate_authorities:readVector(oe,2)};K.session.certificateRequest=ce,K.expect=SHD,K.process()};tls$1.handleCertificateVerify=function(K,J,ne){if(ne<2)return K.error(K,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});var oe=J.fragment;oe.read-=4;var ce=oe.bytes();oe.read+=4;var ue={signature:readVector(oe,2).getBytes()},Ae=forge$9.util.createBuffer();Ae.putBuffer(K.session.md5.digest()),Ae.putBuffer(K.session.sha1.digest()),Ae=Ae.getBytes();try{var pe=K.session.clientCertificate;if(!pe.publicKey.verify(Ae,ue.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");K.session.md5.update(ce),K.session.sha1.update(ce)}catch{return K.error(K,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.handshake_failure}})}K.expect=CCC,K.process()};tls$1.handleServerHelloDone=function(K,J,ne){if(ne>0)return K.error(K,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.record_overflow}});if(K.serverCertificate===null){var oe={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.insufficient_security}},ce=0,ue=K.verify(K,oe.alert.description,ce,[]);if(ue!==!0)return(ue||ue===0)&&(typeof ue=="object"&&!forge$9.util.isArray(ue)?(ue.message&&(oe.message=ue.message),ue.alert&&(oe.alert.description=ue.alert)):typeof ue=="number"&&(oe.alert.description=ue)),K.error(K,oe)}K.session.certificateRequest!==null&&(J=tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createCertificate(K)}),tls$1.queue(K,J)),J=tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createClientKeyExchange(K)}),tls$1.queue(K,J),K.expect=SER;var Ae=function(pe,xe){pe.session.certificateRequest!==null&&pe.session.clientCertificate!==null&&tls$1.queue(pe,tls$1.createRecord(pe,{type:tls$1.ContentType.handshake,data:tls$1.createCertificateVerify(pe,xe)})),tls$1.queue(pe,tls$1.createRecord(pe,{type:tls$1.ContentType.change_cipher_spec,data:tls$1.createChangeCipherSpec()})),pe.state.pending=tls$1.createConnectionState(pe),pe.state.current.write=pe.state.pending.write,tls$1.queue(pe,tls$1.createRecord(pe,{type:tls$1.ContentType.handshake,data:tls$1.createFinished(pe)})),pe.expect=SCC,tls$1.flush(pe),pe.process()};if(K.session.certificateRequest===null||K.session.clientCertificate===null)return Ae(K,null);tls$1.getClientSignature(K,Ae)};tls$1.handleChangeCipherSpec=function(K,J){if(J.fragment.getByte()!==1)return K.error(K,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});var ne=K.entity===tls$1.ConnectionEnd.client;(K.session.resuming&&ne||!K.session.resuming&&!ne)&&(K.state.pending=tls$1.createConnectionState(K)),K.state.current.read=K.state.pending.read,(!K.session.resuming&&ne||K.session.resuming&&!ne)&&(K.state.pending=null),K.expect=ne?SFI:CFI,K.process()};tls$1.handleFinished=function(K,J,ne){var oe=J.fragment;oe.read-=4;var ce=oe.bytes();oe.read+=4;var ue=J.fragment.getBytes();oe=forge$9.util.createBuffer(),oe.putBuffer(K.session.md5.digest()),oe.putBuffer(K.session.sha1.digest());var Ae=K.entity===tls$1.ConnectionEnd.client,pe=Ae?"server finished":"client finished",xe=K.session.sp,me=12,ge=prf_TLS1;if(oe=ge(xe.master_secret,pe,oe.getBytes(),me),oe.getBytes()!==ue)return K.error(K,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.decrypt_error}});K.session.md5.update(ce),K.session.sha1.update(ce),(K.session.resuming&&Ae||!K.session.resuming&&!Ae)&&(tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.change_cipher_spec,data:tls$1.createChangeCipherSpec()})),K.state.current.write=K.state.pending.write,K.state.pending=null,tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.handshake,data:tls$1.createFinished(K)}))),K.expect=Ae?SAD:CAD,K.handshaking=!1,++K.handshakes,K.peerCertificate=Ae?K.session.serverCertificate:K.session.clientCertificate,tls$1.flush(K),K.isConnected=!0,K.connected(K),K.process()};tls$1.handleAlert=function(K,J){var ne=J.fragment,oe={level:ne.getByte(),description:ne.getByte()},ce;switch(oe.description){case tls$1.Alert.Description.close_notify:ce="Connection closed.";break;case tls$1.Alert.Description.unexpected_message:ce="Unexpected message.";break;case tls$1.Alert.Description.bad_record_mac:ce="Bad record MAC.";break;case tls$1.Alert.Description.decryption_failed:ce="Decryption failed.";break;case tls$1.Alert.Description.record_overflow:ce="Record overflow.";break;case tls$1.Alert.Description.decompression_failure:ce="Decompression failed.";break;case tls$1.Alert.Description.handshake_failure:ce="Handshake failure.";break;case tls$1.Alert.Description.bad_certificate:ce="Bad certificate.";break;case tls$1.Alert.Description.unsupported_certificate:ce="Unsupported certificate.";break;case tls$1.Alert.Description.certificate_revoked:ce="Certificate revoked.";break;case tls$1.Alert.Description.certificate_expired:ce="Certificate expired.";break;case tls$1.Alert.Description.certificate_unknown:ce="Certificate unknown.";break;case tls$1.Alert.Description.illegal_parameter:ce="Illegal parameter.";break;case tls$1.Alert.Description.unknown_ca:ce="Unknown certificate authority.";break;case tls$1.Alert.Description.access_denied:ce="Access denied.";break;case tls$1.Alert.Description.decode_error:ce="Decode error.";break;case tls$1.Alert.Description.decrypt_error:ce="Decrypt error.";break;case tls$1.Alert.Description.export_restriction:ce="Export restriction.";break;case tls$1.Alert.Description.protocol_version:ce="Unsupported protocol version.";break;case tls$1.Alert.Description.insufficient_security:ce="Insufficient security.";break;case tls$1.Alert.Description.internal_error:ce="Internal error.";break;case tls$1.Alert.Description.user_canceled:ce="User canceled.";break;case tls$1.Alert.Description.no_renegotiation:ce="Renegotiation not supported.";break;default:ce="Unknown error.";break}if(oe.description===tls$1.Alert.Description.close_notify)return K.close();K.error(K,{message:ce,send:!1,origin:K.entity===tls$1.ConnectionEnd.client?"server":"client",alert:oe}),K.process()};tls$1.handleHandshake=function(K,J){var ne=J.fragment,oe=ne.getByte(),ce=ne.getInt24();if(ce>ne.length())return K.fragmented=J,J.fragment=forge$9.util.createBuffer(),ne.read-=4,K.process();K.fragmented=null,ne.read-=4;var ue=ne.bytes(ce+4);ne.read+=4,oe in hsTable[K.entity][K.expect]?(K.entity===tls$1.ConnectionEnd.server&&!K.open&&!K.fail&&(K.handshaking=!0,K.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:forge$9.md.md5.create(),sha1:forge$9.md.sha1.create()}),oe!==tls$1.HandshakeType.hello_request&&oe!==tls$1.HandshakeType.certificate_verify&&oe!==tls$1.HandshakeType.finished&&(K.session.md5.update(ue),K.session.sha1.update(ue)),hsTable[K.entity][K.expect][oe](K,J,ce)):tls$1.handleUnexpected(K,J)};tls$1.handleApplicationData=function(K,J){K.data.putBuffer(J.fragment),K.dataReady(K),K.process()};tls$1.handleHeartbeat=function(K,J){var ne=J.fragment,oe=ne.getByte(),ce=ne.getInt16(),ue=ne.getBytes(ce);if(oe===tls$1.HeartbeatMessageType.heartbeat_request){if(K.handshaking||ce>ue.length)return K.process();tls$1.queue(K,tls$1.createRecord(K,{type:tls$1.ContentType.heartbeat,data:tls$1.createHeartbeat(tls$1.HeartbeatMessageType.heartbeat_response,ue)})),tls$1.flush(K)}else if(oe===tls$1.HeartbeatMessageType.heartbeat_response){if(ue!==K.expectedHeartbeatPayload)return K.process();K.heartbeatReceived&&K.heartbeatReceived(K,forge$9.util.createBuffer(ue))}K.process()};var SHE=0,SCE=1,SKE=2,SCR=3,SHD=4,SCC=5,SFI=6,SAD=7,SER=8,CHE=0,CCE=1,CKE=2,CCV=3,CCC=4,CFI=5,CAD=6,__=tls$1.handleUnexpected,R0=tls$1.handleChangeCipherSpec,R1=tls$1.handleAlert,R2=tls$1.handleHandshake,R3=tls$1.handleApplicationData,R4=tls$1.handleHeartbeat,ctTable=[];ctTable[tls$1.ConnectionEnd.client]=[[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[R0,R1,__,__,R4],[__,R1,R2,__,R4],[__,R1,R2,R3,R4],[__,R1,R2,__,R4]];ctTable[tls$1.ConnectionEnd.server]=[[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[R0,R1,__,__,R4],[__,R1,R2,__,R4],[__,R1,R2,R3,R4],[__,R1,R2,__,R4]];var H0=tls$1.handleHelloRequest,H1=tls$1.handleServerHello,H2=tls$1.handleCertificate,H3=tls$1.handleServerKeyExchange,H4=tls$1.handleCertificateRequest,H5=tls$1.handleServerHelloDone,H6=tls$1.handleFinished,hsTable=[];hsTable[tls$1.ConnectionEnd.client]=[[__,__,H1,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,H2,H3,H4,H5,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,H3,H4,H5,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,H4,H5,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,H5,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H6],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__]];var H7=tls$1.handleClientHello,H8=tls$1.handleClientKeyExchange,H9=tls$1.handleCertificateVerify;hsTable[tls$1.ConnectionEnd.server]=[[__,H7,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,H2,__,__,__,__,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H8,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H9,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H6],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__]];tls$1.generateKeys=function(K,J){var ne=prf_TLS1,oe=J.client_random+J.server_random;K.session.resuming||(J.master_secret=ne(J.pre_master_secret,"master secret",oe,48).bytes(),J.pre_master_secret=null),oe=J.server_random+J.client_random;var ce=2*J.mac_key_length+2*J.enc_key_length,ue=K.version.major===tls$1.Versions.TLS_1_0.major&&K.version.minor===tls$1.Versions.TLS_1_0.minor;ue&&(ce+=2*J.fixed_iv_length);var Ae=ne(J.master_secret,"key expansion",oe,ce),pe={client_write_MAC_key:Ae.getBytes(J.mac_key_length),server_write_MAC_key:Ae.getBytes(J.mac_key_length),client_write_key:Ae.getBytes(J.enc_key_length),server_write_key:Ae.getBytes(J.enc_key_length)};return ue&&(pe.client_write_IV=Ae.getBytes(J.fixed_iv_length),pe.server_write_IV=Ae.getBytes(J.fixed_iv_length)),pe};tls$1.createConnectionState=function(K){var J=K.entity===tls$1.ConnectionEnd.client,ne=function(){var ue={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(Ae){return!0},compressionState:null,compressFunction:function(Ae){return!0},updateSequenceNumber:function(){ue.sequenceNumber[1]===4294967295?(ue.sequenceNumber[1]=0,++ue.sequenceNumber[0]):++ue.sequenceNumber[1]}};return ue},oe={read:ne(),write:ne()};if(oe.read.update=function(ue,Ae){return oe.read.cipherFunction(Ae,oe.read)?oe.read.compressFunction(ue,Ae,oe.read)||ue.error(ue,{message:"Could not decompress record.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.decompression_failure}}):ue.error(ue,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.bad_record_mac}}),!ue.fail},oe.write.update=function(ue,Ae){return oe.write.compressFunction(ue,Ae,oe.write)?oe.write.cipherFunction(Ae,oe.write)||ue.error(ue,{message:"Could not encrypt record.",send:!1,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}}):ue.error(ue,{message:"Could not compress record.",send:!1,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}}),!ue.fail},K.session){var ce=K.session.sp;switch(K.session.cipherSuite.initSecurityParameters(ce),ce.keys=tls$1.generateKeys(K,ce),oe.read.macKey=J?ce.keys.server_write_MAC_key:ce.keys.client_write_MAC_key,oe.write.macKey=J?ce.keys.client_write_MAC_key:ce.keys.server_write_MAC_key,K.session.cipherSuite.initConnectionState(oe,K,ce),ce.compression_algorithm){case tls$1.CompressionMethod.none:break;case tls$1.CompressionMethod.deflate:oe.read.compressFunction=inflate,oe.write.compressFunction=deflate;break;default:throw new Error("Unsupported compression algorithm.")}}return oe};tls$1.createRandom=function(){var K=new Date,J=+K+K.getTimezoneOffset()*6e4,ne=forge$9.util.createBuffer();return ne.putInt32(J),ne.putBytes(forge$9.random.getBytes(28)),ne};tls$1.createRecord=function(K,J){if(!J.data)return null;var ne={type:J.type,version:{major:K.version.major,minor:K.version.minor},length:J.data.length(),fragment:J.data};return ne};tls$1.createAlert=function(K,J){var ne=forge$9.util.createBuffer();return ne.putByte(J.level),ne.putByte(J.description),tls$1.createRecord(K,{type:tls$1.ContentType.alert,data:ne})};tls$1.createClientHello=function(K){K.session.clientHelloVersion={major:K.version.major,minor:K.version.minor};for(var J=forge$9.util.createBuffer(),ne=0;ne<K.cipherSuites.length;++ne){var oe=K.cipherSuites[ne];J.putByte(oe.id[0]),J.putByte(oe.id[1])}var ce=J.length(),ue=forge$9.util.createBuffer();ue.putByte(tls$1.CompressionMethod.none);var Ae=ue.length(),pe=forge$9.util.createBuffer();if(K.virtualHost){var xe=forge$9.util.createBuffer();xe.putByte(0),xe.putByte(0);var me=forge$9.util.createBuffer();me.putByte(0),writeVector(me,2,forge$9.util.createBuffer(K.virtualHost));var ge=forge$9.util.createBuffer();writeVector(ge,2,me),writeVector(xe,2,ge),pe.putBuffer(xe)}var ye=pe.length();ye>0&&(ye+=2);var Se=K.session.id,Te=Se.length+1+2+4+28+2+ce+1+Ae+ye,Ne=forge$9.util.createBuffer();return Ne.putByte(tls$1.HandshakeType.client_hello),Ne.putInt24(Te),Ne.putByte(K.version.major),Ne.putByte(K.version.minor),Ne.putBytes(K.session.sp.client_random),writeVector(Ne,1,forge$9.util.createBuffer(Se)),writeVector(Ne,2,J),writeVector(Ne,1,ue),ye>0&&writeVector(Ne,2,pe),Ne};tls$1.createServerHello=function(K){var J=K.session.id,ne=J.length+1+2+4+28+2+1,oe=forge$9.util.createBuffer();return oe.putByte(tls$1.HandshakeType.server_hello),oe.putInt24(ne),oe.putByte(K.version.major),oe.putByte(K.version.minor),oe.putBytes(K.session.sp.server_random),writeVector(oe,1,forge$9.util.createBuffer(J)),oe.putByte(K.session.cipherSuite.id[0]),oe.putByte(K.session.cipherSuite.id[1]),oe.putByte(K.session.compressionMethod),oe};tls$1.createCertificate=function(K){var J=K.entity===tls$1.ConnectionEnd.client,ne=null;if(K.getCertificate){var oe;J?oe=K.session.certificateRequest:oe=K.session.extensions.server_name.serverNameList,ne=K.getCertificate(K,oe)}var ce=forge$9.util.createBuffer();if(ne!==null)try{forge$9.util.isArray(ne)||(ne=[ne]);for(var ue=null,Ae=0;Ae<ne.length;++Ae){var pe=forge$9.pem.decode(ne[Ae])[0];if(pe.type!=="CERTIFICATE"&&pe.type!=="X509 CERTIFICATE"&&pe.type!=="TRUSTED CERTIFICATE"){var xe=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw xe.headerType=pe.type,xe}if(pe.procType&&pe.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var me=forge$9.util.createBuffer(pe.body);ue===null&&(ue=forge$9.asn1.fromDer(me.bytes(),!1));var ge=forge$9.util.createBuffer();writeVector(ge,3,me),ce.putBuffer(ge)}ne=forge$9.pki.certificateFromAsn1(ue),J?K.session.clientCertificate=ne:K.session.serverCertificate=ne}catch(Te){return K.error(K,{message:"Could not send certificate list.",cause:Te,send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.bad_certificate}})}var ye=3+ce.length(),Se=forge$9.util.createBuffer();return Se.putByte(tls$1.HandshakeType.certificate),Se.putInt24(ye),writeVector(Se,3,ce),Se};tls$1.createClientKeyExchange=function(K){var J=forge$9.util.createBuffer();J.putByte(K.session.clientHelloVersion.major),J.putByte(K.session.clientHelloVersion.minor),J.putBytes(forge$9.random.getBytes(46));var ne=K.session.sp;ne.pre_master_secret=J.getBytes();var oe=K.session.serverCertificate.publicKey;J=oe.encrypt(ne.pre_master_secret);var ce=J.length+2,ue=forge$9.util.createBuffer();return ue.putByte(tls$1.HandshakeType.client_key_exchange),ue.putInt24(ce),ue.putInt16(J.length),ue.putBytes(J),ue};tls$1.createServerKeyExchange=function(K){var J=forge$9.util.createBuffer();return J};tls$1.getClientSignature=function(K,J){var ne=forge$9.util.createBuffer();ne.putBuffer(K.session.md5.digest()),ne.putBuffer(K.session.sha1.digest()),ne=ne.getBytes(),K.getSignature=K.getSignature||function(oe,ce,ue){var Ae=null;if(oe.getPrivateKey)try{Ae=oe.getPrivateKey(oe,oe.session.clientCertificate),Ae=forge$9.pki.privateKeyFromPem(Ae)}catch(pe){oe.error(oe,{message:"Could not get private key.",cause:pe,send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}})}Ae===null?oe.error(oe,{message:"No private key set.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}}):ce=Ae.sign(ce,null),ue(oe,ce)},K.getSignature(K,ne,J)};tls$1.createCertificateVerify=function(K,J){var ne=J.length+2,oe=forge$9.util.createBuffer();return oe.putByte(tls$1.HandshakeType.certificate_verify),oe.putInt24(ne),oe.putInt16(J.length),oe.putBytes(J),oe};tls$1.createCertificateRequest=function(K){var J=forge$9.util.createBuffer();J.putByte(1);var ne=forge$9.util.createBuffer();for(var oe in K.caStore.certs){var ce=K.caStore.certs[oe],ue=forge$9.pki.distinguishedNameToAsn1(ce.subject),Ae=forge$9.asn1.toDer(ue);ne.putInt16(Ae.length()),ne.putBuffer(Ae)}var pe=1+J.length()+2+ne.length(),xe=forge$9.util.createBuffer();return xe.putByte(tls$1.HandshakeType.certificate_request),xe.putInt24(pe),writeVector(xe,1,J),writeVector(xe,2,ne),xe};tls$1.createServerHelloDone=function(K){var J=forge$9.util.createBuffer();return J.putByte(tls$1.HandshakeType.server_hello_done),J.putInt24(0),J};tls$1.createChangeCipherSpec=function(){var K=forge$9.util.createBuffer();return K.putByte(1),K};tls$1.createFinished=function(K){var J=forge$9.util.createBuffer();J.putBuffer(K.session.md5.digest()),J.putBuffer(K.session.sha1.digest());var ne=K.entity===tls$1.ConnectionEnd.client,oe=K.session.sp,ce=12,ue=prf_TLS1,Ae=ne?"client finished":"server finished";J=ue(oe.master_secret,Ae,J.getBytes(),ce);var pe=forge$9.util.createBuffer();return pe.putByte(tls$1.HandshakeType.finished),pe.putInt24(J.length()),pe.putBuffer(J),pe};tls$1.createHeartbeat=function(K,J,ne){typeof ne>"u"&&(ne=J.length);var oe=forge$9.util.createBuffer();oe.putByte(K),oe.putInt16(ne),oe.putBytes(J);var ce=oe.length(),ue=Math.max(16,ce-ne-3);return oe.putBytes(forge$9.random.getBytes(ue)),oe};tls$1.queue=function(K,J){if(J&&!(J.fragment.length()===0&&(J.type===tls$1.ContentType.handshake||J.type===tls$1.ContentType.alert||J.type===tls$1.ContentType.change_cipher_spec))){if(J.type===tls$1.ContentType.handshake){var ne=J.fragment.bytes();K.session.md5.update(ne),K.session.sha1.update(ne),ne=null}var oe;if(J.fragment.length()<=tls$1.MaxFragment)oe=[J];else{oe=[];for(var ce=J.fragment.bytes();ce.length>tls$1.MaxFragment;)oe.push(tls$1.createRecord(K,{type:J.type,data:forge$9.util.createBuffer(ce.slice(0,tls$1.MaxFragment))})),ce=ce.slice(tls$1.MaxFragment);ce.length>0&&oe.push(tls$1.createRecord(K,{type:J.type,data:forge$9.util.createBuffer(ce)}))}for(var ue=0;ue<oe.length&&!K.fail;++ue){var Ae=oe[ue],pe=K.state.current.write;pe.update(K,Ae)&&K.records.push(Ae)}}};tls$1.flush=function(K){for(var J=0;J<K.records.length;++J){var ne=K.records[J];K.tlsData.putByte(ne.type),K.tlsData.putByte(ne.version.major),K.tlsData.putByte(ne.version.minor),K.tlsData.putInt16(ne.fragment.length()),K.tlsData.putBuffer(K.records[J].fragment)}return K.records=[],K.tlsDataReady(K)};var _certErrorToAlertDesc=function(K){switch(K){case!0:return!0;case forge$9.pki.certificateError.bad_certificate:return tls$1.Alert.Description.bad_certificate;case forge$9.pki.certificateError.unsupported_certificate:return tls$1.Alert.Description.unsupported_certificate;case forge$9.pki.certificateError.certificate_revoked:return tls$1.Alert.Description.certificate_revoked;case forge$9.pki.certificateError.certificate_expired:return tls$1.Alert.Description.certificate_expired;case forge$9.pki.certificateError.certificate_unknown:return tls$1.Alert.Description.certificate_unknown;case forge$9.pki.certificateError.unknown_ca:return tls$1.Alert.Description.unknown_ca;default:return tls$1.Alert.Description.bad_certificate}},_alertDescToCertError=function(K){switch(K){case!0:return!0;case tls$1.Alert.Description.bad_certificate:return forge$9.pki.certificateError.bad_certificate;case tls$1.Alert.Description.unsupported_certificate:return forge$9.pki.certificateError.unsupported_certificate;case tls$1.Alert.Description.certificate_revoked:return forge$9.pki.certificateError.certificate_revoked;case tls$1.Alert.Description.certificate_expired:return forge$9.pki.certificateError.certificate_expired;case tls$1.Alert.Description.certificate_unknown:return forge$9.pki.certificateError.certificate_unknown;case tls$1.Alert.Description.unknown_ca:return forge$9.pki.certificateError.unknown_ca;default:return forge$9.pki.certificateError.bad_certificate}};tls$1.verifyCertificateChain=function(K,J){try{var ne={};for(var oe in K.verifyOptions)ne[oe]=K.verifyOptions[oe];ne.verify=function(ue,Ae,pe){var xe=_certErrorToAlertDesc(ue),me=K.verify(K,ue,Ae,pe);if(me!==!0){if(typeof me=="object"&&!forge$9.util.isArray(me)){var ge=new Error("The application rejected the certificate.");throw ge.send=!0,ge.alert={level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.bad_certificate},me.message&&(ge.message=me.message),me.alert&&(ge.alert.description=me.alert),ge}me!==ue&&(me=_alertDescToCertError(me))}return me},forge$9.pki.verifyCertificateChain(K.caStore,J,ne)}catch(ue){var ce=ue;(typeof ce!="object"||forge$9.util.isArray(ce))&&(ce={send:!0,alert:{level:tls$1.Alert.Level.fatal,description:_certErrorToAlertDesc(ue)}}),"send"in ce||(ce.send=!0),"alert"in ce||(ce.alert={level:tls$1.Alert.Level.fatal,description:_certErrorToAlertDesc(ce.error)}),K.error(K,ce)}return!K.fail};tls$1.createSessionCache=function(K,J){var ne=null;if(K&&K.getSession&&K.setSession&&K.order)ne=K;else{ne={},ne.cache=K||{},ne.capacity=Math.max(J||100,1),ne.order=[];for(var oe in K)ne.order.length<=J?ne.order.push(oe):delete K[oe];ne.getSession=function(ce){var ue=null,Ae=null;if(ce?Ae=forge$9.util.bytesToHex(ce):ne.order.length>0&&(Ae=ne.order[0]),Ae!==null&&Ae in ne.cache){ue=ne.cache[Ae],delete ne.cache[Ae];for(var pe in ne.order)if(ne.order[pe]===Ae){ne.order.splice(pe,1);break}}return ue},ne.setSession=function(ce,ue){if(ne.order.length===ne.capacity){var Ae=ne.order.shift();delete ne.cache[Ae]}var Ae=forge$9.util.bytesToHex(ce);ne.order.push(Ae),ne.cache[Ae]=ue}}return ne};tls$1.createConnection=function(K){var J=null;K.caStore?forge$9.util.isArray(K.caStore)?J=forge$9.pki.createCaStore(K.caStore):J=K.caStore:J=forge$9.pki.createCaStore();var ne=K.cipherSuites||null;if(ne===null){ne=[];for(var oe in tls$1.CipherSuites)ne.push(tls$1.CipherSuites[oe])}var ce=K.server?tls$1.ConnectionEnd.server:tls$1.ConnectionEnd.client,ue=K.sessionCache?tls$1.createSessionCache(K.sessionCache):null,Ae={version:{major:tls$1.Version.major,minor:tls$1.Version.minor},entity:ce,sessionId:K.sessionId,caStore:J,sessionCache:ue,cipherSuites:ne,connected:K.connected,virtualHost:K.virtualHost||null,verifyClient:K.verifyClient||!1,verify:K.verify||function(ge,ye,Se,Te){return ye},verifyOptions:K.verifyOptions||{},getCertificate:K.getCertificate||null,getPrivateKey:K.getPrivateKey||null,getSignature:K.getSignature||null,input:forge$9.util.createBuffer(),tlsData:forge$9.util.createBuffer(),data:forge$9.util.createBuffer(),tlsDataReady:K.tlsDataReady,dataReady:K.dataReady,heartbeatReceived:K.heartbeatReceived,closed:K.closed,error:function(ge,ye){ye.origin=ye.origin||(ge.entity===tls$1.ConnectionEnd.client?"client":"server"),ye.send&&(tls$1.queue(ge,tls$1.createAlert(ge,ye.alert)),tls$1.flush(ge));var Se=ye.fatal!==!1;Se&&(ge.fail=!0),K.error(ge,ye),Se&&ge.close(!1)},deflate:K.deflate||null,inflate:K.inflate||null};Ae.reset=function(ge){Ae.version={major:tls$1.Version.major,minor:tls$1.Version.minor},Ae.record=null,Ae.session=null,Ae.peerCertificate=null,Ae.state={pending:null,current:null},Ae.expect=Ae.entity===tls$1.ConnectionEnd.client?SHE:CHE,Ae.fragmented=null,Ae.records=[],Ae.open=!1,Ae.handshakes=0,Ae.handshaking=!1,Ae.isConnected=!1,Ae.fail=!(ge||typeof ge>"u"),Ae.input.clear(),Ae.tlsData.clear(),Ae.data.clear(),Ae.state.current=tls$1.createConnectionState(Ae)},Ae.reset();var pe=function(ge,ye){var Se=ye.type-tls$1.ContentType.change_cipher_spec,Te=ctTable[ge.entity][ge.expect];Se in Te?Te[Se](ge,ye):tls$1.handleUnexpected(ge,ye)},xe=function(ge){var ye=0,Se=ge.input,Te=Se.length();if(Te<5)ye=5-Te;else{ge.record={type:Se.getByte(),version:{major:Se.getByte(),minor:Se.getByte()},length:Se.getInt16(),fragment:forge$9.util.createBuffer(),ready:!1};var Ne=ge.record.version.major===ge.version.major;Ne&&ge.session&&ge.session.version&&(Ne=ge.record.version.minor===ge.version.minor),Ne||ge.error(ge,{message:"Incompatible TLS version.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.protocol_version}})}return ye},me=function(ge){var ye=0,Se=ge.input,Te=Se.length();if(Te<ge.record.length)ye=ge.record.length-Te;else{ge.record.fragment.putBytes(Se.getBytes(ge.record.length)),Se.compact();var Ne=ge.state.current.read;Ne.update(ge,ge.record)&&(ge.fragmented!==null&&(ge.fragmented.type===ge.record.type?(ge.fragmented.fragment.putBuffer(ge.record.fragment),ge.record=ge.fragmented):ge.error(ge,{message:"Invalid fragmented record.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.unexpected_message}})),ge.record.ready=!0)}return ye};return Ae.handshake=function(ge){if(Ae.entity!==tls$1.ConnectionEnd.client)Ae.error(Ae,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(Ae.handshaking)Ae.error(Ae,{message:"Handshake already in progress.",fatal:!1});else{Ae.fail&&!Ae.open&&Ae.handshakes===0&&(Ae.fail=!1),Ae.handshaking=!0,ge=ge||"";var ye=null;ge.length>0&&(Ae.sessionCache&&(ye=Ae.sessionCache.getSession(ge)),ye===null&&(ge="")),ge.length===0&&Ae.sessionCache&&(ye=Ae.sessionCache.getSession(),ye!==null&&(ge=ye.id)),Ae.session={id:ge,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:forge$9.md.md5.create(),sha1:forge$9.md.sha1.create()},ye&&(Ae.version=ye.version,Ae.session.sp=ye.sp),Ae.session.sp.client_random=tls$1.createRandom().getBytes(),Ae.open=!0,tls$1.queue(Ae,tls$1.createRecord(Ae,{type:tls$1.ContentType.handshake,data:tls$1.createClientHello(Ae)})),tls$1.flush(Ae)}},Ae.process=function(ge){var ye=0;return ge&&Ae.input.putBytes(ge),Ae.fail||(Ae.record!==null&&Ae.record.ready&&Ae.record.fragment.isEmpty()&&(Ae.record=null),Ae.record===null&&(ye=xe(Ae)),!Ae.fail&&Ae.record!==null&&!Ae.record.ready&&(ye=me(Ae)),!Ae.fail&&Ae.record!==null&&Ae.record.ready&&pe(Ae,Ae.record)),ye},Ae.prepare=function(ge){return tls$1.queue(Ae,tls$1.createRecord(Ae,{type:tls$1.ContentType.application_data,data:forge$9.util.createBuffer(ge)})),tls$1.flush(Ae)},Ae.prepareHeartbeatRequest=function(ge,ye){return ge instanceof forge$9.util.ByteBuffer&&(ge=ge.bytes()),typeof ye>"u"&&(ye=ge.length),Ae.expectedHeartbeatPayload=ge,tls$1.queue(Ae,tls$1.createRecord(Ae,{type:tls$1.ContentType.heartbeat,data:tls$1.createHeartbeat(tls$1.HeartbeatMessageType.heartbeat_request,ge,ye)})),tls$1.flush(Ae)},Ae.close=function(ge){if(!Ae.fail&&Ae.sessionCache&&Ae.session){var ye={id:Ae.session.id,version:Ae.session.version,sp:Ae.session.sp};ye.sp.keys=null,Ae.sessionCache.setSession(ye.id,ye)}Ae.open&&(Ae.open=!1,Ae.input.clear(),(Ae.isConnected||Ae.handshaking)&&(Ae.isConnected=Ae.handshaking=!1,tls$1.queue(Ae,tls$1.createAlert(Ae,{level:tls$1.Alert.Level.warning,description:tls$1.Alert.Description.close_notify})),tls$1.flush(Ae)),Ae.closed(Ae)),Ae.reset(ge)},Ae};forge$9.tls=forge$9.tls||{};for(var key in tls$1)typeof tls$1[key]!="function"&&(forge$9.tls[key]=tls$1[key]);forge$9.tls.prf_tls1=prf_TLS1;forge$9.tls.hmac_sha1=hmac_sha1;forge$9.tls.createSessionCache=tls$1.createSessionCache;forge$9.tls.createConnection=tls$1.createConnection;var forge$8=forge$D,tls=forge$8.tls;tls.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(K){K.bulk_cipher_algorithm=tls.BulkCipherAlgorithm.aes,K.cipher_type=tls.CipherType.block,K.enc_key_length=16,K.block_length=16,K.fixed_iv_length=16,K.record_iv_length=16,K.mac_algorithm=tls.MACAlgorithm.hmac_sha1,K.mac_length=20,K.mac_key_length=20},initConnectionState};tls.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(K){K.bulk_cipher_algorithm=tls.BulkCipherAlgorithm.aes,K.cipher_type=tls.CipherType.block,K.enc_key_length=32,K.block_length=16,K.fixed_iv_length=16,K.record_iv_length=16,K.mac_algorithm=tls.MACAlgorithm.hmac_sha1,K.mac_length=20,K.mac_key_length=20},initConnectionState};function initConnectionState(K,J,ne){var oe=J.entity===forge$8.tls.ConnectionEnd.client;K.read.cipherState={init:!1,cipher:forge$8.cipher.createDecipher("AES-CBC",oe?ne.keys.server_write_key:ne.keys.client_write_key),iv:oe?ne.keys.server_write_IV:ne.keys.client_write_IV},K.write.cipherState={init:!1,cipher:forge$8.cipher.createCipher("AES-CBC",oe?ne.keys.client_write_key:ne.keys.server_write_key),iv:oe?ne.keys.client_write_IV:ne.keys.server_write_IV},K.read.cipherFunction=decrypt_aes_cbc_sha1,K.write.cipherFunction=encrypt_aes_cbc_sha1,K.read.macLength=K.write.macLength=ne.mac_length,K.read.macFunction=K.write.macFunction=tls.hmac_sha1}function encrypt_aes_cbc_sha1(K,J){var ne=!1,oe=J.macFunction(J.macKey,J.sequenceNumber,K);K.fragment.putBytes(oe),J.updateSequenceNumber();var ce;K.version.minor===tls.Versions.TLS_1_0.minor?ce=J.cipherState.init?null:J.cipherState.iv:ce=forge$8.random.getBytesSync(16),J.cipherState.init=!0;var ue=J.cipherState.cipher;return ue.start({iv:ce}),K.version.minor>=tls.Versions.TLS_1_1.minor&&ue.output.putBytes(ce),ue.update(K.fragment),ue.finish(encrypt_aes_cbc_sha1_padding)&&(K.fragment=ue.output,K.length=K.fragment.length(),ne=!0),ne}function encrypt_aes_cbc_sha1_padding(K,J,ne){if(!ne){var oe=K-J.length()%K;J.fillWithByte(oe-1,oe)}return!0}function decrypt_aes_cbc_sha1_padding(K,J,ne){var oe=!0;if(ne){for(var ce=J.length(),ue=J.last(),Ae=ce-1-ue;Ae<ce-1;++Ae)oe=oe&&J.at(Ae)==ue;oe&&J.truncate(ue+1)}return oe}function decrypt_aes_cbc_sha1(K,J){var ne=!1,oe;K.version.minor===tls.Versions.TLS_1_0.minor?oe=J.cipherState.init?null:J.cipherState.iv:oe=K.fragment.getBytes(16),J.cipherState.init=!0;var ce=J.cipherState.cipher;ce.start({iv:oe}),ce.update(K.fragment),ne=ce.finish(decrypt_aes_cbc_sha1_padding);var ue=J.macLength,Ae=forge$8.random.getBytesSync(ue),pe=ce.output.length();pe>=ue?(K.fragment=ce.output.getBytes(pe-ue),Ae=ce.output.getBytes(ue)):K.fragment=ce.output.getBytes(),K.fragment=forge$8.util.createBuffer(K.fragment),K.length=K.fragment.length();var xe=J.macFunction(J.macKey,J.sequenceNumber,K);return J.updateSequenceNumber(),ne=compareMacs(J.macKey,Ae,xe)&&ne,ne}function compareMacs(K,J,ne){var oe=forge$8.hmac.create();return oe.start("SHA1",K),oe.update(J),J=oe.digest().getBytes(),oe.start(null,null),oe.update(ne),ne=oe.digest().getBytes(),J===ne}var forge$7=forge$D,sha512$1=forge$7.sha512=forge$7.sha512||{};forge$7.md.sha512=forge$7.md.algorithms.sha512=sha512$1;var sha384=forge$7.sha384=forge$7.sha512.sha384=forge$7.sha512.sha384||{};sha384.create=function(){return sha512$1.create("SHA-384")};forge$7.md.sha384=forge$7.md.algorithms.sha384=sha384;forge$7.sha512.sha256=forge$7.sha512.sha256||{create:function(){return sha512$1.create("SHA-512/256")}};forge$7.md["sha512/256"]=forge$7.md.algorithms["sha512/256"]=forge$7.sha512.sha256;forge$7.sha512.sha224=forge$7.sha512.sha224||{create:function(){return sha512$1.create("SHA-512/224")}};forge$7.md["sha512/224"]=forge$7.md.algorithms["sha512/224"]=forge$7.sha512.sha224;sha512$1.create=function(K){if(_initialized||_init(),typeof K>"u"&&(K="SHA-512"),!(K in _states))throw new Error("Invalid SHA-512 algorithm: "+K);for(var J=_states[K],ne=null,oe=forge$7.util.createBuffer(),ce=new Array(80),ue=0;ue<80;++ue)ce[ue]=new Array(2);var Ae=64;switch(K){case"SHA-384":Ae=48;break;case"SHA-512/256":Ae=32;break;case"SHA-512/224":Ae=28;break}var pe={algorithm:K.replace("-","").toLowerCase(),blockLength:128,digestLength:Ae,messageLength:0,fullMessageLength:null,messageLengthSize:16};return pe.start=function(){pe.messageLength=0,pe.fullMessageLength=pe.messageLength128=[];for(var xe=pe.messageLengthSize/4,me=0;me<xe;++me)pe.fullMessageLength.push(0);oe=forge$7.util.createBuffer(),ne=new Array(J.length);for(var me=0;me<J.length;++me)ne[me]=J[me].slice(0);return pe},pe.start(),pe.update=function(xe,me){me==="utf8"&&(xe=forge$7.util.encodeUtf8(xe));var ge=xe.length;pe.messageLength+=ge,ge=[ge/4294967296>>>0,ge>>>0];for(var ye=pe.fullMessageLength.length-1;ye>=0;--ye)pe.fullMessageLength[ye]+=ge[1],ge[1]=ge[0]+(pe.fullMessageLength[ye]/4294967296>>>0),pe.fullMessageLength[ye]=pe.fullMessageLength[ye]>>>0,ge[0]=ge[1]/4294967296>>>0;return oe.putBytes(xe),_update(ne,ce,oe),(oe.read>2048||oe.length()===0)&&oe.compact(),pe},pe.digest=function(){var xe=forge$7.util.createBuffer();xe.putBytes(oe.bytes());var me=pe.fullMessageLength[pe.fullMessageLength.length-1]+pe.messageLengthSize,ge=me&pe.blockLength-1;xe.putBytes(_padding.substr(0,pe.blockLength-ge));for(var ye,Se,Te=pe.fullMessageLength[0]*8,Ne=0;Ne<pe.fullMessageLength.length-1;++Ne)ye=pe.fullMessageLength[Ne+1]*8,Se=ye/4294967296>>>0,Te+=Se,xe.putInt32(Te>>>0),Te=ye>>>0;xe.putInt32(Te);for(var $e=new Array(ne.length),Ne=0;Ne<ne.length;++Ne)$e[Ne]=ne[Ne].slice(0);_update($e,ce,xe);var ke=forge$7.util.createBuffer(),je;K==="SHA-512"?je=$e.length:K==="SHA-384"?je=$e.length-2:je=$e.length-4;for(var Ne=0;Ne<je;++Ne)ke.putInt32($e[Ne][0]),(Ne!==je-1||K!=="SHA-512/224")&&ke.putInt32($e[Ne][1]);return ke},pe};var _padding=null,_initialized=!1,_k=null,_states=null;function _init(){_padding="",_padding+=forge$7.util.fillString("\0",128),_k=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],_states={},_states["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],_states["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],_states["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],_states["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],_initialized=!0}function _update(K,J,ne){for(var oe,ce,ue,Ae,pe,xe,me,ge,ye,Se,Te,Ne,$e,ke,je,Ke,Ye,ze,Xe,Je,rt,Ze,et,nt,Ge,ve,Be,Re,Ie,Fe,qe,We,Ue,_e,Qe,tt=ne.length();tt>=128;){for(Ie=0;Ie<16;++Ie)J[Ie][0]=ne.getInt32()>>>0,J[Ie][1]=ne.getInt32()>>>0;for(;Ie<80;++Ie)We=J[Ie-2],Fe=We[0],qe=We[1],oe=((Fe>>>19|qe<<13)^(qe>>>29|Fe<<3)^Fe>>>6)>>>0,ce=((Fe<<13|qe>>>19)^(qe<<3|Fe>>>29)^(Fe<<26|qe>>>6))>>>0,_e=J[Ie-15],Fe=_e[0],qe=_e[1],ue=((Fe>>>1|qe<<31)^(Fe>>>8|qe<<24)^Fe>>>7)>>>0,Ae=((Fe<<31|qe>>>1)^(Fe<<24|qe>>>8)^(Fe<<25|qe>>>7))>>>0,Ue=J[Ie-7],Qe=J[Ie-16],qe=ce+Ue[1]+Ae+Qe[1],J[Ie][0]=oe+Ue[0]+ue+Qe[0]+(qe/4294967296>>>0)>>>0,J[Ie][1]=qe>>>0;for($e=K[0][0],ke=K[0][1],je=K[1][0],Ke=K[1][1],Ye=K[2][0],ze=K[2][1],Xe=K[3][0],Je=K[3][1],rt=K[4][0],Ze=K[4][1],et=K[5][0],nt=K[5][1],Ge=K[6][0],ve=K[6][1],Be=K[7][0],Re=K[7][1],Ie=0;Ie<80;++Ie)me=((rt>>>14|Ze<<18)^(rt>>>18|Ze<<14)^(Ze>>>9|rt<<23))>>>0,ge=((rt<<18|Ze>>>14)^(rt<<14|Ze>>>18)^(Ze<<23|rt>>>9))>>>0,ye=(Ge^rt&(et^Ge))>>>0,Se=(ve^Ze&(nt^ve))>>>0,pe=(($e>>>28|ke<<4)^(ke>>>2|$e<<30)^(ke>>>7|$e<<25))>>>0,xe=(($e<<4|ke>>>28)^(ke<<30|$e>>>2)^(ke<<25|$e>>>7))>>>0,Te=($e&je|Ye&($e^je))>>>0,Ne=(ke&Ke|ze&(ke^Ke))>>>0,qe=Re+ge+Se+_k[Ie][1]+J[Ie][1],oe=Be+me+ye+_k[Ie][0]+J[Ie][0]+(qe/4294967296>>>0)>>>0,ce=qe>>>0,qe=xe+Ne,ue=pe+Te+(qe/4294967296>>>0)>>>0,Ae=qe>>>0,Be=Ge,Re=ve,Ge=et,ve=nt,et=rt,nt=Ze,qe=Je+ce,rt=Xe+oe+(qe/4294967296>>>0)>>>0,Ze=qe>>>0,Xe=Ye,Je=ze,Ye=je,ze=Ke,je=$e,Ke=ke,qe=ce+Ae,$e=oe+ue+(qe/4294967296>>>0)>>>0,ke=qe>>>0;qe=K[0][1]+ke,K[0][0]=K[0][0]+$e+(qe/4294967296>>>0)>>>0,K[0][1]=qe>>>0,qe=K[1][1]+Ke,K[1][0]=K[1][0]+je+(qe/4294967296>>>0)>>>0,K[1][1]=qe>>>0,qe=K[2][1]+ze,K[2][0]=K[2][0]+Ye+(qe/4294967296>>>0)>>>0,K[2][1]=qe>>>0,qe=K[3][1]+Je,K[3][0]=K[3][0]+Xe+(qe/4294967296>>>0)>>>0,K[3][1]=qe>>>0,qe=K[4][1]+Ze,K[4][0]=K[4][0]+rt+(qe/4294967296>>>0)>>>0,K[4][1]=qe>>>0,qe=K[5][1]+nt,K[5][0]=K[5][0]+et+(qe/4294967296>>>0)>>>0,K[5][1]=qe>>>0,qe=K[6][1]+ve,K[6][0]=K[6][0]+Ge+(qe/4294967296>>>0)>>>0,K[6][1]=qe>>>0,qe=K[7][1]+Re,K[7][0]=K[7][0]+Be+(qe/4294967296>>>0)>>>0,K[7][1]=qe>>>0,tt-=128}}var asn1Validator$1={},forge$6=forge$D,asn1$1=forge$6.asn1;asn1Validator$1.privateKeyValidator={name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};asn1Validator$1.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]};var forge$5=forge$D,asn1Validator=asn1Validator$1,publicKeyValidator=asn1Validator.publicKeyValidator,privateKeyValidator=asn1Validator.privateKeyValidator;if(typeof BigInteger$1>"u")var BigInteger$1=forge$5.jsbn.BigInteger;var ByteBuffer=forge$5.util.ByteBuffer,NativeBuffer=typeof Buffer>"u"?Uint8Array:Buffer;forge$5.pki=forge$5.pki||{};forge$5.pki.ed25519=forge$5.ed25519=forge$5.ed25519||{};var ed25519=forge$5.ed25519;ed25519.constants={};ed25519.constants.PUBLIC_KEY_BYTE_LENGTH=32;ed25519.constants.PRIVATE_KEY_BYTE_LENGTH=64;ed25519.constants.SEED_BYTE_LENGTH=32;ed25519.constants.SIGN_BYTE_LENGTH=64;ed25519.constants.HASH_BYTE_LENGTH=64;ed25519.generateKeyPair=function(K){K=K||{};var J=K.seed;if(J===void 0)J=forge$5.random.getBytesSync(ed25519.constants.SEED_BYTE_LENGTH);else if(typeof J=="string"){if(J.length!==ed25519.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+ed25519.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(J instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');J=messageToNativeBuffer({message:J,encoding:"binary"});for(var ne=new NativeBuffer(ed25519.constants.PUBLIC_KEY_BYTE_LENGTH),oe=new NativeBuffer(ed25519.constants.PRIVATE_KEY_BYTE_LENGTH),ce=0;ce<32;++ce)oe[ce]=J[ce];return crypto_sign_keypair(ne,oe),{publicKey:ne,privateKey:oe}};ed25519.privateKeyFromAsn1=function(K){var J={},ne=[],oe=forge$5.asn1.validate(K,privateKeyValidator,J,ne);if(!oe){var ce=new Error("Invalid Key.");throw ce.errors=ne,ce}var ue=forge$5.asn1.derToOid(J.privateKeyOid),Ae=forge$5.oids.EdDSA25519;if(ue!==Ae)throw new Error('Invalid OID "'+ue+'"; OID must be "'+Ae+'".');var pe=J.privateKey,xe=messageToNativeBuffer({message:forge$5.asn1.fromDer(pe).value,encoding:"binary"});return{privateKeyBytes:xe}};ed25519.publicKeyFromAsn1=function(K){var J={},ne=[],oe=forge$5.asn1.validate(K,publicKeyValidator,J,ne);if(!oe){var ce=new Error("Invalid Key.");throw ce.errors=ne,ce}var ue=forge$5.asn1.derToOid(J.publicKeyOid),Ae=forge$5.oids.EdDSA25519;if(ue!==Ae)throw new Error('Invalid OID "'+ue+'"; OID must be "'+Ae+'".');var pe=J.ed25519PublicKey;if(pe.length!==ed25519.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return messageToNativeBuffer({message:pe,encoding:"binary"})};ed25519.publicKeyFromPrivateKey=function(K){K=K||{};var J=messageToNativeBuffer({message:K.privateKey,encoding:"binary"});if(J.length!==ed25519.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+ed25519.constants.PRIVATE_KEY_BYTE_LENGTH);for(var ne=new NativeBuffer(ed25519.constants.PUBLIC_KEY_BYTE_LENGTH),oe=0;oe<ne.length;++oe)ne[oe]=J[32+oe];return ne};ed25519.sign=function(K){K=K||{};var J=messageToNativeBuffer(K),ne=messageToNativeBuffer({message:K.privateKey,encoding:"binary"});if(ne.length===ed25519.constants.SEED_BYTE_LENGTH){var oe=ed25519.generateKeyPair({seed:ne});ne=oe.privateKey}else if(ne.length!==ed25519.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+ed25519.constants.SEED_BYTE_LENGTH+" or "+ed25519.constants.PRIVATE_KEY_BYTE_LENGTH);var ce=new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH+J.length);crypto_sign(ce,J,J.length,ne);for(var ue=new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH),Ae=0;Ae<ue.length;++Ae)ue[Ae]=ce[Ae];return ue};ed25519.verify=function(K){K=K||{};var J=messageToNativeBuffer(K);if(K.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var ne=messageToNativeBuffer({message:K.signature,encoding:"binary"});if(ne.length!==ed25519.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+ed25519.constants.SIGN_BYTE_LENGTH);var oe=messageToNativeBuffer({message:K.publicKey,encoding:"binary"});if(oe.length!==ed25519.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+ed25519.constants.PUBLIC_KEY_BYTE_LENGTH);var ce=new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH+J.length),ue=new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH+J.length),Ae;for(Ae=0;Ae<ed25519.constants.SIGN_BYTE_LENGTH;++Ae)ce[Ae]=ne[Ae];for(Ae=0;Ae<J.length;++Ae)ce[Ae+ed25519.constants.SIGN_BYTE_LENGTH]=J[Ae];return crypto_sign_open(ue,ce,ce.length,oe)>=0};function messageToNativeBuffer(K){var J=K.message;if(J instanceof Uint8Array||J instanceof NativeBuffer)return J;var ne=K.encoding;if(J===void 0)if(K.md)J=K.md.digest().getBytes(),ne="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof J=="string"&&!ne)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof J=="string"){if(typeof Buffer<"u")return Buffer.from(J,ne);J=new ByteBuffer(J,ne)}else if(!(J instanceof ByteBuffer))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var oe=new NativeBuffer(J.length()),ce=0;ce<oe.length;++ce)oe[ce]=J.at(ce);return oe}var gf0=gf(),gf1=gf([1]),D=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D2=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),X=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),I=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function sha512(K,J){var ne=forge$5.md.sha512.create(),oe=new ByteBuffer(K);ne.update(oe.getBytes(J),"binary");var ce=ne.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(ce,"binary");for(var ue=new NativeBuffer(ed25519.constants.HASH_BYTE_LENGTH),Ae=0;Ae<64;++Ae)ue[Ae]=ce.charCodeAt(Ae);return ue}function crypto_sign_keypair(K,J){var ne=[gf(),gf(),gf(),gf()],oe,ce=sha512(J,32);for(ce[0]&=248,ce[31]&=127,ce[31]|=64,scalarbase(ne,ce),pack(K,ne),oe=0;oe<32;++oe)J[oe+32]=K[oe];return 0}function crypto_sign(K,J,ne,oe){var ce,ue,Ae=new Float64Array(64),pe=[gf(),gf(),gf(),gf()],xe=sha512(oe,32);xe[0]&=248,xe[31]&=127,xe[31]|=64;var me=ne+64;for(ce=0;ce<ne;++ce)K[64+ce]=J[ce];for(ce=0;ce<32;++ce)K[32+ce]=xe[32+ce];var ge=sha512(K.subarray(32),ne+32);for(reduce(ge),scalarbase(pe,ge),pack(K,pe),ce=32;ce<64;++ce)K[ce]=oe[ce];var ye=sha512(K,ne+64);for(reduce(ye),ce=32;ce<64;++ce)Ae[ce]=0;for(ce=0;ce<32;++ce)Ae[ce]=ge[ce];for(ce=0;ce<32;++ce)for(ue=0;ue<32;ue++)Ae[ce+ue]+=ye[ce]*xe[ue];return modL(K.subarray(32),Ae),me}function crypto_sign_open(K,J,ne,oe){var ce,ue,Ae=new NativeBuffer(32),pe=[gf(),gf(),gf(),gf()],xe=[gf(),gf(),gf(),gf()];if(ue=-1,ne<64||unpackneg(xe,oe))return-1;for(ce=0;ce<ne;++ce)K[ce]=J[ce];for(ce=0;ce<32;++ce)K[ce+32]=oe[ce];var me=sha512(K,ne);if(reduce(me),scalarmult(pe,xe,me),scalarbase(xe,J.subarray(32)),add(pe,xe),pack(Ae,pe),ne-=64,crypto_verify_32(J,0,Ae,0)){for(ce=0;ce<ne;++ce)K[ce]=0;return-1}for(ce=0;ce<ne;++ce)K[ce]=J[ce+64];return ue=ne,ue}function modL(K,J){var ne,oe,ce,ue;for(oe=63;oe>=32;--oe){for(ne=0,ce=oe-32,ue=oe-12;ce<ue;++ce)J[ce]+=ne-16*J[oe]*L[ce-(oe-32)],ne=J[ce]+128>>8,J[ce]-=ne*256;J[ce]+=ne,J[oe]=0}for(ne=0,ce=0;ce<32;++ce)J[ce]+=ne-(J[31]>>4)*L[ce],ne=J[ce]>>8,J[ce]&=255;for(ce=0;ce<32;++ce)J[ce]-=ne*L[ce];for(oe=0;oe<32;++oe)J[oe+1]+=J[oe]>>8,K[oe]=J[oe]&255}function reduce(K){for(var J=new Float64Array(64),ne=0;ne<64;++ne)J[ne]=K[ne],K[ne]=0;modL(K,J)}function add(K,J){var ne=gf(),oe=gf(),ce=gf(),ue=gf(),Ae=gf(),pe=gf(),xe=gf(),me=gf(),ge=gf();Z(ne,K[1],K[0]),Z(ge,J[1],J[0]),M(ne,ne,ge),A(oe,K[0],K[1]),A(ge,J[0],J[1]),M(oe,oe,ge),M(ce,K[3],J[3]),M(ce,ce,D2),M(ue,K[2],J[2]),A(ue,ue,ue),Z(Ae,oe,ne),Z(pe,ue,ce),A(xe,ue,ce),A(me,oe,ne),M(K[0],Ae,pe),M(K[1],me,xe),M(K[2],xe,pe),M(K[3],Ae,me)}function cswap(K,J,ne){for(var oe=0;oe<4;++oe)sel25519(K[oe],J[oe],ne)}function pack(K,J){var ne=gf(),oe=gf(),ce=gf();inv25519(ce,J[2]),M(ne,J[0],ce),M(oe,J[1],ce),pack25519(K,oe),K[31]^=par25519(ne)<<7}function pack25519(K,J){var ne,oe,ce,ue=gf(),Ae=gf();for(ne=0;ne<16;++ne)Ae[ne]=J[ne];for(car25519(Ae),car25519(Ae),car25519(Ae),oe=0;oe<2;++oe){for(ue[0]=Ae[0]-65517,ne=1;ne<15;++ne)ue[ne]=Ae[ne]-65535-(ue[ne-1]>>16&1),ue[ne-1]&=65535;ue[15]=Ae[15]-32767-(ue[14]>>16&1),ce=ue[15]>>16&1,ue[14]&=65535,sel25519(Ae,ue,1-ce)}for(ne=0;ne<16;ne++)K[2*ne]=Ae[ne]&255,K[2*ne+1]=Ae[ne]>>8}function unpackneg(K,J){var ne=gf(),oe=gf(),ce=gf(),ue=gf(),Ae=gf(),pe=gf(),xe=gf();return set25519(K[2],gf1),unpack25519(K[1],J),S(ce,K[1]),M(ue,ce,D),Z(ce,ce,K[2]),A(ue,K[2],ue),S(Ae,ue),S(pe,Ae),M(xe,pe,Ae),M(ne,xe,ce),M(ne,ne,ue),pow2523(ne,ne),M(ne,ne,ce),M(ne,ne,ue),M(ne,ne,ue),M(K[0],ne,ue),S(oe,K[0]),M(oe,oe,ue),neq25519(oe,ce)&&M(K[0],K[0],I),S(oe,K[0]),M(oe,oe,ue),neq25519(oe,ce)?-1:(par25519(K[0])===J[31]>>7&&Z(K[0],gf0,K[0]),M(K[3],K[0],K[1]),0)}function unpack25519(K,J){var ne;for(ne=0;ne<16;++ne)K[ne]=J[2*ne]+(J[2*ne+1]<<8);K[15]&=32767}function pow2523(K,J){var ne=gf(),oe;for(oe=0;oe<16;++oe)ne[oe]=J[oe];for(oe=250;oe>=0;--oe)S(ne,ne),oe!==1&&M(ne,ne,J);for(oe=0;oe<16;++oe)K[oe]=ne[oe]}function neq25519(K,J){var ne=new NativeBuffer(32),oe=new NativeBuffer(32);return pack25519(ne,K),pack25519(oe,J),crypto_verify_32(ne,0,oe,0)}function crypto_verify_32(K,J,ne,oe){return vn(K,J,ne,oe,32)}function vn(K,J,ne,oe,ce){var ue,Ae=0;for(ue=0;ue<ce;++ue)Ae|=K[J+ue]^ne[oe+ue];return(1&Ae-1>>>8)-1}function par25519(K){var J=new NativeBuffer(32);return pack25519(J,K),J[0]&1}function scalarmult(K,J,ne){var oe,ce;for(set25519(K[0],gf0),set25519(K[1],gf1),set25519(K[2],gf1),set25519(K[3],gf0),ce=255;ce>=0;--ce)oe=ne[ce/8|0]>>(ce&7)&1,cswap(K,J,oe),add(J,K),add(K,K),cswap(K,J,oe)}function scalarbase(K,J){var ne=[gf(),gf(),gf(),gf()];set25519(ne[0],X),set25519(ne[1],Y),set25519(ne[2],gf1),M(ne[3],X,Y),scalarmult(K,ne,J)}function set25519(K,J){var ne;for(ne=0;ne<16;ne++)K[ne]=J[ne]|0}function inv25519(K,J){var ne=gf(),oe;for(oe=0;oe<16;++oe)ne[oe]=J[oe];for(oe=253;oe>=0;--oe)S(ne,ne),oe!==2&&oe!==4&&M(ne,ne,J);for(oe=0;oe<16;++oe)K[oe]=ne[oe]}function car25519(K){var J,ne,oe=1;for(J=0;J<16;++J)ne=K[J]+oe+65535,oe=Math.floor(ne/65536),K[J]=ne-oe*65536;K[0]+=oe-1+37*(oe-1)}function sel25519(K,J,ne){for(var oe,ce=~(ne-1),ue=0;ue<16;++ue)oe=ce&(K[ue]^J[ue]),K[ue]^=oe,J[ue]^=oe}function gf(K){var J,ne=new Float64Array(16);if(K)for(J=0;J<K.length;++J)ne[J]=K[J];return ne}function A(K,J,ne){for(var oe=0;oe<16;++oe)K[oe]=J[oe]+ne[oe]}function Z(K,J,ne){for(var oe=0;oe<16;++oe)K[oe]=J[oe]-ne[oe]}function S(K,J){M(K,J,J)}function M(K,J,ne){var oe,ce,ue=0,Ae=0,pe=0,xe=0,me=0,ge=0,ye=0,Se=0,Te=0,Ne=0,$e=0,ke=0,je=0,Ke=0,Ye=0,ze=0,Xe=0,Je=0,rt=0,Ze=0,et=0,nt=0,Ge=0,ve=0,Be=0,Re=0,Ie=0,Fe=0,qe=0,We=0,Ue=0,_e=ne[0],Qe=ne[1],tt=ne[2],it=ne[3],at=ne[4],ot=ne[5],lt=ne[6],st=ne[7],ut=ne[8],ft=ne[9],dt=ne[10],Bt=ne[11],pt=ne[12],mt=ne[13],bt=ne[14],xt=ne[15];oe=J[0],ue+=oe*_e,Ae+=oe*Qe,pe+=oe*tt,xe+=oe*it,me+=oe*at,ge+=oe*ot,ye+=oe*lt,Se+=oe*st,Te+=oe*ut,Ne+=oe*ft,$e+=oe*dt,ke+=oe*Bt,je+=oe*pt,Ke+=oe*mt,Ye+=oe*bt,ze+=oe*xt,oe=J[1],Ae+=oe*_e,pe+=oe*Qe,xe+=oe*tt,me+=oe*it,ge+=oe*at,ye+=oe*ot,Se+=oe*lt,Te+=oe*st,Ne+=oe*ut,$e+=oe*ft,ke+=oe*dt,je+=oe*Bt,Ke+=oe*pt,Ye+=oe*mt,ze+=oe*bt,Xe+=oe*xt,oe=J[2],pe+=oe*_e,xe+=oe*Qe,me+=oe*tt,ge+=oe*it,ye+=oe*at,Se+=oe*ot,Te+=oe*lt,Ne+=oe*st,$e+=oe*ut,ke+=oe*ft,je+=oe*dt,Ke+=oe*Bt,Ye+=oe*pt,ze+=oe*mt,Xe+=oe*bt,Je+=oe*xt,oe=J[3],xe+=oe*_e,me+=oe*Qe,ge+=oe*tt,ye+=oe*it,Se+=oe*at,Te+=oe*ot,Ne+=oe*lt,$e+=oe*st,ke+=oe*ut,je+=oe*ft,Ke+=oe*dt,Ye+=oe*Bt,ze+=oe*pt,Xe+=oe*mt,Je+=oe*bt,rt+=oe*xt,oe=J[4],me+=oe*_e,ge+=oe*Qe,ye+=oe*tt,Se+=oe*it,Te+=oe*at,Ne+=oe*ot,$e+=oe*lt,ke+=oe*st,je+=oe*ut,Ke+=oe*ft,Ye+=oe*dt,ze+=oe*Bt,Xe+=oe*pt,Je+=oe*mt,rt+=oe*bt,Ze+=oe*xt,oe=J[5],ge+=oe*_e,ye+=oe*Qe,Se+=oe*tt,Te+=oe*it,Ne+=oe*at,$e+=oe*ot,ke+=oe*lt,je+=oe*st,Ke+=oe*ut,Ye+=oe*ft,ze+=oe*dt,Xe+=oe*Bt,Je+=oe*pt,rt+=oe*mt,Ze+=oe*bt,et+=oe*xt,oe=J[6],ye+=oe*_e,Se+=oe*Qe,Te+=oe*tt,Ne+=oe*it,$e+=oe*at,ke+=oe*ot,je+=oe*lt,Ke+=oe*st,Ye+=oe*ut,ze+=oe*ft,Xe+=oe*dt,Je+=oe*Bt,rt+=oe*pt,Ze+=oe*mt,et+=oe*bt,nt+=oe*xt,oe=J[7],Se+=oe*_e,Te+=oe*Qe,Ne+=oe*tt,$e+=oe*it,ke+=oe*at,je+=oe*ot,Ke+=oe*lt,Ye+=oe*st,ze+=oe*ut,Xe+=oe*ft,Je+=oe*dt,rt+=oe*Bt,Ze+=oe*pt,et+=oe*mt,nt+=oe*bt,Ge+=oe*xt,oe=J[8],Te+=oe*_e,Ne+=oe*Qe,$e+=oe*tt,ke+=oe*it,je+=oe*at,Ke+=oe*ot,Ye+=oe*lt,ze+=oe*st,Xe+=oe*ut,Je+=oe*ft,rt+=oe*dt,Ze+=oe*Bt,et+=oe*pt,nt+=oe*mt,Ge+=oe*bt,ve+=oe*xt,oe=J[9],Ne+=oe*_e,$e+=oe*Qe,ke+=oe*tt,je+=oe*it,Ke+=oe*at,Ye+=oe*ot,ze+=oe*lt,Xe+=oe*st,Je+=oe*ut,rt+=oe*ft,Ze+=oe*dt,et+=oe*Bt,nt+=oe*pt,Ge+=oe*mt,ve+=oe*bt,Be+=oe*xt,oe=J[10],$e+=oe*_e,ke+=oe*Qe,je+=oe*tt,Ke+=oe*it,Ye+=oe*at,ze+=oe*ot,Xe+=oe*lt,Je+=oe*st,rt+=oe*ut,Ze+=oe*ft,et+=oe*dt,nt+=oe*Bt,Ge+=oe*pt,ve+=oe*mt,Be+=oe*bt,Re+=oe*xt,oe=J[11],ke+=oe*_e,je+=oe*Qe,Ke+=oe*tt,Ye+=oe*it,ze+=oe*at,Xe+=oe*ot,Je+=oe*lt,rt+=oe*st,Ze+=oe*ut,et+=oe*ft,nt+=oe*dt,Ge+=oe*Bt,ve+=oe*pt,Be+=oe*mt,Re+=oe*bt,Ie+=oe*xt,oe=J[12],je+=oe*_e,Ke+=oe*Qe,Ye+=oe*tt,ze+=oe*it,Xe+=oe*at,Je+=oe*ot,rt+=oe*lt,Ze+=oe*st,et+=oe*ut,nt+=oe*ft,Ge+=oe*dt,ve+=oe*Bt,Be+=oe*pt,Re+=oe*mt,Ie+=oe*bt,Fe+=oe*xt,oe=J[13],Ke+=oe*_e,Ye+=oe*Qe,ze+=oe*tt,Xe+=oe*it,Je+=oe*at,rt+=oe*ot,Ze+=oe*lt,et+=oe*st,nt+=oe*ut,Ge+=oe*ft,ve+=oe*dt,Be+=oe*Bt,Re+=oe*pt,Ie+=oe*mt,Fe+=oe*bt,qe+=oe*xt,oe=J[14],Ye+=oe*_e,ze+=oe*Qe,Xe+=oe*tt,Je+=oe*it,rt+=oe*at,Ze+=oe*ot,et+=oe*lt,nt+=oe*st,Ge+=oe*ut,ve+=oe*ft,Be+=oe*dt,Re+=oe*Bt,Ie+=oe*pt,Fe+=oe*mt,qe+=oe*bt,We+=oe*xt,oe=J[15],ze+=oe*_e,Xe+=oe*Qe,Je+=oe*tt,rt+=oe*it,Ze+=oe*at,et+=oe*ot,nt+=oe*lt,Ge+=oe*st,ve+=oe*ut,Be+=oe*ft,Re+=oe*dt,Ie+=oe*Bt,Fe+=oe*pt,qe+=oe*mt,We+=oe*bt,Ue+=oe*xt,ue+=38*Xe,Ae+=38*Je,pe+=38*rt,xe+=38*Ze,me+=38*et,ge+=38*nt,ye+=38*Ge,Se+=38*ve,Te+=38*Be,Ne+=38*Re,$e+=38*Ie,ke+=38*Fe,je+=38*qe,Ke+=38*We,Ye+=38*Ue,ce=1,oe=ue+ce+65535,ce=Math.floor(oe/65536),ue=oe-ce*65536,oe=Ae+ce+65535,ce=Math.floor(oe/65536),Ae=oe-ce*65536,oe=pe+ce+65535,ce=Math.floor(oe/65536),pe=oe-ce*65536,oe=xe+ce+65535,ce=Math.floor(oe/65536),xe=oe-ce*65536,oe=me+ce+65535,ce=Math.floor(oe/65536),me=oe-ce*65536,oe=ge+ce+65535,ce=Math.floor(oe/65536),ge=oe-ce*65536,oe=ye+ce+65535,ce=Math.floor(oe/65536),ye=oe-ce*65536,oe=Se+ce+65535,ce=Math.floor(oe/65536),Se=oe-ce*65536,oe=Te+ce+65535,ce=Math.floor(oe/65536),Te=oe-ce*65536,oe=Ne+ce+65535,ce=Math.floor(oe/65536),Ne=oe-ce*65536,oe=$e+ce+65535,ce=Math.floor(oe/65536),$e=oe-ce*65536,oe=ke+ce+65535,ce=Math.floor(oe/65536),ke=oe-ce*65536,oe=je+ce+65535,ce=Math.floor(oe/65536),je=oe-ce*65536,oe=Ke+ce+65535,ce=Math.floor(oe/65536),Ke=oe-ce*65536,oe=Ye+ce+65535,ce=Math.floor(oe/65536),Ye=oe-ce*65536,oe=ze+ce+65535,ce=Math.floor(oe/65536),ze=oe-ce*65536,ue+=ce-1+37*(ce-1),ce=1,oe=ue+ce+65535,ce=Math.floor(oe/65536),ue=oe-ce*65536,oe=Ae+ce+65535,ce=Math.floor(oe/65536),Ae=oe-ce*65536,oe=pe+ce+65535,ce=Math.floor(oe/65536),pe=oe-ce*65536,oe=xe+ce+65535,ce=Math.floor(oe/65536),xe=oe-ce*65536,oe=me+ce+65535,ce=Math.floor(oe/65536),me=oe-ce*65536,oe=ge+ce+65535,ce=Math.floor(oe/65536),ge=oe-ce*65536,oe=ye+ce+65535,ce=Math.floor(oe/65536),ye=oe-ce*65536,oe=Se+ce+65535,ce=Math.floor(oe/65536),Se=oe-ce*65536,oe=Te+ce+65535,ce=Math.floor(oe/65536),Te=oe-ce*65536,oe=Ne+ce+65535,ce=Math.floor(oe/65536),Ne=oe-ce*65536,oe=$e+ce+65535,ce=Math.floor(oe/65536),$e=oe-ce*65536,oe=ke+ce+65535,ce=Math.floor(oe/65536),ke=oe-ce*65536,oe=je+ce+65535,ce=Math.floor(oe/65536),je=oe-ce*65536,oe=Ke+ce+65535,ce=Math.floor(oe/65536),Ke=oe-ce*65536,oe=Ye+ce+65535,ce=Math.floor(oe/65536),Ye=oe-ce*65536,oe=ze+ce+65535,ce=Math.floor(oe/65536),ze=oe-ce*65536,ue+=ce-1+37*(ce-1),K[0]=ue,K[1]=Ae,K[2]=pe,K[3]=xe,K[4]=me,K[5]=ge,K[6]=ye,K[7]=Se,K[8]=Te,K[9]=Ne,K[10]=$e,K[11]=ke,K[12]=je,K[13]=Ke,K[14]=Ye,K[15]=ze}var forge$4=forge$D;forge$4.kem=forge$4.kem||{};var BigInteger=forge$4.jsbn.BigInteger;forge$4.kem.rsa={};forge$4.kem.rsa.create=function(K,J){J=J||{};var ne=J.prng||forge$4.random,oe={};return oe.encrypt=function(ce,ue){var Ae=Math.ceil(ce.n.bitLength()/8),pe;do pe=new BigInteger(forge$4.util.bytesToHex(ne.getBytesSync(Ae)),16).mod(ce.n);while(pe.compareTo(BigInteger.ONE)<=0);pe=forge$4.util.hexToBytes(pe.toString(16));var xe=Ae-pe.length;xe>0&&(pe=forge$4.util.fillString("\0",xe)+pe);var me=ce.encrypt(pe,"NONE"),ge=K.generate(pe,ue);return{encapsulation:me,key:ge}},oe.decrypt=function(ce,ue,Ae){var pe=ce.decrypt(ue,"NONE");return K.generate(pe,Ae)},oe};forge$4.kem.kdf1=function(K,J){_createKDF(this,K,0,J||K.digestLength)};forge$4.kem.kdf2=function(K,J){_createKDF(this,K,1,J||K.digestLength)};function _createKDF(K,J,ne,oe){K.generate=function(ce,ue){for(var Ae=new forge$4.util.ByteBuffer,pe=Math.ceil(ue/oe)+ne,xe=new forge$4.util.ByteBuffer,me=ne;me<pe;++me){xe.putInt32(me),J.start(),J.update(ce+xe.getBytes());var ge=J.digest();Ae.putBytes(ge.getBytes(oe))}return Ae.truncate(Ae.length()-ue),Ae.getBytes()}}var forge$3=forge$D;forge$3.log=forge$3.log||{};forge$3.log.levels=["none","error","warning","info","debug","verbose","max"];var sLevelInfo={},sLoggers=[],sConsoleLogger=null;forge$3.log.LEVEL_LOCKED=2;forge$3.log.NO_LEVEL_CHECK=4;forge$3.log.INTERPOLATE=8;for(var i=0;i<forge$3.log.levels.length;++i){var level=forge$3.log.levels[i];sLevelInfo[level]={index:i,name:level.toUpperCase()}}forge$3.log.logMessage=function(K){for(var J=sLevelInfo[K.level].index,ne=0;ne<sLoggers.length;++ne){var oe=sLoggers[ne];if(oe.flags&forge$3.log.NO_LEVEL_CHECK)oe.f(K);else{var ce=sLevelInfo[oe.level].index;J<=ce&&oe.f(oe,K)}}};forge$3.log.prepareStandard=function(K){"standard"in K||(K.standard=sLevelInfo[K.level].name+" ["+K.category+"] "+K.message)};forge$3.log.prepareFull=function(K){if(!("full"in K)){var J=[K.message];J=J.concat([]),K.full=forge$3.util.format.apply(this,J)}};forge$3.log.prepareStandardFull=function(K){"standardFull"in K||(forge$3.log.prepareStandard(K),K.standardFull=K.standard)};for(var levels=["error","warning","info","debug","verbose"],i=0;i<levels.length;++i)(function(J){forge$3.log[J]=function(ne,oe){var ce=Array.prototype.slice.call(arguments).slice(2),ue={timestamp:new Date,level:J,category:ne,message:oe,arguments:ce};forge$3.log.logMessage(ue)}})(levels[i]);forge$3.log.makeLogger=function(K){var J={flags:0,f:K};return forge$3.log.setLevel(J,"none"),J};forge$3.log.setLevel=function(K,J){var ne=!1;if(K&&!(K.flags&forge$3.log.LEVEL_LOCKED))for(var oe=0;oe<forge$3.log.levels.length;++oe){var ce=forge$3.log.levels[oe];if(J==ce){K.level=J,ne=!0;break}}return ne};forge$3.log.lock=function(K,J){typeof J>"u"||J?K.flags|=forge$3.log.LEVEL_LOCKED:K.flags&=~forge$3.log.LEVEL_LOCKED};forge$3.log.addLogger=function(K){sLoggers.push(K)};if(typeof console<"u"&&"log"in console){var logger;if(console.error&&console.warn&&console.info&&console.debug){var levelHandlers={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},f=function(K,J){forge$3.log.prepareStandard(J);var ne=levelHandlers[J.level],oe=[J.standard];oe=oe.concat(J.arguments.slice()),ne.apply(console,oe)};logger=forge$3.log.makeLogger(f)}else{var f=function(J,ne){forge$3.log.prepareStandardFull(ne),console.log(ne.standardFull)};logger=forge$3.log.makeLogger(f)}forge$3.log.setLevel(logger,"debug"),forge$3.log.addLogger(logger),sConsoleLogger=logger}else console={log:function(){}};if(sConsoleLogger!==null&&typeof window<"u"&&window.location){var query=new URL(window.location.href).searchParams;if(query.has("console.level")&&forge$3.log.setLevel(sConsoleLogger,query.get("console.level").slice(-1)[0]),query.has("console.lock")){var lock=query.get("console.lock").slice(-1)[0];lock=="true"&&forge$3.log.lock(sConsoleLogger)}}forge$3.log.consoleLogger=sConsoleLogger;var forge$2=forge$D,asn1=forge$2.asn1,p7=forge$2.pkcs7=forge$2.pkcs7||{};p7.messageFromPem=function(K){var J=forge$2.pem.decode(K)[0];if(J.type!=="PKCS7"){var ne=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw ne.headerType=J.type,ne}if(J.procType&&J.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var oe=asn1.fromDer(J.body);return p7.messageFromAsn1(oe)};p7.messageToPem=function(K,J){var ne={type:"PKCS7",body:asn1.toDer(K.toAsn1()).getBytes()};return forge$2.pem.encode(ne,{maxline:J})};p7.messageFromAsn1=function(K){var J={},ne=[];if(!asn1.validate(K,p7.asn1.contentInfoValidator,J,ne)){var oe=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw oe.errors=ne,oe}var ce=asn1.derToOid(J.contentType),ue;switch(ce){case forge$2.pki.oids.envelopedData:ue=p7.createEnvelopedData();break;case forge$2.pki.oids.encryptedData:ue=p7.createEncryptedData();break;case forge$2.pki.oids.signedData:ue=p7.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+ce+" is not (yet) supported.")}return ue.fromAsn1(J.content.value[0]),ue};p7.createSignedData=function(){var K=null;return K={type:forge$2.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(oe){if(_fromAsn1(K,oe,p7.asn1.signedDataValidator),K.certificates=[],K.crls=[],K.digestAlgorithmIdentifiers=[],K.contentInfo=null,K.signerInfos=[],K.rawCapture.certificates)for(var ce=K.rawCapture.certificates.value,ue=0;ue<ce.length;++ue)K.certificates.push(forge$2.pki.certificateFromAsn1(ce[ue]))},toAsn1:function(){K.contentInfo||K.sign();for(var oe=[],ce=0;ce<K.certificates.length;++ce)oe.push(forge$2.pki.certificateToAsn1(K.certificates[ce]));var ue=[],Ae=asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(K.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,K.digestAlgorithmIdentifiers),K.contentInfo])]);return oe.length>0&&Ae.value[0].value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,oe)),ue.length>0&&Ae.value[0].value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,1,!0,ue)),Ae.value[0].value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,K.signerInfos)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.type).getBytes()),Ae])},addSigner:function(oe){var ce=oe.issuer,ue=oe.serialNumber;if(oe.certificate){var Ae=oe.certificate;typeof Ae=="string"&&(Ae=forge$2.pki.certificateFromPem(Ae)),ce=Ae.issuer.attributes,ue=Ae.serialNumber}var pe=oe.key;if(!pe)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof pe=="string"&&(pe=forge$2.pki.privateKeyFromPem(pe));var xe=oe.digestAlgorithm||forge$2.pki.oids.sha1;switch(xe){case forge$2.pki.oids.sha1:case forge$2.pki.oids.sha256:case forge$2.pki.oids.sha384:case forge$2.pki.oids.sha512:case forge$2.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+xe)}var me=oe.authenticatedAttributes||[];if(me.length>0){for(var ge=!1,ye=!1,Se=0;Se<me.length;++Se){var Te=me[Se];if(!ge&&Te.type===forge$2.pki.oids.contentType){if(ge=!0,ye)break;continue}if(!ye&&Te.type===forge$2.pki.oids.messageDigest){if(ye=!0,ge)break;continue}}if(!ge||!ye)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}K.signers.push({key:pe,version:1,issuer:ce,serialNumber:ue,digestAlgorithm:xe,signatureAlgorithm:forge$2.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:me,unauthenticatedAttributes:[]})},sign:function(oe){if(oe=oe||{},(typeof K.content!="object"||K.contentInfo===null)&&(K.contentInfo=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(forge$2.pki.oids.data).getBytes())]),"content"in K)){var ce;K.content instanceof forge$2.util.ByteBuffer?ce=K.content.bytes():typeof K.content=="string"&&(ce=forge$2.util.encodeUtf8(K.content)),oe.detached?K.detachedContent=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,ce):K.contentInfo.value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,ce)]))}if(K.signers.length!==0){var ue=J();ne(ue)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(oe){typeof oe=="string"&&(oe=forge$2.pki.certificateFromPem(oe)),K.certificates.push(oe)},addCertificateRevokationList:function(oe){throw new Error("PKCS#7 CRL support not yet implemented.")}},K;function J(){for(var oe={},ce=0;ce<K.signers.length;++ce){var ue=K.signers[ce],Ae=ue.digestAlgorithm;Ae in oe||(oe[Ae]=forge$2.md[forge$2.pki.oids[Ae]].create()),ue.authenticatedAttributes.length===0?ue.md=oe[Ae]:ue.md=forge$2.md[forge$2.pki.oids[Ae]].create()}K.digestAlgorithmIdentifiers=[];for(var Ae in oe)K.digestAlgorithmIdentifiers.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(Ae).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")]));return oe}function ne(oe){var ce;if(K.detachedContent?ce=K.detachedContent:(ce=K.contentInfo.value[1],ce=ce.value[0]),!ce)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var ue=asn1.derToOid(K.contentInfo.value[0].value),Ae=asn1.toDer(ce);Ae.getByte(),asn1.getBerValueLength(Ae),Ae=Ae.getBytes();for(var pe in oe)oe[pe].start().update(Ae);for(var xe=new Date,me=0;me<K.signers.length;++me){var ge=K.signers[me];if(ge.authenticatedAttributes.length===0){if(ue!==forge$2.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{ge.authenticatedAttributesAsn1=asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var ye=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,[]),Se=0;Se<ge.authenticatedAttributes.length;++Se){var Te=ge.authenticatedAttributes[Se];Te.type===forge$2.pki.oids.messageDigest?Te.value=oe[ge.digestAlgorithm].digest():Te.type===forge$2.pki.oids.signingTime&&(Te.value||(Te.value=xe)),ye.value.push(_attributeToAsn1(Te)),ge.authenticatedAttributesAsn1.value.push(_attributeToAsn1(Te))}Ae=asn1.toDer(ye).getBytes(),ge.md.start().update(Ae)}ge.signature=ge.key.sign(ge.md,"RSASSA-PKCS1-V1_5")}K.signerInfos=_signersToAsn1(K.signers)}};p7.createEncryptedData=function(){var K=null;return K={type:forge$2.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:forge$2.pki.oids["aes256-CBC"]},fromAsn1:function(J){_fromAsn1(K,J,p7.asn1.encryptedDataValidator)},decrypt:function(J){J!==void 0&&(K.encryptedContent.key=J),_decryptContent(K)}},K};p7.createEnvelopedData=function(){var K=null;return K={type:forge$2.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:forge$2.pki.oids["aes256-CBC"]},fromAsn1:function(J){var ne=_fromAsn1(K,J,p7.asn1.envelopedDataValidator);K.recipients=_recipientsFromAsn1(ne.recipientInfos.value)},toAsn1:function(){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.type).getBytes()),asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(K.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,_recipientsToAsn1(K.recipients)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,_encryptedContentToAsn1(K.encryptedContent))])])])},findRecipient:function(J){for(var ne=J.issuer.attributes,oe=0;oe<K.recipients.length;++oe){var ce=K.recipients[oe],ue=ce.issuer;if(ce.serialNumber===J.serialNumber&&ue.length===ne.length){for(var Ae=!0,pe=0;pe<ne.length;++pe)if(ue[pe].type!==ne[pe].type||ue[pe].value!==ne[pe].value){Ae=!1;break}if(Ae)return ce}}return null},decrypt:function(J,ne){if(K.encryptedContent.key===void 0&&J!==void 0&&ne!==void 0)switch(J.encryptedContent.algorithm){case forge$2.pki.oids.rsaEncryption:case forge$2.pki.oids.desCBC:var oe=ne.decrypt(J.encryptedContent.content);K.encryptedContent.key=forge$2.util.createBuffer(oe);break;default:throw new Error("Unsupported asymmetric cipher, OID "+J.encryptedContent.algorithm)}_decryptContent(K)},addRecipient:function(J){K.recipients.push({version:0,issuer:J.issuer.attributes,serialNumber:J.serialNumber,encryptedContent:{algorithm:forge$2.pki.oids.rsaEncryption,key:J.publicKey}})},encrypt:function(J,ne){if(K.encryptedContent.content===void 0){ne=ne||K.encryptedContent.algorithm,J=J||K.encryptedContent.key;var oe,ce,ue;switch(ne){case forge$2.pki.oids["aes128-CBC"]:oe=16,ce=16,ue=forge$2.aes.createEncryptionCipher;break;case forge$2.pki.oids["aes192-CBC"]:oe=24,ce=16,ue=forge$2.aes.createEncryptionCipher;break;case forge$2.pki.oids["aes256-CBC"]:oe=32,ce=16,ue=forge$2.aes.createEncryptionCipher;break;case forge$2.pki.oids["des-EDE3-CBC"]:oe=24,ce=8,ue=forge$2.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+ne)}if(J===void 0)J=forge$2.util.createBuffer(forge$2.random.getBytes(oe));else if(J.length()!=oe)throw new Error("Symmetric key has wrong length; got "+J.length()+" bytes, expected "+oe+".");K.encryptedContent.algorithm=ne,K.encryptedContent.key=J,K.encryptedContent.parameter=forge$2.util.createBuffer(forge$2.random.getBytes(ce));var Ae=ue(J);if(Ae.start(K.encryptedContent.parameter.copy()),Ae.update(K.content),!Ae.finish())throw new Error("Symmetric encryption failed.");K.encryptedContent.content=Ae.output}for(var pe=0;pe<K.recipients.length;++pe){var xe=K.recipients[pe];if(xe.encryptedContent.content===void 0)switch(xe.encryptedContent.algorithm){case forge$2.pki.oids.rsaEncryption:xe.encryptedContent.content=xe.encryptedContent.key.encrypt(K.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+xe.encryptedContent.algorithm)}}}},K};function _recipientFromAsn1(K){var J={},ne=[];if(!asn1.validate(K,p7.asn1.recipientInfoValidator,J,ne)){var oe=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw oe.errors=ne,oe}return{version:J.version.charCodeAt(0),issuer:forge$2.pki.RDNAttributesAsArray(J.issuer),serialNumber:forge$2.util.createBuffer(J.serial).toHex(),encryptedContent:{algorithm:asn1.derToOid(J.encAlgorithm),parameter:J.encParameter?J.encParameter.value:void 0,content:J.encKey}}}function _recipientToAsn1(K){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(K.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[forge$2.pki.distinguishedNameToAsn1({attributes:K.issuer}),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge$2.util.hexToBytes(K.serialNumber))]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.encryptedContent.algorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,K.encryptedContent.content)])}function _recipientsFromAsn1(K){for(var J=[],ne=0;ne<K.length;++ne)J.push(_recipientFromAsn1(K[ne]));return J}function _recipientsToAsn1(K){for(var J=[],ne=0;ne<K.length;++ne)J.push(_recipientToAsn1(K[ne]));return J}function _signerToAsn1(K){var J=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(K.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[forge$2.pki.distinguishedNameToAsn1({attributes:K.issuer}),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge$2.util.hexToBytes(K.serialNumber))]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.digestAlgorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])]);if(K.authenticatedAttributesAsn1&&J.value.push(K.authenticatedAttributesAsn1),J.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.signatureAlgorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])),J.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,K.signature)),K.unauthenticatedAttributes.length>0){for(var ne=asn1.create(asn1.Class.CONTEXT_SPECIFIC,1,!0,[]),oe=0;oe<K.unauthenticatedAttributes.length;++oe){var ce=K.unauthenticatedAttributes[oe];ne.values.push(_attributeToAsn1(ce))}J.value.push(ne)}return J}function _signersToAsn1(K){for(var J=[],ne=0;ne<K.length;++ne)J.push(_signerToAsn1(K[ne]));return J}function _attributeToAsn1(K){var J;if(K.type===forge$2.pki.oids.contentType)J=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.value).getBytes());else if(K.type===forge$2.pki.oids.messageDigest)J=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,K.value.bytes());else if(K.type===forge$2.pki.oids.signingTime){var ne=new Date("1950-01-01T00:00:00Z"),oe=new Date("2050-01-01T00:00:00Z"),ce=K.value;if(typeof ce=="string"){var ue=Date.parse(ce);isNaN(ue)?ce.length===13?ce=asn1.utcTimeToDate(ce):ce=asn1.generalizedTimeToDate(ce):ce=new Date(ue)}ce>=ne&&ce<oe?J=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.UTCTIME,!1,asn1.dateToUtcTime(ce)):J=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.GENERALIZEDTIME,!1,asn1.dateToGeneralizedTime(ce))}return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.type).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,[J])])}function _encryptedContentToAsn1(K){return[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(forge$2.pki.oids.data).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(K.algorithm).getBytes()),K.parameter?asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,K.parameter.getBytes()):void 0]),asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,K.content.getBytes())])]}function _fromAsn1(K,J,ne){var oe={},ce=[];if(!asn1.validate(J,ne,oe,ce)){var ue=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw ue.errors=ue,ue}var Ae=asn1.derToOid(oe.contentType);if(Ae!==forge$2.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(oe.encryptedContent){var pe="";if(forge$2.util.isArray(oe.encryptedContent))for(var xe=0;xe<oe.encryptedContent.length;++xe){if(oe.encryptedContent[xe].type!==asn1.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");pe+=oe.encryptedContent[xe].value}else pe=oe.encryptedContent;K.encryptedContent={algorithm:asn1.derToOid(oe.encAlgorithm),parameter:forge$2.util.createBuffer(oe.encParameter.value),content:forge$2.util.createBuffer(pe)}}if(oe.content){var pe="";if(forge$2.util.isArray(oe.content))for(var xe=0;xe<oe.content.length;++xe){if(oe.content[xe].type!==asn1.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");pe+=oe.content[xe].value}else pe=oe.content;K.content=forge$2.util.createBuffer(pe)}return K.version=oe.version.charCodeAt(0),K.rawCapture=oe,oe}function _decryptContent(K){if(K.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(K.content===void 0){var J;switch(K.encryptedContent.algorithm){case forge$2.pki.oids["aes128-CBC"]:case forge$2.pki.oids["aes192-CBC"]:case forge$2.pki.oids["aes256-CBC"]:J=forge$2.aes.createDecryptionCipher(K.encryptedContent.key);break;case forge$2.pki.oids.desCBC:case forge$2.pki.oids["des-EDE3-CBC"]:J=forge$2.des.createDecryptionCipher(K.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+K.encryptedContent.algorithm)}if(J.start(K.encryptedContent.parameter),J.update(K.encryptedContent.content),!J.finish())throw new Error("Symmetric decryption failed.");K.content=J.output}}var forge$1=forge$D,ssh=forge$1.ssh=forge$1.ssh||{};ssh.privateKeyToPutty=function(K,J,ne){ne=ne||"",J=J||"";var oe="ssh-rsa",ce=J===""?"none":"aes256-cbc",ue="PuTTY-User-Key-File-2: "+oe+`\r
`;ue+="Encryption: "+ce+`\r
`,ue+="Comment: "+ne+`\r
`;var Ae=forge$1.util.createBuffer();_addStringToBuffer(Ae,oe),_addBigIntegerToBuffer(Ae,K.e),_addBigIntegerToBuffer(Ae,K.n);var pe=forge$1.util.encode64(Ae.bytes(),64),xe=Math.floor(pe.length/66)+1;ue+="Public-Lines: "+xe+`\r
`,ue+=pe;var me=forge$1.util.createBuffer();_addBigIntegerToBuffer(me,K.d),_addBigIntegerToBuffer(me,K.p),_addBigIntegerToBuffer(me,K.q),_addBigIntegerToBuffer(me,K.qInv);var ge;if(!J)ge=forge$1.util.encode64(me.bytes(),64);else{var ye=me.length()+16-1;ye-=ye%16;var Se=_sha1(me.bytes());Se.truncate(Se.length()-ye+me.length()),me.putBuffer(Se);var Te=forge$1.util.createBuffer();Te.putBuffer(_sha1("\0\0\0\0",J)),Te.putBuffer(_sha1("\0\0\0",J));var Ne=forge$1.aes.createEncryptionCipher(Te.truncate(8),"CBC");Ne.start(forge$1.util.createBuffer().fillWithByte(0,16)),Ne.update(me.copy()),Ne.finish();var $e=Ne.output;$e.truncate(16),ge=forge$1.util.encode64($e.bytes(),64)}xe=Math.floor(ge.length/66)+1,ue+=`\r
Private-Lines: `+xe+`\r
`,ue+=ge;var ke=_sha1("putty-private-key-file-mac-key",J),je=forge$1.util.createBuffer();_addStringToBuffer(je,oe),_addStringToBuffer(je,ce),_addStringToBuffer(je,ne),je.putInt32(Ae.length()),je.putBuffer(Ae),je.putInt32(me.length()),je.putBuffer(me);var Ke=forge$1.hmac.create();return Ke.start("sha1",ke),Ke.update(je.bytes()),ue+=`\r
Private-MAC: `+Ke.digest().toHex()+`\r
`,ue};ssh.publicKeyToOpenSSH=function(K,J){var ne="ssh-rsa";J=J||"";var oe=forge$1.util.createBuffer();return _addStringToBuffer(oe,ne),_addBigIntegerToBuffer(oe,K.e),_addBigIntegerToBuffer(oe,K.n),ne+" "+forge$1.util.encode64(oe.bytes())+" "+J};ssh.privateKeyToOpenSSH=function(K,J){return J?forge$1.pki.encryptRsaPrivateKey(K,J,{legacy:!0,algorithm:"aes128"}):forge$1.pki.privateKeyToPem(K)};ssh.getPublicKeyFingerprint=function(K,J){J=J||{};var ne=J.md||forge$1.md.md5.create(),oe="ssh-rsa",ce=forge$1.util.createBuffer();_addStringToBuffer(ce,oe),_addBigIntegerToBuffer(ce,K.e),_addBigIntegerToBuffer(ce,K.n),ne.start(),ne.update(ce.getBytes());var ue=ne.digest();if(J.encoding==="hex"){var Ae=ue.toHex();return J.delimiter?Ae.match(/.{2}/g).join(J.delimiter):Ae}else{if(J.encoding==="binary")return ue.getBytes();if(J.encoding)throw new Error('Unknown encoding "'+J.encoding+'".')}return ue};function _addBigIntegerToBuffer(K,J){var ne=J.toString(16);ne[0]>="8"&&(ne="00"+ne);var oe=forge$1.util.hexToBytes(ne);K.putInt32(oe.length),K.putBytes(oe)}function _addStringToBuffer(K,J){K.putInt32(J.length),K.putString(J)}function _sha1(){for(var K=forge$1.md.sha1.create(),J=arguments.length,ne=0;ne<J;++ne)K.update(arguments[ne]);return K.digest()}var lib=forge$D;const forge=getDefaultExportFromCjs(lib),getThemeOptionsHelper=K=>Object.keys(THEME_KEYS).map(J=>({key:J,label:K(`header.theme.${J}`),value:THEME_KEYS[J]})),getIsExpired=K=>Date.now()-K>THIRTY_DAYS_MS,generateEncryptedKey=(K,J)=>{if(J){const ne=forge.pem.decode(J)[0],oe=forge.asn1.fromDer(ne.body),ce=forge.pki.publicKeyFromAsn1(oe),ue=forge.util.encodeUtf8(K),Ae=ce.encrypt(ue,"RSA-OAEP",{md:forge.md.sha256.create()});return forge.util.encode64(Ae)}return window.btoa(K)},Versions=()=>{const{t:K}=useTranslation(),J=useSelector$1(selectVersions);return J?jsxRuntimeExports.jsxs("div",{className:"user-info-versions",children:[jsxRuntimeExports.jsxs("div",{className:"user-info-versions__title",children:[jsxRuntimeExports.jsx(W5,{}),jsxRuntimeExports.jsxs("div",{className:"user-info-versions__label",children:[K("header.userInfo.versions"),":"]}),jsxRuntimeExports.jsx(Copy,{textToCopy:JSON.stringify(J)})]}),jsxRuntimeExports.jsx("div",{className:"user-info-versions__list",children:Object.entries(J).map(([ne,oe])=>jsxRuntimeExports.jsxs("div",{children:[ne," ",oe?`- ${oe}`:""]},ne))})]}):null},LogoutButton=()=>{const{t:K}=useTranslation();return useSelector$1(selectProviders).length?jsxRuntimeExports.jsx(mf,{title:K("auth.logOut"),children:jsxRuntimeExports.jsx(rl,{testid:"logout-button",type:"primary",variant:"ghost",size:"sm",onClick:authService.logout,iconBefore:jsxRuntimeExports.jsx(HB,{})})}):null},listItem="_listItem_htzy1_1",label="_label_htzy1_9",content="_content_htzy1_22",children="_children_htzy1_32",action="_action_htzy1_38",styles$a={listItem,label,content,children,action},InfoListItem=({icon:K,label:J,action:ne,children:oe})=>jsxRuntimeExports.jsxs("div",{className:styles$a.listItem,children:[jsxRuntimeExports.jsxs("span",{className:styles$a.label,children:[K,jsxRuntimeExports.jsx("span",{children:J})]}),jsxRuntimeExports.jsxs("div",{className:styles$a.content,children:[jsxRuntimeExports.jsx(mf,{title:oe,children:jsxRuntimeExports.jsx("div",{className:styles$a.children,children:oe})}),ne&&jsxRuntimeExports.jsx("span",{className:styles$a.action,children:ne})]})]}),MyKeys=({setIsDeleteKeyModal:K})=>{const{t:J}=useTranslation(),ne=reactExports.useRef([]),oe=useSelector$1(selectUser),ce=oe==null?void 0:oe.userSecretsPublicKey,ue=useSelector$1(selectUserSecretIdentifiers),Ae=(oe==null?void 0:oe.username)??"",pe=ue||[],[xe,me]=reactExports.useState(!1),[ge,ye]=reactExports.useState(""),[Se,Te]=reactExports.useState(""),[Ne,$e]=reactExports.useState([]),[ke,je]=reactExports.useState(null),[Ke,Ye]=reactExports.useState(""),[ze,Xe]=reactExports.useState(pe),[Je,rt]=reactExports.useState(!0);reactExports.useEffect(()=>{const Ue=externalStorage.getSecretKeys(Ae).filter(_e=>!getIsExpired(_e.timestamp));$e(Ue),externalStorage.setSecretKeys(Ue,Ae)},[]);const Ze=Ue=>{var _e;ke!==null&&ne.current[ke]&&!((_e=ne.current[ke])!=null&&_e.contains(Ue.target))&&(je(null),Ye(""))};reactExports.useEffect(()=>(document.addEventListener("mousedown",Ze),()=>{document.removeEventListener("mousedown",Ze)}),[ke]),reactExports.useEffect(()=>{ge.length===0&&Xe(pe)},[ge]);const et=(Ue,_e)=>{ne.current[_e]=Ue},nt=()=>{me(!1),ye(""),Te("")},Ge=()=>{Je?(rt(!1),nt()):rt(!0)},ve=()=>{const Ue=[...Ne,{name:ge,value:generateEncryptedKey(Se,ce),timestamp:Date.now()}];$e(Ue),externalStorage.setSecretKeys(Ue,Ae),nt()},Be=Ue=>{const _e=Ne.filter((Qe,tt)=>tt!==Ue);$e(_e),externalStorage.setSecretKeys(_e,Ae)},Re=xe||Ne.length>0,Ie=Ue=>{ye(Ue);const _e=pe.filter(Qe=>Qe.toLowerCase().includes(Ue.toLowerCase()||""));Xe(_e)},Fe=Ue=>{const _e=externalStorage.getSecretKeys(Ae).map((Qe,tt)=>tt===Ue?{...Qe,value:generateEncryptedKey(Ke,ce),timestamp:Date.now()}:Qe);$e(_e),externalStorage.setSecretKeys(_e,Ae),je(null),Ye("")},qe=()=>{je(null),Ye("")},We=ze.map((Ue,_e)=>({key:_e,label:Ue,onClick:()=>ye(Ue),children:null}));return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"my-keys-header",children:[jsxRuntimeExports.jsxs("div",{className:"my-keys-header__title",children:[jsxRuntimeExports.jsx(JT$1,{}),jsxRuntimeExports.jsx("span",{className:"my-keys-header__tile-label",children:J("header.userInfo.secrets.title")})]}),jsxRuntimeExports.jsx(oa,{onClick:Ge,children:Je?jsxRuntimeExports.jsx(dk,{}):jsxRuntimeExports.jsx(Zj,{})})]}),Je&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("ul",{className:"my-keys-info",children:keysDescriptionArr.map(({id:Ue,content:_e})=>jsxRuntimeExports.jsx("li",{children:J(_e,{expire:env.userKeyExpire||DEFAULT_USER_KEYS_EXPIRE})||""},Ue))}),Re&&jsxRuntimeExports.jsxs("div",{className:"my-keys-list-title",children:[jsxRuntimeExports.jsx("span",{children:J("header.userInfo.secrets.name")||""}),jsxRuntimeExports.jsx("span",{children:J("header.userInfo.secrets.value")||""})]}),Ne.length>0&&jsxRuntimeExports.jsx("div",{className:"my-keys-list",children:Ne.map((Ue,_e)=>jsxRuntimeExports.jsxs("div",{ref:Qe=>et(Qe,_e),children:[jsxRuntimeExports.jsxs("div",{className:"my-keys-list__item",children:[jsxRuntimeExports.jsx(Ml,{readOnly:!0,variant:"outlined",className:"my-keys-list__item-readonly",value:Ue.name}),jsxRuntimeExports.jsx(Ml,{variant:"outlined",placeholder:J("header.userInfo.secrets.encrypted")||"",value:ke===_e?Ke:"",onFocus:()=>je(_e),onChange:Ye}),jsxRuntimeExports.jsx(oa,{className:"my-keys-list__item-trash-icon",onClick:()=>{K(!0),Ho.error({title:J("header.userInfo.secrets.deletingKey"),content:J("header.userInfo.secrets.deleteModalContent",{keyName:Ue.name}),onClose:()=>K(!1),onOk:Qe=>{Be(_e),K(!1),Qe()},onCancel:Qe=>{K(!1),Qe()},testId:"delete-user-key"})},children:jsxRuntimeExports.jsx(Tk,{})})]}),ke===_e&&jsxRuntimeExports.jsxs("div",{className:"my-keys-list__item-buttons",children:[jsxRuntimeExports.jsx(rl,{className:"my-keys-form__buttons-save",disabled:isEmptyString(Ke),iconBefore:jsxRuntimeExports.jsx(Ak,{}),onClick:()=>Fe(_e),children:J("buttons.save")}),jsxRuntimeExports.jsx(rl,{type:"tertiary",className:"my-keys-form__buttons-cancel",iconBefore:jsxRuntimeExports.jsx(_c,{}),onClick:qe,children:J("buttons.cancel")})]})]},_e))}),xe?jsxRuntimeExports.jsxs("div",{className:"my-keys-form",children:[jsxRuntimeExports.jsxs("div",{className:"my-keys-form__fields",children:[jsxRuntimeExports.jsx(X_,{placement:"top",className:cx("my-keys-dropdown",{"my-keys-dropdown__menu_hidden":ze.length===0}),menu:{items:We},children:jsxRuntimeExports.jsx(Ml,{variant:"outlined",autoComplete:"off",placeholder:J("header.userInfo.secrets.name")||"",value:ge,onChange:Ie})}),jsxRuntimeExports.jsx(Ml,{variant:"outlined",placeholder:J("header.userInfo.secrets.value")||"",value:Se,onChange:Te})]}),jsxRuntimeExports.jsxs("div",{className:"my-keys-form__buttons",children:[jsxRuntimeExports.jsx(rl,{className:"my-keys-form__buttons-save",disabled:isEmptyString(ge)||isEmptyString(Se),iconBefore:jsxRuntimeExports.jsx(Ak,{}),onClick:ve,children:J("buttons.save")}),jsxRuntimeExports.jsx(rl,{type:"tertiary",className:"my-keys-form__buttons-cancel",iconBefore:jsxRuntimeExports.jsx(_c,{}),onClick:nt,children:J("buttons.cancel")})]})]}):jsxRuntimeExports.jsx(rl,{className:"my-keys-add-button",onClick:()=>me(!0),children:J("header.userInfo.secrets.addKey")||""})]})]})},UserInfo=()=>{const K=useSelector$1(selectUser),J=useSelector$1(selectApplicationTheme),ne=useSelector$1(selectOpenedTabs),oe=useSelector$1(selectActiveTabIndex),ce=useSelector$1(selectIsReadonly),ue=useSelector$1(selectActiveDataset$1),Ae=useSelector$1(selectFullScreenMode),{t:pe}=useTranslation(),xe=useAppDispatch(),{headerData:{language:me}}=useAppSelector($e=>$e.HeaderDataSliceReducer),[ge,ye]=reactExports.useState(!1),[Se,Te]=reactExports.useState(!1),Ne=$e=>{storageApi.saveEntity({dataset:ue||"",data:[{ApplicationTheme:$e,OpenedTabs:generateTabsParams(ne),ActiveTabIndex:oe,User:(K==null?void 0:K.username)||null,ReadOnly:ce??!1,FullScreenMode:Ae,_t:"UiAppState"}]}).then(()=>{themeService.setTheme($e)}).catch(toast.error)};return jsxRuntimeExports.jsx(X_,{open:ge,onOpenChange:$e=>{ye(Se?!0:$e)},destroyPopupOnHide:!0,dropdownRender:()=>{var $e;return jsxRuntimeExports.jsxs("div",{"data-tid":"user-info",className:styles$c.menu,children:[jsxRuntimeExports.jsxs("div",{className:styles$c.header,children:[jsxRuntimeExports.jsxs("div",{className:styles$c.headerInfo,children:[jsxRuntimeExports.jsx(UserInitials,{clickable:!1,className:styles$c.userInitials}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:styles$c.fullName,children:K==null?void 0:K.fullName}),jsxRuntimeExports.jsx("div",{className:styles$c.email,children:K==null?void 0:K.email})]})]}),jsxRuntimeExports.jsx(LogoutButton,{})]}),jsxRuntimeExports.jsxs("div",{className:styles$c.content,children:[jsxRuntimeExports.jsxs("div",{className:styles$c.dropdownRow,children:[jsxRuntimeExports.jsx(YT,{}),jsxRuntimeExports.jsx(DropdownRow,{label:pe("header.userInfo.theme.label"),selectedOptionKey:J,options:getThemeOptionsHelper(pe),onChange:Ne,testid:"theme-dropdown"})]}),jsxRuntimeExports.jsxs("div",{className:styles$c.dropdownRow,children:[jsxRuntimeExports.jsx(GT,{}),jsxRuntimeExports.jsx(DropdownRow,{label:pe("header.userInfo.language.label"),selectedOptionKey:me,options:AVAIABLE_LANGUAGES,onChange:ke=>xe(setLanguage(ke)),testid:"language-dropdown"})]}),jsxRuntimeExports.jsxs("div",{className:styles$c.userContent,children:[jsxRuntimeExports.jsx(InfoListItem,{icon:jsxRuntimeExports.jsx(BA$1,{}),label:pe("header.userInfo.role"),children:($e=K==null?void 0:K.roles)==null?void 0:$e.reduce((ke,je)=>`${ke}${ke?",":""} ${je}`,"")}),jsxRuntimeExports.jsx(InfoListItem,{icon:jsxRuntimeExports.jsx(QT,{}),label:pe("header.userInfo.build"),action:jsxRuntimeExports.jsx(Copy,{testid:"copy-build-number",textToCopy:env.frontendVersion}),children:env.frontendVersion||""}),jsxRuntimeExports.jsx(Versions,{})]}),jsxRuntimeExports.jsx("div",{className:styles$c.myKeysContent,children:jsxRuntimeExports.jsx(MyKeys,{setIsDeleteKeyModal:Te})})]})]})},children:jsxRuntimeExports.jsx(rl,{type:"transparent",variant:"ghost",size:"sm",onClick:()=>ye(!ge),iconBefore:jsxRuntimeExports.jsx(UserInitials,{clickable:!0})})})},logsCount="_logsCount_g97fs_1",loader="_loader_g97fs_7",dot="_dot_g97fs_11",fade="_fade_g97fs_1",badgeIcon="_badgeIcon_g97fs_35",styles$9={logsCount,loader,dot,fade,badgeIcon},EXECUTED_HANDLER_STATUSES=[RunHandlerStatusCodeEnum.Completed,RunHandlerStatusCodeEnum.Failed],LogsButton=({openedTabsLength:K,isBasicType:J})=>{const{t:ne}=useTranslation(),{isOpen:oe,togglePanel:ce}=useLogsPanel(),{eventsBatch:ue}=useSSEContext(),[Ae,pe]=reactExports.useState(null),[xe,me]=reactExports.useState(!1),[ge,ye]=reactExports.useState([]),[Se,Te]=reactExports.useState(),Ne=reactExports.useMemo(()=>JSON.parse(JSON.stringify(ue)),[ue]);reactExports.useLayoutEffect(()=>{(K===0&&oe||!J)&&ce(!1)},[K,J]),reactExports.useEffect(()=>{oe&&pe(null)},[oe]),reactExports.useEffect(()=>{if(!oe&&Ne.length){const je=[],Ke=[],Ye=Ne.reverse().find(ze=>ze.EventKind===SSEEventKindEnum.TASK_FINISHED);Ne.forEach(({Status:ze,EventKind:Xe,TaskRunId:Je})=>{EXECUTED_HANDLER_STATUSES.includes(ze)&&pe(rt=>rt?rt+1:1),Xe===SSEEventKindEnum.TASK_STARTED&&je.push(Je),Xe===SSEEventKindEnum.TASK_FINISHED&&Ke.push(Je)}),!xe&&(Ae||je.length||Ke.length)&&me(!0),Ye&&Te(Ye),ye(ze=>[...ze,...je].filter(Xe=>!Ke.includes(Xe)))}},[Ne]);const $e=()=>{if(oe&&xe&&me(!1),ge.length)return jsxRuntimeExports.jsxs("div",{className:cx(styles$9.logsCount,styles$9.loader),children:[jsxRuntimeExports.jsx("div",{className:styles$9.dot}),jsxRuntimeExports.jsx("div",{className:styles$9.dot}),jsxRuntimeExports.jsx("div",{className:styles$9.dot})]});if(Ae)return Ae},ke=je=>{if(ge.length!==0)return"info";if(je){const{Status:Ke}=je;if(Ke===RunHandlerStatusCodeEnum.Completed)return"success";if(Ke===RunHandlerStatusCodeEnum.Failed)return"error"}};return jsxRuntimeExports.jsx(mf,{title:ne("typeToolbar.openLogs"),children:jsxRuntimeExports.jsx(rl,{"data-tid":"logs-button",type:"transparent",variant:"ghost",size:"sm",onClick:()=>ce(!oe),disabled:K===0&&!oe||!J,iconBefore:xe?jsxRuntimeExports.jsx(vF,{size:"md",isBorder:!1,color:ke(Se),count:$e(),className:styles$9.badgeIcon,children:jsxRuntimeExports.jsx(Fk,{size:"M"})}):jsxRuntimeExports.jsx(Fk,{size:"M"})})})};var LayoutIconsSize=(K=>(K.ICON_WIDTH="86",K.ICON_HEIGHT="54",K))(LayoutIconsSize||{}),FillColorTheme=(K=>(K.Light="White",K.Dark="Black",K))(FillColorTheme||{});const FullScreenMaximizeEditorViewButton=({isDisabled:K=!1})=>{const{t:J}=useTranslation(),{state:ne,action:oe}=useDndContext(),{maximizedTabId:ce}=ne,ue=useSelector$1(selectApplicationTheme),Ae=ce===EditorTabsEnum.EDITOR,pe=Ae?jsxRuntimeExports.jsx(eF,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT,fillColor:ue===THEME_KEYS.light?FillColorTheme.Light:FillColorTheme.Dark}):jsxRuntimeExports.jsx(JA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT});return jsxRuntimeExports.jsx(mf,{title:J("maximizeButton.editorFullScreen"),children:jsxRuntimeExports.jsxs("div",{className:"layout-control",children:[jsxRuntimeExports.jsx(rl,{type:Ae?"primary":"tertiary",testid:"full-screen-maximize-editor-view-button",className:cx("layout-control__button",Ae&&"active"),size:"sm",variant:"ghost",onClick:oe.handleMaximizeEditorRow,iconBefore:pe,disabled:ne.isLayoutBtnsDisabled||K}),jsxRuntimeExports.jsx("div",{className:cx("layout-control__text",Ae&&"active"),children:J("layoutDirectionButton.dataOnly")})]})})},FullScreenMaximizeGridViewButton=({isDisabled:K=!1})=>{const{t:J}=useTranslation(),{state:ne,action:oe}=useDndContext(),{maximizedTabId:ce}=ne,ue=useSelector$1(selectApplicationTheme),Ae=ce===GridTabEnum.MAIN,pe=Ae?jsxRuntimeExports.jsx(QA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT,fillColor:ue===THEME_KEYS.light?FillColorTheme.Light:FillColorTheme.Dark}):jsxRuntimeExports.jsx(YA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT});return jsxRuntimeExports.jsx(mf,{title:J("maximizeButton.gridFullScreen"),children:jsxRuntimeExports.jsxs("div",{className:"layout-control",children:[jsxRuntimeExports.jsx(rl,{type:Ae?"primary":"tertiary",testid:"full-screen-maximize-grid-view-button",className:cx("layout-control__button",Ae&&"active"),size:"sm",variant:"ghost",onClick:oe.handleMaximizeGridRow,iconBefore:pe,disabled:ne.isLayoutBtnsDisabled||K}),jsxRuntimeExports.jsx("div",{className:cx("layout-control__text",Ae&&"active"),children:J("layoutDirectionButton.gridOnly")})]})})},FullScreenSplitHorizontallyButton=({isDisabled:K=!1})=>{const{t:J}=useTranslation(),ne=useAppContext(),oe=useDndContext(),{state:ce,action:ue}=oe,{maximizedTabId:Ae,isHorizontalLayoutDirection:pe}=ce,xe=useSelector$1(selectApplicationTheme),me=ce.isHorizontalLayoutDirection&&!Ae,ge=()=>{pe&&Ae===""||(pe||ue.updateLayoutDirection(LayoutDirection.HORIZONTAL),updateCurrentLayout(ne,oe,LayoutDirection.HORIZONTAL,pe))},ye=me?jsxRuntimeExports.jsx(XA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT,fillColor:xe===THEME_KEYS.light?FillColorTheme.Light:FillColorTheme.Dark}):jsxRuntimeExports.jsx(UA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT});return jsxRuntimeExports.jsx(mf,{title:J("layoutDirectionButton.horizontalLayout"),children:jsxRuntimeExports.jsxs("div",{className:"layout-control",children:[jsxRuntimeExports.jsx(rl,{type:me?"primary":"tertiary",testid:"full-screen-split-horizontally-button",className:cx("layout-control__button",me&&"active"),variant:"ghost",disabled:ce.isLayoutBtnsDisabled||K,onClick:ge,iconBefore:ye}),jsxRuntimeExports.jsx("div",{className:cx("layout-control__text",me&&"active"),children:J("layoutDirectionButton.horizontalSplit")})]})})},FullScreenSplitVerticallyButton=({isDisabled:K=!1})=>{const{t:J}=useTranslation(),ne=useAppContext(),oe=useDndContext(),{state:ce,action:ue}=oe,{maximizedTabId:Ae,isHorizontalLayoutDirection:pe}=ce,xe=useSelector$1(selectApplicationTheme),me=!ce.isHorizontalLayoutDirection&&!Ae,ge=()=>{!pe&&Ae===""||(pe&&ue.updateLayoutDirection(LayoutDirection.VERTICAL),updateCurrentLayout(ne,oe,LayoutDirection.VERTICAL,!pe))},ye=me?jsxRuntimeExports.jsx(GA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT,fillColor:xe===THEME_KEYS.light?FillColorTheme.Light:FillColorTheme.Dark}):jsxRuntimeExports.jsx(qA,{width:LayoutIconsSize.ICON_WIDTH,height:LayoutIconsSize.ICON_HEIGHT});return jsxRuntimeExports.jsx(mf,{title:J("layoutDirectionButton.verticalLayout"),children:jsxRuntimeExports.jsxs("div",{className:"layout-control",children:[jsxRuntimeExports.jsx(rl,{type:me?"primary":"tertiary",testid:"full-screen-split-vertically-button",className:cx("layout-control__button",me&&"active"),variant:"ghost",disabled:ce.isLayoutBtnsDisabled||K,onClick:ge,iconBefore:ye}),jsxRuntimeExports.jsx("div",{className:cx("layout-control__text",me&&"active"),children:J("layoutDirectionButton.verticalSplit")})]})})},LayoutDropdownButton=({isDisabled:K})=>{const{t:J}=useTranslation(),[ne,oe]=reactExports.useState(!1),ce=Ae=>Ae?jsxRuntimeExports.jsx(hk,{}):jsxRuntimeExports.jsx(Rp,{}),ue=()=>jsxRuntimeExports.jsxs("div",{className:"layout-dropdown",children:[jsxRuntimeExports.jsx(FullScreenSplitHorizontallyButton,{isDisabled:K}),jsxRuntimeExports.jsx(FullScreenSplitVerticallyButton,{isDisabled:K}),jsxRuntimeExports.jsx(FullScreenMaximizeGridViewButton,{isDisabled:K}),jsxRuntimeExports.jsx(FullScreenMaximizeEditorViewButton,{isDisabled:K})]});return jsxRuntimeExports.jsx(X_,{testid:"layout-dropdown-container",open:ne,onOpenChange:oe,placement:"bottom",dropdownRender:()=>ue(),children:jsxRuntimeExports.jsx(rl,{testid:"layout-dropdown-button",type:"transparent",variant:"ghost",size:"sm",iconAfter:ce(ne),onClick:()=>oe(!ne),children:J("layoutDirectionButton.view")})})},container$4="_container_blluq_1",largeContainer="_largeContainer_blluq_11",iconsBlock$2="_iconsBlock_blluq_15",divider$1="_divider_blluq_21",styles$8={container:container$4,largeContainer,iconsBlock:iconsBlock$2,divider:divider$1},FullScreenModeActions=({metaData:K,isDisabled:J=!1,isVersionWarning:ne})=>{const oe=useSelector$1(selectDataset),ce=useSelector$1(selectOpenedTabs),{state:ue}=useDndContext(),Ae=useSelector$1(selectIsReadonly);return reactExports.useMemo(()=>isLoading([K.status,oe.status]),[oe.status,K.status])?null:jsxRuntimeExports.jsxs("div",{className:cx(styles$8.container,{[styles$8.largeContainer]:ne}),children:[jsxRuntimeExports.jsx(RecordNavigationSelect,{}),jsxRuntimeExports.jsx("div",{className:styles$8.divider}),jsxRuntimeExports.jsxs("div",{className:styles$8.iconsBlock,children:[jsxRuntimeExports.jsx(LayoutDropdownButton,{isDisabled:J}),!Ae&&!ue.isTypeReadOnly&&jsxRuntimeExports.jsx(FullScreenModeButton,{isDisabled:J}),jsxRuntimeExports.jsx(FullScreenLayoutSettingsButton,{isDisabled:J})]}),jsxRuntimeExports.jsx("div",{className:styles$8.divider}),jsxRuntimeExports.jsxs("div",{className:styles$8.iconsBlock,children:[jsxRuntimeExports.jsx(SendFeedbackButton,{}),jsxRuntimeExports.jsx(LogsButton,{openedTabsLength:ce.length,isBasicType:K.data.DisplayKind===SchemaDisplayKind.Basic}),jsxRuntimeExports.jsx(UserInfo,{})]})]})},headerContainer="_headerContainer_1hi7i_1",header="_header_1hi7i_1",searchContainer="_searchContainer_1hi7i_11",dropdowns="_dropdowns_1hi7i_19",headerSearch="_headerSearch_1hi7i_25",logoContainer$1="_logoContainer_1hi7i_31",headerActionBtns="_headerActionBtns_1hi7i_38",iconsBlock$1="_iconsBlock_1hi7i_45",divider="_divider_1hi7i_51",styles$7={headerContainer,header,searchContainer,dropdowns,headerSearch,logoContainer:logoContainer$1,headerActionBtns,iconsBlock:iconsBlock$1,divider},Header=({isVersionWarning:K})=>{const J=useSelector$1(selectOpenedTabs),ne=useSelector$1(selectMetaData),oe=useSelector$1(selectFullScreenMode),ce=useSelector$1(selectEnvLabel),ue=useSelector$1(selectIsDatasetSupport),{state:Ae}=useDndContext(),pe=useSelector$1(selectIsReadonly),xe=J.length===0||ne.data.DisplayKind!==SchemaDisplayKind.Basic;return oe?jsxRuntimeExports.jsx(FullScreenModeActions,{isDisabled:xe,metaData:ne,isVersionWarning:K}):jsxRuntimeExports.jsx("div",{"data-tid":"app-header",className:styles$7.headerContainer,children:jsxRuntimeExports.jsxs("div",{className:styles$7.header,children:[jsxRuntimeExports.jsxs("div",{"data-tid":"main-logo",className:styles$7.logoContainer,children:[jsxRuntimeExports.jsx(Logo,{}),jsxRuntimeExports.jsx(OF,{label:ce})]}),jsxRuntimeExports.jsxs("div",{className:styles$7.searchContainer,children:[jsxRuntimeExports.jsx(HeaderSearch,{}),jsxRuntimeExports.jsxs("div",{className:styles$7.dropdowns,children:[ue&&jsxRuntimeExports.jsx(DatasetButton,{}),!env.isSimplifiedBuild&&jsxRuntimeExports.jsx(EnvironmentButton,{})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$7.headerActionBtns,children:[jsxRuntimeExports.jsxs("div",{className:styles$7.iconsBlock,children:[jsxRuntimeExports.jsx(LayoutDropdownButton,{isDisabled:xe}),!pe&&!Ae.isTypeReadOnly&&jsxRuntimeExports.jsx(FullScreenModeButton,{isDisabled:xe}),jsxRuntimeExports.jsx(FullScreenLayoutSettingsButton,{isDisabled:xe})]}),jsxRuntimeExports.jsx("div",{className:styles$7.divider}),jsxRuntimeExports.jsxs("div",{className:styles$7.iconsBlock,children:[!env.isSimplifiedBuild&&jsxRuntimeExports.jsx(SendFeedbackButton,{}),jsxRuntimeExports.jsx(LogsButton,{openedTabsLength:J.length,isBasicType:ne.data.DisplayKind===SchemaDisplayKind.Basic}),jsxRuntimeExports.jsx(UserInfo,{})]})]})]})})},GenericTypesTable=({isLoading:K=!1,genericTypes:J,selectedGenericType:ne,onSelectGenericType:oe})=>{const ce=reactExports.useMemo(()=>J==null?void 0:J.map(({Label:pe,Name:xe})=>({Types:pe||"Unknown",_t:xe})),[J]),ue=reactExports.useMemo(()=>mapMetadataToGridColumnsHelper([{Name:"Types",Value:{Type:"String"}}]),[]),Ae=pe=>pe._t;return jsxRuntimeExports.jsx(PF,{loading:K,children:jsxRuntimeExports.jsx(Grid,{className:"genericTypesTable",status:K?LoadingStatusesEnum.LOADING:LoadingStatusesEnum.SUCCESS,variant:"secondary",columns:ue,data:ce??[],selectedRowId:ne,onChangeSelectedRowId:oe,getRowId:Ae,isColumnFilter:!1})})},grid="_grid_1vhq3_1",empty="_empty_1vhq3_5",styles$6={grid,empty},GenericRecordsTable=({data:K,columns:J,selectedGenericRecordKey:ne,isLoading:oe,onSelectedGenericRecordKey:ce,onRowDoublerClick:ue})=>{const{t:Ae}=useTranslation(),pe=xe=>xe._key;return!oe&&!(K!=null&&K.length)&&!J.length?jsxRuntimeExports.jsx("div",{className:styles$6.empty,children:Ae("editor.modals.genericTypeEmpty")}):jsxRuntimeExports.jsx(PF,{loading:oe,children:jsxRuntimeExports.jsx(Grid,{className:styles$6.grid,status:oe?LoadingStatusesEnum.LOADING:LoadingStatusesEnum.SUCCESS,variant:"secondary",data:K??[],columns:J,isColumnFilter:!1,selectedRowId:ne,onChangeSelectedRowId:ce,getRowId:pe,onRowDoubleClicked:ue})})},container$3="_container_p9mb5_1",iconsBlock="_iconsBlock_p9mb5_12",warningQuery="_warningQuery_p9mb5_31",styles$5={container:container$3,iconsBlock,warningQuery},GenericToolbar=({entities:K,paginationRange:J,paginationPage:ne,isAvailableNextPage:oe,isAvailablePreviousPage:ce,isQueryApplied:ue,showQueryBuilder:Ae,onNextPage:pe,onPreviousPage:xe,onFirstPage:me,isGridPageDataLoading:ge})=>{const{t:ye}=useTranslation(),Se=reactExports.useMemo(()=>[{groupId:v4(),icons:[{icon:jsxRuntimeExports.jsx(gD,{className:ue?styles$5.warningQuery:void 0}),tooltipPlaceholder:ye("gridToolbar.query")||"",tooltipTarget:"queryBuilder",actionHandler:Ae,isDisabled:ue?!1:K.length===0}]}],[K]);return jsxRuntimeExports.jsxs("div",{className:styles$5.container,children:[jsxRuntimeExports.jsx(GridPagination,{isGridPageDataLoading:ge,isAvailableNextPage:oe,isAvailablePreviousPage:ce,range:J,page:ne,onNext:pe,onPrev:xe,onFirst:me}),Se.map(({groupName:Te,groupId:Ne,icons:$e})=>jsxRuntimeExports.jsxs("div",{className:styles$5.iconsBlock,children:[jsxRuntimeExports.jsx("span",{children:ye(Te||"")}),$e==null?void 0:$e.map(({tooltipTarget:ke,icon:je,isDisabled:Ke,tooltipPlaceholder:Ye,actionHandler:ze,isHide:Xe})=>!Xe&&jsxRuntimeExports.jsx(mf,{title:Ye,children:jsxRuntimeExports.jsx(rl,{type:"secondary",variant:"ghost",disabled:Ke,onClick:()=>!Ke&&(ze==null?void 0:ze()),iconBefore:je})},ke))]},Ne))]})},errror="_errror_sabj6_1",panel="_panel_sabj6_9",genericToolbarContainer="_genericToolbarContainer_sabj6_14",genericToolbar="_genericToolbar_sabj6_14",genericRecords="_genericRecords_sabj6_25",styles$4={errror,panel,genericToolbarContainer,genericToolbar,genericRecords},GenericModal=({isOpen:K,initialGenericType:J,initialGenericRecordKey:ne,onSubmit:oe,onClose:ce})=>{const{t:ue}=useTranslation(),Ae=useSelector$1(selectActiveDataset$1),pe=usePagination({}),xe=useQueryBuilder(),{fetch:me,state:ge,isLoading:ye,hasError:Se,status:Te}=useRequest(storageApi.select,{onError:toast.error}),{isLoading:Ne,fetch:$e,hasError:ke,state:je}=useRequest(schemaApi.getTypes,{onError:toast.error}),[Ke,Ye]=reactExports.useState(J),[ze,Xe]=reactExports.useState(ne),[Je,rt]=reactExports.useState([]),Ze=ge==null?void 0:ge.schema.typeList[ge.schema.rootType],et=!Ke||!ze,nt=reactExports.useMemo(()=>Ze!=null&&Ze.Elements&&isArray$6(Ze==null?void 0:Ze.Elements)?mapMetadataToGridColumnsHelper(Ze.Elements):[],[Ze]),Ge=We=>{xe.apply(We),pe.onResetPage()},ve=()=>{pe.onResetPage(),xe.reset()},Be=()=>Xe(void 0),Re=async()=>{if(!Ke)throw new Error("Cannot fetch data with empty type");const We=pe.getLimit(),Ue=pe.getSkipByCurrentPage();try{const _e=await me({params:{type:Ke,skip:Ue,limit:We,table_format:!0,dataset:Ae},dto:xe.mapQueryToDTO()});pe.updateRange(pe.sliceEntitiesByLimit(_e.data).length),pe.reset(),pe.updatePagination(_e.data);const Qe=pe.sliceEntitiesByLimit(_e.data);_e.data.some(it=>it._key===ze)||Be(),rt(Qe)}finally{pe.reset()}};reactExports.useEffect(()=>{Ke&&Re()},[Ke,xe.query,pe.page]),reactExports.useEffect(()=>{$e()},[]);const Ie=We=>{et||(oe({type:Ke,recordKey:(We==null?void 0:We.id)||ze}),ce())},Fe=ke||Se,qe=()=>Fe?jsxRuntimeExports.jsx("div",{className:styles$4.errror,children:"Something went wrong"}):jsxRuntimeExports.jsxs(Lj,{direction:"horizontal",children:[jsxRuntimeExports.jsx(Ij,{defaultSize:xe.isShow?25:40,order:1,children:jsxRuntimeExports.jsx("div",{className:styles$4.panel,children:jsxRuntimeExports.jsx(GenericTypesTable,{isLoading:Ne,genericTypes:je,selectedGenericType:Ke,onSelectGenericType:Ye})})}),jsxRuntimeExports.jsx($F,{}),xe.isShow&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Ij,{minSize:30,defaultSize:35,maxSize:70,order:2,children:jsxRuntimeExports.jsx("div",{className:styles$4.panel,children:jsxRuntimeExports.jsx(QueryBuilder,{initialQuery:xe.query,elements:xe.generateElementsBySchema(Ze,ge==null?void 0:ge.schema.typeList),onCancel:xe.close,onApply:Ge,onReset:ve})})}),jsxRuntimeExports.jsx($F,{})]}),jsxRuntimeExports.jsx(Ij,{defaultSize:xe.isShow?40:60,order:3,children:jsxRuntimeExports.jsxs("div",{className:styles$4.genericToolbarContainer,children:[jsxRuntimeExports.jsx("div",{className:styles$4.genericToolbar,children:jsxRuntimeExports.jsx(GenericToolbar,{isGridPageDataLoading:pe.isPageDataLoading,entities:Je,paginationRange:pe.generateRangeByEntities(Je),paginationPage:pe.page,isAvailablePreviousPage:pe.isAvailablePreviousPage,isAvailableNextPage:pe.isAvailableNextPage,isQueryApplied:xe.isApplied,showQueryBuilder:xe.show,onPreviousPage:pe.onPreviousPage,onNextPage:pe.onNextPage,onFirstPage:pe.onFirstPage})}),jsxRuntimeExports.jsx("div",{className:styles$4.genericRecords,children:jsxRuntimeExports.jsx(GenericRecordsTable,{data:Je,columns:nt,isLoading:Te===LoadingStatusesEnum.INITIAL||ye||Ne,selectedGenericRecordKey:ze,onSelectedGenericRecordKey:Xe,onRowDoublerClick:Ie})})]})})]});return jsxRuntimeExports.jsxs(Ho,{open:K,size:"lg",defaultHeight:400,title:ue("editor.modalHeader"),onClose:ce,children:[jsxRuntimeExports.jsx(Ho.Body,{children:qe()}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"generic",okText:ue("buttons.apply"),cancelText:ue("buttons.cancel"),onCancel:ce,onOk:Ie,okProps:{disabled:et}})]})},Disclaimer=reactExports.memo(()=>jsxRuntimeExports.jsx(Translation,{children:K=>jsxRuntimeExports.jsxs("div",{className:"disclaimer-modal-content",children:[jsxRuntimeExports.jsx("p",{className:"disclaimer-modal-content__paragraph",children:K("chat.disclaimer.paragraph")}),jsxRuntimeExports.jsxs("ul",{className:"disclaimer-modal-content__list",children:[jsxRuntimeExports.jsx("li",{children:K("chat.disclaimer.list.0")}),jsxRuntimeExports.jsx("li",{children:K("chat.disclaimer.list.1")}),jsxRuntimeExports.jsx("li",{children:K("chat.disclaimer.list.2")}),jsxRuntimeExports.jsx("li",{children:K("chat.disclaimer.list.3")}),jsxRuntimeExports.jsx("li",{children:K("chat.disclaimer.list.4")})]})]})}));Disclaimer.displayName="Disclaimer";const DisclaimerModal=reactExports.memo(({isOpen:K,isOnce:J,toggleOnce:ne,agree:oe})=>{const{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(J),pe=reactExports.useCallback(()=>Ae(me=>!me),[]),xe=reactExports.useCallback(()=>{oe(),J!==ue&&ne()},[oe,J,ue,ne]);return jsxRuntimeExports.jsxs(Ho,{open:K,defaultHeight:350,title:ce("chat.disclaimer.title"),isClosable:!1,children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(Disclaimer,{})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"disclaimer",cancelText:null,onOk:xe,renderFooterActions:({okBtn:me})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(pF,{className:"disclaimer-modal__checkbox",value:ue,onChange:pe,children:ce("userGuideModal.doNotShowAgain")}),me]})})]})});DisclaimerModal.displayName="DisclaimerModal";var FileStatusType=(K=>(K.NONE="none",K.ADDED="added",K.UPDATED="updated",K.REMOVED="removed",K))(FileStatusType||{});const FileStatusMap={Added:"added",Removed:"removed",Updated:"updated"};var MessageGroupStatus=(K=>(K[K.INITIAL=0]="INITIAL",K[K.LOADING=1]="LOADING",K[K.ERROR=2]="ERROR",K[K.SUCCESS=3]="SUCCESS",K[K.CANCELED=4]="CANCELED",K))(MessageGroupStatus||{}),ChatType=(K=>(K.PRIVATE="private",K.INTERNAL="internal",K.ENCRYPTED="encrypted",K))(ChatType||{});const FileItem=({name:K,isLoading:J=!1,isRemovable:ne=!0,onRemove:oe})=>{const ce=reactExports.useMemo(()=>!J&&ne,[J,ne]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"history-file-item",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(WD,{})}),jsxRuntimeExports.jsx(mf,{title:K,children:jsxRuntimeExports.jsx("div",{className:"history-file-item__file-name",children:K})}),ce&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(RT,{className:"history-file-item__icon",onClick:oe})})]})})},FileList=reactExports.memo(({files:K,isLoading:J,onRemove:ne})=>jsxRuntimeExports.jsx("div",{className:"history-file-list",children:K.filter(oe=>oe.status!==FileStatusType.REMOVED).map(oe=>jsxRuntimeExports.jsx(FileItem,{name:oe.filename,isLoading:J,isRemovable:!0,onRemove:()=>ne(oe.filename)},oe.filename))}));FileList.displayName="FileList";const Message=({text:K})=>jsxRuntimeExports.jsxs("div",{className:"message",children:[jsxRuntimeExports.jsx(IA,{className:"message__icon"}),jsxRuntimeExports.jsx("div",{className:"message__text",children:K.trim()})]}),Reply=({text:K,isLoading:J,isShowIcon:ne=!1})=>{if(!J&&K===void 0)return null;const oe=J&&K===void 0;return jsxRuntimeExports.jsxs("div",{className:"reply",children:[jsxRuntimeExports.jsxs("div",{className:"reply__container",children:[jsxRuntimeExports.jsx("div",{className:"reply__text",children:oe?jsxRuntimeExports.jsx(MF,{className:"reply__dot-loader"}):K}),jsxRuntimeExports.jsx(HA,{className:"reply__icon"})]}),!oe&&jsxRuntimeExports.jsx("div",{className:"reply__copy",children:jsxRuntimeExports.jsx(Copy,{textToCopy:K||""})})]})},EmptyChat=()=>{const{t:K}=useTranslation();return uF(),jsxRuntimeExports.jsxs("div",{className:"empty-chat",children:[jsxRuntimeExports.jsx(jT,{size:"L"}),jsxRuntimeExports.jsx("div",{className:"empty-chat__message",children:K("chat.askSomething")})]})},container$2="_container_p1iha_1",messages="_messages_p1iha_11",styles$3={container:container$2,messages},Chat=reactExports.memo(({isShowMaskIcon:K,messageGroups:J})=>{const ne=reactExports.useRef(null);return reactExports.useEffect(()=>{var oe;(oe=ne.current)==null||oe.scrollIntoView({behavior:"smooth"})},[J]),jsxRuntimeExports.jsx("div",{className:styles$3.container,children:jsxRuntimeExports.jsxs("div",{className:styles$3.messages,children:[J.length===0?jsxRuntimeExports.jsx(EmptyChat,{}):J.map(oe=>{var ce;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[oe.question&&jsxRuntimeExports.jsx(Message,{text:oe.question.text,files:oe.question.files}),jsxRuntimeExports.jsx(Reply,{isShowIcon:K,text:(ce=oe.answer)==null?void 0:ce.text,isLoading:oe.status===MessageGroupStatus.LOADING})]},oe.id)}),jsxRuntimeExports.jsx("div",{ref:ne})]})})});Chat.displayName="Chat";const ChatInputButton=({isSending:K,cancelSendMessage:J,isDisabledSending:ne,isLoading:oe,onSendMessage:ce})=>K?jsxRuntimeExports.jsx(rl,{onClick:J,iconAfter:jsxRuntimeExports.jsx(wA,{})}):oe?jsxRuntimeExports.jsx(MF,{className:"chat-input-button"}):jsxRuntimeExports.jsx(rl,{disabled:ne,onClick:()=>ce(),iconAfter:jsxRuntimeExports.jsx(VT,{})}),ChatInput=reactExports.memo(reactExports.forwardRef(({isSending:K,isLoading:J,isProfileChosen:ne,input:oe,onChangeInput:ce,onSendMessage:ue,cancelSendMessage:Ae,openFileExplorer:pe,openKeyDialog:xe,getUnsavedFiles:me},ge)=>{const{t:ye}=useTranslation(),Se=me(),Te=!ne||J!==K,Ne=!ne||oe.length===0&&Se.length===0,$e=!ne||J,ke=reactExports.useMemo(()=>ye(ne?K?"chat.cancelRequest":J?"chat.loading":"chat.sendMessage":"chat.pleaseStartNewChat"),[K,ye,J]),je=reactExports.useCallback(Ke=>{if((Ke.code===KeyboardCode.Enter||Ke.code===KeyboardCode.NumpadEnter)&&!Ke.shiftKey){if(Ke.preventDefault(),J)return;ue()}},[ue,J]);return jsxRuntimeExports.jsxs("div",{className:"chat-input",children:[jsxRuntimeExports.jsx(q_,{ref:ge,value:oe,className:"chat-input__textarea",status:"transparent",autoSize:{minRows:1,maxRows:8},disabled:Te,placeholder:ke,onChange:ce,onKeyDown:je}),jsxRuntimeExports.jsxs("div",{className:"chat-input__buttons",children:[jsxRuntimeExports.jsx(rl,{onClick:pe,disabled:$e,iconAfter:jsxRuntimeExports.jsx(CT,{}),type:"tertiary"}),jsxRuntimeExports.jsx(rl,{disabled:$e,onClick:xe,iconAfter:jsxRuntimeExports.jsx(nA,{}),type:"tertiary"}),jsxRuntimeExports.jsx(ChatInputButton,{isSending:K,isLoading:J,isDisabledSending:Ne,onSendMessage:ue,cancelSendMessage:Ae})]})]})}));ChatInput.displayName="ChatInput";const PromptLabel=reactExports.memo(({prompt:K})=>{const{t:J}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"prompt-label",children:[jsxRuntimeExports.jsxs("span",{children:[J("chat.prompt"),":"]}),jsxRuntimeExports.jsx("span",{children:K})]})});PromptLabel.displayName="PromptLabel";const ChatHistoryHeader=({isAllSelection:K,isEmptySelection:J,toggleAllSessions:ne})=>{const{t:oe}=useTranslation(),ce=reactExports.useMemo(()=>!K&&!J,[K,J]);return jsxRuntimeExports.jsx("div",{className:"history-chat-history",children:jsxRuntimeExports.jsx(pF,{value:K,intermediate:ce,onChange:ne,children:oe("chat.selectAll")})})},ChatHistoryOption=({isActive:K,isSelected:J,session:ne,onClick:oe,onCheck:ce})=>{const{t:ue}=useTranslation(),Ae=reactExports.useMemo(()=>DateFormatUtility.create(ne.Created).format(DateFormatEnum.DATE_TIME),[ne.Created]),pe=reactExports.useMemo(()=>ne.Name?ne.Name:ue(ne.IsEncrypted?"chat.types.private":"chat.types.internal"),[ne.IsEncrypted,ne.Name]);return jsxRuntimeExports.jsxs("div",{className:"history-chat-option",children:[jsxRuntimeExports.jsx(pF,{value:J,onChange:ce}),jsxRuntimeExports.jsxs("div",{className:cx("history-chat-option__label",{"history-chat-option__label_active":K}),onClick:oe,children:[jsxRuntimeExports.jsx(mf,{title:pe,children:jsxRuntimeExports.jsx("span",{className:"history-chat-option__name",children:pe})}),jsxRuntimeExports.jsx("div",{children:Ae})]})]})},ChatHistoryFooter=({isDisabled:K,deleteSelected:J})=>{const{t:ne}=useTranslation();return jsxRuntimeExports.jsx(rl,{type:"tertiary",className:"history-chat-dropdown-footer",iconBefore:jsxRuntimeExports.jsx(Tk,{className:"history-chat-dropdown-footer__icon"}),disabled:K,onClick:J,children:jsxRuntimeExports.jsx("span",{className:"history-chat-dropdown-footer__label",children:ne("chat.deleteSelectedChats")})})};function useSelectedSessions(K){const[J,ne]=reactExports.useState({}),oe=reactExports.useMemo(()=>{const Se=Object.values(J);return Se.length>0&&Se.every(Te=>Te)},[J]),ce=reactExports.useMemo(()=>Object.values(J).every(Se=>!Se),[J]),ue=reactExports.useCallback(Se=>J[Se]||!1,[J]),Ae=reactExports.useCallback(()=>K.filter(Se=>ue(Se.ChatKey)),[ue,K]),pe=reactExports.useCallback(Se=>{const Te=Se.reduce((Ne,$e)=>({...Ne,[$e.ChatKey]:!1}),{});ne(Te)},[]),xe=reactExports.useCallback(Se=>{ne(Te=>{if(Se.ChatKey in Te){const Ne=Te[Se.ChatKey];return{...Te,[Se.ChatKey]:!Ne}}return Te})},[]),me=reactExports.useCallback(Se=>{ne(Te=>Object.keys(Te).reduce((Ne,$e)=>({...Ne,[$e]:Se}),{}))},[]),ge=reactExports.useCallback(()=>me(!oe),[oe,me]),ye=reactExports.useCallback(()=>me(!1),[me]);return reactExports.useEffect(()=>{pe(K)},[pe,K]),{isSelected:ue,isEmptySelection:ce,isAllSelection:oe,toggleSession:xe,toggleAllSessions:ge,getSelectedSessions:Ae,resetAllSessions:ye}}const ChatHistoryMenu=({activeSession:K,isOpen:J,sessions:ne,selectSession:oe,deleteSelected:ce})=>{const{isSelected:ue,isEmptySelection:Ae,isAllSelection:pe,toggleSession:xe,toggleAllSessions:me,getSelectedSessions:ge,resetAllSessions:ye}=useSelectedSessions(ne),Se=reactExports.useCallback(()=>{const Te=ge();ce(Te)},[ce,ge]);return reactExports.useEffect(()=>{!J&&ye()},[J,ye]),jsxRuntimeExports.jsxs("div",{className:"history-toolbar-chat-history-menu",children:[jsxRuntimeExports.jsx(ChatHistoryHeader,{isAllSelection:pe,isEmptySelection:Ae,toggleAllSessions:me}),jsxRuntimeExports.jsx("div",{className:"history-toolbar-chat-history-menu__content",children:ne.map(Te=>jsxRuntimeExports.jsx(ChatHistoryOption,{isActive:Te.ChatKey===(K==null?void 0:K.ChatKey),isSelected:ue(Te.ChatKey),session:Te,onCheck:()=>xe(Te),onClick:()=>oe(Te)},Te.ChatKey))}),jsxRuntimeExports.jsx(ChatHistoryFooter,{isDisabled:Ae,deleteSelected:Se})]})};function useChatHistoryToggleTooltip(K,J,ne){const{t:oe}=useTranslation(),[ce,ue]=reactExports.useState(!1),Ae=reactExports.useMemo(()=>oe(J?"chat.emptyHistoryTooltip":"chat.historyTooltip"),[J,oe]),pe=reactExports.useCallback(()=>{ne||ue(xe=>!xe)},[ne]);return reactExports.useEffect(()=>{(K||ne)&&ue(!1)},[K,ne]),{showTooltip:ce,toggleTooltip:pe,tooltipMessage:Ae}}const ChatHistoryToggle=({isLoading:K,isEmpty:J,isOpen:ne,onClick:oe})=>{const{tooltipMessage:ce}=useChatHistoryToggleTooltip(K,J,ne);return jsxRuntimeExports.jsx(mf,{title:ce,children:jsxRuntimeExports.jsx(rl,{type:"primary",onClick:oe,variant:"ghost",disabled:K||J,iconAfter:jsxRuntimeExports.jsx(Vk,{})})})},ChatHistory=({isLoading:K,activeSession:J,sessions:ne,className:oe,selectSession:ce,deleteSelectedSessions:ue})=>{const[Ae,pe]=reactExports.useState(!1),xe=reactExports.useMemo(()=>K||ne.length===0,[K,ne.length]);return jsxRuntimeExports.jsx(X_,{open:Ae,onOpenChange:pe,disabled:xe,className:cx(oe),dropdownRender:()=>jsxRuntimeExports.jsx(ChatHistoryMenu,{activeSession:J,isOpen:Ae,sessions:ne,selectSession:me=>{ce(me),pe(!1)},deleteSelected:me=>{ue(me),pe(!1)}}),children:jsxRuntimeExports.jsx(ChatHistoryToggle,{isOpen:Ae,isEmpty:ne.length===0,isLoading:K})})},ChatButton=({disabled:K=!1,onClick:J})=>{const{t:ne}=useTranslation();return jsxRuntimeExports.jsx(mf,{title:ne("chat.newTooltipTypes.internal"),children:jsxRuntimeExports.jsx(rl,{type:"tertiary",disabled:K,className:"toolbar-chat-button",onClick:J,iconAfter:jsxRuntimeExports.jsx(Dk,{}),children:jsxRuntimeExports.jsx("span",{className:"toolbar-chat-button__children",children:ne("chat.newTypes.internal")})})})},MaximizeButton=({isMaximizedView:K,onCLick:J})=>{const{t:ne}=useTranslation(),oe=ne(K?"maximizeButton.exitFullScreen":"maximizeButton.fullScreen"),ce=K?Lk:Ik;return jsxRuntimeExports.jsx(mf,{title:oe,children:jsxRuntimeExports.jsx(rl,{type:"primary",variant:"ghost",iconAfter:jsxRuntimeExports.jsx(ce,{}),onClick:J})})},HistoryToolbar=reactExports.memo(({isShowMaximized:K,isMaximized:J,isTopic:ne,isLoading:oe,activeSession:ce,sessions:ue,startNewChat:Ae,selectSession:pe,deleteSelectedSessions:xe,toggleMaximizedView:me})=>jsxRuntimeExports.jsx("div",{className:"history-toolbar",children:ne&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ChatButton,{disabled:oe,onClick:()=>Ae(ChatType.INTERNAL,!0)}),(ce==null?void 0:ce.Profile)&&jsxRuntimeExports.jsx(PromptLabel,{prompt:ce.Profile}),jsxRuntimeExports.jsxs("div",{className:"history-toolbar__chat-control-buttons",children:[jsxRuntimeExports.jsx(ChatHistory,{activeSession:ce,isLoading:oe,sessions:ue,selectSession:pe,deleteSelectedSessions:xe}),K&&jsxRuntimeExports.jsx("div",{className:"history-toolbar__maximize-container",children:jsxRuntimeExports.jsx(MaximizeButton,{isMaximizedView:J,onCLick:me})})]})]})}));HistoryToolbar.displayName="HistoryToolbar";function __awaiter(K,J,ne,oe){function ce(ue){return ue instanceof ne?ue:new ne(function(Ae){Ae(ue)})}return new(ne||(ne=Promise))(function(ue,Ae){function pe(ge){try{me(oe.next(ge))}catch(ye){Ae(ye)}}function xe(ge){try{me(oe.throw(ge))}catch(ye){Ae(ye)}}function me(ge){ge.done?ue(ge.value):ce(ge.value).then(pe,xe)}me((oe=oe.apply(K,J||[])).next())})}function __generator(K,J){var ne={label:0,sent:function(){if(ue[0]&1)throw ue[1];return ue[1]},trys:[],ops:[]},oe,ce,ue,Ae=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return Ae.next=pe(0),Ae.throw=pe(1),Ae.return=pe(2),typeof Symbol=="function"&&(Ae[Symbol.iterator]=function(){return this}),Ae;function pe(me){return function(ge){return xe([me,ge])}}function xe(me){if(oe)throw new TypeError("Generator is already executing.");for(;Ae&&(Ae=0,me[0]&&(ne=0)),ne;)try{if(oe=1,ce&&(ue=me[0]&2?ce.return:me[0]?ce.throw||((ue=ce.return)&&ue.call(ce),0):ce.next)&&!(ue=ue.call(ce,me[1])).done)return ue;switch(ce=0,ue&&(me=[me[0]&2,ue.value]),me[0]){case 0:case 1:ue=me;break;case 4:return ne.label++,{value:me[1],done:!1};case 5:ne.label++,ce=me[1],me=[0];continue;case 7:me=ne.ops.pop(),ne.trys.pop();continue;default:if(ue=ne.trys,!(ue=ue.length>0&&ue[ue.length-1])&&(me[0]===6||me[0]===2)){ne=0;continue}if(me[0]===3&&(!ue||me[1]>ue[0]&&me[1]<ue[3])){ne.label=me[1];break}if(me[0]===6&&ne.label<ue[1]){ne.label=ue[1],ue=me;break}if(ue&&ne.label<ue[2]){ne.label=ue[2],ne.ops.push(me);break}ue[2]&&ne.ops.pop(),ne.trys.pop();continue}me=J.call(K,ne)}catch(ge){me=[6,ge],ce=0}finally{oe=ue=0}if(me[0]&5)throw me[1];return{value:me[0]?me[1]:void 0,done:!0}}}function __read(K,J){var ne=typeof Symbol=="function"&&K[Symbol.iterator];if(!ne)return K;var oe=ne.call(K),ce,ue=[],Ae;try{for(;(J===void 0||J-- >0)&&!(ce=oe.next()).done;)ue.push(ce.value)}catch(pe){Ae={error:pe}}finally{try{ce&&!ce.done&&(ne=oe.return)&&ne.call(oe)}finally{if(Ae)throw Ae.error}}return ue}function __spreadArray(K,J,ne){if(ne||arguments.length===2)for(var oe=0,ce=J.length,ue;oe<ce;oe++)(ue||!(oe in J))&&(ue||(ue=Array.prototype.slice.call(J,0,oe)),ue[oe]=J[oe]);return K.concat(ue||Array.prototype.slice.call(J))}typeof SuppressedError=="function"&&SuppressedError;var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(K,J){var ne=withMimeType(K);if(typeof ne.path!="string"){var oe=K.webkitRelativePath;Object.defineProperty(ne,"path",{value:typeof J=="string"?J:typeof oe=="string"&&oe.length>0?oe:K.name,writable:!1,configurable:!1,enumerable:!0})}return ne}function withMimeType(K){var J=K.name,ne=J&&J.lastIndexOf(".")!==-1;if(ne&&!K.type){var oe=J.split(".").pop().toLowerCase(),ce=COMMON_MIME_TYPES.get(oe);ce&&Object.defineProperty(K,"type",{value:ce,writable:!1,configurable:!1,enumerable:!0})}return K}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(K){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(J){return isObject(K)&&isDataTransfer(K.dataTransfer)?[2,getDataTransferFiles(K.dataTransfer,K.type)]:isChangeEvt(K)?[2,getInputFiles(K)]:Array.isArray(K)&&K.every(function(ne){return"getFile"in ne&&typeof ne.getFile=="function"})?[2,getFsHandleFiles(K)]:[2,[]]})})}function isDataTransfer(K){return isObject(K)}function isChangeEvt(K){return isObject(K)&&isObject(K.target)}function isObject(K){return typeof K=="object"&&K!==null}function getInputFiles(K){return fromList(K.target.files).map(function(J){return toFileWithPath(J)})}function getFsHandleFiles(K){return __awaiter(this,void 0,void 0,function(){var J;return __generator(this,function(ne){switch(ne.label){case 0:return[4,Promise.all(K.map(function(oe){return oe.getFile()}))];case 1:return J=ne.sent(),[2,J.map(function(oe){return toFileWithPath(oe)})]}})})}function getDataTransferFiles(K,J){return __awaiter(this,void 0,void 0,function(){var ne,oe;return __generator(this,function(ce){switch(ce.label){case 0:return K.items?(ne=fromList(K.items).filter(function(ue){return ue.kind==="file"}),J!=="drop"?[2,ne]:[4,Promise.all(ne.map(toFilePromises))]):[3,2];case 1:return oe=ce.sent(),[2,noIgnoredFiles(flatten(oe))];case 2:return[2,noIgnoredFiles(fromList(K.files).map(function(ue){return toFileWithPath(ue)}))]}})})}function noIgnoredFiles(K){return K.filter(function(J){return FILES_TO_IGNORE.indexOf(J.name)===-1})}function fromList(K){if(K===null)return[];for(var J=[],ne=0;ne<K.length;ne++){var oe=K[ne];J.push(oe)}return J}function toFilePromises(K){if(typeof K.webkitGetAsEntry!="function")return fromDataTransferItem(K);var J=K.webkitGetAsEntry();return J&&J.isDirectory?fromDirEntry(J):fromDataTransferItem(K)}function flatten(K){return K.reduce(function(J,ne){return __spreadArray(__spreadArray([],__read(J),!1),__read(Array.isArray(ne)?flatten(ne):[ne]),!1)},[])}function fromDataTransferItem(K){var J=K.getAsFile();if(!J)return Promise.reject("".concat(K," is not a File"));var ne=toFileWithPath(J);return Promise.resolve(ne)}function fromEntry(K){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(J){return[2,K.isDirectory?fromDirEntry(K):fromFileEntry(K)]})})}function fromDirEntry(K){var J=K.createReader();return new Promise(function(ne,oe){var ce=[];function ue(){var Ae=this;J.readEntries(function(pe){return __awaiter(Ae,void 0,void 0,function(){var xe,me,ge;return __generator(this,function(ye){switch(ye.label){case 0:if(pe.length)return[3,5];ye.label=1;case 1:return ye.trys.push([1,3,,4]),[4,Promise.all(ce)];case 2:return xe=ye.sent(),ne(xe),[3,4];case 3:return me=ye.sent(),oe(me),[3,4];case 4:return[3,6];case 5:ge=Promise.all(pe.map(fromEntry)),ce.push(ge),ue(),ye.label=6;case 6:return[2]}})})},function(pe){oe(pe)})}ue()})}function fromFileEntry(K){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(J){return[2,new Promise(function(ne,oe){K.file(function(ce){var ue=toFileWithPath(ce,K.fullPath);ne(ue)},function(ce){oe(ce)})})]})})}var _default=function(K,J){if(K&&J){var ne=Array.isArray(J)?J:J.split(",");if(ne.length===0)return!0;var oe=K.name||"",ce=(K.type||"").toLowerCase(),ue=ce.replace(/\/.*$/,"");return ne.some(function(Ae){var pe=Ae.trim().toLowerCase();return pe.charAt(0)==="."?oe.toLowerCase().endsWith(pe):pe.endsWith("/*")?ue===pe.replace(/\/.*$/,""):ce===pe})}return!0};function _toConsumableArray$1(K){return _arrayWithoutHoles$1(K)||_iterableToArray$1(K)||_unsupportedIterableToArray$1(K)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(K){if(typeof Symbol<"u"&&K[Symbol.iterator]!=null||K["@@iterator"]!=null)return Array.from(K)}function _arrayWithoutHoles$1(K){if(Array.isArray(K))return _arrayLikeToArray$1(K)}function ownKeys$1(K,J){var ne=Object.keys(K);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(K);J&&(oe=oe.filter(function(ce){return Object.getOwnPropertyDescriptor(K,ce).enumerable})),ne.push.apply(ne,oe)}return ne}function _objectSpread$1(K){for(var J=1;J<arguments.length;J++){var ne=arguments[J]!=null?arguments[J]:{};J%2?ownKeys$1(Object(ne),!0).forEach(function(oe){_defineProperty$1(K,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ne)):ownKeys$1(Object(ne)).forEach(function(oe){Object.defineProperty(K,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return K}function _defineProperty$1(K,J,ne){return J in K?Object.defineProperty(K,J,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[J]=ne,K}function _slicedToArray$1(K,J){return _arrayWithHoles$1(K)||_iterableToArrayLimit$1(K,J)||_unsupportedIterableToArray$1(K,J)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(K,J){if(K){if(typeof K=="string")return _arrayLikeToArray$1(K,J);var ne=Object.prototype.toString.call(K).slice(8,-1);if(ne==="Object"&&K.constructor&&(ne=K.constructor.name),ne==="Map"||ne==="Set")return Array.from(K);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return _arrayLikeToArray$1(K,J)}}function _arrayLikeToArray$1(K,J){(J==null||J>K.length)&&(J=K.length);for(var ne=0,oe=new Array(J);ne<J;ne++)oe[ne]=K[ne];return oe}function _iterableToArrayLimit$1(K,J){var ne=K==null?null:typeof Symbol<"u"&&K[Symbol.iterator]||K["@@iterator"];if(ne!=null){var oe=[],ce=!0,ue=!1,Ae,pe;try{for(ne=ne.call(K);!(ce=(Ae=ne.next()).done)&&(oe.push(Ae.value),!(J&&oe.length===J));ce=!0);}catch(xe){ue=!0,pe=xe}finally{try{!ce&&ne.return!=null&&ne.return()}finally{if(ue)throw pe}}return oe}}function _arrayWithHoles$1(K){if(Array.isArray(K))return K}var accepts=typeof _default=="function"?_default:_default.default,FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",ErrorCode={FileInvalidType:FILE_INVALID_TYPE,FileTooLarge:FILE_TOO_LARGE,FileTooSmall:FILE_TOO_SMALL,TooManyFiles:TOO_MANY_FILES},getInvalidTypeRejectionErr=function K(J){J=Array.isArray(J)&&J.length===1?J[0]:J;var ne=Array.isArray(J)?"one of ".concat(J.join(", ")):J;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(ne)}},getTooLargeRejectionErr=function K(J){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(J," ").concat(J===1?"byte":"bytes")}},getTooSmallRejectionErr=function K(J){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(J," ").concat(J===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(K,J){var ne=K.type==="application/x-moz-file"||accepts(K,J);return[ne,ne?null:getInvalidTypeRejectionErr(J)]}function fileMatchSize(K,J,ne){if(isDefined(K.size))if(isDefined(J)&&isDefined(ne)){if(K.size>ne)return[!1,getTooLargeRejectionErr(ne)];if(K.size<J)return[!1,getTooSmallRejectionErr(J)]}else{if(isDefined(J)&&K.size<J)return[!1,getTooSmallRejectionErr(J)];if(isDefined(ne)&&K.size>ne)return[!1,getTooLargeRejectionErr(ne)]}return[!0,null]}function isDefined(K){return K!=null}function allFilesAccepted(K){var J=K.files,ne=K.accept,oe=K.minSize,ce=K.maxSize,ue=K.multiple,Ae=K.maxFiles,pe=K.validator;return!ue&&J.length>1||ue&&Ae>=1&&J.length>Ae?!1:J.every(function(xe){var me=fileAccepted(xe,ne),ge=_slicedToArray$1(me,1),ye=ge[0],Se=fileMatchSize(xe,oe,ce),Te=_slicedToArray$1(Se,1),Ne=Te[0],$e=pe?pe(xe):null;return ye&&Ne&&!$e})}function isPropagationStopped(K){return typeof K.isPropagationStopped=="function"?K.isPropagationStopped():typeof K.cancelBubble<"u"?K.cancelBubble:!1}function isEvtWithFiles(K){return K.dataTransfer?Array.prototype.some.call(K.dataTransfer.types,function(J){return J==="Files"||J==="application/x-moz-file"}):!!K.target&&!!K.target.files}function onDocumentDragOver(K){K.preventDefault()}function isIe(K){return K.indexOf("MSIE")!==-1||K.indexOf("Trident/")!==-1}function isEdge(K){return K.indexOf("Edge/")!==-1}function isIeOrEdge(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(K)||isEdge(K)}function composeEventHandlers(){for(var K=arguments.length,J=new Array(K),ne=0;ne<K;ne++)J[ne]=arguments[ne];return function(oe){for(var ce=arguments.length,ue=new Array(ce>1?ce-1:0),Ae=1;Ae<ce;Ae++)ue[Ae-1]=arguments[Ae];return J.some(function(pe){return!isPropagationStopped(oe)&&pe&&pe.apply(void 0,[oe].concat(ue)),isPropagationStopped(oe)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(K){if(isDefined(K)){var J=Object.entries(K).filter(function(ne){var oe=_slicedToArray$1(ne,2),ce=oe[0],ue=oe[1],Ae=!0;return isMIMEType(ce)||(console.warn('Skipped "'.concat(ce,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),Ae=!1),(!Array.isArray(ue)||!ue.every(isExt))&&(console.warn('Skipped "'.concat(ce,'" because an invalid file extension was provided.')),Ae=!1),Ae}).reduce(function(ne,oe){var ce=_slicedToArray$1(oe,2),ue=ce[0],Ae=ce[1];return _objectSpread$1(_objectSpread$1({},ne),{},_defineProperty$1({},ue,Ae))},{});return[{description:"Files",accept:J}]}return K}function acceptPropAsAcceptAttr(K){if(isDefined(K))return Object.entries(K).reduce(function(J,ne){var oe=_slicedToArray$1(ne,2),ce=oe[0],ue=oe[1];return[].concat(_toConsumableArray$1(J),[ce],_toConsumableArray$1(ue))},[]).filter(function(J){return isMIMEType(J)||isExt(J)}).join(",")}function isAbort(K){return K instanceof DOMException&&(K.name==="AbortError"||K.code===K.ABORT_ERR)}function isSecurityError(K){return K instanceof DOMException&&(K.name==="SecurityError"||K.code===K.SECURITY_ERR)}function isMIMEType(K){return K==="audio/*"||K==="video/*"||K==="image/*"||K==="text/*"||/\w+\/[-+.\w]+/g.test(K)}function isExt(K){return/^.*\.[\w]+$/.test(K)}var _excluded=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(K){return _arrayWithoutHoles(K)||_iterableToArray(K)||_unsupportedIterableToArray(K)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(K){if(typeof Symbol<"u"&&K[Symbol.iterator]!=null||K["@@iterator"]!=null)return Array.from(K)}function _arrayWithoutHoles(K){if(Array.isArray(K))return _arrayLikeToArray(K)}function _slicedToArray(K,J){return _arrayWithHoles(K)||_iterableToArrayLimit(K,J)||_unsupportedIterableToArray(K,J)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(K,J){if(K){if(typeof K=="string")return _arrayLikeToArray(K,J);var ne=Object.prototype.toString.call(K).slice(8,-1);if(ne==="Object"&&K.constructor&&(ne=K.constructor.name),ne==="Map"||ne==="Set")return Array.from(K);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return _arrayLikeToArray(K,J)}}function _arrayLikeToArray(K,J){(J==null||J>K.length)&&(J=K.length);for(var ne=0,oe=new Array(J);ne<J;ne++)oe[ne]=K[ne];return oe}function _iterableToArrayLimit(K,J){var ne=K==null?null:typeof Symbol<"u"&&K[Symbol.iterator]||K["@@iterator"];if(ne!=null){var oe=[],ce=!0,ue=!1,Ae,pe;try{for(ne=ne.call(K);!(ce=(Ae=ne.next()).done)&&(oe.push(Ae.value),!(J&&oe.length===J));ce=!0);}catch(xe){ue=!0,pe=xe}finally{try{!ce&&ne.return!=null&&ne.return()}finally{if(ue)throw pe}}return oe}}function _arrayWithHoles(K){if(Array.isArray(K))return K}function ownKeys(K,J){var ne=Object.keys(K);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(K);J&&(oe=oe.filter(function(ce){return Object.getOwnPropertyDescriptor(K,ce).enumerable})),ne.push.apply(ne,oe)}return ne}function _objectSpread(K){for(var J=1;J<arguments.length;J++){var ne=arguments[J]!=null?arguments[J]:{};J%2?ownKeys(Object(ne),!0).forEach(function(oe){_defineProperty(K,oe,ne[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ne)):ownKeys(Object(ne)).forEach(function(oe){Object.defineProperty(K,oe,Object.getOwnPropertyDescriptor(ne,oe))})}return K}function _defineProperty(K,J,ne){return J in K?Object.defineProperty(K,J,{value:ne,enumerable:!0,configurable:!0,writable:!0}):K[J]=ne,K}function _objectWithoutProperties(K,J){if(K==null)return{};var ne=_objectWithoutPropertiesLoose(K,J),oe,ce;if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(K);for(ce=0;ce<ue.length;ce++)oe=ue[ce],!(J.indexOf(oe)>=0)&&Object.prototype.propertyIsEnumerable.call(K,oe)&&(ne[oe]=K[oe])}return ne}function _objectWithoutPropertiesLoose(K,J){if(K==null)return{};var ne={},oe=Object.keys(K),ce,ue;for(ue=0;ue<oe.length;ue++)ce=oe[ue],!(J.indexOf(ce)>=0)&&(ne[ce]=K[ce]);return ne}var Dropzone=reactExports.forwardRef(function(K,J){var ne=K.children,oe=_objectWithoutProperties(K,_excluded),ce=useDropzone(oe),ue=ce.open,Ae=_objectWithoutProperties(ce,_excluded2);return reactExports.useImperativeHandle(J,function(){return{open:ue}},[ue]),Wt.createElement(reactExports.Fragment,null,ne(_objectSpread(_objectSpread({},Ae),{},{open:ue})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=_objectSpread(_objectSpread({},defaultProps),K),ne=J.accept,oe=J.disabled,ce=J.getFilesFromEvent,ue=J.maxSize,Ae=J.minSize,pe=J.multiple,xe=J.maxFiles,me=J.onDragEnter,ge=J.onDragLeave,ye=J.onDragOver,Se=J.onDrop,Te=J.onDropAccepted,Ne=J.onDropRejected,$e=J.onFileDialogCancel,ke=J.onFileDialogOpen,je=J.useFsAccessApi,Ke=J.autoFocus,Ye=J.preventDropOnDocument,ze=J.noClick,Xe=J.noKeyboard,Je=J.noDrag,rt=J.noDragEventsBubbling,Ze=J.onError,et=J.validator,nt=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(ne)},[ne]),Ge=reactExports.useMemo(function(){return pickerOptionsFromAccept(ne)},[ne]),ve=reactExports.useMemo(function(){return typeof ke=="function"?ke:noop},[ke]),Be=reactExports.useMemo(function(){return typeof $e=="function"?$e:noop},[$e]),Re=reactExports.useRef(null),Ie=reactExports.useRef(null),Fe=reactExports.useReducer(reducer,initialState),qe=_slicedToArray(Fe,2),We=qe[0],Ue=qe[1],_e=We.isFocused,Qe=We.isFileDialogActive,tt=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&je&&canUseFileSystemAccessAPI()),it=function(){!tt.current&&Qe&&setTimeout(function(){if(Ie.current){var Rt=Ie.current.files;Rt.length||(Ue({type:"closeDialog"}),Be())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",it,!1),function(){window.removeEventListener("focus",it,!1)}},[Ie,Qe,Be,tt]);var at=reactExports.useRef([]),ot=function(Rt){Re.current&&Re.current.contains(Rt.target)||(Rt.preventDefault(),at.current=[])};reactExports.useEffect(function(){return Ye&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",ot,!1)),function(){Ye&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",ot))}},[Re,Ye]),reactExports.useEffect(function(){return!oe&&Ke&&Re.current&&Re.current.focus(),function(){}},[Re,Ke,oe]);var lt=reactExports.useCallback(function(Ct){Ze?Ze(Ct):console.error(Ct)},[Ze]),st=reactExports.useCallback(function(Ct){Ct.preventDefault(),Ct.persist(),Pt(Ct),at.current=[].concat(_toConsumableArray(at.current),[Ct.target]),isEvtWithFiles(Ct)&&Promise.resolve(ce(Ct)).then(function(Rt){if(!(isPropagationStopped(Ct)&&!rt)){var dr=Rt.length,Dt=dr>0&&allFilesAccepted({files:Rt,accept:nt,minSize:Ae,maxSize:ue,multiple:pe,maxFiles:xe,validator:et}),Tt=dr>0&&!Dt;Ue({isDragAccept:Dt,isDragReject:Tt,isDragActive:!0,type:"setDraggedFiles"}),me&&me(Ct)}}).catch(function(Rt){return lt(Rt)})},[ce,me,lt,rt,nt,Ae,ue,pe,xe,et]),ut=reactExports.useCallback(function(Ct){Ct.preventDefault(),Ct.persist(),Pt(Ct);var Rt=isEvtWithFiles(Ct);if(Rt&&Ct.dataTransfer)try{Ct.dataTransfer.dropEffect="copy"}catch{}return Rt&&ye&&ye(Ct),!1},[ye,rt]),ft=reactExports.useCallback(function(Ct){Ct.preventDefault(),Ct.persist(),Pt(Ct);var Rt=at.current.filter(function(Dt){return Re.current&&Re.current.contains(Dt)}),dr=Rt.indexOf(Ct.target);dr!==-1&&Rt.splice(dr,1),at.current=Rt,!(Rt.length>0)&&(Ue({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(Ct)&&ge&&ge(Ct))},[Re,ge,rt]),dt=reactExports.useCallback(function(Ct,Rt){var dr=[],Dt=[];Ct.forEach(function(Tt){var or=fileAccepted(Tt,nt),Mt=_slicedToArray(or,2),kt=Mt[0],ur=Mt[1],$t=fileMatchSize(Tt,Ae,ue),jt=_slicedToArray($t,2),nr=jt[0],Ot=jt[1],Lt=et?et(Tt):null;if(kt&&nr&&!Lt)dr.push(Tt);else{var lr=[ur,Ot];Lt&&(lr=lr.concat(Lt)),Dt.push({file:Tt,errors:lr.filter(function(Ht){return Ht})})}}),(!pe&&dr.length>1||pe&&xe>=1&&dr.length>xe)&&(dr.forEach(function(Tt){Dt.push({file:Tt,errors:[TOO_MANY_FILES_REJECTION]})}),dr.splice(0)),Ue({acceptedFiles:dr,fileRejections:Dt,type:"setFiles"}),Se&&Se(dr,Dt,Rt),Dt.length>0&&Ne&&Ne(Dt,Rt),dr.length>0&&Te&&Te(dr,Rt)},[Ue,pe,nt,Ae,ue,xe,Se,Te,Ne,et]),Bt=reactExports.useCallback(function(Ct){Ct.preventDefault(),Ct.persist(),Pt(Ct),at.current=[],isEvtWithFiles(Ct)&&Promise.resolve(ce(Ct)).then(function(Rt){isPropagationStopped(Ct)&&!rt||dt(Rt,Ct)}).catch(function(Rt){return lt(Rt)}),Ue({type:"reset"})},[ce,dt,lt,rt]),pt=reactExports.useCallback(function(){if(tt.current){Ue({type:"openDialog"}),ve();var Ct={multiple:pe,types:Ge};window.showOpenFilePicker(Ct).then(function(Rt){return ce(Rt)}).then(function(Rt){dt(Rt,null),Ue({type:"closeDialog"})}).catch(function(Rt){isAbort(Rt)?(Be(Rt),Ue({type:"closeDialog"})):isSecurityError(Rt)?(tt.current=!1,Ie.current?(Ie.current.value=null,Ie.current.click()):lt(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):lt(Rt)});return}Ie.current&&(Ue({type:"openDialog"}),ve(),Ie.current.value=null,Ie.current.click())},[Ue,ve,Be,je,dt,lt,Ge,pe]),mt=reactExports.useCallback(function(Ct){!Re.current||!Re.current.isEqualNode(Ct.target)||(Ct.key===" "||Ct.key==="Enter"||Ct.keyCode===32||Ct.keyCode===13)&&(Ct.preventDefault(),pt())},[Re,pt]),bt=reactExports.useCallback(function(){Ue({type:"focus"})},[]),xt=reactExports.useCallback(function(){Ue({type:"blur"})},[]),yt=reactExports.useCallback(function(){ze||(isIeOrEdge()?setTimeout(pt,0):pt())},[ze,pt]),It=function(Rt){return oe?null:Rt},ht=function(Rt){return Xe?null:It(Rt)},gt=function(Rt){return Je?null:It(Rt)},Pt=function(Rt){rt&&Rt.stopPropagation()},wt=reactExports.useMemo(function(){return function(){var Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Rt=Ct.refKey,dr=Rt===void 0?"ref":Rt,Dt=Ct.role,Tt=Ct.onKeyDown,or=Ct.onFocus,Mt=Ct.onBlur,kt=Ct.onClick,ur=Ct.onDragEnter,$t=Ct.onDragOver,jt=Ct.onDragLeave,nr=Ct.onDrop,Ot=_objectWithoutProperties(Ct,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:ht(composeEventHandlers(Tt,mt)),onFocus:ht(composeEventHandlers(or,bt)),onBlur:ht(composeEventHandlers(Mt,xt)),onClick:It(composeEventHandlers(kt,yt)),onDragEnter:gt(composeEventHandlers(ur,st)),onDragOver:gt(composeEventHandlers($t,ut)),onDragLeave:gt(composeEventHandlers(jt,ft)),onDrop:gt(composeEventHandlers(nr,Bt)),role:typeof Dt=="string"&&Dt!==""?Dt:"presentation"},dr,Re),!oe&&!Xe?{tabIndex:0}:{}),Ot)}},[Re,mt,bt,xt,yt,st,ut,ft,Bt,Xe,Je,oe]),St=reactExports.useCallback(function(Ct){Ct.stopPropagation()},[]),Zt=reactExports.useMemo(function(){return function(){var Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Rt=Ct.refKey,dr=Rt===void 0?"ref":Rt,Dt=Ct.onChange,Tt=Ct.onClick,or=_objectWithoutProperties(Ct,_excluded4),Mt=_defineProperty({accept:nt,multiple:pe,type:"file",style:{display:"none"},onChange:It(composeEventHandlers(Dt,Bt)),onClick:It(composeEventHandlers(Tt,St)),tabIndex:-1},dr,Ie);return _objectSpread(_objectSpread({},Mt),or)}},[Ie,ne,pe,Bt,oe]);return _objectSpread(_objectSpread({},We),{},{isFocused:_e&&!oe,getRootProps:wt,getInputProps:Zt,rootRef:Re,inputRef:Ie,open:It(pt)})}function reducer(K,J){switch(J.type){case"focus":return _objectSpread(_objectSpread({},K),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},K),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},K),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},K),{},{isDragActive:J.isDragActive,isDragAccept:J.isDragAccept,isDragReject:J.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},K),{},{acceptedFiles:J.acceptedFiles,fileRejections:J.fileRejections});case"reset":return _objectSpread({},initialState);default:return K}}function noop(){}const BYTE_UNITS=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],BIBYTE_UNITS=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],BIT_UNITS=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],BIBIT_UNITS=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],toLocaleString=(K,J,ne)=>{let oe=K;return typeof J=="string"||Array.isArray(J)?oe=K.toLocaleString(J,ne):(J===!0||ne!==void 0)&&(oe=K.toLocaleString(void 0,ne)),oe};function prettyBytes(K,J){if(!Number.isFinite(K))throw new TypeError(`Expected a finite number, got ${typeof K}: ${K}`);J={bits:!1,binary:!1,space:!0,...J};const ne=J.bits?J.binary?BIBIT_UNITS:BIT_UNITS:J.binary?BIBYTE_UNITS:BYTE_UNITS,oe=J.space?" ":"";if(J.signed&&K===0)return` 0${oe}${ne[0]}`;const ce=K<0,ue=ce?"-":J.signed?"+":"";ce&&(K=-K);let Ae;if(J.minimumFractionDigits!==void 0&&(Ae={minimumFractionDigits:J.minimumFractionDigits}),J.maximumFractionDigits!==void 0&&(Ae={maximumFractionDigits:J.maximumFractionDigits,...Ae}),K<1){const ge=toLocaleString(K,J.locale,Ae);return ue+ge+oe+ne[0]}const pe=Math.min(Math.floor(J.binary?Math.log(K)/Math.log(1024):Math.log10(K)/3),ne.length-1);K/=(J.binary?1024:1e3)**pe,Ae||(K=K.toPrecision(3));const xe=toLocaleString(Number(K),J.locale,Ae),me=ne[pe];return ue+xe+oe+me}const generateMessageByError=(K,J,ne)=>{switch(J.code){case ErrorCode.FileInvalidType:return J.message.replaceAll(",",", ");case ErrorCode.FileTooLarge:{const oe=prettyBytes(ne.maxByteSize);return`File "${K.name}" is larger than the maximum of ${oe} supported by the current GPT model tier.`}default:return J.message}},generateErrorMessage=(K,J)=>{let ne="";for(let oe=0;oe<K.errors.length;oe+=1){const ce=K.errors[oe],ue=generateMessageByError(K.file,ce,J);ne=ne.concat(`${ue} 
`)}return ne},errorList="_errorList_rhoyz_1",dropzone="_dropzone_rhoyz_8",dropzoneActive="_dropzoneActive_rhoyz_15",dropzoneReject="_dropzoneReject_rhoyz_19",styles$2={errorList,dropzone,dropzoneActive,dropzoneReject},UploadZone=({isLoading:K,children:J,onChangeFiles:ne})=>{const[oe,ce]=reactExports.useState([]),ue=5e6;reactExports.useEffect(()=>{oe.length>0&&Ho.warning({title:instance.t("uploadZoneErrorModal.title"),content:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{children:instance.t("uploadZoneErrorModal.message")}),jsxRuntimeExports.jsx("ul",{className:styles$2.errorList,children:oe.map((pe,xe)=>jsxRuntimeExports.jsx("li",{children:pe},xe))})]}),cancelText:null,onOk(pe){pe()},testId:"upload-zone"})},[oe]);const Ae=reactExports.useCallback(pe=>{const xe=pe.map(me=>generateErrorMessage(me,{maxByteSize:ue}));ce(xe)},[]);return jsxRuntimeExports.jsx(Dropzone,{disabled:K,maxSize:ue,accept:{"application/pdf":[],"text/csv":[],"text/plain":[".sql",".py",".cpp",".hpp",".c",".h",".cs",".java",".js",".ts",".md"]},noClick:!0,noKeyboard:!0,onDrop:ne,onDropRejected:Ae,children:({getRootProps:pe,getInputProps:xe,isDragActive:me,isDragReject:ge,open:ye})=>jsxRuntimeExports.jsxs("div",{...pe({className:cx(styles$2.dropzone,{[styles$2.dropzoneActive]:me,[styles$2.dropzoneReject]:ge})}),children:[jsxRuntimeExports.jsx("input",{...xe()}),J({open:ye})]})})},top="_top_1h0u2_1",container$1="_container_1h0u2_8",fullScreenMode="_fullScreenMode_1h0u2_18",logoContainer="_logoContainer_1h0u2_25",styles$1={top,container:container$1,fullScreenMode,logoContainer},History=({isShowMaximizedButton:K,isMaximized:J,isTopic:ne,files:oe,isSending:ce,isPrivateType:ue,isLoading:Ae,activeSession:pe,sessions:xe,selectSession:me,deleteSelectedSessions:ge,startNewChat:ye,messageGroups:Se,onSendMessage:Te,cancelSendMessage:Ne,message:$e,onChangeInput:ke,onChangeFiles:je,onRemoveFile:Ke,toggleMaximizedView:Ye,openKeyDialog:ze,getUnsavedFiles:Xe})=>{const Je=reactExports.useRef(),{state:rt,action:Ze}=useAppContext(),et=useSelector$1(selectFullScreenMode);reactExports.useEffect(()=>{rt.showLineHider&&Ze.setShowLineHiderAction(!1)},[]);const nt=reactExports.useCallback(Ge=>{je(Ge),Je.current.focus()},[je]);return jsxRuntimeExports.jsx(UploadZone,{isLoading:Ae,onChangeFiles:nt,children:({open:Ge})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[et&&jsxRuntimeExports.jsxs("div",{className:styles$1.fullScreenMode,children:[jsxRuntimeExports.jsx("div",{className:styles$1.logoContainer,children:jsxRuntimeExports.jsx(Logo,{})}),env.isFullScreenNavigation&&jsxRuntimeExports.jsx(HeaderSearch,{})]}),jsxRuntimeExports.jsx("div",{className:styles$1.top,children:jsxRuntimeExports.jsxs("div",{className:styles$1.container,children:[jsxRuntimeExports.jsx(HistoryToolbar,{isShowMaximized:K,isMaximized:J,isTopic:ne,activeSession:pe,isLoading:Ae,sessions:xe,startNewChat:ye,selectSession:me,deleteSelectedSessions:ge,toggleMaximizedView:Ye}),jsxRuntimeExports.jsx(Chat,{isShowMaskIcon:ue,messageGroups:Se}),jsxRuntimeExports.jsx(FileList,{isLoading:Ae,files:oe,onRemove:Ke}),jsxRuntimeExports.jsx(ChatInput,{ref:Je,getUnsavedFiles:Xe,isProfileChosen:!!(pe!=null&&pe.Profile),isSending:ce,isLoading:Ae,input:$e,onChangeInput:ke,onSendMessage:Te,openFileExplorer:Ge,cancelSendMessage:Ne,openKeyDialog:ze})]})})]})})};function usePrompts(K,J){const[ne,oe]=reactExports.useState(LoadingStatusesEnum.INITIAL),[ce,ue]=reactExports.useState({}),[Ae,pe]=reactExports.useState([]),xe=ge=>schemaApi.getType({name:ge}).then(ye=>{const Se=ye.typeList[ye.rootType];return ue(Se),Se}),me=ge=>storageApi.select({params:{type:ge,table_format:!0,limit:1e5,dataset:J}}).then(({data:ye})=>pe(ye));return reactExports.useEffect(()=>{oe(LoadingStatusesEnum.LOADING),xe(K).then(()=>me(K)).then(()=>oe(LoadingStatusesEnum.SUCCESS)).catch(()=>oe(LoadingStatusesEnum.ERROR))},[K]),{status:ne,prompts:Ae,schema:ce,isLoading:ne===LoadingStatusesEnum.INITIAL||ne===LoadingStatusesEnum.LOADING}}const PromptsModal=({activeSession:K,close:J,create:ne})=>{const oe=useSelector$1(selectActiveDataset$1),{t:ce}=useTranslation(),[ue,Ae]=reactExports.useState(K==null?void 0:K.Profile),{status:pe,schema:xe,prompts:me,isLoading:ge}=usePrompts("Profile",oe),ye=reactExports.useCallback(Te=>Te.Name,[]),Se=reactExports.useMemo(()=>isArray$6(xe.Elements)?mapMetadataToGridColumnsHelper(xe.Elements):[],[xe]);return jsxRuntimeExports.jsxs(Ho,{open:!0,defaultHeight:500,defaultWidth:600,title:ce("chat.newChat"),onClose:J,children:[jsxRuntimeExports.jsx(Ho.Body,{children:jsxRuntimeExports.jsx(PF,{loading:ge,children:jsxRuntimeExports.jsx(Grid,{className:"promptsModal__grid",status:pe,columns:Se,data:me,getRowId:ye,selectedRowId:ue,onChangeSelectedRowId:Ae})})}),jsxRuntimeExports.jsx(Ho.Footer,{testId:"prompts",okText:ce("buttons.agree"),onOk:()=>ne(ue),okProps:{disabled:!ue},cancelText:ce("buttons.cancel"),onCancel:J})]})};function useLatest(K){const J=reactExports.useRef(K);return reactExports.useEffect(()=>{J.current=K}),J}const getTimeoutDelay=K=>{const J=Date.now();let ne;return J-K<2e3?ne=500:J-K<5e3?ne=1e3:ne=5e3,ne};function useLocalStorage(K,J){const[ne,oe]=reactExports.useState(()=>{try{const ue=localStorage.getItem(K);return ue?JSON.parse(ue):J}catch(ue){return console.warn(`Error reading localStorage key ${K}:`,ue),J}});return[ne,ue=>{try{const Ae=ue instanceof Function?ue(ne):ue;oe(Ae);const pe=JSON.stringify(Ae);localStorage.setItem(K,pe)}catch(Ae){console.warn(`Error setting localStorage key ${K}:`,Ae)}}]}function useMessage(K=""){const{openTabParams:J}=useAppContext(),[ne,oe]=useLocalStorage("chat-message",K);reactExports.useEffect(()=>{J.chatAbout.getParams(ue=>{ue&&oe("")})},[]);const ce=reactExports.useCallback(()=>{oe(K)},[K]);return{message:ne,onChange:oe,onClear:ce}}const isQuestion=K=>isObject$9(K)&&"TextInput"in K,isAnswer=K=>isObject$9(K)&&"TextOutput"in K,mapResponseToMessageGroup=K=>{const J=K[0].Result||[],ne=[];for(let oe=0;oe<J.length;oe+=2){const[ce,ue]=J.slice(oe,oe+2);let Ae={id:v4(),status:MessageGroupStatus.INITIAL};isQuestion(ce)&&(Ae={...Ae,question:{id:v4(),text:ce.TextInput,files:Array.isArray(ce.Files)?ce.Files.map(pe=>{const xe=FileStatusMap[pe.Status]||FileStatusType.NONE;return{status:xe,filename:pe.FileNameWithExt,isSaved:!0,savedStatus:xe}}):[]}}),isAnswer(ue)&&(Ae={...Ae,answer:{id:v4(),text:ue.TextOutput,files:[]}}),ne.push(Ae)}return ne},loadHistoryRequest=({key:K,table:J,dataset:ne,chatKey:oe,userName:ce})=>handlerApi.handlerRun({Keys:[K],Type:J,Method:"LoadChatHistory",Arguments:{CurrentChat:oe},Dataset:ne,userName:ce}).then(mapResponseToMessageGroup);function useMessages(){const[K,J]=reactExports.useState([]),ne=reactExports.useCallback(ge=>loadHistoryRequest(ge).then(ye=>J(ye)),[]),oe=reactExports.useCallback(()=>{const ge=v4();return J(ye=>[...ye,{id:ge,status:MessageGroupStatus.INITIAL}]),ge},[]),ce=reactExports.useCallback((ge,ye=[])=>({id:v4(),text:ge,files:ye}),[]),ue=reactExports.useCallback((ge,ye)=>{J(Se=>Se.map(Te=>Te.id===ge?{...Te,...ye}:Te))},[]),Ae=reactExports.useCallback((ge,ye,Se=[])=>{ue(ge,{status:MessageGroupStatus.LOADING,question:ce(ye,Se)})},[ue,ce]),pe=reactExports.useCallback((ge,ye)=>{ue(ge,{status:MessageGroupStatus.SUCCESS,answer:ce(ye)})},[ce,ue]),xe=reactExports.useCallback((ge,ye)=>{ue(ge,{status:ye})},[ue]),me=reactExports.useCallback(()=>{J([])},[]);return{messageGroups:K,createGroup:oe,addQuestion:Ae,addAnswer:pe,updateStatus:xe,onClear:me,load:ne}}const fileToBase64=K=>new Promise((J,ne)=>{const oe=new FileReader;oe.readAsDataURL(K),oe.onload=()=>J(window.btoa(oe.result)),oe.onerror=ne}),mapResponseFile=K=>{const J=FileStatusType.NONE;return{isSaved:!0,filename:K.FileNameWithExt,savedStatus:J,status:J}},loadChatFilesRequest=({key:K,dataset:J,table:ne,chatKey:oe,userName:ce})=>handlerApi.handlerRun({Keys:[K],Type:ne,Method:"LoadChatFiles",Arguments:{CurrentChat:oe},Dataset:J,userName:ce}).then(ue=>{const Ae=ue[0].Result;return(Ae==null?void 0:Ae.map(mapResponseFile))||[]});function useFiles(){const[K,J]=reactExports.useState([]),[ne,oe]=reactExports.useState([]),ce=reactExports.useCallback(Te=>loadChatFilesRequest(Te).then(Ne=>{oe(Ne),J([])}),[]),ue=reactExports.useCallback(Te=>{J(Ne=>Ne.filter($e=>$e.name!==Te)),oe(Ne=>Ne.reduce(($e,ke)=>(ke.filename===Te?ke.isSaved&&$e.push({...ke,status:FileStatusType.REMOVED,savedStatus:FileStatusType.REMOVED}):$e.push(ke),$e),[]))},[]),Ae=reactExports.useCallback(Te=>{J(Ne=>{const $e=Te.map(ke=>ke.name);return Ne.filter(ke=>$e.indexOf(ke.name)===-1).concat(Te)}),oe(Ne=>{const $e=[],ke=Te.map(je=>je.name);for(let je=0;je<Ne.length;je+=1){const Ke=Ne[je];if(ke.includes(Ke.filename)){$e.push({...Ke,status:FileStatusType.UPDATED});const Ye=ke.indexOf(Ke.filename);ke.splice(Ye,1)}else $e.push(Ke)}return $e.concat(ke.map(je=>({filename:je,status:FileStatusType.ADDED,savedStatus:FileStatusType.NONE,isSaved:!1})))})},[]),pe=reactExports.useCallback(()=>J([]),[]),xe=reactExports.useCallback(()=>K.map(Te=>Te.name),[K]),me=reactExports.useCallback(()=>{const Te=K.map(Ne=>Ne.name);return ne.filter(Ne=>Te.includes(Ne.filename)||Ne.status===FileStatusType.REMOVED)},[ne,K]),ge=reactExports.useCallback(()=>{pe(),oe(Te=>Te.filter(Ne=>Ne.status!==FileStatusType.REMOVED).map(Ne=>({...Ne,status:FileStatusType.NONE,savedStatus:FileStatusType.NONE,isSaved:!0})))},[pe]),ye=reactExports.useCallback(()=>{const Te=K.map(fileToBase64);return Promise.all(Te)},[K]),Se=reactExports.useCallback(()=>ne.filter(Te=>Te.status===FileStatusType.REMOVED).map(Te=>Te.filename),[ne]);return{files:ne,filesWithContent:K,onChange:Ae,onReset:pe,getFileNames:xe,getUnsavedFiles:me,getFilesAsBase64List:ye,onRemove:ue,loadChatFiles:ce,getRemovedFileNames:Se,onSend:ge}}const mapRawData=K=>K[0].Result.map(ne=>({ChatKey:ne.ChatKey,Created:ne.Created,IsEncrypted:ne.IsEncrypted,Profile:ne.Profile,Name:ne.Name})),getChatSessionsRequest=({key:K,table:J,dataset:ne,userName:oe})=>handlerApi.handlerRun({Keys:[K],Type:J,Method:"GetChatSessions",Dataset:ne,userName:oe}).then(mapRawData),switchChatSessionRequest=({key:K,table:J,dataset:ne,session:oe,activeChat:ce,userName:ue})=>handlerApi.handlerRun({Keys:[K],Type:J,Method:"SwitchChatSession",Arguments:{CurrentChat:oe.ChatKey,ActiveChat:ce},Dataset:ne,userName:ue}),deleteChatSessionsRequest=({key:K,table:J,sessionChatKeys:ne,dataset:oe,userName:ce})=>handlerApi.handlerRun({Keys:[K],Type:J,Method:"DeleteChatSessions",Arguments:{CurrentChats:ne},Dataset:oe,userName:ce});function useSessions(){const[K,J]=reactExports.useState([]),ne=reactExports.useCallback(()=>{J([])},[]),oe=reactExports.useCallback(Ae=>getChatSessionsRequest(Ae).then(pe=>(J(pe),pe)).catch(()=>(ne(),[])),[ne]),ce=reactExports.useCallback(switchChatSessionRequest,[]),ue=reactExports.useCallback(Ae=>{const{sessions:pe,...xe}=Ae,me=pe.map(ge=>ge.ChatKey);return deleteChatSessionsRequest({...xe,sessionChatKeys:me}).then(()=>{const ge=new Set(me),ye=K.filter(Se=>!ge.has(Se.ChatKey));return J(ye),ye})},[K]);return{sessions:K,load:oe,select:ce,reset:ne,deleteMany:ue}}const getActiveChatSessionRequest=({key:K,table:J,dataset:ne,userName:oe})=>handlerApi.handlerRun({Keys:[K],Type:J,Method:"GetActiveChatSession",Dataset:ne,userName:oe});function useActiveChat(){const[K,J]=reactExports.useState(),[ne,oe]=reactExports.useState(ChatType.INTERNAL),ce=reactExports.useMemo(()=>ne===ChatType.ENCRYPTED,[ne]),ue=reactExports.useMemo(()=>ne===ChatType.INTERNAL,[ne]),Ae=reactExports.useMemo(()=>ne===ChatType.PRIVATE,[ne]),pe=reactExports.useCallback(me=>oe(me),[]),xe=reactExports.useCallback(me=>getActiveChatSessionRequest(me).then(ge=>{const ye=ge[0].Result;return ye?(J(ye),pe(ye.IsEncrypted?ChatType.PRIVATE:ChatType.INTERNAL),ye):null}).catch(()=>J(void 0)),[pe]);return{activeChat:K,chatType:ne,isEncryptedType:ce,isInternalType:ue,isPrivateType:Ae,change:pe,getActiveChat:xe,setActiveChat:J}}const getKeyRequest=({type:K,dataset:J})=>storageApi.select({params:{type:K,dataset:J,table_format:!0,limit:1}}).then(({data:ne})=>{const{_key:oe}=ne[0];return oe}),sendPromptRequest=({dataset:K,fileNames:J,fileContentBytes:ne,removedFileNames:oe,key:ce,table:ue,prompt:Ae,chatKey:pe,userName:xe})=>handlerApi.runTasks({keys:[ce],type:ue,dataset:K,method:"SendPrompt",args:{Prompt:Ae,CurrentChat:pe,RemovedFileNames:oe,FileNames:J,FileContentBytes:ne},userName:xe}),startNewChatRequest=({key:K,dataset:J,table:ne,isEncrypted:oe=!1,promptId:ce,activeChat:ue,userName:Ae})=>handlerApi.handlerRun({Keys:[K],Type:ne,Method:"StartNewChat",Arguments:{IsEncrypted:oe,ActiveChat:ue,...ce&&{Profile:{_t:"ProfileKey",Name:ce}}},Dataset:J,userName:Ae}),isExistsEntityRequest=({type:K,key:J,dataset:ne})=>storageApi.getRecord({type:K,key:J,dataset:ne}).then(({data:oe})=>!!oe).catch(()=>!1),selectActiveDataset=K=>K.DatasetDataSliceReducer.datasetData.activeDatasetName;function useHistory({chatKey:K,isLoading:J,activeTypeTab:ne,onChangeLoading:oe,loadViewers:ce,resetViewers:ue}){const{activeTab:Ae}=useTabParams(),pe=useSelector$1(selectUser),xe=useDispatch$1(),me=useSelector$1(selectActiveEnvironment),ge=useSelector$1(selectActiveDataset),ye=useLatest(ne),Se=reactExports.useRef(new AbortController),[Te,Ne]=reactExports.useState(!1),{openTabParams:$e}=useAppContext(),[ke,je]=reactExports.useState(null),Ke=reactExports.useRef(null),[Ye,ze]=reactExports.useState(null),{activeChat:Xe,chatType:Je,isPrivateType:rt,getActiveChat:Ze,setActiveChat:et}=useActiveChat(),{sessions:nt,load:Ge,select:ve,deleteMany:Be}=useSessions(),{files:Re,onChange:Ie,getFilesAsBase64List:Fe,getUnsavedFiles:qe,getRemovedFileNames:We,onRemove:Ue,loadChatFiles:_e,onSend:Qe,getFileNames:tt}=useFiles(),{messageGroups:it,addQuestion:at,addAnswer:ot,createGroup:lt,updateStatus:st,onClear:ut,load:ft}=useMessages(),{message:dt,onChange:Bt,onClear:pt}=useMessage(),mt=reactExports.useRef(null),bt=(pe==null?void 0:pe.username)??"",xt=reactExports.useCallback((Tt,or)=>{const Mt=mt.current;if(Mt===null||isNullable(me)||isNullable(ge))throw new Error('Cannot execute request because one of these parameters is empty: "key", "dataset" or "environment"');oe(!0),startNewChatRequest({key:Mt,dataset:ge,promptId:or,activeChat:Xe==null?void 0:Xe.ChatKey,table:ye.current,isEncrypted:Tt===ChatType.PRIVATE,userName:bt}).then(kt=>{const ur=kt[0].Result;pt(),ut(),ue(),et(ur);const $t={key:Mt,dataset:ge,chatKey:ur.ChatKey,table:ye.current,userName:bt};return Promise.all([ce(ur.ChatKey),_e($t).then(()=>{}),ft($t),Ge($t)]).then(()=>{ke&&(St(ke.data),$e.chatAbout.clearParams(),je(null))})}).finally(()=>oe(!1))},[Xe,me,ge,oe,ye,pt,ut,ue,_e,ce,ft,Ge,ke]),yt=({data:Tt,groupId:or,dataset:Mt,key:kt,chatKey:ur})=>{const $t={dataset:Mt,taskRunIds:[Tt[0].TaskRunId]};handlerApi.runTasksResult($t).then(jt=>{const nr=jt[0].Result;ot(or,nr),Qe();const Ot={key:kt,dataset:Mt,chatKey:ur,table:ye.current,userName:bt},Lt=[ce(ur),_e(Ot)];return nt.find(lr=>!lr.Name)&&Lt.push(Ge(Ot)),Promise.all(Lt)}).catch(()=>{st(or,MessageGroupStatus.ERROR)}).finally(()=>{oe(!1),Ne(!1)})},It=(Tt,or,Mt,kt,ur)=>{const $t=Date.now();let jt;const nr=()=>{handlerApi.runTasksStatus({dataset:or,taskRunIds:[Tt[0].TaskRunId]}).then(Ot=>{clearTimeout(jt),Ot[0].StatusCode===RunHandlerStatusCodeEnum.Completed?yt({data:Ot,dataset:or,groupId:Mt,key:kt,chatKey:ur}):jt=setTimeout(()=>nr(),getTimeoutDelay($t))}).catch(()=>st(Mt,MessageGroupStatus.ERROR))};nr()},ht=reactExports.useCallback(Tt=>{const or=mt.current;if(or===null||isNullable(me)||isNullable(ge)||isNullable(Xe))return;const Mt=(Tt||dt).trim(),kt=qe();if(Mt.length===0&&kt.length===0||J)return;const ur=lt();at(ur,Mt,kt),pt(),oe(!0),Ne(!0),Se.current=new AbortController,Fe().then($t=>sendPromptRequest({dataset:ge,key:or,chatKey:Xe.ChatKey,fileNames:tt(),fileContentBytes:$t,removedFileNames:We(),table:ye.current,prompt:Mt,userName:bt})).then($t=>{It($t,ge,ur,or,Xe.ChatKey)})},[Xe,ge,me,dt,J,qe,tt,lt,at,pt,oe,Fe,ye,ot,ce,st,Qe,We]),gt=reactExports.useCallback(()=>Se.current.abort(),[]),Pt=reactExports.useCallback(Tt=>{if(Tt.ChatKey===(Xe==null?void 0:Xe.ChatKey))return;const or=mt.current;if(or===null||isNullable(me)||isNullable(ge))throw new Error('Cannot execute request because one of these parameters is empty: "key", "dataset" or "environment"');oe(!0),ve({key:or,table:ye.current,dataset:ge,activeChat:Xe==null?void 0:Xe.ChatKey,session:Tt,userName:bt}).then(Mt=>{const kt=Mt[0].Result;et(kt),pt();const ur={key:or,chatKey:kt.ChatKey,table:ye.current,dataset:ge,userName:bt};return Promise.all([Ge(ur),_e(ur),ft(ur),ce(kt.ChatKey)])}).finally(()=>oe(!1))},[Xe==null?void 0:Xe.ChatKey,ge,me,_e,ft,ce,oe,ye,ve]),wt=reactExports.useCallback(Tt=>{const or=mt.current;if(or===null||isNullable(ge)||isNullable(me))throw new Error('Cannot execute request because one of these parameters is empty: "key", "dataset" or "environment"');oe(!0),Be({key:or,dataset:ge,table:ye.current,sessions:Tt,userName:bt}).then(Mt=>{if(Mt.length===0){xt(ChatType.INTERNAL);return}if(!Mt.some(ur=>ur.ChatKey===(Xe==null?void 0:Xe.ChatKey))){const ur=Mt[0];Pt(ur)}}).finally(()=>oe(!1))},[ge,me,oe,Be,ye,xt,Xe==null?void 0:Xe.ChatKey,Pt]),St=Tt=>{Tt.attachmentType===ContentHandlerAttachmentEnum.MessageInput?(Bt(Tt.content),ht(Tt.content)):Ie([Tt.content])},Zt=reactExports.useCallback(Tt=>{if(!Ke.current)throw new Error("Run missed required params: 'type' | 'key'.");oe(!0),contentHandlerApi.runContentHandler({handler:Tt.handler,key:Ke.current.key,type:Ke.current.type,dataset:ge,environment:me}).then(St).finally(()=>{oe(!1)})},[ge,me]),Ct=reactExports.useCallback(Tt=>{oe(!0),contentHandlerApi.getContentHandlers({type:Tt.type,key:Tt.recordKey,dataset:ge,environment:me}).then(or=>{if(!or.isExist)throw new Error("The record doesn't have any handlers.");return Ke.current={type:Tt.type,key:Tt.recordKey},or.isMultiChoice?(ze(or),Promise.resolve()):Zt({handler:or.handlers[0]})}).finally(()=>oe(!1))},[ge,me,ht]),Rt=()=>{ze(null),Ke.current=null},dr=async()=>{if(K&&ge){if(!await isExistsEntityRequest({dataset:ge,key:K,type:ye.current})&&(Ae!=null&&Ae.id))throw xe(closeTab({id:Ae.id})),new Error("Can not find the entity");return K}return getKeyRequest({type:ye.current,dataset:ge})},Dt=async()=>{if(isNullable(ge)||isNullable(me))throw new Error('Cannot execute request because one of these parameters is empty: "dataset" or "environment"');oe(!0);try{const Tt=await dr();mt.current=Tt,$e.chatAbout.getParams(or=>{or?je(or):Ze({key:Tt,dataset:ge,table:ye.current,userName:bt}).then(Mt=>{if(Mt){const kt={key:Tt,dataset:ge,chatKey:Mt.ChatKey,table:ye.current,userName:bt};return Promise.all([_e(kt),ft(kt),Ge(kt),ce(Mt.ChatKey)])}throw new Error("Cannot load details about the chat without the chat key.")})})}finally{oe(!1)}};return reactExports.useEffect(()=>{Dt()},[K,me,ye,ge]),{getContentByHandler:Zt,contentHandlers:Ye,chatAboutParams:ke,handleClearContentHandlers:Rt,activeChat:Xe,isSending:Te,chatType:Je,isPrivateType:rt,sessions:nt,selectSession:Pt,deleteSelectedSessions:wt,files:Re,onChangeFiles:Ie,onRemoveFile:Ue,message:dt,messageGroups:it,sendMessage:ht,cancelSendMessage:gt,startNewChat:xt,onChangeInput:Bt,getContentByKey:Ct,getUnsavedFiles:qe}}function useCollapsePanels(){const[K,J]=reactExports.useState([50,50]),ne=reactExports.useMemo(()=>K[0],[K]),oe=reactExports.useRef(null),ce=reactExports.useMemo(()=>ne===100,[ne]),ue=reactExports.useCallback(pe=>{if(pe.length===0)return;const[xe,me]=pe;J([xe,me??100-xe])},[]),Ae=reactExports.useCallback(()=>{const pe=oe.current;if(!pe)return;const xe=pe.isCollapsed()?50:0;pe.resize(xe)},[]);return{isMaximized:ce,contentPanelRef:oe,collapseContentPanel:Ae,onChangeSizes:ue}}function useDisclaimer(){const[K,J]=reactExports.useState(!0),[ne,oe]=useLocalStorage(StorageKeyEnum.SHOW_DISCLAIMER_ONCE,!1),ce=reactExports.useMemo(()=>K&&!ne,[K,ne]),ue=reactExports.useCallback(()=>oe(Ae=>!Ae),[oe]);return{isOpen:ce,isOnce:ne,toggleOnce:ue,show:J}}function useTabs(){const K=useSelector$1(selectActiveDataset$1),J=useSelector$1(selectActiveEnvironment),ne=useSelector$1(selectUser),[oe,ce]=reactExports.useState(LoadingStatusesEnum.INITIAL),[ue,Ae]=reactExports.useState(),[pe,xe]=reactExports.useState([]),me=reactExports.useCallback(Te=>Ae(Te),[]),ge=reactExports.useCallback(Te=>xe(Te),[]),ye=reactExports.useCallback((Te=!0)=>{xe([]),Ae(void 0),Te&&ce(LoadingStatusesEnum.INITIAL)},[]),Se=reactExports.useCallback((Te,Ne)=>{ce(LoadingStatusesEnum.LOADING);const $e={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"GetRecordPanels",Keys:[],Arguments:{TypeName:Te,Key:Ne||""},Dataset:K,userName:ne==null?void 0:ne.username};return handlerApi.handlerRun($e).then(ke=>{const je=ke[0].Result,Ke=getViewersTabs(je.filter(ze=>ze.Kind!==(ViewersMetadataType==null?void 0:ViewersMetadataType.PRIMARY_DASHBOARD)));xe(Ke);const Ye=Ke[0];return Ye&&Ae(Ye.key),ce(LoadingStatusesEnum.SUCCESS),{tabs:Ke,activeTab:Ye==null?void 0:Ye.key}}).catch(ke=>(toast.error(ke),ce(LoadingStatusesEnum.ERROR),ye(!1),{tabs:[]}))},[K,J,ye]);return{status:oe,activeTab:ue,tabs:pe,loadTabs:Se,activateTab:me,updateOrderTabs:ge,reset:ye}}function useViewerData(){const K=useSelector$1(selectActiveDataset$1),J=useSelector$1(selectUser),[ne,oe]=reactExports.useState(LoadingStatusesEnum.INITIAL),[ce,ue]=reactExports.useState(),Ae=reactExports.useCallback((xe=!0)=>{ue(void 0),xe&&oe(LoadingStatusesEnum.INITIAL)},[]),pe=reactExports.useCallback((xe,me,ge)=>{oe(LoadingStatusesEnum.LOADING);const ye={Type:HandlerRunTypeEnum.UI_RECORD_UTIL,Method:"LoadRecordPanel",Keys:[],Arguments:{TypeName:me,Key:ge,PanelId:xe},Dataset:K,userName:J==null?void 0:J.username};handlerApi.handlerRun(ye).then(Se=>{const Te=Se[0].Result;ue(Te),oe(LoadingStatusesEnum.SUCCESS)}).catch(()=>{Ae(!1),oe(LoadingStatusesEnum.ERROR)})},[Ae]);return{status:ne,data:ce,loadViewerData:pe,reset:Ae}}function useDashboard({activeType:K}){const J=useLatest(K),ne=useSelector$1(selectActiveDataset$1),oe=useSelector$1(selectActiveEnvironment),ce=reactExports.useRef(),{tabs:ue,status:Ae,activeTab:pe,loadTabs:xe,activateTab:me,updateOrderTabs:ge,reset:ye}=useTabs(),{loadViewerData:Se,data:Te,status:Ne,reset:$e}=useViewerData(),ke=reactExports.useMemo(()=>getViewerTypeHelper(Te),[Te]),je=reactExports.useMemo(()=>isLoading([Ae,Ne]),[Ae,Ne]),Ke=reactExports.useCallback(Xe=>(ce.current=Xe,xe(J.current,Xe).then(({activeTab:Je})=>{Je&&!isNullable(ne)&&Se(Je,J.current,Xe)})),[xe,J,ne,Se,oe]),Ye=reactExports.useCallback(Xe=>{me(Xe),isNullable(ne)||Se(Xe,J.current,ce.current)},[me,ne,Se,oe,J]),ze=reactExports.useCallback(()=>{ye(),$e(),ce.current=void 0},[ye,$e]);return{loading:je,loadingViewerData:isLoading([Ne]),activeTab:pe,tabs:ue,activeViewerType:ke,viewerData:Te,load:Ke,updateOrderTabs:ge,switchTab:Ye,reset:ze}}const Content=reactExports.memo(({currentKey:K,type:J,isLoadingViewers:ne,activeViewerType:oe,tabs:ce,activeTab:ue,viewerData:Ae,switchTab:pe})=>{const xe=useSelector$1(selectFullScreenMode);return jsxRuntimeExports.jsx("div",{className:cx("content",xe&&"content__full-screen-container"),children:jsxRuntimeExports.jsxs("div",{className:"content__container",children:[jsxRuntimeExports.jsx(wF,{activeKey:ue,variant:"card",className:"content__tabs",items:ce,onChange:pe}),jsxRuntimeExports.jsx(PF,{loading:ne,children:jsxRuntimeExports.jsx("div",{className:"content__viewers",children:jsxRuntimeExports.jsx(Viewers,{panelKey:K,panelType:J,activeViewerType:oe,data:Ae.ViewOf},ue)})})]})})});Content.displayName="Content";function isTopic(K){return K==="ChatDashboard"}const container="_container_lwejo_1",styles={container},InteractiveDashboardContainer=({type:K,chatKey:J,className:ne,panelClassname:oe})=>{const ce="Chat",ue=reactExports.useRef(null),{collapseContentPanel:Ae,contentPanelRef:pe,isMaximized:xe,onChangeSizes:me}=useCollapsePanels(),{isOpen:ge,show:ye,isOnce:Se,toggleOnce:Te}=useDisclaimer(),[Ne,$e]=reactExports.useState(!1),[ke,{setTrue:je,setFalse:Ke}]=useBoolean(!1),Ye=reactExports.useMemo(()=>isTopic(K),[K]),[ze,Xe]=reactExports.useState(!1),Je=reactExports.useCallback(wt=>Xe(wt),[]),{loadingViewerData:rt,activeViewerType:Ze,viewerData:et,tabs:nt,activeTab:Ge,switchTab:ve,load:Be,reset:Re}=useDashboard({activeType:ce}),{chatAboutParams:Ie,getContentByHandler:Fe,contentHandlers:qe,handleClearContentHandlers:We,files:Ue,isSending:_e,isPrivateType:Qe,message:tt,messageGroups:it,activeChat:at,sessions:ot,selectSession:lt,deleteSelectedSessions:st,onChangeInput:ut,onChangeFiles:ft,sendMessage:dt,cancelSendMessage:Bt,startNewChat:pt,onRemoveFile:mt,getContentByKey:bt,getUnsavedFiles:xt}=useHistory({chatKey:J,activeTypeTab:K,isLoading:ze,onChangeLoading:Je,loadViewers:Be,resetViewers:Re});reactExports.useEffect(()=>{Ie&&ht(ChatType.INTERNAL,!0)},[Ie]);const yt=reactExports.useCallback(wt=>{var St;if(!ue.current)throw new Error("Cannot start new chat without type");$e(!1),pt((St=ue.current)==null?void 0:St.type,wt),ue.current=null},[pt]),It=reactExports.useCallback(()=>{var wt;ye(!1),ue.current&&((wt=ue.current)!=null&&wt.isProfile?$e(!0):yt(void 0))},[ye,yt]),ht=reactExports.useCallback((wt,St)=>{ue.current={type:wt,isProfile:St},ye(!0),Se&&(St?$e(!0):yt(void 0))},[Se,yt,ye]),gt=reactExports.useMemo(()=>nt.length>0,[nt.length]),Pt=()=>{$e(!1),Ie&&Ie.handleMoveToPreviousTab()};return jsxRuntimeExports.jsxs("div",{className:cx(styles.container,ne),children:[jsxRuntimeExports.jsx(DisclaimerModal,{isOpen:ge,isOnce:Se,toggleOnce:Te,agree:It}),Ne&&jsxRuntimeExports.jsx(PromptsModal,{activeSession:at,create:yt,close:Pt}),ke&&jsxRuntimeExports.jsx(GenericModal,{isOpen:ke,onSubmit:bt,onClose:Ke}),(qe==null?void 0:qe.isMultiChoice)&&jsxRuntimeExports.jsx(ContentHandlersModal,{handlers:qe.handlers,isOpen:qe.isMultiChoice,onClose:We,onApply:Fe}),jsxRuntimeExports.jsxs(Lj,{direction:"horizontal",onLayout:me,children:[jsxRuntimeExports.jsx(Ij,{order:1,minSize:20,className:oe,children:jsxRuntimeExports.jsx(History,{isShowMaximizedButton:gt,isMaximized:xe,isTopic:Ye,files:Ue,isSending:_e,activeSession:at,isPrivateType:Qe,isLoading:ze,sessions:ot,message:tt,messageGroups:it,onChangeInput:ut,onSendMessage:dt,cancelSendMessage:Bt,startNewChat:ht,selectSession:lt,deleteSelectedSessions:st,onChangeFiles:ft,onRemoveFile:mt,toggleMaximizedView:Ae,openKeyDialog:je,getUnsavedFiles:xt})}),nt.length>0&&et&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx($F,{}),jsxRuntimeExports.jsx(Ij,{order:2,collapsible:!0,ref:pe,minSize:0,className:oe,children:jsxRuntimeExports.jsx(Content,{currentKey:J||(at==null?void 0:at.ChatKey),type:ce,activeViewerType:Ze,activeTab:Ge,tabs:nt,switchTab:ve,viewerData:et,isLoadingViewers:rt})})]})]})]})},coreComponentsDictionary={Header,Main,EditorContentInner,TypeToolbarInner,InteractiveDashboardContainer,NoGridDataInner},useComponentsMapper=()=>{const K=useSelector$1(selectApplicationTheme);return{...coreComponentsDictionary,...overrideComponentsDictionary[K]}},AppInit=({children:K})=>{const{environment:J,activeTab:ne}=useParams(),oe=useNavigate(),ce=useAppDispatch(),ue=useSelector$1(selectActiveTab),Ae=useSelector$1(selectActiveEnvironment),{schemaTypes:pe}=useSelector$1(selectSchemaTypes),xe=useSelector$1(selectUser),me=useRequest(storageApi.getAppState),ge=useSelector$1(selectSchemaVersion),ye=useSelector$1(selectMetaData);reactExports.useEffect(()=>{xe!=null&&xe.username&&pe.Tables.length&&me.fetch(xe.id).then(Te=>ce(setAppState({...Te,availableTypes:pe.Tables,isBasicType:ye.data.DisplayKind===SchemaDisplayKind.Basic})))},[xe==null?void 0:xe.username,pe.Tables]),reactExports.useEffect(()=>{ce(setActiveEnvironment(J||"")),ce(setActiveTab({id:ne||""}))},[]),reactExports.useEffect(()=>{if(Ae&&ue){oe(routes.app.build({environment:Ae,activeTab:ue}));return}Ae&&oe(routes.app.build({environment:Ae}))},[Ae,ue]);const Se=Te=>parseInt(Te.split(".")[0],10);return reactExports.useEffect(()=>{!ge||!env.schemaVersion||Se(ge)!==Se(env.schemaVersion)&&oe(routes.versionError.path)},[ge,env.schemaVersion]),me.error?jsxRuntimeExports.jsx(Navigate,{to:routes.serverError.path}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:K})},VersionWarning=()=>{const K=useSelector$1(selectSchemaVersion);return jsxRuntimeExports.jsxs("div",{className:"schema-version-warning",children:[jsxRuntimeExports.jsx(M_,{}),t$5("versionWarning.minor",{currentVersion:env.schemaVersion,lastVersion:K})]})},parseVersion=K=>K.split(".").map(J=>parseInt(J,10)),AppPage=()=>{const K=useSelector$1(selectApplicationName),{Main:J}=useComponentsMapper(),ne=useSelector$1(selectActiveTab),oe=useSelector$1(selectSchemaVersion);reactExports.useEffect(()=>{K&&(document.title=K)},[K]);const ce=()=>{if(!oe||!env.schemaVersion)return!1;const[ue,Ae]=parseVersion(oe),[pe,xe]=parseVersion(env.schemaVersion);return ue===pe&&Ae!==xe};return jsxRuntimeExports.jsx(AppInit,{children:jsxRuntimeExports.jsxs(AppLayout,{children:[ce()&&jsxRuntimeExports.jsx(VersionWarning,{}),jsxRuntimeExports.jsx(AppContext$1,{children:jsxRuntimeExports.jsxs(DndContext,{activeTabId:ne,children:[jsxRuntimeExports.jsx(Header,{isVersionWarning:ce()}),jsxRuntimeExports.jsx(J,{})]})})]})})},LoginPageError=({children:K})=>K?jsxRuntimeExports.jsx("div",{className:"login-page-error",children:K}):null,LoginPageForm=({provider:K,isDevForm:J=!1})=>{const{t:ne}=useTranslation(),{fetch:oe,isLoading:ce}=useRequest(authApi.login),[ue,Ae]=reactExports.useState(""),pe=async({username:ge,password:ye})=>{var Se,Te;try{await oe({type_id:K.id,username:ge,password:ye}),await authService.login(K.id)}catch(Ne){let $e="";if(axios.isAxiosError(Ne)){let ke="";try{ke=JSON.parse((Se=Ne==null?void 0:Ne.response)==null?void 0:Se.data).UserMessage}catch{ke=((Te=Ne==null?void 0:Ne.response)==null?void 0:Te.data)||Ne}$e=getErrorMessage(ke)}Ae($e)}},xe=()=>{ue&&Ae("")},me=ge=>J?ge:`new-${ge}`;return jsxRuntimeExports.jsxs(IF,{className:"login-page-form",autoComplete:"off",layout:"vertical",requiredMark:!1,onFinish:pe,onValuesChange:xe,children:[jsxRuntimeExports.jsx(IF.Item,{className:"login-page-form__item",label:ne("auth.login.username.placeholder"),name:"username",rules:[{required:!0,message:""}],help:null,children:jsxRuntimeExports.jsx(Ml,{variant:"outlined",autoComplete:me("username")})}),jsxRuntimeExports.jsx(IF.Item,{className:"login-page-form__item",label:ne("auth.login.password.placeholder"),name:"password",rules:[{required:!0,message:""}],help:null,children:jsxRuntimeExports.jsx(Ml,{inputType:"password",variant:"outlined",autoComplete:me("password")})}),jsxRuntimeExports.jsx(LoginPageError,{children:ue}),jsxRuntimeExports.jsx(IF.Item,{className:"login-page-form__item",children:jsxRuntimeExports.jsx(rl,{block:!0,htmlType:"submit",disabled:ce,children:ne("auth.login.actions.login")})})]})},LoginPageRedirectProvider=({provider:K,setActiveADProvider:J})=>{const{title:ne,logo:oe,id:ce,isNavigate:ue}=K,Ae=()=>{ue?(J(K),externalStorage.setProviderId(ce)):authApi.loginRedirect(ce).then(pe=>{externalStorage.setProviderId(ce),globalThis.location.href=pe.redirect_url})};return jsxRuntimeExports.jsxs("div",{"aria-hidden":"true",className:"login-page-redirect-provider",onClick:Ae,children:[jsxRuntimeExports.jsx("div",{className:"login-page-redirect-provider__logo",children:oe}),jsxRuntimeExports.jsx("div",{className:"login-page-redirect-provider__title",children:ne}),jsxRuntimeExports.jsx("div",{className:"login-page-redirect-provider__after",children:jsxRuntimeExports.jsx(gT$1,{})})]})},LoginPageRedirectProviders=({title:K,providers:J,setActiveADProvider:ne})=>J.length?jsxRuntimeExports.jsxs("div",{className:"login-page-redirect-providers",children:[K&&jsxRuntimeExports.jsx("div",{className:"login-page-redirect-providers__title",children:jsxRuntimeExports.jsx("div",{className:"login-page-redirect-providers__title-text",children:K})}),jsxRuntimeExports.jsx("div",{className:"login-page-redirect-providers__list",children:J==null?void 0:J.map(oe=>jsxRuntimeExports.jsx(LoginPageRedirectProvider,{provider:oe,setActiveADProvider:ne},oe.id))})]}):null,LoginProviders=({developProvider:K,redirectProviders:J,setActiveADProvider:ne})=>{const{t:oe}=useTranslation();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[K&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"login-providers__title",children:oe("auth.login.dev")}),jsxRuntimeExports.jsx(LoginPageForm,{provider:K,isDevForm:!0})]}),jsxRuntimeExports.jsx(LoginPageRedirectProviders,{providers:J,title:K?oe("auth.login.divider"):"",setActiveADProvider:ne})]})},LoginADProvider=({provider:K,setActiveADProvider:J})=>{const{t:ne}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"login-ad-provider",children:[jsxRuntimeExports.jsx(rl,{type:"secondary",variant:"ghost",className:"login-ad-provider__button",iconBefore:jsxRuntimeExports.jsx(Ck,{}),onClick:()=>J(null),children:ne("buttons.back")}),jsxRuntimeExports.jsxs("div",{className:"login-ad-provider__title",children:[K.logo,K.title]}),jsxRuntimeExports.jsx(LoginPageForm,{provider:K})]})},LoginPage=()=>{useTranslation();const K=useSelector$1(selectProviders),[J,ne]=reactExports.useState(null),oe=reactExports.useMemo(()=>createDevelopProvider(K),[K]),ce=reactExports.useMemo(()=>K.reduce((ue,Ae)=>((Ae.Kind===AuthKindEnum.ActiveDirectory||Ae.LoginStrategy===AuthStrategyEnum.redirect)&&ue.push(createRedirectProvider(Ae)),ue),[])||[],[K]);return jsxRuntimeExports.jsx("div",{className:"login-page",children:K.length!==0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"login-page__logo",children:jsxRuntimeExports.jsx(zA,{size:"Full"})}),jsxRuntimeExports.jsx("div",{className:"login-page__content",children:J?jsxRuntimeExports.jsx(LoginADProvider,{provider:J,setActiveADProvider:ne}):jsxRuntimeExports.jsx(LoginProviders,{developProvider:oe,redirectProviders:ce,setActiveADProvider:ne})})]})})},createDevelopProvider=K=>{const J=K==null?void 0:K.find(ne=>ne.Kind===AuthKindEnum.Develop);return J?{id:J.Name||""}:null},createRedirectProvider=K=>{const{Name:J,Label:ne,Kind:oe}=K,ce={[AuthKindNamesEnum.Okta]:jsxRuntimeExports.jsx(WA,{}),[AuthKindNamesEnum.Kinde]:jsxRuntimeExports.jsx(ZA,{}),[AuthKindEnum.ActiveDirectory]:jsxRuntimeExports.jsx(rF,{})};return{id:J,title:ne,logo:ce[oe===AuthKindEnum.ActiveDirectory?oe:ne]||null,isNavigate:oe===AuthKindEnum.ActiveDirectory}},ForbiddenPage=()=>{const{t:K}=useTranslation();return jsxRuntimeExports.jsx("div",{className:"forbidden-page",children:jsxRuntimeExports.jsx("p",{children:K("shared.somethingWentWrong")})})},ServerErrorPage=()=>{const{t:K}=useTranslation(),J=useNavigate();return jsxRuntimeExports.jsx(ErrorLayout,{title:K("shared.pleaseReloadPage"),children:jsxRuntimeExports.jsx(rl,{iconBefore:jsxRuntimeExports.jsx(Pk,{}),onClick:()=>J(routes.root.path),children:K("shared.reloadPage")})})},ServerUnavailablePage=()=>{const{t:K}=useTranslation(),J=useNavigate();reactExports.useEffect(()=>{ce()},[]);const ne=(ue,Ae)=>{setTimeout(()=>Ae(),getTimeoutDelay(ue))},oe=(ue,Ae)=>{supportApi.getHealth().then(()=>J(routes.root.path)).catch(()=>{Ae(()=>oe(ue,Ae))})},ce=()=>{const ue=Date.now();oe(ue,pe=>{ne(ue,pe)})};return jsxRuntimeExports.jsx(AppFallbackSkeleton,{renderContent:()=>jsxRuntimeExports.jsx("div",{className:"server-unavailable-page",children:jsxRuntimeExports.jsxs("div",{className:"server-unavailable-page__container",children:[jsxRuntimeExports.jsx(AT,{className:"server-unavailable-page__icon"}),jsxRuntimeExports.jsx("div",{className:"server-unavailable-page__title",children:K("serverUnavailablePage.title")}),jsxRuntimeExports.jsx("div",{className:"server-unavailable-page__subtitle",children:K("serverUnavailablePage.subtitle")}),jsxRuntimeExports.jsx("div",{className:"server-unavailable-page__loader-title",children:K("serverUnavailablePage.loaderTitle")}),jsxRuntimeExports.jsx("div",{className:"server-unavailable-page__loader",children:jsxRuntimeExports.jsx(NF,{})})]})})})},SecureGuard=({children:K})=>{const J=useSelector$1(selectIsAuthenticated),ne=useSelector$1(selectIsLogoutLink);if(J)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:K});if(!ne)return jsxRuntimeExports.jsx(Navigate,{to:routes.login.path})},LoginCallbackPage=()=>{const[K]=useSearchParams(),J=useNavigate(),ne=K.get("one_time_token"),oe=K.get("provider_id"),ce=async()=>{if(!oe||!ne)return J(routes.login.path);try{await authApi.loginCallback(ne,oe),await authService.login(oe)}catch{J(routes.login.path)}};return reactExports.useEffect(()=>{ce()},[]),null},AuthGuard=({children:K})=>{const J=useSelector$1(selectIsAuthenticated);return useSelector$1(selectIsLogoutLink)&&dispatch$1(setIsLogoutLink(!1)),J?jsxRuntimeExports.jsx(Navigate,{to:routes.root.path}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:K})},NotFound=()=>{const K=useNavigate();return jsxRuntimeExports.jsxs("div",{className:"server-error-page",children:[jsxRuntimeExports.jsx("h1",{children:"404"}),jsxRuntimeExports.jsx(rl,{onClick:()=>K(routes.root.path),children:"Home page"})]})},VersionErrorPage=()=>{const{t:K}=useTranslation(),J=useSelector$1(selectSchemaVersion);return jsxRuntimeExports.jsx(ErrorLayout,{title:K("versionWarning.majorTitle"),subTitle:K("versionWarning.majorSubtitle",{currentVersion:env.schemaVersion,lastVersion:J})})},router=createBrowserRouter([{element:jsxRuntimeExports.jsx(BaseLayout,{}),children:[{path:routes.root.path,element:jsxRuntimeExports.jsx(SecureGuard,{children:jsxRuntimeExports.jsx(AppPage,{})}),children:[{path:routes.app.path,element:jsxRuntimeExports.jsx(SecureGuard,{children:jsxRuntimeExports.jsx(AppPage,{})})}]},{path:routes.login.path,element:jsxRuntimeExports.jsx(AuthGuard,{children:jsxRuntimeExports.jsx(LoginPage,{})})},{path:routes.loginCallback.path,element:jsxRuntimeExports.jsx(AuthGuard,{children:jsxRuntimeExports.jsx(LoginCallbackPage,{})})},{path:routes.forbidden.path,element:jsxRuntimeExports.jsx(ForbiddenPage,{})},{path:routes.serverError.path,element:jsxRuntimeExports.jsx(ServerErrorPage,{})},{path:routes.serverUnavailable.path,element:jsxRuntimeExports.jsx(ServerUnavailablePage,{})},{path:routes.notFound.path,element:jsxRuntimeExports.jsx(NotFound,{})},{path:routes.versionError.path,element:jsxRuntimeExports.jsx(VersionErrorPage,{})},{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:routes.notFound.path})}]}],{basename:env.baseName});var warn$1={};Object.defineProperty(warn$1,"__esModule",{value:!0});var warn=function K(J){console.warn("[react-gtm]",J)};warn$1.default=warn;var _warn=warn$1,_warn2=_interopRequireDefault$2(_warn);function _interopRequireDefault$2(K){return K&&K.__esModule?K:{default:K}}var Snippets={tags:function K(J){var ne=J.id,oe=J.events,ce=J.dataLayer,ue=J.dataLayerName,Ae=J.preview,pe=J.auth,xe="&gtm_auth="+pe,me="&gtm_preview="+Ae;ne||(0,_warn2.default)("GTM Id is required");var ge=`
      <iframe src="https://www.googletagmanager.com/ns.html?id=`+ne+xe+me+`&gtm_cookies_win=x"
        height="0" width="0" style="display:none;visibility:hidden" id="tag-manager"></iframe>`,ye=`
      (function(w,d,s,l,i){w[l]=w[l]||[];
        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', `+JSON.stringify(oe).slice(1,-1)+`});
        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'`+xe+me+`&gtm_cookies_win=x';
        f.parentNode.insertBefore(j,f);
      })(window,document,'script','`+ue+"','"+ne+"');",Se=this.dataLayer(ce,ue);return{iframe:ge,script:ye,dataLayerVar:Se}},dataLayer:function K(J,ne){return`
      window.`+ne+" = window."+ne+` || [];
      window.`+ne+".push("+JSON.stringify(J)+")"}},Snippets_1=Snippets,_Snippets=Snippets_1,_Snippets2=_interopRequireDefault$1(_Snippets);function _interopRequireDefault$1(K){return K&&K.__esModule?K:{default:K}}var TagManager$1={dataScript:function K(J){var ne=document.createElement("script");return ne.innerHTML=J,ne},gtm:function K(J){var ne=_Snippets2.default.tags(J),oe=function(){var pe=document.createElement("noscript");return pe.innerHTML=ne.iframe,pe},ce=function(){var pe=document.createElement("script");return pe.innerHTML=ne.script,pe},ue=this.dataScript(ne.dataLayerVar);return{noScript:oe,script:ce,dataScript:ue}},initialize:function K(J){var ne=J.gtmId,oe=J.events,ce=oe===void 0?{}:oe,ue=J.dataLayer,Ae=J.dataLayerName,pe=Ae===void 0?"dataLayer":Ae,xe=J.auth,me=xe===void 0?"":xe,ge=J.preview,ye=ge===void 0?"":ge,Se=this.gtm({id:ne,events:ce,dataLayer:ue||void 0,dataLayerName:pe,auth:me,preview:ye});ue&&document.head.appendChild(Se.dataScript),document.head.insertBefore(Se.script(),document.head.childNodes[0]),document.body.insertBefore(Se.noScript(),document.body.childNodes[0])},dataLayer:function K(J){var ne=J.dataLayer,oe=J.dataLayerName,ce=oe===void 0?"dataLayer":oe;if(window[ce])return window[ce].push(ne);var ue=_Snippets2.default.dataLayer(ne,ce),Ae=this.dataScript(ue);document.head.insertBefore(Ae,document.head.childNodes[0])}},TagManager_1=TagManager$1,_TagManager=TagManager_1,_TagManager2=_interopRequireDefault(_TagManager);function _interopRequireDefault(K){return K&&K.__esModule?K:{default:K}}var dist=_TagManager2.default;const TagManager=getDefaultExportFromCjs(dist),GoogleTagManager=()=>(reactExports.useEffect(()=>{TagManager.initialize({gtmId:env.googleTagManagerId})},[]),null),rootNode=document.getElementById("root"),root=createRoot(rootNode);root.render(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[env.googleTagManagerId&&jsxRuntimeExports.jsx(GoogleTagManager,{}),jsxRuntimeExports.jsx(Provider$2,{store,children:jsxRuntimeExports.jsx(SSEProvider,{children:jsxRuntimeExports.jsx(RouterProvider,{router,fallbackElement:jsxRuntimeExports.jsx(AppFallbackSkeleton,{})})})})]}));export{loader$1 as l};
